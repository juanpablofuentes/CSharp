@using Group.Salto.Common.Constants
@using Group.Salto.Common.Constants.Assets
@using Group.Salto.SOM.Web.Extensions
@using Group.Salto.SOM.Web.Models.Result
@using Group.Salto.Common.Enums
@using Group.Salto.SOM.Web.Models.Assets;
@model AssetsDetailViewModel

@{
    string title = @Html.GetLocalizedText(AssetsConstants.AssetsDetailsTitle);
    ViewData["Title"] = title;

    var claimUserConfigurationId = ((System.Security.Claims.ClaimsIdentity)User.Identity).GetSpecificClaim(AppIdentityClaims.UserId);
}

<div class="row">
    <div class="col-12">
        <ul class="nav nav-tabs" id="nav-tab" role="tablist">
            <li class="nav-item assets-tab">
                <a class="nav-link active" id="nav-generic-tab" data-toggle="tab" href="#nav-generic" role="tab" aria-controls="nav-generic" aria-selected="true">@Html.GetLocalizedText(AssetsConstants.AssetsGenericTab)</a>
            </li>
            <li class="nav-item assets-tab">
                <a class="nav-link" id="nav-warranty-tab" data-toggle="tab" href="#nav-warranty" role="tab" aria-controls="nav-warranty" aria-selected="true">@Html.GetLocalizedText(AssetsConstants.AssetsWarrantyTab)</a>
            </li>
            @if (Html.CanDoAction(claimUserConfigurationId, ActionGroupEnum.AssetWarranty, ActionEnum.View))
            {
                <li class="nav-item assets-tab">
                    <a class="nav-link" id="nav-history-tab" data-toggle="tab" href="#nav-history" role="tab" aria-controls="nav-history" aria-selected="true">@Html.GetLocalizedText(AssetsConstants.AssetsAuditTab)</a>
                </li>
            }
        </ul>
        <div class="tab-content py-3 px-3 px-sm-0" id="nav-tabContent">
            <div class="tab-pane fade show active" id="nav-generic" role="tabpanel" aria-labelledby="nav-generic-tab">
                <partial name="_GenericForm" for="GenericDetailViewModel" />
            </div>
            <div class="tab-pane fade" id="nav-warranty" role="tabpanel" aria-labelledby="nav-warranty-tab">
                <partial name="_WarrantyForm" for="SecondaryDetailViewModel" />
            </div>
            <div class="tab-pane fade" id="nav-history" role="tabpanel" aria-labelledby="nav-history-tab">
                <partial name="_AuditForm" for="AssetsAuditViewModel" />
            </div>
        </div>
    </div>
</div>
<br />