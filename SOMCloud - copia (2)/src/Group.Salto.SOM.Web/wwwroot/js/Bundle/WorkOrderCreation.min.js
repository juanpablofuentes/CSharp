function dhtmlXCalendarObject(n,t){var o,e,i,r,s,f,u,h;for(this.i={},o=null,e=typeof n=="string"?document.getElementById(n):n,e&&typeof e=="object"&&e.tagName&&String(e.tagName).toLowerCase()!="input"&&(o=e),e=null,typeof n=="object"&&n.length||(n=[n]),r=0;r<n.length;r++)typeof n[r]=="string"&&(n[r]=document.getElementById(n[r])||null),n[r]!=null&&n[r].tagName&&String(n[r].tagName).toLowerCase()=="input"?this.i[window.dhx4.newId()]={input:n[r]}:!(n[r]instanceof Array)&&n[r]instanceof Object&&(n[r].input!=null||n[r].button!=null)&&(n[r].input!=null&&typeof n[r].input=="string"&&(n[r].input=document.getElementById(n[r].input)),n[r].button!=null&&typeof n[r].button=="string"&&(n[r].button=document.getElementById(n[r].button)),this.i[window.dhx4.newId()]=n[r]),n[r]=null;for(this.conf={skin:t||window.dhx4.skin||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhtmlxcalendar")||"material",zi:window.dhx4.newId(),touch:!window.dhx4.isIE,time:!0,today:!1,ws_first:!0},this.setSkin=function(n,t){(this.conf.skin!=n||t)&&(this.conf.skin=n,this.base.className="dhtmlxcalendar_"+this.conf.skin,this._ifrSize())},this.base=document.createElement("DIV"),this.base.style.display="none",this.base.appendChild(document.createElement("DIV")),o!=null?(this._hasParent=!0,o.appendChild(this.base),o=null):document.body.appendChild(this.base),this.setParent=function(n){this._hasParent&&(typeof n=="object"?n.appendChild(this.base):typeof n=="string"&&document.getElementById(n).appendChild(this.base))},this.setSkin(this.conf.skin,!0),this.base.onclick=function(n){n=n||event;n.preventDefault&&n.preventDefault();n.cancelBubble=!0},this.base.onmousedown=function(){return!1},this.conf.touch&&(this.base.ontouchstart=this.base.onclick),this.loadUserLanguage=function(n){var r,t,i;if(this.langData[n]){if(this.lang=n,this.setWeekStartDay(this.langData[this.lang].weekstart),this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d"),this.msCont)for(r=0,t=0;t<this.msCont.childNodes.length;t++)for(i=0;i<this.msCont.childNodes[t].childNodes.length;i++)this.msCont.childNodes[t].childNodes[i].innerHTML=this.langData[this.lang].monthesSNames[r++];this.contTime.childNodes[0].childNodes[0].childNodes[5].innerHTML=this.langData[this.lang].today;this.contTime.childNodes[0].childNodes[0].childNodes[4].innerHTML=this.langData[this.lang].clear}},this.contMonth=document.createElement("DIV"),this.contMonth.className="dhtmlxcalendar_month_cont",this.contMonth.onselectstart=function(n){return n=n||event,n.cancelBubble=!0,n.preventDefault?n.preventDefault():n.returnValue=!1,!1},this.base.firstChild.appendChild(this.contMonth),f=document.createElement("UL"),f.className="dhtmlxcalendar_line",this.contMonth.appendChild(f),u=document.createElement("LI"),u.className="dhtmlxcalendar_cell dhtmlxcalendar_month_hdr",u.innerHTML="<div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left\";'><\/div><span><\/span><div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right\";'><\/div>",f.appendChild(u),i=this,u.onclick=function(n){var t,r,u;if(n=n||event,n.type=="touchstart"&&n.preventDefault!=null&&n.preventDefault(),t=n.target||n.srcElement,t.className&&t.className.indexOf("dhtmlxcalendar_month_arrow")===0){i._hideSelector();r=t.parentNode.firstChild==t?-1:1;u=new Date(i._activeMonth);i._drawMonth(new Date(i._activeMonth.getFullYear(),i._activeMonth.getMonth()+r,1,0,0,0,0));i._evOnArrowClick([u,new Date(i._activeMonth)]);return}if(t.className&&t.className=="dhtmlxcalendar_month_label_month"){n.cancelBubble=!0;i._showSelector("month",Math.round(t.offsetLeft+t.offsetWidth/2),t.offsetTop+t.offsetHeight+2,"selector_month",!0);return}if(t.className&&t.className=="dhtmlxcalendar_month_label_year"){n.cancelBubble=!0;i._showSelector("year",Math.round(t.offsetLeft+t.offsetWidth/2),t.offsetTop+t.offsetHeight+2,"selector_year",!0);return}i._hideSelector()},this.conf.touch==!0&&(u.ontouchstart=u.onclick),this.contDays=document.createElement("DIV"),this.contDays.className="dhtmlxcalendar_days_cont",this.base.firstChild.appendChild(this.contDays),this.setWeekStartDay=function(n){n==0&&(n=7);this._wStart=Math.min(Math.max(isNaN(n)?1:n,1),7);this._drawDaysOfWeek()},this._drawDaysOfWeek=function(){var n,r,u,t,i;for(this.contDays.childNodes.length==0?(n=document.createElement("UL"),n.className="dhtmlxcalendar_line",this.contDays.appendChild(n)):n=this.contDays.firstChild,r=this._wStart,u=this.langData[this.lang].daysSNames,u.push(String(this.langData[this.lang].daysSNames[0]).valueOf()),t=0;t<8;t++)n.childNodes[t]==null?(i=document.createElement("LI"),n.appendChild(i)):i=n.childNodes[t],t==0?(i.className="dhtmlxcalendar_cell_wn",i.innerHTML="<div class='dhtmlxcalendar_label'>"+(this.langData[this.lang].weekname||"w")+"<\/div>"):(i.className="dhtmlxcalendar_cell"+(r>=6?" dhtmlxcalendar_day_weekday_cell":"")+(t==1?"_first":""),i.innerHTML=u[r],++r>7&&(r=1));this._activeMonth!=null&&this._drawMonth(this._activeMonth)},this._wStart=this.langData[this.lang].weekstart,this.setWeekStartDay(this._wStart),this.contDates=document.createElement("DIV"),this.contDates.className="dhtmlxcalendar_dates_cont",this.base.firstChild.appendChild(this.contDates),this.contDates.onclick=function(n){var t,e;if(n=n||event,n.type=="touchstart"&&n.preventDefault!=null&&n.preventDefault(),t=n.target||n.srcElement,t.parentNode!=null&&t.parentNode._date!=null&&(t=t.parentNode),t._date!=null&&!t._css_dis){var u=i._activeDate.getHours(),f=i._activeDate.getMinutes(),r=t._date;if(i.checkEvent("onBeforeChange")&&!i.callEvent("onBeforeChange",[new Date(t._date.getFullYear(),t._date.getMonth(),t._date.getDate(),u,f)]))return;i._activeDateCell!=null&&(i._activeDateCell._css_date=!1,i._updateCellStyle(i._activeDateCell._q,i._activeDateCell._w));e=i._activeDate.getFullYear()+"_"+i._activeDate.getMonth()!=r.getFullYear()+"_"+r.getMonth();i._nullDate=!1;i._activeDate=new Date(r.getFullYear(),r.getMonth(),r.getDate(),u,f);i._activeDateCell=t;i._activeDateCell._css_date=!0;i._activeDateCell._css_hover=!1;i._updateCellStyle(i._activeDateCell._q,i._activeDateCell._w);e&&i._drawMonth(i._activeDate);i._updateInp();i._hasParent||(n.type=="touchstart"?window.setTimeout(function(){i._hide()},400):i._hide());i._evOnClick([new Date(i._activeDate.getTime())]);i._doOnSelectorChange(!0)}},this.conf.touch==!0&&(this.contDates.ontouchstart=this.contDates.onclick),this.contDates.onmouseover=function(n){n=n||event;var t=n.target||n.srcElement;if(t.parentNode!=null&&t.parentNode._date!=null&&(t=t.parentNode),t._date!=null){if(i._lastHover==t||t._css_hover)return;t._css_hover=!0;i._updateCellStyle(t._q,t._w);i._lastHover=t;i._evOnMouseOver([new Date(t._date.getFullYear(),t._date.getMonth(),t._date.getDate(),0,0,0,0),n]);t=null}},this.contDates.onmouseout=function(n){i._clearDayHover(n||event)},this._lastHover=null,this._clearDayHover=function(n){this._lastHover&&(this._lastHover._css_hover=!1,this._updateCellStyle(this._lastHover._q,this._lastHover._w),n!=null&&i._evOnMouseOut([new Date(this._lastHover._date.getFullYear(),this._lastHover._date.getMonth(),this._lastHover._date.getDate(),0,0,0,0),n]),this._lastHover=null)},r=0;r<6;r++)for(f=document.createElement("UL"),f.className="dhtmlxcalendar_line",this.contDates.appendChild(f),s=0;s<=7;s++)u=document.createElement("LI"),u.className=s==0?"dhtmlxcalendar_cell_wn":"dhtmlxcalendar_cell",f.appendChild(u);this.contTime=document.createElement("DIV");this.contTime.className="dhtmlxcalendar_time_cont";this.contTime.style.display="none";this.base.firstChild.appendChild(this.contTime);this.showTime=function(){this.conf.time!=!0&&(this.conf.time=!0,this._adjustTimeCont())};this.hideTime=function(){this.conf.time==!0&&(this.conf.time=!1,this._adjustTimeCont())};this.showToday=function(){this.conf.today!=!0&&(this.conf.today=!0,this._adjustTimeCont())};this.hideToday=function(){this.conf.today==!0&&(this.conf.today=!1,this._adjustTimeCont())};this._adjustTimeCont=function(){var n="";this.conf.time==!0&&(n+="_time");this.conf.today==!0&&(n+="_today");n==""?this.contTime.style.display="none":(this.contTime.className="dhtmlxcalendar_time_cont dhtmlxcalendar_mode"+n,this.contTime.style.display="");this._ifrSize()};this._adjustTimeCont();f=document.createElement("UL");f.className="dhtmlxcalendar_line";this.contTime.appendChild(f);u=document.createElement("LI");u.className="dhtmlxcalendar_cell dhtmlxcalendar_time_hdr";u.innerHTML="<div class='dhtmlxcalendar_time_img'><\/div><span class='dhtmlxcalendar_label_hours'><\/span><span class='dhtmlxcalendar_label_colon'>:<\/span><span class='dhtmlxcalendar_label_minutes'><\/span><span class='dhtmlxcalendar_label_clear'>"+this.langData[this.lang].clear+"<\/span><span class='dhtmlxcalendar_label_today'>"+this.langData[this.lang].today+"<\/span>";f.appendChild(u);u.onclick=function(n){var t,u,r;if(n=n||event,n.type=="touchstart"&&n.preventDefault!=null&&n.preventDefault(),t=n.target||n.srcElement,t.tagName!=null&&t.tagName.toLowerCase()=="span"&&t._par==!0&&t.parentNode!=null&&(t=t.parentNode),t.className&&t.className=="dhtmlxcalendar_label_hours"){n.cancelBubble=!0;u=i.contMonth.offsetHeight+i.contDays.offsetHeight+i.contDates.offsetHeight+t.offsetTop;i._showSelector("hours",Math.round(t.offsetLeft+t.offsetWidth/2),u-2,"selector_hours",!0);return}if(t.className&&t.className=="dhtmlxcalendar_label_minutes"){n.cancelBubble=!0;i._minutesInterval==1&&(r=i.getFormatedDate("%i"),t.innerHTML="<span class='dhtmlxcalendar_selected_date'>"+r.charAt(0)+"<\/span>"+r.charAt(1),t.firstChild._par=!0,i._selectorMode=1);u=i.contMonth.offsetHeight+i.contDays.offsetHeight+i.contDates.offsetHeight+t.offsetTop;i._showSelector("minutes",Math.round(t.offsetLeft+t.offsetWidth/2),u-2,"selector_minutes",!0);return}i._hideSelector();t.className&&t.className=="dhtmlxcalendar_label_today"&&(r=new Date,r=new Date(r.getFullYear(),r.getMonth(),r.getDate(),i._activeDate.getHours(),i._activeDate.getMinutes(),i._activeDate.getSeconds(),i._activeDate.getMilliseconds()),i.setDate(r),i._updateInp(),i.callEvent("onButtonClick",[r]));t.className&&t.className=="dhtmlxcalendar_label_clear"&&(i._nullDate=!0,i._drawMonth(new Date),i._updateInp(),i.callEvent("onButtonClick",[null]))};this.conf.touch==!0&&(u.ontouchstart=u.onclick);this._activeMonth=null;this._activeDate=new Date;this._activeDateCell=null;this.setDate=function(n){window.dhx4.temp_calendar={tz:null};this._nullDate=typeof n=="undefined"||n===""||!n;n instanceof Date||(n=this._strToDate(String(n||"")),n=="Invalid Date"?n=new Date:this.conf.tz=window.dhx4.temp_calendar.tz,window.dhx4.temp_calendar=null);this.conf.tz==null&&(this.conf.tz=window.dhx4.date2str(n,"%P"));var t=n.getTime();this._isOutOfRange(t)||(this._activeDate=new Date(t),this._drawMonth(this._nullDate?new Date:this._activeDate),this._updateVisibleHours(),this._updateVisibleMinutes())};this.getDate=function(n){var t,i;return this._nullDate?null:(t=new Date(this._activeDate.getTime()),n)?(window.dhx4.temp_calendar={tz:this.conf.tz},i=this._dateToStr(t),window.dhx4.temp_calendar=null,i):t};this._drawMonth=function(n){var i,c,t,e,o,u,a;if(n instanceof Date){isNaN(n.getFullYear())&&(n=new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),1,0,0,0,0));this._activeMonth=new Date(n.getFullYear(),n.getMonth(),1,0,0,0,0);this._activeDateCell=null;var r=new Date(this._activeMonth.getTime()),y=r.getDay(),s=y-this._wStart;s<0&&(s=s+7);r.setDate(r.getDate()-s);var p=n.getMonth(),l=new Date(this._activeDate.getFullYear(),this._activeDate.getMonth(),this._activeDate.getDate(),0,0,0,0).getTime(),h=0;for(i=0;i<6;i++)for(c=this._wStart,t=0;t<=7;t++)if(t==0)e=this.getWeekNumber(new Date(r.getFullYear(),r.getMonth(),r.getDate()+h,0,0,0,0)),e>=52&&this.conf.ws_first==!0&&this._activeMonth.getMonth()==0?(o=this.getWeekNumber(new Date(r.getFullYear(),r.getMonth(),r.getDate()+h+7,0,0,0,0)),o<e&&o>1&&(e=1)):e>52&&this._activeMonth.getMonth()==11&&(o=this.getWeekNumber(new Date(r.getFullYear()+1,0,1)),o==1&&(e=1)),this.contDates.childNodes[i].childNodes[t].innerHTML="<div class='dhtmlxcalendar_label'>"+e+"<\/div>";else{u=new Date(r.getFullYear(),r.getMonth(),r.getDate()+h,0,0,0,0);u.getHours()!=0&&(a=u.getHours()>12?24-u.getHours():u.getHours(),u.setTime(u.getTime()+36e5*a));var w=u.getDay(),f=u.getTime(),v="dhtmlxcalendar_label";this._tipData[f]!=null?(this._tipData[f].usePopup&&typeof dhtmlXPopup=="function"?(this.contDates.childNodes[i].childNodes[t].removeAttribute("title"),this._initTooltipPopup()):this.contDates.childNodes[i].childNodes[t].setAttribute("title",this._tipData[f].text),this._tipData[f].showIcon&&(v+=" dhtmlxcalendar_label_title")):this.contDates.childNodes[i].childNodes[t].removeAttribute("title");this.contDates.childNodes[i].childNodes[t].innerHTML="<div class='"+v+"'>"+u.getDate()+"<\/div>";this.contDates.childNodes[i].childNodes[t]._date=new Date(f);this.contDates.childNodes[i].childNodes[t]._q=i;this.contDates.childNodes[i].childNodes[t]._w=t;this.contDates.childNodes[i].childNodes[t]._css_month=u.getMonth()==p;this.contDates.childNodes[i].childNodes[t]._css_date=!this._nullDate&&f==l;this.contDates.childNodes[i].childNodes[t]._css_weekend=c>=6;this.contDates.childNodes[i].childNodes[t]._css_dis=this._isOutOfRange(f);this.contDates.childNodes[i].childNodes[t]._css_holiday=this._holidays[f]==!0;this._updateCellStyle(i,t);f==l&&(this._activeDateCell=this.contDates.childNodes[i].childNodes[t]);++c>7&&(c=1);h++}this.contMonth.firstChild.firstChild.childNodes[1].innerHTML=this._buildMonthHdr(n)}};this._updateCellStyle=function(n,t){var i=this.contDates.childNodes[n].childNodes[t],r="dhtmlxcalendar_cell dhtmlxcalendar_cell";r+=i._css_month?"_month":"";r+=i._css_date?"_date":"";r+=i._css_weekend?"_weekend":"";r+=i._css_holiday?"_holiday":"";r+=i._css_dis?"_dis":"";r+=i._css_hover&&!i._css_dis?"_hover":"";i.className=r;i=null};this._minutesInterval=5;this._initSelector=function(n,t){var f,e,u,o,r;if(this._selCover||(this._selCover=document.createElement("DIV"),this._selCover.className="dhtmlxcalendar_selector_cover",this.base.firstChild.appendChild(this._selCover)),this._sel||(this._sel=document.createElement("DIV"),this._sel.className="dhtmlxcalendar_selector_obj",this.base.firstChild.appendChild(this._sel),this._sel.appendChild(document.createElement("TABLE")),this._sel.firstChild.className="dhtmlxcalendar_selector_table",this._sel.firstChild.cellSpacing=0,this._sel.firstChild.cellPadding=0,this._sel.firstChild.border=0,this._sel.firstChild.appendChild(document.createElement("TBODY")),this._sel.firstChild.firstChild.appendChild(document.createElement("TR")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.childNodes[0].className="dhtmlxcalendar_selector_cell_left",this._sel.firstChild.firstChild.firstChild.childNodes[1].className="dhtmlxcalendar_selector_cell_middle",this._sel.firstChild.firstChild.firstChild.childNodes[2].className="dhtmlxcalendar_selector_cell_right",this._sel.firstChild.firstChild.firstChild.childNodes[0].innerHTML="&nbsp;",this._sel.firstChild.firstChild.firstChild.childNodes[2].innerHTML="&nbsp;",this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_left dhtmlxcalendar_selector_cell_left_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_left"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_right dhtmlxcalendar_selector_cell_right_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_right"},this._sel.onmouseover=function(n){n=n||event;var t=n.target||n.srcElement;t._cell===!0&&(i._selHover!=t&&i._clearSelHover(),String(t.className).match(/^\s{0,}dhtmlxcalendar_selector_cell\s{0,}$/gi)!=null&&(t.className+=" dhtmlxcalendar_selector_cell_hover",i._selHover=t))},this._sel.onmouseout=function(){i._clearSelHover()},this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick=function(n){n=n||event;n.type=="touchstart"&&n.preventDefault!=null&&n.preventDefault();n.cancelBubble=!0;i._scrollYears(-1)},this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick=function(n){n=n||event;n.type=="touchstart"&&n.preventDefault!=null&&n.preventDefault();n.cancelBubble=!0;i._scrollYears(1)},this.conf.touch==!0&&(this._sel.firstChild.firstChild.firstChild.childNodes[0].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick,this._sel.firstChild.firstChild.firstChild.childNodes[2].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick),this._sel._ta={},this._selHover=null,this._sel.appendChild(document.createElement("DIV")),this._sel.lastChild.className="dhtmlxcalendar_selector_obj_arrow"),this._sel._ta[n]!=!0){if(n=="month"){for(this._msCells={},this.msCont=document.createElement("DIV"),this.msCont.className="dhtmlxcalendar_area_"+t,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.msCont),f=0,e=0;e<4;e++)for(u=document.createElement("UL"),u.className="dhtmlxcalendar_selector_line",this.msCont.appendChild(u),o=0;o<3;o++)r=document.createElement("LI"),r.innerHTML=this.langData[this.lang].monthesSNames[f],r.className="dhtmlxcalendar_selector_cell",u.appendChild(r),r._month=f,r._cell=!0,this._msCells[f++]=r;this.msCont.onclick=function(n){n=n||event;n.type=="touchstart"&&n.preventDefault!=null&&n.preventDefault();n.cancelBubble=!0;var t=n.target||n.srcElement;t._month!=null&&(i._hideSelector(),i._updateActiveMonth(),i._drawMonth(new Date(i._activeMonth.getFullYear(),t._month,1,0,0,0,0)),i._doOnSelectorChange())};this.conf.touch==!0&&(this.msCont.ontouchstart=this.msCont.onclick)}if(n=="year"){for(this._ysCells={},this.ysCont=document.createElement("DIV"),this.ysCont.className="dhtmlxcalendar_area_"+t,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.ysCont),e=0;e<4;e++)for(u=document.createElement("UL"),u.className="dhtmlxcalendar_selector_line",this.ysCont.appendChild(u),o=0;o<3;o++)r=document.createElement("LI"),r.className="dhtmlxcalendar_selector_cell",r._cell=!0,u.appendChild(r);this.ysCont.onclick=function(n){n=n||event;n.type=="touchstart"&&n.preventDefault!=null&&n.preventDefault();n.cancelBubble=!0;var t=n.target||n.srcElement;t._year!=null&&(i._hideSelector(),i._drawMonth(new Date(t._year,i._activeMonth.getMonth(),1,0,0,0,0)),i._doOnSelectorChange())};this.conf.touch==!0&&(this.ysCont.ontouchstart=this.ysCont.onclick)}if(n=="hours"){for(this._hsCells={},this.hsCont=document.createElement("DIV"),this.hsCont.className="dhtmlxcalendar_area_"+t,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.hsCont),f=0,e=0;e<4;e++)for(u=document.createElement("UL"),u.className="dhtmlxcalendar_selector_line",this.hsCont.appendChild(u),o=0;o<6;o++)r=document.createElement("LI"),r.innerHTML=this._fixLength(f,2),r.className="dhtmlxcalendar_selector_cell",u.appendChild(r),r._hours=f,r._cell=!0,this._hsCells[f++]=r;this.hsCont.onclick=function(n){n=n||event;n.type=="touchstart"&&n.preventDefault!=null&&n.preventDefault();n.cancelBubble=!0;var t=n.target||n.srcElement;t._hours!=null&&(i._hideSelector(),i._activeDate.setHours(t._hours),i._updateActiveHours(),i._updateVisibleHours(),i._doOnSelectorChange(),i.callEvent("onTimeChange",[new Date(i._activeDate.getTime())]))};this.conf.touch==!0&&(this.hsCont.ontouchstart=this.hsCont.onclick)}if(n=="minutes"){var s=4,h=3,c=2;for(this._minutesInterval==1&&(this._selectorMode==1?(s=2,h=3,c=1):(s=2,h=5,c=1,t+="5")),this._minutesInterval==10&&(s=2),this._minutesInterval==15&&(s=1,h=4,t+="4"),this._rsCells={},this.rsCont=document.createElement("DIV"),this.rsCont.className="dhtmlxcalendar_area_"+t,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.rsCont),f=0,e=0;e<s;e++)for(u=document.createElement("UL"),u.className="dhtmlxcalendar_selector_line",this.rsCont.appendChild(u),o=0;o<h;o++)r=document.createElement("LI"),r.innerHTML=c>1?this._fixLength(f,c):f,r.className="dhtmlxcalendar_selector_cell",u.appendChild(r),r._minutes=f,r._cell=!0,this._rsCells[f]=r,f+=this._minutesInterval;this.rsCont.onclick=function(n){var t,r;if(n=n||event,n.type=="touchstart"&&n.preventDefault!=null&&n.preventDefault(),n.cancelBubble=!0,t=n.target||n.srcElement,t._minutes!=null){if(i._minutesInterval==1){if(r=i.getFormatedDate("%i"),r=i._selectorMode==1?t._minutes.toString()+r.charAt(1):r.charAt(0)+t._minutes.toString(),i._activeDate.setMinutes(Number(r)),i.callEvent("onTimeChange",[new Date(i._activeDate.getTime())]),i._hideSelector(),i._selectorMode==1){i._updateVisibleMinutes(!0);i._selectorMode=2;i._showSelector("minutes",i._sel._x,i._sel._y,"selector_minutes",!0);i._updateActiveMinutes();return}i._selectorMode=1}else i._hideSelector(),i._activeDate.setMinutes(t._minutes),i._updateActiveMinutes(),i.callEvent("onTimeChange",[new Date(i._activeDate.getTime())]);i._updateVisibleMinutes();i._doOnSelectorChange()}};this.conf.touch==!0&&(this.rsCont.ontouchstart=this.rsCont.onclick)}this._sel._ta[n]=!0}};this._showSelector=function(n,t,i,r,u){if(u===!0&&this._sel!=null&&this._isSelectorVisible()&&n==this._sel._t){this._hideSelector();return}this.conf.skin=="dhx_terrace"&&(t+=12);this._sel&&this._sel._ta[n]||this._initSelector(n,r);n!=this._sel._t&&this._sel._t=="minutes"&&this._minutesInterval==1&&(this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i"));this._sel._x=t;this._sel._y=i;this._sel.style.visibility="hidden";this._sel.style.display="";this._selCover.style.width=this.base.offsetWidth-2+"px";this._selCover.style.top=this.contMonth.offsetHeight+"px";this._selCover.style.height=this.contDates.offsetHeight+this.contDays.offsetHeight-1+"px";this._selCover.style.display="";this._sel._t=n;this._sel.className="dhtmlxcalendar_selector_obj dhtmlxcalendar_"+r+(n=="hours"&&this.conf.today==!0?"2":"");this._sel.childNodes[0].firstChild.firstChild.childNodes[0].style.display=this._sel.childNodes[0].firstChild.firstChild.childNodes[2].style.display=n=="year"?"":"none";var f=Math.max(0,t-Math.round(this._sel.offsetWidth/2));f+this._sel.offsetWidth>this._sel.parentNode.offsetWidth&&(f=this._sel.parentNode.offsetWidth-this._sel.offsetWidth);this._sel.style.left=f+"px";this._sel.style.top=n=="hours"||n=="minutes"?i-this._sel.offsetHeight+"px":i+"px";this._sel.childNodes[1].style.width=this._sel.childNodes[0].offsetWidth+"px";this._sel.style.visibility="visible";this._doOnSelectorShow(n)};this._doOnSelectorShow=function(n){n=="month"&&this._updateActiveMonth();n=="year"&&this._updateYearsList(this._activeMonth);n=="hours"&&this._updateActiveHours();n=="minutes"&&this._updateActiveMinutes()};this._hideSelector=function(){this._sel&&(this._sel.style.display="none",this._sel.style.visible="hidden",this._selCover.style.display="none",this._sel._t=="minutes"&&this._minutesInterval==1&&(this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i"),this._unloadSelector("minutes")))};this._isSelectorVisible=function(){return this._sel?this._sel.style.display!="none":!1};this._doOnSelectorChange=function(n){this.callEvent("onChange",[new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),this._activeDate.getDate(),this._activeDate.getHours(),this._activeDate.getMinutes(),this._activeDate.getSeconds()),n===!0])};this._clearSelHover=function(){this._selHover&&(this._selHover.className=String(this._selHover.className.replace(/dhtmlxcalendar_selector_cell_hover/gi,"")),this._selHover=null)};this._unloadSelector=function(n){var t;if(this._sel&&this._sel._ta[n]){if(n=="month"){this.msCont.onclick=this.msCont.ontouchstart=null;this._msActive=null;for(t in this._msCells)this._msCells[t]._cell=null,this._msCells[t]._month=null,this._msCells[t].parentNode.removeChild(this._msCells[t]),this._msCells[t]=null;for(this._msCells=null;this.msCont.childNodes.length>0;)this.msCont.removeChild(this.msCont.lastChild);this.msCont.parentNode.removeChild(this.msCont);this.msCont=null}if(n=="year"){this.ysCont.onclick=this.ysCont.ontouchstart=null;for(t in this._ysCells)this._ysCells[t]._cell=null,this._ysCells[t]._year=null,this._ysCells[t].parentNode.removeChild(this._ysCells[t]),this._ysCells[t]=null;for(this._ysCells=null;this.ysCont.childNodes.length>0;)this.ysCont.removeChild(this.ysCont.lastChild);this.ysCont.parentNode.removeChild(this.ysCont);this.ysCont=null}if(n=="hours"){this.hsCont.onclick=this.hsCont.ontouchstart=null;this._hsActive=null;for(t in this._hsCells)this._hsCells[t]._cell=null,this._hsCells[t]._hours=null,this._hsCells[t].parentNode.removeChild(this._hsCells[t]),this._hsCells[t]=null;for(this._hsCells=null;this.hsCont.childNodes.length>0;)this.hsCont.removeChild(this.hsCont.lastChild);this.hsCont.parentNode.removeChild(this.hsCont);this.hsCont=null}if(n=="minutes"){this.rsCont.onclick=this.rsCont.ontouchstart=null;this._rsActive=null;for(t in this._rsCells)this._rsCells[t]._cell=null,this._rsCells[t]._minutes=null,this._rsCells[t].parentNode.removeChild(this._rsCells[t]),this._rsCells[t]=null;for(this._rsCells=null;this.rsCont.childNodes.length>0;)this.rsCont.removeChild(this.rsCont.lastChild);this.rsCont.parentNode.removeChild(this.rsCont);this.rsCont=null}this._sel._ta[n]=null}};this.setMinutesInterval=function(n){(n==1||n==5||n==10||n==15)&&(this._minutesInterval=n,this._unloadSelector("minutes"))};this._updateActiveMonth=function(){typeof this._msActive!="undefined"&&typeof this._msCells[this._msActive]!="undefined"&&(this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell");this._msActive=this._activeMonth.getMonth();this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"};this._updateActiveYear=function(){var n=this._activeMonth.getFullYear();this._ysCells[n]&&(this._ysCells[n].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")};this._updateYearsList=function(n){var u,r,t,i;for(u in this._ysCells)this._ysCells[u]=null,delete this._ysCells[u];for(r=12*Math.floor(n.getFullYear()/12),t=0;t<4;t++)for(i=0;i<3;i++)this.ysCont.childNodes[t].childNodes[i].innerHTML=r,this.ysCont.childNodes[t].childNodes[i]._year=r,this.ysCont.childNodes[t].childNodes[i].className="dhtmlxcalendar_selector_cell",this._ysCells[r++]=this.ysCont.childNodes[t].childNodes[i];this._updateActiveYear()};this._scrollYears=function(n){var t=(n<0?this.ysCont.firstChild.firstChild._year:this.ysCont.lastChild.lastChild._year)+n,i=new Date(t,this._activeMonth.getMonth(),1,0,0,0,0);this._updateYearsList(i)};this._updateActiveHours=function(){typeof this._hsActive!="undefined"&&typeof this._hsCells[this._hsActive]!="undefined"&&(this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell");this._hsActive=this._activeDate.getHours();this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"};this._updateVisibleHours=function(){this.contTime.firstChild.firstChild.childNodes[1].innerHTML=this._fixLength(this._activeDate.getHours(),2)};this._updateActiveMinutes=function(){this._rsActive!=null&&typeof this._rsActive!="undefined"&&typeof this._rsCells[this._rsActive]!="undefined"&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell");this._rsActive=this._minutesInterval==1?this.getFormatedDate("%i").toString().charAt(this._selectorMode==1?0:1):this._activeDate.getMinutes();typeof this._rsCells[this._rsActive]!="undefined"&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")};this._updateVisibleMinutes=function(n){var t=this._fixLength(this._activeDate.getMinutes(),2).toString();n==!0&&(t=t.charAt(0)+"<span class='dhtmlxcalendar_selected_date'>"+t.charAt(1)+"<\/span>");this.contTime.firstChild.firstChild.childNodes[3].innerHTML=t;n==!0&&(this.contTime.firstChild.firstChild.childNodes[3].lastChild._par=!0)};this._fixLength=function(n,t){while(String(n).length<t)n="0"+String(n);return n};this._dateFormat="";this._dateFormatRE=null;this.setDateFormat=function(n){var r={},u,f,t;if(this._strToDate!=null)for(t in this.i)this.i[t].input!=null&&this.i[t].input.value.length>0&&(u=this._strToDate(this.i[t].input.value,this._dateFormat||this.langData[this.lang].dateformat||"%Y-%m-%d"),u instanceof Date&&(r[t]=u));this._dateFormat=n;f=String(this._dateFormat).replace(/%[a-zA-Z]+/g,function(n){var t=n.replace(/%/,"");switch(t){case"n":case"h":case"j":case"g":case"G":return"\\d{1,2}";case"m":case"d":case"H":case"i":case"s":case"y":return"\\d{2}";case"Y":return"\\d{4}";case"M":return"("+i.langData[i.lang].monthesSNames.join("|").toLowerCase()+"){1,}";case"F":return"("+i.langData[i.lang].monthesFNames.join("|").toLowerCase()+"){1,}";case"D":return"[a-z]{2}";case"a":case"A":return"AM|PM";case"u":return"\\d{1,6}";case"P":return"[\\+\\-]\\d{1,2}\\:\\d{1,2}"}return n});this._dateFormatRE=new RegExp(f,"i");for(t in r)this.i[t].input.value=this._dateToStr(r[t]);r=null};this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d");this._updateDateStr=function(n){if(this._dateFormatRE&&n.match(this._dateFormatRE)&&n!=this.getFormatedDate()){var t=this._strToDate(n);if(t instanceof Date){if(this.checkEvent("onBeforeChange")&&!this.callEvent("onBeforeChange",[new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())])){this._updateInp();return}this._nullDate=!1;this._activeDate=t;this._drawMonth(this._nullDate?new Date:this._activeDate);this._updateVisibleMinutes();this._updateVisibleHours();this._sel&&this._isSelectorVisible()&&this._doOnSelectorShow(this._sel._t);this._doOnSelectorChange(!0)}}};this.showMonth=function(n){(typeof n=="string"&&(n=this._strToDate(n)),n instanceof Date)&&this._drawMonth(n)};this.setFormatedDate=function(n,t,i,r){var u=this._strToDate(t,n);if(r)return u;this.setDate(u)};this.getFormatedDate=function(n,t){if(!(t&&t instanceof Date)){if(this._nullDate)return"";t=new Date(this._activeDate)}return this._dateToStr(t,n)};this.getWeekNumber=function(n){var t,i,r,u;return(typeof n=="string"&&(n=this._strToDate(n)),!(n instanceof Date))?"Invalid Date":(t=n.getDay(),t===0&&(t=7),i=new Date(n.valueOf()),i.setDate(n.getDate()+(4-t)),r=i.getFullYear(),u=Math.round((i.getTime()-new Date(r,0,1).getTime())/864e5),1+Math.floor(u/7))};this.showWeekNumbers=function(){this.base.firstChild.className="dhtmlxcalendar_wn"};this.hideWeekNumbers=function(){this.base.firstChild.className=""};this.show=function(n){var t,i;if(!n&&this._hasParent){this._show();return}if(typeof n=="string"&&(t=document.getElementById(n),t!=null&&typeof t._dhtmlxcalendar_uid!="undefined"&&this.i[t._dhtmlxcalendar_uid]!=null)){this._show(t._dhtmlxcalendar_uid);return}if(typeof n=="object"&&typeof n._dhtmlxcalendar_uid!="undefined"&&this.i[n._dhtmlxcalendar_uid]==n){this._show(n._dhtmlxcalendar_uid);return}if(typeof n=="undefined")for(i in this.i)n||(n=i);n&&this._show(n)};this.hide=function(){this._isVisible()&&this._hide()};this.isVisible=function(){return this._isVisible()};this._activeInp=null;this.pos="bottom";this.setPosition=function(n,t){this._px=null;this._py=null;n=="right"||n=="bottom"?this.pos=n:(this.pos="int",typeof n=="undefined"||isNaN(n)||(this.base.style.left=n+"px",this._px=n),typeof t=="undefined"||isNaN(t)||(this.base.style.top=t+"px",this._py=t),this._ifrSize())};this._show=function(n,t){var u,o,f;if(t===!0&&this._activeInp==n&&this._isVisible()){this._hide();return}if(this.base.style.visibility="hidden",this.base.style.display="",n){this.base.className.indexOf("dhtmlxcalendar_in_input")==-1&&(this.base.className+=" dhtmlxcalendar_in_input");var i=this.i[n].input||this.i[n].button,e=window.dhx4.screenDim(),r={top:window.dhx4.absTop(i),left:window.dhx4.absLeft(i)};this.pos=="right"?(this.base.style.left=r.left+i.offsetWidth+"px",this.base.style.top=Math.min(r.top,e.bottom-this.base.offsetHeight)+"px"):this.pos=="bottom"?(u=r.top+i.offsetHeight+1,u+this.base.offsetHeight>e.bottom&&(o=r.top-this.base.offsetHeight,o>=-20&&(u=o)),f=r.left,f+this.base.offsetWidth>e.right&&(f=Math.max(0,r.left+i.offsetWidth-this.base.offsetWidth)),this.base.style.left=f+"px",this.base.style.top=u+"px"):(this.base.style.left=(this._px||0)+"px",this.base.style.top=(this._py||0)+"px");this._activeInp=n;i=null}else this._px!=null&&this._py!=null?(this.base.style.left=this._px+"px",this.base.style.top=this._py+"px"):(this.base.style.left="0px",this.base.style.top="0px");this._hideSelector();this.base.style.visibility="visible";this.base.style.zIndex=window.dhx4.zim.reserve(this.conf.zi);this._ifrSize();this._ifr&&(this._ifr.style.display="");this.callEvent("onShow",[])};this._hide=function(){this._lastHover!=null&&this._clearDayHover();this._hideSelector();this.base.style.display="none";window.dhx4.zim.clear(this.conf.zi);this.base.className.indexOf("dhtmlxcalendar_in_input")>=0&&(this.base.className=this.base.className.replace(/\s{0,}dhtmlxcalendar_in_input/gi,""));this._activeInp=null;this._ifr&&(this._ifr.style.display="none");this.callEvent("onHide",[])};this._isVisible=function(){return this.base.style.display!="none"};this._rangeActive=!1;this._rangeFrom=null;this._rangeTo=null;this._rangeSet={};this.setInsensitiveDays=function(n){for(var i=this._extractDates(n),t=0;t<i.length;t++)this._rangeSet[new Date(i[t].getFullYear(),i[t].getMonth(),i[t].getDate(),0,0,0,0).getTime()]=!0;this._drawMonth(this._activeMonth)};this.clearInsensitiveDays=function(){this._clearRangeSet();this._drawMonth(this._activeMonth)};this._holidays={};this.setHolidays=function(n){var i,t;if(n==null)this._clearHolidays();else if(n!=null)for(i=this._extractDates(n),t=0;t<i.length;t++)this._holidays[new Date(i[t].getFullYear(),i[t].getMonth(),i[t].getDate(),0,0,0,0).getTime()]=!0;this._drawMonth(this._activeMonth)};this._extractDates=function(n){var i,t,u,r;for((typeof n=="string"||n instanceof Date)&&(n=[n]),i=[],t=0;t<n.length;t++)if(typeof n[t]=="string")for(u=n[t].split(","),r=0;r<u.length;r++)i.push(this._strToDate(u[r]));else n[t]instanceof Date&&i.push(n[t]);return i};this._clearRange=function(){this._rangeActive=!1;this._rangeType=null;this._rangeFrom=null;this._rangeTo=null};this._clearRangeSet=function(){for(var n in this._rangeSet)this._rangeSet[n]=null,delete this._rangeSet[n]};this._clearHolidays=function(){for(var n in this._holidays)this._holidays[n]=null,delete this._holidays[n]};this._isOutOfRange=function(n){if(this._rangeSet[n]==!0||this._rangeActive&&(this._rangeType=="in"&&(n<this._rangeFrom||n>this._rangeTo)||this._rangeType=="out"&&n>=this._rangeFrom&&n<=this._rangeTo||this._rangeType=="from"&&n<this._rangeFrom||this._rangeType=="to"&&n>this._rangeTo))return!0;var t=new Date(n);return this._rangeWeek&&this._rangeWeekData[t.getDay()]===!0?!0:this._rangeMonth&&this._rangeMonthData[t.getDate()]===!0?!0:this._rangeYear&&this._rangeYearData[t.getMonth()+"_"+t.getDate()]===!0?!0:!1};this.clearSensitiveRange=function(){this._clearRange();this._drawMonth(this._activeMonth)};this.setSensitiveRange=function(n,t,i){var r=!1;if(n!=null&&t!=null){if(n instanceof Date||(n=this._strToDate(n)),t instanceof Date||(t=this._strToDate(t)),n.getTime()>t.getTime())return;this._rangeFrom=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0).getTime();this._rangeTo=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime();this._rangeActive=!0;this._rangeType="in";r=!0}r||n==null||t!=null||(n instanceof Date||(n=this._strToDate(n)),this._rangeFrom=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0).getTime(),this._rangeTo=null,i===!0&&this._rangeFrom++,this._rangeActive=!0,this._rangeType="from",r=!0);r||n!=null||t==null||(t instanceof Date||(t=this._strToDate(t)),this._rangeFrom=null,this._rangeTo=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime(),i===!0&&this._rangeTo--,this._rangeActive=!0,this._rangeType="to",r=!0);r&&this._drawMonth(this._activeMonth)};this.setInsensitiveRange=function(n,t){if(n!=null&&t!=null){if(n instanceof Date||(n=this._strToDate(n)),t instanceof Date||(t=this._strToDate(t)),n.getTime()>t.getTime())return;this._rangeFrom=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0).getTime();this._rangeTo=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime();this._rangeActive=!0;this._rangeType="out";this._drawMonth(this._activeMonth);return}if(n!=null&&t==null){this.setSensitiveRange(null,n,!0);return}if(n==null&&t!=null){this.setSensitiveRange(t,null,!0);return}};this.disableDays=function(n,t){var u,r,i;if(n=="week"){typeof t!="object"&&typeof t.length=="undefined"&&(t=[t]);this._rangeWeekData||(this._rangeWeekData={});for(r in this._rangeWeekData)this._rangeWeekData[r]=!1,delete this._rangeWeekData[r];for(i=0;i<t.length;i++)this._rangeWeekData[t[i]]=!0,t[i]==7&&(this._rangeWeekData[0]=!0);this._rangeWeek=!0}if(n=="month"){typeof t!="object"&&typeof t.length=="undefined"&&(t=[t]);this._rangeMonthData||(this._rangeMonthData={});for(r in this._rangeMonthData)this._rangeMonthData[r]=!1,delete this._rangeMonthData[r];for(i=0;i<t.length;i++)this._rangeMonthData[t[i]]=!0;this._rangeMonth=!0}if(n=="year"){u=this._extractDates(t);this._rangeYearData||(this._rangeYearData={});for(r in this._rangeYearData)this._rangeYearData[r]=!1,delete this._rangeYearData[r];for(i=0;i<u.length;i++)this._rangeYearData[u[i].getMonth()+"_"+u[i].getDate()]=!0;this._rangeYear=!0}this._drawMonth(this._activeMonth)};this.enableDays=function(n){n=="week"&&(this._rangeWeek=!1);n=="month"&&(this._rangeMonth=!1);n=="year"&&(this._rangeYear=!1);this._drawMonth(this._activeMonth)};this._tipData={};this._tipTM=null;this._tipTMTime=400;this._tipEvs=!1;this._tipPopup=null;this._tipCellDate=null;this._tipCellDim=null;this.setTooltip=function(n,t,i,r){for(var e,f=this._extractDates(n),u=0;u<f.length;u++)e=new Date(f[u].getFullYear(),f[u].getMonth(),f[u].getDate(),0,0,0,0).getTime(),this._tipData[e]={text:t,showIcon:i,usePopup:r};this._drawMonth(this._activeMonth)};this.clearTooltip=function(n){for(var r,i=this._extractDates(n),t=0;t<i.length;t++)r=new Date(i[t].getFullYear(),i[t].getMonth(),i[t].getDate(),0,0,0,0).getTime(),this._tipData[r]=null,delete this._tipData[r];this._drawMonth(this._activeMonth)};this._initTooltipPopup=function(){this._tipEvs||(this.attachEvent("onMouseOver",function(n){var t=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0).getTime();this._tipData[t]!=null&&(this._tipTM&&window.clearTimeout(this._tipTM),this._tipCellDate=n,this._tipCellDim=this.getCellDimension(n),this._tipText=this._tipData[t].text,this._tipTM=window.setTimeout(this._showTooltipPopup,this._tipTMTime))}),this.attachEvent("onMouseOut",this._hideTooltipPopup),this._tipEvs=!0)};this._showTooltipPopup=function(){i._tipPopup||(i._tipPopup=new dhtmlXPopup({mode:"top"}));i._tipPopup.attachHTML(i._tipText);i._tipPopup.show(i._tipCellDim.x,i._tipCellDim.y,i._tipCellDim.w,i._tipCellDim.h);i.callEvent("onPopupShow",[i._tipCellDate])};this._hideTooltipPopup=function(){this._tipTM&&window.clearTimeout(this._tipTM);this._tipPopup!=null&&this._tipPopup.isVisible()&&(this._tipPopup.hide(),this.callEvent("onPopupHide",[this._tipCellDate]))};this.getPopup=function(){return this._tipPopup};this.getCellDimension=function(n){var f,u,i,r,t;if(typeof n=="string"&&(n=this._strToDate(n)),!(n instanceof Date))return null;for(f=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0).getTime(),u=null,i=0;i<this.contDates.childNodes.length;i++)for(r=0;r<this.contDates.childNodes[i].childNodes.length;r++)t=this.contDates.childNodes[i].childNodes[r],t._date!=null&&t._date.getTime()==f&&(u={x:window.dhx4.absLeft(t),y:window.dhx4.absTop(t),w:t.offsetWidth,h:t.offsetHeight}),t=null;return u};this._updateFromInput=function(n){if(this._nullInInput&&n.value.replace(/\s/g,"").length==0){if(this.checkEvent("onBeforeChange")&&!this.callEvent("onBeforeChange",[null])){this._updateInp();return}this.setDate(null)}else this._updateDateStr(n.value);n=null};this._doOnClick=function(n){n=n||event;var t=n.target||n.srcElement;if(t._dhtmlxcalendar_uid&&t._dhtmlxcalendar_uid!=i._activeInp&&i._isVisible()&&i._activeInp){i._hide();return}t._dhtmlxcalendar_uid&&i.i[t._dhtmlxcalendar_uid]||(i._isSelectorVisible()?i._hideSelector():!i._hasParent&&i._isVisible()&&i._hide())};this._doOnKeyDown=function(n){n=n||event;(n.keyCode==27||n.keyCode==13)&&(i._isSelectorVisible()?i._hideSelector():i._isVisible()&&!i._hasParent&&i._hide())};this._doOnInpClick=function(n){n=n||event;n.type=="touchstart"&&n.preventDefault!=null&&n.preventDefault();var t=n.target||n.srcElement;t._dhtmlxcalendar_uid&&(i._listenerEnabled||i._updateFromInput(t),i._show(t._dhtmlxcalendar_uid,!0))};this._doOnInpKeyUp=function(n){n=n||event;var t=n.target||n.srcElement;n.keyCode!=13&&t._dhtmlxcalendar_uid&&(i._listenerEnabled||i._updateFromInput(t))};this._doOnBtnClick=function(n){n=n||event;n.type=="touchstart"&&n.preventDefault!=null&&n.preventDefault();var t=n.target||n.srcElement;t._dhtmlxcalendar_uid&&(i.i[t._dhtmlxcalendar_uid].input!=null&&i._updateFromInput(i.i[t._dhtmlxcalendar_uid].input),i._show(t._dhtmlxcalendar_uid,!0))};this._doOnUnload=function(){i&&i.unload&&i.unload()};typeof addEventListener=="function"?(document.body.addEventListener("click",i._doOnClick,!1),window.addEventListener("keydown",i._doOnKeyDown,!1),window.addEventListener("unload",i._doOnUnload,!1),this.conf.touch==!0&&document.body.addEventListener("touchstart",i._doOnClick,!1)):(document.body.attachEvent("onclick",i._doOnClick),document.body.attachEvent("onkeydown",i._doOnKeyDown),window.attachEvent("onunload",i._doOnUnload));this.attachObj=function(n){var t=window.dhx4.newId();return typeof n=="string"?this.i[t]={input:document.getElementById(n)}:typeof n.tagName!="undefined"?this.i[t]={input:n}:typeof n=="object"&&(n.input!=null||n.button!=null)&&(this.i[t]={},n.input!=null&&(this.i[t].input=typeof n.input=="string"?document.getElementById(n.input):n.input),n.button!=null&&(this.i[t].button=typeof n.button=="string"?document.getElementById(n.button):n.button)),this._attachEventsToObject(t),t};this.detachObj=function(n){var t=null,i;if(this.i[n]!=null?t=n:typeof n=="string"?(n=document.getElementById(n),t=n._dhtmlxcalendar_uid):typeof n.tagName!="undefined"?t=n._dhtmlxcalendar_uid:typeof n=="object"&&(n.input!=null||n.button!=null)&&(t==null&&n.input!=null&&(t=(typeof n.input=="string"?document.getElementById(n.input):n.input)._dhtmlxcalendar_uid),t==null&&n.button!=null&&(t=(typeof n.button=="string"?document.getElementById(n.button):n.button)._dhtmlxcalendar_uid)),t!=null&&this.i[t]!=null){this._detachEventsFromObject(t);for(i in this.i[i])this.i[t][i]._dhtmlxcalendar_uid=null,this.i[t][i]=null,delete this.i[t][i];return this.i[t]=null,delete this.i[t],!0}return!1};this._attachEventsToObject=function(n){this.i[n].button!=null?(this.i[n].button._dhtmlxcalendar_uid=n,typeof addEventListener=="function"?(this.i[n].button.addEventListener("click",i._doOnBtnClick,!1),this.conf.touch==!0&&this.i[n].button.addEventListener("touchstart",i._doOnBtnClick,!1)):this.i[n].button.attachEvent("onclick",i._doOnBtnClick)):this.i[n].input!=null&&(this.i[n].input._dhtmlxcalendar_uid=n,typeof addEventListener=="function"?(this.i[n].input.addEventListener("click",i._doOnInpClick,!1),this.i[n].input.addEventListener("keyup",i._doOnInpKeyUp,!1),this.conf.touch==!0&&this.i[n].input.addEventListener("touchstart",i._doOnInpClick,!1)):(this.i[n].input.attachEvent("onclick",i._doOnInpClick),this.i[n].input.attachEvent("onkeyup",i._doOnInpKeyUp)))};this._detachEventsFromObject=function(n){this.i[n].button!=null?typeof addEventListener=="function"?(this.i[n].button.removeEventListener("click",i._doOnBtnClick,!1),this.conf.touch==!0&&this.i[n].button.removeEventListener("touchstart",i._doOnBtnClick,!1)):this.i[n].button.detachEvent("onclick",i._doOnBtnClick):this.i[n].input!=null&&(typeof addEventListener=="function"?(this.i[n].input.removeEventListener("click",i._doOnInpClick,!1),this.i[n].input.removeEventListener("keyup",i._doOnInpKeyUp,!1),this.conf.touch==!0&&this.i[n].input.removeEventListener("touchstart",i._doOnInpClick,!1)):(this.i[n].input.detachEvent("onclick",i._doOnInpClick),this.i[n].input.detachEvent("onkeyup",i._doOnInpKeyUp)))};this._updateInp=function(){this.i!=null&&this._activeInp!=null&&this.i[this._activeInp]!=null&&this.i[this._activeInp].input!=null&&(this.i[this._activeInp].input.value=this.getFormatedDate())};this.enableListener=function(n){n&&(typeof addEventListener=="function"?(n.addEventListener("focus",i._listenerEvFocus,!1),n.addEventListener("blur",i._listenerEvBlur,!1)):(n.attachEvent("onfocus",i._listenerEvFocus),n.attachEvent("onblur",i._listenerEvBlur)),n=null)};this.disableListener=function(n){n&&(n._f0=!1,this._tmListener&&window.clearTimeout(this._tmListener),typeof addEventListener=="function"?(n.removeEventListener("focus",i._listenerEvFocus,!1),n.removeEventListener("blur",i._listenerEvBlur,!1)):(n.detachEvent("onfocus",i._listenerEvFocus),n.detachEvent("onblur",i._listenerEvBlur)),n=null)};this._startListener=function(n){this._tmListener&&window.clearTimeout(this._tmListener);typeof n._v1=="undefined"&&(n._v1=n.value);n._v1!=n.value&&(this._updateFromInput(n),n._v1=n.value);n._f0&&(this._tmListener=window.setTimeout(function(){i._startListener(n)},100))};this._listenerEvFocus=function(n){n=n||event;var t=n.target||n.srcElement;t._f0=!0;i._startListener(t);t=null};this._listenerEvBlur=function(n){n=n||event;var t=n.target||n.srcElement;t._f0=!1;t=null};for(h in this.i)this._attachEventsToObject(h);return window.dhx4._eventable(this),this._evOnArrowClick=function(n){return this.callEvent("onArrowClick",n)},this._evOnClick=function(n){return this.callEvent("onClick",n)},this._evOnMouseOut=function(n){return this.callEvent("onMouseOut",n)},this._evOnMouseOver=function(n){return this.callEvent("onMouseOver",n)},this.unload=function(){var n;this._activeDate=null;this._activeDateCell=null;this._activeInp=null;this._activeMonth=null;this._dateFormat=null;this._dateFormatRE=null;this._lastHover=null;this._tmListener&&window.clearTimeout(this._tmListener);this._tmListener=null;typeof addEventListener=="function"?(document.body.removeEventListener("click",i._doOnClick,!1),window.removeEventListener("keydown",i._doOnKeyDown,!1),window.removeEventListener("unload",i._doOnUnload,!1),this.conf.touch==!0&&document.body.removeEventListener("touchstart",i._doOnClick,!1)):(document.body.detachEvent("onclick",i._doOnClick),document.body.detachEvent("onkeydown",i._doOnKeyDown),window.detachEvent("onunload",i._doOnKeyDown));this._doOnClick=null;this._doOnKeyDown=null;this._doOnUnload=null;for(n in this.i)this.i[n]._dhtmlxcalendar_uid=null,this._detachEventsFromObject(n),this.disableListener(this.i[n].input),this.i[n]=null,delete this.i[n];for(this.i=null,this._doOnInpClick=null,this._doOnInpKeyUp=null,window.dhx4._eventable(this,"clear"),this.contMonth.onselectstart=null,this.contMonth.firstChild.firstChild.onclick=null,this.contMonth.firstChild.firstChild.ontouchstart=null,this.contMonth.firstChild.firstChild.firstChild.onmouseover=null,this.contMonth.firstChild.firstChild.firstChild.onmouseout=null,this.contMonth.firstChild.firstChild.lastChild.onmouseover=null,this.contMonth.firstChild.firstChild.lastChild.onmouseout=null;this.contMonth.firstChild.firstChild.childNodes.length>0;)this.contMonth.firstChild.firstChild.removeChild(this.contMonth.firstChild.firstChild.lastChild);for(this.contMonth.firstChild.removeChild(this.contMonth.firstChild.firstChild),this.contMonth.removeChild(this.contMonth.firstChild),this.contMonth.parentNode.removeChild(this.contMonth),this.contMonth=null;this.contDays.firstChild.childNodes.length>0;)this.contDays.firstChild.removeChild(this.contDays.firstChild.lastChild);for(this.contDays.removeChild(this.contDays.firstChild),this.contDays.parentNode.removeChild(this.contDays),this.contDays=null,this.contDates.onclick=null,this.contDates.ontouchstart=null,this.contDates.onmouseover=null,this.contDates.onmouseout=null;this.contDates.childNodes.length>0;){while(this.contDates.lastChild.childNodes.length>0)this.contDates.lastChild.lastChild._css_date=null,this.contDates.lastChild.lastChild._css_month=null,this.contDates.lastChild.lastChild._css_weekend=null,this.contDates.lastChild.lastChild._css_hover=null,this.contDates.lastChild.lastChild._date=null,this.contDates.lastChild.lastChild._q=null,this.contDates.lastChild.lastChild._w=null,this.contDates.lastChild.removeChild(this.contDates.lastChild.lastChild);this.contDates.removeChild(this.contDates.lastChild)}for(this.contDates.parentNode.removeChild(this.contDates),this.contDates=null,this.contTime.firstChild.firstChild.onclick=null,this.contTime.firstChild.firstChild.ontouchstart=null;this.contTime.firstChild.firstChild.childNodes.length>0;)this.contTime.firstChild.firstChild.removeChild(this.contTime.firstChild.firstChild.lastChild);if(this.contTime.firstChild.removeChild(this.contTime.firstChild.firstChild),this.contTime.removeChild(this.contTime.firstChild),this.contTime.parentNode.removeChild(this.contTime),this.contTime=null,this._lastHover=null,this._unloadSelector("month"),this._unloadSelector("year"),this._unloadSelector("hours"),this._unloadSelector("minutes"),this._selCover&&(this._selCover.parentNode.removeChild(this._selCover),this._selCover=null),this._sel){for(n in this._sel._ta)this._sel._ta[n]=null;for(this._sel._ta=null,this._sel._t=null,this._sel.onmouseover=null,this._sel.onmouseout=null;this._sel.firstChild.firstChild.firstChild.childNodes.length>0;)this._sel.firstChild.firstChild.firstChild.lastChild.onclick=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseover=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseout=null,this._sel.firstChild.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild.lastChild);for(this._sel.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild),this._sel.firstChild.removeChild(this._sel.firstChild.firstChild);this._sel.childNodes.length>0;)this._sel.removeChild(this._sel.lastChild);this._sel.parentNode.removeChild(this._sel);this._sel=null}this.base.onclick=null;this.base.onmousedown=null;this.base.ontouchstart=null;this.base.onmouseout=null;this.base.parentNode.removeChild(this.base);this.base=null;this._clearDayHover=null;this._clearSelHover=null;this._doOnSelectorChange=null;this._doOnSelectorShow=null;this._drawMonth=null;this._fixLength=null;this._ifrSize=null;this._hide=null;this._hideSelector=null;this._initSelector=null;this._isSelectorVisible=null;this._isVisible=null;this._scrollYears=null;this._show=null;this._showSelector=null;this._strToDate=null;this._updateActiveHours=null;this._updateActiveMinutes=null;this._updateActiveMonth=null;this._updateActiveYear=null;this._updateCellStyle=null;this._updateDateStr=null;this._updateVisibleHours=null;this._updateVisibleMinutes=null;this._updateYearsList=null;this.enableIframe=null;this.hide=null;this.hideTime=null;this.setDate=null;this.setDateFormat=null;this.setYearsRange=null;this.show=null;this.showTime=null;this.unload=null;this._tipPopup!=null&&(this._tipPopup.unload(),this._tipPopup=null);for(n in this)delete this[n];n=i=null},this.setDate(this._activeDate),this}var app=app||{},autocomplete,advancedSearch;app.common=app.common||{};app.common.validations=app.common.validations||{};app.common.validations=function(){function e(n,t){return o(/^[+-]?\d*(\.|\,)?\d+([eE][+-]?\d+)?$/,n,t)}function o(n,t,i){return t.val()!==""&&n!=undefined&&!n.test(t.val())?(alert(i),t.focus(),!1):!0}var n=!1,t=function(n){return n&&{}.toString.call(n)==="[object Function]"};$(".dirtyData").on("change",function(){n=!0});var i=function(){return n},r=function(){n=!0},u=function(n){return!n||0===n.length},f=function(n,t){var i=!0;return app.common.validations.IsEmpty(t)||(i=n.toUpperCase().includes(t.toUpperCase())),i};return{IsFunction:t,GethasDirtyData:i,ChangeDirtyData:r,IsEmpty:u,StringContains:f,CheckFloatNumber:e}}();dhtmlXCalendarObject.prototype.lang="en";dhtmlXCalendarObject.prototype.langData={en:{dateformat:"%Y-%m-%d",hdrformat:"%F %Y",monthesFNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthesSNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysFNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysSNames:["Su","Mo","Tu","We","Th","Fr","Sa"],weekstart:1,weekname:"w",today:"Today",clear:"Clear"}};dhtmlXCalendarObject.prototype._buildMonthHdr=function(n){var i=this,r=function(n){return String(n).length==1?"0"+String(n):n},t=function(n,t){return"<span class='dhtmlxcalendar_month_label_"+n+"'>"+t+"<\/span>"},u=String(this.langData[this.lang].hdrformat||"%F %Y").replace(/%[a-z]/gi,function(u){switch(u){case"%m":return t("month",r(n.getMonth()+1));case"%n":return t("month",n.getMonth()+1);case"%M":return t("month",i.langData[i.lang].monthesSNames[n.getMonth()]);case"%F":return t("month",i.langData[i.lang].monthesFNames[n.getMonth()]);case"%y":return t("year",r(n.getYear()%100));case"%Y":return t("year",n.getFullYear());case"%%":return"%";default:return u}});return i=r=t=null,u};dhtmlXCalendarObject.prototype.enableIframe=function(n){n==!0?this._ifr||(this._ifr=document.createElement("IFRAME"),this._ifr.frameBorder=0,this._ifr.border=0,this._ifr.setAttribute("src","javascript:false;"),this._ifr.className="dhtmlxcalendar_ifr",this._ifr.onload=function(){this.onload=null;this.contentWindow.document.open("text/html","replace");this.contentWindow.document.write("<html><head><style>html,body{width:100%;height:100%;overflow:hidden;margin:0px;}<\/style><\/head><body<\/body><\/html>")},this.base.parentNode.insertBefore(this._ifr,this.base),this._ifrSize()):this._ifr&&(this._ifr.parentNode.removeChild(this._ifr),this._ifr=null)};dhtmlXCalendarObject.prototype._ifrSize=function(){this._ifr&&(this._ifr.style.left=this.base.style.left,this._ifr.style.top=this.base.style.top,this._ifr.style.width=this.base.offsetWidth+"px",this._ifr.style.height=this.base.offsetHeight+"px")};dhtmlxCalendarObject=dhtmlXCalendarObject;dhtmlXCalendarObject.prototype._dateStrings=function(){var n=this.langData[this.lang];return{monthFullName:n.monthesFNames,monthShortName:n.monthesSNames,dayFullName:n.daysFNames,dayShortName:n.daysSNames}};dhtmlXCalendarObject.prototype._strToDate=function(n,t){return window.dhx4.str2date(n,t||this._dateFormat,this._dateStrings())};dhtmlXCalendarObject.prototype._dateToStr=function(n,t){return window.dhx4.date2str(n,t||this._dateFormat,this._dateStrings())};autocomplete=autocomplete||{};autocomplete=function(){function yt(n){var t,i;t=n.target.localName==="li"?n.target.firstChild:n.target;i={key:t.id,value:t.innerText};rt(i,!1,!0)}function rt(i,u,e){h!==undefined&&h===!0&&i.value===d?(e&&n.setEvent!==undefined&&n.setEvent(null,u),a()):(g=i,$("#cmb_"+r).val(i.value),$("#inpt_"+f).val(i.key),$("#inptTxt_"+f).val(i.value),$("#lstElement_"+ht).each(function(){$(this).hasClass("d-none")||$(this).addClass("d-none")}),$("#list_"+t).addClass("d-none"),e&&n.setEvent!==undefined&&n.setEvent(i,u),nt&&$("#cleanButton_"+c).removeClass("d-none"))}function pt(n){o=n;u=wt(u,o,i);ft(u);o.length===1&&rt(o[0],!1,!0)}function wt(n,t,i){return n=t,n!==undefined&&n!==null&&n.length>0&&(n=t.filter(function(n){if(n.name!==undefined&&n.name!==null){if(n.name.substring(0,i.length).toUpperCase()===i.toUpperCase())return n.name.toLowerCase()}else return n.value.toLowerCase().includes(i)})),n}function bt(n,t,i){var r=ti(n);t!==undefined&&t!==null&&$.ajax({url:t,type:it,dataType:"json",cache:!1,data:r,success:i,error:function(n,t,i){toastr.options.closeButton="False";toastr.options.newestOnTop="False";toastr.error("Error",i.message,{})}})}function ti(n){return l!==undefined&&l!==null&&app.common.validations.IsFunction(l)?l(n,y):ii(n)}function ii(n){return y!==undefined?{id:y,text:n}:{text:n}}function kt(){$("#list_"+t).addClass("d-none");$("#cmb_"+r).val("");$("#inpt_"+f).val(w);$("#inptTxt_"+f).val("");nt&&$("#cleanButton_"+c).addClass("d-none");g=undefined}function a(){i=undefined;e=undefined;o=[];u=[];kt()}function ut(n){n.preventDefault();var t=n.currentTarget.value.toLowerCase();ri(t)}function ri(n){(n===undefined||n===null||n==="")&&e>0&&(a(),n="");tt!==undefined&&tt===!0&&(n===undefined||n===null||n==="")&&dt();i===n?$("#list_"+t).is(":visible")||(i=n,ft(u)):n.substring(0,v)===e?(i=n,u=wt(u,o,i),ft(u)):n.length>=v&&(i=n,e=i.substring(0,v),bt(e,k,pt))}function ui(n){n!==undefined&&n!==null&&n.key!==undefined&&n.value!==undefined&&n.key!==null&&n.value!==null&&n.value!=="null"&&n.key!==0&&rt(n,!0,!0)}function fi(){k=n.urlData;v=n.minimumCharacters;r=Math.random().toString().replace(".","");f=Math.random().toString().replace(".","");t=Math.random().toString().replace(".","");ot=n.selectedItemProperty;st=n.selectedTextProperty;ht=Math.random().toString().replace(".","");h=n.hasDefaultItem;ct=n.nColumns;d=n.defaultItemContent;c=Math.random().toString().replace(".","");at=Math.random().toString().replace(".","");l=n.getDataMethod;it=n.ajaxMethodType;tt=n.onVoidClean;w=n.voidValue;b=n.isEnabled;n.removePadding&&(vt=s.classes.padding.remove);(n.ajaxMethodType===undefined||n.ajaxMethodType===null||n.ajaxMethodType==="")&&(it=app.constants.Get);n.showCleanButton!==undefined&&n.showCleanButton===!1&&(nt=!1);s.classes.inputContainer.css=ct===!0?"input-group":"form-group";b===undefined&&(b=!0);w===undefined&&w===0}function ei(){var i=s.classes.inputContainer.css,u="",e="";b||(e="readonly");u=n.nColumns?"<div class='"+i+"'><div class='input-group "+i+"'><label class='m-0' for='slct_"+lt+"'>"+ni+"<\/label><div id='slct_"+lt+"' class='form-control p-0'><\/div><span class='input-group-append'><button class='"+n.classes.buttons.add+"' id='btnAdd_"+at+"'><span class='fa fa-plus fa-lg text-primary'><\/span><\/button><\/span><\/div><ul id='list_"+t+"' class='suggestions list-group d-none'><\/ul><\/div>":"<div class='row'><div class='col-12 "+vt+"'><input id='cmb_"+r+"' class='custom-select search' autocomplete='off' "+e+" /><a href='#' class='inline-remove deleteButton d-none' id='cleanButton_"+c+"'><span class='fa fa-remove text-secondary'><\/span><\/a><input type='hidden' value='0' id='inpt_"+f+"' name='"+ot+"' /><input type='hidden' value='0' id='inptTxt_"+f+"' name='"+st+"' /><ul id='list_"+t+"' class='suggestions list-group d-none'><\/ul><\/div><\/div>";$(et).html(u)}function dt(){a();n.setEvent!==undefined&&n.setEvent(null)}function ft(n){var r=[],i,f,u;for(si(r),n!==undefined&&r.push(...n),$("#list_"+t).empty(),i=0,i=0;i<r.length;i++){if(r[i].key&&(f=oi(p,r[i].key),!f)){u=$("<li class='list-group-item'><span class='name list-group-item-data' id='"+r[i].key+"'>"+r[i].value+"<\/span><\/li>");$("#list_"+t).append(u);u.on("click",yt)}if(r[i].name){let n=concatenatedArrayValues(r),u=$("<li class='list-group-item'><span class='name list-group-item-data' id='"+n[i].id+"'>"+n[i].name+"<\/span><\/li>");$("#list_"+t).append(u);u.on("click",yt)}}$("#list_"+t).removeClass("d-none")}function oi(n,t){return n.some(function(n){return n.key==t})}function si(n){if(h!==undefined&&h===!0){var t={key:0,value:d};n.push(t)}}function hi(){$("#cmb_"+r).on("change",ut);$("#cmb_"+r).on("keyup",ut);$("#cmb_"+r).on("focus",ut);$(document).on("click",ci);$("#cleanButton_"+c).on("click",dt)}function ci(n){n.target.classList.contains("search")||n.target.classList.contains("suggestions")||$("#list_"+t).is(":visible")&&$("#list_"+t).addClass("d-none")}function ai(n,t){t&&a();y=n}function vi(){return g}function yi(n){p=n;p===undefined&&(p=[])}function pi(){return e}function wi(n){$("#cmb_"+r).prop("readonly",n)}function bi(){bt(null,k,pt)}var s={classes:{select:"form-control selecTable",header:{root:"",group:"form-group"},buttons:{add:""},inputContainer:{css:""},padding:{remove:"p-0"}}},gt,et,n,k,v=0,i,e,r,f,t,o,u,ot,st,ht,y,h,ct=!0,d,c,g,nt=!0,p=[],ni="",lt="",at,l,tt,w,it="GET",b=!0,vt="",li=function(t,i){gt=s.classes;et=t;n=$.extend({},s,i);fi();ei();ui(n.initValue);hi()};return{Init:li,ChangeData:ai,Clean:a,GetSelectedOption:vi,RemoveSelectedOption:kt,UpdateBlackList:yi,GetFilterText:pi,Enabled:wi,SearchByDefault:bi}};advancedSearch=advancedSearch||{};advancedSearch=function(){function l(){$("#AdvancedSearchModalAdd").on("click",o);$("#AdvancedSearchModalChoose").on("click",s);$("#searchinput").on("change",i);$("#searchinput").on("keyup",i);$("#SelectDataMultiple").on("change",e)}function i(n){n.preventDefault();var t=n.currentTarget.value.toLowerCase();a(t)}function a(i){$("#infoData").html("");var e=$("#SelectType").val(),r=null;u!==undefined&&(r=u);t!==i&&i.length>=f?(t=i,h(e,i,r,n.advancedSearchUrl,v)):i.length==0&&(t="",$("#SelectDataMultiple").empty())}function v(n){r=n;app.common.ui.LoadSelectorKeyValue("SelectDataMultiple",n,"id","name",!1)}function e(t){var e=t.currentTarget.selectedIndex,f=r[e],u,i;if(n.onAdvancedSearchSelectChange!==undefined)n.onAdvancedSearchSelectChange(f);for(u="",i=0;i<n.detail.length;i++)u+='<dt class="col-sm-3 p-0">'+n.detail[i]+"<\/dt >",u+='<dd class="col-sm-9 p-0">'+f.details[i]+"<\/dt >";$("#infoData").html(u)}function y(n){t="";$("#SelectType").empty();n.showSelectValues===undefined?$("#divSelectType").addClass("d-none"):(app.common.ui.LoadSelectorKeyValue("SelectType",n.showSelectValues,"key","value",!1),$("#divSelectType").removeClass("d-none"));n.urlAdd===undefined?$("#AdvancedSearchModalAdd").addClass("d-none"):$("#AdvancedSearchModalAdd").removeClass("d-none");f=n.minimumCharacters;$("#headerTitle").text(n.headerTitle);$("#infoData").html("");$("#searchinput").val("");$("#SelectDataMultiple").empty()}function o(){location.href=n.urlAdd}function s(){var t=-1,i;t=$("#SelectDataMultiple")[0].selectedIndex;t!=-1&&(i=r[t],n.setEvent!==undefined&&n.setEvent(i),$("#AdvancedSearchModalCancel").click())}function p(n){u=n}var n,r,f=0,t="",u,c=function(t){n=t;l();y(n)},h;$("#AdvancedSearchModal").on("hidden.bs.modal",function(){$("#AdvancedSearchModalAdd").off("click",o);$("#AdvancedSearchModalChoose").off("click",s);$("#searchinput").off("change",i);$("#searchinput").off("keyup",i);$("#SelectDataMultiple").off("change",e)});return h=function(n,t,i,r,u){$.ajax({url:r,type:"GET",dataType:"json",cache:!1,async:!1,data:{SearchType:n,Value:t,Text:i},success:u,error:function(n,t,i){toastr.options.closeButton="False";toastr.options.newestOnTop="False";toastr.error("Error",i.message,{})}})},{Init:c,ChangeData:p}};app=app||{};app.WorkOrderEdit=app.WorkOrderEdit||{};app.WorkOrderEdit=function(){function ft(){if(n.isDerived){$("#"+n.fields.inheritProject).on("click",w);$("#"+n.fields.inheritTechnician).on("click",b);n.modeActionType=="EditDerived"&&(w(),b())}}function w(){var t=$("#"+n.fields.inheritProject).prop("checked");t?($("#projectdiv").addClass("d-none"),$("#workOrdercategorydiv").addClass("d-none"),$("#workorderedittypediv").addClass("d-none")):($("#projectdiv").removeClass("d-none"),$("#workOrdercategorydiv").removeClass("d-none"),$("#workorderedittypediv").removeClass("d-none"))}function b(){var t=$("#"+n.fields.inheritTechnician).prop("checked");t?$("#techniciandiv").addClass("d-none"):$("#techniciandiv").removeClass("d-none")}function ot(n){$("#OpenProjectAdvancedSearch").on("click",ct);$("#OpenClientSiteAdvancedSearch").on("click",lt);$("#OpenSiteAdvancedSearch").on("click",at);$("#"+n.fields.textRepair).on("keypress",d);$("#"+n.fields.observations).on("keypress",d);$("#btnSendMessage").on("click",st);ht();g(n.projectCombo);bt(n.technicianCombo);a(n.clientSiteCombo);v(n.siteCombo);kt(n.assetCombo);y(n.userSiteCombo)}function k(n){$("#"+n).val($("#"+n).val().replace(/</g,"&lt;").replace(/>/g,"&gt;"))}function st(){k(n.fields.textRepair);k(n.fields.observations)}function d(n){var t=n.keyCode?n.keyCode:n.which;return console.log(t),t==13||t==60||t==62||t==95||t==189?!1:!0}function ht(){p=new advancedSearch;e=new advancedSearch;o=new advancedSearch}function ct(){p.Init(n.projectSearch)}function lt(){e.Init(n.clientSiteSearch)}function at(){o.Init(n.siteSearch)}function vt(t){n.projectCombo.selectedValues.key=t.id;n.projectCombo.selectedValues.value=t.name;g(n.projectCombo);nt(n.projectCombo.selectedValues,!1)}function yt(t){n.clientSiteCombo.selectedValues.key=t.id;n.clientSiteCombo.selectedValues.value=t.name;a(n.clientSiteCombo)}function pt(t){n.siteCombo.selectedValues.key=t.id;n.siteCombo.selectedValues.value=t.name;v(n.siteCombo)}function wt(n){var t,i,r;(n.details[2]!==undefined||n.details[2]!=="")&&(t=n.details[2].split("|"),t.length==2&&(i=app.common.ui.GetDataByIdWaitResponse(t[0],app.config.Urls.getPostalCodeById),r=app.common.ui.GetDataByIdWaitResponse(t[1],app.config.Urls.getMunicipalityById),n.details[2]="("+i+") "+r))}function g(n){return c=new autocomplete,c.Init("#ProjectComboFilter",{hasDefaultItem:n.hasDefaultItem,initValue:n.selectedValues,urlData:app.config.Urls.getProjects,selectedItemProperty:n.itemIdProperty,selectedTextProperty:n.itemTextProperty,minimumCharacters:1,nColumns:!1,getDataMethod:s,ajaxMethodType:app.constants.Post,setEvent:nt,onVoidClean:!0,voidValue:0,removePadding:!0}),c}function bt(n){return l=new autocomplete,l.Init("#TechnicianComboFilter",{hasDefaultItem:n.hasDefaultItem,initValue:n.selectedValues,urlData:app.config.Urls.getPeopleTechnicians,selectedItemProperty:n.itemIdProperty,selectedTextProperty:n.itemTextProperty,minimumCharacters:1,nColumns:!1,getDataMethod:s,ajaxMethodType:app.constants.Post,onVoidClean:!0,voidValue:0,removePadding:!0}),l}function a(n){return t=new autocomplete,t.Init("#ClientSiteComboFilter",{hasDefaultItem:n.hasDefaultItem,initValue:n.selectedValues,urlData:app.config.Urls.getFinalClients,selectedItemProperty:n.itemIdProperty,selectedTextProperty:n.itemTextProperty,minimumCharacters:1,nColumns:!1,getDataMethod:s,ajaxMethodType:app.constants.Post,setEvent:ni,onVoidClean:!0,voidValue:0,removePadding:!0}),t}function v(n){return i=new autocomplete,i.Init("#SiteIdComboFilter",{hasDefaultItem:n.hasDefaultItem,initValue:n.selectedValues,urlData:app.config.Urls.getSites,selectedItemProperty:n.itemIdProperty,selectedTextProperty:n.itemTextProperty,minimumCharacters:2,nColumns:!1,getDataMethod:s,ajaxMethodType:app.constants.Post,setEvent:ti,onVoidClean:!0,voidValue:0,removePadding:!0}),i}function kt(n){return r=new autocomplete,r.Init("#AssetComboFilter",{hasDefaultItem:n.hasDefaultItem,initValue:n.selectedValues,urlData:app.config.Urls.getAssets,selectedItemProperty:n.itemIdProperty,selectedTextProperty:n.itemTextProperty,minimumCharacters:2,nColumns:!1,getDataMethod:s,ajaxMethodType:app.constants.Post,setEvent:ii,onVoidClean:!0,voidValue:0,removePadding:!0}),r}function y(n){return u=new autocomplete,u.Init("#UserSiteComboFilter",{hasDefaultItem:n.hasDefaultItem,initValue:n.selectedValues,urlData:app.config.Urls.getSiteUserFiltered,selectedItemProperty:n.itemIdProperty,selectedTextProperty:n.itemTextProperty,minimumCharacters:1,nColumns:!1,getDataMethod:dt,ajaxMethodType:app.constants.Post,setEvent:ui,isEnabled:n.enabled,onVoidClean:!0,voidValue:0,removePadding:!0}),u}function s(n,t){t===undefined&&(t=null);return{QueryType:app.constants.AutoComplete,QueryTypeParameters:{value:t,Text:n}}}function dt(n,t){return{Text:n,Selected:t!==undefined?t:[]}}function ni(n,t){t||(n!==null&&n!==undefined?(i.ChangeData(n.key,!1),o.ChangeData(n.key)):(i.ChangeData(null,!1),o.ChangeData(null)))}function ti(i,f){u!==undefined&&u.Enabled(!1);f||(i!==null&&i!==undefined?(i.value=null,t.GetSelectedOption()===undefined&&(t.ChangeData(i.key,!1),t.SearchByDefault()),e.ChangeData(i.key),r.GetSelectedOption()===undefined&&r.ChangeData(i.key,!1),u.GetSelectedOption()===undefined&&u.ChangeData(i.key,!1)):(t.GetSelectedOption()===undefined&&t.ChangeData(null,!1),e.ChangeData(null,!1),r.GetSelectedOption()===undefined&&r.ChangeData(null,!1),n.userSiteCombo.selectedValues.key=null,n.userSiteCombo.selectedValues.value=null,y(n.userSiteCombo)))}function ii(n,r){r||n===null||n===undefined||t.GetSelectedOption()===undefined&&i.GetSelectedOption()===undefined&&app.common.ui.GetDataById(n.key,app.config.Urls.getAssetsLocationById,ri)}function ri(t){t.finalClientId!==0&&(n.clientSiteCombo.selectedValues.key=t.finalClientId,n.clientSiteCombo.selectedValues.value=t.finalClientName,a(n.clientSiteCombo));t.locationClientId!==0&&(n.siteCombo.selectedValues.key=t.locationClientId,n.siteCombo.selectedValues.value=t.locationName,v(n.siteCombo));t.siteUserId!==0&&(n.userSiteCombo.selectedValues.key=t.siteUserId,n.userSiteCombo.selectedValues.value=t.siteUserName,y(n.userSiteCombo))}function ui(){}function nt(t,i){t!==null&&t!==undefined?i?app.common.ui.GetDataById(t.key,app.config.Urls.getProjectRelated,ei):app.common.ui.GetDataById(t.key,app.config.Urls.getProjectRelated,fi):($("#"+n.fields.workOrderCategory).empty(),$("#"+n.fields.queue).val(0),$("#"+n.fields.workOrderStatus).val(0),tt())}function tt(){$("#"+n.fields.workOrderType1).empty();$("#"+n.fields.workOrderType1).prop("disabled",!0);$("#"+n.fields.workOrderType2).empty();$("#"+n.fields.workOrderType2).prop("disabled",!0);$("#"+n.fields.workOrderType3).empty();$("#"+n.fields.workOrderType3).prop("disabled",!0);$("#"+n.fields.workOrderType4).empty();$("#"+n.fields.workOrderType4).prop("disabled",!0)}function fi(t){f=t.workOrderTypes;tt();$("#"+n.fields.queue).val(t.queueId);$("#"+n.fields.workOrderStatus).val(t.workOrderStatusId);app.common.ui.LoadSelectorKeyValue(n.fields.workOrderCategory,t.workOrderCategories,"id","name",!1);$("#"+n.fields.workOrderCategory).val(t.workOrderCategories[0].id).change();$("#"+n.fields.workOrderType1).prop("disabled",!1);app.common.ui.LoadSelectorKeyValue(n.fields.workOrderType1,t.workOrderTypes,"id","name",!0)}function ei(t){var i,u;if(f=t.workOrderTypes,app.common.ui.LoadSelectorKeyValue(n.fields.workOrderCategory,t.workOrderCategories,"id","name",!1),n.workOrderCategoryValue!==null&&n.workOrderCategoryValue!==0&&$("#"+n.fields.workOrderCategory).val(n.workOrderCategoryValue).change(),f.length>0){var e=null,o=[],r=[],s=n.workOrderTypeValue;if(s==0)it(0);else{do e=h(f,s),s=e.fatherId,o.push(s),r.push(e.id);while(e.fatherId!=null);i=o.length-1;u=1;it(r[i]);i--;u++;do{let n=h(f,o[i]);field=rt(u);$("#"+field).prop("disabled",!1);n!==undefined&&app.common.ui.LoadSelectorKeyValue(field,n.childs,"id","name",!0);r[i]===r[0]?$("#"+field).val(r[i]).change():$("#"+field).val(r[i]);i--;u++}while(u-1<o.length)}}}function it(n){var t=rt(1);$("#"+t).prop("disabled",!1);f!==undefined&&(app.common.ui.LoadSelectorKeyValue(t,f,"id","name",!0),n!=0&&$("#"+t).val(n))}function hi(t){$("#"+n.fields.DateResponseSLAVisible).val(t[0]);$("#"+n.fields.DateResolutionSLAVisible).val(t[1]);$("#"+n.fields.DateUnansweredSLAPenaltyVisible).val(t[2]);$("#"+n.fields.DateWithoutPenaltyResolutionSLAVisible).val(t[3]);t[0]?$("#DateResponseSLA").removeClass("d-none"):$("#DateResponseSLA").addClass("d-none");t[1]?$("#DateResolutionSLA").removeClass("d-none"):$("#DateResolutionSLA").addClass("d-none");t[2]?$("#DateUnansweredSLAPenalty").removeClass("d-none"):$("#DateUnansweredSLAPenalty").addClass("d-none");t[3]?$("#DateWithoutPenaltyResolutionSLA").removeClass("d-none"):$("#DateWithoutPenaltyResolutionSLA").addClass("d-none")}function h(n,t){for(var r,i=0;i<n.length;i++){if(n[i].id==t)return n[i];if(n[i].childs!==undefined&&n[i].childs!==null&&n[i].childs.length>0&&(r=h(n[i].childs,t),r!==undefined))return r}}function rt(t){switch(t){case 1:return n.fields.workOrderType1;case 2:return n.fields.workOrderType2;case 3:return n.fields.workOrderType3;case 4:return n.fields.workOrderType4}}var n,c,l,t,i,r,u,f,p,e,o,ut=function(t){n=t;ot(n);gt(n.calendar);ft()},et=function(){var f=t.GetSelectedOption(),n=i.GetSelectedOption();f!==undefined&&(i.ChangeData(f.key,!1),o.ChangeData(f.key));n!==undefined&&(t.ChangeData(n.key,!1),e.ChangeData(n.key),r.ChangeData(n.key,!1),u.ChangeData(n.key,!1))},gt=function(n){var i=getCookie("culture-code").toLowerCase(),t=new dhtmlXCalendarObject(n.objects);t.showTime();t.loadUserLanguage(i);t.setDateFormat(GetCultureForDatePicker(i,!0),"%Y-%m-%d %H:%i")},oi=function(n,t){var r=$("#"+n.id).val(),i;r!=0?($("#"+t).prop("disabled",!1),i=h(f,r),i!==undefined&&app.common.ui.LoadSelectorKeyValue(t,i.childs,"id","name",!0)):($("#"+t).val(0).change(),$("#"+t).prop("disabled",!0),$("#"+t).empty())},si=function(n){var t=$(n).val();app.common.ui.GetDataById(t,app.config.Urls.getHasSLADates,hi)};return{Init:ut,OnWorkOrderTypeChange:oi,OnWorkOrderCategoryChange:si,OnProjectSearchChoose:vt,OnClientSiteSearchChoose:yt,OnSiteSearchChoose:pt,OnAdvancedSearchSelectChange:wt,InitEdit:et}}();app=app||{};app.common=app.common||{};app.common.authorization=app.common.authorization||{};app.common.authorization=function(){function n(n,t){t===!1?$("#"+n).attr("disabled",!0):$("#"+n).attr("disabled",!1)}function t(n,t){t===!1?$("#"+n).css("display","none"):$("#"+n).css("display","inline")}return{disable:n,visibilityDisplayInline:t}}();
//# sourceMappingURL=WorkOrderCreation.min.js.map