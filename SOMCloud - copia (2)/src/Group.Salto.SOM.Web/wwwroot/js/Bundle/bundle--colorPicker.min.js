function dhtmlXColorPicker(n){var i;if(!(this instanceof window.dhtmlXColorPicker))return new dhtmlXColorPicker(n);dhx4._eventable(this);var t=this,e=undefined,f=null,i,u,r;this._nodes=[];this.activeNode=null;this._inputListenerId=null;this.base=null;this._globalNode=null;this.memory=null;this.skin=null;this.conf={cp_id:dhx4.newId(),x:0,y:0,c:0,indent:2,position:"right",customColors:!1,selectedColor:null,hide:!1,hideOnSelect:!1,lang:"en",closeable:!0};this.value={red:-1,blue:-1,green:-1,hue:-1,sat:-1,lum:-1};this._initMoveSelection=function(n){return n=n||event,typeof addEventListener=="function"?(t._controllerNodes.colorArea.addEventListener("mousemove",t._setMoveSelection,!1),document.body.addEventListener("mouseup",t._cleanMoveSelection,!1)):(t._controllerNodes.colorArea.attachEvent("onmousemove",t._setMoveSelection),document.body.attachEvent("onmouseup",t._cleanMoveSelection)),t._setMoveSelection(n,t._controllerNodes.colorArea),!1};this._cleanMoveSelection=function(){return typeof removeEventListener=="function"?(t._controllerNodes.colorArea.removeEventListener("mousemove",t._setMoveSelection,!1),document.body.removeEventListener("mouseup",t._cleanMoveSelection,!1)):(t._controllerNodes.colorArea.detachEvent("onmousemove",t._setMoveSelection),document.body.detachEvent("onmouseup",t._cleanMoveSelection)),!1};this._setMoveSelection=function(n){n=n||event;var i=t._getOffsetPosition(n,t._controllerNodes.colorArea);return t._controllerNodes.fr_cover?setTimeout(function(){t._setColorAreaXY(i.x,i.y);t._setColorByXYC()},0):(t._setColorAreaXY(i.x,i.y),t._setColorByXYC()),!1};this._initMoveContrast=function(n){n=n||event;typeof addEventListener=="function"?(document.body.addEventListener("mousemove",t._setMoveContrast,!1),document.body.addEventListener("mouseup",t._cleanMoveContrast,!1)):(document.body.attachEvent("onmousemove",t._setMoveContrast),document.body.attachEvent("onmouseup",t._cleanMoveContrast));t._setMoveContrast(n,t._controllerNodes.contrastArea)};this._cleanMoveContrast=function(){typeof removeEventListener=="function"?(document.body.removeEventListener("mousemove",t._setMoveContrast,!1),document.body.removeEventListener("mouseup",t._cleanMoveContrast,!1)):(document.body.detachEvent("onmousemove",t._setMoveContrast),document.body.detachEvent("onmouseup",t._cleanMoveContrast))};this._setMoveContrast=function(n){n=n||event;var i=t._getOffsetPosition(n,t._controllerNodes.contrastArea);t._setContrastY(i.y);t._setColorByXYC(!0)};this._doOnSelectColor=function(){var n=t.colorAIP.rgb2hex({r:t.value.red,g:t.value.green,b:t.value.blue});t.activeNode!=null&&(t.activeNode.valueCont&&(t.activeNode.valueCont.value=n),t.activeNode.valueColor&&(t.activeNode.valueColor.style.backgroundColor=n));(t.base._dhx_remove||t.conf.hideOnSelect)&&t.hide();t.callEvent("onSelect",[n,t.activeNode?t.activeNode.node:null])};this._doOnCancel=function(){t.callEvent("onCancel",[t.activeNode?t.activeNode.node:null])==!0&&t.conf.closeable==!0&&t.hide()};this._doOnFocusByInput=function(){var i=this!=window?this:event.srcElement,n=t.activeNode&&t.activeNode.valueCont&&t.activeNode.valueCont==i?t.activeNode:t._getNodeByValueCont(i);t.activeNode=n;n&&n==t.activeNode&&t._initListenerInput()};this._doOnBlurByInput=function(){var n=this!=window?this:event.srcElement,i=t.activeNode&&t.activeNode.valueCont&&t.activeNode.valueCont==n?t.activeNode:t._getNodeByValueCont(n);i&&i==t.activeNode&&t._removeListenerInput()};this._doOnClickByNode=function(n){n=n||event;var i=this!=window?this:event.srcElement;t.activeNode=t.activeNode.node!=i?t._getNodeByElement(i):t.activeNode;t.isVisible()||t.show()};this.saveColor=function(){t.memory.setValue(t.value)};this._onSelectMemoryEl=function(n){var i;t._refreshCoordinatesByHSL(n.value.hue,n.value.sat,n.value.lum);for(i in n.value)t.value[i]=n.value[i];t._refreshContrast();t._refreshInputValues();t._refreshColorValue()};this._doOnClickByBody=function(n){n=n||event;var i=!0,r=n.target||n.srcElement;t._isBaseNode(r)&&(i=!1);i&&t.activeNode&&(t.activeNode.node==r||t.activeNode.valueCont==r)&&(i=!1);i&&t.hide()};this._doOnChangeHSL=function(){var n=parseInt(t._controllerNodes.hue.value),i=parseInt(t._controllerNodes.sat.value),r=parseInt(t._controllerNodes.lum.value),u;isNaN(n)||n>359||n<0?t._controllerNodes.hue.value=t.value.hue:t.value.hue=n;isNaN(i)||i>100||i<0?t._controllerNodes.sat.value=t.value.sat:t.value.sat=i;isNaN(r)||r>100||r<0?t._controllerNodes.lum.value=t.value.lum:t.value.lum=r;u=t.colorAIP.hsl2rgb(t.value.hue,t.value.sat/100,t.value.lum/100);t.value.red=Math.round(255*u.r);t.value.green=Math.round(255*u.g);t.value.blue=Math.round(255*u.b);t._refreshCoordinatesByHSL(t.value.hue,t.value.sat,t.value.lum);t._refreshContrast();t._refreshInputValues();t._refreshColorValue()};this._doOnChangeRGB=function(){var n=parseInt(t._controllerNodes.red.value),i=parseInt(t._controllerNodes.green.value),r=parseInt(t._controllerNodes.blue.value),u;isNaN(n)||n>255||n<0?t._controllerNodes.red.value=t.value.red:t.value.red=n;isNaN(i)||i>255||i<0?t._controllerNodes.green.value=t.value.green:t.value.green=i;isNaN(r)||r>255||r<0?t._controllerNodes.blue.value=t.value.blue:t.value.blue=r;u=t.colorAIP.rgb2hsl(t.value.red/255,t.value.green/255,t.value.blue/255);t.value.hue=Math.round(u.h);t.value.sat=Math.round(u.s*100);t.value.lum=Math.round(u.l*100);t._refreshCoordinatesByHSL(t.value.hue,t.value.sat,t.value.lum);t._refreshContrast();t._refreshInputValues();t._refreshColorValue()};this._doOnChangeHSV=function(){t._controllerNodes.hsv.value=t.setColor(t._controllerNodes.hsv.value)};this._checkType=function(n){var i;if(n instanceof Array){i=t._checkType(n[0]);switch(i){case"string":return"array_string";case"input":case"textarea":return"array_input";case"object":return"array_object";default:return undefined}}else return n==undefined?null:typeof n=="string"?"string":n.tagName&&n.tagName.toLowerCase()=="input"?"input":n.tagName&&n.tagName.toLowerCase()=="textarea"?"textarea":n.tagName?"container":typeof n=="object"?"object":undefined};this._initByObject=function(n){n.parent&&n.parent.tagName?t.base=n.parent:typeof n.parent=="string"?t.base=document.getElementById(n.parent):(t.base=document.createElement("div"),t.base._dhx_remove=!0);n.color&&(t.conf.selectedColor=n.color);typeof n.closeable!="undefined"&&(this.conf.closeable=dhx4.s2b(n.closeable));n.custom_colors&&(this._tempInitCC=function(){var t,i;if(this.initMemoryColors(),this.conf.customColors=!0,n.custom_colors instanceof Array)for(i=n.custom_colors.length,t=0;t<i;t++)this.setCustomColors(n.custom_colors[t]);this.base.parentNode&&this.showMemory();delete this._tempInitCC});n.hide&&(t.conf.hide=!0);n.input&&t._addNode(n.input,n.target_color,n.target_value);var i=n.skin||window.dhx4.skin||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcolorpicker")||"material";t.setSkin(i);n.colors&&(t.initMemoryColors(),t.conf.customColors=!0);n.link&&t._addNode(n.link)};this.unload=function(){var n,u,i;for(this.isVisible()&&this.hide(),this.destructMemory(),u=this._nodes.length,n=0;n<u;n++){this._detachEventsFromNode(this._nodes[n]);for(i in this._nodes[n])this._nodes[n][i]=null;delete this._nodes[n]}this._nodes=null;this.base._dhx_remove?delete this.base._dhx_remove:this.base.className=this.base.className.replace(/\s?dhtmlxcp_\S*/,"");typeof addEventListener=="function"?(this._controllerNodes.colorArea.removeEventListener("mousedown",this._initMoveSelection,!1),this._controllerNodes.colorArea.removeEventListener("dblclick",this._doOnSelectColor,!1),this._controllerNodes.contrastArea.removeEventListener("mousedown",this._initMoveContrast,!1),this._controllerNodes.button_save.removeEventListener("click",this._doOnSelectColor,!1),this._controllerNodes.button_cancel.removeEventListener("click",this._doOnCancel,!1),this._controllerNodes.hue.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.sat.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.lum.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.red.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.green.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.blue.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.hsv.removeEventListener("change",this._doOnChangeHSV,!1)):(this._controllerNodes.colorArea.detachEvent("onmousedown",this._initMoveSelection),this._controllerNodes.colorArea.detachEvent("ondblclick",this._doOnSelectColor),this._controllerNodes.contrastArea.detachEvent("onmousedown",this._initMoveContrast),this._controllerNodes.button_save.detachEvent("onclick",this._doOnSelectColor),this._controllerNodes.button_cancel.detachEvent("onclick",this._doOnCancel),this._controllerNodes.hue.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.sat.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.lum.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.red.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.green.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.blue.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.hsv.detachEvent("onchange",this._doOnChangeHSV));this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.parentNode&&this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover),delete this._controllerNodes.fr_cover);dhx4.zim.clear(this.conf.cp_id);dhx4._eventable(this,"clear");for(i in this)this[i]=null;t=null;f=null;r=null};e=this._checkType(n);switch(e){case"object":t._initByObject(n);break;case"input":case"textarea":t._initByObject({});this._addNode(n);break;case"string":return f=document.getElementById(n),new dhtmlXColorPicker(f);case"container":t._initByObject({parent:n});break;case null:t._initByObject({});break;case"array_string":case"array_input":for(t._initByObject({}),u=n.length,i=0;i<u;i++)this._addNode(n[i]);break;case"array_object":for(t._initByObject({}),u=n.length,i=0;i<u;i++)r=this._addNode(n[i].input,n[i].target_color,n[i].target_value).conf,r.customColors=n[i].custom_colors!=undefined?dhx4.s2b(n[i].custom_colors):r.customColors,r.selectedColor=n[i].color!=undefined?n[i].color:r.selectedColor}if(this.base.innerHTML="<div class='dhxcp_g_area'><div class='dhxcp_sub_area'><div class='dhxcp_g_color_area'><div class='dhxcp_color_selector'><div class='dhxcp_v_line'><\/div><div class='dhxcp_h_line'><\/div><\/div><div class='dhxcp_contrast_area'><div class='dhxcp_h_line'><\/div><\/div><\/div><div class='dhxcp_g_input_area'><div class='dhxcp_value_cont'><div class='dhxcp_value_color'><\/div><input type='text' class='dhxcp_value'/><\/div><table class='dhxcp_inputs_cont' cellpadding='0' cellspacing='0' border='0'><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelHue+"<\/td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/><\/td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelRed+"<\/td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/><\/td><\/tr><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelSat+"<\/td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/><\/td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelGreen+"<\/td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/><\/td><\/tr><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelLum+"<\/td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/><\/td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelBlue+"<\/td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/><\/td><\/tr><\/table><\/div><div class='dhxcp_g_memory_area'><\/div><div class='dhxcp_buttons_area'><button class='dhx_button_save'>"+this.i18n[this.conf.lang].btnSelect+"<\/button><button class='dhx_button_cancel'>"+this.i18n[this.conf.lang].btnCancel+"<\/button><\/div><\/div>",this._globalNode=this.base.firstChild,this._controllerNodes={colorArea:this._globalNode.firstChild.firstChild.firstChild,v_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[0],h_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[1],contrastArea:this._globalNode.firstChild.firstChild.childNodes[1],contrast_line:this._globalNode.firstChild.firstChild.childNodes[1].firstChild,color:this._globalNode.firstChild.childNodes[1].childNodes[0].firstChild,hsv:this._globalNode.firstChild.childNodes[1].childNodes[0].childNodes[1],hue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[1].firstChild,sat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[1].firstChild,lum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[1].firstChild,red:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[3].firstChild,green:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[3].firstChild,blue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[3].firstChild,memory_block:this._globalNode.firstChild.childNodes[2],button_save:this._globalNode.firstChild.childNodes[3].firstChild,button_cancel:this._globalNode.firstChild.childNodes[3].childNodes[1]},this._labelNodes={labelHue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].firstChild,labelSat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].firstChild,labelLum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].firstChild,labelRed:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[2],labelGreen:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[2],labelBlue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[2],btnAddColor:null,btnSelect:this._globalNode.firstChild.childNodes[3].firstChild,btnCancel:this._globalNode.firstChild.childNodes[3].childNodes[1]},typeof this._tempInitCC=="function"&&this._tempInitCC(),typeof addEventListener=="function"?(this._controllerNodes.colorArea.addEventListener("mousedown",this._initMoveSelection,!1),this._controllerNodes.colorArea.addEventListener("dblclick",this._doOnSelectColor,!1),this._controllerNodes.contrastArea.addEventListener("mousedown",this._initMoveContrast,!1),this._controllerNodes.button_save.addEventListener("click",this._doOnSelectColor,!1),this._controllerNodes.button_cancel.addEventListener("click",this._doOnCancel,!1),this._controllerNodes.hue.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.sat.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.lum.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.red.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.green.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.blue.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.hsv.addEventListener("change",this._doOnChangeHSV,!1)):(this._controllerNodes.colorArea.attachEvent("onmousedown",this._initMoveSelection),this._controllerNodes.colorArea.attachEvent("ondblclick",this._doOnSelectColor),this._controllerNodes.contrastArea.attachEvent("onmousedown",this._initMoveContrast),this._controllerNodes.button_save.attachEvent("onclick",this._doOnSelectColor),this._controllerNodes.button_cancel.attachEvent("onclick",this._doOnCancel),this._controllerNodes.hue.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.sat.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.lum.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.red.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.green.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.blue.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.hsv.attachEvent("onchange",this._doOnChangeHSV)),this.setColor(this.conf.selectedColor||"#ffffff"),this._nodes.length)for(i=0;i<this._nodes.length;i++)this._attachEventsToNode(this._nodes[i]);this.conf.hide&&this.hide();typeof this._cpInitFRM=="function"&&this._cpInitFRM()}var app;dhtmlXColorPicker.prototype.linkTo=function(n,t,i){arguments.length==1&&(t=i=n);var r;return n=n||null,i=i||null,typeof t=="string"&&(t=document.getElementById(t)),r=this._addNode(t,n,i),r&&this._attachEventsToNode(r),r};dhtmlXColorPicker.prototype._isBaseNode=function(n){return n==this.base?!0:n.parentElement==document.body?!1:n.parentElement?this._isBaseNode(n.parentElement):!1};dhtmlXColorPicker.prototype._hasInput=function(n){for(var r=!1,i=this._nodes.length,t=0;t<i;t++)if(this._nodes[t].valueCont==n){r=!0;break}return r};dhtmlXColorPicker.prototype._findNodesByArray=function(n){for(var i,r=n.length,t=0;t<r;t++)i=typeof n[t]=="string"?document.getElementById(n[t]):n[t],i&&this._addNode(i)};dhtmlXColorPicker.prototype._addNode=function(n,t,i){var r,u,f,e;return(r=typeof n=="string"?document.getElementById(n):n,typeof t=="string"&&(t=document.getElementById(t)),typeof i=="string"&&(i=document.getElementById(i)),!r)?null:(dhx4.s2b(r.getAttribute("colorbox"))&&(u=document.createElement("div"),u.style.width=r.offsetWidth+"px",u.style.height=r.offsetHeight+"px",r.style.width=r.offsetWidth-(r.offsetHeight+8)+"px",r.parentNode.insertBefore(u,r),u.style.position="relative",f=document.createElement("div"),u.appendChild(r),u.appendChild(f),f.className="dhxcp_colorBox",r.className+=" dhxcp_colorInput",f.style.width=f.style.height=r.offsetHeight+"px"),e={node:r,valueColor:t!=undefined?t:f||r,valueCont:i!=undefined?i:r,conf:{customColors:r.getAttribute("customcolors")!=null?dhx4.s2b(r.getAttribute("customcolors")):null,selectedColor:r.getAttribute("selectedcolor")}},this._nodes.push(e),this.activeNode||(this.activeNode=e),e)};dhtmlXColorPicker.prototype.getNode=function(n){var t=null,i=null;return t=typeof n=="string"?document.getElementById(n):n,t.tagName!=undefined&&(i=this._getNodeByElement(t)),i};dhtmlXColorPicker.prototype._getNodeByElement=function(n){for(var i=null,r=this._nodes.length,t=0;t<r;t++)this._nodes[t].node==n&&(i=this._nodes[t]);return i};dhtmlXColorPicker.prototype._getNodeByValueCont=function(n){for(var i=null,r=this._nodes.length,t=0;t<r;t++)this._nodes[t].valueCont&&this._nodes[t].valueCont==n&&(i=this._nodes[t]);return i};dhtmlXColorPicker.prototype.initMemoryColors=function(){var t=this,n;this._controllerNodes.memory_block.innerHTML="<div class='dhxcp_memory_button_cont'><button class='dhxcp_save_to_memory'><div class='dhxcp_label_bm'>"+this.i18n[this.conf.lang].btnAddColor+"<\/div><\/button><\/div><div class='dhxcp_memory_els_cont'><a class='dhxcp_memory_el'><\/a><a class='dhxcp_memory_el'><\/a><a class='dhxcp_memory_el'><\/a><a class='dhxcp_memory_el'><\/a><a class='dhxcp_memory_el'><\/a><a class='dhxcp_memory_el'><\/a><a class='dhxcp_memory_el'><\/a><a class='dhxcp_memory_el'><\/a><\/div>";this.memory=new this.Memory(this._controllerNodes.memory_block.childNodes[1]);this.memory.onSelect=this._onSelectMemoryEl;this.memory.onSave=function(n){var i=t.colorAIP.rgb2hex({r:n.red,g:n.green,b:n.blue});t.callEvent("onSaveColor",[i])};n=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=this._controllerNodes.memory_block.childNodes[0].firstChild.firstChild;typeof addEventListener=="function"?n.addEventListener("click",this.saveColor,!1):n.attachEvent("onclick",this.saveColor)};dhtmlXColorPicker.prototype._refreshCoordinatesByHSL=function(n,t,i){var r,u,f;r=Math.round((this.configColorArea.maxX-this.configColorArea.minX)*n/359)+this.configColorArea.minX;u=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-i)/100)+this.configColorArea.minY;f=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-t)/100)+this.configColorArea.minY;this._setColorAreaXY(r,u);this._setContrastY(f)};dhtmlXColorPicker.prototype._parseColor=function(n){var i,t;return n instanceof Array?t={r:parseInt(n[0]),g:parseInt(n[1]),b:parseInt(n[2])}:typeof n=="string"&&(n=n.replace(/\s/g,""),/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i.test(n)?(i=n.match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i),t={r:parseInt(i[1]),g:parseInt(i[2]),b:parseInt(i[3])}):t=this.colorAIP.hex2rgb(n)),t};dhtmlXColorPicker.prototype.setColor=function(n){var u=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue}),t=this._parseColor(n),i=t instanceof Object,f,r;return(i=i&&0<=t.r&&t.r<=255,i=i&&0<=t.g&&t.g<=255,i=i&&0<=t.b&&t.b<=255,!i)?u:(f=this.colorAIP.rgb2hex({r:t.r,g:t.g,b:t.b}),f==u)?u:(this.value.red=t.r,this.value.green=t.g,this.value.blue=t.b,r=this.colorAIP.rgb2hsl(t.r/255,t.g/255,t.b/255),this.value.hue=Math.round(r.h),this.value.sat=Math.round(r.s*100),this.value.lum=Math.round(r.l*100),this._refreshCoordinatesByHSL(this.value.hue,this.value.sat,this.value.lum),this._refreshContrast(),this._refreshInputValues(),this._refreshColorValue(),f)};dhtmlXColorPicker.prototype.getSelectedColor=function(){return[this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue}),[this.value.red,this.value.green,this.value.blue],[this.value.hue,this.value.sat,this.value.lum]]};dhtmlXColorPicker.prototype._attachEventsToNode=function(n){typeof addEventListener=="function"?n.node.addEventListener("click",this._doOnClickByNode,!1):n.node.attachEvent("onclick",this._doOnClickByNode);n.valueCont&&n.valueCont.tagName.toLowerCase()=="input"&&(typeof addEventListener=="function"?(n.valueCont.addEventListener("focus",this._doOnFocusByInput,!1),n.valueCont.addEventListener("blur",this._doOnBlurByInput,!1)):(n.valueCont.attachEvent("onfocus",this._doOnFocusByInput),n.valueCont.attachEvent("onblur",this._doOnBlurByInput)))};dhtmlXColorPicker.prototype._detachEventsFromNode=function(n){typeof addEventListener=="function"?n.node.removeEventListener("click",this._doOnClickByNode,!1):n.node.detachEvent("onclick",this._doOnClickByNode);n.valueCont&&n.valueCont.tagName.toLowerCase()=="input"&&(typeof addEventListener=="function"?(n.valueCont.removeEventListener("focus",this._doOnFocusByInput,!1),n.valueCont.removeEventListener("blur",this._doOnBlurByInput,!1)):(n.valueCont.detachEvent("onfocus",this._doOnFocusByInput),n.valueCont.detachEvent("onblur",this._doOnBlurByInput)))};dhtmlXColorPicker.prototype.show=function(n){var t=!1;n!=undefined&&(this.activeNode=this.getNode(n)||this.activeNode);this.activeNode&&this.activeNode.valueCont&&this.activeNode.valueCont.value&&this.setColor(this.activeNode.valueCont.value);this.activeNode?(t=this.activeNode.conf.customColors!=null?this.activeNode.conf.customColors:this.conf.customColors,this.setColor(this.activeNode.conf.selectedColor)):t=this.conf.customColors;t?this.showMemory():this.hideMemory();this.base._dhx_remove?(this.base.firstChild.style.zIndex=dhx4.zim.reserve(this.conf.cp_id),this.base.style.visibility="hidden",document.body.firstChild?document.body.insertBefore(this.base,document.body.firstChild):document.body.appendChild(this.base),this._refreshPosition(),this.base.style.visibility="visible",typeof addEventListener=="function"?document.body.addEventListener("mousedown",this._doOnClickByBody,!1):document.body.attachEvent("onmousedown",this._doOnClickByBody)):this.base.appendChild(this._globalNode);this._controllerNodes.fr_cover&&this.base.insertBefore(this._controllerNodes.fr_cover,this._globalNode);this.callEvent("onShow",[this.activeNode?this.activeNode.node:null])};dhtmlXColorPicker.prototype.setPosition=function(n,t){var i=null,r=parseInt(n),u=parseInt(t);isNaN(r)&&(i={right:"right",bottom:"bottom"}[n.toLowerCase()]?n:null);this.base._dhx_remove?i==null||(this.conf.position=i,this._refreshPosition(i)):isNaN(r)||isNaN(u)||(this._globalNode.style.left=r+"px",this._globalNode.style.top=u+"px",this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.style.left=this._globalNode.style.left,this._controllerNodes.fr_cover.style.top=this._globalNode.style.top))};dhtmlXColorPicker.prototype._initListenerInput=function(){var n=this;this._inputListenerId=this._inputListenerId||setInterval(function(){n._refreshValueByInput()},70)};dhtmlXColorPicker.prototype._removeListenerInput=function(){this._inputListenerId&&(clearInterval(this._inputListenerId),this._inputListenerId=null)};dhtmlXColorPicker.prototype._refreshValueByInput=function(){var n=this.activeNode.valueCont.value,t=this.getSelectedColor()[0];this._inputListenerId&&/^#[\da-f]{6}$/i.test(n)&&n!=t&&(this.setColor(n),this.callEvent("onSelect",[n,this.activeNode.node]))};dhtmlXColorPicker.prototype._refreshPosition=function(n){var i,r;if(this.activeNode!=null){var f=dhx4.absTop(this.activeNode.node),u=dhx4.absLeft(this.activeNode.node),t=dhx4.screenDim(),e=this._globalNode.offsetWidth,o=this._globalNode.offsetHeight,i=0;n=n||this.conf.position;switch(n){case"bottom":i=f+this.activeNode.node.offsetHeight+this.conf.indent;r=u;r+e>t.left+t.right&&(r=u+this.activeNode.node.offsetWidth-e);r<t.left&&(r=u);i+o>t.top+t.bottom&&(i=f-o-this.conf.indent);i-t.top<0&&(i=t.top+this.conf.indent);this._globalNode.style.top=i+"px";this._globalNode.style.left=r+"px";break;default:r=u+this.activeNode.node.offsetWidth+this.conf.indent;i=f;n=="right"&&(r+e>t.left+t.right&&(r=u-e-this.conf.indent),r<t.left&&(r=u+this.activeNode.node.offsetWidth+this.conf.indent));t.bottom-(i+o)<=0&&(i=f+this.activeNode.node.offsetHeight-o);i-t.top<0&&(i=t.top+this.conf.indent);this._globalNode.style.left=r+"px";this._globalNode.style.top=i+"px"}this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.style.left=this._globalNode.style.left,this._controllerNodes.fr_cover.style.top=this._globalNode.style.top)}};dhtmlXColorPicker.prototype.isVisible=function(){return this.base._dhx_remove?this.base.parentNode==document.body:this._globalNode.parentNode==this.base};dhtmlXColorPicker.prototype.hide=function(){if(this.base._dhx_remove)this.base.parentNode&&(this.base.parentNode.removeChild(this.base),dhx4.zim.clear(this.conf.cp_id),typeof addEventListener=="function"?document.body.removeEventListener("mousedown",this._doOnClickByBody,!1):document.body.detachEvent("onmousedown",this._doOnClickByBody));else{if(this.isVisible()==!1)return;this.base.removeChild(this._globalNode)}this._controllerNodes.fr_cover&&this._controllerNodes.fr_cover.parentNode&&this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover);this.callEvent!=undefined&&this.callEvent("onHide",[this.activeNode?this.activeNode.node:null])};dhtmlXColorPicker.prototype.configColorArea={minX:1,maxX:209,minY:1,maxY:119};dhtmlXColorPicker.prototype._skinCollection={dhx_skyblue:!0,dhx_web:!0,dhx_terrace:!0,material:!0};dhtmlXColorPicker.prototype.i18n={en:{labelHue:"Hue",labelSat:"Sat",labelLum:"Lum",labelRed:"Red",labelGreen:"Green",labelBlue:"Blue",btnAddColor:"Save the color",btnSelect:"Select",btnCancel:"Cancel"}};dhtmlXColorPicker.prototype.loadUserLanguage=function(n){typeof this._mergeLangModules=="function"&&this._mergeLangModules();this.conf.lang=n;this._refreshLanguage()};dhtmlXColorPicker.prototype._refreshLanguage=function(){var n,t=this.i18n[this.conf.lang];for(n in t)this._labelNodes[n]&&(this._labelNodes[n].innerHTML=t[n])};dhtmlXColorPicker.prototype._setColorAreaXY=function(n,t){var i=this.configColorArea;n=parseInt(n);i.minX>n?this.conf.x=i.minX:n>i.maxX?this.conf.x=i.maxX:isNaN(n)||(this.conf.x=n);t=parseInt(t);i.minY>t?this.conf.y=i.minY:t>i.maxY?this.conf.y=i.maxY:isNaN(t)||(this.conf.y=t);this._refreshLines()};dhtmlXColorPicker.prototype._setColorByXYC=function(n){n=n||!1;this.value.hue=Math.round(359*(this.conf.x-this.configColorArea.minX)/(this.configColorArea.maxX-this.configColorArea.minX));this.value.lum=Math.round(100-100*(this.conf.y-this.configColorArea.minY)/(this.configColorArea.maxY-this.configColorArea.minY));this.value.sat=Math.round(100-100*(this.conf.c-this.configColorArea.minY)/(this.configColorArea.maxY-this.configColorArea.minY));var t=this.colorAIP.hsl2rgb(this.value.hue,this.value.sat/100,this.value.lum/100);this.value.red=Math.round(255*t.r);this.value.green=Math.round(255*t.g);this.value.blue=Math.round(255*t.b);n||this._refreshContrast();this._refreshInputValues();this._refreshColorValue()};dhtmlXColorPicker.prototype._setContrastY=function(n){var t=this.configColorArea;n=parseInt(n);isNaN(n)||(this.conf.c=Math.min(Math.max(t.minY,n),t.maxY));this._refreshContrastLine()};dhtmlXColorPicker.prototype._refreshInputValues=function(){this._controllerNodes.hue.value=this.value.hue;this._controllerNodes.sat.value=this.value.sat;this._controllerNodes.lum.value=this.value.lum;this._controllerNodes.red.value=this.value.red;this._controllerNodes.green.value=this.value.green;this._controllerNodes.blue.value=this.value.blue};dhtmlXColorPicker.prototype._refreshColorValue=function(){this._controllerNodes.color.style.backgroundColor="rgb("+[this.value.red,this.value.green,this.value.blue].join(", ")+")";var n=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue});this._controllerNodes.hsv.value=n;this.callEvent("onChange",[n])};dhtmlXColorPicker.prototype._refreshContrast=function(){var n=this.colorAIP.hsl2rgb(this.value.hue,0,this.value.lum/100),t=this.colorAIP.hsl2rgb(this.value.hue,1,this.value.lum/100),u=this._checkIeVersion(),i,f,e,r;u&&u<=9?(i=this._controllerNodes.contrastArea.firstChild,i==this._controllerNodes.contrast_line&&(i=document.createElement("div"),i.className+="dhxcp_ie_gradient",this._controllerNodes.contrastArea.appendChild(i),this._controllerNodes.contrastArea.appendChild(this._controllerNodes.contrast_line)),f=this.colorAIP.rgb2hex({r:Math.round(255*n.r),g:Math.round(255*n.g),b:Math.round(255*n.b)}),e=this.colorAIP.rgb2hex({r:Math.round(255*t.r),g:Math.round(255*t.g),b:Math.round(255*t.b)}),i.style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+e+"', endColorstr='"+f+"', GradientType=0)"):(n=[Math.round(255*n.r),Math.round(255*n.g),Math.round(255*n.b)],t=[Math.round(255*t.r),Math.round(255*t.g),Math.round(255*t.b)],r="linear-gradient(rgb("+t.join(",")+"), rgb("+n.join(",")+"))",window.dhx4.isKHTML==!0&&navigator.userAgent.match(/Windows/gi)!=null&&(r="-webkit-"+r),this._controllerNodes.contrastArea.style.backgroundImage=r)};dhtmlXColorPicker.prototype._refreshLines=function(){this._controllerNodes.v_line.style.left=this.conf.x+"px";this._controllerNodes.h_line.style.top=this.conf.y+"px"};dhtmlXColorPicker.prototype._refreshContrastLine=function(){this._controllerNodes.contrast_line.style.top=this.conf.c+"px"};dhtmlXColorPicker.prototype._getOffsetPosition=function(n,t){var i={x:NaN,y:NaN},r=n.target||n.srcElement;return r==t?(i.x=n.offsetX!=undefined?n.offsetX:n.layerX,i.y=n.offsetY!=undefined?n.offsetY:n.layerY):r==this._controllerNodes.v_line?i.y=n.offsetY!=undefined?n.offsetY:n.layerY:i.x=n.offsetX!=undefined?n.offsetX:n.layerX,i};dhtmlXColorPicker.prototype.colorAIP={hex2rgb:function(n){var t=n.match(/^(#)([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);return t!=null?{r:parseInt("0x"+t[2]),g:parseInt("0x"+t[3]),b:parseInt("0x"+t[4])}:null},rgb2hex:function(n){var t=parseInt(n.r),i=parseInt(n.g),r=parseInt(n.b);return t=t||0,i=i||0,r=r||0,"#"+(t?t<16?"0"+t.toString(16):t.toString(16):"00")+(i?i<16?"0"+i.toString(16):i.toString(16):"00")+(r?r<16?"0"+r.toString(16):r.toString(16):"00")},rgb2hsl:function(n,t,i){var e,o,f,r=Math.max(n,t,i),u=Math.min(n,t,i);return f=.5*(r+u),r==u?e=0:r==n?(e=60*(t-i)/(r-u),t<i&&(e+=360)):e=r==t?60*(i-n)/(r-u)+120:60*(n-t)/(r-u)+240,o=f==0||r==u?0:f<=.5?.5*(r-u)/f:.5*(r-u)/(1-f),{h:e,s:o,l:f}},hsl2rgb:function(n,t,i){var o,e,s,r=[],f=[],u;for(o=i<=.5?i*(1+t):i+t-i*t,e=2*i-o,s=n/360,r.push(s+1/3),r.push(s),r.push(s-1/3),u=0;u<3;u++)r[u]<0?r[u]+=1:r[u]>1&&(r[u]-=1),r[u]<1/6?f.push(e+(o-e)*6*r[u]):r[u]<.5?f.push(o):r[u]<2/3?f.push(e+(o-e)*(2/3-r[u])*6):f.push(e);return{r:f[0],g:f[1],b:f[2]}}};dhtmlXColorPicker.prototype._checkIeVersion=function(){var n=navigator.userAgent.match(/(MSIE)\s(\d\.\d)/i);return n&&n[2]?parseInt(n[2]):null};dhtmlXColorPicker.prototype.setCustomColors=function(){this.memory==null&&(this.initMemoryColors(),this.conf.customColors=!0);for(var i,t,r,f,u=arguments.length,n=0;n<u;n++)if(arguments[n]instanceof Array){i=this._rgb2value(arguments[n][0],arguments[n][1],arguments[n][2]);this.memory.setValue(i,null,!1);continue}else if(typeof arguments[n]=="string"){if(t=arguments[n].match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i),t instanceof Array){i=this._rgb2value(t[1],t[2],t[3]);this.memory.setValue(i,null,!1);continue}if(t=arguments[n].match(/(#[\da-f]{6})/ig),t instanceof Array)for(f=t.length,r=0;r<f;r++)i=this._hex2value(t[r]),this.memory.setValue(i,null,!1)}};dhtmlXColorPicker.prototype.getCustomColors=function(){var i=[],n,t;if(this.memory!=null&&this.conf.customColors==!0)for(n=0;n<this.memory.controllers.length;n++)t=this.memory.controllers[n].value,i.push(this.colorAIP.rgb2hex({r:t.red,g:t.green,b:t.blue}));return i};dhtmlXColorPicker.prototype._rgb2value=function(n,t,i){var r=this.colorAIP.rgb2hsl(n/255,t/255,i/255);return{red:n,green:t,blue:i,hue:Math.round(r.h),sat:Math.round(r.s*100),lum:Math.round(r.l*100)}};dhtmlXColorPicker.prototype._hex2value=function(n){var t,i;return t=this.colorAIP.hex2rgb(n),i=this.colorAIP.rgb2hsl(t.r/255,t.g/255,t.b/255),{red:t.r,green:t.g,blue:t.b,hue:Math.round(i.h),sat:Math.round(i.s*100),lum:Math.round(i.l*100)}};dhtmlXColorPicker.prototype.showMemory=function(){this.memory==null&&this.initMemoryColors();this._globalNode.className.match(/dhxcp_add_memory/)||(this._globalNode.className+=" dhxcp_add_memory");this.conf.customColors=!0};dhtmlXColorPicker.prototype.hideMemory=function(){this.memory!=null&&(this._globalNode.className=this._globalNode.className.replace(/\sdhxcp_add_memory/,""));this.conf.customColors=!1};dhtmlXColorPicker.prototype.setSkin=function(n){var r,t,i;if(this._skinCollection[n]==!0){if(r="dhtmlxcp_"+(this.skin||"dummy"),this.base.className=this.base.className.replace(new RegExp(r),""),this.base.className+=" dhtmlxcp_"+n,this.skin=n,this.skin=="material"){t={labelHue:"H",labelSat:"S",labelLum:"L",labelRed:"R",labelGreen:"G",labelBlue:"B"};for(i in t)this.i18n.en[i]=t[i]}this.base.className.match(/dhxcp_shadow/)!=null||dhx4.isIE6||dhx4.isIE7||dhx4.isIE8||(this.base.className+=" dhxcp_shadow")}};dhtmlXColorPicker.prototype.hideOnSelect=function(n){n=dhx4.s2b(n);this.conf.hideOnSelect=n};dhtmlXColorPicker.prototype._indexOf=function(n,t){for(var u=-1,r=n.length,i=r;i>=0;i--)if(n[i]==t){u=i;break}return u};dhtmlXColorPicker.prototype.destructMemory=function(){if(this.memory!=null){this.hideMemory();var n=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=null;typeof addEventListener=="function"?n.removeEventListener("click",this.saveColor,!1):n.detachEvent("onclick",this.saveColor);this.memory.remove();this._controllerNodes.memory_block.innerHTML="";this.memory=null}};dhtmlXColorPicker.prototype.Memory=function(n){var i=this,t=null,r={red:255,blue:255,green:255,hue:0,sat:0,lum:100};this.select=function(){var r=this!=window?this:event.srcElement,n=n||r.dhxpc_memory;if(t!=null&&i.unSelect(),t=n,n.domElement.className+=" dhxcp_memory_el_select",typeof i.onSelect=="function")i.onSelect(n)};this.onSelect=null;this.onSave=null;this._createMemoryController=function(n){var t={domElement:n,value:dhx4._copyObj(r)};return n.dhxpc_memory=t,typeof addEventListener=="function"?n.addEventListener("click",i.select,!1):n.attachEvent("onclick",i.select),t};this._findMemoryControllers=function(n){for(var i=n.getElementsByTagName("a"),u=[],r=i.length,t=0;t<r;t++)u.push(this._createMemoryController(i[t]));return u};this.controllers=this._findMemoryControllers(n);this.unSelect=function(){t&&(t.domElement.className=t.domElement.className.replace(/\s.*$/i,""));t=null};this.setActiveNext=function(){var n=null,i;return t==null?t=this.controllers[0]:(n=this.getIndex(t),i=this.controllers.length,this.unSelect(),t=n+1<i?this.controllers[n+1]:this.controllers[0]),t.domElement.className+=" dhxcp_memory_el_next",t};this.setValue=function(n,i,r){if(t=i||t,t==null&&(t=this.controllers[0]),t.value.red=n.red,t.value.blue=n.blue,t.value.green=n.green,t.value.hue=n.hue,t.value.sat=n.sat,t.value.lum=n.lum,t.domElement.style.backgroundColor="rgb("+[n.red,n.green,n.blue].join(", ")+")",this.setActiveNext(),r!=!1&&typeof this.onSave=="function")this.onSave(n)};this.clean=function(){for(var u=this.controllers.length,n,i=0;i<u;i++)n=this.controllers[i],n.value=dhx4._copyObj(r),n.domElement.style.backgroundColor="rgb("+[r.red,r.green,r.blue].join(", ")+")";this.unSelect();t=this.controllers[0]};this.getIndex=function(n){for(var r=-1,i=this.controllers.length,t=0;t<i;t++)if(this.controllers[t]==n){r=t;break}return r};this.remove=function(){for(var t=this.controllers.length,n=0;n<t;n++)typeof addEventListener=="function"?this.controllers[n].domElement.removeEventListener("click",this.select,!1):this.controllers[n].domElement.detachEvent("onclick",this.select),delete this.controllers[n].domElement.dhxpc_memory;delete this.onSelect;delete this.controllers;delete this.onSave}};window.dhx4.isIE6&&(dhtmlXColorPicker.prototype._cpInitFRM=function(){var n;this._controllerNodes.fr_cover||(n=document.createElement("IFRAME"),n.className="dhxcp_frm",n.border=0,n.frameBorder=0,this._controllerNodes.fr_cover=n);this.base._dhx_remove||this.base.insertBefore(n,this._globalNode)});app=app||{};app.colorPicker=app.colorPicker||{};app.colorPicker=function(){function t(n){var t,r,u;dhtmlXColorPicker.prototype.i18n.custom={btnSelect:n.btnSelect,btnCancel:n.btnCancel};t=new dhtmlXColorPicker({parent:n.parent,closeable:!0,skin:n.skin,color:n.color,hide:!0});t.linkTo(n.input);t.setPosition(n.setPosition||"bottom");t.attachEvent("onSelect",function(n,t){app.contrastColor.Init({callFrom:"default",parentElem:"#colorPickerContainer",elemChild:"#"+t.id,childColor:n})});n.toggle!==undefined&&i(t);t.loadUserLanguage("custom");r=t.attachEvent("onShow",function(){$(".dhx_button_save").attr("type","button")});u=t.attachEvent("onSelect",function(){t.hide()})}function i(n){var t=$("#"+n.base.offsetParent.id),i=0;n.attachEvent("onShow",function(){i=t.children("#colorPicker").children().height()+30+"px";t.css("height",i)});n.attachEvent("onHide",function(){var n=t.children("#colorPicker"),i=n.children().height();$("#colorPickerContainer").css("height","21px");i&&n.children().remove()})}var n=function(n){t(n)};return{Init:n}}();app=app||{};app.calendar=app.calendar||{};app.calendar.constants=app.calendar.constants||{};app.calendar.constants=function(){return{CalendarFilter:"#filterCalendar",CalendarFilterNameFiledId:"#CalendarFilterName",CalendarFilterDescriptionFieldId:"#CalendarFilterDescription",CalendarButtonApplyFilter:"#btnCalendarApplyFilter",CalendarDeleteButtonId:".deleteButton",CalendarGrid:"CalendarsGrid",ConfirmationModalId:"#confirmationModal",ConfirmationModalConfirmSave:"#confirmationModalConfirmSave",ConfirmationModalConfirmCancel:"#confirmationModalConfirmCancel",ColorPickerInput:"colorPickerInput",ColorPickerParent:"colorPicker",ColorPickerSkin:"material",ConfirmationWitPeopleModalId:"#confirmationWitPeopleModal",ConfirmationWitPeopleModalConfirmSave:"#confirmationWitPeopleModalConfirmSave",ConfirmationWitPeopleModalConfirmCancel:"#confirmationWitPeopleModalConfirmCancel",CalendarColorPickerInput:"calendarColorPickerInput",CalendarColorPickerParent:"calendarColorPicker",CalendarColorPickerInitialColor:"#ffffff"}}();
//# sourceMappingURL=bundle--colorPicker.min.js.map