/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
function dhtmlDragAndDropObject(){return window.dhtmlDragAndDrop?window.dhtmlDragAndDrop:(this.lastLanding=0,this.dragNode=0,this.dragStartNode=0,this.dragStartObject=0,this.tempDOMU=null,this.tempDOMM=null,this.waitDrag=0,window.dhtmlDragAndDrop=this,this)}function dhtmlXCellObject(n,t){this.cell=document.createElement("DIV");this.cell.className="dhx_cell"+(t||"");this._idd=n;this._isCell=!0;this.conf={borders:!0,idx:{},css:t||"",idx_data:{cont:"dhx_cell_cont",pr1:"dhx_cell_progress_bar",pr2:"dhx_cell_progress_img",pr3:"dhx_cell_progress_svg",menu:"dhx_cell_menu",toolbar:"dhx_cell_toolbar",ribbon:"dhx_cell_ribbon",sb:"dhx_cell_statusbar",cover:"dhx_cell_cover"},ofs_nodes:{t:{},b:{}}};this.dataNodes={};this.views={};var i=document.createElement("DIV");return i.className="dhx_cell_cont"+this.conf.css,this.cell.appendChild(i),i=null,this._updateIdx=function(){var t,i,n,r;for(n in this.conf.idx)this.conf.idx[n]=null,delete this.conf.idx[n];for(t=0;t<this.cell.childNodes.length;t++){i=this.cell.childNodes[t].className;for(n in this.conf.idx_data)r=new RegExp(this.conf.idx_data[n]),i.match(r)!=null&&(this.conf.idx[n]=t)}this.callEvent("_onIdxUpdated",[])},this._adjustAttached=function(){for(var n in this.dataNodes)this.dataNodes[n]!=null&&typeof this.dataNodes[n].setSizes=="function"&&this.dataNodes[n].setSizes();if(this.dataObj!=null&&typeof this.dataObj.setSizes=="function"){if(this.dataType=="layout"&&typeof dhtmlXLayoutCell=="function"&&this instanceof window.dhtmlXLayoutCell&&this.dataObj._getMainInst()!=this.layout._getMainInst()){this.dataObj.setSizes();return}this.dataObj.setSizes.apply(this.dataObj,arguments)}},this._setSize=function(n,t,i,r,u,f,e,o){var h,s,c;this.conf.size==null&&(this.conf.size={});o==null&&(o={});h={left:"x",top:"y",width:"w",height:"h"};this.conf.size.x=n;this.conf.size.y=t;this.conf.size.w=Math.max(i,0);this.conf.size.h=Math.max(r,0);for(s in h)c=o[s]||s,this.cell.style[c]=this.conf.size[h[s]]+"px";this.callEvent("_onSetSize",[]);f!==!0?this._adjustCont(u,e):this._adjustAttached(u);this._adjustProgress()},this._adjustCont=function(n,t){var i=this.cell.childNodes[this.conf.idx.cont],u,e,r,f;if(typeof dhtmlXLayoutCell=="function"&&this instanceof window.dhtmlXLayoutCell&&this.conf.collapsed==!0){i.style.left=i.style.top="0px";i.style.width=i.style.height="200px";i=null;return}u=0;for(r in this.conf.ofs_nodes.t)f=this.conf.ofs_nodes.t[r],u+=f=="func"?this[r]():f==!0?this.cell.childNodes[this.conf.idx[r]].offsetHeight:0;e=0;for(r in this.conf.ofs_nodes.b)f=this.conf.ofs_nodes.b[r],e+=f=="func"?this[r]():f==!0?this.cell.childNodes[this.conf.idx[r]].offsetHeight:0;i.style.left="0px";i.style.top=u+"px";this.conf.cells_cont==null&&(this.conf.cells_cont={},i.style.width=this.cell.offsetWidth+"px",i.style.height=Math.max(this.cell.offsetHeight-u-e,0)+"px",this.conf.cells_cont.w=parseInt(i.style.width)-i.offsetWidth,this.conf.cells_cont.h=parseInt(i.style.height)-i.offsetHeight);i.style.left="0px";i.style.top=u+"px";i.style.width=Math.max(this.cell.offsetWidth+this.conf.cells_cont.w,0)+"px";i.style.height=Math.max(this.conf.size.h-u-e+this.conf.cells_cont.h,0)+"px";i=null;this._adjustAttached(n);t=="expand"&&this.dataType=="editor"&&this.dataObj!=null&&this.dataObj._prepareContent(!0)},this._mtbUpdBorder=function(){for(var t=["menu","toolbar","ribbon"],n=0;n<t.length;n++)if(this.conf.idx[t[n]]!=null){var i=this.cell.childNodes[this.conf.idx[t[n]]],r="dhx_cell_"+t[n]+"_no_borders",u="dhx_cell_"+t[n]+"_def";i.className=i.className.replace(new RegExp(this.conf.borders?r:u),this.conf.borders?u:r);i=null}},this._resetSizeState=function(){this.conf.cells_cont=null},this.conf.view="def",this.conf.views_loaded={},this.conf.views_loaded[this.conf.view]=!0,this._viewSave=function(n){var i,t,r;for(this.views[n]={borders:this.conf.borders,ofs_nodes:{t:{},b:{}},url_data:this.conf.url_data,dataType:this.dataType,dataObj:this.dataObj,cellCont:[],dataNodes:{},dataNodesCont:{}},i=this.cell.childNodes[this.conf.idx.cont];i.childNodes.length>0;)this.views[n].cellCont.push(i.firstChild),i.removeChild(i.firstChild);i=null;this.dataType=null;this.dataObj=null;this.conf.url_data=null;for(t in this.dataNodes){for(r in this.conf.ofs_nodes)typeof this.conf.ofs_nodes[r][t]!="undefined"&&(this.views[n].ofs_nodes[r][t]=this.conf.ofs_nodes[r][t],this.conf.ofs_nodes[r][t]=null,delete this.conf.ofs_nodes[r][t]);this.views[n].dataNodesCont[t]=this.cell.childNodes[this.conf.idx[t]];this.cell.removeChild(this.cell.childNodes[this.conf.idx[t]]);this.views[n].dataNodes[t]=this.dataNodes[t];this.dataNodes[t]=null;delete this.dataNodes[t];this._updateIdx()}this.callEvent("_onViewSave",[n])},this._viewRestore=function(n){var i,t,r;if(this.views[n]!=null){for(this.dataObj=this.views[n].dataObj,this.dataType=this.views[n].dataType,this.conf.url_data=this.views[n].url_data,i=0;i<this.views[n].cellCont.length;i++)this.cell.childNodes[this.conf.idx.cont].appendChild(this.views[n].cellCont[i]);for(t in this.views[n].dataNodes)this.dataNodes[t]=this.views[n].dataNodes[t],t=="menu"&&this.cell.insertBefore(this.views[n].dataNodesCont[t],this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont]),t=="toolbar"&&this.cell.insertBefore(this.views[n].dataNodesCont[t],this.cell.childNodes[this.conf.idx.cont]),t=="ribbon"&&this.cell.insertBefore(this.views[n].dataNodesCont[t],this.cell.childNodes[this.conf.idx.cont]),t=="sb"&&this.cell.appendChild(this.views[n].dataNodesCont[t]),this._updateIdx();for(t in this.views[n].ofs_nodes)for(r in this.views[n].ofs_nodes[t])this.conf.ofs_nodes[t][r]=this.views[n].ofs_nodes[t][r];this.conf.borders!=this.views[n].borders&&this[this.views[n].borders?"_showBorders":"_hideBorders"](!0);this.dataType=="url"&&this.conf.url_data!=null&&this.conf.url_data.ajax==!1&&this.conf.url_data.post_data!=null&&this.reloadURL();this.callEvent("_onViewRestore",[n]);this._viewDelete(n)}},this._viewDelete=function(n){var r,i,t;if(this.views[n]!=null){this.views[n].borders=null;for(t in this.views[n].ofs_nodes){for(r in this.views[n].ofs_nodes[t])this.views[n].ofs_nodes[t][r]=null;this.views[n].ofs_nodes[t]=null}for(this.views[n].dataType=null,this.views[n].dataObj=null,this.views[n].url_data=null,i=0;i<this.views[n].cellCont.length;i++)this.views[n].cellCont[i]=null;this.views[n].cellCont=null;for(t in this.views[n].dataNodes)this.views[n].dataNodes[t]=null,this.views[n].dataNodesCont[t]=null;this.views[n].dataNodes=this.views[n].dataNodesCont=null;this.views[n]=null;delete this.views[n]}},window.dhx4._eventable(this),this._updateIdx(),this}function dhtmlXCellTop(n,t){var i,r;if(arguments.length!=0&&typeof n!="undefined"){if(i=this,this.dataNodes={},this.conf.ofs={t:0,b:0,l:0,r:0},this.conf.ofs_nodes={t:{},b:{}},this.conf.progress=!1,this.conf.fs_mode=!1,this.conf.fs_tm=null,this.conf.fs_resize=!1,n==document.body?(this.conf.fs_mode=!0,this.base=n,this.base==document.body&&(r={dhx_skyblue:{t:2,b:2,l:2,r:2},dhx_web:{t:8,b:8,l:8,r:8},dhx_terrace:{t:9,b:9,l:8,r:8},material:{t:9,b:9,l:8,r:8}},this.conf.ofs=r[this.conf.skin]!=null?r[this.conf.skin]:r.dhx_skyblue)):this.base=typeof n=="string"?document.getElementById(n):n,this.base.className+=" "+this.conf.css+"_base_"+this.conf.skin,this.cont=document.createElement("DIV"),this.cont.className=this.conf.css+"_cont",this.base.appendChild(this.cont),t!=null)this.setOffsets(t,!1);else if(this.base._ofs!=null){this.setOffsets(this.base._ofs,!1);this.base._ofs=null;try{delete this.base._ofs}catch(u){}}this._adjustCont=function(){var t=this.conf.ofs.t,i;for(var n in this.conf.ofs_nodes.t)t+=this.conf.ofs_nodes.t[n]==!0?this.dataNodes[n].offsetHeight:0;i=this.conf.ofs.b;for(n in this.conf.ofs_nodes.b)i+=this.conf.ofs_nodes.b[n]==!0?this.dataNodes[n].offsetHeight:0;this.cont.style.left=this.conf.ofs.l+"px";this.cont.style.width=this.base.clientWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.cont.style.top=t+"px";this.cont.style.height=this.base.clientHeight-t-i+"px"};this._setBaseSkin=function(n){this.base.className=this.base.className.replace(new RegExp(this.conf.css+"_base_"+this.conf.skin,"gi"),this.conf.css+"_base_"+n)};this._initFSResize=function(){this.conf.fs_resize!=!0&&(this._doOnResizeStart=function(){window.clearTimeout(i.conf.fs_tm);i.conf.fs_tm=window.setTimeout(i._doOnResizeEnd,200)},this._doOnResizeEnd=function(){i.setSizes()},typeof addEventListener=="function"?window.addEventListener("resize",this._doOnResizeStart,!1):window.attachEvent("onresize",this._doOnResizeStart),this.conf.fs_resize=!0)};this.conf.fs_mode==!0&&this._initFSResize();this._unloadTop=function(){this._mtbUnload();this.detachHeader();this.detachFooter();this.conf.fs_mode==!0&&(typeof addEventListener=="function"?window.removeEventListener("resize",this._doOnResizeStart,!1):window.detachEvent("onresize",this._doOnResizeStart));this.base.removeChild(this.cont);var n=new RegExp("s{0,}"+this.conf.css+"_base_"+this.conf.skin,"gi");this.base.className=this.base.className.replace(n,"");this.cont=this.base=null;i=null};n=null}}function dhtmlXCalendarObject(n,t){var o,e,i,r,s,f,u,h;for(this.i={},o=null,e=typeof n=="string"?document.getElementById(n):n,e&&typeof e=="object"&&e.tagName&&String(e.tagName).toLowerCase()!="input"&&(o=e),e=null,typeof n=="object"&&n.length||(n=[n]),r=0;r<n.length;r++)typeof n[r]=="string"&&(n[r]=document.getElementById(n[r])||null),n[r]!=null&&n[r].tagName&&String(n[r].tagName).toLowerCase()=="input"?this.i[window.dhx4.newId()]={input:n[r]}:!(n[r]instanceof Array)&&n[r]instanceof Object&&(n[r].input!=null||n[r].button!=null)&&(n[r].input!=null&&typeof n[r].input=="string"&&(n[r].input=document.getElementById(n[r].input)),n[r].button!=null&&typeof n[r].button=="string"&&(n[r].button=document.getElementById(n[r].button)),this.i[window.dhx4.newId()]=n[r]),n[r]=null;for(this.conf={skin:t||window.dhx4.skin||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhtmlxcalendar")||"material",zi:window.dhx4.newId(),touch:!window.dhx4.isIE,time:!0,today:!1,ws_first:!0},this.setSkin=function(n,t){(this.conf.skin!=n||t)&&(this.conf.skin=n,this.base.className="dhtmlxcalendar_"+this.conf.skin,this._ifrSize())},this.base=document.createElement("DIV"),this.base.style.display="none",this.base.appendChild(document.createElement("DIV")),o!=null?(this._hasParent=!0,o.appendChild(this.base),o=null):document.body.appendChild(this.base),this.setParent=function(n){this._hasParent&&(typeof n=="object"?n.appendChild(this.base):typeof n=="string"&&document.getElementById(n).appendChild(this.base))},this.setSkin(this.conf.skin,!0),this.base.onclick=function(n){n=n||event;n.preventDefault&&n.preventDefault();n.cancelBubble=!0},this.base.onmousedown=function(){return!1},this.conf.touch&&(this.base.ontouchstart=this.base.onclick),this.loadUserLanguage=function(n){var r,t,i;if(this.langData[n]){if(this.lang=n,this.setWeekStartDay(this.langData[this.lang].weekstart),this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d"),this.msCont)for(r=0,t=0;t<this.msCont.childNodes.length;t++)for(i=0;i<this.msCont.childNodes[t].childNodes.length;i++)this.msCont.childNodes[t].childNodes[i].innerHTML=this.langData[this.lang].monthesSNames[r++];this.contTime.childNodes[0].childNodes[0].childNodes[5].innerHTML=this.langData[this.lang].today;this.contTime.childNodes[0].childNodes[0].childNodes[4].innerHTML=this.langData[this.lang].clear}},this.contMonth=document.createElement("DIV"),this.contMonth.className="dhtmlxcalendar_month_cont",this.contMonth.onselectstart=function(n){return n=n||event,n.cancelBubble=!0,n.preventDefault?n.preventDefault():n.returnValue=!1,!1},this.base.firstChild.appendChild(this.contMonth),f=document.createElement("UL"),f.className="dhtmlxcalendar_line",this.contMonth.appendChild(f),u=document.createElement("LI"),u.className="dhtmlxcalendar_cell dhtmlxcalendar_month_hdr",u.innerHTML="<div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left\";'><\/div><span><\/span><div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right\";'><\/div>",f.appendChild(u),i=this,u.onclick=function(n){var t,r,u;if(n=n||event,n.type=="touchstart"&&n.preventDefault!=null&&n.preventDefault(),t=n.target||n.srcElement,t.className&&t.className.indexOf("dhtmlxcalendar_month_arrow")===0){i._hideSelector();r=t.parentNode.firstChild==t?-1:1;u=new Date(i._activeMonth);i._drawMonth(new Date(i._activeMonth.getFullYear(),i._activeMonth.getMonth()+r,1,0,0,0,0));i._evOnArrowClick([u,new Date(i._activeMonth)]);return}if(t.className&&t.className=="dhtmlxcalendar_month_label_month"){n.cancelBubble=!0;i._showSelector("month",Math.round(t.offsetLeft+t.offsetWidth/2),t.offsetTop+t.offsetHeight+2,"selector_month",!0);return}if(t.className&&t.className=="dhtmlxcalendar_month_label_year"){n.cancelBubble=!0;i._showSelector("year",Math.round(t.offsetLeft+t.offsetWidth/2),t.offsetTop+t.offsetHeight+2,"selector_year",!0);return}i._hideSelector()},this.conf.touch==!0&&(u.ontouchstart=u.onclick),this.contDays=document.createElement("DIV"),this.contDays.className="dhtmlxcalendar_days_cont",this.base.firstChild.appendChild(this.contDays),this.setWeekStartDay=function(n){n==0&&(n=7);this._wStart=Math.min(Math.max(isNaN(n)?1:n,1),7);this._drawDaysOfWeek()},this._drawDaysOfWeek=function(){var n,r,u,t,i;for(this.contDays.childNodes.length==0?(n=document.createElement("UL"),n.className="dhtmlxcalendar_line",this.contDays.appendChild(n)):n=this.contDays.firstChild,r=this._wStart,u=this.langData[this.lang].daysSNames,u.push(String(this.langData[this.lang].daysSNames[0]).valueOf()),t=0;t<8;t++)n.childNodes[t]==null?(i=document.createElement("LI"),n.appendChild(i)):i=n.childNodes[t],t==0?(i.className="dhtmlxcalendar_cell_wn",i.innerHTML="<div class='dhtmlxcalendar_label'>"+(this.langData[this.lang].weekname||"w")+"<\/div>"):(i.className="dhtmlxcalendar_cell"+(r>=6?" dhtmlxcalendar_day_weekday_cell":"")+(t==1?"_first":""),i.innerHTML=u[r],++r>7&&(r=1));this._activeMonth!=null&&this._drawMonth(this._activeMonth)},this._wStart=this.langData[this.lang].weekstart,this.setWeekStartDay(this._wStart),this.contDates=document.createElement("DIV"),this.contDates.className="dhtmlxcalendar_dates_cont",this.base.firstChild.appendChild(this.contDates),this.contDates.onclick=function(n){var t,e;if(n=n||event,n.type=="touchstart"&&n.preventDefault!=null&&n.preventDefault(),t=n.target||n.srcElement,t.parentNode!=null&&t.parentNode._date!=null&&(t=t.parentNode),t._date!=null&&!t._css_dis){var u=i._activeDate.getHours(),f=i._activeDate.getMinutes(),r=t._date;if(i.checkEvent("onBeforeChange")&&!i.callEvent("onBeforeChange",[new Date(t._date.getFullYear(),t._date.getMonth(),t._date.getDate(),u,f)]))return;i._activeDateCell!=null&&(i._activeDateCell._css_date=!1,i._updateCellStyle(i._activeDateCell._q,i._activeDateCell._w));e=i._activeDate.getFullYear()+"_"+i._activeDate.getMonth()!=r.getFullYear()+"_"+r.getMonth();i._nullDate=!1;i._activeDate=new Date(r.getFullYear(),r.getMonth(),r.getDate(),u,f);i._activeDateCell=t;i._activeDateCell._css_date=!0;i._activeDateCell._css_hover=!1;i._updateCellStyle(i._activeDateCell._q,i._activeDateCell._w);e&&i._drawMonth(i._activeDate);i._updateInp();i._hasParent||(n.type=="touchstart"?window.setTimeout(function(){i._hide()},400):i._hide());i._evOnClick([new Date(i._activeDate.getTime())]);i._doOnSelectorChange(!0)}},this.conf.touch==!0&&(this.contDates.ontouchstart=this.contDates.onclick),this.contDates.onmouseover=function(n){n=n||event;var t=n.target||n.srcElement;if(t.parentNode!=null&&t.parentNode._date!=null&&(t=t.parentNode),t._date!=null){if(i._lastHover==t||t._css_hover)return;t._css_hover=!0;i._updateCellStyle(t._q,t._w);i._lastHover=t;i._evOnMouseOver([new Date(t._date.getFullYear(),t._date.getMonth(),t._date.getDate(),0,0,0,0),n]);t=null}},this.contDates.onmouseout=function(n){i._clearDayHover(n||event)},this._lastHover=null,this._clearDayHover=function(n){this._lastHover&&(this._lastHover._css_hover=!1,this._updateCellStyle(this._lastHover._q,this._lastHover._w),n!=null&&i._evOnMouseOut([new Date(this._lastHover._date.getFullYear(),this._lastHover._date.getMonth(),this._lastHover._date.getDate(),0,0,0,0),n]),this._lastHover=null)},r=0;r<6;r++)for(f=document.createElement("UL"),f.className="dhtmlxcalendar_line",this.contDates.appendChild(f),s=0;s<=7;s++)u=document.createElement("LI"),u.className=s==0?"dhtmlxcalendar_cell_wn":"dhtmlxcalendar_cell",f.appendChild(u);this.contTime=document.createElement("DIV");this.contTime.className="dhtmlxcalendar_time_cont";this.contTime.style.display="none";this.base.firstChild.appendChild(this.contTime);this.showTime=function(){this.conf.time!=!0&&(this.conf.time=!0,this._adjustTimeCont())};this.hideTime=function(){this.conf.time==!0&&(this.conf.time=!1,this._adjustTimeCont())};this.showToday=function(){this.conf.today!=!0&&(this.conf.today=!0,this._adjustTimeCont())};this.hideToday=function(){this.conf.today==!0&&(this.conf.today=!1,this._adjustTimeCont())};this._adjustTimeCont=function(){var n="";this.conf.time==!0&&(n+="_time");this.conf.today==!0&&(n+="_today");n==""?this.contTime.style.display="none":(this.contTime.className="dhtmlxcalendar_time_cont dhtmlxcalendar_mode"+n,this.contTime.style.display="");this._ifrSize()};this._adjustTimeCont();f=document.createElement("UL");f.className="dhtmlxcalendar_line";this.contTime.appendChild(f);u=document.createElement("LI");u.className="dhtmlxcalendar_cell dhtmlxcalendar_time_hdr";u.innerHTML="<div class='dhtmlxcalendar_time_img'><\/div><span class='dhtmlxcalendar_label_hours'><\/span><span class='dhtmlxcalendar_label_colon'>:<\/span><span class='dhtmlxcalendar_label_minutes'><\/span><span class='dhtmlxcalendar_label_clear'>"+this.langData[this.lang].clear+"<\/span><span class='dhtmlxcalendar_label_today'>"+this.langData[this.lang].today+"<\/span>";f.appendChild(u);u.onclick=function(n){var t,u,r;if(n=n||event,n.type=="touchstart"&&n.preventDefault!=null&&n.preventDefault(),t=n.target||n.srcElement,t.tagName!=null&&t.tagName.toLowerCase()=="span"&&t._par==!0&&t.parentNode!=null&&(t=t.parentNode),t.className&&t.className=="dhtmlxcalendar_label_hours"){n.cancelBubble=!0;u=i.contMonth.offsetHeight+i.contDays.offsetHeight+i.contDates.offsetHeight+t.offsetTop;i._showSelector("hours",Math.round(t.offsetLeft+t.offsetWidth/2),u-2,"selector_hours",!0);return}if(t.className&&t.className=="dhtmlxcalendar_label_minutes"){n.cancelBubble=!0;i._minutesInterval==1&&(r=i.getFormatedDate("%i"),t.innerHTML="<span class='dhtmlxcalendar_selected_date'>"+r.charAt(0)+"<\/span>"+r.charAt(1),t.firstChild._par=!0,i._selectorMode=1);u=i.contMonth.offsetHeight+i.contDays.offsetHeight+i.contDates.offsetHeight+t.offsetTop;i._showSelector("minutes",Math.round(t.offsetLeft+t.offsetWidth/2),u-2,"selector_minutes",!0);return}i._hideSelector();t.className&&t.className=="dhtmlxcalendar_label_today"&&(r=new Date,r=new Date(r.getFullYear(),r.getMonth(),r.getDate(),i._activeDate.getHours(),i._activeDate.getMinutes(),i._activeDate.getSeconds(),i._activeDate.getMilliseconds()),i.setDate(r),i._updateInp(),i.callEvent("onButtonClick",[r]));t.className&&t.className=="dhtmlxcalendar_label_clear"&&(i._nullDate=!0,i._drawMonth(new Date),i._updateInp(),i.callEvent("onButtonClick",[null]))};this.conf.touch==!0&&(u.ontouchstart=u.onclick);this._activeMonth=null;this._activeDate=new Date;this._activeDateCell=null;this.setDate=function(n){window.dhx4.temp_calendar={tz:null};this._nullDate=typeof n=="undefined"||n===""||!n;n instanceof Date||(n=this._strToDate(String(n||"")),n=="Invalid Date"?n=new Date:this.conf.tz=window.dhx4.temp_calendar.tz,window.dhx4.temp_calendar=null);this.conf.tz==null&&(this.conf.tz=window.dhx4.date2str(n,"%P"));var t=n.getTime();this._isOutOfRange(t)||(this._activeDate=new Date(t),this._drawMonth(this._nullDate?new Date:this._activeDate),this._updateVisibleHours(),this._updateVisibleMinutes())};this.getDate=function(n){var t,i;return this._nullDate?null:(t=new Date(this._activeDate.getTime()),n)?(window.dhx4.temp_calendar={tz:this.conf.tz},i=this._dateToStr(t),window.dhx4.temp_calendar=null,i):t};this._drawMonth=function(n){var i,c,t,e,o,u,a;if(n instanceof Date){isNaN(n.getFullYear())&&(n=new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),1,0,0,0,0));this._activeMonth=new Date(n.getFullYear(),n.getMonth(),1,0,0,0,0);this._activeDateCell=null;var r=new Date(this._activeMonth.getTime()),y=r.getDay(),s=y-this._wStart;s<0&&(s=s+7);r.setDate(r.getDate()-s);var p=n.getMonth(),l=new Date(this._activeDate.getFullYear(),this._activeDate.getMonth(),this._activeDate.getDate(),0,0,0,0).getTime(),h=0;for(i=0;i<6;i++)for(c=this._wStart,t=0;t<=7;t++)if(t==0)e=this.getWeekNumber(new Date(r.getFullYear(),r.getMonth(),r.getDate()+h,0,0,0,0)),e>=52&&this.conf.ws_first==!0&&this._activeMonth.getMonth()==0?(o=this.getWeekNumber(new Date(r.getFullYear(),r.getMonth(),r.getDate()+h+7,0,0,0,0)),o<e&&o>1&&(e=1)):e>52&&this._activeMonth.getMonth()==11&&(o=this.getWeekNumber(new Date(r.getFullYear()+1,0,1)),o==1&&(e=1)),this.contDates.childNodes[i].childNodes[t].innerHTML="<div class='dhtmlxcalendar_label'>"+e+"<\/div>";else{u=new Date(r.getFullYear(),r.getMonth(),r.getDate()+h,0,0,0,0);u.getHours()!=0&&(a=u.getHours()>12?24-u.getHours():u.getHours(),u.setTime(u.getTime()+36e5*a));var w=u.getDay(),f=u.getTime(),v="dhtmlxcalendar_label";this._tipData[f]!=null?(this._tipData[f].usePopup&&typeof dhtmlXPopup=="function"?(this.contDates.childNodes[i].childNodes[t].removeAttribute("title"),this._initTooltipPopup()):this.contDates.childNodes[i].childNodes[t].setAttribute("title",this._tipData[f].text),this._tipData[f].showIcon&&(v+=" dhtmlxcalendar_label_title")):this.contDates.childNodes[i].childNodes[t].removeAttribute("title");this.contDates.childNodes[i].childNodes[t].innerHTML="<div class='"+v+"'>"+u.getDate()+"<\/div>";this.contDates.childNodes[i].childNodes[t]._date=new Date(f);this.contDates.childNodes[i].childNodes[t]._q=i;this.contDates.childNodes[i].childNodes[t]._w=t;this.contDates.childNodes[i].childNodes[t]._css_month=u.getMonth()==p;this.contDates.childNodes[i].childNodes[t]._css_date=!this._nullDate&&f==l;this.contDates.childNodes[i].childNodes[t]._css_weekend=c>=6;this.contDates.childNodes[i].childNodes[t]._css_dis=this._isOutOfRange(f);this.contDates.childNodes[i].childNodes[t]._css_holiday=this._holidays[f]==!0;this._updateCellStyle(i,t);f==l&&(this._activeDateCell=this.contDates.childNodes[i].childNodes[t]);++c>7&&(c=1);h++}this.contMonth.firstChild.firstChild.childNodes[1].innerHTML=this._buildMonthHdr(n)}};this._updateCellStyle=function(n,t){var i=this.contDates.childNodes[n].childNodes[t],r="dhtmlxcalendar_cell dhtmlxcalendar_cell";r+=i._css_month?"_month":"";r+=i._css_date?"_date":"";r+=i._css_weekend?"_weekend":"";r+=i._css_holiday?"_holiday":"";r+=i._css_dis?"_dis":"";r+=i._css_hover&&!i._css_dis?"_hover":"";i.className=r;i=null};this._minutesInterval=5;this._initSelector=function(n,t){var f,e,u,o,r;if(this._selCover||(this._selCover=document.createElement("DIV"),this._selCover.className="dhtmlxcalendar_selector_cover",this.base.firstChild.appendChild(this._selCover)),this._sel||(this._sel=document.createElement("DIV"),this._sel.className="dhtmlxcalendar_selector_obj",this.base.firstChild.appendChild(this._sel),this._sel.appendChild(document.createElement("TABLE")),this._sel.firstChild.className="dhtmlxcalendar_selector_table",this._sel.firstChild.cellSpacing=0,this._sel.firstChild.cellPadding=0,this._sel.firstChild.border=0,this._sel.firstChild.appendChild(document.createElement("TBODY")),this._sel.firstChild.firstChild.appendChild(document.createElement("TR")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.childNodes[0].className="dhtmlxcalendar_selector_cell_left",this._sel.firstChild.firstChild.firstChild.childNodes[1].className="dhtmlxcalendar_selector_cell_middle",this._sel.firstChild.firstChild.firstChild.childNodes[2].className="dhtmlxcalendar_selector_cell_right",this._sel.firstChild.firstChild.firstChild.childNodes[0].innerHTML="&nbsp;",this._sel.firstChild.firstChild.firstChild.childNodes[2].innerHTML="&nbsp;",this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_left dhtmlxcalendar_selector_cell_left_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_left"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_right dhtmlxcalendar_selector_cell_right_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_right"},this._sel.onmouseover=function(n){n=n||event;var t=n.target||n.srcElement;t._cell===!0&&(i._selHover!=t&&i._clearSelHover(),String(t.className).match(/^\s{0,}dhtmlxcalendar_selector_cell\s{0,}$/gi)!=null&&(t.className+=" dhtmlxcalendar_selector_cell_hover",i._selHover=t))},this._sel.onmouseout=function(){i._clearSelHover()},this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick=function(n){n=n||event;n.type=="touchstart"&&n.preventDefault!=null&&n.preventDefault();n.cancelBubble=!0;i._scrollYears(-1)},this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick=function(n){n=n||event;n.type=="touchstart"&&n.preventDefault!=null&&n.preventDefault();n.cancelBubble=!0;i._scrollYears(1)},this.conf.touch==!0&&(this._sel.firstChild.firstChild.firstChild.childNodes[0].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[0].onclick,this._sel.firstChild.firstChild.firstChild.childNodes[2].ontouchstart=this._sel.firstChild.firstChild.firstChild.childNodes[2].onclick),this._sel._ta={},this._selHover=null,this._sel.appendChild(document.createElement("DIV")),this._sel.lastChild.className="dhtmlxcalendar_selector_obj_arrow"),this._sel._ta[n]!=!0){if(n=="month"){for(this._msCells={},this.msCont=document.createElement("DIV"),this.msCont.className="dhtmlxcalendar_area_"+t,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.msCont),f=0,e=0;e<4;e++)for(u=document.createElement("UL"),u.className="dhtmlxcalendar_selector_line",this.msCont.appendChild(u),o=0;o<3;o++)r=document.createElement("LI"),r.innerHTML=this.langData[this.lang].monthesSNames[f],r.className="dhtmlxcalendar_selector_cell",u.appendChild(r),r._month=f,r._cell=!0,this._msCells[f++]=r;this.msCont.onclick=function(n){n=n||event;n.type=="touchstart"&&n.preventDefault!=null&&n.preventDefault();n.cancelBubble=!0;var t=n.target||n.srcElement;t._month!=null&&(i._hideSelector(),i._updateActiveMonth(),i._drawMonth(new Date(i._activeMonth.getFullYear(),t._month,1,0,0,0,0)),i._doOnSelectorChange())};this.conf.touch==!0&&(this.msCont.ontouchstart=this.msCont.onclick)}if(n=="year"){for(this._ysCells={},this.ysCont=document.createElement("DIV"),this.ysCont.className="dhtmlxcalendar_area_"+t,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.ysCont),e=0;e<4;e++)for(u=document.createElement("UL"),u.className="dhtmlxcalendar_selector_line",this.ysCont.appendChild(u),o=0;o<3;o++)r=document.createElement("LI"),r.className="dhtmlxcalendar_selector_cell",r._cell=!0,u.appendChild(r);this.ysCont.onclick=function(n){n=n||event;n.type=="touchstart"&&n.preventDefault!=null&&n.preventDefault();n.cancelBubble=!0;var t=n.target||n.srcElement;t._year!=null&&(i._hideSelector(),i._drawMonth(new Date(t._year,i._activeMonth.getMonth(),1,0,0,0,0)),i._doOnSelectorChange())};this.conf.touch==!0&&(this.ysCont.ontouchstart=this.ysCont.onclick)}if(n=="hours"){for(this._hsCells={},this.hsCont=document.createElement("DIV"),this.hsCont.className="dhtmlxcalendar_area_"+t,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.hsCont),f=0,e=0;e<4;e++)for(u=document.createElement("UL"),u.className="dhtmlxcalendar_selector_line",this.hsCont.appendChild(u),o=0;o<6;o++)r=document.createElement("LI"),r.innerHTML=this._fixLength(f,2),r.className="dhtmlxcalendar_selector_cell",u.appendChild(r),r._hours=f,r._cell=!0,this._hsCells[f++]=r;this.hsCont.onclick=function(n){n=n||event;n.type=="touchstart"&&n.preventDefault!=null&&n.preventDefault();n.cancelBubble=!0;var t=n.target||n.srcElement;t._hours!=null&&(i._hideSelector(),i._activeDate.setHours(t._hours),i._updateActiveHours(),i._updateVisibleHours(),i._doOnSelectorChange(),i.callEvent("onTimeChange",[new Date(i._activeDate.getTime())]))};this.conf.touch==!0&&(this.hsCont.ontouchstart=this.hsCont.onclick)}if(n=="minutes"){var s=4,h=3,c=2;for(this._minutesInterval==1&&(this._selectorMode==1?(s=2,h=3,c=1):(s=2,h=5,c=1,t+="5")),this._minutesInterval==10&&(s=2),this._minutesInterval==15&&(s=1,h=4,t+="4"),this._rsCells={},this.rsCont=document.createElement("DIV"),this.rsCont.className="dhtmlxcalendar_area_"+t,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.rsCont),f=0,e=0;e<s;e++)for(u=document.createElement("UL"),u.className="dhtmlxcalendar_selector_line",this.rsCont.appendChild(u),o=0;o<h;o++)r=document.createElement("LI"),r.innerHTML=c>1?this._fixLength(f,c):f,r.className="dhtmlxcalendar_selector_cell",u.appendChild(r),r._minutes=f,r._cell=!0,this._rsCells[f]=r,f+=this._minutesInterval;this.rsCont.onclick=function(n){var t,r;if(n=n||event,n.type=="touchstart"&&n.preventDefault!=null&&n.preventDefault(),n.cancelBubble=!0,t=n.target||n.srcElement,t._minutes!=null){if(i._minutesInterval==1){if(r=i.getFormatedDate("%i"),r=i._selectorMode==1?t._minutes.toString()+r.charAt(1):r.charAt(0)+t._minutes.toString(),i._activeDate.setMinutes(Number(r)),i.callEvent("onTimeChange",[new Date(i._activeDate.getTime())]),i._hideSelector(),i._selectorMode==1){i._updateVisibleMinutes(!0);i._selectorMode=2;i._showSelector("minutes",i._sel._x,i._sel._y,"selector_minutes",!0);i._updateActiveMinutes();return}i._selectorMode=1}else i._hideSelector(),i._activeDate.setMinutes(t._minutes),i._updateActiveMinutes(),i.callEvent("onTimeChange",[new Date(i._activeDate.getTime())]);i._updateVisibleMinutes();i._doOnSelectorChange()}};this.conf.touch==!0&&(this.rsCont.ontouchstart=this.rsCont.onclick)}this._sel._ta[n]=!0}};this._showSelector=function(n,t,i,r,u){if(u===!0&&this._sel!=null&&this._isSelectorVisible()&&n==this._sel._t){this._hideSelector();return}this.conf.skin=="dhx_terrace"&&(t+=12);this._sel&&this._sel._ta[n]||this._initSelector(n,r);n!=this._sel._t&&this._sel._t=="minutes"&&this._minutesInterval==1&&(this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i"));this._sel._x=t;this._sel._y=i;this._sel.style.visibility="hidden";this._sel.style.display="";this._selCover.style.width=this.base.offsetWidth-2+"px";this._selCover.style.top=this.contMonth.offsetHeight+"px";this._selCover.style.height=this.contDates.offsetHeight+this.contDays.offsetHeight-1+"px";this._selCover.style.display="";this._sel._t=n;this._sel.className="dhtmlxcalendar_selector_obj dhtmlxcalendar_"+r+(n=="hours"&&this.conf.today==!0?"2":"");this._sel.childNodes[0].firstChild.firstChild.childNodes[0].style.display=this._sel.childNodes[0].firstChild.firstChild.childNodes[2].style.display=n=="year"?"":"none";var f=Math.max(0,t-Math.round(this._sel.offsetWidth/2));f+this._sel.offsetWidth>this._sel.parentNode.offsetWidth&&(f=this._sel.parentNode.offsetWidth-this._sel.offsetWidth);this._sel.style.left=f+"px";this._sel.style.top=n=="hours"||n=="minutes"?i-this._sel.offsetHeight+"px":i+"px";this._sel.childNodes[1].style.width=this._sel.childNodes[0].offsetWidth+"px";this._sel.style.visibility="visible";this._doOnSelectorShow(n)};this._doOnSelectorShow=function(n){n=="month"&&this._updateActiveMonth();n=="year"&&this._updateYearsList(this._activeMonth);n=="hours"&&this._updateActiveHours();n=="minutes"&&this._updateActiveMinutes()};this._hideSelector=function(){this._sel&&(this._sel.style.display="none",this._sel.style.visible="hidden",this._selCover.style.display="none",this._sel._t=="minutes"&&this._minutesInterval==1&&(this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i"),this._unloadSelector("minutes")))};this._isSelectorVisible=function(){return this._sel?this._sel.style.display!="none":!1};this._doOnSelectorChange=function(n){this.callEvent("onChange",[new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),this._activeDate.getDate(),this._activeDate.getHours(),this._activeDate.getMinutes(),this._activeDate.getSeconds()),n===!0])};this._clearSelHover=function(){this._selHover&&(this._selHover.className=String(this._selHover.className.replace(/dhtmlxcalendar_selector_cell_hover/gi,"")),this._selHover=null)};this._unloadSelector=function(n){var t;if(this._sel&&this._sel._ta[n]){if(n=="month"){this.msCont.onclick=this.msCont.ontouchstart=null;this._msActive=null;for(t in this._msCells)this._msCells[t]._cell=null,this._msCells[t]._month=null,this._msCells[t].parentNode.removeChild(this._msCells[t]),this._msCells[t]=null;for(this._msCells=null;this.msCont.childNodes.length>0;)this.msCont.removeChild(this.msCont.lastChild);this.msCont.parentNode.removeChild(this.msCont);this.msCont=null}if(n=="year"){this.ysCont.onclick=this.ysCont.ontouchstart=null;for(t in this._ysCells)this._ysCells[t]._cell=null,this._ysCells[t]._year=null,this._ysCells[t].parentNode.removeChild(this._ysCells[t]),this._ysCells[t]=null;for(this._ysCells=null;this.ysCont.childNodes.length>0;)this.ysCont.removeChild(this.ysCont.lastChild);this.ysCont.parentNode.removeChild(this.ysCont);this.ysCont=null}if(n=="hours"){this.hsCont.onclick=this.hsCont.ontouchstart=null;this._hsActive=null;for(t in this._hsCells)this._hsCells[t]._cell=null,this._hsCells[t]._hours=null,this._hsCells[t].parentNode.removeChild(this._hsCells[t]),this._hsCells[t]=null;for(this._hsCells=null;this.hsCont.childNodes.length>0;)this.hsCont.removeChild(this.hsCont.lastChild);this.hsCont.parentNode.removeChild(this.hsCont);this.hsCont=null}if(n=="minutes"){this.rsCont.onclick=this.rsCont.ontouchstart=null;this._rsActive=null;for(t in this._rsCells)this._rsCells[t]._cell=null,this._rsCells[t]._minutes=null,this._rsCells[t].parentNode.removeChild(this._rsCells[t]),this._rsCells[t]=null;for(this._rsCells=null;this.rsCont.childNodes.length>0;)this.rsCont.removeChild(this.rsCont.lastChild);this.rsCont.parentNode.removeChild(this.rsCont);this.rsCont=null}this._sel._ta[n]=null}};this.setMinutesInterval=function(n){(n==1||n==5||n==10||n==15)&&(this._minutesInterval=n,this._unloadSelector("minutes"))};this._updateActiveMonth=function(){typeof this._msActive!="undefined"&&typeof this._msCells[this._msActive]!="undefined"&&(this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell");this._msActive=this._activeMonth.getMonth();this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"};this._updateActiveYear=function(){var n=this._activeMonth.getFullYear();this._ysCells[n]&&(this._ysCells[n].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")};this._updateYearsList=function(n){var u,r,t,i;for(u in this._ysCells)this._ysCells[u]=null,delete this._ysCells[u];for(r=12*Math.floor(n.getFullYear()/12),t=0;t<4;t++)for(i=0;i<3;i++)this.ysCont.childNodes[t].childNodes[i].innerHTML=r,this.ysCont.childNodes[t].childNodes[i]._year=r,this.ysCont.childNodes[t].childNodes[i].className="dhtmlxcalendar_selector_cell",this._ysCells[r++]=this.ysCont.childNodes[t].childNodes[i];this._updateActiveYear()};this._scrollYears=function(n){var t=(n<0?this.ysCont.firstChild.firstChild._year:this.ysCont.lastChild.lastChild._year)+n,i=new Date(t,this._activeMonth.getMonth(),1,0,0,0,0);this._updateYearsList(i)};this._updateActiveHours=function(){typeof this._hsActive!="undefined"&&typeof this._hsCells[this._hsActive]!="undefined"&&(this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell");this._hsActive=this._activeDate.getHours();this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"};this._updateVisibleHours=function(){this.contTime.firstChild.firstChild.childNodes[1].innerHTML=this._fixLength(this._activeDate.getHours(),2)};this._updateActiveMinutes=function(){this._rsActive!=null&&typeof this._rsActive!="undefined"&&typeof this._rsCells[this._rsActive]!="undefined"&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell");this._rsActive=this._minutesInterval==1?this.getFormatedDate("%i").toString().charAt(this._selectorMode==1?0:1):this._activeDate.getMinutes();typeof this._rsCells[this._rsActive]!="undefined"&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")};this._updateVisibleMinutes=function(n){var t=this._fixLength(this._activeDate.getMinutes(),2).toString();n==!0&&(t=t.charAt(0)+"<span class='dhtmlxcalendar_selected_date'>"+t.charAt(1)+"<\/span>");this.contTime.firstChild.firstChild.childNodes[3].innerHTML=t;n==!0&&(this.contTime.firstChild.firstChild.childNodes[3].lastChild._par=!0)};this._fixLength=function(n,t){while(String(n).length<t)n="0"+String(n);return n};this._dateFormat="";this._dateFormatRE=null;this.setDateFormat=function(n){var r={},u,f,t;if(this._strToDate!=null)for(t in this.i)this.i[t].input!=null&&this.i[t].input.value.length>0&&(u=this._strToDate(this.i[t].input.value,this._dateFormat||this.langData[this.lang].dateformat||"%Y-%m-%d"),u instanceof Date&&(r[t]=u));this._dateFormat=n;f=String(this._dateFormat).replace(/%[a-zA-Z]+/g,function(n){var t=n.replace(/%/,"");switch(t){case"n":case"h":case"j":case"g":case"G":return"\\d{1,2}";case"m":case"d":case"H":case"i":case"s":case"y":return"\\d{2}";case"Y":return"\\d{4}";case"M":return"("+i.langData[i.lang].monthesSNames.join("|").toLowerCase()+"){1,}";case"F":return"("+i.langData[i.lang].monthesFNames.join("|").toLowerCase()+"){1,}";case"D":return"[a-z]{2}";case"a":case"A":return"AM|PM";case"u":return"\\d{1,6}";case"P":return"[\\+\\-]\\d{1,2}\\:\\d{1,2}"}return n});this._dateFormatRE=new RegExp(f,"i");for(t in r)this.i[t].input.value=this._dateToStr(r[t]);r=null};this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d");this._updateDateStr=function(n){if(this._dateFormatRE&&n.match(this._dateFormatRE)&&n!=this.getFormatedDate()){var t=this._strToDate(n);if(t instanceof Date){if(this.checkEvent("onBeforeChange")&&!this.callEvent("onBeforeChange",[new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds())])){this._updateInp();return}this._nullDate=!1;this._activeDate=t;this._drawMonth(this._nullDate?new Date:this._activeDate);this._updateVisibleMinutes();this._updateVisibleHours();this._sel&&this._isSelectorVisible()&&this._doOnSelectorShow(this._sel._t);this._doOnSelectorChange(!0)}}};this.showMonth=function(n){(typeof n=="string"&&(n=this._strToDate(n)),n instanceof Date)&&this._drawMonth(n)};this.setFormatedDate=function(n,t,i,r){var u=this._strToDate(t,n);if(r)return u;this.setDate(u)};this.getFormatedDate=function(n,t){if(!(t&&t instanceof Date)){if(this._nullDate)return"";t=new Date(this._activeDate)}return this._dateToStr(t,n)};this.getWeekNumber=function(n){var t,i,r,u;return(typeof n=="string"&&(n=this._strToDate(n)),!(n instanceof Date))?"Invalid Date":(t=n.getDay(),t===0&&(t=7),i=new Date(n.valueOf()),i.setDate(n.getDate()+(4-t)),r=i.getFullYear(),u=Math.round((i.getTime()-new Date(r,0,1).getTime())/864e5),1+Math.floor(u/7))};this.showWeekNumbers=function(){this.base.firstChild.className="dhtmlxcalendar_wn"};this.hideWeekNumbers=function(){this.base.firstChild.className=""};this.show=function(n){var t,i;if(!n&&this._hasParent){this._show();return}if(typeof n=="string"&&(t=document.getElementById(n),t!=null&&typeof t._dhtmlxcalendar_uid!="undefined"&&this.i[t._dhtmlxcalendar_uid]!=null)){this._show(t._dhtmlxcalendar_uid);return}if(typeof n=="object"&&typeof n._dhtmlxcalendar_uid!="undefined"&&this.i[n._dhtmlxcalendar_uid]==n){this._show(n._dhtmlxcalendar_uid);return}if(typeof n=="undefined")for(i in this.i)n||(n=i);n&&this._show(n)};this.hide=function(){this._isVisible()&&this._hide()};this.isVisible=function(){return this._isVisible()};this._activeInp=null;this.pos="bottom";this.setPosition=function(n,t){this._px=null;this._py=null;n=="right"||n=="bottom"?this.pos=n:(this.pos="int",typeof n=="undefined"||isNaN(n)||(this.base.style.left=n+"px",this._px=n),typeof t=="undefined"||isNaN(t)||(this.base.style.top=t+"px",this._py=t),this._ifrSize())};this._show=function(n,t){var u,o,f;if(t===!0&&this._activeInp==n&&this._isVisible()){this._hide();return}if(this.base.style.visibility="hidden",this.base.style.display="",n){this.base.className.indexOf("dhtmlxcalendar_in_input")==-1&&(this.base.className+=" dhtmlxcalendar_in_input");var i=this.i[n].input||this.i[n].button,e=window.dhx4.screenDim(),r={top:window.dhx4.absTop(i),left:window.dhx4.absLeft(i)};this.pos=="right"?(this.base.style.left=r.left+i.offsetWidth+"px",this.base.style.top=Math.min(r.top,e.bottom-this.base.offsetHeight)+"px"):this.pos=="bottom"?(u=r.top+i.offsetHeight+1,u+this.base.offsetHeight>e.bottom&&(o=r.top-this.base.offsetHeight,o>=-20&&(u=o)),f=r.left,f+this.base.offsetWidth>e.right&&(f=Math.max(0,r.left+i.offsetWidth-this.base.offsetWidth)),this.base.style.left=f+"px",this.base.style.top=u+"px"):(this.base.style.left=(this._px||0)+"px",this.base.style.top=(this._py||0)+"px");this._activeInp=n;i=null}else this._px!=null&&this._py!=null?(this.base.style.left=this._px+"px",this.base.style.top=this._py+"px"):(this.base.style.left="0px",this.base.style.top="0px");this._hideSelector();this.base.style.visibility="visible";this.base.style.zIndex=window.dhx4.zim.reserve(this.conf.zi);this._ifrSize();this._ifr&&(this._ifr.style.display="");this.callEvent("onShow",[])};this._hide=function(){this._lastHover!=null&&this._clearDayHover();this._hideSelector();this.base.style.display="none";window.dhx4.zim.clear(this.conf.zi);this.base.className.indexOf("dhtmlxcalendar_in_input")>=0&&(this.base.className=this.base.className.replace(/\s{0,}dhtmlxcalendar_in_input/gi,""));this._activeInp=null;this._ifr&&(this._ifr.style.display="none");this.callEvent("onHide",[])};this._isVisible=function(){return this.base.style.display!="none"};this._rangeActive=!1;this._rangeFrom=null;this._rangeTo=null;this._rangeSet={};this.setInsensitiveDays=function(n){for(var i=this._extractDates(n),t=0;t<i.length;t++)this._rangeSet[new Date(i[t].getFullYear(),i[t].getMonth(),i[t].getDate(),0,0,0,0).getTime()]=!0;this._drawMonth(this._activeMonth)};this.clearInsensitiveDays=function(){this._clearRangeSet();this._drawMonth(this._activeMonth)};this._holidays={};this.setHolidays=function(n){var i,t;if(n==null)this._clearHolidays();else if(n!=null)for(i=this._extractDates(n),t=0;t<i.length;t++)this._holidays[new Date(i[t].getFullYear(),i[t].getMonth(),i[t].getDate(),0,0,0,0).getTime()]=!0;this._drawMonth(this._activeMonth)};this._extractDates=function(n){var i,t,u,r;for((typeof n=="string"||n instanceof Date)&&(n=[n]),i=[],t=0;t<n.length;t++)if(typeof n[t]=="string")for(u=n[t].split(","),r=0;r<u.length;r++)i.push(this._strToDate(u[r]));else n[t]instanceof Date&&i.push(n[t]);return i};this._clearRange=function(){this._rangeActive=!1;this._rangeType=null;this._rangeFrom=null;this._rangeTo=null};this._clearRangeSet=function(){for(var n in this._rangeSet)this._rangeSet[n]=null,delete this._rangeSet[n]};this._clearHolidays=function(){for(var n in this._holidays)this._holidays[n]=null,delete this._holidays[n]};this._isOutOfRange=function(n){if(this._rangeSet[n]==!0||this._rangeActive&&(this._rangeType=="in"&&(n<this._rangeFrom||n>this._rangeTo)||this._rangeType=="out"&&n>=this._rangeFrom&&n<=this._rangeTo||this._rangeType=="from"&&n<this._rangeFrom||this._rangeType=="to"&&n>this._rangeTo))return!0;var t=new Date(n);return this._rangeWeek&&this._rangeWeekData[t.getDay()]===!0?!0:this._rangeMonth&&this._rangeMonthData[t.getDate()]===!0?!0:this._rangeYear&&this._rangeYearData[t.getMonth()+"_"+t.getDate()]===!0?!0:!1};this.clearSensitiveRange=function(){this._clearRange();this._drawMonth(this._activeMonth)};this.setSensitiveRange=function(n,t,i){var r=!1;if(n!=null&&t!=null){if(n instanceof Date||(n=this._strToDate(n)),t instanceof Date||(t=this._strToDate(t)),n.getTime()>t.getTime())return;this._rangeFrom=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0).getTime();this._rangeTo=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime();this._rangeActive=!0;this._rangeType="in";r=!0}r||n==null||t!=null||(n instanceof Date||(n=this._strToDate(n)),this._rangeFrom=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0).getTime(),this._rangeTo=null,i===!0&&this._rangeFrom++,this._rangeActive=!0,this._rangeType="from",r=!0);r||n!=null||t==null||(t instanceof Date||(t=this._strToDate(t)),this._rangeFrom=null,this._rangeTo=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime(),i===!0&&this._rangeTo--,this._rangeActive=!0,this._rangeType="to",r=!0);r&&this._drawMonth(this._activeMonth)};this.setInsensitiveRange=function(n,t){if(n!=null&&t!=null){if(n instanceof Date||(n=this._strToDate(n)),t instanceof Date||(t=this._strToDate(t)),n.getTime()>t.getTime())return;this._rangeFrom=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0).getTime();this._rangeTo=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime();this._rangeActive=!0;this._rangeType="out";this._drawMonth(this._activeMonth);return}if(n!=null&&t==null){this.setSensitiveRange(null,n,!0);return}if(n==null&&t!=null){this.setSensitiveRange(t,null,!0);return}};this.disableDays=function(n,t){var u,r,i;if(n=="week"){typeof t!="object"&&typeof t.length=="undefined"&&(t=[t]);this._rangeWeekData||(this._rangeWeekData={});for(r in this._rangeWeekData)this._rangeWeekData[r]=!1,delete this._rangeWeekData[r];for(i=0;i<t.length;i++)this._rangeWeekData[t[i]]=!0,t[i]==7&&(this._rangeWeekData[0]=!0);this._rangeWeek=!0}if(n=="month"){typeof t!="object"&&typeof t.length=="undefined"&&(t=[t]);this._rangeMonthData||(this._rangeMonthData={});for(r in this._rangeMonthData)this._rangeMonthData[r]=!1,delete this._rangeMonthData[r];for(i=0;i<t.length;i++)this._rangeMonthData[t[i]]=!0;this._rangeMonth=!0}if(n=="year"){u=this._extractDates(t);this._rangeYearData||(this._rangeYearData={});for(r in this._rangeYearData)this._rangeYearData[r]=!1,delete this._rangeYearData[r];for(i=0;i<u.length;i++)this._rangeYearData[u[i].getMonth()+"_"+u[i].getDate()]=!0;this._rangeYear=!0}this._drawMonth(this._activeMonth)};this.enableDays=function(n){n=="week"&&(this._rangeWeek=!1);n=="month"&&(this._rangeMonth=!1);n=="year"&&(this._rangeYear=!1);this._drawMonth(this._activeMonth)};this._tipData={};this._tipTM=null;this._tipTMTime=400;this._tipEvs=!1;this._tipPopup=null;this._tipCellDate=null;this._tipCellDim=null;this.setTooltip=function(n,t,i,r){for(var e,f=this._extractDates(n),u=0;u<f.length;u++)e=new Date(f[u].getFullYear(),f[u].getMonth(),f[u].getDate(),0,0,0,0).getTime(),this._tipData[e]={text:t,showIcon:i,usePopup:r};this._drawMonth(this._activeMonth)};this.clearTooltip=function(n){for(var r,i=this._extractDates(n),t=0;t<i.length;t++)r=new Date(i[t].getFullYear(),i[t].getMonth(),i[t].getDate(),0,0,0,0).getTime(),this._tipData[r]=null,delete this._tipData[r];this._drawMonth(this._activeMonth)};this._initTooltipPopup=function(){this._tipEvs||(this.attachEvent("onMouseOver",function(n){var t=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0).getTime();this._tipData[t]!=null&&(this._tipTM&&window.clearTimeout(this._tipTM),this._tipCellDate=n,this._tipCellDim=this.getCellDimension(n),this._tipText=this._tipData[t].text,this._tipTM=window.setTimeout(this._showTooltipPopup,this._tipTMTime))}),this.attachEvent("onMouseOut",this._hideTooltipPopup),this._tipEvs=!0)};this._showTooltipPopup=function(){i._tipPopup||(i._tipPopup=new dhtmlXPopup({mode:"top"}));i._tipPopup.attachHTML(i._tipText);i._tipPopup.show(i._tipCellDim.x,i._tipCellDim.y,i._tipCellDim.w,i._tipCellDim.h);i.callEvent("onPopupShow",[i._tipCellDate])};this._hideTooltipPopup=function(){this._tipTM&&window.clearTimeout(this._tipTM);this._tipPopup!=null&&this._tipPopup.isVisible()&&(this._tipPopup.hide(),this.callEvent("onPopupHide",[this._tipCellDate]))};this.getPopup=function(){return this._tipPopup};this.getCellDimension=function(n){var f,u,i,r,t;if(typeof n=="string"&&(n=this._strToDate(n)),!(n instanceof Date))return null;for(f=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0).getTime(),u=null,i=0;i<this.contDates.childNodes.length;i++)for(r=0;r<this.contDates.childNodes[i].childNodes.length;r++)t=this.contDates.childNodes[i].childNodes[r],t._date!=null&&t._date.getTime()==f&&(u={x:window.dhx4.absLeft(t),y:window.dhx4.absTop(t),w:t.offsetWidth,h:t.offsetHeight}),t=null;return u};this._updateFromInput=function(n){if(this._nullInInput&&n.value.replace(/\s/g,"").length==0){if(this.checkEvent("onBeforeChange")&&!this.callEvent("onBeforeChange",[null])){this._updateInp();return}this.setDate(null)}else this._updateDateStr(n.value);n=null};this._doOnClick=function(n){n=n||event;var t=n.target||n.srcElement;if(t._dhtmlxcalendar_uid&&t._dhtmlxcalendar_uid!=i._activeInp&&i._isVisible()&&i._activeInp){i._hide();return}t._dhtmlxcalendar_uid&&i.i[t._dhtmlxcalendar_uid]||(i._isSelectorVisible()?i._hideSelector():!i._hasParent&&i._isVisible()&&i._hide())};this._doOnKeyDown=function(n){n=n||event;(n.keyCode==27||n.keyCode==13)&&(i._isSelectorVisible()?i._hideSelector():i._isVisible()&&!i._hasParent&&i._hide())};this._doOnInpClick=function(n){n=n||event;n.type=="touchstart"&&n.preventDefault!=null&&n.preventDefault();var t=n.target||n.srcElement;t._dhtmlxcalendar_uid&&(i._listenerEnabled||i._updateFromInput(t),i._show(t._dhtmlxcalendar_uid,!0))};this._doOnInpKeyUp=function(n){n=n||event;var t=n.target||n.srcElement;n.keyCode!=13&&t._dhtmlxcalendar_uid&&(i._listenerEnabled||i._updateFromInput(t))};this._doOnBtnClick=function(n){n=n||event;n.type=="touchstart"&&n.preventDefault!=null&&n.preventDefault();var t=n.target||n.srcElement;t._dhtmlxcalendar_uid&&(i.i[t._dhtmlxcalendar_uid].input!=null&&i._updateFromInput(i.i[t._dhtmlxcalendar_uid].input),i._show(t._dhtmlxcalendar_uid,!0))};this._doOnUnload=function(){i&&i.unload&&i.unload()};typeof addEventListener=="function"?(document.body.addEventListener("click",i._doOnClick,!1),window.addEventListener("keydown",i._doOnKeyDown,!1),window.addEventListener("unload",i._doOnUnload,!1),this.conf.touch==!0&&document.body.addEventListener("touchstart",i._doOnClick,!1)):(document.body.attachEvent("onclick",i._doOnClick),document.body.attachEvent("onkeydown",i._doOnKeyDown),window.attachEvent("onunload",i._doOnUnload));this.attachObj=function(n){var t=window.dhx4.newId();return typeof n=="string"?this.i[t]={input:document.getElementById(n)}:typeof n.tagName!="undefined"?this.i[t]={input:n}:typeof n=="object"&&(n.input!=null||n.button!=null)&&(this.i[t]={},n.input!=null&&(this.i[t].input=typeof n.input=="string"?document.getElementById(n.input):n.input),n.button!=null&&(this.i[t].button=typeof n.button=="string"?document.getElementById(n.button):n.button)),this._attachEventsToObject(t),t};this.detachObj=function(n){var t=null,i;if(this.i[n]!=null?t=n:typeof n=="string"?(n=document.getElementById(n),t=n._dhtmlxcalendar_uid):typeof n.tagName!="undefined"?t=n._dhtmlxcalendar_uid:typeof n=="object"&&(n.input!=null||n.button!=null)&&(t==null&&n.input!=null&&(t=(typeof n.input=="string"?document.getElementById(n.input):n.input)._dhtmlxcalendar_uid),t==null&&n.button!=null&&(t=(typeof n.button=="string"?document.getElementById(n.button):n.button)._dhtmlxcalendar_uid)),t!=null&&this.i[t]!=null){this._detachEventsFromObject(t);for(i in this.i[i])this.i[t][i]._dhtmlxcalendar_uid=null,this.i[t][i]=null,delete this.i[t][i];return this.i[t]=null,delete this.i[t],!0}return!1};this._attachEventsToObject=function(n){this.i[n].button!=null?(this.i[n].button._dhtmlxcalendar_uid=n,typeof addEventListener=="function"?(this.i[n].button.addEventListener("click",i._doOnBtnClick,!1),this.conf.touch==!0&&this.i[n].button.addEventListener("touchstart",i._doOnBtnClick,!1)):this.i[n].button.attachEvent("onclick",i._doOnBtnClick)):this.i[n].input!=null&&(this.i[n].input._dhtmlxcalendar_uid=n,typeof addEventListener=="function"?(this.i[n].input.addEventListener("click",i._doOnInpClick,!1),this.i[n].input.addEventListener("keyup",i._doOnInpKeyUp,!1),this.conf.touch==!0&&this.i[n].input.addEventListener("touchstart",i._doOnInpClick,!1)):(this.i[n].input.attachEvent("onclick",i._doOnInpClick),this.i[n].input.attachEvent("onkeyup",i._doOnInpKeyUp)))};this._detachEventsFromObject=function(n){this.i[n].button!=null?typeof addEventListener=="function"?(this.i[n].button.removeEventListener("click",i._doOnBtnClick,!1),this.conf.touch==!0&&this.i[n].button.removeEventListener("touchstart",i._doOnBtnClick,!1)):this.i[n].button.detachEvent("onclick",i._doOnBtnClick):this.i[n].input!=null&&(typeof addEventListener=="function"?(this.i[n].input.removeEventListener("click",i._doOnInpClick,!1),this.i[n].input.removeEventListener("keyup",i._doOnInpKeyUp,!1),this.conf.touch==!0&&this.i[n].input.removeEventListener("touchstart",i._doOnInpClick,!1)):(this.i[n].input.detachEvent("onclick",i._doOnInpClick),this.i[n].input.detachEvent("onkeyup",i._doOnInpKeyUp)))};this._updateInp=function(){this.i!=null&&this._activeInp!=null&&this.i[this._activeInp]!=null&&this.i[this._activeInp].input!=null&&(this.i[this._activeInp].input.value=this.getFormatedDate())};this.enableListener=function(n){n&&(typeof addEventListener=="function"?(n.addEventListener("focus",i._listenerEvFocus,!1),n.addEventListener("blur",i._listenerEvBlur,!1)):(n.attachEvent("onfocus",i._listenerEvFocus),n.attachEvent("onblur",i._listenerEvBlur)),n=null)};this.disableListener=function(n){n&&(n._f0=!1,this._tmListener&&window.clearTimeout(this._tmListener),typeof addEventListener=="function"?(n.removeEventListener("focus",i._listenerEvFocus,!1),n.removeEventListener("blur",i._listenerEvBlur,!1)):(n.detachEvent("onfocus",i._listenerEvFocus),n.detachEvent("onblur",i._listenerEvBlur)),n=null)};this._startListener=function(n){this._tmListener&&window.clearTimeout(this._tmListener);typeof n._v1=="undefined"&&(n._v1=n.value);n._v1!=n.value&&(this._updateFromInput(n),n._v1=n.value);n._f0&&(this._tmListener=window.setTimeout(function(){i._startListener(n)},100))};this._listenerEvFocus=function(n){n=n||event;var t=n.target||n.srcElement;t._f0=!0;i._startListener(t);t=null};this._listenerEvBlur=function(n){n=n||event;var t=n.target||n.srcElement;t._f0=!1;t=null};for(h in this.i)this._attachEventsToObject(h);return window.dhx4._eventable(this),this._evOnArrowClick=function(n){return this.callEvent("onArrowClick",n)},this._evOnClick=function(n){return this.callEvent("onClick",n)},this._evOnMouseOut=function(n){return this.callEvent("onMouseOut",n)},this._evOnMouseOver=function(n){return this.callEvent("onMouseOver",n)},this.unload=function(){var n;this._activeDate=null;this._activeDateCell=null;this._activeInp=null;this._activeMonth=null;this._dateFormat=null;this._dateFormatRE=null;this._lastHover=null;this._tmListener&&window.clearTimeout(this._tmListener);this._tmListener=null;typeof addEventListener=="function"?(document.body.removeEventListener("click",i._doOnClick,!1),window.removeEventListener("keydown",i._doOnKeyDown,!1),window.removeEventListener("unload",i._doOnUnload,!1),this.conf.touch==!0&&document.body.removeEventListener("touchstart",i._doOnClick,!1)):(document.body.detachEvent("onclick",i._doOnClick),document.body.detachEvent("onkeydown",i._doOnKeyDown),window.detachEvent("onunload",i._doOnKeyDown));this._doOnClick=null;this._doOnKeyDown=null;this._doOnUnload=null;for(n in this.i)this.i[n]._dhtmlxcalendar_uid=null,this._detachEventsFromObject(n),this.disableListener(this.i[n].input),this.i[n]=null,delete this.i[n];for(this.i=null,this._doOnInpClick=null,this._doOnInpKeyUp=null,window.dhx4._eventable(this,"clear"),this.contMonth.onselectstart=null,this.contMonth.firstChild.firstChild.onclick=null,this.contMonth.firstChild.firstChild.ontouchstart=null,this.contMonth.firstChild.firstChild.firstChild.onmouseover=null,this.contMonth.firstChild.firstChild.firstChild.onmouseout=null,this.contMonth.firstChild.firstChild.lastChild.onmouseover=null,this.contMonth.firstChild.firstChild.lastChild.onmouseout=null;this.contMonth.firstChild.firstChild.childNodes.length>0;)this.contMonth.firstChild.firstChild.removeChild(this.contMonth.firstChild.firstChild.lastChild);for(this.contMonth.firstChild.removeChild(this.contMonth.firstChild.firstChild),this.contMonth.removeChild(this.contMonth.firstChild),this.contMonth.parentNode.removeChild(this.contMonth),this.contMonth=null;this.contDays.firstChild.childNodes.length>0;)this.contDays.firstChild.removeChild(this.contDays.firstChild.lastChild);for(this.contDays.removeChild(this.contDays.firstChild),this.contDays.parentNode.removeChild(this.contDays),this.contDays=null,this.contDates.onclick=null,this.contDates.ontouchstart=null,this.contDates.onmouseover=null,this.contDates.onmouseout=null;this.contDates.childNodes.length>0;){while(this.contDates.lastChild.childNodes.length>0)this.contDates.lastChild.lastChild._css_date=null,this.contDates.lastChild.lastChild._css_month=null,this.contDates.lastChild.lastChild._css_weekend=null,this.contDates.lastChild.lastChild._css_hover=null,this.contDates.lastChild.lastChild._date=null,this.contDates.lastChild.lastChild._q=null,this.contDates.lastChild.lastChild._w=null,this.contDates.lastChild.removeChild(this.contDates.lastChild.lastChild);this.contDates.removeChild(this.contDates.lastChild)}for(this.contDates.parentNode.removeChild(this.contDates),this.contDates=null,this.contTime.firstChild.firstChild.onclick=null,this.contTime.firstChild.firstChild.ontouchstart=null;this.contTime.firstChild.firstChild.childNodes.length>0;)this.contTime.firstChild.firstChild.removeChild(this.contTime.firstChild.firstChild.lastChild);if(this.contTime.firstChild.removeChild(this.contTime.firstChild.firstChild),this.contTime.removeChild(this.contTime.firstChild),this.contTime.parentNode.removeChild(this.contTime),this.contTime=null,this._lastHover=null,this._unloadSelector("month"),this._unloadSelector("year"),this._unloadSelector("hours"),this._unloadSelector("minutes"),this._selCover&&(this._selCover.parentNode.removeChild(this._selCover),this._selCover=null),this._sel){for(n in this._sel._ta)this._sel._ta[n]=null;for(this._sel._ta=null,this._sel._t=null,this._sel.onmouseover=null,this._sel.onmouseout=null;this._sel.firstChild.firstChild.firstChild.childNodes.length>0;)this._sel.firstChild.firstChild.firstChild.lastChild.onclick=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseover=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseout=null,this._sel.firstChild.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild.lastChild);for(this._sel.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild),this._sel.firstChild.removeChild(this._sel.firstChild.firstChild);this._sel.childNodes.length>0;)this._sel.removeChild(this._sel.lastChild);this._sel.parentNode.removeChild(this._sel);this._sel=null}this.base.onclick=null;this.base.onmousedown=null;this.base.ontouchstart=null;this.base.onmouseout=null;this.base.parentNode.removeChild(this.base);this.base=null;this._clearDayHover=null;this._clearSelHover=null;this._doOnSelectorChange=null;this._doOnSelectorShow=null;this._drawMonth=null;this._fixLength=null;this._ifrSize=null;this._hide=null;this._hideSelector=null;this._initSelector=null;this._isSelectorVisible=null;this._isVisible=null;this._scrollYears=null;this._show=null;this._showSelector=null;this._strToDate=null;this._updateActiveHours=null;this._updateActiveMinutes=null;this._updateActiveMonth=null;this._updateActiveYear=null;this._updateCellStyle=null;this._updateDateStr=null;this._updateVisibleHours=null;this._updateVisibleMinutes=null;this._updateYearsList=null;this.enableIframe=null;this.hide=null;this.hideTime=null;this.setDate=null;this.setDateFormat=null;this.setYearsRange=null;this.show=null;this.showTime=null;this.unload=null;this._tipPopup!=null&&(this._tipPopup.unload(),this._tipPopup=null);for(n in this)delete this[n];n=i=null},this.setDate(this._activeDate),this}function dhtmlXCombo(n,t,i,r){var u=this,f=null,s=null,e,o;for(typeof n!="object"||n.tagName||(f=n,n=f.parent,i=f.width,t=f.name,r=f.mode,s=f.skin),this.cont=typeof n=="string"?document.getElementById(n):n,this.conf={skin:null,form_name:t||"dhxcombo",combo_width:(parseInt(i)||this.cont.offsetWidth||120)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0),combo_image:!1,combo_focus:!1,opts_type:typeof r=="string"&&typeof this.modes[r]!="undefined"?r:"option",opts_count:8,opts_count_min:3,opts_width:null,item_h:null,list_zi_id:window.dhx4.newId(),allow_free_text:!0,allow_empty_value:!0,free_text_empty:!1,enabled:!0,btn_left:(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&typeof addEventListener=="undefined"?1:0,ro_mode:!1,ro_text:"",ro_tm:null,ro_tm_time:750,img_path:"",img_def:"",img_def_dis:!0,template:{header:!0,input:"#text#",option:"#text#"},f_func:null,f_mode:!1,f_url:!1,f_cache:!1,f_cache_data:{},f_dyn:!1,f_dyn_end:!1,f_mask:"",f_ac:!0,f_ac_text:"",f_server_tm:null,f_server_last:"",f_loading:!1,s_tm:null,s_time:200,s_mode:"select",last_hover:null,last_selected:null,last_match:null,last_text:"",last_value:"",tm_hover:null,tm_confirm_blur:null,clear_click:!1,clear_blur:!1,clear_bsp:!1,clear_key:!1,i_ofs:23,sp:{dhx_skyblue:{list_ofs:1,hdr_ofs:1,scr_ofs:1},dhx_web:{list_ofs:0,hdr_ofs:1,scr_ofs:0},dhx_terrace:{list_ofs:1,hdr_ofs:1,scr_ofs:1},material:{list_ofs:0,hdr_ofs:1,scr_ofs:1}},col_w:null},this.conf.combo_image=this.modes[this.conf.opts_type].image==!0,this.t={},this.base=document.createElement("DIV"),this.base.style.width=this.conf.combo_width+"px",this.base.innerHTML="<input type='text' class='dhxcombo_input' style='width:"+(this.conf.combo_width-(this.conf.i_ofs+1)-(this.conf.combo_image?this.conf.i_ofs:0))+"px;"+(this.conf.combo_image?"margin-left:"+this.conf.i_ofs+"px;":"")+"' autocomplete='off'><input type='hidden' value=''><input type='hidden' value='false'><div class='dhxcombo_select_button'><div class='dhxcombo_select_img'><\/div><\/div>"+(this.conf.combo_image?"<div class='dhxcombo_top_image'>"+this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled)+"<\/div>":""),this.cont.appendChild(this.base),this.list=document.createElement("DIV"),this.list._listId=window.dhx4.newId(),this.list.style.display="none",document.body.insertBefore(this.list,document.body.firstChild),this._doOnListScroll=function(){u.conf.s_tm!=null&&window.clearTimeout(u.conf.s_tm);u.conf.s_tm=window.setTimeout(u._doOnListScrollAction,u.conf.s_time)},this._doOnListScrollAction=function(){u.conf.s_tm=null;u.conf.s_mode=="scroll"&&u.list.scrollHeight-u.list.scrollTop-10<u.list.clientHeight&&u._subloadRequest()},typeof addEventListener=="function"?this.list.addEventListener("scroll",this._doOnListScroll,!1):this.list.attachEvent("onscroll",this._doOnListScroll),this.setSkin(s||window.dhx4.skin||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcombo")||"material"),this._updateTopImage=function(n){this.conf.combo_image&&(this.base.lastChild.innerHTML=n!=null?this.t[n].obj.getTopImage(this.t[n].item,this.conf.enabled):this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled))},this._filterOpts=function(n){var t,f,e,r,i,o,s,h;if(this.conf.f_server_tm&&window.clearTimeout(this.conf.f_server_tm),t=String(this.base.firstChild.value).replace(new RegExp(this._fixRE(this.conf.f_ac_text)+"$","i"),""),this.conf.f_server_last==t.toLowerCase()){this._checkForMatch();return}if(this.conf.f_url!=null&&this.checkEvent("onDynXLS")){this.conf.f_server_last=t.toLowerCase();this.callEvent("onDynXLS",[t]);return}if(this.conf.f_url!=null){if(t.length==0){this.conf.f_server_last=t.toLowerCase();this.clearAll();return}if(this.conf.f_cache==!0&&this.conf.f_cache_data[t]!=null){for(this.clearAll(),this.conf.f_server_last=t.toLowerCase(),f=0;f<this.conf.f_cache_data[t].data.length;f++)this.load(this.conf.f_cache_data[t].data[f]);this.conf.f_dyn&&(this.conf.f_dyn_end=this.conf.f_cache_data[t].dyn_end,this.conf.f_mask=this.conf.f_cache_data[t].mask);n!==!0&&(this._showList(!0),this._checkForMatch())}else this.conf.f_server_tm=window.setTimeout(function(){var i,r;u.conf.f_server_last=t.toLowerCase();u.conf.f_mask=t;i="mask="+encodeURIComponent(t);u.conf.f_dyn&&(i+="&pos=0",u.conf.f_dyn_end=!1);r=function(i){var e,o,f;u.conf.f_cache&&(u.conf.f_cache_data[t]||(u.conf.f_cache_data[t]={data:[],dyn_end:!1,mask:t}),u.conf.f_cache_data[t].data.push(i.xmlDoc.responseXML));u.clearAll();u.load(i.xmlDoc.responseText);e=u.base.offsetWidth>0&&u.base.offsetHeight>0;e==!0&&u.conf.enabled==!0&&u.conf.combo_focus==!0&&n!==!0&&(u.conf.f_ac&&u.conf.f_mode=="start"&&u.conf.clear_bsp==!1&&u.list.firstChild!=null&&(o=u.list.firstChild._optId,f=String(u.t[o].obj.getText(u.list.firstChild,!0)),t==u.base.firstChild.value&&String(f).toLowerCase().indexOf(String(t).toLowerCase())===0&&(u.base.firstChild.value=f,u.conf.f_ac_text=f.substr(t.length),u._selectRange(t.length,f.length))),u._showList(!0),u._checkForMatch());r=null};window.dhx4.ajax.method=="post"?window.dhx4.ajax.post(u.conf.f_url,i,r):window.dhx4.ajax.method=="get"&&window.dhx4.ajax.get(u.conf.f_url+(String(u.conf.f_url).indexOf("?")>=0?"&":"?")+i,r)},200)}else{this.conf.f_server_last=t.toLowerCase();e=t.length==0?!0:new RegExp((this.conf.f_mode=="start"?"^":"")+this._fixRE(t),"i");r=null;for(i in this.t)o=!1,e!==!0&&(this.conf.f_func!=null?(s=this._getOption(this.t[i].item._optId,f),o=this.conf.f_func.apply(window,[t,s])==!0):(h=this.t[i].obj.getText(this.t[i].item,!0),o=e.test(h)==!0)),e===!0||o==!0?(this.t[i].item.style.display="",r==null&&t.length>0&&(r=String(this.t[i].obj.getText(this.t[i].item,!0)))):this.t[i].item.style.display="none";this.conf.f_ac&&this.conf.f_mode=="start"&&this.conf.clear_bsp==!1&&r!=null&&(this.conf.f_ac_text=r.replace(new RegExp("^"+t,"i"),""),this.base.firstChild.value=r,this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length));this.conf.f_mode=="between"&&this.conf.clear_bsp==!0&&this._checkForMatch(!0);n!==!0&&(this._showList(!0),this._checkForMatch())}},this._searchRO=function(n){var t,i,r;for(this.conf.ro_tm&&window.clearTimeout(this.conf.ro_tm),this.conf.ro_text+=n,this._showList(),t=0;t<this.list.childNodes.length;t++)if(i=this.list.childNodes[t]._optId,r=String(this.t[i].obj.getText(this.list.childNodes[t],!0)).toLowerCase(),r.indexOf(this.conf.ro_text)===0){this._setSelected(i,!0,!0);this._confirmSelect("script",!1);break}this.conf.ro_tm=window.setTimeout(function(){u.conf.ro_text=""},this.conf.ro_tm_time)},this._fixRE=function(n){return String(n).replace(/[\\\^\$\*\+\?\.\(\)\|\{\}\[\]]/gi,"\\$&")},this._initObj=function(n){typeof n.template!="undefined"&&this.setTemplate(n.template);n.add!=!0&&this.conf.f_loading!=!0&&this.clearAll(!1);this.addOption(n.options)},this._xmlToObj=function(n,t,i){var a={add:!1,options:[]},v=t==!0?n:n.getElementsByTagName("complete"),r,u,c,y,h,p,w,b,l,e,o,f,s;if(v.length>0){for(window.dhx4.s2b(v[0].getAttribute("add"))==!0&&(a.add=!0),r=v[0].childNodes,u=0;u<r.length;u++)if(typeof r[u].tagName!="undefined"){if(String(r[u].tagName).toLowerCase()=="template"){for(c={},o=0;o<r[u].childNodes.length;o++){if(f=r[u].childNodes[o],f.tagName!=null&&(y=f.tagName,typeof this.conf.template[y]!="undefined"&&(c[y]=window.dhx4._xmlNodeValue(f)),y=="columns"))for(s=0;s<f.childNodes.length;s++){if(h=f.childNodes[s],h.tagName!=null&&h.tagName=="column"){p={};for(e in{width:1,css:1,header:1,option:1})h.getAttribute(e)!=null&&(p[e]=h.getAttribute(e));for(e in{header:1,option:1})w=h.getElementsByTagName(e),w[0]!=null&&w[0].firstChild!=null&&(p[e]=window.dhx4._xmlNodeValue(w[0]));c.columns==null&&(c.columns=[]);c.columns.push(p)}h=null}f=null}this.setTemplate(c)}if(String(r[u].tagName).toLowerCase()=="option"){b=!1;b=t==!0?a.options.length==i:window.dhx4.s2b(r[u].getAttribute("selected"));l={value:r[u].getAttribute("value"),text:window.dhx4._xmlNodeValue(r[u]),selected:b,checked:window.dhx4.s2b(r[u].getAttribute("checked"))};for(e in{img:1,img_dis:1,img_src:1,img_src_dis:1,css:1})r[u].getAttribute(e)!=null&&(l[e]=r[u].getAttribute(e));for(o=0;o<r[u].childNodes.length;o++)if(r[u].childNodes[o].tagName!=null&&String(r[u].childNodes[o].tagName).toLowerCase()=="text")for(l.text={},f=r[u].childNodes[o],s=0;s<f.childNodes.length;s++)f.childNodes[s].tagName!=null&&(l.text[f.childNodes[s].tagName]=window.dhx4._xmlNodeValue(f.childNodes[s]));a.options.push(l)}}v=r=null}return a},window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","complete",{data:!0}),window.dhx4._eventable(this),this._getNearItem=function(n,t){for(var i=null;n!=null;)n=n[t<0?"previousSibling":"nextSibling"],i==null&&n!=null&&n.style.display==""&&n._optId!=null&&(i=n,n=null);return i},this.setName(this.conf.form_name),this._doOnListMouseMove=function(n){n=n||event;for(var t=n.target||n.srcElement;t!=null&&t!=this;)typeof t._optId!="undefined"&&(u.conf.tm_hover&&window.clearTimeout(u.conf.tm_hover),u._setSelected(t._optId,!1,!1,!0)),t=t.parentNode;t=null},this._doOnListMouseDown=function(n){n=n||event;n.cancelBubble=!0;u.conf.clear_click=!0;window.setTimeout(function(){u.base.firstChild.focus()},1)},this._doOnListMouseUp=function(n){var t,i;if(n=n||event,n.button==u.conf.btn_left){for(t=n.target||n.srcElement;t!=null&&t!=this;)typeof t._optId!="undefined"&&(i=!0,typeof u.t[t._optId].obj.optionClick=="function"&&u.t[t._optId].obj.optionClick(t,n,u)!==!0&&(i=!1),i&&(u._setSelected(t._optId,null,!0),u._confirmSelect("click"))),t=t.parentNode;t=null}},this._doOnListMouseOut=function(){u.conf.tm_hover&&window.clearTimeout(u.conf.tm_hover);u.conf.tm_hover=window.setTimeout(function(){var n=u.conf.last_match||u.conf.last_selected;u.conf.last_match==null&&u.t[n]!=null&&u.base.firstChild.value!=u.t[n].obj.getText(u.t[n].item,!0)&&(n=null);u._setSelected(n,null,!0,!0)},1)},this._doOnBaseMouseDown=function(n){var i,t,r,f;if(u.conf.enabled&&(u.conf.clear_click=!0,n=n||event,n.button==u.conf.btn_left)){if(i=n.target||n.srcElement,i!=this.firstChild)for(window.setTimeout(function(){u.base.firstChild.focus()},1),t=i;t!=this&&t!=null;)if(t==this.lastChild){if(typeof u.modes[u.conf.opts_type].topImageClick=="function"&&(r=u.conf.last_hover||u.conf.last_selected,f=r!=null?u.t[r].item:null,u.modes[u.conf.opts_type].topImageClick(f,u)!==!0)){r=f=null;return}t=null}else t=t.parentNode;u._isListVisible()?u._hideList():(i!=this.firstChild&&(u.conf.clear_blur=!0),u._showList(),u._setSelected(u.conf.last_selected,!0,!0));i=null}},this._doOnBodyMouseDown=function(){if(u.conf.clear_click){u.conf.clear_click=!1;return}u._confirmSelect("blur")},this._doOnInputFocus=function(){u.conf.clear_blur=!1;u.conf.tm_confirm_blur&&window.clearTimeout(u.conf.tm_confirm_blur);u.conf.combo_focus==!1&&(u.conf.combo_focus=!0,u.conf.skin=="material"&&u.base.className.match(/dhxcombo_actv/)==null&&(u.base.className+=" dhxcombo_actv"),u.callEvent("onFocus",[]))},this._doOnInputBlur=function(){if(u.conf.clear_blur==!0){u.conf.clear_blur=!1;return}u.conf.tm_confirm_blur&&window.clearTimeout(u.conf.tm_confirm_blur);u.conf.tm_confirm_blur=window.setTimeout(function(){u.conf.clear_click==!1&&(u._confirmSelect("blur"),u.conf.combo_focus=!1,u.conf.skin=="material"&&u.base.className.match(/dhxcombo_actv/)!=null&&(u.base.className=u.base.className.replace(/\s*dhxcombo_actv/gi,"")),u.callEvent("onBlur",[]))},20)},this._doOnInputKeyUp=function(n){if(n=n||event,u.conf.f_mode!=!1){u.conf.clear_bsp=n.keyCode==8||n.keyCode==46;u._filterOpts();return}u._checkForMatch()},this._doOnInputKeyDown=function(n){n=n||event;n.keyCode!=38&&n.keyCode!=40||n.ctrlKey||n.shiftKey||n.altKey||(n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,u._keyOnUpDown(n.keyCode==38?-1:1));n.keyCode==113&&(u._isListVisible()||(u._showList(),u.base.firstChild.value==u.conf.last_text?(u._setSelected(u.conf.last_selected,!0,!0),u.base.firstChild.value=u.conf.last_text,u.conf.f_server_last=u.base.firstChild.value.toLowerCase()):(u.conf.f_server_last=u.base.firstChild.value.toLowerCase(),u.conf.f_mode==!1&&u._checkForMatch())));n.keyCode==27&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,u._cancelSelect());n.keyCode==13&&(n.preventDefault&&n.preventDefault(),u._confirmSelect("kbd"));u.conf.ro_mode==!0&&(n.keyCode>=48&&n.keyCode<=57||n.keyCode>=65&&n.keyCode<=90)&&(u._searchRO(String.fromCharCode(n.keyCode).toLowerCase()),n.cancelBubble=!0);u.conf.clear_key=!0;u.callEvent("onKeyPressed",[n.keyCode||n.charCode])},this._doOnInputKeyPress=function(n){if(u.conf.clear_key){u.conf.clear_key=!1;return}n=n||event;u.callEvent("onKeyPressed",[n.keyCode||n.charCode])},this._keyOnUpDown=function(n){var t=null,i;(this.conf.last_hover?t=this.t[this.conf.last_hover].item:this.conf.last_selected&&(t=this.t[this.conf.last_selected].item),t||this._getListVisibleCount()!=0)&&(t!=null&&t.style.display!=""&&(t=null),this._showList(),t!=null?this.t[t._optId].obj.isSelected(t)&&(t=this._getNearItem(t,n)):(t=this.list.firstChild,t.style.display!=""&&(t=this._getNearItem(t,1))),t!=null)&&(this._setSelected(t._optId,!0,!0),this.conf.f_mode==!1?this.base.firstChild.value=this.t[t._optId].obj.getText(t,!0):(i=String(this.t[t._optId].obj.getText(t,!0)),this.conf.f_mode=="start"&&this.conf.f_ac==!0?i.toLowerCase().indexOf(this.conf.f_server_last)===0?(this.conf.f_ac_text=i.substring(this.conf.f_server_last.length,i.length),this.base.firstChild.value=i,this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)):(this.base.firstChild.value=i,this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this._selectRange(0,this.base.firstChild.value.length)):(this.base.firstChild.value=i,this.conf.f_server_last=this.base.firstChild.value.toLowerCase())),t=null)},this.conf.evs_nodes=[{node:document.body,evs:{mousedown:"_doOnBodyMouseDown"}},{node:this.base,evs:{mousedown:"_doOnBaseMouseDown"}},{node:this.base.firstChild,evs:{keyup:"_doOnInputKeyUp",keydown:"_doOnInputKeyDown",keypress:"_doOnInputKeyPress",focus:"_doOnInputFocus",blur:"_doOnInputBlur"}},{node:this.list,evs:{mousemove:"_doOnListMouseMove",mousedown:"_doOnListMouseDown",mouseup:"_doOnListMouseUp",mouseout:"_doOnListMouseOut"}}],e=0;e<this.conf.evs_nodes.length;e++)for(o in this.conf.evs_nodes[e].evs)typeof addEventListener=="function"?this.conf.evs_nodes[e].node.addEventListener(o,this[this.conf.evs_nodes[e].evs[o]],!1):this.conf.evs_nodes[e].node.attachEvent("on"+o,this[this.conf.evs_nodes[e].evs[o]]);return this.unload=function(){var n,t;for(this.clearAll(),this.t=null,n=0;n<this.conf.evs_nodes.length;n++){for(t in this.conf.evs_nodes[n].evs)typeof addEventListener=="function"?this.conf.evs_nodes[n].node.removeEventListener(t,this[this.conf.evs_nodes[n].evs[t]],!1):this.conf.evs_nodes[n].node.detachEvent("on"+t,this[this.conf.evs_nodes[n].evs[t]]),this.conf.evs_nodes[n].evs[t]=null,delete this.conf.evs_nodes[n].evs[t];this.conf.evs_nodes[n].node=null;this.conf.evs_nodes[n].evs=null;delete this.conf.evs_nodes[n].node;delete this.conf.evs_nodes[n].evs;this.conf.evs_nodes[n]=null}window.dhx4._eventable(this,"clear");window.dhx4._enableDataLoading(this,null,null,null,"clear");this._mcDetachHeader();this.DOMelem_input=this.DOMelem_button=this.DOMlist=this.DOMelem=this.DOMParent=null;for(t in this.conf)this.conf[t]=null,delete this.conf[t];this.conf=null;typeof addEventListener=="function"?this.list.removeEventListener("scroll",this._doOnListScroll,!1):this.list.detachEvent("onscroll",this._doOnListScroll);this.base.parentNode.removeChild(this.base);this.list.parentNode.removeChild(this.list);this.base=this.list=this.cont=null;this.modes=null;for(t in this)typeof this[t]=="function"&&(this[t]=null);u=null},this.DOMelem_input=this.base.firstChild,this.DOMelem_button=this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)],this.DOMlist=this.list,this.DOMelem=this.base,this.DOMParent=n,n=null,f!=null&&(f.filter!=null&&(typeof f.filter=="string"?this.enableFilteringMode(!0,f.filter,window.dhx4.s2b(f.filter_cache),window.dhx4.s2b(f.filter_sub_load)):this.enableFilteringMode(!0)),f.image_path!=null&&this.setImagePath(f.image_path),(f.default_image!=null||f.default_image_dis!=null)&&this.setDefaultImage(f.default_image,f.default_image_dis),(f.items||f.options)&&this.addOption(f.items||f.options),(f.xml||f.json)&&this.load(f.xml||f.json),typeof f.readonly!="undefined"&&this.readonly(f.readonly),f=null),this}function dhtmlXComboFromSelect(n){var o,t,f,e,i,r;typeof n=="string"&&(n=document.getElementById(n));var s=n.offsetWidth,h=n.getAttribute("name")||null,u=document.createElement("SPAN");return n.parentNode.insertBefore(u,n),o=n.getAttribute("mode")||n.getAttribute("opt_type")||"option",t=new dhtmlXCombo(u,h,s,o),u=null,f=n.getAttribute("imagePath"),f&&t.setImagePath(f),e=n.getAttribute("defaultImage"),i=n.getAttribute("defaultImageDis"),window.dhx4.s2b(i)==!0&&(i=!0),(e!=null||i!=null)&&t.setDefaultImage(e,i),r=t._xmlToObj([n],!0,n.selectedIndex),r.options.length>0&&t.addOption(r.options),r=null,n.parentNode.removeChild(n),n=null,t}function dhtmlXComboExtend(n,t){for(var i in dhtmlXCombo.prototype.modes[t])typeof dhtmlXCombo.prototype.modes[n][i]=="undefined"&&(dhtmlXCombo.prototype.modes[n][i]=dhtmlXCombo.prototype.modes[t][i])}function dhtmlXColorPicker(n){var i;if(!(this instanceof window.dhtmlXColorPicker))return new dhtmlXColorPicker(n);dhx4._eventable(this);var t=this,e=undefined,f=null,i,u,r;this._nodes=[];this.activeNode=null;this._inputListenerId=null;this.base=null;this._globalNode=null;this.memory=null;this.skin=null;this.conf={cp_id:dhx4.newId(),x:0,y:0,c:0,indent:2,position:"right",customColors:!1,selectedColor:null,hide:!1,hideOnSelect:!1,lang:"en",closeable:!0};this.value={red:-1,blue:-1,green:-1,hue:-1,sat:-1,lum:-1};this._initMoveSelection=function(n){return n=n||event,typeof addEventListener=="function"?(t._controllerNodes.colorArea.addEventListener("mousemove",t._setMoveSelection,!1),document.body.addEventListener("mouseup",t._cleanMoveSelection,!1)):(t._controllerNodes.colorArea.attachEvent("onmousemove",t._setMoveSelection),document.body.attachEvent("onmouseup",t._cleanMoveSelection)),t._setMoveSelection(n,t._controllerNodes.colorArea),!1};this._cleanMoveSelection=function(){return typeof removeEventListener=="function"?(t._controllerNodes.colorArea.removeEventListener("mousemove",t._setMoveSelection,!1),document.body.removeEventListener("mouseup",t._cleanMoveSelection,!1)):(t._controllerNodes.colorArea.detachEvent("onmousemove",t._setMoveSelection),document.body.detachEvent("onmouseup",t._cleanMoveSelection)),!1};this._setMoveSelection=function(n){n=n||event;var i=t._getOffsetPosition(n,t._controllerNodes.colorArea);return t._controllerNodes.fr_cover?setTimeout(function(){t._setColorAreaXY(i.x,i.y);t._setColorByXYC()},0):(t._setColorAreaXY(i.x,i.y),t._setColorByXYC()),!1};this._initMoveContrast=function(n){n=n||event;typeof addEventListener=="function"?(document.body.addEventListener("mousemove",t._setMoveContrast,!1),document.body.addEventListener("mouseup",t._cleanMoveContrast,!1)):(document.body.attachEvent("onmousemove",t._setMoveContrast),document.body.attachEvent("onmouseup",t._cleanMoveContrast));t._setMoveContrast(n,t._controllerNodes.contrastArea)};this._cleanMoveContrast=function(){typeof removeEventListener=="function"?(document.body.removeEventListener("mousemove",t._setMoveContrast,!1),document.body.removeEventListener("mouseup",t._cleanMoveContrast,!1)):(document.body.detachEvent("onmousemove",t._setMoveContrast),document.body.detachEvent("onmouseup",t._cleanMoveContrast))};this._setMoveContrast=function(n){n=n||event;var i=t._getOffsetPosition(n,t._controllerNodes.contrastArea);t._setContrastY(i.y);t._setColorByXYC(!0)};this._doOnSelectColor=function(){var n=t.colorAIP.rgb2hex({r:t.value.red,g:t.value.green,b:t.value.blue});t.activeNode!=null&&(t.activeNode.valueCont&&(t.activeNode.valueCont.value=n),t.activeNode.valueColor&&(t.activeNode.valueColor.style.backgroundColor=n));(t.base._dhx_remove||t.conf.hideOnSelect)&&t.hide();t.callEvent("onSelect",[n,t.activeNode?t.activeNode.node:null])};this._doOnCancel=function(){t.callEvent("onCancel",[t.activeNode?t.activeNode.node:null])==!0&&t.conf.closeable==!0&&t.hide()};this._doOnFocusByInput=function(){var i=this!=window?this:event.srcElement,n=t.activeNode&&t.activeNode.valueCont&&t.activeNode.valueCont==i?t.activeNode:t._getNodeByValueCont(i);t.activeNode=n;n&&n==t.activeNode&&t._initListenerInput()};this._doOnBlurByInput=function(){var n=this!=window?this:event.srcElement,i=t.activeNode&&t.activeNode.valueCont&&t.activeNode.valueCont==n?t.activeNode:t._getNodeByValueCont(n);i&&i==t.activeNode&&t._removeListenerInput()};this._doOnClickByNode=function(n){n=n||event;var i=this!=window?this:event.srcElement;t.activeNode=t.activeNode.node!=i?t._getNodeByElement(i):t.activeNode;t.isVisible()||t.show()};this.saveColor=function(){t.memory.setValue(t.value)};this._onSelectMemoryEl=function(n){var i;t._refreshCoordinatesByHSL(n.value.hue,n.value.sat,n.value.lum);for(i in n.value)t.value[i]=n.value[i];t._refreshContrast();t._refreshInputValues();t._refreshColorValue()};this._doOnClickByBody=function(n){n=n||event;var i=!0,r=n.target||n.srcElement;t._isBaseNode(r)&&(i=!1);i&&t.activeNode&&(t.activeNode.node==r||t.activeNode.valueCont==r)&&(i=!1);i&&t.hide()};this._doOnChangeHSL=function(){var n=parseInt(t._controllerNodes.hue.value),i=parseInt(t._controllerNodes.sat.value),r=parseInt(t._controllerNodes.lum.value),u;isNaN(n)||n>359||n<0?t._controllerNodes.hue.value=t.value.hue:t.value.hue=n;isNaN(i)||i>100||i<0?t._controllerNodes.sat.value=t.value.sat:t.value.sat=i;isNaN(r)||r>100||r<0?t._controllerNodes.lum.value=t.value.lum:t.value.lum=r;u=t.colorAIP.hsl2rgb(t.value.hue,t.value.sat/100,t.value.lum/100);t.value.red=Math.round(255*u.r);t.value.green=Math.round(255*u.g);t.value.blue=Math.round(255*u.b);t._refreshCoordinatesByHSL(t.value.hue,t.value.sat,t.value.lum);t._refreshContrast();t._refreshInputValues();t._refreshColorValue()};this._doOnChangeRGB=function(){var n=parseInt(t._controllerNodes.red.value),i=parseInt(t._controllerNodes.green.value),r=parseInt(t._controllerNodes.blue.value),u;isNaN(n)||n>255||n<0?t._controllerNodes.red.value=t.value.red:t.value.red=n;isNaN(i)||i>255||i<0?t._controllerNodes.green.value=t.value.green:t.value.green=i;isNaN(r)||r>255||r<0?t._controllerNodes.blue.value=t.value.blue:t.value.blue=r;u=t.colorAIP.rgb2hsl(t.value.red/255,t.value.green/255,t.value.blue/255);t.value.hue=Math.round(u.h);t.value.sat=Math.round(u.s*100);t.value.lum=Math.round(u.l*100);t._refreshCoordinatesByHSL(t.value.hue,t.value.sat,t.value.lum);t._refreshContrast();t._refreshInputValues();t._refreshColorValue()};this._doOnChangeHSV=function(){t._controllerNodes.hsv.value=t.setColor(t._controllerNodes.hsv.value)};this._checkType=function(n){var i;if(n instanceof Array){i=t._checkType(n[0]);switch(i){case"string":return"array_string";case"input":case"textarea":return"array_input";case"object":return"array_object";default:return undefined}}else return n==undefined?null:typeof n=="string"?"string":n.tagName&&n.tagName.toLowerCase()=="input"?"input":n.tagName&&n.tagName.toLowerCase()=="textarea"?"textarea":n.tagName?"container":typeof n=="object"?"object":undefined};this._initByObject=function(n){n.parent&&n.parent.tagName?t.base=n.parent:typeof n.parent=="string"?t.base=document.getElementById(n.parent):(t.base=document.createElement("div"),t.base._dhx_remove=!0);n.color&&(t.conf.selectedColor=n.color);typeof n.closeable!="undefined"&&(this.conf.closeable=dhx4.s2b(n.closeable));n.custom_colors&&(this._tempInitCC=function(){var t,i;if(this.initMemoryColors(),this.conf.customColors=!0,n.custom_colors instanceof Array)for(i=n.custom_colors.length,t=0;t<i;t++)this.setCustomColors(n.custom_colors[t]);this.base.parentNode&&this.showMemory();delete this._tempInitCC});n.hide&&(t.conf.hide=!0);n.input&&t._addNode(n.input,n.target_color,n.target_value);var i=n.skin||window.dhx4.skin||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcolorpicker")||"material";t.setSkin(i);n.colors&&(t.initMemoryColors(),t.conf.customColors=!0);n.link&&t._addNode(n.link)};this.unload=function(){var n,u,i;for(this.isVisible()&&this.hide(),this.destructMemory(),u=this._nodes.length,n=0;n<u;n++){this._detachEventsFromNode(this._nodes[n]);for(i in this._nodes[n])this._nodes[n][i]=null;delete this._nodes[n]}this._nodes=null;this.base._dhx_remove?delete this.base._dhx_remove:this.base.className=this.base.className.replace(/\s?dhtmlxcp_\S*/,"");typeof addEventListener=="function"?(this._controllerNodes.colorArea.removeEventListener("mousedown",this._initMoveSelection,!1),this._controllerNodes.colorArea.removeEventListener("dblclick",this._doOnSelectColor,!1),this._controllerNodes.contrastArea.removeEventListener("mousedown",this._initMoveContrast,!1),this._controllerNodes.button_save.removeEventListener("click",this._doOnSelectColor,!1),this._controllerNodes.button_cancel.removeEventListener("click",this._doOnCancel,!1),this._controllerNodes.hue.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.sat.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.lum.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.red.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.green.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.blue.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.hsv.removeEventListener("change",this._doOnChangeHSV,!1)):(this._controllerNodes.colorArea.detachEvent("onmousedown",this._initMoveSelection),this._controllerNodes.colorArea.detachEvent("ondblclick",this._doOnSelectColor),this._controllerNodes.contrastArea.detachEvent("onmousedown",this._initMoveContrast),this._controllerNodes.button_save.detachEvent("onclick",this._doOnSelectColor),this._controllerNodes.button_cancel.detachEvent("onclick",this._doOnCancel),this._controllerNodes.hue.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.sat.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.lum.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.red.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.green.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.blue.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.hsv.detachEvent("onchange",this._doOnChangeHSV));this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.parentNode&&this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover),delete this._controllerNodes.fr_cover);dhx4.zim.clear(this.conf.cp_id);dhx4._eventable(this,"clear");for(i in this)this[i]=null;t=null;f=null;r=null};e=this._checkType(n);switch(e){case"object":t._initByObject(n);break;case"input":case"textarea":t._initByObject({});this._addNode(n);break;case"string":return f=document.getElementById(n),new dhtmlXColorPicker(f);case"container":t._initByObject({parent:n});break;case null:t._initByObject({});break;case"array_string":case"array_input":for(t._initByObject({}),u=n.length,i=0;i<u;i++)this._addNode(n[i]);break;case"array_object":for(t._initByObject({}),u=n.length,i=0;i<u;i++)r=this._addNode(n[i].input,n[i].target_color,n[i].target_value).conf,r.customColors=n[i].custom_colors!=undefined?dhx4.s2b(n[i].custom_colors):r.customColors,r.selectedColor=n[i].color!=undefined?n[i].color:r.selectedColor}if(this.base.innerHTML="<div class='dhxcp_g_area'><div class='dhxcp_sub_area'><div class='dhxcp_g_color_area'><div class='dhxcp_color_selector'><div class='dhxcp_v_line'><\/div><div class='dhxcp_h_line'><\/div><\/div><div class='dhxcp_contrast_area'><div class='dhxcp_h_line'><\/div><\/div><\/div><div class='dhxcp_g_input_area'><div class='dhxcp_value_cont'><div class='dhxcp_value_color'><\/div><input type='text' class='dhxcp_value'/><\/div><table class='dhxcp_inputs_cont' cellpadding='0' cellspacing='0' border='0'><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelHue+"<\/td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/><\/td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelRed+"<\/td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/><\/td><\/tr><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelSat+"<\/td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/><\/td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelGreen+"<\/td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/><\/td><\/tr><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelLum+"<\/td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/><\/td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelBlue+"<\/td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/><\/td><\/tr><\/table><\/div><div class='dhxcp_g_memory_area'><\/div><div class='dhxcp_buttons_area'><button class='dhx_button_save'>"+this.i18n[this.conf.lang].btnSelect+"<\/button><button class='dhx_button_cancel'>"+this.i18n[this.conf.lang].btnCancel+"<\/button><\/div><\/div>",this._globalNode=this.base.firstChild,this._controllerNodes={colorArea:this._globalNode.firstChild.firstChild.firstChild,v_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[0],h_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[1],contrastArea:this._globalNode.firstChild.firstChild.childNodes[1],contrast_line:this._globalNode.firstChild.firstChild.childNodes[1].firstChild,color:this._globalNode.firstChild.childNodes[1].childNodes[0].firstChild,hsv:this._globalNode.firstChild.childNodes[1].childNodes[0].childNodes[1],hue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[1].firstChild,sat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[1].firstChild,lum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[1].firstChild,red:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[3].firstChild,green:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[3].firstChild,blue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[3].firstChild,memory_block:this._globalNode.firstChild.childNodes[2],button_save:this._globalNode.firstChild.childNodes[3].firstChild,button_cancel:this._globalNode.firstChild.childNodes[3].childNodes[1]},this._labelNodes={labelHue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].firstChild,labelSat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].firstChild,labelLum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].firstChild,labelRed:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[2],labelGreen:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[2],labelBlue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[2],btnAddColor:null,btnSelect:this._globalNode.firstChild.childNodes[3].firstChild,btnCancel:this._globalNode.firstChild.childNodes[3].childNodes[1]},typeof this._tempInitCC=="function"&&this._tempInitCC(),typeof addEventListener=="function"?(this._controllerNodes.colorArea.addEventListener("mousedown",this._initMoveSelection,!1),this._controllerNodes.colorArea.addEventListener("dblclick",this._doOnSelectColor,!1),this._controllerNodes.contrastArea.addEventListener("mousedown",this._initMoveContrast,!1),this._controllerNodes.button_save.addEventListener("click",this._doOnSelectColor,!1),this._controllerNodes.button_cancel.addEventListener("click",this._doOnCancel,!1),this._controllerNodes.hue.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.sat.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.lum.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.red.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.green.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.blue.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.hsv.addEventListener("change",this._doOnChangeHSV,!1)):(this._controllerNodes.colorArea.attachEvent("onmousedown",this._initMoveSelection),this._controllerNodes.colorArea.attachEvent("ondblclick",this._doOnSelectColor),this._controllerNodes.contrastArea.attachEvent("onmousedown",this._initMoveContrast),this._controllerNodes.button_save.attachEvent("onclick",this._doOnSelectColor),this._controllerNodes.button_cancel.attachEvent("onclick",this._doOnCancel),this._controllerNodes.hue.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.sat.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.lum.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.red.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.green.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.blue.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.hsv.attachEvent("onchange",this._doOnChangeHSV)),this.setColor(this.conf.selectedColor||"#ffffff"),this._nodes.length)for(i=0;i<this._nodes.length;i++)this._attachEventsToNode(this._nodes[i]);this.conf.hide&&this.hide();typeof this._cpInitFRM=="function"&&this._cpInitFRM()}function dhtmlXSlider(n){var t=this,i;return(this.conf={size:null,skin:null,vertical:!1,min:0,max:99,value:0,step:1,decimals:0,margin:2,border:1,inverse:!1,disabled:!1,tooltip:!1,visible:!0,linkTo:null,range:!1,bg:null,bg_mode:"left"},this._attachedNode={},this._movingInitialValues=null,this.base=null,arguments.length>1)?new dhtmlXSlider(this._renderArgumets(arguments)):typeof n=="string"||typeof n=="object"&&n.tagName?new dhtmlXSlider({parent:n}):(this.base=typeof n.parent=="string"?document.getElementById(n.parent):n.parent,this._mergeConfig(this._readAttFormNode(this.base)),this._mergeConfig(n),this.conf.bg==null&&(this.conf.bg=this.conf.range==!0),this.conf.range==!0&&(this.conf.value instanceof Array||(this.conf.value=[this.conf.value]),this.conf.value.length<2&&this.conf.value.push(this.conf.value[0]),this.conf.linkTo instanceof Array||(this.conf.linkTo=[this.conf.linkTo])),this._detectDecimals(),(this.conf.size==null||typeof this.conf.size=="undefined")&&(this.conf.size=this.conf.vertical?this.base.offsetHeight:this.base.offsetWidth),i=this.conf.skin||window.dhx4.skin||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxslider")||"material",this.setSkin(i),this.base.innerHTML="<div class='dhxsl_container'><div class='dhxsl_track'>"+(this.conf.bg==!0?"<div class='dhxsl_track_bg'><\/div>":"")+"<\/div><div class='dhxsl_runner'><\/div>"+(this.conf.range==!0?"<div class='dhxsl_runner'><\/div>":"")+"<\/div>",this._nodes={cont:this.base.firstChild,track:this.base.firstChild.firstChild,runner:this.base.firstChild.childNodes[1],runner2:this.base.firstChild.childNodes[2]},this._nodes.cont.onmousedown=this._nodes.track.onmousedown=this._nodes.cont.onselectstart=this._nodes.track.onselectstart=function(n){return n=n||event,typeof n.preventDefault=="function"?n.preventDefault():n.returnValue=!1,!1},this._r_actv=null,this.conf.value=this.conf.range==!0?this._normalizeRange(this.conf.value,this.conf.min,this.conf.max):this._normalize(this.conf.value,this.conf.min,this.conf.max),this._setOrient(this.conf.vertical),this.setSize(this.conf.size),this._initMover=function(n,i){if(!t.conf.disabled)return n=n||event,typeof n.preventDefault=="function"&&n.preventDefault(),i!=null?t._r_actv=t._nodes[i==0?"runner":"runner2"]:(t._r_actv=n.target||n.srcElement,t._r_actv.className.indexOf("dhxsl_runner")==-1&&(t._r_actv=t._nodes.runner)),t._r_actv.className="dhxsl_runner dhxsl_runner_actv",t._movingInitialValues={},t.conf.range==!0?(t._movingInitialValues.index=t._r_actv==t._nodes.runner?0:1,t._movingInitialValues.value=t.conf.value[t._movingInitialValues.index]):t._movingInitialValues.value=t.conf.value,t._movingInitialValues.coord=t._getTouchCoord(n),t.conf.disabled==!1&&(typeof addEventListener=="function"?(window.addEventListener("mousemove",t._move,!1),window.addEventListener("mouseup",t._cleanMove,!1),window.addEventListener("touchmove",t._move,!1),window.addEventListener("touchend",t._cleanMove,!1)):(document.body.attachEvent("onmousemove",t._move),document.body.attachEvent("onmouseup",t._cleanMove))),t.callEvent("onMouseDown",[t._r_actv==t._nodes.runner?0:1]),!1},this._move=function(n){var i;if(!t.conf.disabled){n=n||event;typeof n.preventDefault=="function"&&n.preventDefault();var u=t.conf.vertical?t._r_actv.offsetHeight:t._r_actv.offsetWidth,f=t.conf.max-t.conf.min,e=t._getTouchCoord(n),r=t._movingInitialValues.value+(e-t._movingInitialValues.coord)*f/(t.conf.size-u)*(t.conf.inverse?-1:1);t.conf.range==!0?(i=[t.conf.value[0],t.conf.value[1]],t._movingInitialValues.index==0?i[0]=Math.min(i[1],r):t._movingInitialValues.index==1&&(i[1]=Math.max(i[0],r)),t.setValue(i,!0)):t.setValue(r,!0)}},this._cleanMove=function(){typeof addEventListener=="function"?(window.removeEventListener("mousemove",t._move,!1),window.removeEventListener("mouseup",t._cleanMove,!1),window.removeEventListener("touchmove",t._move,!1),window.removeEventListener("touchend",t._cleanMove,!1)):(document.body.detachEvent("onmousemove",t._move),document.body.detachEvent("onmouseup",t._cleanMove));t._movingInitialValues=null;t._r_actv.className=t._r_actv.className.replace(/\s{0,}dhxsl_runner_actv/gi,"");t.callEvent("onSlideEnd",[t.conf.value]);t.callEvent("onMouseUp",[t._r_actv==t._nodes.runner?0:1]);t._r_actv=null},this._doOnSetValue=function(n){var r,f,e;if(!t.conf.disabled){if(t._movingInitialValues!=null)return!1;n=n||event;typeof n.preventDefault=="function"&&n.preventDefault();r=0;f=n.target||n.srcElement;f.className.match(/dhxsl_track_bg/)!=null&&(r=parseInt(f.style[t.conf.vertical?"top":"left"]));e=n.type.match(/touch/)!=null?t._getTouchCoord(n)+r:(t.conf.vertical?n.offsetY||n.layerY:n.offsetX||n.layerX)+r;var s=(t.conf.vertical?t._nodes.runner.offsetHeight:t._nodes.runner.offsetWidth)+r,o=t.conf.max-t.conf.min,u=null,i=null;return i=t.conf.inverse==!0?t.conf.max-e*o/t.conf.size:e*o/t.conf.size+t.conf.min,t.conf.range==!0&&(u=Math.abs(t.conf.value[0]-i)<=Math.abs(t.conf.value[1]-i)?0:1,i=[u==0?i:t.conf.value[0],u==1?i:t.conf.value[1]]),t.conf.init_index=u,t.setValue(i,!0),t.conf.init_index=null,t._movingInitialValues==null&&t._initMover(n,u),!1}},this._doOnChangeInput=function(n){n=n||event;var i=n.target||n.srcElement;t.setValue(i.value)},this._doOnKeyDown=function(n){n=n||event;var i=n.target||n.srcElement;n.keyCode==13&&t.setValue(i.value)},this._attachEvents(this._nodes),this.unload=function(){dhx4._eventable(this,"clear");this._detachNode();this._detachEvents(this._nodes);this.base.removeChild(this._nodes.cont);this._nodes.cont.onmousedown=this._nodes.track.onmousedown=this._nodes.cont.onselectstart=this._nodes.track.onselectstart=null;delete this._nodes.cont;delete this._nodes.track;delete this._nodes.max;delete this._nodes.min;delete this._nodes.runner;this._nodes.runner2&&delete this._nodes.runner2;/\s?dhtmlxslider_\S*/.test(this.base.className)&&(this.base.className=this.base.className.replace(/\s?dhtmlxslider_\S*/,""));for(var n in this)this[n]=null;t=null},dhx4._eventable(this),this.conf.disabled&&this.disable(),this.conf.tooltip&&this.enableTooltip(),this.conf.visible||this.hide(),this.conf.linkTo&&this.linkTo(this.conf.linkTo),this)}function dhtmlXPopup(n){var t=this,i;if(this.conf=n||{},n=null,this.mode=this.conf.mode||"bottom",this.conf.zi=window.dhx4.newId(),this.conf.context=this.conf.context==null?!0:window.dhx4.s2b(this.conf.context),this.conf.IE6_display_fix=this.conf.IE6_display_fix==null?!1:window.dhx4.s2b(this.conf.IE6_display_fix),this.conf.last_p_click=this.conf.last_body_click=null,this.p=document.createElement("DIV"),this.p.style.display="none",this.p.innerHTML="<div class='dhx_popup_area"+(window.dhx4.isIE?" dhx_popup_area_ie":"")+"'><table cellspacing='0' cellpadding='0' border='0' class='dhx_popup_table'><tbody><\/tbody><\/table><\/div><div class='dhx_popup_arrow dhx_popup_arrow_"+this.mode+"'><\/div>",document.body.appendChild(this.p),this.p.oncontextmenu=function(n){if(t.conf.context==!1)return n=n||event,n.returnValue=!1,!1},this.skinParams={dhx_terrace:{t0:19,t1:9,t2:19,t3:9},dhx_skyblue:{t0:12,t1:9,t2:12,t3:9},dhx_web:{t0:12,t1:9,t2:12,t3:9},material:{t0:19,t1:9,t2:19,t3:9}},this.p.ontouchstart=this.p.onclick=function(n){var u,i,r;if(n=n||event,u=t.conf.last_p_click!=null&&t.conf.last_p_click!=n.type,t.conf.last_p_click=n.type,u!=!0){if(t._clearClick=!0,t._nodeObj!=null)return t.callEvent("onContentClick",[]),!0;for(i=n.target||n.srcElement,r=null;i!=t.p&&i!=null;)typeof i._idd=="undefined"||i._isSeparator?i=i.parentNode:(r=i._idd,i=null);i=null;r!=null&&(t.callEvent("onClick",[r]),t!=null&&t.isVisible!=null&&t.isVisible()&&t.callEvent("onBeforeHide",["select",n,r])===!0&&(n.cancelBubble=!0,t.hide()))}},this.separator="DHXSEP_"+window.dhx4.newId(),this.tpl=[],this._setTemplate=function(n){this.tpl=n.split(",")},this.show=function(n){var t=null;if(arguments.length==1){if(n){if(!this._idExists(n))return}else n=this.conf.id[0];this.conf.toolbar&&(t=this.conf.toolbar._getItemDim(n));this.conf.ribbon&&(t=this.conf.ribbon._getItemDim(n));this.conf.form&&(t=this.conf.form._getItemDim(n))}else arguments.length==4&&(this._clearClick=!0,t={left:arguments[0],top:arguments[1],width:arguments[2],height:arguments[3]},n=null);t&&(this.p.style.visibility="hidden",this.p.style.display="",this._setPos(t),this.p.style.zIndex=window.dhx4.zim.reserve(this.conf.zi),this.p.style.visibility="visible",this._lastId=n,this.callEvent("onShow",[n]))},this._setPos=function(n,t){var u=n.left,f=n.top,o=n.width,s=n.height,i,r,y,p,b,d,v;if(this._posData={left:u,top:f,width:o,height:s},i=window.dhx4.screenDim(),r=t||this.mode,typeof t=="undefined"&&(t=!1),y={top:f-this.p.offsetHeight-i.top,bottom:i.bottom-(f+s+this.p.offsetHeight),left:u-this.p.offsetWidth-i.left,right:i.right-(u+o+this.p.offsetWidth)},!t&&y[r]<0&&(p=this._getAvailPos(r,y),p!==!1)){this._setPos(n,p);return}if(r=="top"||r=="bottom"){var a=this.skinParams[this.conf.skin].t2,h=this.skinParams[this.conf.skin].t3,g=Math.round(this.p.offsetWidth/2),w=Math.round(this.p.lastChild.offsetWidth/2);u<i.left&&(b=Math.min(u+o,i.left),o=u+o-b,u=b);u+o>i.right&&(o=i.right-u);var e=Math.round(u+o/2),c=e-g,nt=e-a-w,tt=e+w+a-this.p.offsetWidth;c<i.left-h?c=Math.min(i.left-h,nt):c+this.p.offsetWidth>i.right+h&&(c=Math.max(tt,i.right+h-this.p.offsetWidth));this.p.style.left=c+"px";this.p.style.top=(r=="top"?f-this.p.offsetHeight:f+s)+"px";e=e-c-w;this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+r;this.p.lastChild.style.top=(r=="top"?this.p.offsetHeight-this.p.lastChild.offsetHeight:0)+"px";this.p.lastChild.style.left=e+"px"}if(r=="left"||r=="right"){var a=this.skinParams[this.conf.skin].t0,h=this.skinParams[this.conf.skin].t1,it=Math.round(this.p.offsetHeight/2),k=Math.round(this.p.lastChild.offsetHeight/2);f<i.top&&(d=Math.min(f+s,i.top),s=f+s-d,f=d);f+s>i.bottom&&(s=i.bottom-f);var e=Math.round(f+s/2),l=e-it,rt=e-a-k,ut=e+k+a-this.p.offsetHeight;l<i.top-h?l=Math.min(i.top-h,rt):l+this.p.offsetHeight>i.bottom+h&&(l=Math.max(ut,i.bottom+h-this.p.offsetHeight));this.p.style.left=(r=="left"?u-this.p.offsetWidth:u+o)+"px";this.p.style.top=l+"px";e=e-l-k;this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+r;this.p.lastChild.style.left=(r=="left"?this.p.offsetWidth-this.p.lastChild.offsetWidth:0)+"px";this.p.lastChild.style.top=e+"px"}this._IEDisp&&this._nodeId!=null&&(v=document.getElementById(this._nodeId),this.conf.IE6_display_fix==!0&&(v.style.visibility="hidden"),window.setTimeout(function(){v.style.visibility="visible";v=null},1))},this._getAvailPos=function(n,t){for(var f,u={top:["bottom","right","left"],bottom:["top","right","left"],left:["right","bottom","top"],right:["left","bottom","top"]},i=null,r=0;r<u[n].length;r++)i==null&&t[u[n][r]]>0&&(i=u[n][r]);if(i==null){i="bottom";for(f in t)t[f]>t[i]&&(i=f)}return i==n?!1:i},this._repaint=function(){this.isVisible()&&this._setPos(this._posData)},this.clear=function(){var t,n;if(this._nodeObj&&(window.dhx4.isIE&&typeof dhtmlXLayoutObject=="function"&&this._nodeObj instanceof window.dhtmlXLayoutObject&&(this.p.onmousedown=null),this._nodeObj.unload?this._nodeObj.unload():this._nodeObj.destruct&&this._nodeObj.destruct(),this._nodeObj=this._nodeId=null,this._nodeObjEv!=null)){for(t=0;t<this._nodeObjEv.length;t++)this.detachEvent(this._nodeObjEv[t]);this._nodeObjEv=null}for(this._IEHoverInited&&this._IEHoverClear(),n=this.p.firstChild.firstChild.firstChild;n.childNodes.length>0;)n.removeChild(n.lastChild);n=null;this.itemData={}},this.hide=function(){if(this.p.style.display!="none"){this.p.style.display="none";window.dhx4.zim.clear(this.conf.zi);var n=this._lastId;this._lastId=null;this.callEvent("onHide",[n]);this.conf.last_p_click=this.conf.last_body_click=null}},this.isVisible=function(){return this.p.style.display==""},this.itemData={},this.getItemData=function(n){return n?this.itemData[n]?this.itemData[n]:{}:this.itemData},this.setSkin=function(n){this.conf.skin=n;this.p.className="dhx_popup_"+this.conf.skin;this._nodeObj!=null&&typeof this._nodeObj.setSkin=="function"&&this._nodeObj.setSkin(this.conf.skin);this._repaint()},this.attachList=function(n,t){var e,u,i,f,o,r;for(this._setTemplate(n),this.clear(),e=this.p.firstChild.firstChild.firstChild,u=0;u<t.length;u++){if(i=document.createElement("TR"),t[u]!=this.separator){if(typeof t[u].id=="undefined"||t[u].id==null)for(i._idd=window.dhx4.newId();this.itemData[i._idd]!=null;)i._idd=window.dhx4.newId();else i._idd=t[u].id;this.itemData[i._idd]=t[u]}if(e.appendChild(i),t[u]==this.separator)i.className="dhx_popup_sep",i._isSeparator=!0,r=document.createElement("TD"),r.className="dhx_popup_sep",r.colSpan=this.tpl.length,r.innerHTML="<div class='dhx_popup_sep'>&nbsp;<\/div>",i.appendChild(r),r=null;else{for(f=0;f<this.tpl.length;f++)o="dhx_popup_td",this._IEFirstLast&&(this.tpl.length==1||f==0||f==this.tpl.length-1)&&(o+=this.tpl.length==1?" dhx_popup_td_single":f==0?" dhx_popup_td_first":" dhx_popup_td_last"),r=document.createElement("TD"),r.className=o,r.innerHTML=t[u][this.tpl[f]]||"&nbsp;",i.appendChild(r),r=null;this._IEHover&&(i._IEHover=!0,this._IEHoverInited||this._IEHoverInit())}i=null}e=null;this._repaint()},this._attachNode=function(n,t){var u,r,i;return this.clear(),this._nodeId="dhxpopup_node_"+window.dhx4.newId(),u=this.p.firstChild.firstChild.firstChild,r=document.createElement("TR"),r.className="dhxnode",u.appendChild(r),i=document.createElement("TD"),i.className="dhx_popup_td",i.innerHTML="<div id='"+this._nodeId+"' style='position:relative;'><\/div>",t.width&&(i.firstChild.style.width=t.width+"px"),t.height&&(i.firstChild.style.height=t.height+"px"),r.appendChild(i),i=r=u=null,typeof this["_attach_init_"+n]=="function"&&(this["_attach_init_"+n](t),this._enableIEVFix()),this._repaint(),this._nodeObj},this.unload=function(){var n,i;if(typeof addEventListener=="function"?(window.removeEventListener("touchstart",this._doOnClick,!1),window.removeEventListener("click",this._doOnClick,!1),window.removeEventListener("keyup",this._doOnKeyUp,!1),window.removeEventListener("unload",this._doOnUnload,!1)):(document.body.detachEvent("onclick",this._doOnClick,!1),document.body.detachEvent("onkeyup",this._doOnKeyUp,!1),document.body.detachEvent("onunload",this._doOnUnload,!1)),window.dhx4.detachEvent(this.conf.ev_grid_click),this.clear(),this.conf.toolbarEvent!=null&&this.conf.toolbar!=null&&(this.conf.toolbar.detachEvent!=null?this.conf.toolbar.detachEvent(this.conf.toolbarEvent):this.conf.toolbar._getItemDim=null),this.conf.ribbonEvent!=null&&this.conf.ribbon!=null&&(this.conf.ribbon.detachEvent!=null?this.conf.ribbon.detachEvent(this.conf.ribbonEvent):this.conf.ribbon._getItemDim=null),this.conf.slider!=null){for(n=0;n<this.conf.slider_events.length;n++)this.conf.slider.detachEvent(this.conf.slider_events[n]);this.conf.slider_events=null;this._sliderShow=this._sliderHide=null;this.conf.slider=null}window.dhx4._eventable(this,"clear");this.p.onclick=this.p.ontouchstart=this.p.oncontextmenu=null;this.p.parentNode.removeChild(this.p);this.p=null;for(i in this.conf)this.conf[i]=null;for(i in this)this[i]=null;t=null},window.dhx4._eventable(this),this._doOnClick=function(n){var s,e,i,f,u,r;if(n=n||event,s=t.conf.last_body_click!=null&&t.conf.last_body_click!=n.type,t.conf.last_body_click=n.type,s!=!0){if(t._clearClick==!0){t._clearClick=!1;return}if(t.conf.form!=null){if(i=n.target||n.srcElement,(i.tagName||"").toLowerCase()=="option"&&(i=i.parentNode),i.className!=null&&i.className.search("dhxform")>=0)i.parentNode!=null&&i.parentNode.parentNode!=null&&i.parentNode.parentNode._idd!=null&&(e=i.parentNode.parentNode._idd,i.parentNode.parentNode._type=="ra"&&(e=[i.parentNode.parentNode._group,i.parentNode.parentNode._value]));else{for(f=!0,u=!1;f&&!u;)r=(i.className||"").toLowerCase(),r.length>0&&(u=r=="dhxform_btn"||r.search(/dhxeditor_inside/gi)>=0||r=="dhxcombo_input"||r.search(/dhxcombolist/gi)>=0),i=i.parentNode,f=i!=null;if(u)return}if(i=null,e!=null&&t._idExists(e))return}if(typeof dhtmlXForm=="function"&&t._nodeObj instanceof window.dhtmlXForm){var h={},r=0,o=t._nodeObj;if(o.forEachItem(function(n){o.getItemType(n)=="combo"&&(h[o.getCombo(n).list._listId]=!0,r++)}),o=null,r>0){for(var i=n.target||n.srcElement,f=!0,u=!1;f==!0&&u!=!0;)r=(i.className||"").toLowerCase(),r.length>0&&r.search(/^dhxcombolist/gi)>=0&&i._listId!=null&&h[i._listId]==!0?(u=!0,i=null):(i=i.parentNode,f=i!=null);if(u==!0)return}}t.isVisible()&&t.callEvent("onBeforeHide",["click",n])===!0&&t.hide()}},this._doOnKeyUp=function(n){n=n||event;n.keyCode==27&&t.isVisible()&&t.callEvent("onBeforeHide",["esc",n])===!0&&t.hide()},this._doOnUnload=function(){t.unload()},typeof addEventListener=="function"?(window.addEventListener("touchstart",this._doOnClick,!1),window.addEventListener("click",this._doOnClick,!1),window.addEventListener("keyup",this._doOnKeyUp,!1),window.addEventListener("unload",this._doOnUnload,!1)):(document.body.attachEvent("onclick",this._doOnClick,!1),document.body.attachEvent("onkeyup",this._doOnKeyUp,!1),document.body.attachEvent("onunload",this._doOnUnload,!1)),this.conf.ev_grid_click=window.dhx4.attachEvent("_onGridClick",function(n,i){t.p.contains(i.entBox)||(t._clearClick=!1,t._doOnClick(n));i=null}),this._findGrid=function(n,t){var i=!1;return typeof dhtmlXTabBar=="function"&&n instanceof window.dhtmlXTabBar&&n.forEachTab(function(n){var r=n.getAttachedObject();i==!1&&r!=null&&(i=i||r==t||this._findGrid(r),r=null)}),typeof dhtmlXForm=="function"&&n instanceof window.dhtmlXForm&&n.forEachItem(function(r){i!=!0&&n.getItemType(r)=="container"&&t.entBox==n.getContainer(r)&&(i=!0)}),n=null,i},this._idExists=function(n){for(var i=!1,t=0;t<this.conf.id.length;t++)i=this.conf.id[t]instanceof Array?i||this.conf.id[t][0]==n[0]&&this.conf.id[t][1]==n[1]:i||this.conf.id[t]==n;return i},this._IEDisp=window.dhx4.isIE6||document.compatMode!="CSS1Compat",this._IEHover=window.dhx4.isIE6==!0,this._IEHover&&(this._IEHoverInit=function(){this.p.onmouseover=function(){for(var n=event.srcElement;n!=this&&n._IEHover!=!0;)n=n.parentNode;if(n._IEHover){if(t._IEHoverTM&&window.clearTimeout(t._IEHoverTM),t._lastIEHover==n)return;t._IEHoverRender(n);n=null}};this.p.onmouseout=function(){t._IEHoverTM&&window.clearTimeout(t._IEHoverTM);t._IEHoverTM=window.setTimeout(function(){t._IEHoverRender(null)},1)};this._IEHoverRender=function(n){this._lastIEHover!=null&&this._lastIEHover.className.search(/tr_hover/gi)>=0&&(this._lastIEHover.className=this._lastIEHover.className.replace(/\s{0,}tr_hover/gi,""),this._lastIEHover=null);n!=null&&n.className.search(/tr_hover/gi)<0&&(n.className+=" tr_hover",t._lastIEHover=n)};this._IEHoverInited=!0},this._IEHoverClear=function(){this.p.onmouseover=null;this.p.onmouseout=null;this._IEHoverInited=!1}),this._IEFirstLast=window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8,this._enableIEVFix=function(){if(window.dhx4.isIE6||window.dhx4.isIE7){var n=this.attachEvent("onHide",function(){document.getElementById(this._nodeId).style.visibility="hidden"}),t=this.attachEvent("onShow",function(){document.getElementById(this._nodeId).style.visibility="visible"});this._nodeObjEv==null&&(this._nodeObjEv=[]);this._nodeObjEv.push(n,t)}},typeof dhtmlXToolbarObject=="function"&&this.conf.toolbar!=null&&this.conf.toolbar instanceof window.dhtmlXToolbarObject&&this.conf.id!=null&&(this.conf.id instanceof Array||(this.conf.id=[this.conf.id]),this.skinParent=this.conf.toolbar.conf.skin,this._doOnToolbarClick=function(n){for(var i=0;i<t.conf.id.length;i++)n==t.conf.id[i]&&n!=t._lastId&&(t.show(n),t._clearClick=!0)},typeof dhtmlXToolbarObject.prototype._getItemDim=="undefined"&&(dhtmlXToolbarObject.prototype._getItemDim=function(n){var t=this.objPull[this.idPrefix+n],i={left:window.dhx4.absLeft(t.obj),top:window.dhx4.absTop(t.obj),width:t.obj.offsetWidth+(t.arw?t.arw.offsetWidth:0),height:t.obj.offsetHeight};return t=null,i}),this.conf.toolbarEvent=this.conf.toolbar.attachEvent("onClick",this._doOnToolbarClick)),typeof dhtmlXRibbon=="function"&&this.conf.ribbon!=null&&this.conf.ribbon instanceof window.dhtmlXRibbon&&this.conf.id!=null&&(this.conf.id instanceof Array||(this.conf.id=[this.conf.id]),this.skinParent=this.conf.ribbon.conf.skin,this._doOnRibbonClick=function(n){for(var i=0;i<t.conf.id.length;i++)n==t.conf.id[i]&&n!=t._lastId&&(t.show(n),t._clearClick=!0)},typeof dhtmlXRibbon.prototype._getItemDim=="undefined"&&(dhtmlXRibbon.prototype._getItemDim=function(n){var t=this._items[n].base,i={left:window.dhx4.absLeft(t),top:window.dhx4.absTop(t),width:t.offsetWidth,height:t.offsetHeight};return t=null,i}),this.conf.ribbonEvent=this.conf.ribbon.attachEvent("_showPopup",this._doOnRibbonClick)),typeof dhtmlXForm=="function"&&this.conf.form!=null&&this.conf.form instanceof window.dhtmlXForm&&this.conf.id!=null&&(this.conf.id instanceof Array||(this.conf.id=[this.conf.id]),this.conf.mode||(this.mode="right"),this.skinParent=this.conf.form.skin,typeof dhtmlXForm.prototype._getItemDim=="undefined")){dhtmlXForm.prototype._getItemDim=function(n){return this.doWithItem(n,"_getDim")};for(i in dhtmlXForm.prototype.items)dhtmlXForm.prototype.items[i]._getDim=function(n){var t=n,i;return{ta:!0,pw:!0,se:!0,tp:!0,fl:!0,calendar:!0,colorpicker:1,editor:!0,container:!0}[n._type]&&(t=n.childNodes[n._ll?1:0].childNodes[0]),{ch:!0,ra:!0,btn2state:!0}[n._type]&&(t=n.childNodes[n._ll?1:0].childNodes[1]),{bt:!0,lb:!0,fs:!0}[n._type]&&(t=n.firstChild),{combo:!0}[n._type]&&(t=n._combo.DOMParent.firstChild),{image:!0}[n._type]&&(t=n.childNodes[n._ll?1:0].lastChild),{bl:!0}[n._type]&&(t=n.firstChild.firstChild.firstChild),i={left:window.dhx4.absLeft(t),top:window.dhx4.absTop(t),width:t.offsetWidth,height:t.offsetHeight},t=null,i}}return typeof dhtmlXSlider=="function"&&this.conf.slider!=null&&this.conf.slider instanceof window.dhtmlXSlider&&(this.conf.mode||(this.mode="top"),this.conf.slider_tm=null,this._sliderShow=function(){var n,i;t.conf.slider_tm&&window.clearTimeout(t.conf.slider_tm);n=t.conf.slider._r_actv;n!=null&&(i={left:window.dhx4.absLeft(n),top:window.dhx4.absTop(n),width:n.offsetWidth,height:n.offsetHeight},t.show(i.left,i.top,i.width,i.height),n=null)},this._sliderHide=function(){t.conf.slider_tm=window.setTimeout(function(){t.hide()},200)},this.conf.slider_events=[this.conf.slider.attachEvent("onMouseDown",this._sliderShow),this.conf.slider.attachEvent("onMouseUp",this._sliderHide),this.conf.slider.attachEvent("onChange",this._sliderShow)]),this.setSkin(this.skinParent||this.conf.skin||window.dhx4.skin||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_popup")||"material"),this}function dhtmlXMenuObject(n,t){var i=this,u,r;if(this.conf={skin:t||window.dhx4.skin||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxmenu")||"material",mode:"web",align:"left",is_touched:!1,selected:-1,last_click:-1,fixed_pos:!1,rtl:!1,icons_path:"",icons_css:!1,arrow_ff_fix:navigator.userAgent.indexOf("MSIE")>=0&&document.compatMode=="BackCompat",live_id:window.dhx4.newId(),tags:{root:"menu",item:"item",text_ext:"itemtext",userdata:"userdata",tooltip:"tooltip",hotkey:"hotkey",href:"href"},autoload:{},hide_tm:{},top_mode:!0,top_tmtime:200,v_enabled:!1,v:{x1:null,x2:null,y1:null,y2:null},dir_toplv:"bottom",dir_sublv:"right",auto_overflow:!1,overflow_limit:0,of_utm:null,of_utime:20,of_ustep:3,of_dtm:null,of_dtime:20,of_dstep:3,of_ah:{dhx_skyblue:24,dhx_web:25,dhx_terrace:27,material:25},of_ih:{dhx_skyblue:24,dhx_web:24,dhx_terrace:24,material:30},tm_sec:400,tm_handler:null,dload:!1,dload_url:"",dload_icon:!1,dload_params:{action:"loadMenu"},dload_pid:"parentId",tl_botmarg:1,tl_rmarg:0,tl_ofsleft:1,context:!1,ctx_zoneid:!1,ctx_autoshow:!0,ctx_autohide:!0,ctx_hideall:!0,ctx_zones:{},ctx_baseid:null,selected_sub:[],opened_poly:[]},typeof n=="object"&&n!=null&&typeof n.tagName=="undefined"){(n.icons_path!=null||n.icon_path!=null)&&(this.conf.icons_path=n.icons_path||n.icon_path);n.skin!=null&&(this.conf.skin=n.skin);n.visible_area&&(this.conf.v_enabled=!0,this.conf.v={x1:n.visible_area.x1,x2:n.visible_area.x2,y1:n.visible_area.y1,y2:n.visible_area.y2});for(r in{json:1,xml:1,items:1,top_text:1,align:1,open_mode:1,overflow:1,dynamic:1,dynamic_icon:1,context:1,onload:1,onclick:1,oncheckboxclick:1,onradioclick:1,iconset:1})n[r]!=null&&(this.conf.autoload[r]=n[r]);n=n.parent}n==null?this.base=document.body:(u=typeof n=="string"?document.getElementById(n):n,u!=null?(this.base=u,this.base.id||(this.base.id="menuBaseId_"+(new Date).getTime()),this.base.className+=" dhtmlxMenu_"+this.conf.skin+"_Middle dir_left",this.base._autoSkinUpdate=!0,this.base.oncontextmenu&&(this.base._oldContextMenuHandler=this.base.oncontextmenu),this.conf.ctx_baseid=this.base,this.base.onselectstart=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1},this.base.oncontextmenu=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1}):this.base=document.body);this.idPrefix="";this.topId="dhxWebMenuTopId";this.idPull={};this.itemPull={};this.userData={};this.radio={};this.setSkin=function(n){var i=this.conf.skin,t;this.conf.skin=n;switch(this.conf.skin){case"dhx_skyblue":case"dhx_web":this.conf.tl_botmarg=2;this.conf.tl_rmarg=1;this.conf.tl_ofsleft=1;break;case"dhx_terrace":case"material":this.conf.tl_botmarg=0;this.conf.tl_rmarg=0;this.conf.tl_ofsleft=0}this.base._autoSkinUpdate&&(this.base.className=this.base.className.replace("dhtmlxMenu_"+i+"_Middle","")+" dhtmlxMenu_"+this.conf.skin+"_Middle");for(t in this.idPull)this.idPull[t].className=String(this.idPull[t].className).replace(i,this.conf.skin)};this.setSkin(this.conf.skin);this._addSubItemToSelected=function(n,t){for(var r=!0,i=0;i<this.conf.selected_sub.length;i++)this.conf.selected_sub[i][0]==n&&this.conf.selected_sub[i][1]==t&&(r=!1);return r==!0&&this.conf.selected_sub.push([n,t]),r};this._removeSubItemFromSelected=function(n,t){for(var r=[],u=!1,i=0;i<this.conf.selected_sub.length;i++)this.conf.selected_sub[i][0]==n&&this.conf.selected_sub[i][1]==t?u=!0:r[r.length]=this.conf.selected_sub[i];return u==!0&&(this.conf.selected_sub=r),u};this._getSubItemToDeselectByPolygon=function(n){for(var u,r,i=[],t=0;t<this.conf.selected_sub.length;t++)if(this.conf.selected_sub[t][1]==n){for(i[i.length]=this.conf.selected_sub[t][0],i=i.concat(this._getSubItemToDeselectByPolygon(this.conf.selected_sub[t][0])),u=!0,r=0;r<this.conf.opened_poly.length;r++)this.conf.opened_poly[r]==this.conf.selected_sub[t][0]&&(u=!1);u==!0&&(this.conf.opened_poly[this.conf.opened_poly.length]=this.conf.selected_sub[t][0]);this.conf.selected_sub[t][0]=-1;this.conf.selected_sub[t][1]=-1}return i};this._hidePolygon=function(n){if(this.idPull["polygon_"+n]!=null){if(this.idPull["polygon_"+n]._zId!=null&&window.dhx4.zim.clear(this.idPull["polygon_"+n]._zId),typeof this._menuEffect!="undefined"&&this._menuEffect!==!1)this._hidePolygonEffect("polygon_"+n);else{if(this.idPull["polygon_"+n].style.display=="none")return;this.idPull["polygon_"+n].style.display="none";this.idPull["arrowup_"+n]!=null&&(this.idPull["arrowup_"+n].style.display="none");this.idPull["arrowdown_"+n]!=null&&(this.idPull["arrowdown_"+n].style.display="none");this._updateItemComplexState(n,!0,!1);window.dhx4.isIE6&&this.idPull["polygon_"+n+"_ie6cover"]!=null&&(this.idPull["polygon_"+n+"_ie6cover"].style.display="none")}n=String(n).replace(this.idPrefix,"");n==this.topId&&(n=null);this.callEvent("onHide",[n]);n!=null&&this.conf.skin=="dhx_terrace"&&this.itemPull[this.idPrefix+n].parent==this.idPrefix+this.topId&&this._improveTerraceButton(this.idPrefix+n,!0)}};this._showPolygon=function(n,t){var y=this._countVisiblePolygonItems(n),i,b,k,s,v,f,h;if(y!=0&&(i="polygon_"+n,this.idPull[i]!=null&&this.idPull[n]!=null)){if(this.conf.top_mode&&this.conf.mode=="web"&&!this.conf.context&&!this.idPull[n]._mouseOver&&t==this.conf.dir_toplv)return;this.conf.fixed_pos||this._autoDetectVisibleArea();var g=0,nt=0,c=null,o=null;this.idPull[i]._zId==null&&(this.idPull[i]._zId=window.dhx4.newId());this.idPull[i]._zInd=window.dhx4.zim.reserve(this.idPull[i]._zId);this.idPull[i].style.visibility="hidden";this.idPull[i].style.left="0px";this.idPull[i].style.top="0px";this.idPull[i].style.display="";this.idPull[i].style.zIndex=this.idPull[i]._zInd;this.conf.auto_overflow&&(this.idPull[i].childNodes[1].childNodes[0].offsetHeight>this.conf.v.y2-this.conf.v.y1?(b=Math.max(Math.floor((this.conf.v.y2-this.conf.v.y1-this.conf.of_ah[this.conf.skin]*2)/this.conf.of_ih[this.conf.skin]),1),this.conf.overflow_limit=b):(this.conf.overflow_limit=0,this.idPull["arrowup_"+n]!=null&&this._removeUpArrow(String(n).replace(this.idPrefix,"")),this.idPull["arrowdown_"+n]!=null&&this._removeDownArrow(String(n).replace(this.idPrefix,""))));this.conf.overflow_limit>0&&this.conf.overflow_limit<y&&(this.idPull["arrowup_"+n]==null&&this._addUpArrow(String(n).replace(this.idPrefix,"")),this.idPull["arrowdown_"+n]==null&&this._addDownArrow(String(n).replace(this.idPrefix,"")),c=this.idPull["arrowup_"+n],c.style.display="none",o=this.idPull["arrowdown_"+n],o.style.display="none");this.conf.overflow_limit>0&&this.conf.overflow_limit<y?(this.idPull[i].childNodes[1].style.height=this.conf.of_ih[this.conf.skin]*this.conf.overflow_limit+"px",c.style.width=o.style.width=this.idPull[i].childNodes[1].style.width=this.idPull[i].childNodes[1].childNodes[0].offsetWidth+"px",this.idPull[i].childNodes[1].scrollTop=0,c.style.display="",g=c.offsetHeight,o.style.display="",nt=o.offsetHeight):(this.idPull[i].childNodes[1].style.height="",this.idPull[i].childNodes[1].style.width="");this.itemPull[n]!=null?k="polygon_"+this.itemPull[n].parent:this.conf.context&&(k=this.idPull[this.idPrefix+this.topId]);var e=this.idPull[n].tagName!=null?window.dhx4.absLeft(this.idPull[n]):this.idPull[n][0],l=this.idPull[n].tagName!=null?window.dhx4.absTop(this.idPull[n]):this.idPull[n][1],a=this.idPull[n].tagName!=null?this.idPull[n].offsetWidth:0,d=this.idPull[n].tagName!=null?this.idPull[n].offsetHeight:0,r=0,u=0,p=this.idPull[i].offsetWidth,w=this.idPull[i].offsetHeight;t=="bottom"&&(r=this.conf.rtl?e+(a!=null?a:0)-p:this.conf.align=="right"?e+a-p:e-1+(t==this.conf.dir_toplv?this.conf.tl_rmarg:0),u=l-1+d+this.conf.tl_botmarg);t=="right"&&(r=e+a-1,u=l+2);t=="left"&&(r=e-this.idPull[i].offsetWidth+2,u=l+2);t=="top"&&(r=e-1,u=l-w+2);this.conf.fixed_pos?(s=65536,v=65536):(s=this.conf.v.x2!=null?this.conf.v.x2:0,v=this.conf.v.y2!=null?this.conf.v.y2:0,s==0&&(window.innerWidth?(s=window.innerWidth,v=window.innerHeight):(s=document.body.offsetWidth,v=document.body.scrollHeight)));r+p>s&&!this.conf.rtl&&(r=e-p+2);r<this.conf.v.x1&&this.conf.rtl&&(r=e+a-2);r<0&&(r=0);u+w>v&&this.conf.v.y2!=null&&(u=Math.max(l+d-w+2,this.conf.v_enabled?this.conf.v.y1+2:2),this.conf.context&&this.idPrefix+this.topId==n&&o!=null&&(u=u-2),this.itemPull[n]==null||this.conf.context||this.itemPull[n].parent==this.idPrefix+this.topId&&(u=u-this.base.offsetHeight));this.idPull[i].style.left=r+"px";this.idPull[i].style.top=u+"px";typeof this._menuEffect!="undefined"&&this._menuEffect!==!1?this._showPolygonEffect(i):(this.idPull[i].style.visibility="",this.conf.overflow_limit>0&&this.conf.overflow_limit<y&&(this.idPull[i].childNodes[1].scrollTop=0,this._checkArrowsState(n)),window.dhx4.isIE6&&(f=i+"_ie6cover",this.idPull[f]==null&&(h=document.createElement("IFRAME"),h.className="dhtmlxMenu_IE6CoverFix_"+this.conf.skin,h.frameBorder=0,h.setAttribute("src","javascript:false;"),document.body.insertBefore(h,document.body.firstChild),this.idPull[f]=h),this.idPull[f].style.left=r+"px",this.idPull[f].style.top=u+"px",this.idPull[f].style.width=this.idPull[i].offsetWidth+"px",this.idPull[f].style.height=this.idPull[i].offsetHeight+"px",this.idPull[f].style.zIndex=this.idPull[i].style.zIndex-1,this.idPull[f].style.display=""));n=String(n).replace(this.idPrefix,"");n==this.topId&&(n=null);this.callEvent("onShow",[n]);n!=null&&this.conf.skin=="dhx_terrace"&&this.itemPull[this.idPrefix+n].parent==this.idPrefix+this.topId&&this._improveTerraceButton(this.idPrefix+n,!1)}};this._redistribSubLevelSelection=function(n,t){for(var r,i,u;this.conf.opened_poly.length>0;)this.conf.opened_poly.pop();for(r=this._getSubItemToDeselectByPolygon(t),this._removeSubItemFromSelected(-1,-1),i=0;i<r.length;i++)this.idPull[r[i]]!=null&&r[i]!=n&&this.itemPull[r[i]].state=="enabled"&&(this.idPull[r[i]].className="sub_item");for(i=0;i<this.conf.opened_poly.length;i++)this.conf.opened_poly[i]!=t&&this._hidePolygon(this.conf.opened_poly[i]);this.itemPull[n].state=="enabled"&&(this.idPull[n].className="sub_item_selected",this.itemPull[n].complex&&this.conf.dload&&this.itemPull[n].loaded=="no"&&(this.conf.dload_icon==!0&&this._updateLoaderIcon(n,!0),this.itemPull[n].loaded="get",u=n.replace(this.idPrefix,""),this._dhxdataload.onBeforeXLS=function(){var n={params:{}},t;n.params[this.conf.dload_pid]=u;for(t in this.conf.dload_params)n.params[t]=this.conf.dload_params[t];return n},this.loadStruct(this.conf.dload_url)),(this.itemPull[n].complex||this.conf.dload&&this.itemPull[n].loaded=="yes")&&this.itemPull[n].complex&&this.idPull["polygon_"+n]!=null&&(this._updateItemComplexState(n,!0,!0),this._showPolygon(n,this.conf.dir_sublv)),this._addSubItemToSelected(n,t),this.conf.selected=n)};this._doOnClick=function(n,t,i){var r,f,o,e,s,u;if(this.conf.last_click=n,this.itemPull[this.idPrefix+n].href_link!=null&&this.itemPull[this.idPrefix+n].state=="enabled"){if(r=document.createElement("FORM"),f=String(this.itemPull[this.idPrefix+n].href_link).split("?"),r.action=f[0],f[1]!=null)for(o=String(f[1]).split("&"),e=0;e<o.length;e++)s=String(o[e]).split("="),u=document.createElement("INPUT"),u.type="hidden",u.name=s[0]||"",u.value=s[1]||"",r.appendChild(u);this.itemPull[this.idPrefix+n].href_target!=null&&(r.target=this.itemPull[this.idPrefix+n].href_target);r.style.display="none";document.body.appendChild(r);r.submit();r!=null&&(document.body.removeChild(r),r=null);return}if(t.charAt(0)!="c"&&t.charAt(1)!="d"&&t.charAt(2)!="s"){if(this.checkEvent("onClick"))this.callEvent("onClick",[n,this.conf.ctx_zoneid,i]);else if(t.charAt(1)=="d"||this.conf.mode=="win"&&t.charAt(2)=="t")return;this.conf.context&&this._isContextMenuVisible()&&this.conf.ctx_autohide?this._hideContextMenu():this._clearAndHide&&this._clearAndHide()}};this._doOnTouchMenu=function(n){this.conf.is_touched==!1&&(this.conf.is_touched=!0,this.checkEvent("onTouch")&&this.callEvent("onTouch",[n]))};this._searchMenuNode=function(n,t){for(var u,r=[],i=0;i<t.length;i++)typeof t[i]=="object"&&(t[i].length==5&&typeof t[i][0]!="object"&&t[i][0].replace(this.idPrefix,"")==n&&i==0&&(r=t),u=this._searchMenuNode(n,t[i]),u.length>0&&(r=u));return r};this._getMenuNodes=function(n){var t=[];for(var i in this.itemPull)this.itemPull[i].parent==n&&(t[t.length]=i);return t};this._genStr=function(n){for(var t="dhxId_",i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",r=0;r<n;r++)t+=i.charAt(Math.round(Math.random()*(i.length-1)));return t};this.getItemType=function(n){return(n=this.idPrefix+n,this.itemPull[n]==null)?null:this.itemPull[n].type};this.forEachItem=function(n){for(var t in this.itemPull)n(String(t).replace(this.idPrefix,""))};this._clearAndHide=function(){var t,n;for(i.conf.selected=-1,i.conf.last_click=-1;i.conf.opened_poly.length>0;)i.conf.opened_poly.pop();for(t=0;t<i.conf.selected_sub.length;t++)n=i.conf.selected_sub[t][0],i.idPull[n]!=null&&i.itemPull[n].state=="enabled"&&(i.idPull[n].className=="sub_item_selected"&&(i.idPull[n].className="sub_item"),i.idPull[n].className=="dhtmlxMenu_"+i.conf.skin+"_TopLevel_Item_Selected"&&(i.idPull[n].className=i.itemPull[n].cssNormal!=null?i.itemPull[n].cssNormal:"dhtmlxMenu_"+i.conf.skin+"_TopLevel_Item_Normal")),i._hidePolygon(n);i.conf.is_touched=!1;i.conf.context&&i.conf.ctx_hideall&&i._hidePolygon(i.idPrefix+i.topId)};this._showSubLevelItem=function(n,t){document.getElementById("arrow_"+this.idPrefix+n)!=null&&(document.getElementById("arrow_"+this.idPrefix+n).style.display=t?"none":"");document.getElementById("image_"+this.idPrefix+n)!=null&&(document.getElementById("image_"+this.idPrefix+n).style.display=t?"none":"");document.getElementById(this.idPrefix+n)!=null&&(document.getElementById(this.idPrefix+n).style.display=t?"":"none")};this._hideSubLevelItem=function(n){this._showSubLevelItem(n,!0)};this.idPrefix=this._genStr(12)+"_";this._bodyClick=function(n){(n=n||event,n.button==2||window.dhx4.isOpera&&n.ctrlKey==!0)||(i.conf.context?i.conf.ctx_autohide&&(!window.dhx4.isOpera||i._isContextMenuVisible()&&window.dhx4.isOpera)&&i._hideContextMenu():i._clearAndHide&&i._clearAndHide())};this._bodyContext=function(n){var u,r,t;if(n=n||event,u=String((n.srcElement||n.target).className),u.search("dhtmlxMenu")==-1||u.search("SubLevelArea")==-1){for(r=!0,t=n.target||n.srcElement;t!=null;)t.id!=null&&i.isContextZone(t.id)&&(r=!1),t==document.body&&(r=!1),t=t.parentNode;r&&i.hideContextMenu()}};typeof addEventListener!="undefined"?(window.addEventListener("click",this._bodyClick,!1),window.addEventListener("contextmenu",this._bodyContext,!1)):(document.body.attachEvent("onclick",this._bodyClick),document.body.attachEvent("oncontextmenu",this._bodyContext));dhx4.attachEvent("_onGridClick",this._bodyClick);this.unload=function(){var n;window.dhx4._eventable(this,"clear");dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]=null;try{delete dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]}catch(t){}if(this.conf.live_id=null,typeof addEventListener=="function"?(window.removeEventListener("click",this._bodyClick,!1),window.removeEventListener("contextmenu",this._bodyContext,!1)):(document.body.detachEvent("onclick",this._bodyClick),document.body.detachEvent("oncontextmenu",this._bodyContext)),this._bodyClick=null,this._bodyContext=null,this.removeItem(this.idPrefix+this.topId,!0),this.itemPull=null,this.idPull=null,this.conf.context)for(n in this.conf.ctx_zones)this.removeContextZone(n);this.cont!=null&&(this.cont.className="",this.cont.parentNode.removeChild(this.cont),this.cont=null);this.base!=null&&(this.conf.context||(this.base.className=""),this.conf.context||(this.base.oncontextmenu=this.base._oldContextMenuHandler||null),this.base.onselectstart=null,this.base=null);for(n in this)this[n]=null;i=null};dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]=this;window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson",this.conf.tags.root,{struct:!0});window.dhx4._eventable(this);window.dhx4.s2b(this.conf.autoload.context)==!0&&this.renderAsContextMenu();this.conf.autoload.iconset=="awesome"&&(this.conf.icons_css=!0);this.conf.autoload.dynamic!=null?this.enableDynamicLoading(this.conf.autoload.dynamic,window.dhx4.s2b(this.conf.autoload.dynamic_icon)):this.conf.autoload.items!=null?this.loadStruct(this.conf.autoload.items,this.conf.autoload.onload):this.conf.autoload.json!=null?this.loadStruct(this.conf.autoload.json,this.conf.autoload.onload):this.conf.autoload.xml!=null&&this.loadStruct(this.conf.autoload.xml,this.conf.autoload.onload);for(r in{onclick:1,oncheckboxclick:1,onradioclick:1})this.conf.autoload[r]!=null&&(typeof this.conf.autoload[r]=="function"?this.attachEvent(r,this.conf.autoload[r]):typeof window[this.conf.autoload[r]]=="function"&&this.attachEvent(r,window[this.conf.autoload[r]]));this.conf.autoload.top_text!=null&&this.setTopText(this.conf.autoload.top_text);this.conf.autoload.align!=null&&this.setAlign(this.conf.autoload.align);this.conf.autoload.open_mode!=null&&this.setOpenMode(this.conf.autoload.open_mode);this.conf.autoload.overflow!=null&&this.setOverflowHeight(this.conf.autoload.overflow);for(r in this.conf.autoload)this.conf.autoload[r]=null,delete this.conf.autoload[r];return this.conf.autoload=null,this}function dhtmlXRibbon(n){var t=this,r,i;this.conf={type:"ribbon",icons_path:n&&n.icons_path?n.icons_path:"",icons_css:n&&n.iconsset=="awesome",arrows_mode:n&&n.arrows_mode?n.arrows_mode:null,skin:"dhx_skyblue"};this._eventHandlers={};this._base=null;this._items={};this._tabbar=null;this.childIds=[];typeof n=="string"?i=n:n&&n.tagName?i=n:n&&n.parent&&(n.parent.tagName||typeof n.parent=="string")&&(i=n.parent);this._doOnHighlight0=function(n){n=n||event;var u=n.target||n.srcElement,r=t._findItemByNode(u),i=t._items[r._dhx_ribbonId];if(!i.conf.disable){if(t.items[i.type]&&typeof t.items[i.type].mouseover=="function"&&t.items[i.type].mouseover(i,t,n)!=!0)return!1;/dhxrb_highlight0/.test(r.className)||(r.className+=" dhxrb_highlight0")}};this._doOffHighlight0=function(n){n=n||event;var u=n.target||n.srcElement,i=t._findItemByNode(u),r=t._items[i._dhx_ribbonId];if(!r.conf.disable){if(t.items[r.type]&&typeof t.items[r.type].mouseout=="function"&&t.items[r.type].mouseout(r,t,n)!=!0)return!1;/dhxrb_highlight1/.test(i.className)&&(i.className=i.className.replace(/\s?dhxrb_highlight1/,""));/dhxrb_highlight0/.test(i.className)&&(i.className=i.className.replace(/\s?dhxrb_highlight0/,""))}};this._doOnHighlight1=function(n){n=n||event;var u=n.target||n.srcElement,r=t._findItemByNode(u),i=t._items[r._dhx_ribbonId];if(!i.conf.disable){if(t.callEvent("_showPopup",[i.id]),t.items[i.type]&&typeof t.items[i.type].mousedown=="function"&&t.items[i.type].mousedown(i,t,n)!=!0)return!1;/dhxrb_highlight1/.test(r.className)||(r.className+=" dhxrb_highlight1")}};this._doOffHighlight1=function(n){n=n||event;var u=n.target||n.srcElement,r=t._findItemByNode(u),i=t._items[r._dhx_ribbonId];if(!i.conf.disable){if(t.items[i.type]&&typeof t.items[i.type].mouseup=="function"&&t.items[i.type].mouseup(i,t,n)!=!0)return!1;/dhxrb_highlight1/.test(r.className)&&(r.className=r.className.replace(/\s?dhxrb_highlight1/,""))}};this._doOnClick=function(n){n=n||event;var r=n.target||n.srcElement,u=t._findItemByNode(r),i=t._items[u._dhx_ribbonId];i.conf.disable||t.items[i.type]&&typeof t.items[i.type].click=="function"&&t.items[i.type].click(i,t,n)};this._doOnFocus=function(n){n=n||event;var r=n.target||n.srcElement,u=t._findItemByNode(r),i=t._items[u._dhx_ribbonId];i.conf.disable||(t.callEvent("_showPopup",[i.id]),t.items[i.type]&&typeof t.items[i.type].focus=="function"&&t.items[i.type].focus(i,t,n))};this._doOnBlur=function(n){n=n||event;var r=n.target||n.srcElement,u=t._findItemByNode(r),i=t._items[u._dhx_ribbonId];i.conf.disable||t.items[i.type]&&typeof t.items[i.type].blur=="function"&&t.items[i.type].blur(i,t,n)};this._doOnChange=function(n){n=n||event;var r=n.target||n.srcElement,u=t._findItemByNode(r),i=t._items[u._dhx_ribbonId];i.conf.disable||t.items[i.type]&&typeof t.items[i.type].change=="function"&&t.items[i.type].change(i,t,n)};this._doOnKeydown=function(n){n=n||event;var r=n.target||n.srcElement,u=t._findItemByNode(r),i=t._items[u._dhx_ribbonId];i.conf.disable||t.items[i.type]&&typeof t.items[i.type].keydown=="function"&&t.items[i.type].keydown(i,t,n)};this._tabCustomApi={enable:function(n,i){var u=null,r;if(i=i||!1,i!=!0)for(u=t._items[this._idd],r=0;r<u.childIds.length;r++)t.enable(u.childIds[r]);return t._tabOriginalApi.enable.apply(this,[n])},disable:function(n,i){var u=null,r;if(i!=!1)for(u=t._items[this._idd],r=0;r<u.childIds.length;r++)t.disable(u.childIds[r]);return t._tabOriginalApi.disable.apply(this,[n])},close:function(n){var r=t._items[this._idd],i;t._removeTab(r);t._tabOriginalApi.close.apply(this,[n]);for(i in t._tabOriginalApi)this[i]=null}};this._attachEventTabbar=function(){this._tabbar.attachEvent("onSelect",function(){return t.callEvent("onSelect",arguments)});this._tabbar.attachEvent("onTabClick",function(){return t.callEvent("onTabClick",arguments)});this._tabbar.attachEvent("onTabClose",function(){return t.callEvent("onTabClose",arguments)})};typeof i=="string"?this._base=document.getElementById(i):i&&i.tagName?this._base=i:(this._base=document.createElement("div"),this._base._dhx_remove=!0,document.body.firstChild?document.body.insertBefore(this._base,document.body.firstChild):document.body.appendChild(this._base));r=dhx4.skin||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||dhx4.skinDetect("dhtmlxribbon")||"material";typeof n=="object"&&n.skin&&(r=n.skin);this.setSkin(r);dhx4._eventable(this);dhx4._enableDataLoading(this,"_renderData","_xmlToJson","ribbon",{struct:!0});this.attachEvent("_onHeightChanged",function(){this.conf.inited=!0});this._base.className+=" dhxrb_without_tabbar";this._base.innerHTML="<div class='dhxrb_background_area'><\/div>";n!=null&&(n.json?this.loadStruct(n.json,n.onload):n.xml&&this.loadStruct(n.xml,n.onload),this._renderData(n));this.unload=function(){for(var r,i=[],n=0;n<this.childIds.length;n++)i.push(this.childIds[n]);for(dhx4._enableDataLoading(this,null,null,null,"clear"),dhx4._eventable(this,"clear"),n=0;n<i.length;n++)this._items[i[n]].type=="tab"?this.tabs(i[n]).close(!1):this.removeItem(i[n]);this._tabbar&&(this._tabbar.unload(),this._tabbar=null);this._base.innerHTML="";this._base._dhx_remove?this._base.parentNode.removeChild(this._base):this._base.className=this._base.className.replace(/\s?(dhtmlx|dhxrb)(\S*)/ig,"");for(r in this)this[r]=null;t=null}}function dhtmlXToolbarObject(n,t){var i=this;for(this.conf={skin:t||window.dhx4.skin||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtoolbar")||"material",align:"left",align_autostart:"left",icons_path:"",icons_css:!1,iconSize:18,sel_ofs_x:0,sel_ofs_y:0,xml_autoload:null,items_autoload:null,cssShadow:dhx4.isIE6||dhx4.isIE7||dhx4.isIE8?"":" dhx_toolbar_shadow"},typeof n=="object"&&n!=null&&typeof n.tagName=="undefined"&&((n.icons_path!=null||n.icon_path!=null)&&(this.conf.icons_path=n.icons_path||n.icon_path),n.icons_size!=null&&(this.conf.icons_size_autoload=n.icons_size),n.iconset!=null&&(this.conf.icons_css=n.iconset=="awesome"),n.json!=null&&(this.conf.json_autoload=n.json),n.xml!=null&&(this.conf.xml_autoload=n.xml),n.onload!=null&&(this.conf.onload_autoload=n.onload),(n.onclick!=null||n.onClick!=null)&&(this.conf.auto_onclick=n.onclick||n.onClick),n.items!=null&&(this.conf.items_autoload=n.items),n.skin!=null&&(this.conf.skin=n.skin),n.align!=null&&(this.conf.align_autostart=n.align),n=n.parent),this.cont=typeof n!="object"?document.getElementById(n):n;this.cont.childNodes.length>0;)this.cont.removeChild(this.cont.childNodes[0]);return n=null,this.cont.dir="ltr",this.base=document.createElement("DIV"),this.base.className="dhxtoolbar_float_left",this.cont.appendChild(this.base),this.cont.ontouchstart=function(n){return(n=n||event,String(n.target.tagName||"").toLowerCase()=="input")?!0:(n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,!1)},this.setSkin(this.conf.skin),this.objPull={},this.anyUsed=null,this._genStr=function(n){for(var t="dhxId_",i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",r=0;r<n;r++)t+=i.charAt(Math.round(Math.random()*(i.length-1)));return t},this.rootTypes=["button","buttonSelect","buttonTwoState","separator","label","slider","text","buttonInput"],this.idPrefix=this._genStr(12),window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson","toolbar",{struct:!0}),window.dhx4._eventable(this),this._getObj=function(n,t){for(var r=null,i=0;i<n.childNodes.length;i++)n.childNodes[i].tagName!=null&&String(n.childNodes[i].tagName).toLowerCase()==String(t).toLowerCase()&&(r=n.childNodes[i]);return r},this._addImgObj=function(n){var t=document.createElement(this.conf.icons_css==!0?"I":"IMG");return n.childNodes.length>0?n.insertBefore(t,n.childNodes[0]):n.appendChild(t),t},this._setItemImage=function(n,t,i){var r;(i==!0?n.imgEn=t:n.imgDis=t,(n.state||i!=!0)&&(!n.state||i!=!1))&&(this.conf.icons_css==!0?(r=this._getObj(n.obj,"i"),r==null&&(r=this._addImgObj(n.obj)),r.className=this.conf.icons_path+t):(r=this._getObj(n.obj,"img"),r==null&&(r=this._addImgObj(n.obj)),r.src=this.conf.icons_path+t))},this._clearItemImage=function(n,t){if(t==!0?n.imgEn="":n.imgDis="",(n.state||t!=!0)&&(!n.state||t!=!1)){var i=this._getObj(n.obj,this.conf.icons_css?"i":"img");i!=null&&i.parentNode.removeChild(i)}},this._setItemText=function(n,t){var i=this._getObj(n.obj,"div");if(t==null||t.length==0){i!=null&&i.parentNode.removeChild(i);return}i==null&&(i=document.createElement("DIV"),i.className="dhxtoolbar_text",n.obj.appendChild(i));i.innerHTML=t},this._getItemText=function(n){var t=this._getObj(n.obj,"div");return t!=null?t.innerHTML:""},this._enableItem=function(n){if(!n.state){n.state=!0;this.objPull[n.id].type=="buttonTwoState"&&this.objPull[n.id].obj.pressed==!0?(n.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres",n.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"):(n.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",n.obj.renderAs=n.obj.className);n.arw&&(n.arw.className=String(n.obj.className).replace("btn","arw"));var t=this._getObj(n.obj,this.conf.icons_css?"i":"img");n.imgEn!=""?(t==null&&(t=this._addImgObj(n.obj)),t[this.conf.icons_css?"className":"src"]=this.conf.icons_path+n.imgEn):t!=null&&t.parentNode.removeChild(t)}},this._disableItem=function(n){if(n.state){n.state=!1;n.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.objPull[n.id].type=="buttonTwoState"&&n.obj.pressed?"pres_":"")+"dis";n.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def";n.arw&&(n.arw.className=String(n.obj.className).replace("btn","arw"));var t=this._getObj(n.obj,this.conf.icons_css?"i":"img");n.imgDis!=""?(t==null&&(t=this._addImgObj(n.obj)),t[this.conf.icons_css?"className":"src"]=this.conf.icons_path+n.imgDis):t!=null&&t.parentNode.removeChild(t);n.polygon!=null&&n.polygon.style.display!="none"&&(window.dhx4.zim.clear(n.polygon._idd),n.polygon.style.display="none",n.polygon._ie6cover&&(n.polygon._ie6cover.style.display="none"),this.conf.skin=="dhx_terrace"&&this._improveTerraceButtonSelect(n.id,!0),this.callEvent("onButtonSelectHide",[n.obj.idd]));this.anyUsed=null}},this.clearAll=function(){for(var n in this.objPull)this._removeItem(String(n).replace(this.idPrefix,""));this._spacer=null},this._doOnClick=function(){i&&i.forEachItem&&i.forEachItem(function(n){if(i.objPull[i.idPrefix+n].type=="buttonSelect"){var t=i.objPull[i.idPrefix+n];t.arw._skip===!0?t.arw._skip=!1:t.polygon.style.display!="none"&&(t.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",t.obj.className=t.obj.renderAs,t.arw.className=String(t.obj.renderAs).replace("btn","arw"),i.anyUsed=null,i.conf.touch_id=null,window.dhx4.zim.clear(t.polygon._idd),t.polygon.style.display="none",t.polygon._ie6cover&&(t.polygon._ie6cover.style.display="none"),i.conf.skin=="dhx_terrace"&&i._improveTerraceButtonSelect(t.id,!0),i.callEvent("onButtonSelectHide",[t.obj.idd]))}})},typeof addEventListener!="undefined"?(window.addEventListener("mousedown",this._doOnClick,!1),window.addEventListener("touchstart",this._doOnClick,!1)):document.body.attachEvent("onmousedown",this._doOnClick),this.conf.icons_size_autoload!=null&&(this.setIconSize(this.conf.icons_size_autoload),this.conf.icons_size_autoload=null),this.conf.items_autoload!=null?(this.loadStruct(this.conf.items_autoload,this.conf.onload_autoload),this.conf.items_autoload=null):this.conf.json_autoload!=null?(this.loadStruct(this.conf.json_autoload,this.conf.onload_autoload),this.conf.json_autoload=null):this.conf.xml_autoload!=null&&(this.loadStruct(this.conf.xml_autoload,this.conf.onload_autoload),this.conf.xml_autoload=null),this.conf.align_autostart!=this.conf.align&&(this.setAlign(this.conf.align_autostart),this.conf.align_autostart=null),typeof this.conf.auto_onclick=="function"?this.attachEvent("onClick",this.conf.auto_onclick):typeof this.conf.auto_onclick=="string"&&typeof window[this.conf.auto_onclick]=="function"&&this.attachEvent("onClick",window[this.conf.auto_onclick]),this}function dhtmlXEditor(n,t){var i=this,u,r;for(this.conf={content:"",contentHTML:"",resizeTM:null,resizeTMTime:100,roMode:!1,toolbar:!1,iconsPath:"",evs:["focus","blur","keydown","keyup","keypress","mouseup","mousedown","click","touchend"],iOSfix:navigator.userAgent.match(/Mobile/gi)!=null&&navigator.userAgent.match(/iPad/gi)!=null&&navigator.userAgent.match(/AppleWebKit/gi)!=null,extra_css:"",font:{family:"Tahoma",size:"12px",color:"black"}},this._doOnFocusChanged=null,this._doOnAccess=null,typeof n=="object"&&n!=null&&n.tagName==null&&(t=n.skin,n.content!=null&&(this.conf.content=n.content),n.contentHTML!=null&&(this.conf.contentHTML=n.contentHTML),n.iconsPath!=null&&(this.conf.iconsPath=n.iconsPath),n.extraCss!=null&&(this.conf.extra_css=n.extraCss),n.toolbar!=null&&(this.conf.toolbar=window.dhx4.s2b(n.toolbar)),n.onFocusChanged!=null&&(this._doOnFocusChanged=n.onFocusChanged),n.onAccess!=null&&(this._doOnAccess=n.onAccess),n=n.parent),this.conf.skin=t||window.dhx4.skin||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxeditor")||"material",typeof n=="string"&&(n=document.getElementById(n)),this.base=n,this.base.className+=" dhxeditor_"+this.conf.skin;this.base.childNodes.length>0;)this.base.removeChild(this.base.childNodes[0]);return u=window.dhx4.isIE?this.base.currentStyle.position:window.getComputedStyle!=null?window.getComputedStyle(this.base,null).getPropertyValue("position"):"",u=="relative"||u=="absolute"||(this.base.style.position="relative"),this.cell=new dhtmlXEditorCell(window.dhx4.newId(),this),this.base.appendChild(this.cell.cell),this.cBlock=document.createElement("DIV"),this.cBlock.className="dhxcont_content_blocker",this.cBlock.style.display="none",this.base.appendChild(this.cBlock),this.editor=document.createElement("IFRAME"),this.editor.className="dhxeditor_mainiframe",this.editor.frameBorder=0,window.dhx4.isOpera&&(this.editor.scrolling="yes"),this.setSizes(),r=this.editor,typeof addEventListener!="undefined"?r.onload=function(){for(var n=0;n<i.conf.evs.length;n++)r.contentWindow.addEventListener(i.conf.evs[n],i._ev,!1)}:r.onreadystatechange=function(){if(typeof r.readyState!="undefined"&&r.readyState=="complete")try{for(var n=0;n<i.conf.evs.length;n++)r.contentWindow.document.body.attachEvent("on"+i.conf.evs[n],i._ev)}catch(t){}},this._ev=function(n){n=n||event;var t=n.type;if(i.conf.iOSfix==!0&&t=="touchend"){i.editor.contentWindow.focus();return}i.callEvent("onAccess",[t,n]);typeof i._doOnAccess=="function"?i._doOnAccess(t,n):typeof i._doOnAccess=="string"&&typeof window[i._doOnAccess]=="function"&&window[i._doOnAccess](t,n)},this._focus=function(){window.dhx4.isIE?this.editor.contentWindow.document.body.focus():this.editor.contentWindow.focus()},this.cell.attachObject(this.editor),this.edWin=this.editor.contentWindow,this.edDoc=this.edWin.document,this._prepareContent=function(n,t){var r="",i;if(n===!0&&this.getContent!=null&&(r=this.getContent()),i=this.editor.contentWindow.document,i.open("text/html","replace"),window.dhx4.isOpera?i.write("<html><head>"+this.conf.extra_css+"<style> html, body { overflow:auto;-webkit-overflow-scrolling: touch; padding:0px; height:100%; margin:0px; background-color:#ffffff; "+this._fontConf()+"} <\/style><\/head><body "+(t!==!0?"contenteditable='true'":"")+" tabindex='0'><\/body><\/html>"):window.dhx4.isKHTML?i.write("<html><head>"+this.conf.extra_css+"<style> html {overflow-x: auto;-webkit-overflow-scrolling: touch; overflow-y: auto;} body { overflow: auto; overflow-y: scroll;} html,body { padding:0px; height:100%; margin:0px; background-color:#ffffff; "+this._fontConf()+"} <\/style><\/head><body "+(t!==!0?"contenteditable='true'":"")+" tabindex='0'><\/body><\/html>"):window.dhx4.isIE?i.write("<html><head>"+this.conf.extra_css+"<style> html {overflow-y: auto;} body {overflow-y: scroll;-webkit-overflow-scrolling: touch;} html,body { overflow-x: auto; padding:0px; height:100%; margin:0px; background-color: #ffffff; outline: none; "+this._fontConf()+"} <\/style><\/head><body "+(t!==!0?"contenteditable='true'":"")+" tabindex='0'><\/body><\/html>"):i.write("<html><head>"+this.conf.extra_css+"<style> html,body { overflow-x: auto; overflow-y:-webkit-overflow-scrolling: touch; scroll; padding:0px; height:100%; margin:0px; background-color:#ffffff; "+this._fontConf()+"} <\/style><\/head><body "+(t!==!0?"contenteditable='true'":"")+" tabindex='0'><\/body><\/html>"),i.close(),window.dhx4.isIE?i.contentEditable=t!==!0:i.designMode=t!==!0?"On":"Off",window.dhx4.isFF)try{i.execCommand("useCSS",!1,!0)}catch(u){}n===!0&&this.setContent!=null&&this.setContent(r)},this._prepareContent(),this._doOnResize=function(){window.clearTimeout(i.conf.resizeTM);i.conf.resizeTM=window.setTimeout(function(){i.setSizes&&i.setSizes()},i.conf.resizeTMTime)},this._runCommand=function(n,t){var r,i;if(this.conf.roMode!==!0){arguments.length<2&&(t=null);window.dhx4.isIE&&this.edWin.focus();try{r=this.editor.contentWindow.document;r.execCommand(n,!1,t)}catch(u){}window.dhx4.isIE&&(this.edWin.focus(),i=this,window.setTimeout(function(){i.edWin.focus();i=null},1))}},this.applyBold=function(){this._runCommand("Bold")},this.applyItalic=function(){this._runCommand("Italic")},this.applyUnderscore=function(){this._runCommand("Underline")},this.clearFormatting=function(){this._runCommand("RemoveFormat");var n=this.getContent();n=n.replace(/<\/?h\d>/gi,"");this.setContent(n)},this._doOnClick=function(n){var t=n||window.event,r=t.target||t.srcElement;i._showInfo(r)},this._doOnMouseDown=function(n){var t=n||window.event,r=t.target||t.srcElement;i._showInfo(r)},this._doOnKeyUp=function(n){var t=n||window.event,r=t.keyCode,u=t.target||t.srcElement;({37:1,38:1,39:1,40:1,13:1})[r]==1&&i._showInfo(u)},this._getParentByTag=function(n,t){t=t.toLowerCase();var i=n;do if(t==""||i.nodeName.toLowerCase()==t)return i;while(i=i.parentNode);return n},this._isStyleProperty=function(n,t,i,r){t=t.toLowerCase();var u=n;do if(u.nodeName.toLowerCase()==t&&u.style[i]==r)return!0;while(u=u.parentNode);return!1},this._setStyleProperty=function(n,t){this.style[t]=!1;var i=this._getParentByTag(n,t);i&&i.tagName.toLowerCase()==t&&(this.style[t]=!0);t=="del"&&this._getParentByTag(n,"strike")&&this._getParentByTag(n,"strike").tagName.toLowerCase()=="strike"&&(this.style.del=!0)},this._showInfo=function(n){var n=this._getSelectionBounds().end?this._getSelectionBounds().end:n,i,t;if(n&&this._setStyleProperty)try{this.edWin.getComputedStyle?(t=this.edWin.getComputedStyle(n,null),i=t.getPropertyValue("font-weight")==401?700:t.getPropertyValue("font-weight"),this.style={fontStyle:t.getPropertyValue("font-style"),fontSize:t.getPropertyValue("font-size"),textDecoration:t.getPropertyValue("text-decoration"),fontWeight:i,fontFamily:t.getPropertyValue("font-family"),textAlign:t.getPropertyValue("text-align")},window.dhx4.isKHTML&&(this.style.fontStyle=t.getPropertyValue("font-style"),this.style.vAlign=t.getPropertyValue("vertical-align"),this.style.del=this._isStyleProperty(n,"span","textDecoration","line-through"),this.style.u=this._isStyleProperty(n,"span","textDecoration","underline"))):(t=n.currentStyle,this.style={fontStyle:t.fontStyle,fontSize:t.fontSize,textDecoration:t.textDecoration,fontWeight:t.fontWeight,fontFamily:t.fontFamily,textAlign:t.textAlign});this._setStyleProperty(n,"h1");this._setStyleProperty(n,"h2");this._setStyleProperty(n,"h3");this._setStyleProperty(n,"h4");window.dhx4.isKHTML||(this._setStyleProperty(n,"del"),this._setStyleProperty(n,"sub"),this._setStyleProperty(n,"sup"),this._setStyleProperty(n,"u"));this.callEvent("onFocusChanged",[this.style,t])}catch(r){return null}},this._getSelectionBounds=function(){var i,r,n,t,e,u,f;return this.edWin.getSelection?(e=this.edWin.getSelection(),window.dhx4.isEdge&&e.rangeCount==0)?{root:null,start:null,end:null}:(i=e.getRangeAt(e.rangeCount-1),n=i.startContainer,t=i.endContainer,r=i.commonAncestorContainer,n.nodeName=="#text"&&(r=r.parentNode),n.nodeName=="#text"&&(n=n.parentNode),n.nodeName.toLowerCase()=="body"&&(n=n.firstChild),t.nodeName=="#text"&&(t=t.parentNode),t.nodeName.toLowerCase()=="body"&&(t=t.lastChild),n==t&&(r=n),{root:r,start:n,end:t}):this.edWin.document.selection?(i=this.edDoc.selection.createRange(),!i.duplicate)?null:(r=i.parentElement(),u=i.duplicate(),f=i.duplicate(),u.collapse(!0),f.moveToElementText(u.parentElement()),f.setEndPoint("EndToStart",u),n=u.parentElement(),u=i.duplicate(),f=i.duplicate(),f.collapse(!1),u.moveToElementText(f.parentElement()),u.setEndPoint("StartToEnd",f),t=f.parentElement(),n.nodeName.toLowerCase()=="body"&&(n=n.firstChild),t.nodeName.toLowerCase()=="body"&&(t=t.lastChild),n==t&&(r=n),{root:r,start:n,end:t}):null},this.getContent=function(){return this.edDoc.body?window.dhx4.isFF||window.dhx4.isChrome?this.editor.contentWindow.document.body.innerHTML.replace(/<\/{0,}br\/{0,}>\s{0,}$/gi,""):window.dhx4.isIE&&this.edDoc.body.innerText.length==0?"":this.edDoc.body.innerHTML:""},this.setContent=function(n){var t,r;n=n||"";this.edDoc.body?(t=!1,window.dhx4.isFF&&(r=navigator.userAgent.match(/Firefox\/(\d*)/),t=r!=null&&r[1]<28),t?(typeof this.conf.ffTest=="undefined"&&(this.editor.contentWindow.document.body.innerHTML="",this._runCommand("InsertHTML","test"),this.conf.ffTest=this.editor.contentWindow.document.body.innerHTML.length>0),this.conf.ffTest?this.editor.contentWindow.document.body.innerHTML=n:(this.editor.contentWindow.document.body.innerHTML="",n.length==0&&(n=" "),this._runCommand("InsertHTML",n))):this.editor.contentWindow.document.body.innerHTML=n,this.callEvent("onContentSet",[])):this.conf.firstLoadEv||(this.conf.firstLoadEv=!0,this.conf.firstLoadData=n,this._onFirstLoad=function(){i.setContent(i.conf.firstLoadData);typeof addEventListener=="function"?i.edWin.removeEventListener("load",i._onFirstLoad,!1):i.edWin.detachEvent("onload",i._onFirstLoad);i.conf.firstLoadData=null;i.conf.firstLoadEv=!1;i._onFirstLoad=null},typeof addEventListener=="function"?this.edWin.addEventListener("load",this._onFirstLoad,!1):this.edWin.attachEvent("onload",this._onFirstLoad))},this.setContentHTML=function(n){window.dhx4.ajax.get(n,function(n){n.xmlDoc.responseText!=null&&i.setContent(n.xmlDoc.responseText)})},window.dhx4._eventable(this),this.attachEvent("onFocusChanged",function(n){typeof this._doOnFocusChanged=="function"?this._doOnFocusChanged(n):typeof this._doOnFocusChanged=="string"&&typeof window[this._doOnFocusChanged]=="function"&&window[this._doOnFocusChanged](n)}),typeof addEventListener=="function"?(window.addEventListener("resize",this._doOnResize,!1),this.edDoc.addEventListener("click",this._doOnClick,!1),this.edDoc.addEventListener("keyup",this._doOnKeyUp,!1),window.dhx4.isOpera&&this.edDoc.addEventListener("mousedown",this._doOnMouseDown,!1)):(window.attachEvent("onresize",this._doOnResize),this.edDoc.attachEvent("onclick",this._doOnClick),this.edDoc.attachEvent("onkeyup",this._doOnKeyUp)),this.unload=function(){var n;if(typeof addEventListener=="function"){for(window.removeEventListener("resize",this._doOnResize,!1),this.edDoc.removeEventListener("click",this._doOnClick,!1),this.edDoc.removeEventListener("keyup",this._doOnKeyUp,!1),window.dhx4.isOpera&&this.edDoc.removeEventListener("mousedown",this._doOnMouseDown,!1),n=0;n<i.conf.evs.length;n++)r.contentWindow.removeEventListener(i.conf.evs[n],i._ev,!1);this.tb!=null&&this.conf.iOSfix==!0&&(this.tb.cont.removeEventListener("touchend",this._doOnIOSFix,!1),this._doOnIOSFix=null)}else for(window.detachEvent("onresize",this._doOnResize,!1),this.edDoc.detachEvent("onclick",this._doOnClick),this.edDoc.detachEvent("onkeyup",this._doOnKeyUp),n=0;n<i.conf.evs.length;n++)r.contentWindow.document.body.detachEvent("on"+i.conf.evs[n],i._ev);for(this._doOnAccess=null,this._doOnFocusChanged=null,typeof addEventListener=="function"?this.editor.onload=null:this.editor.onreadystatechange=null,this.editor.parentNode.removeChild(this.editor),this.editor=null,this.edDoc=null,this.edWin=null,this.cell._unload(),this.cell=null,this.tb=null,window.dhx4._eventable(this,"clear"),this.cBlock.parentNode.removeChild(this.cBlock),this.cBlock=null,this.base.className=String(this.base.className).replace(new RegExp("\\s{0,}dhxeditor_"+this.conf.skin),"");this.base.childNodes.length>0;)this.base.removeChild(this.base.childNodes[0]);this.base=null;this._doOnClick=null;this._doOnKeyUp=null;this._doOnMouseDown=null;this._ev=null;this._focus=null;this._prepareContent=null;this._doOnResize=null;this.setIconsPath=null;this.init=null;this.setSizes=null;this._runCommand=null;this.applyBold=null;this.applyItalic=null;this.applyUnderscore=null;this.clearFormatting=null;this._showInfo=null;this._getSelectionBounds=null;this.getContent=null;this.setContent=null;this.setContentHTML=null;this.setReadonly=null;this.isReadonly=null;this.unload=null;i=r=null},this.conf.toolbar==!0&&typeof this.attachToolbar=="function"&&typeof dhtmlXToolbarObject=="function"&&(this.attachToolbar(this.conf.iconsPath),this.conf.iOSfix==!0&&(this._doOnIOSFix=function(){i.editor.contentWindow.focus()},this.tb.cont.addEventListener("touchend",this._doOnIOSFix,!1))),this.setIconsPath=function(n){this.conf.iconsPath=n},this.conf.content.length>0?(this.setContent(this.conf.content),this.conf.content=""):this.conf.contentHTML.length>0&&(this.setContentHTML(this.conf.contentHTML),this.conf.contentHTML=""),this}function xmlPointer(n){this.d=n}function dhtmlXTreeObject(n,t,i,r){var u,e,f;if(dhtmlxEvent.initTouch&&dhtmlxEvent.initTouch(),_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(o){}return this.parentObject=typeof n!="object"?document.getElementById(n):n,this.parentObject.style.overflow="hidden",this._itim_dg=!0,this.dlmtr=",",this.dropLower=!1,this.enableIEImageFix(!0),this.xmlstate=0,this.mytype="tree",this.smcheck=!0,this.width=t,this.height=i,this.rootId=r,this.childCalc=null,this.def_img_x="18px",this.def_img_y="18px",this.def_line_img_x="18px",this.def_line_img_y="24px",this._dragged=[],this._selected=[],this.style_pointer="pointer",this._aimgs=!0,this.htmlcA=" [",this.htmlcB="]",this.lWin=window,this.cMenu=0,this.mlitems=0,this.iconURL="",this.dadmode=0,this.slowParse=!1,this.autoScroll=!0,this.hfMode=0,this.nodeCut=[],this.XMLsource=0,this.XMLloadingWarning=0,this._idpull={},this._pullSize=0,this.treeLinesOn=!0,this.tscheck=!1,this.timgen=!0,this.dpcpy=!1,this._ld_id=null,this._dynDeleteBranches={},this._oie_onXLE=[],this.imPath=window.dhx_globalImgPath||"",this.checkArray=["iconUncheckAll.gif","iconCheckAll.gif","iconCheckGray.gif","iconUncheckDis.gif","iconCheckDis.gif","iconCheckDis.gif"],this.radioArray=["radio_off.gif","radio_on.gif","radio_on.gif","radio_off.gif","radio_on.gif","radio_on.gif"],this.lineArray=["line2.gif","line3.gif","line4.gif","blank.gif","blank.gif","line1.gif"],this.minusArray=["minus2.gif","minus3.gif","minus4.gif","minus.gif","minus5.gif"],this.plusArray=["plus2.gif","plus3.gif","plus4.gif","plus.gif","plus5.gif"],this.imageArray=["leaf.gif","folderOpen.gif","folderClosed.gif"],this.cutImg=[0,0,0],this.cutImage="but_cut.gif",dhx4._eventable(this),this.dragger=new dhtmlDragAndDropObject,this.htmlNode=new dhtmlXTreeItemObject(this.rootId,"",0,this),this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display="none",this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className="hiddenRow",this.allTree=this._createSelf(),this.allTree.appendChild(this.htmlNode.htmlNode),dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this),_isFF&&(this.allTree.childNodes[0].width="100%",this.allTree.childNodes[0].style.overflow="hidden"),u=this,this.allTree.onselectstart=new Function("return false;"),_isMacOS&&(this.allTree.oncontextmenu=function(n){return u._doContClick(n||window.event,!0)}),this.allTree.onmousedown=function(n){return u._doContClick(n||window.event)},this.XMLLoader=this._parseXMLTree,_isIE&&this.preventIECashing(!0),this.selectionBar=document.createElement("DIV"),this.selectionBar.className="selectionBar",this.selectionBar.innerHTML="&nbsp;",this.selectionBar.style.display="none",this.allTree.appendChild(this.selectionBar),window.addEventListener&&window.addEventListener("unload",function(){try{u.destructor()}catch(n){}},!1),window.attachEvent&&window.attachEvent("onunload",function(){try{u.destructor()}catch(n){}}),this.setImagesPath=this.setImagePath,this.setIconsPath=this.setIconPath,this.setSkin(window.dhx4.skin||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtree")||"material"),dhtmlx.image_path&&(e=dhtmlx.image_path,f=this.parentObject.className.match(/dhxtree_dhx_([a-z_]*)/i),f!=null&&f[1]!=null&&(e+="dhxtree_"+f[1]+"/"),this.setImagePath(e)),this}function cObject(){return this}function dhtmlXTreeItemObject(n,t,i,r,u,f){return this.htmlNode="",this.acolor="",this.scolor="",this.tr=0,this.childsCount=0,this.tempDOMM=0,this.tempDOMU=0,this.dragSpan=0,this.dragMove=0,this.span=0,this.closeble=1,this.childNodes=[],this.userData=new cObject,this.checkstate=0,this.treeNod=r,this.label=t,this.parentObject=i,this.actionHandler=u,this.images=[r.imageArray[0],r.imageArray[1],r.imageArray[2]],this.id=r._globalIdStorageAdd(n,this),this.htmlNode=this.treeNod.checkBoxOff?this.treeNod._createItem(1,this,f):this.treeNod._createItem(0,this,f),this.htmlNode.objBelong=this,this}function dhx_dragSomethingInTree(){this.lWin=window;this._createDragNode=function(n){var t=document.createElement("div");return t.style.position="absolute",t.innerHTML=n.innerHTML||n.value,t.className="dragSpanDiv",t};this._preventNsDrag=function(n){return((n||window.event).cancelBubble=!0,n&&n.preventDefault)?(n.preventDefault(),!1):!1};this._nonTrivialNode=function(n,t,i,r){if(this._customDrop)return this._customDrop(n,r.img.id,t.id,i?i.id:null);var u=r.img.getAttribute("image")||"",f=r.img.id||"new",e=r.img.getAttribute("text")||(_isIE?r.img.innerText:r.img.textContent);n[i?"insertNewNext":"insertNewItem"](i?i.id:t.id,f,e,"",u,u,u)}}function jsonPointer(n,t){this.d=n;this.dp=t}function dhtmlXTreeFromHTML(n){var r,c,o,t,l,e,u,s,f,h,a;typeof n!="object"&&(n=document.getElementById(n));var h=n,v=h.id,i="";for(r=0;r<n.childNodes.length;r++)if(n.childNodes[r].nodeType=="1"){if(n.childNodes[r].tagName=="XMP")for(c=n.childNodes[r],o=0;o<c.childNodes.length;o++)i+=c.childNodes[o].data;else n.childNodes[r].tagName.toLowerCase()=="ul"&&(i=dhx_li2trees(n.childNodes[r],[],0));break}n.innerHTML="";t=new dhtmlXTreeObject(n,"100%","100%",0);l=[];for(b in t)l[b.toLowerCase()]=b;for(e=n.attributes,u=0;u<e.length;u++)(e[u].name.indexOf("set")==0||e[u].name.indexOf("enable")==0)&&(s=e[u].name,t[s]||(s=l[e[u].name]),t[s].apply(t,e[u].value.split(",")));if(typeof i=="object"){for(t.XMLloadingWarning=1,f=0;f<i.length;f++)h=t.insertNewItem(i[f][0],i[f][3],i[f][1]),i[f][2]&&t._setCheck(h,i[f][2]);t.XMLloadingWarning=0;t.lastLoadedXMLId=0;t._redrawFrom(t)}else t.parse("<tree id='0'>"+i+"<\/tree>");return window[v]=t,a=n.getAttribute("oninit"),a&&eval(a),t}function dhx_init_trees(){for(var t=document.getElementsByTagName("div"),n=0;n<t.length;n++)t[n].className=="dhtmlxTree"&&dhtmlXTreeFromHTML(t[n])}function dhx_li2trees(n,t,i){for(var r,e,u,f=0;f<n.childNodes.length;f++)if(r=n.childNodes[f],r.nodeType==1&&r.tagName.toLowerCase()=="li"){var o="",s=null,h=r.getAttribute("checked");for(e=0;e<r.childNodes.length;e++)u=r.childNodes[e],u.nodeType==3?o+=u.data:u.tagName.toLowerCase()!="ul"?o+=dhx_outer_html(u):s=u;t[t.length]=[i,o,h,r.id||t.length+1];s&&(t=dhx_li2trees(s,t,r.id||t.length))}return t}function dhx_outer_html(n){if(n.outerHTML)return n.outerHTML;var t=document.createElement("DIV");return t.appendChild(n.cloneNode(!0)),t.innerHTML}function setCookie(n,t){document.cookie=n+"="+t}function getCookie(n){var r=n+"=",t,i;if(document.cookie.length>0&&(t=document.cookie.indexOf(r),t!=-1))return t+=r.length,i=document.cookie.indexOf(";",t),i==-1&&(i=document.cookie.length),document.cookie.substring(t,i)}function dhtmlXTreeView(n){var t=this,i,r;if(typeof n=="object"&&n.tagName==null||(n={parent:n,clear:!0}),this.base=typeof n.parent=="string"?document.getElementById(n.parent):n.parent,this.base!=document.body)while(this.base.childNodes.length>0)this.base.removeChild(this.base.lastChild);this.conf={skin:n.skin||window.dhx4.skin||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtreeview")||"material",tree_id:window.dhx4.newId(),ofs:{w:1,h:0},adjust_base:!1,icons:this.icons[typeof n.iconset=="string"&&this.icons[n.iconset]!=null&&this.icons[n.iconset].r==!0?n.iconset:"tree_native"],autoload:{url:null,mode:"id"},selected:{},ud:{},idx:{sign:0,icon:1,text:2},silent:!1,is_mac:navigator.platform.match(/^mac/i)!=null&&typeof addEventListener=="function",mac_cmd_key:!1};this.setSkin(this.conf.skin);this.cont=document.createElement("DIV");this.cont.className="dhxtreeview_cont";this.base.appendChild(this.cont);this.area=document.createElement("DIV");this.area.className="dhxtreeview_area";this.cont.appendChild(this.area);this.cont.onclick=function(n){n=n||event;t.callEvent("_onTreeClick",[n,{stop:!1}])};this.cont.ondblclick=function(n){n=n||event;var i=n.target||n.srcElement;i.className.match(/dhxtreeview_item_label/)!=null&&t._openCloseItem(i.parentNode.parentNode._itemId,!0)};this.items={};this._addItem=function(n,t,i,r){var o=t!=null?this.items[t].level+1:1,u=document.createElement("DIV"),e,f;u.className="dhxtreeview_item";u.innerHTML="<div class='dhxtreeview_item_text'><\/div>";r!=null&&r<0&&(i.index=0);t==null?f=this.area:(e=this.items[t].kids,e==!1&&this._initKidsNode(t),this.items[t].kids_request=!1,f=this.items[t].item.lastChild.firstChild);r!=null&&f.childNodes[r]!=null?f.insertBefore(u,f.childNodes[r]):f.appendChild(u);f=null;u._itemId=n;u._treeId=this.conf.tree_id;window.dhx4.isIE==!0&&(u.onselectstart=function(n){n=n||event;n.preventDefault?n.preventDefault():n.returnValue=!1});this.items[n]={id:n,pId:t,treeId:this.conf.tree_id,text:i.text,item:u,level:o,kids:!1,opened:window.dhx4.s2b(i.open),userdata:window.dhx4._copyObj(i.userdata||{}),half_opened:!1};this.callEvent("_onItemRendered",[n,i]);u.firstChild.innerHTML=this._getItemHtml(n);u=null;window.dhx4.s2b(i.select)==!0&&this._setSelected(n,!0);this.callEvent("_onItemInited",[n,i])};this.addItem=function(n,t,i,r){this.items[n]==null&&(i!=null&&this.items[i]==null&&(i=null),this._addItem(n,i,{text:t},r),this._callPublicEvent("onAddItem",[n,t,i,r]))};this._removeSingleItem=function(n){window.dhx4.isIE==!0&&(this.items[n].item.onselectstart=null);this.items[n].item.parentNode.removeChild(this.items[n].item);for(var t in this.items[n])this.items[n][t]=null,delete this.items[n][t];delete this.items[n];this.conf.selected[n]==!0&&delete this.conf.selected[n]};this._removeItem=function(n){var t=n?this.items[n].pId:-1,r=-1;for(var i in this.items)this.items[i].pId==t&&r++,this.items[i].pId==n&&this._removeItem(i);n!=null&&this._removeSingleItem(n);t&&!r&&this._clearKidsNode(t)};this.deleteItem=function(n){this.items[n]!=null&&this._callPublicEvent("onBeforeDeleteItem",[n])&&(this._removeItem(n),this._callPublicEvent("onDeleteItem",[n]))};this.deleteChildItems=function(n){n=n||0;for(var t in this.items)this.items[t].pId==n&&this._removeItem(t);this._clearKidsNode(n)};this.clearAll=function(){this._removeItem(null);this.conf.unloading!=!0&&this._fixAreaWidth()};this._initKidsNode=function(n){var t;this.items[n].item.lastChild.className.match(/dhxtreeview_kids_cont/)==null&&(t=document.createElement("DIV"),t.className="dhxtreeview_kids_cont",t.innerHTML="<div style='position:relative;'><\/div>",t.style.opacity="1",this.items[n].opened!=!0&&(this.conf.transProp!=!1?(t.style.height="0px",t.style.opacity="0",t.firstChild.style.display="none"):t.style.display="none"),this.items[n].item.appendChild(t));this.items[n].kids=!0;this._iconUpdate(n);this._signUpdate(n);t=null};this._clearKidsNode=function(n){this.items[n].item.lastChild.className.match(/dhxtreeview_kids_cont/)!=null&&this.items[n].item.removeChild(this.items[n].item.lastChild);this.items[n].kids=!1;this._iconUpdate(n);this._signUpdate(n)};this.openItem=function(n,t){this.items[n].opened!=!0&&(typeof t=="undefined"&&(t=!0),this._openCloseItem(n,t))};this.closeItem=function(n,t){this.items[n].opened==!0&&(typeof t=="undefined"&&(t=!0),this._openCloseItem(n,t))};this._openCloseItem=function(n,i){if(this.callEvent("_onBeforeOpen",[n])===!0){if(!(this.items[n].kids==!0||this.items[n].kids_request==!0))return!1;if(this.items[n].half_opened==!0){this.items[n].half_opened=!1;this._signUpdate(n);return}i&&this.conf.transProp!=!1?(this.items[n].transEv||(this.items[n].item.lastChild.addEventListener(this.conf.transEv,this._doOnTrEnd),this.items[n].transEv=!0),this.items[n].opened==!0?(this.items[n].transMode="close",this.items[n].item.lastChild.style.overflow="hidden",this.items[n].item.lastChild.style.height=this.items[n].item.lastChild.childNodes[0].offsetHeight+"px",window.setTimeout(function(){t.items[n].item.lastChild.style[t.conf.transProp]=t.conf.transValueHeight;t.items[n].item.lastChild.style.height="0px";t.items[n].item.lastChild.style.opacity="0";t.items[n].opened=!1;t._iconUpdate(n);t._signUpdate(n)},50)):(this.items[n].transMode="open",this.items[n].item.lastChild.style[this.conf.transProp]=this.conf.transValueHeight,this.items[n].item.lastChild.childNodes[0].style.display="",this.items[n].item.lastChild.style.overflow="hidden",this.items[n].item.lastChild.style.height=this.items[n].item.lastChild.childNodes[0].offsetHeight+"px",this.items[n].item.lastChild.style.opacity="1",this.items[n].opened=!0,this._iconUpdate(n),this._signUpdate(n))):(this.items[n].opened=!this.items[n].opened,this.items[n].item.lastChild.style.display=this.items[n].opened==!0?"":"none",this.items[n].item.lastChild.childNodes[0].style.display=this.items[n].item.lastChild.style.display,this.items[n].item.lastChild.style.height=this.items[n].opened==!0?"":"0px",this.items[n].item.lastChild.style.opacity=this.items[n].opened==!0?1:0,this._iconUpdate(n),this._signUpdate(n),this._fixAreaWidth())}};this._doOnTrEnd=function(){var n=this.parentNode._itemId;t.items[n].item.lastChild.style[t.conf.transProp]="";t.items[n].transMode=="close"?t.items[n].item.lastChild.childNodes[0].style.display="none":(t.items[n].item.lastChild.style.height="",t.items[n].item.lastChild.style.overflow="");t._fixAreaWidth()};this.setSizes=function(){this.conf.adjust_base==!0&&(this.base.style.width=this.base.parentNode.clientWidth-2+"px",this.base.style.height=this.base.parentNode.clientHeight-2+"px");this.cont.style.left=this.conf.ofs.w+"px";this.cont.style.top=this.conf.ofs.h+"px";this.cont.style.width=this.base.clientWidth-this.conf.ofs.w*2+"px";this.cont.style.height=this.base.clientHeight-this.conf.ofs.h*2+"px";this._fixAreaWidth()};this._fixAreaWidth=function(n){this.area.style.width="100%";this.cont.scrollWidth!=this.cont.clientWidth&&(this.area.style.width=this.cont.scrollWidth+1+"px");window.dhx4.isIE7==!0&&n!==!1&&window.setTimeout(function(){t._fixAreaWidth(!1)},1)};this.setSizes();dhx4._eventable(this);i=window.dhx4.transDetect();this.conf.transProp=i.transProp;this.conf.transEv=i.transEv;this.conf.transValueHeight="height 0.15s";i=null;this.conf.is_mac==!0&&(this._macOnKey=function(n){((window.dhx4.isKHTML||window.dhx4.isChrome||window.dhx4.isOpera)&&(n.keyCode==91||n.keyCode==93)||window.dhx4.isFF&&n.keyCode==224)&&(t.conf.mac_cmd_key=n.type=="keydown")},window.addEventListener("keydown",this._macOnKey,!1),window.addEventListener("keyup",this._macOnKey,!1));for(r in this.modules)this.modules[r].init!=null&&this[this.modules[r].init](n);return this.unload=function(){var n;this.conf.unloading=!0;this.cont.onclick=null;this.cont.ondblclick=null;this.clearAll();this.conf.is_mac==!0&&(window.removeEventListener("keydown",this._macOnKey,!1),window.removeEventListener("keyup",this._macOnKey,!1));for(n in this.modules)this.modules[n].unload!=null&&this[this.modules[n].unload]();this.area.parentNode.removeChild(this.area);this.area=null;this.cont.parentNode.removeChild(this.cont);this.cont=null;this.base.className=String(this.base.className).replace(new RegExp("s{0,}dhxtreeview_"+(this.conf.skin||"")),"");window.dhx4._eventable(this,"clear");for(n in this)this[n]=null;t=null},(n.items!=null||n.json!=null||n.xml!=null)&&this.loadStruct(n.items||n.json||n.xml,n.onload),this}function dhtmlxArray(n){return dhtmlx.extend(n||[],dhtmlxArray._master)}function dhtmlXGridObject(n){var t,i;if(dhtmlxEvent.initTouch&&dhtmlxEvent.initTouch(),_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(r){}return n?typeof n=="object"?(this.entBox=n,this.entBox.id||(this.entBox.id="cgrid2_"+this.uid())):this.entBox=document.getElementById(n):(this.entBox=document.createElement("DIV"),this.entBox.id="cgrid2_"+this.uid()),this.entBox.innerHTML="",dhx4._eventable(this),t=this,this._RaSeCol=[],this._wcorr=0,this.fontWidth=7,this.cell=null,this.row=null,this.iconURL="",this.editor=null,this._f2kE=!0,this._dclE=!0,this.combos=new Array(0),this.defVal=new Array(0),this.rowsAr={},this.rowsBuffer=dhtmlxArray(),this.rowsCol=dhtmlxArray(),this._data_cache={},this._ecache={},this._ud_enabled=!0,this.xmlLoader=this.doLoadDetails,this._maskArr=[],this.selectedRows=dhtmlxArray(),this.UserData={},this._sizeFix=this._borderFix=0,this.entBox.className+=" gridbox",this.entBox.style.width=this.entBox.getAttribute("width")||(window.getComputedStyle?this.entBox.style.width||window.getComputedStyle(this.entBox,null).width:this.entBox.currentStyle?this.entBox.currentStyle.width:this.entBox.style.width||0)||"100%",this.entBox.style.height=this.entBox.getAttribute("height")||(window.getComputedStyle?this.entBox.style.height||window.getComputedStyle(this.entBox,null).height:this.entBox.currentStyle?this.entBox.currentStyle.height:this.entBox.style.height||0)||"100%",this.entBox.style.cursor="default",this.entBox.onselectstart=function(){return!1},i=function(n){var t=document.createElement("TABLE");return t.cellSpacing=t.cellPadding=0,t.style.cssText="width:100%;table-layout:fixed;",t.className=n.substr(2),t},this.obj=i("c_obj"),this.hdr=i("c_hdr"),this.hdr.style.marginRight="20px",this.hdr.style.paddingRight="20px",this.objBox=document.createElement("DIV"),this.objBox.style.width="100%",this.objBox.style.overflow="auto",this.objBox.appendChild(this.obj),this.objBox.className="objbox",dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this),this.hdrBox=document.createElement("DIV"),this.hdrBox.style.width="100%",this.hdrBox.style.height="25px",this.hdrBox.style.overflow="hidden",this.hdrBox.className="xhdr",this.preloadImagesAr=new Array(0),this.sortImg=document.createElement("DIV"),this.sortImg.style.display="none",this.hdrBox.appendChild(this.sortImg),this.hdrBox.appendChild(this.hdr),this.hdrBox.style.position="relative",this.entBox.appendChild(this.hdrBox),this.entBox.appendChild(this.objBox),this.entBox.grid=this,this.objBox.grid=this,this.hdrBox.grid=this,this.obj.grid=this,this.hdr.grid=this,this.cellWidthPX=[],this.cellWidthPC=[],this.cellWidthType=this.entBox.cellwidthtype||"px",this.delim=this.entBox.delimiter||",",this._csvDelim=",",this.hdrLabels=[],this.columnIds=[],this.columnColor=[],this._hrrar=[],this.cellType=dhtmlxArray(),this.cellAlign=[],this.initCellWidth=[],this.fldSort=[],this._srdh=_isIE&&document.compatMode!="BackCompat"?22:20,this.imgURL=window.dhx_globalImgPath||"",this.isActive=!1,this.isEditable=!0,this.useImagesInHeader=!1,this.pagingOn=!1,this.rowsBufferOutSize=0,dhtmlxEvent(window,"unload",function(){try{t.destructor&&t.destructor()}catch(n){}}),this.setSkin=function(n){var i,t;this._srdh=window.dhx4.readFromCss("dhxgrid_rh_"+n)+4;this.skin_name=n;this._imgURL&&this.setImagePath(this._imgURL);i=this.entBox.className.split(" gridbox")[0];this.entBox.className=i+" gridbox gridbox_"+n+(_isIE?" isIE":" isModern");this.skin_h_correction=0;this.enableAlterCss("ev_"+n,"odd_"+n,this.isTreeGrid());this._fixAlterCss();switch(n){case"dhx_terrace":case"material":this._srdh=33;this.forceDivInHeader=!0;break;case"dhx_web":case"material":this.forceDivInHeader=!0;this._srdh=31;break;case"dhx_skyblue":this.forceDivInHeader=!0}_isIE&&this.hdr&&(t=this.hdr.parentNode,t.removeChild(this.hdr),t.appendChild(this.hdr));this.setSizes()},_isIE&&this.preventIECaching(!0),window.dhtmlDragAndDropObject&&(this.dragger=new dhtmlDragAndDropObject),this._doOnScroll=function(n,t){this.callEvent("onScroll",[this.objBox.scrollLeft,this.objBox.scrollTop]);this.doOnScroll(n,t)},this.doOnScroll=function(n,i){var r=this.hdrBox;(r._try_header_sync=!0,setTimeout(function(){r._try_header_sync=!1},2e3),this.hdrBox.scrollLeft=this.objBox.scrollLeft,this.ftr&&(this.ftr.parentNode.scrollLeft=this.objBox.scrollLeft),i)||this._srnd&&(this._dLoadTimer&&window.clearTimeout(this._dLoadTimer),this._dLoadTimer=window.setTimeout(function(){t._update_srnd_view&&t._update_srnd_view()},100))},this.attachToObject=function(n){n.appendChild(this.globalBox?this.globalBox:this.entBox);this.setSizes()},this.init=function(n){var e,r,u,f,i;if(this.isTreeGrid()&&!this._h2&&(this._h2=this._createHierarchy(),this._fake&&!this._realfake&&(this._fake._h2=this._h2),this._tgc={imgURL:null}),this._hstyles){for(this.skin_name||this.setSkin(window.dhx4.skin||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxgrid")||"material"),this.editStop(),this.lastClicked=null,this.resized=null,this.fldSorted=this.r_fldSorted=null,this.cellWidthPX=[],this.cellWidthPC=[],this.hdr.rows.length>0&&(e=this.xmlFileUrl,this.clearAll(!0),this.xmlFileUrl=e),r=this.hdr.insertRow(0),i=0;i<this.hdrLabels.length;i++)r.appendChild(document.createElement("TH")),r.childNodes[i]._cellIndex=i,r.childNodes[i].style.height="0px";for(_isIE&&_isIE<8&&document.body.style.msTouchAction==this.undefined?r.style.position="absolute":r.style.height="auto",r=this.hdr.insertRow(_isKHTML?2:1),r._childIndexes=[],u=0,i=0;i<this.hdrLabels.length;i++){if(r._childIndexes[i]=i-u,this.hdrLabels[i]==this.splitSign&&i!=0){_isKHTML&&r.insertCell(i-u);r.cells[i-u-1].colSpan=(r.cells[i-u-1].colSpan||1)+1;r.childNodes[i-u-1]._cellIndex++;u++;r._childIndexes[i]=i-u;continue}r.insertCell(i-u);r.childNodes[i-u]._cellIndex=i;r.childNodes[i-u]._cellIndexS=i;this.setColumnLabel(i,this.hdrLabels[i])}if(u==0&&(r._childIndexes=null),this._cCount=this.hdrLabels.length,_isIE&&window.setTimeout(function(){t.setSizes&&t.setSizes()},1),this.obj.firstChild||this.obj.appendChild(document.createElement("TBODY")),f=this.obj.firstChild,!f.firstChild)for(f.appendChild(document.createElement("TR")),f=f.firstChild,_isIE&&_isIE<8&&document.body.style.msTouchAction==this.undefined?f.style.position="absolute":f.style.height="auto",i=0;i<this.hdrLabels.length;i++)f.appendChild(document.createElement("TH")),f.childNodes[i].style.height="0px";this._c_order=null;this.multiLine!=!0&&(this.obj.className+=" row20px");this.sortImg.style.position="absolute";this.sortImg.style.display="none";this.sortImg.className="dhxgrid_sort_desc";this.sortImg.defLeft=0;this.noHeader?this.hdrBox.style.display="none":this.noHeader=!1;this._ivizcol&&this.setColHidden();this.attachHeader();this.attachHeader(0,0,"_aFoot");this.setSizes();n&&this.parseXML();this.obj.scrollTop=0;this.dragAndDropOff&&this.dragger.addDragLanding(this.entBox,this);this._initDrF&&this._initD();dhx4.callEvent("onGridCreated",[this])}},this.setColumnSizes=function(n){for(var f,h,e,o,s,i=0,r=[],u=0,t=0;t<this._cCount;t++){if(this.initCellWidth[t]=="*"&&!this._hrrar[t]){this._awdth=!1;r.push(t);continue}this.cellWidthType=="%"?(typeof this.cellWidthPC[t]=="undefined"&&(this.cellWidthPC[t]=this.initCellWidth[t]),f=n*this.cellWidthPC[t]/100||0,u>.5&&(f++,u--),h=this.cellWidthPX[t]=Math.floor(f),u=u+f-h):typeof this.cellWidthPX[t]=="undefined"&&(this.cellWidthPX[t]=this.initCellWidth[t]);this._hrrar[t]||(i+=this.cellWidthPX[t]*1)}if(r.length){for(e=Math.floor((n-i)/r.length),e<0&&(e=1),t=0;t<r.length;t++)o=Math.max(this._drsclmW?this._drsclmW[r[t]]||0:0,e),this.cellWidthPX[r[t]]=o,i+=o;n>i&&(s=r[r.length-1],this.cellWidthPX[s]=this.cellWidthPX[s]+(n-i),i=n);this._setAutoResize()}return this.obj.style.width=i+"px",this.hdr.style.width=i+"px",this.ftr&&(this.ftr.style.width=i+"px"),this.chngCellWidth(),i},this.setSizes=function(){var i,f,p,l,o,s,a,c,y;if(this.hdr.rows[0]){if(i=this.quirks=_isIE&&document.compatMode=="BackCompat",f=(this.entBox.offsetWidth-this.entBox.clientWidth)/2,!this.dontSetSizes)if(this.globalBox){if(!this.globalBox.clientWidth)return;p=this.globalBox.clientWidth;l=(this.globalBox.offsetWidth-p)/2;this._delta_x&&!this._realfake&&(this.globalBox.style.width=this._delta_x,this.globalBox.style.boxSizing="border-box",o=this.globalBox.clientWidth,this.entBox.style.width=Math.max(0,o+(i?l*2:0)-this._fake.entBox.clientWidth)+"px",o!=this._lastTimeSplitWidth&&(this._fake._correctSplit(this._fake.entBox.clientWidth),this._lastTimeSplitWidth=o));this._delta_y&&!this._realfake&&(this.globalBox.style.height=this._delta_y,this.entBox.style.overflow=this._fake.entBox.style.overflow="hidden",this.entBox.style.height=this._fake.entBox.style.height=this.globalBox.clientHeight+(i?l*2:0)+"px")}else this._delta_x&&(this.entBox.parentNode&&this.entBox.parentNode.tagName=="TD"?(this.entBox.style.width="1px",this.entBox.style.width=parseInt(this._delta_x)*this.entBox.parentNode.clientWidth/100-f*2+"px"):this.entBox.style.width=this._delta_x),this._delta_y&&(this.entBox.style.height=this._delta_y);if(window.clearTimeout(this._sizeTime),!this.entBox.offsetWidth&&(!this.globalBox||!this.globalBox.offsetWidth)){this._sizeTime=window.setTimeout(function(){t.setSizes&&t.setSizes()},250);return}s=!this._wthB&&(this.entBox.cmp||this._delta_x)&&((this.skin_name||"").indexOf("dhx")==0||this.skin_name=="material")&&!i?2:0;a=!this._wthB&&(this.entBox.cmp||this._delta_y)&&((this.skin_name||"").indexOf("dhx")==0||this.skin_name=="material")&&!i?2:0;this._sizeFix&&(s-=this._sizeFix,a-=this._sizeFix);var u=this.parentGrid?!1:this.objBox.scrollHeight>this.objBox.offsetHeight,h=dhtmlx.$customScroll?0:18,d=this.entBox.clientWidth-(this.skin_h_correction||0)*(i?0:1)-s,w=this.entBox.clientWidth-(this.skin_h_correction||0)-s,b=this.entBox.clientHeight-a,k=this.setColumnSizes(w-(u?h:0)-(this._correction_x||0)),v=this.parentGrid?!1:this.objBox.scrollWidth>this.objBox.offsetWidth||this.objBox.style.overflowX=="scroll",r=this.hdr.clientHeight,e=this.ftr?this.ftr.clientHeight:0,c=d,n=b-r-e;this._awdth&&this._awdth[0]&&this._awdth[1]==99999&&(v=0);this._ahgr&&(n=this._ahgrMA?this.entBox.parentNode.clientHeight-r-e:this.obj.offsetHeight+(v?h:0)+(this._correction_y||0),this._ahgrM&&(n=this._ahgrF?Math.min(this._ahgrM,n+r+e)-r-e:Math.min(this._ahgrM,n)),u&&n>=this.obj.scrollHeight+(v?h:0)&&(u=!1,this.setColumnSizes(w-(this._correction_x||0))));this._awdth&&this._awdth[0]&&(this.cellWidthType=="%"&&(this.cellWidthType="px"),this._fake&&(k+=this._fake.entBox.clientWidth),c=Math.min(Math.max(k+(u?h:0),this._awdth[2]),this._awdth[1])+(this._correction_x||0),this.objBox.style.overflowX=!u&&this.objBox.scrollWidth<=c?"hidden":"auto",this._fake&&(c-=this._fake.entBox.clientWidth));n=Math.max(0,n);this._ff_size_delta=this._ff_size_delta==.1?.2:.1;_isFF||(this._ff_size_delta=0);this.dontSetSizes||(this.entBox.style.width=Math.max(0,c+(i?2:0)*f+this._ff_size_delta)+"px",this.entBox.style.height=n+(i?2:0)*f+r+e+"px");this.objBox.style.height=n+(i&&!u?2:0)*f+"px";this.hdrBox.style.height=r+"px";n!=b&&this.doOnScroll(0,!this._srnd);y=this["setSizes_"+this.skin_name];y&&y.call(this);this.setSortImgPos();r!=this.hdr.clientHeight&&this._ahgr&&this.setSizes();this.callEvent("onSetSizes",[])}},this.chngCellWidth=function(){var t,n;for(_isOpera&&this.ftr&&(this.ftr.width=this.objBox.scrollWidth+"px"),t=this._cCount,n=0;n<t;n++)this.hdr.rows[0].cells[n].style.width=this.cellWidthPX[n]+"px",this.obj.rows[0].childNodes[n].style.width=this.cellWidthPX[n]+"px",this.ftr&&(this.ftr.rows[0].cells[n].style.width=this.cellWidthPX[n]+"px")},this.setDelimiter=function(n){this.delim=n},this.setInitWidthsP=function(n){this.cellWidthType="%";this.initCellWidth=n.split(this.delim.replace(/px/gi,""));arguments[1]||this._setAutoResize()},this._setAutoResize=function(){if(!this._realfake){var t=window,n=this;dhtmlxEvent(window,"resize",function(){window.clearTimeout(n._resize_timer);n._setAutoResize&&(n._resize_timer=window.setTimeout(function(){n.setSizes&&n.setSizes();n._fake&&n._fake._correctSplit()},100))});this._setAutoResize=function(){}}},this.setInitWidths=function(n){if(this.cellWidthType="px",this.initCellWidth=n.split(this.delim),_isFF)for(var t=0;t<this.initCellWidth.length;t++)this.initCellWidth[t]!="*"&&(this.initCellWidth[t]=parseInt(this.initCellWidth[t]))},this.enableMultiline=function(n){this.multiLine=dhx4.s2b(n)},this.enableMultiselect=function(n){this.selMultiRows=dhx4.s2b(n)},this.setImagePath=function(n){n=n.replace(/imgs\/dhxgrid_[a-z]*\/$/,"imgs/");this._imgURL=n;this.imgURL=n+"dhxgrid_"+(this.skin_name||"dhx_skyblue").replace("dhx_","")+"/";this.iconTree=this.imgURL+"tree/"},this.setImagesPath=this.setImagePath,this.setIconPath=function(n){this.iconURL=n},this.setIconsPath=this.setIconPath,this.changeCursorState=function(n){var t=n.target||n.srcElement,i;if(t.tagName!="TD"&&(t=this.getFirstParentOfType(t,"TD")),t){if(t.tagName=="TD"&&this._drsclmn&&!this._drsclmn[t._cellIndex])return t.style.cursor="default";i=(n.layerX||0)+(!_isIE&&n.target.tagName=="DIV"?t.offsetLeft:0);t.style.cursor=t.offsetWidth-(n.offsetX||(parseInt(this.getPosition(t,this.hdrBox))-i)*-1)<(_isOpera?20:10)?"E-resize":"default";_isOpera&&(this.hdrBox.scrollLeft=this.objBox.scrollLeft)}},this.startColResize=function(n){var i;this.resized&&this.stopColResize();this.resized=null;i=n.target||n.srcElement;i.tagName!="TD"&&(i=this.getFirstParentOfType(i,"TD"));var r=n.clientX,u=this.hdr.offsetWidth,f=parseInt(i.offsetWidth);if(i.tagName=="TD"&&i.style.cursor!="default"){if(this._drsclmn&&!this._drsclmn[i._cellIndex])return;t._old_d_mm=document.body.onmousemove;t._old_d_mu=document.body.onmouseup;document.body.onmousemove=function(n){t&&t.doColResize(n||window.event,i,f,r,u)};document.body.onmouseup=function(){t&&t.stopColResize()}}},this.stopColResize=function(){document.body.onmousemove=t._old_d_mm||"";document.body.onmouseup=t._old_d_mu||"";this.setSizes();this.doOnScroll(0,1);this.callEvent("onResizeEnd",[this])},this.doColResize=function(n,t,i,r,u){var e,h,o,s,f;if(t.style.cursor="E-resize",this.resized=t,e=i+(n.clientX-r),h=u+(n.clientX-r),this.callEvent("onResize",[t._cellIndex,e,this])){if(_isIE&&(this.objBox.scrollLeft=this.hdrBox.scrollLeft),o=!1,t.colSpan>1){for(s=[],f=0;f<t.colSpan;f++)s[f]=Math.round(e*this.hdr.rows[0].childNodes[t._cellIndexS+f].offsetWidth/t.offsetWidth);for(f=0;f<t.colSpan;f++)o=this._setColumnSizeR(t._cellIndexS+f*1,s[f])}else o=this._setColumnSizeR(t._cellIndex,e);return this.doOnScroll(0,1),this.setSizes(),this._fake&&this._awdth&&this._fake._correctSplit(),o}},this._setColumnSizeR=function(n,t){var i,r;if(t>(this._drsclmW&&!this._notresize?this._drsclmW[n]||10:10))this.obj.rows[0].childNodes[n].style.width=t+"px",this.hdr.rows[0].childNodes[n].style.width=t+"px",this.ftr&&(this.ftr.rows[0].childNodes[n].style.width=t+"px"),this.cellWidthType=="px"?this.cellWidthPX[n]=t:(i=parseInt(this.entBox.offsetWidth),this.objBox.scrollHeight>this.objBox.offsetHeight&&(i-=17),r=Math.round(t/i*100),this.cellWidthPC[n]=r),this.sortImg.style.display!="none"&&this.setSortImgPos();else return!1},this.setSortImgState=function(n,t,i,r){var u,f;if(i=(i||"asc").toLowerCase(),!dhx4.s2b(n)){this.sortImg.style.display="none";this.r_fldSorted&&(this.r_fldSorted.className="");this.fldSorted=this.r_fldSorted=null;return}if(this.sortImg.className=i=="asc"?"dhxgrid_sort_asc":"dhxgrid_sort_desc",this.sortImg.style.display="",this.fldSorted=this.hdr.rows[0].childNodes[t],u=this.hdr.rows[r||1],u){for(f=0;f<u.childNodes.length;f++)if(u.childNodes[f]._cellIndexS==t)return this.r_fldSorted=u.childNodes[f],this.setSortImgPos();return this.setSortImgState(n,t,i,(r||1)+1)}},this.setSortImgPos=function(n,t,i,r){var r,u,f;this._hrrar&&this._hrrar[this.r_fldSorted?this.r_fldSorted._cellIndex:n]||(this.ar_fldSorted&&(this.ar_fldSorted.className=""),r||(r=n?this.hdr.rows[i||0].cells[n]:this.r_fldSorted),r!=null&&(u=this.getPosition(r,this.hdrBox),f=r.offsetWidth,this.ar_fldSorted=r,r.className=this.sortImg.className+"_col",this.sortImg.style.left=Number(u[0]+f-13)+"px",this.sortImg.defLeft=parseInt(this.sortImg.style.left),this.sortImg.style.top=Number(u[1]+5)+"px",this.useImagesInHeader||t||(this.sortImg.style.display="inline"),this.sortImg.style.left=this.sortImg.defLeft+"px"))},this.setActive=function(n){if(arguments.length==0)var n=!0;n==!0?(globalActiveDHTMLGridObject&&globalActiveDHTMLGridObject!=this&&(globalActiveDHTMLGridObject.editStop(),globalActiveDHTMLGridObject.callEvent("onBlur",[globalActiveDHTMLGridObject])),globalActiveDHTMLGridObject=this,this.isActive=!0):(this.isActive=!1,this.callEvent("onBlur",[this]))},this._doClick=function(n){var r=0,t=this.getFirstParentOfType(_isIE?n.srcElement:n.target,"TD"),u,i;if(t&&t.parentNode&&t.parentNode.idd)return(u=!0,this.markedCells)?(i=0,(n.shiftKey||n.metaKey)&&(i=1),n.ctrlKey&&(i=2),this.doMark(t,i),!0):(this.selMultiRows!=!1&&(n.shiftKey&&this.row!=null&&this.selectedRows.length&&(r=1),(n.ctrlKey||n.metaKey)&&(r=2)),this.doClick(t,u,r,!1))},this._doContClick=function(n){var t=this.getFirstParentOfType(_isIE?n.srcElement:n.target,"TD"),i,r,u;if(!t||typeof t.parentNode.idd=="undefined")return this.callEvent("onEmptyClick",[n]),!0;if(n.button==2||_isMacOS&&n.ctrlKey){if(!this.callEvent("onRightClick",[t.parentNode.idd,t._cellIndex,n]))return i=function(n){return(n||event).cancelBubble=!0,!1},(n.srcElement||n.target).oncontextmenu=i,i(n);if(this._ctmndx){if(!this.callEvent("onBeforeContextMenu",[t.parentNode.idd,t._cellIndex,this]))return!0;if(_isIE&&(n.srcElement.oncontextmenu=function(){return event.cancelBubble=!0,!1}),this._ctmndx.showContextMenu){var f=window.document.documentElement,e=window.document.body,o=[f.scrollLeft||e.scrollLeft,f.scrollTop||e.scrollTop];_isIE?(r=n.clientX+o[0],u=n.clientY+o[1]):(r=n.pageX,u=n.pageY);this._ctmndx.showContextMenu(r-1,u-1);this.contextID=this._ctmndx.contextMenuZoneId=t.parentNode.idd+"_"+t._cellIndex;this._ctmndx._skip_hide=!0}else t.contextMenuId=t.parentNode.idd+"_"+t._cellIndex,t.contextMenu=this._ctmndx,t.a=this._ctmndx._contextStart,t.a(t,n),t.a=null;return n.cancelBubble=!0,!1}}else this._ctmndx&&(this._ctmndx.hideContextMenu?this._ctmndx.hideContextMenu():this._ctmndx._contextEnd());return!0},this.doClick=function(n,i,r,u){var c,l,w,e,o,a,v,f,s,h,y,p;if(this.selMultiRows||(r=0),c=this.row?this.row.idd:0,this.setActive(!0),r||(r=0),this.cell!=null&&(this.cell.className=this.cell.className.replace(/[ \t]*cellselected/g,"")),n.tagName=="TD"){if(this.checkEvent("onSelectStateChanged")&&(l=this.getSelectedId()),w=this.row,r==1){for(e=this.rowsCol._dhx_find(n.parentNode),o=this.rowsCol._dhx_find(this.lastClicked),e>o?(a=o,v=e):(a=e,v=o),f=0;f<this.rowsCol.length;f++)if(f>=a&&f<=v)if(this.rowsCol[f]&&!this.rowsCol[f]._sRow){if(!this.rowsCol[f].idd)continue;this.rowsCol[f].className.indexOf("rowselected")==-1&&this.callEvent("onBeforeSelect",[this.rowsCol[f].idd,c,n._cellIndex])&&(this.rowsCol[f].className+=" rowselected",this.selectedRows[this.selectedRows.length]=this.rowsCol[f])}else return this.clearSelection(),this.doClick(n,i,0,u)}else r==2&&n.parentNode.className.indexOf("rowselected")!=-1&&(n.parentNode.className=n.parentNode.className.replace(/[ \t]*rowselected/g,""),this.selectedRows._dhx_removeAt(this.selectedRows._dhx_find(n.parentNode)),s=!0,u=!1);if(this.editStop(),typeof n.parentNode.idd=="undefined")return!0;if(s||n.parentNode._sRow||(this.callEvent("onBeforeSelect",[n.parentNode.idd,c,n._cellIndex])?this.getSelectedRowId()!=n.parentNode.idd?(r==0&&this.clearSelection(),this.cell=n,w==n.parentNode&&this._chRRS&&(i=!1),this.row=n.parentNode,this.row.className+=" rowselected",this.selectedRows._dhx_find(this.row)==-1&&(this.selectedRows[this.selectedRows.length]=this.row)):(this.cell=n,this.row=n.parentNode):i=!1),this.cell&&this.cell.parentNode.className.indexOf("rowselected")!=-1&&(this.cell.className=this.cell.className.replace(/[ \t]*cellselected/g,"")+" cellselected"),r!=1&&!this.row)return;if(this.lastClicked=n.parentNode,h=this.row.idd,y=this.cell,i&&typeof h!="undefined"&&y&&!s?t.onRowSelectTime=setTimeout(function(){t.callEvent&&t.callEvent("onRowSelect",[h,y._cellIndex])},100):this.callEvent("onRowSelectRSOnly",[h]),this.checkEvent("onSelectStateChanged")&&(p=this.getSelectedId(),l!=p&&this.callEvent("onSelectStateChanged",[p,l])),s)return!1}this.isActive=!0;u!==!1&&this.cell&&this.cell.parentNode.idd&&this.moveToVisible(this.cell)},this.selectAll=function(){var n,t;for(this.clearSelection(),n=this.rowsBuffer,this.pagingOn&&(n=this.rowsCol),t=0;t<n.length;t++)this.render_row(t).className+=" rowselected";this.selectedRows=dhtmlxArray([].concat(n));this.selectedRows.length&&(this.row=this.selectedRows[0],this.cell=this.row.cells[0]);this._fake&&!this._realfake&&this._fake.selectAll()},this.selectCell=function(n,t,i,r,u,f){var e;if(i||(i=!1),typeof n!="object"&&(n=this.render_row(n)),!n||n==-1)return null;e=n._childIndexes?n.childNodes[n._childIndexes[t]]:n.childNodes[t];e||(e=n.childNodes[0]);this.markedCells?this.doMark(e,r?2:0):r?this.doClick(e,i,3,f):this.doClick(e,i,0,f);u&&this.editCell()},this.moveToVisible=function(n,t){var f,i,r,e,o,u;this.pagingOn&&(f=Math.floor(this.getRowIndex(n.parentNode.idd)/this.rowsBufferOutSize)+1,f!=this.currentPage&&this.changePage(f));try{n.offsetHeight&&(i=n.offsetLeft+n.offsetWidth+20,r=0,i>this.objBox.offsetWidth+this.objBox.scrollLeft?n.offsetLeft>this.objBox.scrollLeft&&(r=n.offsetLeft-(this.objBox.offsetWidth-n.offsetWidth)+5):n.offsetLeft<this.objBox.scrollLeft&&(i-=n.offsetWidth*2/3,i<this.objBox.scrollLeft&&(r=n.offsetLeft-5)),r&&!t&&(this.objBox.scrollLeft=r));n.offsetHeight?i=n.offsetTop:(e=this._realfake?this._fake.rowsAr[n.parentNode.idd]:n.parentNode,i=this.rowsBuffer._dhx_find(e)*this._srdh);o=i+n.offsetHeight+38;o>this.objBox.offsetHeight+this.objBox.scrollTop?u=i:i<this.objBox.scrollTop&&(u=i-5);u&&(this.objBox.scrollTop=u)}catch(s){}},this.editCell=function(){if(!this.editor||this.cell!=this.editor.cell){if(this.editStop(),this.isEditable!=!0||!this.cell)return!1;var n=this.cell;if(n.parentNode._locked)return!1;if(this.editor=this.cells4(n),this.editor!=null){if(this.editor.isDisabled())return this.editor=null,!1;this.callEvent("onEditCell",[0,this.row.idd,this.cell._cellIndex])!=!1&&this.editor.edit?(this._Opera_stop=(new Date).valueOf(),n.className+=" editable",this.editor.edit(),this.callEvent("onEditCell",[1,this.row.idd,this.cell._cellIndex])):this.editor=null}}},this.editStop=function(n){var r,t,i;if(_isOpera&&this._Opera_stop){if(this._Opera_stop*1+50>(new Date).valueOf())return;this._Opera_stop=null}if(this.editor&&this.editor!=null){if(this.editor.cell.className=this.editor.cell.className.replace("editable",""),n){r=this.editor.val;this.editor.detach();this.editor.setValue(r);this.editor=null;this.callEvent("onEditCancel",[this.row.idd,this.cell._cellIndex,r]);return}if(this.editor.detach()&&(this.cell.wasChanged=!0),t=this.editor,t==null)return;this.editor=null;i=this.callEvent("onEditCell",[2,this.row.idd,this.cell._cellIndex,t.getValue(),t.val]);typeof i=="string"||typeof i=="number"?t[t.setImage?"setLabel":"setValue"](i):i||t[t.setImage?"setLabel":"setValue"](t.val);this._ahgr&&this.multiLine&&this.setSizes()}},this._nextRowCell=function(n,t,i){return(n=this._nextRow((this._groups?this.rowsCol:this.rowsBuffer)._dhx_find(n),t),!n)?null:n.childNodes[n._childIndexes?n._childIndexes[i]:i]},this._getNextCell=function(n,t,i){var r,i;return(n=n||this.cell,r=n.parentNode,this._tabOrder?(i=this._tabOrder[n._cellIndex],typeof i!="undefined"&&(n=i<0?this._nextRowCell(r,t,Math.abs(i)-1):r.childNodes[i])):(i=n._cellIndex+t,i>=0&&i<this._cCount?(r._childIndexes&&(i=r._childIndexes[n._cellIndex]+t),n=r.childNodes[i]):n=this._nextRowCell(r,t,t==1?0:this._cCount-1)),!n)?(t==1&&this.tabEnd&&(this.tabEnd.focus(),this.tabEnd.focus(),this.setActive(!1)),t==-1&&this.tabStart&&(this.tabStart.focus(),this.tabStart.focus(),this.setActive(!1)),null):n.style.display!="none"&&(!this.smartTabOrder||!this.cells(n.parentNode.idd,n._cellIndex).isDisabled())?n:this._getNextCell(n,t)},this._nextRow=function(n,t){var i=this.render_row(n+t);return!i||i==-1?null:i&&i.style.display=="none"?this._nextRow(n+t,t):i},this.scrollPage=function(n){if(this.rowsBuffer.length){var i=this._realfake?this._fake:this,t=Math.floor((i._r_select||this.getRowIndex(this.row.idd)||0)+n*this.objBox.offsetHeight/(this._srdh||20));t<0&&(t=0);t>=this.rowsBuffer.length&&(t=this.rowsBuffer.length-1);this._srnd&&!this.rowsBuffer[t]?(this.objBox.scrollTop+=Math.floor(n*this.objBox.offsetHeight/(this._srdh||20))*(this._srdh||20),this._fake&&(this._fake.objBox.scrollTop=this.objBox.scrollTop),i._r_select=t):(this.selectCell(t,this.cell._cellIndex,!0,!1,!1,this.multiLine||this._srnd),this.multiLine||this._srnd||this._realfake||(this.objBox.scrollTop=this.getRowById(this.getRowId(t)).offsetTop,this._fake&&(this._fake.objBox.scrollTop=this.objBox.scrollTop)),i._r_select=null)}},this.doKey=function(n){var t,i;if(!n||(n.target||n.srcElement).value!==window.undefined&&(t=n.target||n.srcElement,t.className!="dhxcombo_input"&&t.className!="dhx_tab_ignore"&&(!t.parentNode||t.parentNode.className.indexOf("editable")==-1)))return!0;if(globalActiveDHTMLGridObject&&this!=globalActiveDHTMLGridObject)return globalActiveDHTMLGridObject.doKey(n);if(this.isActive==!1||this._htkebl)return!0;if(!this.callEvent("onKeyPress",[n.keyCode,n.ctrlKey,n.shiftKey,n]))return!1;if(i="k"+n.keyCode+"_"+(n.ctrlKey?1:0)+"_"+(n.shiftKey?1:0),this.cell){if(this._key_events[i])return!1===this._key_events[i].call(this)?!0:(n.preventDefault&&n.preventDefault(),n.cancelBubble=!0,!1);this._key_events.k_other&&this._key_events.k_other.call(this,n)}return!0},this.selectRow=function(n,t,i,r){typeof n!="object"&&(n=this.render_row(n));this.selectCell(n,0,t,i,!1,r)},this.wasDblClicked=function(n){var t=this.getFirstParentOfType(_isIE?n.srcElement:n.target,"TD"),i;if(t)return i=t.parentNode.idd,this.callEvent("onRowDblClicked",[i,t._cellIndex,n])},this._onHeaderClick=function(n,t){var i=this.grid;if(t=t||i.getFirstParentOfType(_isIE?event.srcElement:n.target,"TD"),this.grid.resized==null){if(!this.grid.callEvent("onHeaderClick",[t._cellIndexS,n||window.event]))return!1;i.sortField(t._cellIndexS,!1,t)}this.grid.resized=null},this.deleteSelectedRows=function(){var r=this.selectedRows.length,u,n,t,i;if(r!=0){for(u=this.selectedRows,this.selectedRows=dhtmlxArray(),n=r-1;n>=0;n--)t=u[n],this.deleteRow(t.idd,t)?t==this.row&&(i=n):this.selectedRows[this.selectedRows.length]=t;if(i)try{i+1>this.rowsCol.length&&i--;this.selectCell(i,0,!0)}catch(f){this.row=null;this.cell=null}}},this.getSelectedRowId=function(){for(var t,n=new Array(0),r={},i=0;i<this.selectedRows.length;i++)(t=this.selectedRows[i].idd,r[t])||(n[n.length]=t,r[t]=!0);return n.length==0?null:n.join(this.delim)},this.getSelectedCellIndex=function(){return this.cell!=null?this.cell._cellIndex:-1},this.getColWidth=function(n){return parseInt(this.cellWidthPX[n])},this.setColWidth=function(n,t){if(t=="*")this.initCellWidth[n]="*";else{if(this._hrrar[n])return;this.cellWidthType=="px"?this.cellWidthPX[n]=parseInt(t):this.cellWidthPC[n]=parseInt(t)}this.setSizes()},this.getRowIndex=function(n){for(var t=0;t<this.rowsBuffer.length;t++)if(this.rowsBuffer[t]&&this.rowsBuffer[t].idd==n)return t;return-1},this.getRowId=function(n){return this.rowsBuffer[n]?this.rowsBuffer[n].idd:this.undefined},this.setRowId=function(n,t){this.changeRowId(this.getRowId(n),t)},this.changeRowId=function(n,t){var r,u,f,i;if(n!=t){for(r=this.rowsAr[n],r.idd=t,this.UserData[n]&&(this.UserData[t]=this.UserData[n],this.UserData[n]=null),this._h2&&this._h2.get[n]&&(this._h2.get[t]=this._h2.get[n],this._h2.get[t].id=t,delete this._h2.get[n]),this.rowsAr[n]=null,this.rowsAr[t]=r,i=0;i<r.childNodes.length;i++)r.childNodes[i]._code&&(r.childNodes[i]._code=this._compileSCL(r.childNodes[i]._val,r.childNodes[i]));if(this._mat_links&&this._mat_links[n]){u=this._mat_links[n];delete this._mat_links[n];for(f in u)for(i=0;i<u[f].length;i++)this._compileSCL(u[f][i].original,u[f][i])}this.callEvent("onRowIdChange",[n,t])}},this.setColumnIds=function(n){this.columnIds=n.split(this.delim)},this.setColumnId=function(n,t){this.columnIds[n]=t},this.getColIndexById=function(n){for(var t=0;t<this.columnIds.length;t++)if(this.columnIds[t]==n)return t},this.getColumnId=function(n){return this.columnIds[n]},this.getColumnLabel=function(n,t,i,r){for(var f=(i||this.hdr).rows[(t||0)+1],u=0;u<f.cells.length;u++)if(f.cells[u]._cellIndexS==n)return r?f.cells[u].firstChild.innerHTML:_isIE?f.cells[u].innerText:f.cells[u].textContent;return""},this.getColLabel=this.getColumnLabel,this.getFooterLabel=function(n,t,i){return this.getColumnLabel(n,t,this.ftr,i)},this.setRowTextBold=function(n){var t=this.getRowById(n);t&&(t.style.fontWeight="bold")},this.setRowTextStyle=function(n,t){var r=this.getRowById(n),i,u;if(r)for(i=0;i<r.childNodes.length;i++)u=r.childNodes[i]._attrs.style||"",this._hrrar&&this._hrrar[i]&&(u="display:none;"),r.childNodes[i].style.cssText=_isIE?u+"width:"+r.childNodes[i].style.width+";"+t:u+"width:"+r.childNodes[i].style.width+";"+t},this.setRowColor=function(n,t){for(var r=this.getRowById(n),i=0;i<r.childNodes.length;i++)r.childNodes[i].bgColor=t},this.setCellTextStyle=function(n,t,i){var u=this.getRowById(n),r,f;u&&(r=u.childNodes[u._childIndexes?u._childIndexes[t]:t],r)&&(f="",this._hrrar&&this._hrrar[t]&&(f="display:none;"),r.style.cssText=_isIE?f+"width:"+r.style.width+";"+i:f+"width:"+r.style.width+";"+i)},this.setRowTextNormal=function(n){var t=this.getRowById(n);t&&(t.style.fontWeight="normal")},this.doesRowExist=function(n){return this.getRowById(n)!=null?!0:!1},this.getColumnsNum=function(){return this._cCount},this.moveRowUp=function(n){var t=this.getRowById(n),i,r;if(this.isTreeGrid())return this.moveRowUDTG(n,-1);i=this.rowsCol._dhx_find(t);t.previousSibling&&i!=0&&(t.parentNode.insertBefore(t,t.previousSibling),this.rowsCol._dhx_swapItems(i,i-1),this.setSizes(),r=this.rowsBuffer._dhx_find(t),this.rowsBuffer._dhx_swapItems(r,r-1),this._cssEven&&this._fixAlterCss(i-1))},this.moveRowDown=function(n){var t=this.getRowById(n),i,r;if(this.isTreeGrid())return this.moveRowUDTG(n,1);i=this.rowsCol._dhx_find(t);t.nextSibling&&(this.rowsCol._dhx_swapItems(i,i+1),t.nextSibling.nextSibling?t.parentNode.insertBefore(t,t.nextSibling.nextSibling):t.parentNode.appendChild(t),this.setSizes(),r=this.rowsBuffer._dhx_find(t),this.rowsBuffer._dhx_swapItems(r,r+1),this._cssEven&&this._fixAlterCss(i))},this.getCombo=function(n){return this.combos[n]||(this.combos[n]=new dhtmlXGridComboObject),this.combos[n]},this.setUserData=function(n,t,i){n||(n="gridglobaluserdata");this.UserData[n]||(this.UserData[n]=new Hashtable);this.UserData[n].put(t,i)},this.getUserData=function(n,t){n||(n="gridglobaluserdata");this.getRowById(n);var i=this.UserData[n];return i?i.get(t):""},this.setEditable=function(n){this.isEditable=dhx4.s2b(n)},this.selectRowById=function(n,t,i,r){r||(r=!1);this.selectCell(this.getRowById(n),0,r,t,!1,i)},this.clearSelection=function(){var n,t;for(this.editStop(),n=0;n<this.selectedRows.length;n++)t=this.rowsAr[this.selectedRows[n].idd],t&&(t.className=t.className.replace(/[ \t]*rowselected/g,""));this.selectedRows=dhtmlxArray();this.row=null;this.cell!=null&&(this.cell.className=this.cell.className.replace(/[ \t]*cellselected/g,""),this.cell=null);this.callEvent("onSelectionCleared",[])},this.copyRowContent=function(n,t){var r=this.getRowById(n),i;if(this.isTreeGrid())this._copyTreeGridRowContent(r,n,t);else for(i=0;i<r.cells.length;i++)this.cells(t,i).setValue(this.cells(n,i).getValue());_isIE||(this.getRowById(n).cells[0].height=r.cells[0].offsetHeight)},this.setFooterLabel=function(n,t,i){return this.setColumnLabel(n,t,i,this.ftr)},this.setColumnLabel=function(n,t,i,r){var u=(r||this.hdr).rows[i||1],f=u._childIndexes?u._childIndexes[n]:n,e,l,s,h,o,c;u.cells[f]&&(this.useImagesInHeader?(u.cells[f].style.textAlign="left",u.cells[f].innerHTML="<img src='"+t+"'>",s=new Image,s.src=""+t.replace(/(\.[a-z]+)/,".des$1"),this.preloadImagesAr[this.preloadImagesAr.length]=s,h=new Image,h.src=""+t.replace(/(\.[a-z]+)/,".asc$1"),this.preloadImagesAr[this.preloadImagesAr.length]=h):(e="<div class='hdrcell'>",t.indexOf("img:[")!=-1&&(l=t.replace(/.*\[([^>]+)\].*/,"$1"),t=t.substr(t.indexOf("]")+1,t.length),e+="<img width='18px' height='18px' align='absmiddle' src='"+l+"' hspace='2'>"),e+=t,e+="<\/div>",u.cells[f].innerHTML=e,this._hstyles[n]&&(u.cells[f].style.cssText=this._hstyles[n])),(t||"").indexOf("#")!=-1&&(o=t.match(/(^|{)#([^}]+)(}|$)/),o&&(c="_in_header_"+o[2],this[c]&&this[c](this.forceDivInHeader?u.cells[f].firstChild:u.cells[f],f,t.split(o[0])))))},this.setColLabel=function(n,t,i,r){return this.setColumnLabel(n,t,(i||0)+1,r)},this.clearAll=function(n){var r,t,i;if(this.obj.rows[0]){for(this._h2&&(this._h2=this._createHierarchy(),this._fake&&(this._realfake?this._h2=this._fake._h2:this._fake._h2=this._h2)),this.limit=this._limitC=0,this.editStop(!0),this._dLoadTimer&&window.clearTimeout(this._dLoadTimer),this._dload&&(this.objBox.scrollTop=0,this.limit=this._limitC||0,this._initDrF=!0),r=this.rowsCol.length,r=this.obj.rows.length,t=r-1;t>0;t--)i=this.obj.rows[t],i.parentNode.removeChild(i);if(n){for(this._master_row=null,this.obj.rows[0].parentNode.removeChild(this.obj.rows[0]),t=this.hdr.rows.length-1;t>=0;t--)i=this.hdr.rows[t],i.parentNode.removeChild(i);this.ftr&&(this.ftr.parentNode.removeChild(this.ftr),this.ftr=null);this._aHead=this.ftr=this.cellWidth=this._aFoot=null;this.cellType=dhtmlxArray();this._hrrar=[];this.columnIds=[];this.combos=[];this._strangeParams=[];this.defVal=[];this._ivizcol=null}this.row=null;this.cell=null;this.rowsCol=dhtmlxArray();this.rowsAr={};this._RaSeCol=[];this.rowsBuffer=dhtmlxArray();this.UserData=[];this.selectedRows=dhtmlxArray();(this.pagingOn||this._srnd)&&(this.xmlFileUrl="");this.pagingOn&&this.changePage(1);this._contextCallTimer&&window.clearTimeout(this._contextCallTimer);this._sst&&this.enableStableSorting(!0);this._fillers=this.undefined;this.setSortImgState(!1);this.setSizes();this.callEvent("onClearAll",[])}},this.sortField=function(n,t,i){var r,f,u,e,o;if(this.getRowsNum()==0)return!1;if((r=this.hdr.rows[0].cells[n],r)&&r.tagName=="TH"&&this.fldSort.length-1>=r._cellIndex&&this.fldSort[r._cellIndex]!="na"){if(f=this.getSortingState(),u=f[0]==n&&f[1]=="asc"?"des":"asc",!this.callEvent("onBeforeSorting",[n,this.fldSort[n],u]))return;this.sortImg.className="dhxgrid_sort_"+(u=="asc"?"asc":"desc");this.useImagesInHeader&&(e=this.hdr.rows[1].cells[r._cellIndex].firstChild,this.fldSorted!=null&&(o=this.hdr.rows[1].cells[this.fldSorted._cellIndex].firstChild,o.src=o.src.replace(/(\.asc\.)|(\.des\.)/,".")),e.src=e.src.replace(/(\.[a-z]+)$/,"."+u+"$1"));this.sortRows(r._cellIndex,this.fldSort[r._cellIndex],u);this.fldSorted=r;i&&i.tagName.toLowerCase()!="th"&&(this.r_fldSorted=i);var s=this.hdr.rows[1],s=i.parentNode,h=s._childIndexes?s._childIndexes[r._cellIndex]:r._cellIndex;this.setSortImgPos(!1,!1,!1,i)}},this.setCustomSorting=function(n,t){this._customSorts||(this._customSorts=[]);this._customSorts[t]=typeof n=="string"?eval(n):n;this.fldSort[t]="cus"},this.enableHeaderImages=function(n){this.useImagesInHeader=n},this.setHeader=function(n,t,i){var r,h;r=typeof n!="object"?this._eSplit(n):[].concat(n);var u=new Array(0),f=new dhtmlxArray(0),e=new Array(0),o=new Array(0),s=new Array(0);for(h=0;h<r.length;h++)u[u.length]=Math.round(100/r.length),f[f.length]="ed",e[e.length]="left",o[o.length]="middle",s[s.length]="na";this.splitSign=t||"#cspan";this.hdrLabels=r;this.cellWidth=u;this.initCellWidth.length||this.setInitWidthsP(u.join(this.delim),!0);this.cellType=f;this.cellAlign=e;this.cellVAlign=o;this.fldSort=s;this._hstyles=i||[]},this._eSplit=function(n){if(![].push)return n.split(this.delim);var t="r"+(new Date).valueOf(),i=this.delim.replace(/([\|\+\*\^])/g,"\\$1");return(n||"").replace(RegExp(i,"g"),t).replace(RegExp("\\\\"+t,"g"),this.delim).split(t)},this.getColType=function(n){return this.cellType[n]},this.getColTypeById=function(n){return this.cellType[this.getColIndexById(n)]},this.setColTypes=function(n){var t,i;for(this.cellType=dhtmlxArray(n.split(this.delim)),this._strangeParams=[],t=0;t<this.cellType.length;t++)this.cellType[t].indexOf("[")!=-1&&(i=this.cellType[t].split(/[\[\]]+/g),this.cellType[t]=i[0],this.defVal[t]=i[1],i[1].indexOf("=")==0&&(this.cellType[t]="math",this._strangeParams[t]=i[0])),window["eXcell_"+this.cellType[t]]||dhx4.callEvent("onConfigurationError",["Incorrect cell type: "+this.cellType[t],this,this.cellType[t]])},this.setColSorting=function(n){var i,t;for(this.fldSort=n.split(this.delim),i={str:1,int:1,date:1},t=0;t<this.fldSort.length;t++)i[this.fldSort[t]]||typeof window[this.fldSort[t]]!="function"||(this._customSorts||(this._customSorts=[]),this._customSorts[t]=window[this.fldSort[t]],this.fldSort[t]="cus")},this.setColAlign=function(n){this.cellAlign=n.split(this.delim);for(var t=0;t<this.cellAlign.length;t++)this.cellAlign[t]=this.cellAlign[t]._dhx_trim()},this.setColVAlign=function(n){this.cellVAlign=n.split(this.delim)},this.setNoHeader=function(n){this.noHeader=dhx4.s2b(n)},this.showRow=function(n){this.getRowById(n);this._h2&&this.openItem(this._h2.get[n].parent.id);for(var t=this.getRowById(n).childNodes[0];t&&t.style.display=="none";)t=t.nextSibling;t&&this.moveToVisible(t,!0)},this.setStyle=function(n,t,i,r){var e,f,o,u;for(this.ssModifier=[n,t,i,i,r],e=["#"+this.entBox.id+" table.hdr td","#"+this.entBox.id+" table.obj td","#"+this.entBox.id+" table.obj tr.rowselected td.cellselected","#"+this.entBox.id+" table.obj td.cellselected","#"+this.entBox.id+" table.obj tr.rowselected td"],f=0;!_isIE;){try{o=document.styleSheets[f].cssRules.length}catch(s){f++;continue}break}for(u=0;u<e.length;u++)this.ssModifier[u]&&(_isIE?document.styleSheets[0].addRule(e[u],this.ssModifier[u]):document.styleSheets[f].insertRule(e[u]+(" { "+this.ssModifier[u]+" }"),document.styleSheets[f].cssRules.length))},this.setColumnColor=function(n){this.columnColor=n.split(this.delim)},this.enableAlterCss=function(n,t,i,r){(n||t)&&this.attachEvent("onGridReconstructed",function(){this._fixAlterCss();this._fake&&this._fake._fixAlterCss()});this._cssSP=i;this._cssSU=r;this._cssEven=n;this._cssUnEven=t},this._fixAlterCss=function(n){var i,t;if(this._h2&&(this._cssSP||this._cssSU))return this._fixAlterCssTGR(n);if(this._cssEven||this._cssUnEven)for(n=n||0,i=n,t=n;t<this.rowsCol.length;t++)if(this.rowsCol[t]&&this.rowsCol[t].style.display!="none"){if(this.rowsCol[t]._cntr){i=1;continue}this.rowsCol[t].className=this.rowsCol[t].className.indexOf("rowselected")!=-1?i%2==1?this._cssUnEven+" rowselected "+(this.rowsCol[t]._css||""):this._cssEven+" rowselected "+(this.rowsCol[t]._css||""):i%2==1?this._cssUnEven+" "+(this.rowsCol[t]._css||""):this._cssEven+" "+(this.rowsCol[t]._css||"");i++}},this.clearChangedState=function(n){for(var t,u,r,i=0;i<this.rowsCol.length;i++)if(t=this.rowsCol[i],t&&t.childNodes){for(u=t.childNodes.length,r=0;r<u;r++)t.childNodes[r].wasChanged=!1;n&&(t._added=!1)}},this.getChangedRows=function(n){var t=[];return this.forEachRow(function(i){var r=this.rowsAr[i],f,u;if(r.tagName=="TR")if(f=r.childNodes.length,n&&r._added)t[t.length]=r.idd;else for(u=0;u<f;u++)if(r.childNodes[u].wasChanged){t[t.length]=r.idd;break}}),t.join(this.delim)},this._sUDa=!1,this._sAll=!1,this.setSerializationLevel=function(n,t,i,r,u,f){this._sUDa=n;this._sAll=t;this._sConfig=i;this._chAttr=r;this._onlChAttr=u;this._asCDATA=f},this.setSerializableColumns=function(n){if(!n){this._srClmn=null;return}this._srClmn=(n||"").split(",");for(var t=0;t<this._srClmn.length;t++)this._srClmn[t]=dhx4.s2b(this._srClmn[t])},this._serialise=function(){var n,i,t,r;if(this.editStop(),n=[],i="<\/"+this.xml.s_row+">",this.isTreeGrid())this._h2.forEachChildF(0,function(t){var i=this._serializeRow(this.render_row_tree(-1,t.id));return n.push(i),i?!0:!1},this,function(){n.push(i)});else for(t=0;t<this.rowsBuffer.length;t++)if(this.rowsBuffer[t]){if(this._chAttr&&this.rowsBuffer[t]._locator)continue;r=this._serializeRow(this.render_row(t));n.push(r);r&&n.push(i)}return[n.join("")]},this._serializeRow=function(n,t){var i=[],f=this.xml.row_attrs,e=this.xml.cell_attrs,o,s,h,u,r,t,c;if(i.push("<"+this.xml.s_row),i.push(" id='"+n.idd+"'"),this._sAll&&this.selectedRows._dhx_find(n)!=-1&&i.push(" selected='1'"),this._h2&&this._h2.get[n.idd].state=="minus"&&i.push(" open='1'"),f.length)for(t=0;t<f.length;t++)i.push(" "+f[t]+"='"+n._attrs[f[t]]+"'");if(i.push(">"),this._sUDa&&this.UserData[n.idd])for(keysAr=this.UserData[n.idd].getKeys(),o=0;o<keysAr.length;o++)s=keysAr[o],s.indexOf("__")!==0&&i.push("<userdata name='"+s+"'>"+(this._asCDATA?"<![CDATA[":"")+this.UserData[n.idd].get(s)+(this._asCDATA?"]\]>":"")+"<\/userdata>");for(h=!1,u=0;u<this._cCount;u++)if(!this._srClmn||this._srClmn[u]){if(r=this.cells3(n,u),i.push("<cell"),e.length)for(t=0;t<e.length;t++)i.push(" "+e[t]+"='"+r.cell._attrs[e[t]]+"'");if(zxVal=r[this._agetm](),this._asCDATA&&(zxVal="<![CDATA["+zxVal+"]\]>"),this._ecspn&&r.cell.colSpan&&r.cell.colSpan>1&&i.push(' colspan="'+r.cell.colSpan+'" '),this._chAttr?r.wasChanged()&&(i.push(' changed="1"'),h=!0):this._onlChAttr&&r.wasChanged()&&(h=!0),this._sAll&&this.cellType[u]=="tree"?i.push((this._h2?" image='"+this._h2.get[n.idd].image+"'":"")+">"+zxVal+"<\/cell>"):i.push(">"+zxVal+"<\/cell>"),this._ecspn&&r.cell.colSpan)for(c=0;c<r.cell.colSpan-1;c++)i.push("<cell/>"),u++}return this._onlChAttr&&!h&&!n._added?"":i.join("")},this._serialiseConfig=function(){for(var t,r,u,i="<head>",n=0;n<this.hdr.rows[0].cells.length;n++)if(!this._srClmn||this._srClmn[n]){if(t=this.fldSort[n],t=="cus"&&(t=this._customSorts[n].toString(),t=t.replace(/function[\ ]*/,"").replace(/\([^\f]*/,"")),i+="<column width='"+this.getColWidth(n)+"' align='"+this.cellAlign[n]+"' type='"+this.cellType[n]+"' sort='"+(t||"na")+"' color='"+(this.columnColor[n]||"")+"'"+(this.columnIds[n]?" id='"+this.columnIds[n]+"'":"")+">",i+=this._asCDATA?"<![CDATA["+this.getColumnLabel(n)+"]\]>":this.getColumnLabel(n),r=this.getCombo(n),r)for(u=0;u<r.keys.length;u++)i+="<option value='"+r.keys[u]+"'>"+r.values[u]+"<\/option>";i+="<\/column>"}return i+"<\/head>"},this.serialize=function(){var t='<?xml version="1.0"?><rows>',i,n;if(this._agetm=this._mathSerialization?"getMathValue":"getValue",this._sUDa&&this.UserData.gridglobaluserdata)for(i=this.UserData.gridglobaluserdata.getKeys(),n=0;n<i.length;n++)t+="<userdata name='"+i[n]+"'>"+this.UserData.gridglobaluserdata.get(i[n])+"<\/userdata>";return this._sConfig&&(t+=this._serialiseConfig()),t+=this._serialise(),t+"<\/rows>"},this.getPosition=function(n,t){var f;if(!t)return f=dhx4.getOffset(n),[f.left,f.top];t=t||document.body;for(var i=n,r=0,u=0;i&&i!=t;)r+=i.offsetLeft-i.scrollLeft,u+=i.offsetTop-i.scrollTop,i=i.offsetParent;return t==document.body&&(_isIE?(u+=document.body.offsetTop||document.documentElement.offsetTop,r+=document.body.offsetLeft||document.documentElement.offsetLeft):_isFF||(r+=document.body.offsetLeft,u+=document.body.offsetTop)),[r,u]},this.getFirstParentOfType=function(n,t){while(n&&n.tagName!=t&&n.tagName!="BODY")n=n.parentNode;return n},this.objBox.onscroll=function(){this.grid._doOnScroll()},this.hdrBox.onscroll=function(){this._try_header_sync||(this._try_header_sync=!0,Math.abs(this.grid.objBox.scrollLeft-this.scrollLeft)>1&&(this.grid.objBox.scrollLeft=this.scrollLeft),this._try_header_sync=!1)},(!_isOpera||_OperaRv>8.5)&&(this.hdr.onmousemove=function(n){this.grid.changeCursorState(n||window.event)},this.hdr.onmousedown=function(n){return this.grid.startColResize(n||window.event)}),this.obj.onmousemove=this._drawTooltip,this.objBox.onclick=function(n){n=n||event;n.cancelBubble=!0;this.firstChild.grid.setActive(!0);window.dhx4.callEvent("_onGridClick",[n,this.firstChild.grid])},this.obj.onclick=function(n){this.grid._doClick(n||window.event)!==!1&&(this.grid._sclE?this.grid.editCell(n||window.event):this.grid.editStop());n=n||event;n.cancelBubble=!0;window.dhx4.callEvent("_onGridClick",[n,this.grid])},_isMacOS?this.entBox.oncontextmenu=function(n){n.cancelBubble=!0;n.preventDefault?n.preventDefault():n.returnValue=!1;var t=this.grid;return t._realfake&&(t=t._fake),t._doContClick(n||window.event)}:(this.entBox.onmousedown=function(n){return this.grid._doContClick(n||window.event)},this.entBox.oncontextmenu=function(n){return this.grid._ctmndx&&((n||event).cancelBubble=!0),!this.grid._ctmndx}),this.obj.ondblclick=function(n){if(!this.grid.wasDblClicked(n||window.event))return!1;if(this.grid._dclE){var t=this.grid.getFirstParentOfType(_isIE?event.srcElement:n.target,"TR");t==this.grid.row&&this.grid.editCell(n||window.event)}return(n||event).cancelBubble=!0,_isOpera?!1:void 0},this.hdr.onclick=this._onHeaderClick,this.sortImg.onclick=function(){t._onHeaderClick.apply({grid:t},[null,t.r_fldSorted])},this.hdr.ondblclick=this._onHeaderDblClick,document.body._dhtmlxgrid_onkeydown||(dhtmlxEvent(document,"keydown",function(n){if(globalActiveDHTMLGridObject)return globalActiveDHTMLGridObject.doKey(n||window.event)}),document.body._dhtmlxgrid_onkeydown=!0),dhtmlxEvent(document.body,"click",function(){t.editStop&&t.editStop();t.isActive&&t.setActive(!1)}),this.entBox.style.height.toString().indexOf("%")!=-1&&(this._delta_y=this.entBox.style.height),this.entBox.style.width.toString().indexOf("%")!=-1&&(this._delta_x=this.entBox.style.width),(this._delta_x||this._delta_y)&&this._setAutoResize(),this.setColHidden=this.setColumnsVisibility,this.enableCollSpan=this.enableColSpan,this.setMultiselect=this.enableMultiselect,this.setMultiLine=this.enableMultiline,this.deleteSelectedItem=this.deleteSelectedRows,this.getSelectedId=this.getSelectedRowId,this.getHeaderCol=this.getColumnLabel,this.isItemExists=this.doesRowExist,this.getColumnCount=this.getColumnsNum,this.setSelectedRow=this.selectRowById,this.setHeaderCol=this.setColumnLabel,this.preventIECashing=this.preventIECaching,this.enableAutoHeigth=this.enableAutoHeight,this.getUID=this.uid,dhtmlx.image_path&&this.setImagePath(dhtmlx.image_path),dhtmlx.skin&&this.setSkin(dhtmlx.skin),this}function dhtmlXGridCellObject(n){this.destructor=function(){return this.cell.obj=null,this.cell=null,this.grid=null,this.base=null,null};this.cell=n;this.getValue=function(){return this.cell.textContent&&this.cell.textContent.tagName=="TEXTAREA"?this.cell.textContent.value:this.cell.innerHTML._dhx_trim()};this.getMathValue=function(){return this.cell.original?this.cell.original:this.getValue()};this.getFont=function(){return arOut=new Array(3),this.cell.style.fontFamily&&(arOut[0]=this.cell.style.fontFamily),(this.cell.style.fontWeight=="bold"||this.cell.parentNode.style.fontWeight=="bold")&&(arOut[1]="bold"),(this.cell.style.fontStyle=="italic"||this.cell.parentNode.style.fontWeight=="italic")&&(arOut[1]+="italic"),arOut[2]=this.cell.style.fontSize?this.cell.style.fontSize:"",arOut.join("-")};this.getTextColor=function(){return this.cell.style.color?this.cell.style.color:"#000000"};this.getBgColor=function(){return this.cell.style.backgroundColor||"#FFFFFF"};this.getHorAlign=function(){return this.cell.style.textAlign?this.cell.style.textAlign:this.cell.style.textAlign?this.cell.style.textAlign:"left"};this.getWidth=function(){return this.cell.scrollWidth};this.setFont=function(n){fntAr=n.split("-");this.cell.style.fontFamily=fntAr[0];this.cell.style.fontSize=fntAr[fntAr.length-1];fntAr.length==3&&(/bold/.test(fntAr[1])&&(this.cell.style.fontWeight="bold"),/italic/.test(fntAr[1])&&(this.cell.style.fontStyle="italic"),/underline/.test(fntAr[1])&&(this.cell.style.textDecoration="underline"))};this.setTextColor=function(n){this.cell.style.color=n};this.setBgColor=function(n){n==""&&(n=null);this.cell.style.background=n};this.setHorAlign=function(n){this.cell.style.textAlign=n.length==1?n=="c"?"center":n=="l"?"left":"right":n};this.wasChanged=function(){return this.cell.wasChanged?!0:!1};this.isCheckbox=function(){var n=this.cell.firstChild;return n&&n.tagName=="INPUT"?(type=n.type,type=="radio"||type=="checkbox"?!0:!1):!1};this.isChecked=function(){if(this.isCheckbox())return this.cell.firstChild.checked};this.isDisabled=function(){return this.cell._disabled};this.setChecked=function(n){this.isCheckbox()&&(n!="true"&&n!=1&&(n=!1),this.cell.firstChild.checked=n)};this.setDisabled=function(n){n!="true"&&n!=1&&(n=!1);this.isCheckbox()&&(this.cell.firstChild.disabled=n,this.disabledF&&this.disabledF(n));this.cell._disabled=n}}function eXcell(){this.obj=null;this.val=null;this.changeState=function(){return!1};this.edit=function(){this.val=this.getValue()};this.detach=function(){return!1};this.getPosition=function(n){for(var t=n,i=0,r=0;t.tagName!="BODY";)i+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent;return[i,r]}}function eXcell_ed(n){n&&(this.cell=n,this.grid=this.cell.parentNode.grid);this.edit=function(){this.cell.atag=this.grid.multiLine?"TEXTAREA":"INPUT";this.val=this.getValue();this.obj=document.createElement(this.cell.atag);this.obj.setAttribute("autocomplete","off");this.obj.style.height=this.cell.offsetHeight-(this.grid.multiLine?9:4)+"px";this.obj.className="dhx_combo_edit";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.style.textAlign;this.obj.onclick=function(n){(n||event).cancelBubble=!0};this.obj.onmousedown=function(n){(n||event).cancelBubble=!0};this.obj.value=this.val;this.cell.innerHTML="";this.cell.appendChild(this.obj);this.obj.onselectstart=function(n){return n||(n=event),n.cancelBubble=!0,!0};_isIE&&(this.obj.focus(),this.obj.blur());this.obj.focus()};this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()};this.detach=function(){return this.setValue(this.obj.value),this.val!=this.getValue()}}function eXcell_edtxt(n){n&&(this.cell=n,this.grid=this.cell.parentNode.grid);this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent};this.setValue=function(n){n&&n.toString()._dhx_trim()!=""?this.cell._clearCell=!1:(n=" ",this.cell._clearCell=!0);this.setCTxtValue(n)}}function eXcell_edn(n){n&&(this.cell=n,this.grid=this.cell.parentNode.grid);this.getValue=function(){return this.cell.firstChild&&this.cell.firstChild.tagName=="TEXTAREA"?this.cell.firstChild.value:this.cell._clearCell?"":this.cell._orig_value||this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)};this.detach=function(){var n=this.obj.value;return this.setValue(n),this.val!=this.getValue()}}function eXcell_ch(n){n&&(this.cell=n,this.grid=this.cell.parentNode.grid);this.disabledF=function(n){this.cell.innerHTML=n==!0||n==1?this.cell.innerHTML.replace("item_chk0.","item_chk0_dis.").replace("item_chk1.","item_chk1_dis."):this.cell.innerHTML.replace("item_chk0_dis.","item_chk0.").replace("item_chk1_dis.","item_chk1.")};this.changeState=function(n){(n!==!0||this.grid.isActive||(window.globalActiveDHTMLGridObject!=null&&window.globalActiveDHTMLGridObject!=this.grid&&window.globalActiveDHTMLGridObject.isActive&&window.globalActiveDHTMLGridObject.setActive(!1),this.grid.setActive(!0)),!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled())||(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),this.val=="1"?this.setValue("0"):this.setValue("1"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,this.val!="1"]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,this.val!="1"])):this.editor=null)};this.getValue=function(){return this.cell.chstate?this.cell.chstate.toString():"0"};this.isCheckbox=function(){return!0};this.isChecked=function(){return this.getValue()=="1"?!0:!1};this.setChecked=function(n){this.setValue(n.toString())};this.detach=function(){return this.val!=this.getValue()};this.edit=null}function eXcell_ra(n){this.base=eXcell_ch;this.base(n);this.grid=n.parentNode.grid;this.disabledF=function(n){this.cell.innerHTML=n==!0||n==1?this.cell.innerHTML.replace("radio_chk0.","radio_chk0_dis.").replace("radio_chk1.","radio_chk1_dis."):this.cell.innerHTML.replace("radio_chk0_dis.","radio_chk0.").replace("radio_chk1_dis.","radio_chk1.")};this.changeState=function(n){(n!==!1||this.getValue()!=1)&&(!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])!=!1?(this.val=this.getValue(),this.val=="1"?this.setValue("0"):this.setValue("1"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,this.val!="1"]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,this.val!="1"])):this.editor=null))};this.edit=null}function eXcell_txt(n){n&&(this.cell=n,this.grid=this.cell.parentNode.grid);this.edit=function(){var n,t;this.val=this.getValue();this.obj=document.createElement("TEXTAREA");this.obj.className="dhx_textarea";this.obj.onclick=function(n){(n||event).cancelBubble=!0};n=this.grid.getPosition(this.cell);this.obj.value=this.val;this.obj.style.display="";this.obj.style.textAlign=this.cell.style.textAlign;document.body.appendChild(this.obj);_isOpera&&(this.obj.onkeypress=function(n){if(n.keyCode==9||n.keyCode==27)return!1});this.obj.onkeydown=function(n){var t=n||event;if(t.keyCode==9||t.keyCode==27)return globalActiveDHTMLGridObject.entBox.focus(),globalActiveDHTMLGridObject.doKey({keyCode:t.keyCode,shiftKey:t.shiftKey,srcElement:"0"}),!1};this.obj.style.left=n[0]+"px";this.obj.style.top=n[1]+this.cell.offsetHeight+"px";t=this.cell.offsetWidth<200?200:this.cell.offsetWidth;this.obj.style.width=t+16+"px";_isIE&&(this.obj.select(),this.obj.value=this.obj.value);this.obj.focus()};this.detach=function(){var n="";return n=this.obj.value,this.cell._clearCell=n==""?!0:!1,this.setValue(n),document.body.removeChild(this.obj),this.obj=null,this.val!=this.getValue()};this.getValue=function(){return this.obj?this.obj.value:this.cell._clearCell?"":typeof this.cell._brval!="undefined"?this.cell._brval:this.grid.multiLine?this.cell._brval||this.cell.innerHTML.replace(/<br[^>]*>/gi,"\n")._dhx_trim():this.cell._brval||this.cell.innerHTML}}function eXcell_txttxt(n){n&&(this.cell=n,this.grid=this.cell.parentNode.grid);this.getValue=function(){return this.cell.firstChild&&this.cell.firstChild.tagName=="TEXTAREA"?this.cell.firstChild.value:this.cell._clearCell?"":!this.grid.multiLine&&this.cell._brval?this.cell._brval:_isIE?this.cell.innerText:this.cell.textContent};this.setValue=function(n){this.cell._brval=n;n&&n.toString()._dhx_trim()!=""?this.cell._clearCell=!1:(n=" ",this.cell._clearCell=!0);this.setCTxtValue(n)}}function eXcell_co(n){n&&(this.cell=n,this.grid=this.cell.parentNode.grid,this.combo=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),this.editable=!0);this.shiftNext=function(){var n=this.list.options[this.list.selectedIndex+1];return n&&(n.selected=!0),this.obj.value=this.list.options[this.list.selectedIndex].text,!0};this.shiftPrev=function(){if(this.list.selectedIndex!=0){var n=this.list.options[this.list.selectedIndex-1];n&&(n.selected=!0);this.obj.value=this.list.options[this.list.selectedIndex].text}return!0};this.edit=function(){var r,n,t,e;this.val=this.getValue();this.text=this.getText()._dhx_trim();r=this.grid.getPosition(this.cell);this.obj=document.createElement("TEXTAREA");this.obj.className="dhx_combo_edit";this.obj.style.height=this.cell.offsetHeight-(this.grid.multiLine?9:4)+"px";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.style.textAlign;this.obj.onclick=function(n){(n||event).cancelBubble=!0};this.obj.onmousedown=function(n){(n||event).cancelBubble=!0};this.obj.value=this.text;this.obj.onselectstart=function(n){return n||(n=event),n.cancelBubble=!0,!0};n=this;this.obj.onkeyup=function(t){var r=(t||event).keyCode,f,u,i;if(r!=38&&r!=40&&r!=9)for(f=this.readonly?String.fromCharCode(r):this.value,u=n.list.options,i=0;i<u.length;i++)if(u[i].text.indexOf(f)==0)return u[i].selected=!0};this.list=document.createElement("SELECT");this.list.className="dhx_combo_select";this.list.style.width=this.cell.offsetWidth+"px";this.list.style.left=r[0]+"px";this.list.style.top=r[1]+this.cell.offsetHeight+"px";this.list.onclick=function(t){var i=t||window.event,r=i.target||i.srcElement;r.tagName=="OPTION"&&(r=r.parentNode);n.editable=!1;n.grid.editStop();i.cancelBubble=!0};var i=this.combo.getKeys(),f=!1,u=0;for(t=0;t<i.length;t++)e=this.combo.get(i[t]),this.list.options[this.list.options.length]=new Option(e,i[t]),i[t]==this.val&&(u=this.list.options.length-1,f=!0);f==!1&&(this.list.options[this.list.options.length]=new Option(this.text,this.val===null?"":this.val),u=this.list.options.length-1);document.body.appendChild(this.list);this.list.size="6";this.cstate=1;this.editable?this.cell.innerHTML="":(this.obj.style.width="0px",this.obj.style.height="0px");this.cell.appendChild(this.obj);this.list.options[u].selected=!0;this.editable&&(this.obj.focus(),this.obj.focus());this.editable||(this.obj.style.visibility="hidden",this.obj.style.position="absolute",this.list.focus(),this.list.onkeydown=function(t){return t=t||window.event,n.grid.setActive(!0),t.keyCode<30?n.grid.doKey({target:n.cell,keyCode:t.keyCode,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey}):void 0})};this.getValue=function(){return this.cell.combo_value==window.undefined?"":this.cell.combo_value};this.detach=function(){var n,t,i;return this.val!=this.getValue()&&(this.cell.wasChanged=!0),this.list.parentNode!=null&&(this.editable?(n=this.list.options[this.list.selectedIndex],n&&n.text==this.obj.value?this.setValue(this.list.value):(t=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),i=t.values._dhx_find(this.obj.value),i!=-1?this.setValue(t.keys[i]):this.setValue(this.cell.combo_value=this.obj.value))):this.setValue(this.list.value)),this.list.parentNode&&this.list.parentNode.removeChild(this.list),this.obj.parentNode&&this.obj.parentNode.removeChild(this.obj),this.val!=this.getValue()}}function eXcell_coro(n){this.base=eXcell_co;this.base(n);this.editable=!1}function eXcell_cotxt(n){this.base=eXcell_co;this.base(n)}function eXcell_corotxt(n){this.base=eXcell_co;this.base(n);this.editable=!1}function eXcell_cp(n){try{this.cell=n;this.grid=this.cell.parentNode.grid}catch(t){}this.edit=function(){this.val=this.getValue();this.obj=document.createElement("SPAN");this.obj.style.border="1px solid black";this.obj.style.position="absolute";var n=this.grid.getPosition(this.cell);this.colorPanel(4,this.obj);document.body.appendChild(this.obj);this.obj.style.left=n[0]+"px";this.obj.style.zIndex=1e3;this.obj.style.top=n[1]+this.cell.offsetHeight+"px"};this.toolDNum=function(n){return n.length==1&&(n="0"+n),n};this.colorPanel=function(n,t){var u=document.createElement("TABLE"),i,f,h,e,o,s,r;for(t.appendChild(u),u.cellSpacing=0,u.editor_obj=this,u.style.cursor="default",u.onclick=function(n){var i=n||window.event,r=i.target||i.srcElement,t=r.parentNode.parentNode.parentNode.editor_obj;t&&(t.setValue(r._bg),t.grid.editStop())},i=256/n,f=0;f<=256/i;f++)for(h=u.insertRow(f),e=0;e<=256/i;e++)for(o=0;o<=256/i;o++)R=new Number(i*f)-(f==0?0:1),G=new Number(i*e)-(e==0?0:1),B=new Number(i*o)-(o==0?0:1),s=this.toolDNum(R.toString(16))+""+this.toolDNum(G.toString(16))+""+this.toolDNum(B.toString(16)),r=h.insertCell(e),r.width="10px",r.innerHTML="&nbsp;",r.title=s.toUpperCase(),r.style.backgroundColor="#"+s,r._bg="#"+s,this.val!=null&&"#"+s.toUpperCase()==this.val.toUpperCase()&&(r.style.border="2px solid white")};this.getValue=function(){return this.cell.firstChild._bg||""};this.getRed=function(){return Number(parseInt(this.getValue().substr(1,2),16))};this.getGreen=function(){return Number(parseInt(this.getValue().substr(3,2),16))};this.getBlue=function(){return Number(parseInt(this.getValue().substr(5,2),16))};this.detach=function(){return this.obj.offsetParent!=null&&document.body.removeChild(this.obj),this.val!=this.getValue()}}function eXcell_img(n){try{this.cell=n;this.grid=this.cell.parentNode.grid}catch(t){}this.getValue=function(){if(this.cell.firstChild.tagName=="IMG")return this.cell.firstChild.src+(this.cell.titFl!=null?"^"+this.cell._brval:"");if(this.cell.firstChild.tagName=="A"){var n=this.cell.firstChild.firstChild.src+(this.cell.titFl!=null?"^"+this.cell._brval:"");return n+="^"+this.cell.lnk,this.cell.trg&&(n+="^"+this.cell.trg),n}};this.isDisabled=function(){return!0}}function eXcell_icon(n){this.base=eXcell_ed;this.base(n);try{this.cell=n;this.grid=this.cell.parentNode.grid}catch(t){}this.setValue=function(n){this.cell._raw_value=n;this.setCValue('<div class="dhx_grid_icon"><i class="fa fa-'+n.toString()._dhx_trim()+'"><\/i><\/div>')};this.getValue=function(){return this.cell._raw_value};this.isDisabled=function(){return!0}}function eXcell_price(n){this.base=eXcell_ed;this.base(n);this.getValue=function(){return this.cell.childNodes.length>1?this.cell.childNodes[1].innerHTML.toString()._dhx_trim():"0"}}function eXcell_dyn(n){this.base=eXcell_ed;this.base(n);this.getValue=function(){if(!this.cell.firstChild.childNodes[1])return"";var n=this.cell.firstChild.childNodes[1].innerHTML.toString()._dhx_trim(),t=this.grid._aplNFb(n,this.cell._cellIndex);return isNaN(Number(t))?n:t}}function eXcell_ro(n){n&&(this.cell=n,this.grid=this.cell.parentNode.grid);this.edit=function(){};this.isDisabled=function(){return!0};this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()}}function eXcell_ron(n){this.cell=n;this.grid=this.cell.parentNode.grid;this.edit=function(){};this.isDisabled=function(){return!0};this.getValue=function(){return this.cell._clearCell?"":this.cell._orig_value||this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex).toString()}}function eXcell_rotxt(n){this.cell=n;this.grid=this.cell.parentNode.grid;this.edit=function(){};this.isDisabled=function(){return!0};this.setValue=function(n){n?this.cell._clearCell=!1:(n=" ",this.cell._clearCell=!0);this.setCTxtValue(n)};this.getValue=function(){return this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent}}function dhtmlXGridComboObject(){return this.keys=new dhtmlxArray,this.values=new dhtmlxArray,this.put=function(n,t){for(var i=0;i<this.keys.length;i++)if(this.keys[i]==n)return this.values[i]=t,!0;this.values[this.values.length]=t;this.keys[this.keys.length]=n},this.get=function(n){for(var t=0;t<this.keys.length;t++)if(this.keys[t]==n)return this.values[t];return null},this.clear=function(){this.keys=new dhtmlxArray;this.values=new dhtmlxArray},this.remove=function(n){for(var t=0;t<this.keys.length;t++)if(this.keys[t]==n)return this.keys._dhx_removeAt(t),this.values._dhx_removeAt(t),!0},this.size=function(){for(var t=0,n=0;n<this.keys.length;n++)this.keys[n]!=null&&t++;return t},this.getKeys=function(){for(var t=new Array(0),n=0;n<this.keys.length;n++)this.keys[n]!=null&&(t[t.length]=this.keys[n]);return t},this.save=function(){this._save=[];for(var n=0;n<this.keys.length;n++)this._save[n]=[this.keys[n],this.values[n]]},this.restore=function(){if(this._save){this.keys[n]=[];this.values[n]=[];for(var n=0;n<this._save.length;n++)this.keys[n]=this._save[n][0],this.values[n]=this._save[n][1]}},this}function Hashtable(){return this.keys=new dhtmlxArray,this.values=new dhtmlxArray,this}function dragContext(n,t,i,r,u,f,e,o,s,h,c){return this.source=n||"grid",this.target=t||"grid",this.mode=i||"move",this.dropmode=r||"child",this.sid=u||0,this.tid=f,this.sobj=e||null,this.tobj=o||null,this.sExtra=s||null,this.tExtra=h||null,this.before=c||!1,this}function eXcell_stree(n){if(n){if(this.cell=n,this.grid=this.cell.parentNode.grid,!this.grid._sub_trees)return;if(this._sub=this.grid._sub_trees[n._cellIndex],!this._sub)return;this._sub=this._sub[0]}this.getValue=function(){return this.cell._val};this.setValue=function(n){this.cell._val=n;n=this._sub.getItemText(this.cell._val);this.setCValue(n||"&nbsp;",n)};this.edit=function(){var n,t;this._sub.parentObject.style.display="block";n=this.grid.getPosition(this.cell);this._sub.parentObject.style.top=n[1]+"px";this._sub.parentObject.style.left=n[0]+"px";this._sub.parentObject.style.position="absolute";t=this.grid.editStop;this.grid.editStop=function(){};this.grid.editStop=t};this.detach=function(){if(this._sub.parentObject.style.display="none",this.grid._sub_id!=null){var n=this.cell._val;return this.setValue(this._sub.getSelectedItemId()),this.grid._sub_id=null,this.cell._val!=n}}}function eXcell_link(n){this.cell=n;this.grid=this.cell.parentNode.grid;this.isDisabled=function(){return!0};this.edit=function(){};this.getValue=function(){if(this.cell.firstChild.getAttribute){var n=this.cell.firstChild.getAttribute("target");return this.cell.firstChild.innerHTML+"^"+this.cell.firstChild.getAttribute("href")+(n?"^"+n:"")}return""};this.setValue=function(n){if(typeof n!="number"&&(!n||n.toString()._dhx_trim()==""))return this.setCValue("&nbsp;",t),this.cell._clearCell=!0;var t=n.split("^");t.length==1?t[1]="":t.length>1&&(t[1]="href='"+t[1]+"'",t[1]+=t.length==3?" target='"+t[2]+"'":" target='_blank'");this.setCValue("<a "+t[1]+" onclick='(_isIE?event:arguments[0]).cancelBubble = true;'>"+t[0]+"<\/a>",t)}}function eXcell_grid(n){if(n){if(this.cell=n,this.grid=this.cell.parentNode.grid,!this.grid._sub_grids)return;if(this._sub=this.grid._sub_grids[n._cellIndex],!this._sub)return;this._sindex=this._sub[1];this._sub=this._sub[0]}this.getValue=function(){return this.cell.val};this.setValue=function(n){this.cell.val=n;this._sub.getRowById(n)&&(n=this._sub.cells(n,this._sindex),n=n?n.getValue():"");this.setCValue(n||"&nbsp;",n)};this.edit=function(){var n,t;this.val=this.cell.val;this._sub.entBox.style.display="block";n=this.grid.getPosition(this.cell);this._sub.entBox.style.top=n[1]+"px";this._sub.entBox.style.left=n[0]+"px";this._sub.entBox.style.position="absolute";this._sub.setSizes();t=this.grid.editStop;this.grid.editStop=function(){};this._sub.getRowById(this.cell.val)&&this._sub.setSelectedRow(this.cell.val);this._sub.setActive(!0);this.grid.editStop=t};this.detach=function(){var n=this.cell.val;return(this._sub.entBox.style.display="none",this._sub.getSelectedId()===null)?!1:(this.setValue(this._sub.getSelectedId()),this.grid.setActive(!0),this.cell.val!=n)}}function eXcell_dhxCalendar(n){var t,i,r;n&&(this.cell=n,this.grid=this.cell.parentNode.grid,this.grid._grid_calendarA||(t=this.grid._grid_calendarA=new dhtmlxCalendarObject,this.grid.callEvent("onDhxCalendarCreated",[t]),i=this.grid,t.attachEvent("onClick",function(){return this._last_operation_calendar=!0,window.setTimeout(function(){i.editStop()},1),!0}),r=function(n){(n||event).cancelBubble=!0},dhtmlxEvent(t.base,"click",r),t=null))}function eXcell_dhxCalendarA(n){var t,i,r;n&&(this.cell=n,this.grid=this.cell.parentNode.grid,this.grid._grid_calendarA||(t=this.grid._grid_calendarA=new dhtmlxCalendarObject,this.grid.callEvent("onDhxCalendarCreated",[t]),i=this.grid,t.attachEvent("onClick",function(){return this._last_operation_calendar=!0,window.setTimeout(function(){i.editStop()},1),!0}),r=function(n){(n||event).cancelBubble=!0},dhtmlxEvent(t.base,"click",r)))}function eXcell_cntr(n){if(this.cell=n,this.grid=this.cell.parentNode.grid,!this.grid._ex_cntr_ready&&!this._realfake){this.grid._ex_cntr_ready=!0;this.grid._h2&&this.grid.attachEvent("onOpenEn",function(){this.resetCounter(n._cellIndex)});var t=function(){var t=this;return window.setTimeout(function(){t.resetCounter&&(t._fake&&!t._realfake&&n._cellIndex<t._fake._cCount?t._fake.resetCounter(n._cellIndex):t.resetCounter(n._cellIndex))},1),!0};this.grid.attachEvent("onBeforeSorting",t);this.grid.attachEvent("onFilterEnd",t)}this.edit=function(){};this.getValue=function(){return this.cell.innerHTML};this.setValue=function(){this.cell.style.paddingRight="2px";var n=this.cell;window.setTimeout(function(){if(n.parentNode){var t=n.parentNode.rowIndex;((n.parentNode.grid.currentPage||t<0||n.parentNode.grid._srnd)&&(t=n.parentNode.grid.rowsBuffer._dhx_find(n.parentNode)+1),t<=0)||(n.innerHTML=t,n.parentNode.grid._fake&&n._cellIndex<n.parentNode.grid._fake._cCount&&n.parentNode.grid._fake.rowsAr[n.parentNode.idd]&&n.parentNode.grid._fake.cells(n.parentNode.idd,n._cellIndex).setCValue(t),n=null)}},100)}}function eXcell_acheck(n){try{this.cell=n;this.grid=this.cell.parentNode.grid;this.cell.obj=this}catch(t){}this.changeState=function(){!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])!=!1?(this.val=this.getValue(),this.val=="1"?this.setValue("<checkbox state='false'>"):this.setValue("<checkbox state='true'>"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,this.val!="1"]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,this.val!="1"])):this.editor=null)};this.getValue=function(){try{return this.cell.chstate.toString()}catch(n){return null}};this.isCheckbox=function(){return!0};this.isChecked=function(){return this.getValue()=="1"?!0:!1};this.setChecked=function(n){this.setValue(n.toString())};this.detach=function(){return this.val!=this.getValue()};this.drawCurrentState=function(){return this.cell.chstate==1?"<div  onclick='(new eXcell_acheck(this.parentNode)).changeState(); (arguments[0]||event).cancelBubble=true;'  style='cursor:pointer; font-weight:bold; text-align:center; '><span style='height:8px; width:8px; background:green; display:inline-block;'><\/span>&nbsp;Yes<\/div>":"<div  onclick='(new eXcell_acheck(this.parentNode)).changeState(); (arguments[0]||event).cancelBubble=true;' style='cursor:pointer;  text-align:center; '><span style='height:8px; width:8px; background:red; display:inline-block;'><\/span>&nbsp;No<\/div>"}}function eXcell_context(n){if(n){if(this.cell=n,this.grid=this.cell.parentNode.grid,!this.grid._sub_context)return;if(this._sub=this.grid._sub_context[n._cellIndex],!this._sub)return;this._sindex=this._sub[1];this._sub=this._sub[0]}this.getValue=function(){return _isIE?this.cell.innerText:this.cell.textContent};this.setValue=function(n){this.cell._val=n;var t=this._sub.itemPull[this._sub.idPrefix+this.cell._val];n=t?t.title:n;this.setCValue(n||"&nbsp;",n)};this.edit=function(){var n=this.grid.getPosition(this.cell),t;this._sub.showContextMenu(n[0]+this.cell.offsetWidth,n[1]);t=this.grid.editStop;this.grid.editStop=function(){};this.grid.editStop=t};this.detach=function(){if(this.grid._sub_id!=null){var n=this.cell._val;return this.setValue(this.grid._sub_id),this.grid._sub_id=null,this.cell._val!=n}this._sub.hideContextMenu()}}function dhtmlXGridFromTable(n,t){var e,u,d,g,i,h,c,l,r,o,s,w,b,k;typeof n!="object"&&(n=document.getElementById(n));e=document.createElement("DIV");e.setAttribute("width",n.getAttribute("gridWidth")||(n.offsetWidth?n.offsetWidth+"px":0)||(window.getComputedStyle?window.getComputedStyle(n,null).width:n.currentStyle?n.currentStyle.width:0));e.setAttribute("height",n.getAttribute("gridHeight")||(n.offsetHeight?n.offsetHeight+"px":0)||(window.getComputedStyle?window.getComputedStyle(n,null).height:n.currentStyle?n.currentStyle.height:0));e.className=n.className;n.className="";n.id&&(e.id=n.id);u=n;d=n.getAttribute("dragAndDrop");u.parentNode.insertBefore(e,u);g=u.getAttribute("name")||"name_"+(new Date).valueOf();i=new dhtmlXGridObject(e);window[g]=i;h=u.getAttribute("onbeforeinit");c=u.getAttribute("oninit");h&&eval(h);i.setImagePath(i.imgURL||u.getAttribute("imgpath")||u.getAttribute("image_path")||"");l=u.getAttribute("skin");l&&i.setSkin(l);t&&t(i);var f=u.rows[0],nt=[],a="",v="",y="",p="";for(r=0;r<f.cells.length;r++)nt.push(f.cells[r].innerHTML),o=f.cells[r].getAttribute("width")||f.cells[r].offsetWidth||(window.getComputedStyle?window.getComputedStyle(f.cells[r],null).width:f.cells[r].currentStyle?f.cells[r].currentStyle.width:0),a+=(a?",":"")+(o=="*"?o:parseInt(o)),v+=(v?",":"")+(f.cells[r].getAttribute("align")||"left"),y+=(y?",":"")+(f.cells[r].getAttribute("type")||"ed"),p+=(p?",":"")+(f.cells[r].getAttribute("sort")||"str"),s=f.cells[r].getAttribute("format"),s&&(f.cells[r].getAttribute("type").toLowerCase().indexOf("calendar")!=-1?i._dtmask=s:i.setNumberFormat(s,r));return i.setHeader(nt),i.setInitWidths(a),i.setColAlign(v),i.setColTypes(y),i.setColSorting(p),n.getAttribute("gridHeight")=="auto"&&i.enableAutoHeigth(!0),n.getAttribute("multiline")&&i.enableMultiline(!0),w=u.getAttribute("lightnavigation"),w&&i.enableLightMouseNavigation(w),b=u.getAttribute("evenrow"),k=u.getAttribute("unevenrow"),(b||k)&&i.enableAlterCss(b,k),d&&i.enableDragAndDrop(!0),i.init(),n.getAttribute("split")&&i.splitAt(n.getAttribute("split")),i.callEvent("onXLS",[]),i._process_inner_html(u,1),c&&eval(c),n.parentNode&&n.parentNode.removeChild&&n.parentNode.removeChild(n),i.callEvent("onXLE",[]),i}function eXcell_math(n){n&&(this.cell=n,this.grid=this.cell.parentNode.grid);this.edit=function(){this.grid.editor=new eXcell_ed(this.cell);this.grid.editor.fix_self=!0;this.grid.editor.getValue=this.cell.original?function(){return this.cell.original}:this.getValue;this.grid.editor.setValue=this.setValue;this.grid.editor.edit()};this.isDisabled=function(){return!this.grid._mathEdit};this.setValue=function(n){n=this.grid._compileSCL(n,this.cell,this.fix_self);this.grid._strangeParams[this.cell._cellIndex]?this.grid.cells5(this.cell,this.grid._strangeParams[this.cell._cellIndex]).setValue(n):(this.setCValue(n),this.cell._clearCell=!1)};this.getValue=function(){return this.grid._strangeParams[this.cell._cellIndex]?this.grid.cells5(this.cell,this.grid._strangeParams[this.cell._cellIndex]).getValue():this.cell.innerHTML}}function eXcell_time(n){this.base=eXcell_ed;this.base(n);this.getValue=function(){return this.cell.innerHTML.toString()};this.setValue=function(n){var t=new RegExp(" ","i"),u,r,i;if(n=n.replace(t,":"),n=="")n="00:00";else if(t=new RegExp("[a-zA-Z]","i"),u=n.match(t),u)n="00:00";else if(t=new RegExp("[0-9]+[\\.\\/;\\-,_\\]\\[\\?\\: ][0-9]+","i"),u=n.search(t),u!=-1)t=new RegExp("[\\./\\;\\-\\,\\_\\]\\[ \\?]","i"),n=n.replace(t,":");else if(t=new RegExp("[^0-9]","i"),res1=n.search(t),u=n.match(t))n="00:00";else if(n.length==1)n="00:0"+n;else if(parseInt(n)<60)n="00:"+n;else if(n.length<5){for(i=parseInt(n),r=Math.floor(i/60),i=i-60*r,r=r.toString(),i=i.toString();r.length<2;)r="0"+r;while(i.length<2)i="0"+i;n=r+":"+i}this.cell.innerHTML=n}}function eXcell_sub_row(n){n&&(this.cell=n,this.grid=this.cell.parentNode.grid);this.getValue=function(){return this.grid.getUserData(this.cell.parentNode.idd,"__sub_row")};this._setState=function(n,t){(t||this.cell).innerHTML="<img src='"+this.grid.imgURL+n+"' width='18' height='18' />";(t||this.cell).firstChild.onclick=this.grid._expandMonolite};this.open=function(){this.cell.firstChild.onclick(null,!0)};this.close=function(){this.cell.firstChild.onclick(null,!1,!0)};this.isOpen=function(){return!!this.cell.parentNode._expanded};this.setValue=function(n){n&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",n);this._setState(n?"plus.gif":"blank.gif")};this.setContent=function(n){this.cell.parentNode._expanded?(this.cell.parentNode._expanded.innerHTML=n,this.resize()):(this.cell._previous_content=null,this.setValue(n),this.cell._sub_row_type=null)};this.resize=function(){this.grid._detectHeight(this.cell.parentNode._expanded,this.cell,this.cell.parentNode._expanded.scrollHeight)};this.isDisabled=function(){return!0};this.getTitle=function(){return this.grid.getUserData(this.cell.parentNode.idd,"__sub_row")?"click to expand|collapse":""}}function eXcell_sub_row_ajax(n){this.base=eXcell_sub_row;this.base(n);this.setValue=function(n){n&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",n);this.cell._sub_row_type="ajax";this.cell._previous_content=null;this._setState(n?"plus.gif":"blank.gif")}}function eXcell_sub_row_grid(n){this.base=eXcell_sub_row;this.base(n);this.setValue=function(n){n&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",n);this.cell._sub_row_type="grid";this._setState(n?"plus.gif":"blank.gif")};this.getSubGrid=function(){return n._sub_grid?n._sub_grid:null}}function eXcell_ra_str(n){n&&(this.base=eXcell_ra,this.base(n),this.grid=n.parentNode.grid)}function eXcell_combo(n){n&&(this.cell=n,this.grid=n.parentNode.grid,this._combo_pre="",this.edit=function(){window.dhx_globalImgPath||(window.dhx_globalImgPath=this.grid.imgURL);this.val=this.getValue();var n=this.getText();this.cell._clearCell&&(n="");this.cell.innerHTML="";this.combo=this.cell._brval?this.cell._brval:(this.grid._realfake?this.grid._fake:this.grid)._col_combos[this.cell._cellIndex];this.cell.appendChild(this.combo.DOMParent);this.combo.DOMParent.style.margin="0";this.combo.DOMelem_input.focus();this.combo.setSize(this.cell.offsetWidth-2);this.combo._xml?this.combo.setComboText(n):this.combo.getIndexByValue(this.cell.combo_value)!=-1?this.combo.selectOption(this.combo.getIndexByValue(this.cell.combo_value)):this.combo.getOptionByLabel(n)?this.combo.selectOption(this.combo.getIndexByValue(this.combo.getOptionByLabel(n).value)):this.combo.unSelectOption();this.combo.openSelect()},this.selectComboOption=function(n,t){t.selectOption(t.getIndexByValue(t.getOptionByLabel(n).value))},this.getValue=function(){return this.cell.combo_value||""},this.getText=function(){var n=this.cell;return this._combo_pre==""&&n.childNodes[1]?n=n.childNodes[1]:n.childNodes[0].childNodes[1],_isIE?n.innerText:n.textContent},this.setValue=function(n){var i,r,t;typeof n=="object"?(this.cell._brval=this.initCombo(),i=this.cell._cellIndex,r=this.cell.parentNode.idd,n.firstChild?this.cell.combo_value=n.firstChild.data:(this.cell.combo_value="&nbsp;",this.cell._clearCell=!0),this.setComboOptions(this.cell._brval,n,this.grid,i,r)):(this.cell.combo_value=n,t=null,(t=this.cell._brval)&&typeof this.cell._brval=="object"?n=(t.getOption(n)||{}).text||n:(t=this.grid._col_combos[this.cell._cellIndex]||this.grid._fake&&(t=this.grid._fake._col_combos[this.cell._cellIndex]))&&(n=(t.getOption(n)||{}).text||n),(n||"").toString()._dhx_trim()==""&&(n=null),n!==null?this.setComboCValue(n):(this.setComboCValue("&nbsp;",""),this.cell._clearCell=!0))},this.detach=function(){var n=this.combo.getParent(),t;if(n.parentNode==this.cell)this.cell.removeChild(n);else return!1;return t=this.cell.combo_value,this.combo._confirmSelect("blur"),this.combo.getComboText()&&this.combo.getComboText().toString()._dhx_trim()!=""?(this.setComboCValue(this.combo.getComboText().replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.combo.getActualValue()),this.cell._clearCell=!1):(this.setComboCValue("&nbsp;"),this.cell._clearCell=!0),this.cell.combo_value=this.combo.getActualValue(),this.combo.closeAll(),this.grid._still_active=!0,this.grid.setActive(1),t!=this.cell.combo_value})}function eXcell_clist(n){try{this.cell=n;this.grid=this.cell.parentNode.grid}catch(t){}this.edit=function(){var t,u,i,n,f,r,e;if(this.val=this.getValue(),t=this.cell._combo||this.grid.clists[this.cell._cellIndex],t){for(this.obj=document.createElement("DIV"),u=this.val.split(","),i="",n=0;n<t.length;n++){for(f=!1,r=0;r<u.length;r++)t[n]==u[r]&&(f=!0);i+=f?"<div><input type='checkbox' id='dhx_clist_"+n+"' checked='true' /><label for='dhx_clist_"+n+"'>"+t[n]+"<\/label><\/div>":"<div><input type='checkbox' id='dhx_clist_"+n+"'/><label for='dhx_clist_"+n+"'>"+t[n]+"<\/label><\/div>"}i+="<div><input type='button' value='"+(this.grid.applyButtonText||"Apply")+"' style='width:100px; font-size:8pt;' onclick='this.parentNode.parentNode.editor.grid.editStop();'/><\/div>";this.obj.editor=this;this.obj.innerHTML=i;document.body.appendChild(this.obj);this.obj.style.position="absolute";this.obj.className="dhx_clist";this.obj.onclick=function(n){return(n||event).cancelBubble=!0,!0};e=this.grid.getPosition(this.cell);this.obj.style.left=e[0]+"px";this.obj.style.top=e[1]+this.cell.offsetHeight+"px";this.obj.getValue=function(){for(var n="",t=0;t<this.childNodes.length-1;t++)this.childNodes[t].childNodes[0].checked&&(n&&(n+=", "),n+=this.childNodes[t].childNodes[1].innerHTML);return n.replace(/&amp;/g,"&")}}};this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim().replace(/&amp;/g,"&").replace(/, /g,",")};this.detach=function(){return this.obj&&(this.setValue(this.obj.getValue()),this.obj.editor=null,this.obj.parentNode.removeChild(this.obj),this.obj=null),this.val!=this.getValue()}}function eXcell_calck(n){try{this.cell=n;this.grid=this.cell.parentNode.grid}catch(t){}this.edit=function(){this.val=this.getValue();var n=this.grid.getPosition(this.cell);this.obj=new calcX(n[0],n[1]+this.cell.offsetHeight,this,this.val)};this.getValue=function(){return this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)};this.detach=function(){return this.obj&&(this.setValue(this.obj.inputZone.value),this.obj.removeSelf()),this.obj=null,this.val!=this.getValue()}}function calcX(n,t,r,u){if(this.top=t||0,this.left=n||0,this.onReturnSub=r||null,this.operandA=0,this.operandB=0,this.operatorA="",this.state=0,this.dotState=0,this.calckGo=function(){return eval(this.operandA+"*1"+this.operatorA+this.operandB+"*1")},this.isNumeric=function(n){return n.search(/[^1234567890]/gi)==-1?!0:!1},this.isOperation=function(n){return n.search(/[^\+\*\-\/]/gi)==-1?!0:!1},this.onCalcKey=function(n){that=this.calk;var t=this.innerHTML,i=that.inputZone;(that.state==0||that.state==2)&&that.isNumeric(t)&&(i.value!="0"?i.value+=t:i.value=t);(that.state==0||that.state==2)&&t=="."&&that.dotState==0&&(that.dotState=1,i.value+=t);t=="C"&&(i.value=0,that.dotState=0,that.state=0);that.state==0&&that.isOperation(t)&&(that.operatorA=t,that.operandA=i.value,that.state=1);that.state==2&&that.isOperation(t)&&(that.operandB=i.value,i.value=that.calckGo(),that.operatorA=t,that.operandA=i.value,that.state=1);that.state==2&&t=="="&&(that.operandB=i.value,i.value=that.calckGo(),that.operatorA=t,that.operandA=i.value,that.state=3);that.state==1&&that.isNumeric(t)&&(i.value=t,that.state=2,that.dotState=0);that.state==3&&that.isNumeric(t)&&(i.value=t,that.state=0);that.state==3&&that.isOperation(t)&&(that.operatorA=t,that.operandA=i.value,that.state=1);t=="e"&&(i.value=Math.E,that.state==1&&(that.state=2),that.dotState=0);t=="p"&&(i.value=Math.PI,that.state==1&&(that.state=2),that.dotState=0);t=="Off"&&that.topNod.parentNode.removeChild(that.topNod);(n||event)&&((n||event).cancelBubble=!0)},this.sendResult=function(){var n,t;that=this.calk;that.state==2&&(n=that.inputZone,that.operandB=n.value,n.value=that.calckGo(),that.operatorA=t,that.operandA=n.value,that.state=3);t=that.inputZone.value;that.topNod.parentNode.removeChild(that.topNod);that.onReturnSub.grid.editStop(!1)},this.removeSelf=function(){this.topNod.parentNode&&this.topNod.parentNode.removeChild(this.topNod)},this.keyDown=function(){this.className="calcPressed"},this.keyUp=function(){this.className="calcButton"},this.init_table=function(){var n=this.topNod.childNodes[0];if(n&&n.tagName=="TABLE"){for(i=1;i<n.childNodes[0].childNodes.length;i++)for(j=0;j<n.childNodes[0].childNodes[i].childNodes.length;j++)n.childNodes[0].childNodes[i].childNodes[j].onclick=this.onCalcKey,n.childNodes[0].childNodes[i].childNodes[j].onmousedown=this.keyDown,n.childNodes[0].childNodes[i].childNodes[j].onmouseout=this.keyUp,n.childNodes[0].childNodes[i].childNodes[j].onmouseup=this.keyUp,n.childNodes[0].childNodes[i].childNodes[j].calk=this;this.inputZone=this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0];this.onReturnSub?(this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].onclick=this.sendResult,this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].calk=this):this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].innerHTML=""}},this.drawSelf=function(){var n=document.createElement("div");n.className="calcTable";n.style.position="absolute";n.style.top=this.top+"px";n.style.left=this.left+"px";n.innerHTML="<table cellspacing='0' id='calc_01' class='calcTable'><tr><td colspan='4'><table cellpadding='1' cellspacing='0' width='100%'><tr><td width='100%' style='overflow:hidden;'><input style='width:100%' class='calcInput' value='0' align='right' readonly='true' style='text-align:right'><\/td><td class='calkSubmit'>=<\/td><\/tr><\/table><\/td><\/tr><tr><td class='calcButton' width='25%'>Off<\/td><td class='calcButton' width='25%'>p<\/td><td class='calcButton' width='25%'>e<\/td><td class='calcButton' width='25%'>/<\/td><\/tr><tr><td class='calcButton'>7<\/td><td class='calcButton'>8<\/td><td class='calcButton'>9<\/td><td class='calcButton'>*<\/td><\/tr><tr><td class='calcButton'>4<\/td><td class='calcButton'>5<\/td><td class='calcButton'>6<\/td><td class='calcButton'>+<\/td><\/tr><tr><td class='calcButton'>1<\/td><td class='calcButton'>2<\/td><td class='calcButton'>3<\/td><td class='calcButton'>-<\/td><\/tr><tr><td class='calcButton'>0<\/td><td class='calcButton'>.<\/td><td class='calcButton'>C<\/td><td class='calcButton'>=<\/td><\/tr><\/table>";n.onclick=function(n){(n||event).cancelBubble=!0};document.body.appendChild(n);this.topNod=n},this.drawSelf(),this.init_table(),u){var f=this.inputZone;f.value=u*1;this.operandA=u*1;this.state=3}return this}function dhtmlxHierarchy(n){var t={id:0,childs:[],level:-1,parent:null,index:0,state:n._emptyLineImg};return this.order=[t],this.get={"0":t},this.swap=function(n,t){var i=n.parent,r=n.index;i.childs[r]=t;i.childs[t.index]=n;n.index=t.index;t.index=r},this.forEachChildF=function(n,t,i,r){for(var f=this.get[n],u=0;u<f.childs.length;u++)t.apply(i||this,[f.childs[u]])&&(f.childs[u].childs.length&&this.forEachChildF(f.childs[u].id,t,i,r),r&&r.call(i||this,f.childs[u]))},this.forEachChild=function(n,t,i){for(var u=this.get[n],r=0;r<u.childs.length;r++)t.apply(i||this,[u.childs[r]]),u.childs[r].childs.length&&this.forEachChild(u.childs[r].id,t,i)},this.change=function(n,t,i){var r=this.get[n];r[t]!=i&&(r[t]=i,r.update=!0)},this.add=function(n,t){return this.addAfter(n,t)},this.addAfter=function(t,i,r,u){var f=this.get[i||0],e,o,s;if(e=r?this.get[r].index+(u?0:1):f.childs.length,o={id:t,childs:[],level:f.level+1,parent:f,index:e,state:n._emptyLineImg},f.state==n._emptyLineImg&&this.change(i,"state",i==0?"minus":"plus"),r){for(s=e;s<f.childs.length;s++)f.childs[s].index++;f.childs=f.childs.slice(0,e).concat([o]).concat(f.childs.slice(e,f.childs.length))}else f.childs.push(o);return this.get[t]=o,o},this.addBefore=function(n,t,i){return this.addAfter(n,t,i,!0)},this.remove=function(n){for(var t=this.get[n||0],i=0;i<t.childs.length;i++)this.deleteAll(t.childs[i].id);for(t.childs=[],t.parent.childs=t.parent.childs.slice(0,t.index).concat(t.parent.childs.slice(t.index+1)),i=t.index;i<t.parent.childs.length;i++)t.parent.childs[i].index--;delete this.get[n]},this.deleteAll=function(n){for(var t=this.get[n||0],i=0;i<t.childs.length;i++)this.deleteAll(t.childs[i].id);t.childs=[];delete this.get[n]},this}function eXcell_tree(n){n&&(this.cell=n,this.grid=this.cell.parentNode.grid);this.isDisabled=function(){return this.cell._disabled||this.grid._edtc};this.edit=function(){this.er||this.grid._edtc||(this.er=this.cell.parentNode.valTag,this.val=this.getLabel(),this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA",this.er.innerHTML="<"+this.cell.atag+" class='dhx_combo_edit' type='text' style='height:"+(this.cell.offsetHeight-4)+"px;line-height:"+(this.cell.offsetHeight-6)+"px; width:100%; border:0px; margin:0px; padding:0px; overflow:hidden;'><\/"+this.cell.atag+">",this.er.childNodes[0].onmousedown=function(n){(n||event).cancelBubble=!0},this.er.childNodes[0].onselectstart=function(n){return n||(n=event),n.cancelBubble=!0,!0},this.er.className+=" editable",this.er.firstChild.onclick=function(n){(n||event).cancelBubble=!0},this.er.firstChild.value=this.val,this.obj=this.er.firstChild,this.er.firstChild.style.width=Math.max(0,this.cell.offsetWidth-this.er.offsetLeft-2)+"px",this.er.firstChild.focus(),_isIE&&this.er.firstChild.focus())};this.detach=function(){if(this.er){this.setLabel(this.er.firstChild.value);this.er.className=this.er.className.replace("editable","");var n=this.val!=this.er.innerHTML;return this.obj=this.er=null,n}};this.getValue=function(){return this.getLabel()};this.setImage=function(n){this.cell.parentNode.imgTag.nextSibling.src=this.grid.iconURL+n;this.grid._h2.get[this.cell.parentNode.idd].image=n};this.setIcon=function(n){this.grid._h2.get[this.cell.parentNode.idd].icon=n;this.cell.parentNode.imgTag.nextSibling.className="dhx_treegrid_icon fa fa-"+n};this.getImage=function(){return this.grid._h2.get[this.cell.parentNode.idd].image};this.getIcon=function(){return this.grid._h2.get[this.cell.parentNode.idd].icon};this.setLabel=function(n){this.setValueA(n)};this.getLabel=function(){return this.cell.parentNode.valTag.innerHTML}}function dhtmlXForm(n,t,i){var u,r;this.idef={position:"label-left",labelWidth:"auto",labelHeight:"auto",inputWidth:"auto",inputHeight:"auto",labelAlign:"left",noteWidth:"auto",offsetTop:0,offsetLeft:0,blockOffset:20};this.idef_const={offsetNested:20};this.apos_css={"label-left":"dhxform_item_label_left","label-right":"dhxform_item_label_right","label-top":"dhxform_item_label_top","label-bottom":"dhxform_item_label_bottom",absolute:"dhxform_item_absolute"};this.align_css={left:"dhxform_label_align_left",center:"dhxform_label_align_center",right:"dhxform_label_align_right"};u=this;this.setSkin=function(n){this.skin=n;this.cont.className="dhxform_obj_"+this.skin;this.cont.style.fontSize=n=="material"?"14px":n=="dhx_terrace"?"13px":"12px";this._updateBlocks();this.forEachItem(function(t){var i=u.getItemType(t);typeof u.items[i]!="undefined"&&typeof u.items[i].setSkin=="function"&&u.doWithItem(t,"setSkin",n)})};this.skin=i||window.dhx4.skin||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_form")||"material";this.separator=",";this.live_validate=!1;this._type="checkbox";this._rGroup="default";this._idIndex={};this._indexId=[];this.cont=typeof n=="object"?n:document.getElementById(n);n._isNestedForm||(this._parentForm=!0,this.cont.style.fontSize=this.skin=="material"?"14px":this.skin=="dhx_terrace"?"13px":"12px",this.cont.className="dhxform_obj_"+this.skin,this.setFontSize=function(n){this.cont.style.fontSize=n;this._updateBlocks()},this.getForm=function(){return this},this.cont.onkeypress=function(n){if(n=n||event,n.keyCode==13){var t=n.target||n.srcElement;if(typeof t.tagName!="undefined"&&String(t.tagName).toLowerCase()=="textarea"&&!n.ctrlKey)return;u.callEvent("onEnter",[])}});this.b_index=null;this.base=[];this._prepare=function(n,t){var u,i,e,r,f,o;if(this.b_index==null?this.b_index=0:this.b_index++,u=null,i=null,t!=null)for(t<0&&(t=0),e=0,r=0;r<this.cont.childNodes.length;r++)for(f=0;f<this.cont.childNodes[r].childNodes.length;f++)i==null&&this.cont.childNodes[r].childNodes[f]._isNestedForm!=!0&&(e==t&&(u=this.cont.childNodes[r].nextSibling,i=this.cont.childNodes[r].childNodes[f]),e++);if(this.base[this.b_index]=document.createElement("DIV"),this.base[this.b_index].className="dhxform_base",typeof n!="undefined"&&(this.base[this.b_index].style.cssText+=" margin-left:"+n+"px!important;"),u!=null?(this.cont.insertBefore(this.base[this.b_index],u),u=null):this.cont.appendChild(this.base[this.b_index]),i!=null)while(i!=null)o=i,i=i.nextSibling,this.base[this.b_index].appendChild(o),o=null};this.setSizes=function(){};this._mergeSettings=function(n){var r=-1,u={type:"settings"},t;for(var i in this.idef)u[i]=this.idef[i];for(t=0;t<n.length;t++)if(typeof n[t]!="undefined"&&n[t].type=="settings"){for(i in n[t])u[i]=n[t][i];r=t}return n[r>=0?r:n.length]=u,n};this._genStr=function(n){for(var t="dhxId_",i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",r=0;r<n;r++)t+=i.charAt(Math.floor(Math.random()*i.length));return t};this.idPrefix="dhxForm_"+this._genStr(12)+"_";this._rId=this._parentForm?this._genStr(12)+"_":n._rId;this.objPull={};this.itemPull={};this._ic=0;this._addItem=function(n,t,i,r,f,e,o){var y,h,v,l,s,p,a,c,w;if(this.items[n]._index&&(this.getForm()._indexId.push(t),this.getForm()._idIndex[t]={ind:this.getForm()._indexId.length-1}),n||(n=this._type),n=="list"&&f!=null&&this.itemPull[this.idPrefix+f]!=null&&typeof this.itemPull[this.idPrefix+f]._addSubListNode=="function")s=this.itemPull[this.idPrefix+f]._addSubListNode();else if(n=="newcolumn")s={};else{if(this.b_index==null&&this._prepare(),y=this.base[this.b_index],h=null,typeof e=="undefined"||isNaN(e)||n=="list"){if(n=="list")for(c in this.itemPull)c==this.idPrefix+t&&(h=this.itemPull[c].nextSibling,this.itemPull[c]._listBase!=null&&this.itemPull[c]._listBase.length>0&&(h=this.itemPull[c]._listBase[this.itemPull[c]._listBase.length-1]))}else for(e=Math.max(parseInt(e),0)+1,v=0;v<this.cont.childNodes.length;v++)for(l=0;l<this.cont.childNodes[v].childNodes.length;l++)h==null&&this.cont.childNodes[v].childNodes[l]._isNestedForm!=!0&&(e--,e==0&&(h=this.cont.childNodes[v].childNodes[l],y=this.cont.childNodes[v]));s=document.createElement("DIV");o==!0&&h!=null&&(h=h.nextSibling);h!=null?y.insertBefore(s,h):y.appendChild(s)}if(s._idd=t,s._rId=this._rId,typeof s.style!="undefined"&&(typeof i.offsetLeft=="undefined"&&this.idef.offsetLeft>0&&(i.offsetLeft=this.idef.offsetLeft),typeof i.offsetTop=="undefined"&&this.idef.offsetTop>0&&(i.offsetTop=this.idef.offsetTop),p="",typeof i.offsetLeft!="undefined"&&(p+=" padding-left:"+i.offsetLeft+"px!important;"),typeof i.offsetTop!="undefined"&&(p+=" padding-top:"+i.offsetTop+"px!important;"),s.style.cssText+=p),n=="block"&&isNaN(i.blockOffset)&&(i.blockOffset=this.idef.blockOffset),n=="list")return typeof s._ofsNested=="undefined"&&(s._ofsNested=this.idef_const.offsetNested),r!=null&&(s._sId=r),a=this.items[n].render(s,this.skin),this.itemPull[this.idPrefix+t]._listObj||(this.itemPull[this.idPrefix+t]._listObj=[]),this.itemPull[this.idPrefix+t]._list||(this.itemPull[this.idPrefix+t]._list=[]),this.itemPull[this.idPrefix+t]._listBase||(this.itemPull[this.idPrefix+t]._listBase=[]),this.itemPull[this.idPrefix+t]._listObj.push(a[0]),this.itemPull[this.idPrefix+t]._list.push(a[1]),this.itemPull[this.idPrefix+t]._listBase.push(s),a[1].checkEvent=function(n){return u.checkEvent(n)},a[1].callEvent=function(n,t){return u.callEvent(n,t)},a[1].getForm=function(){return u.getForm()},a[1]._initObj(this._mergeSettings(i)),s._inBlcok&&(s.className+=" in_block"),a[1];if(n=="newcolumn"){this._prepare(i.offset,e);return}if(n=="label"&&this._ic++==0&&(i._isTopmost=!0),i.position=this.apos_css[!i.position||!this.apos_css[i.position]?this.idef.position:i.position],s.className=i.position+(typeof i.className=="string"?" "+i.className:""),i.labelWidth||(i.labelWidth=this.idef.labelWidth),i.labelHeight||(i.labelHeight=this.idef.labelHeight),typeof i.wrap!="undefined"&&(i.wrap=window.dhx4.s2b(i.wrap)),i.labelAlign=this.align_css[i.labelAlign]?this.align_css[i.labelAlign]:this.align_css[this.idef.labelAlign],i.inputWidth=i.width?i.width:i.inputWidth?i.inputWidth:this.idef.inputWidth,i.inputHeight||(i.inputHeight=this.idef.inputHeight),typeof i.note!="undefined"&&(i.note.length!=null&&i.note[0]!=null&&(i.note=i.note[0]),typeof i.note.width=="undefined"&&(i.note.width=this.idef.noteWidth),i.note.width=="auto"&&(i.note.width=i.inputWidth)),s.checkEvent=function(n){return u.checkEvent(n)},s.callEvent=function(n,t){return u.callEvent(n,t)},s.getForm=function(){return u.getForm()},s._autoCheck=function(n){u._autoCheck(n)},typeof i.readonly=="string"&&(i.readonly=window.dhx4.s2b(i.readonly)),typeof i.autoStart=="string"&&(i.autoStart=window.dhx4.s2b(i.autoStart)),typeof i.autoRemove=="string"&&(i.autoRemove=window.dhx4.s2b(i.autoRemove)),typeof i.titleScreen=="string"&&(i.titleScreen=window.dhx4.s2b(i.titleScreen)),typeof i.info=="string"&&(i.info=window.dhx4.s2b(i.info)),typeof i.hidden=="string"&&(i.hidden=window.dhx4.s2b(i.hidden)),typeof i.checked=="string"&&(i.checked=window.dhx4.s2b(i.checked)),typeof i.userdata!="undefined")for(c in i.userdata)this.getForm().setUserData(t,c,i.userdata[c]);if(i.validate&&(s._validate=typeof(i.validate!="undefined")&&(typeof i.validate=="function"||typeof window[i.validate]=="function")?[i.validate]:String(i.validate).split(this.separator)),typeof i.required!="undefined"&&(typeof i.required=="string"&&(i.required=window.dhx4.s2b(i.required)),s._required=i.required==!0),s._required){for(s._validate||(s._validate=[]),w=!1,l=0;l<s._validate.length;l++)w=w||s._validate[l]=="NotEmpty";w||s._validate.push("NotEmpty")}s._ll=i.position==this.apos_css["label-left"]||i.position==this.apos_css["label-top"];this.objPull[this.idPrefix+t]=this.items[n].render(s,i);this.itemPull[this.idPrefix+t]=s};this._initObj=function(n,t){var r,u,i;if(typeof n.data!="undefined"){r=null;typeof t!="undefined"&&(r=t.match(/(\?|\&)id\=([a-z0-9_\-]*)/i),r!=null&&r[0]!=null&&(r=r[0].split("=")[1]));this.callEvent("onBeforeDataLoad",[r,window.dhx4._copyObj(n.data)])===!0&&(this.formId=r,this._last_load_data=n,this.setFormData(n.data),this.resetDataProcessor("updated"));return}for(this._prepare(),i=0;i<n.length;i++)if(typeof n[i]!="undefined"&&n[i].type=="settings")for(u in n[i])this.idef[u]=n[i][u];for(i=0;i<n.length;i++)this._prepareItem(n[i]);this._autoCheck()};this._prepareItem=function(n,t,i){var o=n!=null&&n.type!=null?n.type:"",f,r,u,e;if(this.items[o]){for(n.name||(n.name=this._genStr(12)),f=n.name,(this.objPull[this.idPrefix+f]!=null||o=="radio")&&(f=this._genStr(12)),r=n,r.label=r.label||"",r.value=r.value,r.checked=window.dhx4.s2b(r.checked),r.disabled=window.dhx4.s2b(r.disabled),r.name=r.name||this._genStr(12),r.options=r.options||[],r.rows=r.rows||"none",r.uid=this._genStr(12),this._addItem(o,f,r,null,null,t,i),t=null,this._parentEnabled===!1&&this._disableItem(f),u=0;u<r.options.length;u++)r.options[u].list!=null&&(r.options[u].value||(r.options[u].value=this._genStr()),e=this._addItem("list",f,r.options[u].list,r.options[u].value,null),e._subSelect=!0,e._subSelectId=r.options[u].value);n.list!=null&&(n.listParent||(n.listParent=r.name),e=this._addItem("list",f,n.list,null,n.listParent))}};this._xmlSubItems={item:"list",option:"options",note:"note",userdata:"_userdata"};this._xmlToObject=function(n,t){var r,u,s,a,c,f,e,v,y,l,h,o,i,p,w;if(typeof t=="undefined"&&(t=!0),t?(r=n.getElementsByTagName("items"),r=r!=null&&r[0]!=null?r[0]:null,u=n.getElementsByTagName("data"),u=u!=null&&u[0]!=null?u[0]:null):r=n,s=t?[]:{},r!=null)for(i=0;i<r.childNodes.length;i++)if(typeof r.childNodes[i].tagName!="undefined"&&(a=r.childNodes[i].tagName,this._xmlSubItems[a]!=null)){for(c=this._xmlSubItems[a],typeof s[c]=="undefined"&&(s[c]=[]),f=r.childNodes[i],e={},o=0;o<f.attributes.length;o++)v=f.attributes[o].name,y=f.attributes[o].value,e[v]=y;c=="note"&&(e.text=f.firstChild.nodeValue);c=="_userdata"&&(e.value=f.firstChild!=null&&f.firstChild.nodeValue!=null?f.firstChild.nodeValue:"");l=this._xmlToObject(f,!1);for(h in l)if(h=="_userdata")for(e.userdata||(e.userdata={}),o=0;o<l[h].length;o++)e.userdata[l[h][o].name]=l[h][o].value;else e[h]=l[h];f=null;t?s.push(e):s[c].push(e)}if(u!=null)for(s={data:{}},i=0;i<u.childNodes.length;i++)typeof u.childNodes[i].tagName!="undefined"&&(p=u.childNodes[i].tagName,w=u.childNodes[i].firstChild!=null?u.childNodes[i].firstChild.nodeValue:"",s.data[p]=w);return s};this._autoCheck=function(n){var t,f,o,i,u,r,e;this._locked===!0?n=!1:typeof n=="undefined"&&(n=!0);for(t in this.itemPull)if(f=n&&this.itemPull[t]._udis!==!0,this[f?"_enableItem":"_disableItem"](this.itemPull[t]._idd),this.getForm()._idIndex[this.itemPull[t]._idd]!=null&&(this.getForm()._idIndex[this.itemPull[t]._idd].enabled=f),o=f&&(typeof this.itemPull[t]._checked=="boolean"?this.itemPull[t]._checked:!0),this.itemPull[t]._list)for(i=0;i<this.itemPull[t]._list.length;i++){if(u=!0,this.itemPull[t]._list[i]._subSelect==!0){for(u=!1,r=this.getItemValue(this.itemPull[t]._idd),typeof r=="object"&&typeof r.length=="number"||(r=[r]),e=0;e<r.length;e++)u=r[e]==this.itemPull[t]._list[i]._subSelectId||u;this.itemPull[t]._listObj[i][u?"show":"hide"](this.itemPull[t]._listBase[i])}this.itemPull[t]._list[i]._autoCheck(o&&u)}};this.doWithItem=function(n,t,i,r,u,f){var o,e,s,h;if(typeof n=="object"){var l=n[0],c=n[1],o=null;for(e in this.itemPull){if((this.itemPull[e]._value==c||c===null)&&this.itemPull[e]._group==l)return this.objPull[e][t](this.itemPull[e],i,r,u,f);if(this.itemPull[e]._list!=null&&!o)for(s=0;s<this.itemPull[e]._list.length;s++)o=this.itemPull[e]._list[s].doWithItem(n,t,i,r,u)}if(o!=null)return o;if(t=="getType")return this.doWithItem(n[0],"getType")}else if(this.itemPull[this.idPrefix+n]){if(h=this.objPull[this.idPrefix+n],h&&h[t])return h[t](this.itemPull[this.idPrefix+n],i,r,u,f)}else{o=null;for(e in this.itemPull)if(this.itemPull[e]._list&&!o)for(s=0;s<this.itemPull[e]._list.length;s++)o==null&&(o=this.itemPull[e]._list[s].doWithItem(n,t,i,r,u,f));return o}};this._removeItem=function(n,t){t!=null?n=this.doWithItem([n,t],"destruct"):this.doWithItem(n,"destruct");this._clearItemData(n)};this._clearItemData=function(n){var t,i;if(this.itemPull[this.idPrefix+n]){n=this.idPrefix+n;try{this.objPull[n]=null;this.itemPull[n]=null;delete this.objPull[n];delete this.itemPull[n]}catch(r){}}else for(t in this.itemPull)if(this.itemPull[t]._list)for(i=0;i<this.itemPull[t]._list.length;i++)this.itemPull[t]._list[i]._clearItemData(n)};this.isItem=function(n,t){return t!=null&&(n=[n,t]),this.doWithItem(n,"isExist")};this.getItemType=function(n,t){return n=[n,t||null],this.doWithItem(n,"getType")};this.forEachItem=function(n){var t,i;for(t in this.objPull)if(this.objPull[t].t=="radio"?n(this.itemPull[t]._group,this.itemPull[t]._value):n(String(t).replace(this.idPrefix,"")),this.itemPull[t]._list)for(i=0;i<this.itemPull[t]._list.length;i++)this.itemPull[t]._list[i].forEachItem(n)};this.setItemLabel=function(n,t,i){i!=null?n=[n,t]:i=t;this.doWithItem(n,"setText",i)};this.getItemLabel=function(n,t){return t!=null&&(n=[n,t]),this.doWithItem(n,"getText")};this._enableItem=function(n){this.doWithItem(n,"enable")};this._disableItem=function(n){this.doWithItem(n,"disable")};this._isItemEnabled=function(n){return this.doWithItem(n,"isEnabled")};this.checkItem=function(n,t){t!=null&&(n=[n,t]);this.doWithItem(n,"check");this._autoCheck()};this.uncheckItem=function(n,t){t!=null&&(n=[n,t]);this.doWithItem(n,"unCheck");this._autoCheck()};this.isItemChecked=function(n,t){return t!=null&&(n=[n,t]),this.doWithItem(n,"isChecked")};this.getCheckedValue=function(n){return this.doWithItem([n,null],"getChecked")};this._getRGroup=function(n,t){var i,r,u;for(i in this.itemPull){if(this.itemPull[i]._group==n&&(t==null||this.itemPull[i]._value==t))return this.itemPull[i]._idd;if(this.itemPull[i]._list!=null)for(r=0;r<this.itemPull[i]._list.length;r++)if(u=this.itemPull[i]._list[r]._getRGroup(n,t),u!=null)return u}return null};this.setItemValue=function(n,t){return(this.resetValidateCss(n,t),this.getItemType(n)=="radio")?(this._getRGroup(n,t)!=null?this.checkItem(n,t):this.uncheckItem(n,this.getCheckedValue(n)),null):this.doWithItem(n,"setValue",t)};this.getItemValue=function(n,t){return this.getItemType(n)=="radio"?this.getCheckedValue(n):this.doWithItem(n,"getValue",t)};this.updateValues=function(){this._updateValues()};this.showItem=function(n,t){t!=null&&(n=[n,t]);this.doWithItem(n,"show")};this.hideItem=function(n,t){t!=null&&(n=[n,t]);this.doWithItem(n,"hide")};this.isItemHidden=function(n,t){return t!=null&&(n=[n,t]),this.doWithItem(n,"isHidden")};this.getOptions=function(n){return this.doWithItem(n,"getOptions")};this.setItemWidth=function(n,t){this.doWithItem(n,"setWidth",t)};this.getItemWidth=function(n){return this.doWithItem(n,"getWidth")};this.setItemHeight=function(n,t){this.doWithItem(n,"setHeight",t)};this.setItemFocus=function(n,t){t!=null&&(n=[n,t]);this.doWithItem(n,"setFocus")};this._updateValues=function(){var n,t;for(n in this.itemPull)if(this.objPull[n]&&typeof this.objPull[n].updateValue=="function"&&this.objPull[n].updateValue(this.itemPull[n]),this.itemPull[n]._list)for(t=0;t<this.itemPull[n]._list.length;t++)this.itemPull[n]._list[t]._updateValues()};this._getItemByName=function(n){var t,i,r;for(t in this.itemPull){if(this.itemPull[t]._idd==n)return this.itemPull[t];if(this.itemPull[t]._list!=null)for(i=0;i<this.itemPull[t]._list.length;i++)if(r=this.itemPull[t]._list[i]._getItemByName(n),r!=null)return r}return null};this._resetValidateCss=function(n){n.className=n.className.replace(n._vcss,"");n._vcss=null};this.setValidateCss=function(n,t,i){var r=this._getItemByName(n);r&&(r._vcss!=null&&this._resetValidateCss(r),r._vcss=typeof i=="string"?i:"validate_"+(t===!0?"ok":"error"),r.className+=" "+r._vcss)};this.resetValidateCss=function(){var n,t;for(n in this.itemPull)if(this.itemPull[n]._vcss!=null&&this._resetValidateCss(this.itemPull[n]),this.itemPull[n]._list!=null)for(t=0;t<this.itemPull[n]._list.length;t++)this.itemPull[n]._list[t].resetValidateCss()};this._validateLoop=function(n){var t,i;for(t in this.objPull)if(n(String(t).replace(this.idPrefix,"")),this.itemPull[t]._list)for(i=0;i<this.itemPull[t]._list.length;i++)this.itemPull[t]._list[i]._validateLoop(n)};this.validate=function(){if(this.callEvent("onBeforeValidate",[])!=!1){var n=!0;return this._validateLoop(function(t){var i=u.doWithItem(t,"_validate");typeof i!="boolean"&&(i=!0);n=i&&n},!0),this.callEvent("onAfterValidate",[n]),n}};this.validateItem=function(n,t){return typeof t!="undefined"&&(n=[n,t]),this.doWithItem(n,"_validate")};this.enableLiveValidation=function(n){this.live_validate=n==!0};this.setReadonly=function(n,t){this.doWithItem(n,"setReadonly",t)};this.isReadonly=function(n){return this.doWithItem(n,"isReadonly")};this.getFirstActive=function(n){for(var i,r,t=0;t<this._indexId.length;t++)if(i=!0,n==!0&&(r=this.getItemType(this._indexId[t]),dhtmlXForm.prototype.items[r].setFocus||(i=!1)),i&&this._idIndex[this._indexId[t]].enabled)return this._indexId[t];return null};this.setFocusOnFirstActive=function(){var n=this.getFirstActive(!0);n!=null&&this.setItemFocus(n)};this.enableItem=function(n,t){t!=null&&(n=[n,t]);this.doWithItem(n,"userEnable");this._autoCheck()};this.disableItem=function(n,t){t!=null&&(n=[n,t]);this.doWithItem(n,"userDisable");this._autoCheck()};this.isItemEnabled=function(n,t){return t!=null&&(n=[n,t]),this.doWithItem(n,"isUserEnabled")};this.clear=function(){var u={},n,t,f,e,i,r;this.formId=(new Date).valueOf();this.resetDataProcessor("inserted");for(n in this.itemPull){if(t=this.itemPull[n]._idd,this.itemPull[n]._type=="ch"&&this.uncheckItem(t),this.itemPull[n]._type in{ta:1,editor:1,calendar:1,pw:1,hd:1}&&this.setItemValue(t,""),this.itemPull[n]._type=="combo"&&(this.itemPull[n]._apiChange=!0,f=this.getCombo(t),f.selectOption(0),f=null,this.itemPull[n]._apiChange=!1),this.itemPull[n]._type=="se"&&(e=this.getOptions(t),e.length>0&&(e[0].selected=!0)),this.itemPull[n]._type=="ra"&&(i=this.itemPull[n]._group,u[i]||(this.checkItem(i,this.doWithItem(t,"_getFirstValue")),u[i]=!0)),this.itemPull[n]._list)for(r=0;r<this.itemPull[n]._list.length;r++)this.itemPull[n]._list[r].clear();this["setFormData_"+this.itemPull[n]._type]&&this["setFormData_"+this.itemPull[n]._type](t,"")}u=null;this._parentForm&&this._autoCheck();this.resetValidateCss()};this.unload=function(){var n,t;window.dhx4._enableDataLoading(this,null,null,null,"clear");window.dhx4._eventable(this,"clear");for(t in this.objPull)this._removeItem(String(t).replace(this.idPrefix,""));for(this._ccTm&&window.clearTimeout(this._ccTm),this._formLS=null,n=0;n<this.base.length;n++){while(this.base[n].childNodes.length>0)this.base[n].removeChild(this.base[n].childNodes[0]);this.base[n].parentNode&&this.base[n].parentNode.removeChild(this.base[n]);this.base[n]=null}this.base=null;this.cont.onkeypress=null;this.cont.className="";this.cont=null;for(t in this)this[t]=null;u=null};for(r in this.items)this.items[r].t=r,typeof this.items[r]._index=="undefined"&&(this.items[r]._index=!0),this.items[r].show||(this.items[r].show=function(n){if(n.style.display="",n._listObj)for(var t=0;t<n._listObj.length;t++)n._listObj[t].show(n._listBase[t])}),this.items[r].hide||(this.items[r].hide=function(n){if(n.style.display="none",n._listObj)for(var t=0;t<n._listObj.length;t++)n._listObj[t].hide(n._listBase[t])}),this.items[r].isHidden||(this.items[r].isHidden=function(n){return n.style.display=="none"}),this.items[r].userEnable||(this.items[r].userEnable=function(n){n._udis=!1}),this.items[r].userDisable||(this.items[r].userDisable=function(n){n._udis=!0}),this.items[r].isUserEnabled||(this.items[r].isUserEnabled=function(n){return n._udis!==!0}),this.items[r].getType||(this.items[r].getType=function(){return this.t}),this.items[r].isExist||(this.items[r].isExist=function(){return!0}),this.items[r]._validate||(this.items[r]._validate=function(n){var i,u,r,f,t;if(!n._validate||!n._enabled)return!0;for(n._type=="ch"||n._type=="ra"?(i=this.isChecked(n)?this.getValue(n):0,n._type=="ra"&&typeof i=="undefined"&&(i=0)):i=this.getValue(n),u=!0,r=0;r<n._validate.length;r++)f="is"+n._validate[r],(i==null||i.length==0)&&f!="isNotEmpty"&&n._type!="container"||(t=dhtmlxValidation[f],n._type=="container"&&typeof t=="function"&&(t=function(){return!0}),typeof t!="function"&&typeof n._validate[r]=="function"&&(t=n._validate[r]),typeof t!="function"&&typeof window[n._validate[r]]=="function"&&(t=window[n._validate[r]]),u=(typeof t=="function"?t(i,n._idd):new RegExp(n._validate[r]).test(i))&&u,t=null);return n.callEvent("onValidate"+(u?"Success":"Error"),[n._idd,i,u])===!1||n.getForm().setValidateCss(n._idd,u),u});return this._locked=!1,this._doLock=function(n){var t=n===!0?!0:!1;this._locked!=t&&(this._locked=t,this._autoCheck(!this._locked))},this.lock=function(){this._doLock(!0)},this.unlock=function(){this._doLock(!1)},this.isLocked=function(){return this._locked},this.setNumberFormat=function(n,t,i,r){return this.doWithItem(n,"setNumberFormat",t,i,r)},window.dhx4._enableDataLoading(this,"_initObj","_xmlToObject","items",{struct:!0,data:!0}),window.dhx4._eventable(this),this.attachEvent("_onButtonClick",function(n,t){this.callEvent("onButtonClick",[n,t])}),this._updateBlocks=function(){this.forEachItem(function(n){(u.getItemType(n)=="block"||u.getItemType(n)=="combo")&&u.doWithItem(n,"_setCss",u.skin,u.cont.style.fontSize)})},this._isObj=function(n){return n!=null&&typeof n=="object"&&typeof n.length=="undefined"},this._copyObj=function(n){var i,t;if(this._isObj(n)){i={};for(t in n)i[t]=typeof n[t]=="object"&&n[t]!=null?this._copyObj(n[t]):n[t]}else for(i=[],t=0;t<n.length;t++)i[t]=typeof n[t]=="object"&&n[t]!=null?this._copyObj(n[t]):n[t];return i},t!=null&&typeof t=="object"&&this._initObj(this._copyObj(t)),this._parentForm&&this._updateBlocks(),this._ccActive=!1,this._ccTm=null,this}function dhtmlXFileUploader(n,t,i,r,u,f,e,o,s){var h=this,c,l,a;typeof r=="string"&&typeof this[r]=="function"?this.engine=r:(this.engine="html4",c=null,typeof FormData!="undefined"&&typeof XMLHttpRequest!="undefined"&&(c=new XMLHttpRequest,typeof c.upload=="undefined"&&(c=null)),c!=null?this.engine="html5":typeof swfobject!="undefined"||c===!1?(c=swfobject.getFlashPlayerVersion(),c.major>=10&&(this.engine="flash")):(this._sl_v=this.getSLVersion(),this._sl_v&&(this.engine="sl")),c=null);typeof n=="string"&&(n=document.getElementById(n));this._upload_mp=typeof s!="undefined"?s==!0:!0;this._upload_dnd=!0;this._swf_file_url=t||"";this._swf_upolad_url=i||"";this._swf_logs=u;this._sl_xap=f;this._sl_upload_url=e;this._sl_logs=o;this.p=document.createElement("DIV");this.p.className+=" dhx_file_uploader";n.appendChild(this.p);this.p_files=document.createElement("DIV");this.p_files.className="dhx_upload_files";this.p.appendChild(this.p_files);this.p_controls=document.createElement("DIV");this.p_controls.className="dhx_upload_controls";this.p.appendChild(this.p_controls);this._files={};this._items={};this._data={};this._autoStart=!1;this._autoRemove=!1;this._titleScreen=!0;this._enabled=!0;this._uploaded_count=0;this._initToolbar=function(){var t,n;this.b_opts={info:{onclick:null},browse:{onclick:null,tooltip:"Browse"},upload:{onclick:function(){h._enabled&&(h._uploading||h._uploadStart())},tooltip:"Upload"},cancel:{onclick:function(){h._enabled&&(h._uploadStop(),h._switchButton(!1))},tooltip:"Stop"},clear:{onclick:function(){h._enabled&&h.clear()},tooltip:"Clear list"}};this.buttons={};for(t in this.b_opts)n=document.createElement("DIV"),n.innerHTML="&nbsp;",n.className="dhx_file_uploader_button button_"+t,n.onclick=this.b_opts[t].onclick,this.b_opts[t].tooltip&&(n.title=this.b_opts[t].tooltip),this.p_controls.appendChild(n),this.buttons[t]=n,n=null;this.buttons.cancel.style.display="none"};this._readableSize=function(n){for(var t=!1,i=["b","Kb","Mb","Gb","Tb","Pb","Eb"],r=0;r<i.length;r++)n>1024?n=n/1024:t===!1&&(t=r);return t===!1&&(t=i.length-1),Math.round(n*100)/100+" "+i[t]};this._beforeAddFileToList=function(n,t){return this.callEvent("onBeforeFileAdd",[n,t])===!0};this._addFileToList=function(n,t,i,r,u){this._checkTitleScreen();var f=document.createElement("DIV");f._idd=n;f.className="dhx_file dhx_file_"+r;f.innerHTML="<div class='dhx_file_param dhx_file_name'>&nbsp;<\/div><div class='dhx_file_param dhx_file_progress'>"+u+"%<\/div><div class='dhx_file_param dhx_file_delete' title='Remove from list'>&nbsp;<\/div>";this.p_files.appendChild(f);f.childNodes[0].style.width=f.offsetWidth-127+"px";this._items[n]=f;this._updateFileNameSize(n);f.childNodes[2].onclick=function(){if(h._enabled){var n=this.parentNode._idd;h._removeFileFromQueue(n)}};this.callEvent("onFileAdd",[t])};this._removeFileFromList=function(n){this._items[n]&&(this._items[n].childNodes[2].onclick=null,this._items[n].parentNode.removeChild(this._items[n]),this._items[n]=null,delete this._items[n],this._data[n]&&(this._data[n]=null,delete this._data[n]),this._checkTitleScreen())};this._updateFileNameSize=function(n){this._items[n].childNodes[0].innerHTML=this._files[n].name+(isNaN(this._files[n].size)?"&nbsp;":" ("+this._readableSize(this._files[n].size)+")");this._items[n].childNodes[0].title=this._files[n].name+(isNaN(this._files[n].size)?"":" ("+this._readableSize(this._files[n].size)+")")};this._updateFileInList=function(n,t,i){this._items[n]&&(this._items[n].className="dhx_file dhx_file_"+t,this._updateProgress(n,t,i),this._updateFileNameSize(n))};this._updateProgress=function(n,t,i){t=="uploading"&&i<100&&this._progress_type=="loader"?(this._items[n].childNodes[1].className="dhx_file_param dhx_file_uploading",this._items[n].childNodes[1].innerHTML="&nbsp;"):(this._items[n].childNodes[1].className="dhx_file_param dhx_file_progress",this._items[n].childNodes[1].innerHTML=i+"%");this._updateFileNameSize(n)};this._removeFilesByState=function(n){for(var t in this._files)(n===!0||this._files[t].state==n)&&this._removeFileFromQueue(t)};this._switchButton=function(n){if(n==!0)this.buttons.upload.style.display="none",this.buttons.cancel.style.display="";else{var t=this._uploaded_count;this.buttons.upload.style.display="";this.buttons.cancel.style.display="none";this._uploaded_count=0;t>0&&this.callEvent("onUploadComplete",[t])}};this._uploadStart=function(){var t,n;if(this._switchButton(!0),!this._uploading)for(n in this._files)this._files[n].state=="fail"&&(this._files[n].state="added",this._updateFileInList(n,"added",0));this._uploading=!0;t=!1;for(n in this._files)t||[this._files[n].state]!="added"||(t=!0,this._files[n].state="uploading",this._updateFileInList(n,"uploading",0),this._doUploadFile(n));t||(this._uploading=!1,this._switchButton(!1))};this._onUploadSuccess=function(n,t,i,r){if(typeof i!="undefined"&&this.engine=="flash"){var u=dhx4.s2j(i.data);if(u!=null&&u.state==!0&&u.name!=null)t=u.name,u.extra!=null&&(r=u.extra);else{this._onUploadFail(n,u!=null&&u.extra!=null?u.extra:null);return}}this._uploaded_count++;this._data[n]={realName:this._files[n].name,serverName:t};this._files[n].state="uploaded";this._updateFileInList(n,"uploaded",100);this.callEvent("onUploadFile",[this._files[n].name,t,r]);this._autoRemove&&this._removeFileFromQueue(n);this._uploading&&this._uploadStart()};this._onUploadFail=function(n,t){this._files[n].state="fail";this._updateFileInList(n,"fail",0);this.callEvent("onUploadFail",[this._files[n].name,t]);this._uploading&&this._uploadStart()};this._onUploadAbort=function(n){this._uploading=!1;this._files[n].state="added";this._updateFileInList(n,"added",0);this.callEvent("onUploadCancel",[this._files[n].name])};this._checkTitleScreen=function(){var n=0;for(var t in this._files)n++;n==0&&this.p.className.search("dhx_file_uploader_title")<0&&this._titleScreen&&(this.p.className+=" dhx_file_uploader_title",this.buttons.info.innerHTML=this._titleText,this.buttons.info.style.width=Math.max(this.p_controls.offsetWidth-134,0)+"px");(n>0||!this._titleScreen)&&this.p.className.search("dhx_file_uploader_title")>=0&&(this.p.className=this.p.className.replace(/dhx_file_uploader_title/g,""),this.buttons.info.innerHTML="")};this.callEvent=function(){};this.upload=function(){this._uploading||this._uploadStart()};this.setAutoStart=function(n){this._autoStart=n==!0};this.setAutoRemove=function(n){this._autoRemove=n==!0};this.enableTitleScreen=function(n){this._titleScreen=n==!0;this._checkTitleScreen()};this.setTitleText=function(n){this._titleText=n;this.p.className.search("dhx_file_uploader_title")>=0&&(this.buttons.info.innerHTML=this._titleText)};this.setURL=function(n){this._url=n};this.setSWFURL=function(n){this._swf_upolad_url=n};this.enable=function(){this._enabled=!0;this.p_files.className="dhx_upload_files";this.p_controls.className="dhx_upload_controls"};this.disable=function(){this._enabled=!1;this.p_files.className="dhx_upload_files dhx_uploader_dis";this.p_controls.className="dhx_upload_controls dhx_uploader_dis"};this.getStatus=function(){var n=0;for(var t in this._files){if(this._files[t].state!="uploaded")return-1;n=1}return n};this.getData=function(){return this._data};this.clear=function(){this.callEvent("onBeforeClear",[])===!0&&(this._uploading&&h._uploadStop(),h._switchButton(!1),h._removeFilesByState(!0),this.callEvent("onClear",[]))};this.unload=function(){var n;this._removeFilesByState(!0);this._data=null;this._files=null;this._items=null;this._unloadEngine();for(n in this.buttons)this.buttons[n].onclick=null,this.buttons[n].parentNode.removeChild(this.buttons[n]),this.buttons[n]=null,delete this.buttons[n];this.buttons=null;for(n in this.b_opts)this.b_opts[n].onclick=null,this.b_opts[n]=null,delete this.b_opts[n];this.b_opts=null;this.p_controls.parentNode.removeChild(this.p_controls);this.p_files.parentNode.removeChild(this.p_files);this.p.className=this.p.className.replace(/dhx_file_uploader_title/gi,"").replace(/dhx_file_uploader/gi,"");for(n in this)this[n]=null;h=n=null};l=new this[this.engine];for(a in l)this[a]=l[a],l[a]=null;return a=l=n=null,this._initToolbar(),this._initEngine(),this._checkTitleScreen(),this}function dhtmlXAccordion(n,t){var f=this,e=window.dhx4.transDetect(),i,u,r;if(this.conf={skin:t||window.dhx4.skin||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxacc")||"material",css:"dhxacc",icons_path:"",icons_css:!1,multi_mode:!1,last_opened:null,on_active_id:null,on_active_click:!1,size_changed:!0,def_height:90,total_count:0,hiden_count:0,cont_w:null},this.conf.tr={prop:e.transProp,ev:e.transEv,height_open:"height 0.2s cubic-bezier(0.25,0.1,0.25,1)",height_close:"height 0.18s cubic-bezier(0.25,0.1,0.25,1)",op_open:"opacity 0.16s ease-in",op_close:"opacity 0.2s ease-out",op_v_open:"1",op_v_close:"0.4",dnd_top:"top 0.16s"},this.ofs={m:{},s:{},def:{m:{left:0,right:0,first:0,between:8},s:{left:0,right:0,first:0,between:-1,last:0}},base:{s:{},m:{}},skin:{dhx_web:{s:{between:3},m:{between:3}},dhx_terrace:{m:{between:12,left:0,right:0}},material:{m:{between:12,left:0,right:0}}}},this.conf.tr.height_open=navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0?this.conf.tr.height_close:this.conf.tr.height_close,i=null,typeof n=="object"&&!n.tagName){i={};for(r in n)i[r]=n[r],n[r]=null;n=i.parent;i.parent=null}if(window.dhtmlXCellTop.apply(this,[n,n._ofs]),this._adjustCont(),this.base._ofs!=null)for(u in this.ofs.base)if(this.base._ofs[u]!=null)for(r in this.base._ofs[u])this.ofs.base[u][r]=this.base._ofs[u][r];return this._applyOffsets=function(){var t,n;for(t in this.ofs.def){var u=this.ofs.def[t],i=this.ofs.skin[this.conf.skin]!=null&&this.ofs.skin[this.conf.skin][t]!=null?this.ofs.skin[this.conf.skin][t]:null,r=this.base._ofs!=null?this.base._ofs[t]:null;for(n in u)this.ofs[t][n]=i!=null&&i[n]!=null?i[n]:r!=null&&r[n]!=null?r[n]:u[n]}},this._applyOffsets(),this.t={},this.addItem=function(n,t,i,r,u){var e,s,o;for(n==null&&(n="a"+window.dhx4.newId());this.t[n]!=null;)n="a"+window.dhx4.newId();return e=new dhtmlXAccordionCell(n,this),e.conf.skin=this.conf.skin,e.setText(t),u!=null&&e.setIcon(u),e.cell._accId=n,e.cell.childNodes[e.conf.idx.hdr].onselectstart=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1},e.cell.childNodes[e.conf.idx.hdr].onclick=function(n){if(n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,f._dnd==null||f._dnd.ofs!=!0){for(var t=n.target||n.srcElement,i=null;t._accId!=this&&i==null;)t._accId!=null?i=t._accId:t=t.parentNode;i!=null&&f._hdrClick(i)}},this.t[n]={cell:e},this.conf.total_count++,this.conf.multi_mode?(typeof i=="undefined"&&(i=!0),this.cont.appendChild(e.cell),e.conf.opened=i==!0,typeof r=="undefined"||r==null||r=="*"?(r=="*"&&(e.conf.h_auto=!0),r=this.conf.def_height):r=Math.max(parseInt(r),30),e._setSize(this.ofs.m.left,0,this.conf.cont_w||this._getAvailItemWidth(),e.conf.opened?r:e._getHdrHeight()),e.cell.style.marginTop=(e.cell==this.cont.firstChild?this.ofs.m.first:this.ofs.m.between)+"px",i!=!0&&(e.conf.size.h=r,e._adjustCell(),e.cell.className+=" dhx_cell_closed"),this._adjustOpened(),this._dnd!=null&&this._dndAttachEvent(n)):(i=this.conf.last_opened==null?!0:window.dhx4.s2b(i),s=this._updateCellsHeight(),this.conf.last_opened!=null&&(i?this._closeItem(this.conf.last_opened,!1):(o=this.t[this.conf.last_opened].cell,o._setSize(o.conf.size.x,o.conf.size.y,o.conf.size.w,s),o=null)),this.cont.appendChild(e.cell),e.conf.opened=i,e.cell.style.marginTop=String(e.cell==this.cont.firstChild?this.ofs.s.first:this.ofs.s.between)+"px",e._setSize(this.ofs.s.left,0,this.conf.cont_w||this._getAvailItemWidth(),i?s:e._getHdrHeight()),i?this.conf.last_opened=n:(e.conf.size.h=s,e._adjustCell(),e.cell.className+=" dhx_cell_closed")),e=null,this.t[n].cell},this.removeItem=function(n){this.t[n]&&(this.conf.last_opened==n&&(this.conf.last_opened=null),this.conf.on_active_id==n&&(this.conf.on_active_id=null),this._dnd!=null&&this._dndClearCell(n),this.conf.total_count--,this.conf.multi_mode||this.t[n].cell.conf.visible||this.conf.hiden_count--,this.t[n].cell._unload(),this.t[n].cell=null,this.t[n]=null,delete this.t[n],this.conf.unloading||(this.conf.multi_mode||this._updateCellsMargin(),this.setSizes()))},this.cells=function(n){return this.t[n].cell},this.enableMultiMode=function(n,t){this.conf.multi_mode=!0;isNaN(t)||(this.conf.def_height=t);n=="auto"||n=="scroll"?(this.cont.style.overflowX="hidden",this.cont.style.overflowY=n):this.cont.style.overflow="visible"},this.forEachItem=function(n){for(var t in this.t)typeof n=="function"?n.apply(this,[this.t[t].cell]):typeof n=="string"&&typeof window[n]=="function"&&window[n].apply(this,[this.t[t].cell])},this._openItem=function(n,t){typeof t=="undefined"&&(t=!0);this.t[n].cell.conf.opened==!1&&(this.conf.multi_mode?this.t[n].cell._open(t):this.conf.tr.prop==!1?(this.conf.last_opened!=null&&this.t[this.conf.last_opened].cell._close(!1),this.t[n].cell._open(!1),this.conf.last_opened=n):(this.conf.on_active_id=n,this.t[n].cell._open(t),this.conf.last_opened!=null&&this.t[this.conf.last_opened].cell._close(t),this.conf.last_opened=n))},this._closeItem=function(n,t){typeof t=="undefined"&&(t=!0);this.t[n].cell.conf.opened==!0&&(this.t[n].cell._close(t),this.conf.last_opened=null)},this._adjustOpened=function(){var i,r,u,n,f,t;if(this.conf.multi_mode==!0){if(this._openCache==null){i=this._getDynData();for(n in i)this.t[n].cell.conf.size.h=Math.max(i[n],0),this.t[n].cell.cell.style.height=Math.max(i[n],0)+"px"}else{r=!1;for(n in this._openCache)r=r||this._openCache[n];if(r==!0)return;this._openCache=this._openId=null}u=this._getAvailItemWidth();for(n in this.t)f=!0,u==this.t[n].cell.conf.size.w&&(this._openMode=="close"||this.t[n].cell.conf.opened==!1)&&(f=!1),f&&this.t[n].cell._setWidth(u);this._openMode=null}else this.conf.last_opened!=null&&(t=this.conf.last_opened,this.t[t].cell._setSize(this.t[t].cell.conf.size.x,this.t[t].cell.conf.size.y,this.t[t].cell.conf.size.w,this.t[t].cell.conf.size.h))},this._getDynData=function(n,t){var s,u,i,o,c,h,r,l;(typeof n=="undefined"||n==null)&&(n={});(typeof t=="undefined"||t==null)&&(t={});var f={},e=0,r=0,a=0;for(s=0;s<this.cont.childNodes.length;s++)u=this.cont.childNodes[s]._accId,i=this.t[u].cell,i.conf.visible==!0&&(o=this.ofs.m[a==0?"first":"between"],n[u]==!0||t[u]==!0||i.conf.opened==!0&&i.conf.h_auto==!0?t[u]==!0?(c=i._getHdrHeight(),f[u]=c,r+=c+o):i.conf.h_auto==!0?(f[u]=!0,r+=o,e++):n[u]==!0&&(f[u]=i.conf.size.h,r+=i.conf.size.h+o):r+=i.cell.offsetHeight+o,a++),i=null;if(e>0){h=this.cont.offsetHeight-r;r=Math.floor(h/e);for(l in f)f[l]==!0&&(e>1?h-=r:r=h,f[l]=r,e--)}return f},this.setSizes=function(){var t,n;if(this._adjustCont(),this.conf.multi_mode==!0)this._adjustOpened();else{this.conf.cont_w=null;t=this._updateCellsHeight();for(n in this.t)this.t[n].cell.conf.visible==!0&&(this.t[n].cell._setSize(this.ofs.s.left,0,this.conf.cont_w||this._getAvailItemWidth(),this.t[n].cell.conf.opened?t:this.t[n].cell._getHdrHeight()),this.t[n].cell.conf.opened!=!0&&(this.t[n].cell.conf.size.h=t,this.t[n].cell._adjustCell()));this.conf.size_changed=!0}this.callEvent("_onSetSizes",[])},this.setSkin=function(n){this._setBaseSkin(n);this.conf.skin=n;for(var t in this.t)this.t[t].cell.conf.cells_cont=null,this.t[t].cell.conf.skin=this.conf.skin;this._applyOffsets();this._updateCellsMargin();this.setSizes()},this.setIconsPath=function(n){this.conf.icons_path=n},this._getAvailItemWidth=function(){var n=this.ofs[this.conf.multi_mode?"m":"s"],t=Math.max(this.cont.clientWidth-n.left-n.right,10);return this.conf.cont_w=t,n=null,t},this._updateCellsHeight=function(){var t,n,u,i,f,r;if(this.conf.multi_mode!=!0){if(t=this.conf.total_count-this.conf.hiden_count,n=this.cont.offsetHeight-this.ofs.s.last,t==0)return n;for(u=!1,i=0;i<this.cont.childNodes.length;i++)u==!1&&(f=this.cont.childNodes[i]._accId,this.t[f].cell.conf.visible&&(n-=this.t[f].cell._getHdrHeight()*(t-1),u=!0));n-=(t-1)*this.ofs.s.between+this.ofs.s.first;for(r in this.t)this.t[r].cell.conf.size!=null&&(this.t[r].cell.conf.size.h=n,this.t[r].cell._adjustCell());return n}},this._updateCellsMargin=function(){for(var t,i=0,n=0;n<this.cont.childNodes.length;n++)t=this.cont.childNodes[n]._accId,this.t[t].cell.conf.visible&&(this.t[t].cell.cell.style.marginTop=String(this.ofs[this.conf.multi_mode?"m":"s"][i++==0?"first":"between"])+"px")},this._hdrClick=function(n){if(this.conf.multi_mode||!this.t[n].cell.conf.opened){var t=this.t[n].cell.conf.opened;this.callEvent("onBeforeActive",[n,t?!1:!0])===!0&&(this.conf.on_active_click=!0,this[t?"_closeItem":"_openItem"](n),this.conf.multi_mode&&this.conf.tr.prop==!1&&this._adjustOpened())}},this.unload=function(){var n;this.conf.unloading=!0;for(n in this.t)this.removeItem(n);this.t=null;typeof this._unloadDND=="function"&&this._unloadDND();this.dhxWins&&(this.dhxWins.unload(),this.dhxWins=null);this._unloadTop();window.dhx4._enableDataLoading(this,null,null,null,"clear");window.dhx4._eventable(this,"clear");this.ofs=this.conf=null;for(n in this)this[n]=null;f=null},this.setOffset=function(n){this.ofs.s.between=n;this.ofs.m.between=n;this._updateCellsMargin();this.setSizes()},this._initObj=function(n){if(n.skin!=null&&this.setSkin(n.skin),window.dhx4.s2b(n.multi_mode)&&this.enableMultiMode(),n.icons_path!=null&&this.setIconsPath(n.icons_path),n.icon_path!=null&&this.setIconsPath(n.icon_path),n.iconset!=null&&(this.conf.icons_css=n.iconset=="awesome"),n.items!=null)for(var t=0;t<n.items.length;t++)this.addItem(n.items[t].id,n.items[t].text,n.items[t].open,n.items[t].height,n.items[t].icon||n.items[t].img);window.dhx4.s2b(n.dnd)==!0&&typeof this.enableDND=="function"&&this.enableDND()},this._xmlToObj=function(n){var u={items:[]},i=n.getElementsByTagName("accordion")[0],f,t,r;for(i.getAttribute("skin")!=null&&(u.skin=i.getAttribute("skin")),i.getAttribute("mode")=="multi"&&(u.multi_mode=!0),i.getAttribute("multiMode")!=null&&(u.multi_mode=window.dhx4.s2b(i.getAttribute("multiMode"))),i.getAttribute("iconsPath")!=null&&(u.icons_path=i.getAttribute("iconsPath")),f=0;f<i.childNodes.length;f++)t=i.childNodes[f],typeof t.tagName!="undefined"&&String(t.tagName).toLowerCase()=="cell"&&(r={},t.getAttribute("id")!=null&&(r.id=t.getAttribute("id")),t.getAttribute("icon")!=null&&(r.icon=t.getAttribute("icon")),t.getAttribute("height")!=null&&(r.height=t.getAttribute("height")),t.getAttribute("open")!=null&&(r.open=window.dhx4.s2b(t.getAttribute("open"))),r.text=t.firstChild.nodeValue,u.items.push(r)),t=null;return u},window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","accordion",{struct:!0}),window.dhx4._eventable(this),this._callMainEvent=function(n,t){return this.callEvent(n,t)},this.attachEvent("onActive",function(n){n!=null&&this.t[n]!=null&&this.t[n].cell.dataObj!=null&&this.t[n].cell.dataType=="editor"&&this.t[n].cell.dataObj._prepareContent(!0);n!=null&&this.t[n]!=null&&this.t[n].cell.conf.opened==!0&&this.t[n].cell._adjustProgress()}),typeof dhtmlXWindows=="function"&&(this.dhxWins=new dhtmlXWindows,this.dhxWins.setSkin(this.conf.skin)),i!=null&&(this._initObj(i),i=null),this}function dhtmlXAccordionCell(n,t){dhtmlXCellObject.apply(this,[n,"_acc"]);this.acc=t;this.conf.visible=!0;this.conf.docked=!0;this.attachEvent("_onCellUnload",function(){this._trDetachEv();this._unloadDocking();this.acc=null;this.cell._accObj=null;this.cell.childNodes[this.conf.idx.hdr].onselectstart=null;this.cell.childNodes[this.conf.idx.hdr].onclick=null;this._initHeader=null;this._getHdrHeight=null;this._setWidth=null;this._adjustCell=null;this._open=null;this._close=null;this._isOpened=null;this._trInitEv=null;this._trAttachEv=null;this._trDetachEv=null;this._trOnEnd=null;this._onActiveCall=null;this.setText=null;this.getText=null;this.setIcon=null;this.clearIcon=null;this.show=null;this.hide=null;this.isVisible=null;this.setHeight=null;this.moveOnTop=null});this.acc.attachEvent("onBeforeDrag",function(n){this.t[n].cell.dataObj!=null&&this.t[n].cell.dataType=="editor"&&(this.conf.editor_data==null&&(this.conf.editor_data={}),this.conf.editor_data[n]=this.t[n].cell.dataObj.getContent());for(var t in this.t)this.t[t].cell._showCellCover();return!0});this.acc.attachEvent("onDrop",function(n){this.t[n].cell.dataObj!=null&&this.t[n].cell.dataType=="editor"&&(this.t[n].cell.dataObj._prepareContent(!0),this.conf.editor_data!=null&&this.conf.editor_data[n]!=null&&(this.t[n].cell.dataObj.setContent(this.conf.editor_data[n]),this.conf.editor_data[n]=null));for(var t in this.t)this.t[t].cell._hideCellCover()});this.acc.attachEvent("_onDropCancel",function(){for(var n in this.t)this.t[n].cell._hideCellCover()});this.attachEvent("_onContentLoaded",function(){this.acc._callMainEvent("onContentLoaded",arguments)});this.attachEvent("_onBeforeContentAttach",function(n){n=="sidebar"&&this.conf.skin!="dhx_skyblue"&&this._hideBorders()});this._initHeader();this.conf.tr={};for(var i in this.acc.conf.tr)this.conf.tr[i]=this.acc.conf.tr[i];return this.conf.tr.prop!=!1&&this.attachEvent("_onIdxUpdated",function(){this._cellSetOpacity(this.conf.opened?"open":"close",!1)}),this.open=function(n){window.dhx4.s2b(n)==!0&&(this.acc.conf.on_active_click=!0);this.acc._openItem(this._idd)},this.close=function(n){window.dhx4.s2b(n)==!0&&(this.acc.conf.on_active_click=!0);this.acc._closeItem(this._idd)},this._setWidth=function(n){n!=this.conf.size.w&&(this.conf.size.w=n,this.cell.style.width=n+"px");this._adjustCell()},this._adjustCell=function(){this._adjustCont();this.dataObj!=null&&typeof this.dataObj.setSizes=="function"&&this.dataObj.setSizes()},this._initDocking(),this}function dhtmlXLayoutObject(n,t,i){var r=null,e,o,s,c,l,h,u,f;if(n!=null&&typeof n=="object"&&typeof n.tagName=="undefined"&&n._isCell!=!0&&(r={},n.autosize!=null&&(r.autosize=n.autosize),n.cells!=null&&(r.cells=n.cells),n.pattern!=null&&(t=n.pattern),n.skin!=null&&(i=n.skin),n.offsets!=null&&(r.offsets=n.offsets),n=n.parent),this.cdata={},this.conf={skin:i||window.dhx4.skin||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxlayout")||"material",css:"dhxlayout",hh:20,autosize:"b",nextCell:{a:"b",b:"a"},inited:!1,b_size:{w:-1,h:-1}},this.conf.skin=="material"&&(this.conf.hh=window.dhx4.readFromCss("dhxlayout_base_material dhxlayout_collapsed_height")),typeof n=="object"&&n._isCell==!0)return e=typeof r!="undefined"&&r!=null?r:{},e.pattern==null&&t!=null&&(e.pattern=t),e.skin==null&&i!=null&&(e.skin=i),n.attachLayout(e);if(window.dhtmlXCellTop.apply(this,[n,r==null?null:r.offsets]),this.conf.sw=this._detectSW(),o=this,this._getLayout=function(){return this},this.mainInst=n._layoutMainInst!=null?n._layoutMainInst:null,this._getMainInst=function(){return this.mainInst!=null?this.mainInst._getMainInst():this},this._init=function(n){var i=typeof n=="string"?this.tplData[n]:n,r,t;this.conf.mode=i.mode;this.conf.mode=="c"?this.cdata.a=new dhtmlXLayoutCell("a",this):(this.cdata.a=new dhtmlXLayoutCell("a",this),this.cdata.b=new dhtmlXLayoutCell("b",this));for(t in this.cdata)this.cont.appendChild(this.cdata[t].cell),this.cdata[t].conf.init={w:.5,h:.5};if(this.conf.mode!="c"&&(r=this._getMainInst(),r.conf.sep_idx==null?r.conf.sep_idx=1:r.conf.sep_idx++,this.sep=new dhtmlXLayoutSepObject(this.conf.mode,r.conf.sep_idx),this.cont.appendChild(this.sep.sep),this.sep._getLayout=function(){return o._getLayout()},r=null),i.cells!=null)for(t in i.cells)i.cells[t].width!=null&&(this.cdata[t].conf.init.w=i.cells[t].width),i.cells[t].height!=null&&(this.cdata[t].conf.init.h=i.cells[t].height),i.cells[t].name!=null&&(this.cdata[t].conf.name=i.cells[t].name,this.cdata[t].setText(i.cells[t].name)),i.cells[t].fsize!=null&&(this.cdata[t].conf.fsize=i.cells[t].fsize);this.setSizes();for(t in this.cdata)this.cdata[t].conf.init={};if(i.cells!=null)for(t in i.cells)i.cells[t].layout!=null&&(this.cdata[t].dataNested=!0,this.cdata[t]._layoutMainInst=this,this.cdata[t].cell.className+=" dhx_cell_nested_layout",this.cdata[t].attachLayout({pattern:i.cells[t].layout}),this.cdata[t]._layoutMainInst=null)},this.setSizes=function(n,t,i,r){var y=this.conf.inited==!0&&this._getMainInst()==this&&this.checkEvent("onResizeFinish")==!0?{}:!1,u,f,p,l,e,o,s,v,h;if(this._adjustCont(),u=this.cont.offsetWidth,f=this.cont.offsetHeight,this.conf.mode=="c"){var e=0,o=0,s=u,h=f;this.cdata.a._setSize(e,o,s,h,n,i,r);this.callEvent("_onSetSizes",[]);!y||this.conf.b_size.w==u&&this.conf.b_size.h==f||this._callMainEvent("onResizeFinish",[]);this.conf.b_size={w:u,h:f};return}if(typeof t=="undefined"&&(p=this.conf.mode=="v"?"w":"h",t=this.conf.autosize,this.cdata.a.conf.collapsed?t="b":this.cdata.b.conf.collapsed?t="a":(n=="a"||n=="b")&&(t=this.conf.nextCell[n])),this.conf.mode=="v"){if(t=="a"){l=this.cdata.b.conf.init.w!=null?Math.round(u*this.cdata.b.conf.init.w-this.conf.sw/2):this.cdata.b.conf.size.w;var c=u-l,a=0,v=f,e=0,o=a,s=c-e-this.conf.sw,h=v}else{e=0;o=0;s=this.cdata.a.conf.init.w!=null?Math.round(u*this.cdata.a.conf.init.w-this.conf.sw/2)-e:this.cdata.a.conf.size.w;var h=f-o,c=e+s+this.conf.sw,a=o,l=u-c,v=h}this.cdata.a._setSize(e,o,s,h,n,i,r);this.cdata.b._setSize(c,a,l,v,n,i,r);this.sep._setSize(e+s,o,this.conf.sw,h)}else{if(t=="a"){v=this.cdata.b.conf.init.h!=null?Math.round(f*this.cdata.b.conf.init.h-this.conf.sw/2):this.cdata.b.conf.size.h;var c=0,a=f-v,l=u-c,e=c,o=0,s=l,h=a-o-this.conf.sw}else{var e=0,o=0,s=u-e;h=this.cdata.a.conf.init.h!=null?Math.round(f*this.cdata.a.conf.init.h-this.conf.sw/2):this.cdata.a.conf.size.h;var c=e,a=o+h+this.conf.sw,l=s,v=f-a}this.cdata.a._setSize(e,o,s,h,n,i,r);this.cdata.b._setSize(c,a,l,v,n,i,r);this.sep._setSize(e,o+h,s,this.conf.sw)}this.callEvent("_onSetSizes",[]);!y||this.conf.b_size.w==u&&this.conf.b_size.h==f||this._callMainEvent("onResizeFinish",[]);this.conf.b_size={w:u,h:f}},this._getAvailWidth=function(){for(var f,i=[],r=0;r<this.conf.as_cells.h.length;r++){var n=this.cells(this.conf.as_cells.h[r]),t=n.layout,u=t.conf.autosize;n.conf.collapsed&&(n=t.cdata[t.conf.nextCell[n._idd]],u=t.conf.nextCell[u]);i.push(Math.max(0,n.getWidth()-n._getMinWidth(u)));t=n=null}return f=i.length>0?Math.min.apply(window,i):0,this.cont.offsetWidth-f},this._getAvailHeight=function(){for(var f,u=[],i=0;i<this.conf.as_cells.v.length;i++){var n=this.cells(this.conf.as_cells.v[i]),t=n.layout,r=t.conf.autosize;n.conf.collapsed&&(n=t.cdata[t.conf.nextCell[n._idd]],r=t.conf.nextCell[r]);u.push(Math.max(0,n.getHeight()-n._getHdrHeight()-n._getMinHeight(r)));t=n=null}return f=Math.min.apply(window,u),this.cont.offsetHeight-f},this.setSkin=function(n){this._setBaseSkin(n);this.conf.skin=n},this.unload=function(){var t,n;if(this.conf.unloading=!0,this.mainInst=null,this.parentLayout=null,this.items!=null){for(t=0;t<this.items.length;t++)this.items[t]=null;this.items=null}this.dhxWins!=null&&(this.dhxWins.unload(),this.dhxWins=null);this.sep!=null&&(this.sep._unload(),this.sep=null);for(n in this.cdata)this.cdata[n]._unload(),this.cdata[n]=null;this._unloadTop();window.dhx4._eventable(this,"clear");for(n in this)this[n]=null;o=null},this._getWindowMinDimension=function(n){var t=o._getAvailWidth()+7+7,i=o._getAvailHeight()+7+31,r={w:Math.max(t,200),h:Math.max(i,140)};return n=null,r},window.dhx4._eventable(this),this._callMainEvent=function(n,t){return this.callEvent(n,t)},this._init(t||"3E"),s=this._availAutoSize[t],s!=null&&(this.conf.pattern=t,this.setAutoSize(s.h[s.h.length-1],s.v[s.v.length-1])),typeof dhtmlXWindows=="function"&&this.mainInst==null&&(c={vp_overflow:this.conf.fs_mode==!0?!1:"auto"},this.dhxWins=new dhtmlXWindows(c),this.dhxWins.setSkin(this.conf.skin)),this.conf.inited=!0,this==this._getMainInst()&&(l=0,this.items=[],this.forEachItem(function(n){o.items.push(n);n.conf.index=l++})),this==this._getMainInst()&&r!=null&&(r.autosize!=null&&this.setAutoSize.apply(this,r.autosize),r.cells!=null))for(h=0;h<r.cells.length;h++)u=r.cells[h],f=this.cells(u.id),u.width&&f.setWidth(u.width),u.height&&f.setHeight(u.height),u.text&&f.setText(u.text),u.collapsed_text&&f.setCollapsedText(u.collapsed_text),u.collapse&&f.collapse(),u.fix_size&&f.fixSize(u.fix_size[0],u.fix_size[1]),typeof u.header!="undefined"&&window.dhx4.s2b(u.header)==!1&&f.hideHeader();return r=null,this}function dhtmlXLayoutSepObject(n,t){var i=this;return this.conf={mode:n,idx:t,blocked:!1,locked:!1,btn_left:(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&typeof addEventListener=="undefined"?1:0},window.dhx4.isIE&&navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")>=0&&(this.conf.btn_left=1),this.sep=document.createElement("DIV"),this.sep.className="dhxlayout_sep",window.dhx4.isIE==!0&&(this.sep.onselectstart=function(){return!1}),this.sep.className="dhxlayout_sep dhxlayout_sep_resize_"+this.conf.mode,this._setSize=function(n,t,i,r){this.sep.style.left=n+"px";this.sep.style.top=t+"px";this.sep.style.width=Math.max(i,0)+"px";this.sep.style.height=Math.max(r,0)+"px"},this._lockSep=function(n){this.conf.locked=n==!0;this._blockSep()},this._setWH=function(n){var t=this._getLayout();t.conf.sw=n==null?t._detectSW():Math.max(parseInt(n)||-1,-1);t._getMainInst().setSizes();t=null},this._blockSep=function(){var n=this._getLayout(),t=n.cdata.a.conf.collapsed||n.cdata.b.conf.collapsed||this.conf.locked;(n=null,this.conf.blocked!=t)&&(this.sep.className="dhxlayout_sep"+(t?"":" dhxlayout_sep_resize_"+this.conf.mode),this.conf.blocked=t)},this._beforeResize=function(n){var i,r,t;if(!this.conf.blocked&&(this.conf.resize==null||this.conf.resize.active!=!0)){if(n.type==window.dhx4.dnd.evs.start)this.sep.className+=" dhxlayout_sep_resize_actv",i=n.pageX||n.touches[0].pageX,r=n.pageY||n.touches[0].pageY;else{if(n.button!==this.conf.btn_left)return;i=n.clientX;r=n.clientY}window.dhx4.dnd.p_en==!0&&window.dhx4.dnd._touchOff();t=this._getLayout();this.conf.resize={sx:i,sy:r,tx:n.layerX,ty:n.layerY,sep_x:parseInt(this.sep.style.left),sep_y:parseInt(this.sep.style.top),min_wa:t.cdata.a._getAvailWidth("a"),min_wb:t.cdata.b._getAvailWidth("b"),min_ha:t.cdata.a._getAvailHeight("a"),min_hb:t.cdata.b._getAvailHeight("b")};this.conf.resize.nx=this.conf.resize.sep_x;this.conf.resize.ny=this.conf.resize.sep_y;typeof addEventListener=="function"?(window.addEventListener("mousemove",this._doOnMouseMove,!1),window.addEventListener("mouseup",this._doOnMouseUp,!1),window.addEventListener(window.dhx4.dnd.evs.move,this._doOnMouseMove,!1),window.addEventListener(window.dhx4.dnd.evs.end,this._doOnMouseUp,!1)):(document.body.attachEvent("onmousemove",this._doOnMouseMove),document.body.attachEvent("onmouseup",this._doOnMouseUp));t=null}},this._onResize=function(n){var i,r,t;this.conf.resize.active||(this._initResizeArea(),this.conf.resize.active=!0);this.conf.mode=="v"?(i=n.type=="mousemove"?n.clientX:n.pageX||n.touches[0].pageX,t=this.conf.resize.sx-i,this.conf.resize.nx=this.conf.resize.sep_x-t,this.conf.resize.nx>this.conf.resize.sep_x+this.conf.resize.min_wb?this.conf.resize.nx=this.conf.resize.sep_x+this.conf.resize.min_wb:this.conf.resize.nx<this.conf.resize.sep_x-this.conf.resize.min_wa&&(this.conf.resize.nx=this.conf.resize.sep_x-this.conf.resize.min_wa),this.r_sep.style.left=this.conf.resize.nx+"px"):(r=n.type=="mousemove"?n.clientY:n.pageY||n.touches[0].pageY,t=this.conf.resize.sy-r,this.conf.resize.ny=this.conf.resize.sep_y-t,this.conf.resize.ny>this.conf.resize.sep_y+this.conf.resize.min_hb?this.conf.resize.ny=this.conf.resize.sep_y+this.conf.resize.min_hb:this.conf.resize.ny<this.conf.resize.sep_y-this.conf.resize.min_ha&&(this.conf.resize.ny=this.conf.resize.sep_y-this.conf.resize.min_ha),this.r_sep.style.top=this.conf.resize.ny+"px")},this._afterResize=function(n){var u,f,e,o;if(typeof addEventListener=="function"?(window.removeEventListener("mousemove",this._doOnMouseMove,!1),window.removeEventListener("mouseup",this._doOnMouseUp,!1),window.removeEventListener(window.dhx4.dnd.evs.move,this._doOnMouseMove,!1),window.removeEventListener(window.dhx4.dnd.evs.end,this._doOnMouseUp,!1)):(document.body.detachEvent("onmousemove",this._doOnMouseMove),document.body.detachEvent("onmouseup",this._doOnMouseUp)),!this.conf.resize.active){this.conf.resize=null;return}if(n.type==window.dhx4.dnd.evs.end)this.sep.className=this.sep.className.replace(/\s{0,}dhxlayout_sep_resize_actv/gi,"");else if(n.button!==this.conf.btn_left)return;var t=this._getLayout(),i=t._getMainInst(),r=i.checkEvent("onPanelResizeFinish")==!0?{}:!1;r!==!1&&i.forEachItem(function(n){r[n.conf.name]={w:n.conf.size.w,h:n.conf.size.h};n=null});u=this.conf.resize.nx-this.conf.resize.sep_x;f=this.conf.resize.ny-this.conf.resize.sep_y;t.cdata.a._setSize(t.cdata.a.conf.size.x,t.cdata.a.conf.size.y,t.cdata.a.conf.size.w+u,t.cdata.a.conf.size.h+f,"a");t.cdata.b._setSize(t.cdata.b.conf.size.x+u,t.cdata.b.conf.size.y+f,t.cdata.b.conf.size.w-u,t.cdata.b.conf.size.h-f,"b");this._setSize(parseInt(this.r_sep.style.left),parseInt(this.r_sep.style.top),parseInt(this.r_sep.style.width),parseInt(this.r_sep.style.height));window.dhx4.isIE?(e=this,window.setTimeout(function(){e._removeResizeArea();e=null},1)):this._removeResizeArea();r!==!1&&(o=[],i.forEachItem(function(n){var t=r[n.conf.name];t.w==n.conf.size.w&&t.h==n.conf.size.h||o.push(n.conf.name);n=null}),i._callMainEvent("onPanelResizeFinish",[o]));i=t=null;this.conf.resize.active=!1;this.conf.resize=null;window.dhx4.dnd.p_en==!0&&window.dhx4.dnd._touchOn()},this._initResizeArea=function(){if(this.r_sep==null&&(this.r_sep=document.createElement("DIV"),this.r_sep.className="dhxlayout_resize_sep",this.r_sep.style.left=this.sep.style.left,this.r_sep.style.top=this.sep.style.top,this.r_sep.style.width=this.sep.style.width,this.r_sep.style.height=this.sep.style.height,this.sep.parentNode.appendChild(this.r_sep),window.dhx4.isIE&&(this.r_sep.onselectstart=function(){return!1})),this.r_area==null){if(this.r_area=document.createElement("DIV"),this.r_area.className="dhxlayout_resize_area",this.sep.parentNode.appendChild(this.r_area),window.dhx4.isIE&&(this.r_area.onselectstart=function(){return!1}),this.conf.mode=="v")var i=parseInt(this.r_sep.style.left)-this.conf.resize.min_wa,r=parseInt(this.r_sep.style.top),n=this.conf.resize.min_wa+this.conf.resize.min_wb+parseInt(this.r_sep.style.width),t=parseInt(this.r_sep.style.height);else var i=parseInt(this.r_sep.style.left),r=parseInt(this.r_sep.style.top)-this.conf.resize.min_ha,n=parseInt(this.r_sep.style.width),t=this.conf.resize.min_ha+this.conf.resize.min_hb+parseInt(this.r_sep.style.height);this.r_area.style.left=i+"px";this.r_area.style.top=r+"px";dhtmlXLayoutObject.prototype._confGlob.reszieCover||(dhtmlXLayoutObject.prototype._confGlob.reszieCover={},this.r_area.style.width=n+"px",this.r_area.style.height=t+"px",dhtmlXLayoutObject.prototype._confGlob.reszieCover.w=parseInt(this.r_area.style.width)-this.r_area.offsetWidth,dhtmlXLayoutObject.prototype._confGlob.reszieCover.h=parseInt(this.r_area.style.height)-this.r_area.offsetHeight);this.r_area.style.width=n+dhtmlXLayoutObject.prototype._confGlob.reszieCover.w+"px";this.r_area.style.height=t+dhtmlXLayoutObject.prototype._confGlob.reszieCover.h+"px"}document.body.className+=" dhxlayout_resize_"+this.conf.mode},this._removeResizeArea=function(){this.r_sep.onselectstart=null;this.r_sep.parentNode.removeChild(this.r_sep);this.r_sep=null;this.r_area.onselectstart=null;this.r_area.parentNode.removeChild(this.r_area);this.r_area=null;document.body.className=String(document.body.className).replace(/\s{0,}dhxlayout_resize_[vh]/gi,"")},this._doOnMouseDown=function(n){n=n||event;n.preventDefault?n.preventDefault():n.cancelBubble=!0;i._beforeResize(n)},this._doOnBodyMouseDown=function(n){if(n=n||event,i.conf.resize!=null)return i.conf.resize.active==!0&&n.button!==i.conf.btn_left?(n.preventDefault&&n.preventDefault(),n.returnValue=!1,n.cancelBubble=!0,!1):void 0},this._doOnMouseMove=function(n){n=n||event;n.preventDefault?n.preventDefault():n.cancelBubble=!0;i._onResize(n)},this._doOnMouseUp=function(n){(n=n||event,n.type!="mouseup"||n.button===i.conf.btn_left)&&i._afterResize(n)},typeof addEventListener=="function"?(this.sep.addEventListener("mousedown",this._doOnMouseDown,!1),this.sep.addEventListener(window.dhx4.dnd.evs.start,this._doOnMouseDown,!1),document.body.addEventListener("mousedown",this._doOnBodyMouseDown,!1),document.body.addEventListener("contextmenu",this._doOnBodyMouseDown,!1)):(this.sep.attachEvent("onmousedown",this._doOnMouseDown),document.body.attachEvent("onmousedown",this._doOnBodyMouseDown),document.body.attachEvent("oncontextmenu",this._doOnBodyMouseDown)),this._unload=function(){typeof addEventListener=="function"?(this.sep.removeEventListener("mousedown",this._doOnMouseDown,!1),this.sep.removeEventListener(window.dhx4.dnd.evs.start,this._doOnMouseDown,!1),document.body.removeEventListener("mousedown",this._doOnBodyMouseDown,!1),document.body.removeEventListener("contextmenu",this._doOnBodyMouseDown,!1)):(this.sep.detachEvent("onmousedown",this._doOnMouseDown),document.body.detachEvent("onmousedown",this._doOnBodyMouseDown),document.body.detachEvent("oncontextmenu",this._doOnBodyMouseDown));window.dhx4.isIE==!0&&(this.sep.onselectstart=null);this.sep.parentNode.removeChild(this.sep);this.sep=null;for(var n in this)this[n]=null;i=null},this}function dhtmlXTabBar(n,t){var i=this,r,f,u;return this.conf={skin:window.dhx4.skin||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtabbar")||"material",css:"dhxtabbar",lastActive:null,closeButton:!1,align:"left",tabsMode:t=="bottom"?"bottom":"top",tabsContCss:"",contZone:!0,transSpeed:"0.15s",arwMode:"always",tabsOfs:1,tabsTop:0,url_demand:!1,urls:{},autoload:{},tabsWidth:{dhx_terrace:[44,14],dhx_web:[35,9],dhx_skyblue:[35,9],material:[44,14]}},this.conf.skin=="material"&&(this.conf.arwMode="auto"),r=navigator.userAgent,r.indexOf("Safari")>=0&&(r.indexOf("5.1.7")>=0||r.match(/7[\.\d]* mobile/gi)!=null&&r.match(/AppleWebKit/gi)!=null)&&(this.conf.tabsContCss=" safari_517_fix"),n!=null&&typeof n=="object"&&typeof n.tagName=="undefined"?(f=n.parent,typeof n.skin!="undefined"&&(this.conf.skin=n.skin),typeof n.mode!="undefined"&&(this.conf.tabsMode=n.mode=="bottom"?"bottom":"top"),typeof n.align!="undefined"&&(this.conf.align=n.align=="right"?"right":"left"),typeof n.close_button!="undefined"&&(this.conf.closeButton=window.dhx4.s2b(n.close_button)),typeof n.content_zone!="undefined"&&(this.conf.contZone=window.dhx4.s2b(n.content_zone)),typeof n.xml!="undefined"&&(this.conf.autoload.xml=n.xml),typeof n.json!="undefined"&&(this.conf.autoload.xml=n.json),typeof n.tabs!="undefined"&&(this.conf.autoload.tabs=n.tabs),typeof n.onload!="undefined"&&(this.conf.autoload.onload=n.onload),typeof n.arrows_mode!="undefined"&&(this.conf.autoload.arrows_mode=n.arrows_mode)):f=n,window.dhtmlXCellTop.apply(this,[f,n.offsets]),this.base._ofs!=null&&this.base._ofs.t!=null&&(this.conf.tabsTop=this.base._ofs.t),this.tabsMode=document.createElement("DIV"),this.tabsMode.className="dhxtabbar_tabs_"+this.conf.tabsMode,this.cont.appendChild(this.tabsMode),this.tabsArea=document.createElement("DIV"),this.tabsArea.className="dhxtabbar_tabs dhxtabbar_tabs_"+this.conf.tabsMode,this.tabsArea.innerHTML="<div class='dhxtabbar_tabs_ar_left'><div class='dhxtabbar_arrow_img'><\/div><\/div><div class='dhxtabbar_tabs_base'><div class='dhxtabbar_tabs_cont_"+this.conf.align+this.conf.tabsContCss+"'><div class='dhxtabbar_tabs_line'><\/div><\/div><\/div><div class='dhxtabbar_tabs_ar_right'><div class='dhxtabbar_arrow_img'><\/div><\/div>",this.tabsArea.style.top=this.conf.tabsMode=="top"?this.conf.tabsTop+"px":"auto",this.tabsMode.appendChild(this.tabsArea),this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px",this.tabsArea.childNodes[0].onclick=function(){i.conf.align=="left"?i._moveTabs(1):i._moveTabs(-1)},this.tabsArea.childNodes[2].onclick=function(){i.conf.align=="left"?i._moveTabs(-1):i._moveTabs(1)},this._onTabsAreaClick=function(n){return this._callMainEvent("onTabClose",[n])},this.tabsArea.onclick=function(n){n=n||event;for(var t=n.target||n.srcElement;t!=null;){if(typeof t._tabCloseId!="undefined"){if(i._onTabsAreaClick(t._tabCloseId)!==!0)return;i.t[t._tabCloseId].conf.remove=!0;i._hideTab(t._tabCloseId);t=null}else typeof t._tabId!="undefined"&&(i._doOnClick(t._tabId),t=null);t!=null&&(t=t.parentNode,t==this&&(t=null))}},this.tabsArea.onselectstart=function(n){n=n||event;n.preventDefault?n.preventDefault():n.returnValue=!1},this._doOnClick=function(n){this.callEvent("onTabClick",[n,this.conf.lastActive]);this.t[n].conf.enabled&&this._setTabActive(n)},this.t={},this.addTab=function(n,t,i,r,u,f){var e,o,h,s;f=typeof f=="undefined"?this.conf.closeButton==!0:window.dhx4.s2b(f);u=window.dhx4.s2b(u);e=document.createElement("DIV");e.className="dhxtabbar_tab";e.innerHTML="<div class='dhxtabbar_tab_text"+(f?" dhxtabbar_tab_text_close":"")+"'>"+t+"<\/div>"+(f?"<div class='dhxtabbar_tab_close'><\/div>":"");e._tabId=n;f&&(e.childNodes[1]._tabCloseId=n);o=this.tabsArea.childNodes[1].firstChild;r!=null&&r+1>0&&r+1<o.childNodes.length?o.insertBefore(e,o.childNodes[r+1]):o.appendChild(e);h=!1;typeof i=="undefined"||i==null||i=="*"?(i=this._getLabelWidth(t,f),h=!0):i=parseInt(i);e.style.width=i+"px";s=new dhtmlXTabBarCell(n,this);this.tabsMode.appendChild(s.cell);this.t[n]={tab:e,cell:s,conf:{text:t,visible:!0,active:!1,enabled:!0,close:f,width:i,autowidth:h}};o=s=null;u?this._setTabActive(n):this._adjustCell(n);this.conf.initSeq!=!0&&this.conf.arwMode=="auto"&&this.setSizes()},this.setSizes=function(){this._adjustCont();this.conf.tabsAreaOfs==null&&(this.tabsArea.style.width=this.cont.offsetWidth+"px",this.conf.tabsAreaOfs=parseInt(this.tabsArea.style.width)-this.tabsArea.offsetWidth);this.tabsArea.style.width=this.cont.offsetWidth+this.conf.tabsAreaOfs+"px";this._adjustCell(this.conf.lastActive);this._adjustTabs(!0);this.callEvent("_onSetSizes",[])},this._adjustCell=function(n){if(this.conf.contZone&&n!=null){var t=(this.conf.tabsMode=="top"?this.tabsArea.offsetHeight:0)+this.conf.tabsTop,i=this.cont.offsetHeight-this.tabsArea.offsetHeight-this.conf.tabsTop,r=this.t[n].cell.dataType;this.conf.skin=="dhx_skyblue"&&(r=="layout"||r=="tabbar"||r=="acc")&&(this.conf.tabsMode=="top"&&(t=t-1),i=i+1);n!=this.conf.lastActive&&(t=-5e3,this.t[n].cell.cell.style.visibility="hidden",this.t[n].cell.cell.style.zIndex=0);this.t[n].cell._setSize(0,t,this.cont.offsetWidth,i)}},this.setTabsMode=function(n){this.conf.tabsMode=n=="bottom"?"bottom":"top";this.tabsMode.className="dhxtabbar_tabs_"+this.conf.tabsMode;this.tabsArea.className="dhxtabbar_tabs dhxtabbar_tabs_"+this.conf.tabsMode;this.tabsArea.style.top=this.conf.tabsMode=="top"?this.conf.tabsTop+"px":"auto";this.setSizes()},this._tabCss=function(n){var t=this.t[n].conf.active,i=!this.t[n].conf.enabled,r=!this.t[n].conf.visible;return"dhxtabbar_tab"+(r?" dhxtabbar_tab_hidden":t||i?" dhxtabbar_tab"+(t?"_actv":"")+(i?"_dis":""):"")},this._getLabelWidth=function(n,t){this.tabsTextTest==null&&(this.tabsTextTest=document.createElement("SPAN"),this.tabsTextTest.className="dhxtabbar_tabs_text_test_"+this.conf.skin);document.body.appendChild(this.tabsTextTest);this.tabsTextTest.innerHTML=n;var i=this.tabsTextTest.offsetWidth;return window.dhx4.isIE&&i==0&&(i=this.tabsTextTest.offsetWidth),i+=this.conf.tabsWidth[this.conf.skin][0],t==!0&&(i+=this.conf.tabsWidth[this.conf.skin][1]),document.body.removeChild(this.tabsTextTest),i},this._adjustTabs=function(n){var t,u,i,f,r,e;if((this._checkArrows()==!0||n==!0)&&(this.tabsArea.childNodes[1].style.left=this.tabsArea.childNodes[0].offsetWidth-1+"px",this.tabsArea.childNodes[1].style.width=Math.max(0,this.tabsArea.clientWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth)+this.conf.tabsOfs*2+"px"),t=this.tabsArea.childNodes[1],t.offsetWidth<5){t=null;return}for(u=parseInt(t.childNodes[0].style[this.conf.align]),i=null,f=0;f<t.childNodes[0].childNodes.length;f++)r=t.childNodes[0].childNodes[f]._tabId,r!=null&&this.t[r].conf.visible&&(e=this.t[r].tab.offsetWidth-this.conf.tabsOfs,this.t[r].conf.active&&(u<0||t.offsetWidth<e?i={d:1,id:r}:u+e>t.offsetWidth&&(i={d:-1,id:r})),u+=e);i!=null?this._moveTabs(i.d,i.id):t.offsetWidth>u+1&&(t.childNodes[0].style[this.conf.align]=Math.min(0,parseInt(t.childNodes[0].style[this.conf.align])+(t.offsetWidth-u))+"px");t=i=null},this._moveTabs=function(n,t){for(var o,u,e=this.tabsArea.childNodes[1].childNodes[0],l=0,i=[],a=null,r=0;r<e.childNodes.length;r++)o=e.childNodes[r]._tabId,o!=null&&this.t[o].conf.visible&&(i.push({id:o,w:this.t[o].tab.offsetWidth-this.conf.tabsOfs,ind:l}),o==t&&(a=l),l++);var f=parseInt(this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]),h=this.tabsArea.clientWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth+this.conf.tabsOfs,s=null,c=null;for(r=0;r<i.length;r++)i[r].x=f,s==null&&f>=0&&f+i[r].w>0&&(s=i[r]),f<h&&f+i[r].w<=h&&(c=i[r]),f+=i[r].w;a!=null?u=i[a]:(u=null,n>0?s==null?i.length>0&&(u=i[i.length-1]):s.ind>0&&i.length>=s.ind&&(u=i[s.ind-1]):c==null?i.length>0&&(u=i[0]):i.length>c.ind&&(u=i[c.ind+1]));u!=null&&(e.style[this.conf.align]=n>0?f<h?Math.min(0,parseInt(e.style[this.conf.align])+(h-f))+"px":parseInt(e.style[this.conf.align])-u.x+"px":parseInt(e.style[this.conf.align])-u.x+h-u.w+"px");e=u=i=null},this._getNextVisible=function(n,t){return this._getNearVisible(n,t,"next")},this._getPrevVisible=function(n,t){return this._getNearVisible(n,t,"previous")},this._getFirstVisible=function(){return this._getNearVisible(null,!1,"first")},this._getNearVisible=function(n,t,i){var r,u,f;if(i=="first")r=this.tabsArea.childNodes[1].childNodes[0].childNodes[1],i="next";else{if(n==null||this.t[n]==null)return t?this._getFirstVisible():null;r=this.t[n].tab[i+"Sibling"]}for(u=null;r!=null&&u==null;)f=r._tabId,f!=null&&u==null&&this.t[f].conf.visible?u=f:r=r[i+"Sibling"];return r=null,u},this._showTab=function(n,t){if(this.t[n]!=null){if(this.t[n].conf.transActv==!0){if(this.t[n].conf.transMode=="show")return}else if(this.t[n].conf.visible==!0)return;this.conf.transProp!==!1?(this.t[n].conf.transActv=!0,this.t[n].conf.transMode="show",this.t[n].conf.transProp=this.conf.transProp,this.t[n].conf.transActvId=t?n:null,this.t[n].conf.transEv||(this.t[n].tab.addEventListener(this.conf.transEv,this._doOnTrEnd,!1),this.t[n].conf.transEv=!0),this.t[n].conf.visible=!0,this.t[n].tab.className=this._tabCss(n),this.t[n].tab.style[this.conf.transProp]=this.conf.transValueWidth,this.t[n].tab.style.width=this.t[n].conf.width+"px",this.t[n].tab.clientWidth>=this.t[n].conf.width&&(this.t[n].tab.style.visibility="visible")):(this.t[n].conf.visible=!0,this.t[n].tab.style.display="",t||this.t[n].conf.active?(this.t[n].conf.active=!1,this._setTabActive(n)):this._adjustTabs())}},this._hideTab=function(n,t){var r;if(this.t[n]!=null){if(this.t[n].conf.transActv==!0){if(this.t[n].conf.transMode=="hide")return}else if(this.t[n].conf.visible!=!0)return;r=!1;this.conf.lastActive==n&&(this.conf.lastActive=null,this.t[n].conf.active=!1,this.t[n].tab.className=this._tabCss(n),r=!0);var f=this._getPrevVisible(n),e=this._getNextVisible(n),u=r==!0&&t!==!1?(t==!0?null:t)||e||f:null;this.conf.transProp!==!1?(this.t[n].conf.transActv=!0,this.t[n].conf.transMode="hide",this.t[n].conf.transProp=this.conf.transProp,this.t[n].conf.transActvId=u,this.t[n].conf.visible=!1,this.t[n].conf.transEv||(this.t[n].tab.addEventListener(this.conf.transEv,this._doOnTrEnd,!1),this.t[n].conf.transEv=!0),this.t[n].tab.style.visibility="hidden",this.t[n].tab.className=i._tabCss(n),this.t[n].tab.style[this.conf.transProp]=this.conf.transValueWidth,this.t[n].tab.style.width="0px"):(this.t[n].tab.style.display="none",this.t[n].conf.visible=!1,this.conf.contZone&&(this.t[n].cell.cell.style.visibility="hidden",this.t[n].cell.cell.style.top="-5000px"),u!=null&&this._setTabActive(u),this._adjustTabs(),this.t[n].conf.remove&&this._removeTab(n))}},this._isTabVisible=function(n){return this.t[n].conf.visible==!0},this._doOnTrEnd=function(){var t=this._tabId,n,r;i.t[t]!=null&&(n=i.t[t],r=n.conf.transActvId,n.conf.transMode=="hide"?n.conf.remove?i._removeTab(t):(n.tab.style[n.conf.transProp]="",i.conf.contZone&&(n.cell.cell.style.visibility="hidden",n.cell.cell.style.top="-5000px"),n.conf.transActv=!1):n.conf.transMode=="show"&&(n.tab.style[n.conf.transProp]="",n.tab.style.visibility="visible",n.conf.transMode=null,n.conf.transActv=!1),r!=null?i._setTabActive(r):i._adjustTabs(),n=null)},this.enableTabCloseButton=function(n){this.conf.closeButton=window.dhx4.s2b(n)},this.unload=function(){this.conf.unloading=!0;this.clearAll();this.t=null;this.tabsTextTest!=null&&(this.tabsTextTest.parentNode&&this.tabsTextTest.parentNode.removeChild(this.tabsTextTest),this.tabsTextTest=null);window.dhx4._enableDataLoading(this,null,null,null,"clear");this.tabsArea.childNodes[0].onclick=null;this.tabsArea.childNodes[2].onclick=null;this.tabsArea.onclick=null;this.tabsArea.onselectstart=null;this.tabsArea.parentNode.removeChild(this.tabsArea);this.tabsArea=null;this.tabsMode.parentNode.removeChild(this.tabsMode);this.tabsMode=null;this._unloadTop();window.dhx4._eventable(this,"clear");for(var n in this)this[n]=null;i=null},this.enableContentZone=function(n){this.conf.contZone=n==!0},this.setSkin=function(n){this._setBaseSkin(n);this.conf.skin=n;this.tabsTextTest!=null&&(this.tabsTextTest.className="dhxtabbar_tabs_text_test_"+this.conf.skin);for(var t in this.t)this.t[t].cell._resetSizeState(),this.t[t].conf.autowidth==!0&&(this.t[t].conf.width=this._getLabelWidth(this.t[t].conf.text,this.t[t].conf.close),this.t[t].conf.visible&&(this.t[t].tab.style.width=this.t[t].conf.width+"px"));this.conf.tabsAreaOfs=null;this._fixTabsOfs();this.setSizes()},this.setAlign=function(n){if(n=n=="left"?"left":"right",n==this.conf.align){this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px";return}this.conf.transProp!==!1&&(this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]="");this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="";this.conf.align=n;this.tabsArea.childNodes[1].childNodes[0].className="dhxtabbar_tabs_cont_"+this.conf.align+this.conf.tabsContCss;this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px";this.conf.transProp!==!1&&(this.conf.transValuePos=this.conf.align+" "+this.conf.transSpeed,this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=this.conf.transValuePos)},this._initObj=function(n){var i,r,t;if(this.conf.initSeq=!0,this.clearAll(),i=!1,n.settings!=null&&(n.settings.skin!=null&&this.setSkin(n.settings.skin),n.settings.close_button!=null?this.enableTabCloseButton(window.dhx4.s2b(n.settings.close_button)):n.settings.closeButton!=null&&this.enableTabCloseButton(window.dhx4.s2b(n.settings.closeButton)),n.settings.align!=null&&this.setAlign(n.settings.align),n.settings.hrefmode=="ajax"&&(i=!0),n.settings.hrefmode=="ajax-html"&&(i=!0,this.conf.url_demand=!0)),n.tabs!=null)for(r=0;r<n.tabs.length;r++)t=n.tabs[r],typeof t.id=="undefined"&&(t.id=window.dhx4.newId()),t.width=isNaN(parseInt(t.width))?null:parseInt(t.width),this.addTab(t.id,t.text||t.label||"",t.width,t.index,window.dhx4.s2b(t.selected)||window.dhx4.s2b(t.active),t.close),t.content!=null?this.cells(t.id).attachHTMLString(t.content):t.href!=null&&(this.conf.url_demand==!0?this.conf.urls[t.id]={href:t.href,ajax:i}:this.cells(t.id).attachURL(t.href,i)),typeof t.enabled!="undefined"&&window.dhx4.s2b(t.enabled)==!1?this.tabs(t.id).disable():typeof t.disabled!="undefined"&&window.dhx4.s2b(t.disabled)==!0&&this.tabs(t.id).disable();this.conf.initSeq=!1;this.conf.arwMode=="auto"&&this.setSizes();this.conf.url_demand==!0&&this._loadURLOnDemand(this.conf.lastActive)},this._xmlToObj=function(n){var s={settings:{},tabs:[]},f=n.getElementsByTagName("tabbar")[0],r,i,u,t,e,o;if(f!=null){for(t in{skin:1,align:1,closeButton:1,hrefmode:1})f.getAttribute(t)!=null&&(s.settings[t]=f.getAttribute(t));for(r=f.getElementsByTagName("tab"),i=0;i<r.length;i++){u={text:r[i].firstChild.nodeValue||""};for(t in{id:1,width:1,close:1,selected:1,active:1,enabled:1,disabled:1,href:1})r[i].getAttribute(t)!=null&&(u[t]=r[i].getAttribute(t));if(e=r[i].getElementsByTagName("content")[0],e!=null)for(u.content="",o=0;o<e.childNodes.length;o++)u.content+=e.childNodes[o].nodeValue||"";s.tabs.push(u)}}return s},dhx4._enableDataLoading(this,"_initObj","_xmlToObj","tabbar",{struct:!0}),u=window.dhx4.transDetect(),this.conf.transProp=u.transProp,this.conf.transEv=u.transEv,this.conf.transValueWidth="width "+this.conf.transSpeed,u=null,this.conf.transProp!==!1&&(this.conf.transValuePos=this.conf.align+" "+this.conf.transSpeed,this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=this.conf.transValuePos),this._callMainEvent=function(n,t){return this.callEvent(n,t)},window.dhx4._eventable(this),this.conf.autoload.json!=null?this.loadStruct(this.conf.autoload.json,this.conf.autoload.onload):this.conf.autoload.xml!=null?this.loadStruct(this.conf.autoload.xml,this.conf.autoload.onload):this.conf.autoload.tabs!=null&&this.loadStruct({tabs:this.conf.autoload.tabs},this.conf.autoload.onload),this.conf.autoload.arrows_mode!=null&&this.setArrowsMode(this.conf.autoload.arrows_mode),this._fixTabsOfs(),this.setSizes(),this}function dhtmlXTabBarInitFromHTML(){for(var e,c,u,t,r,i,l,a,h=document.getElementsByTagName("div"),o=0;o<h.length;o++)if(h[o].className.indexOf("dhtmlxTabBar")!=-1){var s={settings:{},tabs:[]},n=h[o],v=n.id;for(n.className="",e=[],r=0;r<n.childNodes.length;r++)n.childNodes[r].tagName&&n.childNodes[r].tagName!="!"&&(e[e.length]=n.childNodes[r]);for(c=n.getAttribute("skin"),c!=null&&(s.settings.skin=c),u=new dhtmlXTabBar({parent:v,mode:n.getAttribute("mode")}),window[v]=u,acs=n.getAttribute("onbeforeinit"),acs&&eval(acs),align=n.getAttribute("align"),align&&(s.settings.align=align),t={},r=0;r<e.length;r++){var f=e[r],p={id:f.id,text:f.getAttribute("name"),width:f.getAttribute("width"),selected:f.getAttribute("selected"),active:f.getAttribute("active"),close:f.getAttribute("close")},y=f.getAttribute("href");t[f.id]=y?{href:y}:{cont:f};s.tabs.push(p)}u.loadStruct(s);for(i in t)t[i].href?(u.cells(i).attachURL(t[i].href),t[i].href=null):(u.cells(i).attachObject(t[i].cont),t[i].cont.style.display=="none"&&(t[i].cont.style.display=""),t[i].cont=null),t[i]=null;l=n.getAttribute("select");l!=null?u.tabs(l).setActive():u.getActiveTab()==null&&(a=u._getFirstVisible(),a!=null&&u.cells(a).setActive());acs=n.getAttribute("oninit");acs&&eval(acs)}typeof addEventListener=="function"?window.removeEventListener("load",dhtmlXTabBarInitFromHTML,!1):window.detachEvent("onload",dhtmlXTabBarInitFromHTML)}function dhtmlXSideBar(n){var t=this,i;return this.conf={skin:n.skin||window.dhx4.skin||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxsidebar")||"material",css:"dhxsidebar",width:n.width||200,scroll_size:12,scroll_mult:20,close_button:!1,icons_path:n.icons_path||"",selected:null,single_cell:typeof n.single_cell=="undefined"?!1:window.dhx4.s2b(n.single_cell),cell:null,header:window.dhx4.s2b(n.header),autohide:window.dhx4.s2b(n.autohide),animate_items:!0},this.setTemplate(n.template),window.dhtmlXCellTop.apply(this,[n.parent,n==null?null:n.offsets]),window.dhx4._eventable(this),this.conf.touch_ms=!1,this.conf.touch_start="touchstart",this.conf.touch_end="touchend",this.side=document.createElement("DIV"),this.side.className="dhxsidebar_side dhxsidebar_tpl_"+this.conf.tpl_name,this.side.innerHTML="<div class='dhxsidebar_side_items'><\/div>",this.cont.appendChild(this.side),this.arw=document.createElement("DIV"),this.arw.className="dhxsidebar_arrows dhxsidebar_arrows_hidden",this.arw.innerHTML="<div class='dhxsidebar_arrow dhxsidebar_arrow_left'><div class='dhxsidebar_arrow_image'><\/div><\/div><div class='dhxsidebar_arrow dhxsidebar_arrow_right'><div class='dhxsidebar_arrow_image'><\/div><\/div>",this.cont.appendChild(this.arw),this.conf.autohide==!0&&(this.hideSide(),this.cont.className+=" dhxsidebar_autohide",this._doOnBodyClick=function(){if(t.conf.clear_click==!0){t.conf.clear_click=!1;return}t.hideSide()},this._doOnEscDown=function(n){n=n||event;n.keyCode==27&&(t.conf.clear_click=!1,t.hideSide())},typeof addEventListener=="function"?(window.addEventListener(this.conf.touch_start,this._doOnBodyClick,!1),window.addEventListener("click",this._doOnBodyClick,!1),window.addEventListener("keydown",this._doOnEscDown,!1)):(document.body.attachEvent("onclick",this._doOnBodyClick),document.body.attachEvent("onkeydown",this._doOnEscDown))),window.setTimeout(function(){t!=null&&t.side!=null&&(t.side.firstChild.style.top="0px")},1),this._doOnArwClick=function(n){n=n||event;n.type!="click"&&n.preventDefault&&n.preventDefault();n.cancelBubble=!0;var i=n.target||n.srcElement;i.className.match(/dhxsidebar_arrow_image/)!=null&&(i=i.parentNode);i.className.match(/dhxsidebar_arrow_left/)!=null?t._scrollSide(-t.conf.scroll_size):i.className.match(/dhxsidebar_arrow_right/)!=null&&t._scrollSide(t.conf.scroll_size);i=null},typeof addEventListener=="function"?(this.arw.addEventListener(this.conf.touch_start,this._doOnArwClick,!1),this.arw.addEventListener("click",this._doOnArwClick,!1)):this.arw.attachEvent("onclick",this._doOnArwClick),this._doOnSideClick=function(n){n=n||event;var i=n.target||n.srcElement,r=null,u=!1;for(t.conf.clear_click=!0,(n.type=="touchstart"||n.type=="pointerdown"||n.type=="MSPointerDown")&&(n.preventDefault&&n.preventDefault(),this.className.match(/dhxsidebar_touch/gi)==null&&(n.type=="touchstart"||n.type=="pointerdown"&&n.pointerType=="touch")&&(this.className+=" dhxsidebar_touch"));i!=null&&r==null&&n.type!="pointerdown"&&n.type!="MSPointerDown";)typeof i.className!="undefined"&&(i.className.match(/^dhxsidebar_item/)!=null&&typeof i._idd!="undefined"?r=i._idd:i.className.match(/^dhxsidebar_bubble/)!=null&&(u=!0,r=i.parentNode._idd)),i=i.parentNode;r!=null&&(u==!1||u==!0&&t.callEvent("onBubbleClick",[r,t.t[r].conf.bubble])==!0)&&t._setItemActive(r,!0);i=null},typeof addEventListener=="function"?(this.side.addEventListener(this.conf.touch_start,this._doOnSideClick,!1),this.side.addEventListener(this.conf.touch_end,this._doOnSideClick,!1),this.side.addEventListener("mouseup",this._doOnSideClick,!1)):this.side.attachEvent("onclick",this._doOnSideClick),this.side.onmouseover=function(){this.className=this.className.replace(/\s*dhxsidebar_touch/gi,"")},this._doOnSideScroll=function(n){n=n||event;var i=n.type=="mousewheel"?-n.wheelDelta:n.deltaY;t._scrollSide(i/Math.abs(i)*3)},this._scrollSide=function(n){var t=parseInt(this.side.firstChild.style.top||0)-n*this.conf.scroll_mult;t+this.side.firstChild.offsetHeight<this.side.clientHeight&&(t=this.side.clientHeight-this.side.firstChild.offsetHeight);t>0&&(t=0);this.side.firstChild.style.top=t+"px"},typeof addEventListener=="function"?this.side.addEventListener("wheel",this._doOnSideScroll,!1):this.side.attachEvent("onmousewheel",this._doOnSideScroll),this.t={},this.s={},this._adjustCell=function(n,t){if(this.conf.single_cell==!0||n!=null){var i=this.conf.autohide==!0?0:this.conf.width,u=this.cont.offsetWidth-i,r=0,f=this.cont.offsetHeight;this.conf.single_cell==!0?t==!0&&this.conf.cell._setSize(i,r,u,f):(n!=this.conf.selected&&(r=-5e3,this.t[n].cell.cell.style.visibility="hidden",this.t[n].cell.cell.style.zIndex=0),this.t[n].cell._setSize(i,r,u,f))}},i=window.dhx4.transDetect(),this.conf.transProp=i.transProp,this.conf.transEv=i.transEv,this.conf.transValue="all 0.1s",this._doOnTrEnd=function(){var i=this._idd,n,r;t.t[i]!=null&&(n=t.t[i],r=n.conf.transActvId,n.conf.transMode=="hide"?n.conf.remove==!0?t._removeItem(i):(n.item.style[n.conf.transProp]="",t.conf.single_cell!=!0&&(n.cell.cell.style.visibility="hidden",n.cell.cell.style.top="-5000px"),n.conf.transActv=!1):n.conf.transMode=="show"&&(n.item.style[n.conf.transProp]="",n.item.style.visibility="visible",n.conf.transMode=null,n.conf.transActv=!1),r!=null?t._setItemActive(r):t._checkHeight(),n=null)},this._initObj=function(n){this.clearAll();n.items!=null&&this.addItem(n.items)},this._xmlToObj=function(n){var e=[],u=n.getElementsByTagName("sidebar"),i,t,f,r;if(u!=null&&u[0]!=null)for(i=u[0].getElementsByTagName("item"),t=0;t<i.length;t++){for(f={},r=0;r<i[t].attributes.length;r++)f[i[t].attributes[r].nodeName]=i[t].attributes[r].nodeValue;e.push(f)}return{items:e}},dhx4._enableDataLoading(this,"_initObj","_xmlToObj","sidebar",{struct:!0}),this.unload=function(){this.conf.unloading=!0;typeof addEventListener=="function"?this.side.removeEventListener("wheel",this._doOnSideScroll,!1):this.side.detachEvent("onmousewheel",this._doOnSideScroll);this.conf.autohide==!0&&(typeof addEventListener=="function"?(window.removeEventListener("click",this._doOnBodyClick,!1),window.removeEventListener("keydown",this._doOnEscDown,!1)):(document.body.detachEvent("onclick",this._doOnBodyClick),document.body.detachEvent("onkeydown",this._doOnEscDown)));typeof this._sideCoverDetach=="function"&&this._sideCoverDetach();this.clearAll();this.s=this.t=null;typeof addEventListener=="function"?(this.arw.removeEventListener(this.conf.touch_start,this._doOnArwClick,!1),this.arw.removeEventListener("click",this._doOnArwClick,!1)):this.arw.detachEvent("onclick",this._doOnArwClick);this.arw.parentNode.removeChild(this.arw);this.arw=null;typeof addEventListener=="function"?(this.side.removeEventListener(this.conf.touch_start,this._doOnSideClick,!1),this.side.removeEventListener(this.conf.touch_end,this._doOnSideClick,!1),this.side.removeEventListener("click",this._doOnSideClick,!1)):this.side.detachEvent("onclick",this._doOnSideClick);this.side.onmouseover=null;this.side.parentNode.removeChild(this.side);this.side=null;this._unloadTop();this.conf.single_cell==!0&&(this.conf.cell._unload(),this.conf.cell=null);window.dhx4._eventable(this,"clear");window.dhx4._enableDataLoading(this,null,null,null,"clear");for(var n in this)this[n]=null;t=null},this.conf.single_cell==!0&&(this.conf.cell=new dhtmlXSideBarCell("master",this),this.cont.appendChild(this.conf.cell.cell),this._cells_native=this.cells,this.cells=function(n){return this.conf.cell._idd=n,this.conf.cell}),this.setSizes(),n.items!=null?this._initObj(n):n.json!=null?this.loadStruct(n.json,n.onload):n.xml!=null&&this.loadStruct(n.xml,n.onload),this}function dhtmlXCarousel(n,t,i){var e,u,r,f;if(typeof n=="string"||typeof n=="object"&&typeof n.tagName!="undefined"?n={parent:typeof n=="string"?document.getElementById(n):n,effect:t,skin:i,delete_conf:!0}:(typeof n=="undefined"||n==null)&&(n={}),this.conf={skin:n.skin||window.dhx4.skin||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcarousel")||"material",css:"dhxcarousel",items_count:0,selected:-1,item_width:Number(n.item_width)||"auto",item_height:Number(n.item_height)||"auto",ofs_item:Number(n.offset_item)||1,ofs_left:Number(n.offset_left)||0,ofs_top:Number(n.offset_top)||0,buttons:typeof n.buttons=="undefined"?!0:window.dhx4.s2b(n.buttons),drops:!1,keys:typeof n.keys=="undefined"?!0:window.dhx4.s2b(n.keys),key_data:{left:37,right:39},touch_scroll:typeof n.touch_scroll!="undefined"?window.dhx4.s2b(n.touch_scroll):!0,arw:["&#9668;","&#9658;"]},this.conf.autowidth=this.conf.item_width=="auto",this.conf.autoheight=this.conf.item_height=="auto",e=window.dhx4.transDetect(),this.conf.transProp=e.transProp,this.conf.transEv=e.transEv,this.conf.anim_type=n.effect||"slide",this.ef[this.conf.anim_type]==!0&&(u=this["_"+this.conf.anim_type+"_init"](),u===!1&&(this.conf.anim_type="slide",u=this["_"+this.conf.anim_type+"_init"]()),typeof u=="object"))for(f in u)typeof this.conf[f]=="undefined"&&(this.conf[f]=u[f]);if(this.conf.anim_f=this["_"+this.conf.anim_type+"_f"](),r=this,window.dhtmlXCellTop.apply(this,[n.parent,n.offsets]),this.area=document.createElement("DIV"),this.area.className="dhxcarousel_area",this.cont.appendChild(this.area),typeof addEventListener=="function"&&r.conf.touch_scroll==!0&&(this._doOnTouchStart=function(n){window.dhx4.dnd._mTouch(n)!=!0&&r.conf.animating!=!0&&(n.preventDefault&&n.preventDefault(),r.area.className+=" dhxcarousel_area_dnd",r.conf.touch_conf={t:(new Date).getTime(),dx:null,dy:null},n.type.match(/^touch/)!=null?(r.conf.touch_conf.id=n.touches[0].identifier,r.conf.touch_conf.x=n.touches[0].clientX,r.conf.touch_conf.y=n.touches[0].clientY):(r.area.style.touchAction=r.area.style.msTouchAction="none",r.conf.touch_conf.x=n.clientX,r.conf.touch_conf.y=n.clientY),window.addEventListener(window.dhx4.dnd.evs.move,r._doOnTouchMove,!1),window.addEventListener(window.dhx4.dnd.evs.end,r._doOnTouchEnd,!1))},this._doOnTouchMove=function(){},this._doOnTouchEnd=function(n){var i,t,u;if(n.type.match(/^touch/)!=null)for(t=0,i=0;i<n.changedTouches.length;i++)n.changedTouches[i].identifier==r.conf.touch_conf.id&&(t=r.conf.touch_conf.x-n.changedTouches[i].clientX);else t=r.conf.touch_conf.x-n.clientX;(window.removeEventListener(window.dhx4.dnd.evs.move,r._doOnTouchMove,!1),window.removeEventListener(window.dhx4.dnd.evs.end,r._doOnTouchEnd,!1),r.area.className=r.area.className.replace(/\s*dhxcarousel_area_dnd$/,""),t==0||(new Date).getTime()-r.conf.touch_conf.t>400)||(u=t/Math.abs(t),r._animateStart(u))},this.area.addEventListener(window.dhx4.dnd.evs.start,this._doOnTouchStart,!1)),this.cdata={},this.ind={},this.addCell=function(n,t){var i,r;this.conf.items_count++;this.conf.selected==-1&&(this.conf.selected=0);this.setSizes();this._checkControls();typeof t=="undefined"||t==null?t=this.conf.items_count-1:t<0?t=0:t>this.conf.items_count-1&&(t=this.conf.items_count-1);for(i in this.cdata)this.cdata[i].index>=t&&(this.cdata[i].index++,this.ind[this.cdata[i].index]=i,this._adjustCell(i));for(n==null&&(n=String(window.dhx4.newId()));this.cdata[n]!=null;)n=String(window.dhx4.newId());return r=new dhtmlXCarouselCell(n,this),this.area.childNodes[t]!=null?this.area.insertBefore(r.cell,this.area.childNodes[t]):this.area.appendChild(r.cell),this.cdata[n]={index:t,cell:r},this.ind[t]=n,this._adjustCell(n),this._addBar(),this._setBarIndex(this.conf.selected),r=null,this[this.conf.anim_f.cell_added](n),n},this._removeCell=function(n){var i=this.cdata[n].index,u,t,r;if(this.cdata[n].cell._unload(),this.cdata[n].index=this.cdata[n].cell=null,this.cdata[n]=null,delete this.cdata[n],delete this.ind[i],this.conf.items_count--,this.conf.unloading!=!0){this.ind={};u=0;for(t in this.cdata)this.cdata[t].index>i&&this.cdata[t].index--,this.ind[this.cdata[t].index]=t;r=!1;this.conf.selected>i?this.conf.selected--:this.conf.selected==i&&(this.conf.selected=Math.min(this.conf.selected,this.conf.items_count-1),r=!0);this._removeBar(!1);this._setBarIndex(this.conf.selected);r==!0&&this.conf.selected>=0&&this[this.conf.anim_f.update_selected](this.ind[this.conf.selected]);this.setSizes();this._checkControls()}},this.setSizes=function(){var t,i,r,n;this._adjustCont();t={};this.area.style.height=this.cont.offsetHeight-this.controls.offsetHeight+"px";this.conf.width=this.conf.autowidth?this.cont.offsetWidth-this.conf.ofs_left*2:this.conf.item_width;this.conf.height=this.conf.autoheight?this.area.offsetHeight-this.conf.ofs_top*2:this.conf.item_height;this.conf.top=Math.max(0,this.conf.autoheight?this.conf.ofs_top:Math.floor((this.area.offsetHeight-this.conf.height)/2));this.area.style.width=this[this.conf.anim_f.detect_aw]()*(this.conf.width+this.conf.ofs_item)+this.conf.ofs_item+"px";this.area.style.left=Math.round(this.cont.offsetWidth/2-this.conf.width/2-this.conf.ofs_item)+"px";for(n in this.cdata){i={};for(r in this.cdata[n].cell.conf.size)i[r]=this.cdata[n].cell.conf.size[r];this.conf.autowidth==!0&&(i.w=this.conf.width,i.x=this[this.conf.anim_f.detect_x](n));this.conf.autoheight==!0&&(i.h=this.conf.height);t[n]=i}if(this.area.style.left=Math.round(this.cont.offsetWidth/2-this.conf.width/2-this.conf.ofs_item)-(this.conf.width+this.conf.ofs_item)*this.conf.selected+"px",this._adjustControls(),this.conf.autoheight!=!0){this.conf.top=Math.max(0,Math.floor(this.area.offsetHeight-this.conf.height)/2);for(n in t)t[n].y=this.conf.top}for(n in t)this.cdata[n].cell._setSize(t[n].x,t[n].y,t[n].w,t[n].h);this.callEvent("_onSetSizes",[])},this._adjustCell=function(n){this.cdata[n].cell._setSize(this[this.conf.anim_f.detect_x](n),this.conf.top,this.conf.width,this.conf.height)},this._animateStart=function(n,t){this.conf.selected<=0&&n<0||this.conf.selected>=this.conf.items_count-1&&n>0||this.conf.animating!=!0&&(this.conf.animating=!0,this[this.conf.anim_f.prepare](n,t))},this._animateTransEnd=function(n){r[r.conf.anim_f.end](n||event,this)},this._animateEnd=function(n){this.conf.selected=this.conf.selected+n;this._checkControls();this._setBarIndex(this.conf.selected);this.callEvent("onSelect",[this.ind[this.conf.selected]]);this.conf.animating=!1},this._initControls(),this.setCellSize=function(n,t){this.conf.item_width=n==null?"auto":n;this.conf.item_height=t==null?"auto":t;this.setSizes()},this.setOffset=function(n,t,i){n!=null&&(this.conf.ofs_left=n);t!=null&&(this.conf.ofs_top=t);i!=null&&(this.conf.ofs_item=i);this.setSizes()},this.enableHotKeys=function(n){this.conf.keys=window.dhx4.s2b(n)},this.goFirst=function(){this.conf.selected!=0&&this._animateStart(-this.conf.selected)},this.goLast=function(){this.conf.selected!=this.conf.items_count-1&&this._animateStart(this.conf.items_count-1-this.conf.selected)},this.goNext=function(){this._animateStart(1)},this.goPrev=function(){this._animateStart(-1)},this.getActiveIndex=function(){return this.conf.selected},this.getActiveId=function(){return this.ind[this.conf.selected]},this.getActiveCell=function(){var n=this.getActiveId();return n!=null?this.cdata[n].cell:null},this.unload=function(){var n;this.conf.unloading=!0;typeof addEventListener=="function"?(window.removeEventListener("keydown",this._doOnWinKeyDown,!1),this._doOnTouchStart!=null&&this.area.removeEventListener(window.dhx4.dnd.evs.start,this._doOnTouchStart,!1)):document.body.detachEvent("onkeydown",this._doOnWinKeyDown);for(n in this.cdata)this._removeCell(n);this.cdata[n]=null;this.area.parentNode.removeChild(this.area);this.area=null;this._unloadControls();this._unloadTop();window.dhx4._eventable(this,"clear");for(n in this)this[n]=null;r=null},window.dhx4._eventable(this),this._callMainEvent=function(n,t){this.callEvent(n,t)},this.conf.ev_coverclick=this.attachEvent("_cellCoverClick",function(n){var t=n-this.conf.selected;Math.abs(t)==1&&this._animateStart(t)}),this._doOnWinKeyDown=function(n){if(n=n||event,r.conf.keys==!0&&n.ctrlKey==!0&&n.shiftKey!=!0&&n.altKey!=!0){var t=n.keyCode,i=r.conf.key_data;(t==i.left||t==i.right)&&(n.preventDefault?n.preventDefault():n.returnValue=!1,r._animateStart(t==i.left?-1:1))}},typeof addEventListener=="function"?window.addEventListener("keydown",this._doOnWinKeyDown,!1):document.body.attachEvent("onkeydown",this._doOnWinKeyDown),n.delete_conf==!0){for(f in n)n[f]=null;n=null}return this}function dhtmlXWindows(n){var i=this,t={},u,e,r,o;if(typeof n!="undefined")for(u in n)t[u]=n[u];if(n=null,this.conf={skin:window.dhx4.skin||(typeof dhtmlx!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxwins")||"material",vp_pos_ofs:20,vp_custom:!1,vp_of_auto:t.vp_overflow=="auto",vp_of_id:window.dhx4.newId(),ofs_w:null,ofs_h:null,button_last:null,dblclick_tm:300,dblclick_last:null,dblclick_id:null,dblclick_mode:"minmax",dblclick_active:!1,dblclick_ev:window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8,fr_cover:navigator.userAgent.indexOf("MSIE 6.0")>=0},e=window.dhx4.transDetect(),this.conf.tr={prop:e.transProp,ev:e.transEv,height_open:"height 0.2s cubic-bezier(0.25,0.1,0.25,1)",height_close:"height 0.18s cubic-bezier(0.25,0.1,0.25,1)",op_open:"opacity 0.16s ease-in",op_close:"opacity 0.2s ease-out",op_v_open:"1",op_v_close:"0.4"},t.viewport?t.viewport.object!=null?this.attachViewportTo(t.viewport.object):t.viewport.left!=null&&t.viewport.top!=null&&t.viewport.width!=null&&t.viewport.height!=null?this.setViewport(t.viewport.left,t.viewport.top,t.viewport.width,t.viewport.height,t.viewport.parent):this.attachViewportTo(document.body):this.attachViewportTo(document.body),this.w={},this.createWindow=function(n,t,i,r,u){var e={},s,o,c,h,v,l,a,y;if(arguments.length==1&&typeof n=="object")e=n;else for(e.id=n,e.left=t,e.top=i,e.width=r,e.height=u,(typeof e.id=="undefined"||e.id==null)&&(e.id=window.dhx4.newId());this.w[e.id]!=null;)e.id=window.dhx4.newId();e.left==null&&(e.left=0);e.top==null&&(e.top=0);e.move=e.move!=null&&window.dhx4.s2b(e.move)==!1?!1:e.deny_move!=null&&window.dhx4.s2b(e.deny_move)==!0?!1:!0;e.park=e.park!=null&&window.dhx4.s2b(e.park)==!1?!1:e.deny_park!=null&&window.dhx4.s2b(e.deny_park)==!0?!1:!0;e.resize=e.resize!=null&&window.dhx4.s2b(e.resize)==!1?!1:e.deny_resize!=null&&window.dhx4.s2b(e.deny_resize)==!0?!1:!0;e.keep_in_viewport=e.keep_in_viewport!=null&&window.dhx4.s2b(e.keep_in_viewport);e.modal=e.modal!=null&&window.dhx4.s2b(e.modal);e.center=e.center!=null&&window.dhx4.s2b(e.center);e.text=e.text!=null?e.text:e.caption!=null?e.caption:"dhtmlxWindow";e.header=!(e.header!=null&&window.dhx4.s2b(e.header)==!1);s=document.createElement("DIV");s.className="dhxwin_active";this.vp.appendChild(s);s._isWindow=!0;s._idd=e.id;o=document.createElement("DIV");o.className="dhxwin_hdr";o.style.zIndex=0;o.innerHTML="<div class='dhxwin_icon'><\/div><div class='dhxwin_text'><div class='dhxwin_text_inside'>"+e.text+"<\/div><\/div><div class='dhxwin_btns'><\/div>";s.appendChild(o);o.onselectstart=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1};o.oncontextmenu=function(n){return n=n||event,n.cancelBubble=!0,!1};o._isWinHdr=!0;o.firstChild._isWinIcon=!0;c=document.createElement("DIV");c.className="dhxwin_brd";s.appendChild(c);h=document.createElement("DIV");h.className="dhxwin_fr_cover";h.innerHTML="<iframe class='dhxwin_fr_cover_inner' frameborder='0' border='0'><\/iframe><div class='dhxwin_fr_cover_inner'><\/div>";s.appendChild(h);this.w[e.id]={win:s,hdr:o,brd:c,fr_cover:h,b:{},conf:{z_id:window.dhx4.newId(),actv:!1,modal:!1,maxed:!1,parked:!1,sticked:!1,visible:!0,header:!0,text:e.text,keep_in_vp:e.keep_in_viewport,allow_move:e.move,allow_park:e.park,allow_resize:e.resize,max_w:null,max_h:null,min_w:80,min_h:80}};v={help:{title:"Help",visible:!1},stick:{title:"Stick",visible:!1},park:{title:"Park",visible:!0},minmax:{title:"Min/Max",visible:!0},close:{title:"Close",visible:!0}};for(l in v)a=new dhtmlXWindowsButton(this,e.id,l,v[l].title,!1),v[l].visible==!1&&a.hide(),o.lastChild.appendChild(a.button),this.w[e.id].b[l]=a,a=null;return this._winAdjustTitle(e.id),this.w[e.id].win.style.zIndex=window.dhx4.zim.reserve(this.w[e.id].conf.z_id),y=new dhtmlXWindowsCell(e.id,this),this.w[e.id].win.insertBefore(y.cell,h),this.w[e.id].cell=y,typeof addEventListener=="function"?(this.w[e.id].win.addEventListener("mousedown",this._winOnMouseDown,!1),this.w[e.id].win.addEventListener("mouseup",this._winOnMouseDown,!1),this.conf.dblclick_ev&&this.w[e.id].win.addEventListener("dblclick",this._winOnMouseDown,!1),this.conf.dnd_enabled==!0&&window.dhx4.dnd.evs.start!=null&&(this.w[e.id].win.addEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,!1),window.dhx4.dnd.p_en!=!0&&(this.w[e.id].win.addEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,!1),this.w[e.id].win.addEventListener(window.dhx4.dnd.evs.end,this._winOnMouseDown,!1)))):(this.w[e.id].win.attachEvent("onmousedown",this._winOnMouseDown),this.w[e.id].win.attachEvent("onmouseup",this._winOnMouseDown),this.conf.dblclick_ev&&this.w[e.id].win.attachEvent("ondblclick",this._winOnMouseDown)),this._winInitFRM(e.id),this._winSetPosition(e.id,e.left,e.top),this._winSetSize(e.id,e.width,e.height),this._winMakeActive(e.id),e.center==!0&&this.w[e.id].cell.center(),e.modal==!0&&this.w[e.id].cell.setModal(!0),e.header==!1&&this.w[e.id].cell.hideHeader(),f=s=o=c=h=y=null,this.w[e.id].cell},this._winOnMouseDown=function(n){n=n||event;var t=n.target||n.srcElement,r={press_type:n.type};if(n.type!="MSPointerDown"&&n.type!="pointerdown"){if(i.conf.ev_skip==!0){i.conf.ev_skip=!1;t=null;return}while(t!=null&&t._isWindow!=!0)typeof t.className!="undefined"&&r.mode==null&&(typeof t._buttonName!="undefined"?(r.mode="button",r.button_name=t._buttonName):t._isWinHdr==!0?r.mode="hdr":t._isWinIcon==!0&&(r.mode="icon")),t=t.parentNode;r.mode==null&&(r.mode="win");r.id=t!=null&&t._isWindow==!0?t._idd:null;t=null;r.id!=null&&i.w[r.id]!=null&&i.callEvent("_winMouseDown",[n,r])}},this._winOnParkTrans=function(n){n.stopPropagation&&n.stopPropagation();var t=i.w[this._idd];n.propertyName=="opacity"&&i._winCellClearOpacity(this._idd);n.propertyName=="height"&&t.conf.tr_mode=="park"&&t.conf.tr_mode=="park"&&(t.win.style[i.conf.tr.prop]="",t.conf.parked?(t.hdr.style.zIndex=3,i._callMainEvent("onParkUp",this._idd)):(i._winAdjustCell(this._idd),i._callMainEvent("onParkDown",this._idd),t.conf.keep_in_vp&&i._winAdjustPosition(this._idd,t.conf.x,t.conf.y)));t=null},this.unload=function(){var n;this.conf.unloading=!0;this._dndInitModule&&this._dndUnloadModule();for(n in this.w)this._winClose(n);this.w=null;this.cm!=null&&typeof this._unloadContextMenu=="function"&&this._unloadContextMenu();window.dhx4._eventable(this,"clear");this.attachViewportTo(null);for(n in this.conf)this.conf[n]=null,delete this.conf[n];for(n in this)this[n]=null;i=n=null},window.dhx4._eventable(this),this.attachEvent("_winMouseDown",this._winMouseDownHandler),this._dndInitModule&&this._dndInitModule(),t.wins!=null)for(r=0;r<t.wins.length;r++)o=t.wins[r],this.createWindow(o);return t=null,this}function dhtmlXWindowsCell(n,t){var r,i;dhtmlXCellObject.apply(this,[n,"_wins"]);this.wins=t;this.cell._winId=n;this.conf.skin=this.wins.conf.skin;this.attachEvent("_onCellUnload",function(){this._unloadResize&&this._unloadResize();window.dhx4._eventable(this.cell,"clear");this.cell._winId=null;this.wins=null;this.setText=null;this.getText=null;this.allowMove=null;this.denyMove=null;this.isMovable=null;this.allowResize=null;this.denyResize=null;this.isResizable=null;this.maximize=null;this.minimize=null;this.isMaximized=null;this.setPosition=null;this.getPosition=null;this.adjustPosition=null;this.park=null;this.isParked=null;this.allowPark=null;this.denyPark=null;this.isParkable=null;this.show=null;this.hide=null;this.isHidden=null;this.stick=null;this.unstick=null;this.isSticked=null;this.setDimension=null;this.getDimension=null;this.setMinDimension=null;this.getMinDimension=null;this.setMaxDimension=null;this.getMaxDimension=null;this.keepInViewport=null;this.center=null;this.centerOnScreen=null;this.bringToTop=null;this.bringToBottom=null;this.isOnTop=null;this.isOnBottom=null;this.showHeader=null;this.hideHeader=null;this.setModal=null;this.isModal=null;this.close=null;this._adjustByCont=null;this.button=null;this.addUserButton=null;this.removeUserButton=null;i=null});this.attachEvent("_onContentLoaded",function(){this.wins._callMainEvent("onContentLoaded",this._idd)});this.attachEvent("_onContentMouseDown",function(n,t){this.wins.callEvent("_winMouseDown",[t,{id:n,mode:"win"}])});this._callMainEvent=function(n,t){return this.callEvent(n,t)};this.conf.tr={};for(r in this.wins.conf.tr)this.conf.tr[r]=this.wins.conf.tr[r];return this.conf.tr.prop!=!1,this._initResize&&this._initResize(),window.dhx4._eventable(this.cell),i=this,this.cell.attachEvent("_setCellSize",function(n,t){var r=i.wins.w[this._winId].conf.w-i.conf.size.w,u=i.wins.w[this._winId].conf.h-i.conf.size.h;i.setDimension(n+r,t+u)}),this}function dataProcessor(n){return this.serverProcessor=n,this.action_param="!nativeeditor_status",this.object=null,this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._tMode="GET",this._headers=null,this._payload=null,this.post_delim="_",this._waitMode=0,this._in_progress={},this._invalid={},this.mandatoryFields=[],this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),dhx4._eventable(this),this.connector_init&&(this.setTransactionMode("POST",!0),this.serverProcessor+=(this.serverProcessor.indexOf("?")!=-1?"&":"?")+"editing=true"),this}function MultiTableScript(n){$("input[type='checkbox'][data-select-all='true']").click(function(t){var i=$(this).is(":checked"),r=$("input[type='checkbox'][data-select-all='false']"),t;r.prop("checked",i);t=document.createEvent("Event");t.initEvent("change",!0,!0);document.getElementsByClassName(n).dispatchEvent(t)});$("a[data-order]").click(function(n){var r;n.preventDefault();var t=$("#order-property"),u=t.val(),i=$(this).attr("data-order");u==i&&(r=$("#order-asc").val(),$("#order-asc").val(r==="true"?"false":"true"));t.val(i);$("#filter-form").submit()})}function showSpinner(){$("#block-spinner").removeClass("d-none")}function hideSpinner(){$("#block-spinner").addClass("d-none")}function apiCall(n,t,i,r){var u={cache:!1,url:n,method:t,dataType:i,data:r};return $.ajax(u)}function navToUrl(){var n=$("#navUrlDocInput").val();n&&window.open(n,"_blank")}function sidebarMenuActiveItem(){var t=window.location.pathname,n="";$(".sidebar-nav ul li").find("a").each(function(){n=$(this);var t=n.parent("li.nav-item.nav-dropdown");t.hasClass("open")&&(t.removeClass("open"),n.hasClass("active")&&n.removeClass("active"))});$(".sidebar-nav ul li").find("a").each(function(){n=$(this);var i=n.parents("li.nav-item.nav-dropdown");n[0].pathname!==t||n.hasClass("nav-dropdown-toggle")||(i.addClass("open"),n.addClass("active"))})}function uploadFileSelect(n,t,i){var u=$(n),f=t?"#thumbnailPreview":"#imagePreview",e=$(f),r;f==="#thumbnailPreview"&&e.attr("src").indexOf("nopic")===-1&&$(".upload--icons").removeClass("d-none");u.on("change",function(){$(".upload--icons").removeClass("d-none");r=window.URL.createObjectURL(this.files[0]);e.attr("src",r)});e.on("click",function(){u.trigger("click")});$("#viewImg").on("click",function(n){n.preventDefault();var t=r===undefined?$("#thumbnailPreview").attr("src"):r;$("#imgInToModal").attr("src",t);$(i).modal()});$("#removeImg").on("click",function(n){n.preventDefault();$(".upload--icons").addClass("d-none");$(f).attr("src","/images/nopic.png");$(u).val("")})}function ExcelForm(n){var t=document.getElementById("excelForm");return t===null&&(t=document.createElement("Form"),t.action=n,t.name="excelForm",t.id="excelForm",t.method="post",t.target="hiddenDownloader",document.body.appendChild(t)),t}function GenerateExcelForm(n,t){var i=ExcelForm(n);i.innerHTML=t;i.submit();i.innerHTML=""}function GenerateExcelObject(n,t){var r=ExcelForm(n),i=document.createElement("input");i.type="hidden";i.id="filterParameterJSON";i.name="filterParameterJSON";i.value=JSON.stringify(t);r.appendChild(i);r.submit();r.innerHTML=""}function GetCultureForDatePicker(n,t){switch(n){case"es":return t===!0?"%d/%m/%Y %H:%i":"%d/%m/%Y";case"ca":return t===!0?"%d/%m/%Y %H:%i":"%d/%m/%Y";default:return t===!0?"%m.%d.%Y %H:%i":"%m.%d.%Y"}}function showLoading(n){n===!0?showSpinner():hideSpinner()}function reziseGrid(n){var u="menu-burger",f="sidebar-minimized",t=$("body").hasClass("sidebar-lg-show"),i=$("body").hasClass(f),r=$(".xhdr").parent().hasClass("w-100");t||i||n!==u||r||($(".xhdr").parent().toggleClass("w-100"),addBootstrapClass());t&&i&&n===f&&(r||($(".xhdr").parent().toggleClass("w-100"),addBootstrapClass()));!t&&i&&n===u&&(r||($(".xhdr").parent().toggleClass("w-100"),addBootstrapClass()));(t&&!i&&n===f||t&&!i&&n===u)&&(r||($(".xhdr").parent().toggleClass("w-100"),addBootstrapClass()))}function addBootstrapClass(){$.ajaxSetup({cache:!1});$(".xhdr").addClass("w-100");$("table.hdr").addClass("w-100");$(".objbox").addClass("w-100");$("table.obj").addClass("w-100")}function loadAjaxView(n,t,i,r,u){var f=t+n;$.get(f).done(function(n){$("#"+i).html("");$("#"+i).html(n);r!==undefined&&r(n)}).fail(function(n,t,i){toastr.options.closeButton="False";toastr.options.newestOnTop="False";toastr.error("Error",i.message,{})});u!==undefined&&showLoading(u)}function renderSimpleModal(n,t,i,r){var u='<div id ="renderSimpleModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="mySimpleModal" aria-hidden="true"><div class="modal-dialog modal-dialog-centered '+n+" "+t+'"><div class="modal-content"> <div class="modal-header">   <h5 class="modal-title" id="simpleModal">'+i+'<\/h5>   <button type="button" class="close" data-dismiss="modal" aria-label="Close">        <span aria-hidden="true">&times;<\/span>   <\/button><\/div ><div class="modal-body"><p>'+r+'<\/p> <\/div>    <div class="modal-footer">        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close<\/button>    <\/div><\/div><\/div><\/div>';$("body").append(u);$("#renderSimpleModal").modal()}function concatenatedArrayValues(n){for(var r,u,i=[],t=0;t<n.length;t++)r=n[t].surname!==null?n[t].secondSurname!==null?n[t].surname+" "+n[t].secondSurname:n[t].surname:n[t].secondSurname!==null?n[t].secondSurname:"",u={id:n[t].id,name:n[t].name+" "+r},i.push(u);return i}var globalActiveDHTMLGridObject,pager;(function(n,t){"use strict";typeof module=="object"&&typeof module.exports=="object"?module.exports=n.document?t(n,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}:t(n)})(typeof window!="undefined"?window:this,function(n,t){"use strict";function hr(n,t,i){t=t||f;var r,u=t.createElement("script");if(u.text=n,i)for(r in ne)i[r]&&(u[r]=i[r]);t.head.appendChild(u).parentNode.removeChild(u)}function it(n){return n==null?n+"":typeof n=="object"||typeof n=="function"?bt[or.call(n)]||"object":typeof n}function hi(n){var t=!!n&&"length"in n&&n.length,i=it(n);return u(n)||tt(n)?!1:i==="array"||t===0||typeof t=="number"&&t>0&&t-1 in n}function v(n,t){return n.nodeName&&n.nodeName.toLowerCase()===t.toLowerCase()}function li(n,t,r){return u(t)?i.grep(n,function(n,i){return!!t.call(n,i,n)!==r}):t.nodeType?i.grep(n,function(n){return n===t!==r}):typeof t!="string"?i.grep(n,function(n){return wt.call(t,n)>-1!==r}):i.filter(t,n,r)}function kr(n,t){while((n=n[t])&&n.nodeType!==1);return n}function ie(n){var t={};return i.each(n.match(l)||[],function(n,i){t[i]=!0}),t}function ut(n){return n}function dt(n){throw n;}function dr(n,t,i,r){var f;try{n&&u(f=n.promise)?f.call(n).done(t).fail(i):n&&u(f=n.then)?f.call(n,t,i):t.apply(undefined,[n].slice(r))}catch(n){i.apply(undefined,[n])}}function ni(){f.removeEventListener("DOMContentLoaded",ni);n.removeEventListener("load",ni);i.ready()}function fe(n,t){return t.toUpperCase()}function y(n){return n.replace(re,"ms-").replace(ue,fe)}function at(){this.expando=i.expando+at.uid++}function se(n){return n==="true"?!0:n==="false"?!1:n==="null"?null:n===+n+""?+n:ee.test(n)?JSON.parse(n):n}function nu(n,t,i){var r;if(i===undefined&&n.nodeType===1)if(r="data-"+t.replace(oe,"-$&").toLowerCase(),i=n.getAttribute(r),typeof i=="string"){try{i=se(i)}catch(u){}o.set(n,t,i)}else i=undefined;return i}function ru(n,t,r,u){var s,h,c=20,l=u?function(){return u.cur()}:function(){return i.css(n,t,"")},o=l(),e=r&&r[3]||(i.cssNumber[t]?"":"px"),f=(i.cssNumber[t]||e!=="px"&&+o)&&vt.exec(i.css(n,t));if(f&&f[3]!==e){for(o=o/2,e=e||f[3],f=+o||1;c--;)i.style(n,t,f+e),(1-h)*(1-(h=l()/o||.5))<=0&&(c=0),f=f/h;f=f*2;i.style(n,t,f+e);r=r||[]}return r&&(f=+f||+o||0,s=r[1]?f+(r[1]+1)*r[2]:+r[2],u&&(u.unit=e,u.start=f,u.end=s)),s}function he(n){var r,f=n.ownerDocument,u=n.nodeName,t=ai[u];return t?t:(r=f.body.appendChild(f.createElement(u)),t=i.css(r,"display"),r.parentNode.removeChild(r),t==="none"&&(t="block"),ai[u]=t,t)}function ft(n,t){for(var e,u,f=[],i=0,o=n.length;i<o;i++)(u=n[i],u.style)&&(e=u.style.display,t?(e==="none"&&(f[i]=r.get(u,"display")||null,f[i]||(u.style.display="")),u.style.display===""&&ti(u)&&(f[i]=he(u))):e!=="none"&&(f[i]="none",r.set(u,"display",e)));for(i=0;i<o;i++)f[i]!=null&&(n[i].style.display=f[i]);return n}function s(n,t){var r;return(r=typeof n.getElementsByTagName!="undefined"?n.getElementsByTagName(t||"*"):typeof n.querySelectorAll!="undefined"?n.querySelectorAll(t||"*"):[],t===undefined||t&&v(n,t))?i.merge([n],r):r}function vi(n,t){for(var i=0,u=n.length;i<u;i++)r.set(n[i],"globalEval",!t||r.get(t[i],"globalEval"))}function su(n,t,r,u,f){for(var e,o,p,a,w,v,h=t.createDocumentFragment(),y=[],l=0,b=n.length;l<b;l++)if(e=n[l],e||e===0)if(it(e)==="object")i.merge(y,e.nodeType?[e]:e);else if(ou.test(e)){for(o=o||h.appendChild(t.createElement("div")),p=(fu.exec(e)||["",""])[1].toLowerCase(),a=c[p]||c._default,o.innerHTML=a[1]+i.htmlPrefilter(e)+a[2],v=a[0];v--;)o=o.lastChild;i.merge(y,o.childNodes);o=h.firstChild;o.textContent=""}else y.push(t.createTextNode(e));for(h.textContent="",l=0;e=y[l++];){if(u&&i.inArray(e,u)>-1){f&&f.push(e);continue}if(w=i.contains(e.ownerDocument,e),o=s(h.appendChild(e),"script"),w&&vi(o),r)for(v=0;e=o[v++];)eu.test(e.type||"")&&r.push(e)}return h}function ri(){return!0}function et(){return!1}function cu(){try{return f.activeElement}catch(n){}}function yi(n,t,r,u,f,e){var o,s;if(typeof t=="object"){typeof r!="string"&&(u=u||r,r=undefined);for(s in t)yi(n,s,r,u,t[s],e);return n}if(u==null&&f==null?(f=r,u=r=undefined):f==null&&(typeof r=="string"?(f=u,u=undefined):(f=u,u=r,r=undefined)),f===!1)f=et;else if(!f)return n;return e===1&&(o=f,f=function(n){return i().off(n),o.apply(this,arguments)},f.guid=o.guid||(o.guid=i.guid++)),n.each(function(){i.event.add(this,t,f,u,r)})}function lu(n,t){return v(n,"table")&&v(t.nodeType!==11?t:t.firstChild,"tr")?i(n).children("tbody")[0]||n:n}function we(n){return n.type=(n.getAttribute("type")!==null)+"/"+n.type,n}function be(n){return(n.type||"").slice(0,5)==="true/"?n.type=n.type.slice(5):n.removeAttribute("type"),n}function au(n,t){var f,c,e,s,h,l,a,u;if(t.nodeType===1){if(r.hasData(n)&&(s=r.access(n),h=r.set(t,s),u=s.events,u)){delete h.handle;h.events={};for(e in u)for(f=0,c=u[e].length;f<c;f++)i.event.add(t,e,u[e][f])}o.hasData(n)&&(l=o.access(n),a=i.extend({},l),o.set(t,a))}}function ke(n,t){var i=t.nodeName.toLowerCase();i==="input"&&uu.test(n.type)?t.checked=n.checked:(i==="input"||i==="textarea")&&(t.defaultValue=n.defaultValue)}function ot(n,t,f,o){t=er.apply([],t);var a,w,l,v,h,b,c=0,y=n.length,d=y-1,p=t[0],k=u(p);if(k||y>1&&typeof p=="string"&&!e.checkClone&&ye.test(p))return n.each(function(i){var r=n.eq(i);k&&(t[0]=p.call(this,i,r.html()));ot(r,t,f,o)});if(y&&(a=su(t,n[0].ownerDocument,!1,n,o),w=a.firstChild,a.childNodes.length===1&&(a=w),w||o)){for(l=i.map(s(a,"script"),we),v=l.length;c<y;c++)h=a,c!==d&&(h=i.clone(h,!0,!0),v&&i.merge(l,s(h,"script"))),f.call(n[c],h,c);if(v)for(b=l[l.length-1].ownerDocument,i.map(l,be),c=0;c<v;c++)h=l[c],eu.test(h.type||"")&&!r.access(h,"globalEval")&&i.contains(b,h)&&(h.src&&(h.type||"").toLowerCase()!=="module"?i._evalUrl&&i._evalUrl(h.src):hr(h.textContent.replace(pe,""),b,h))}return n}function vu(n,t,r){for(var u,e=t?i.filter(t,n):n,f=0;(u=e[f])!=null;f++)r||u.nodeType!==1||i.cleanData(s(u)),u.parentNode&&(r&&i.contains(u.ownerDocument,u)&&vi(s(u,"script")),u.parentNode.removeChild(u));return n}function yt(n,t,r){var o,s,h,u,f=n.style;return r=r||ui(n),r&&(u=r.getPropertyValue(t)||r[t],u!==""||i.contains(n.ownerDocument,n)||(u=i.style(n,t)),!e.pixelBoxStyles()&&pi.test(u)&&de.test(t)&&(o=f.width,s=f.minWidth,h=f.maxWidth,f.minWidth=f.maxWidth=f.width=u,u=r.width,f.width=o,f.minWidth=s,f.maxWidth=h)),u!==undefined?u+"":u}function yu(n,t){return{get:function(){if(n()){delete this.get;return}return(this.get=t).apply(this,arguments)}}}function to(n){if(n in ku)return n;for(var i=n[0].toUpperCase()+n.slice(1),t=bu.length;t--;)if(n=bu[t]+i,n in ku)return n}function du(n){var t=i.cssProps[n];return t||(t=i.cssProps[n]=to(n)||n),t}function gu(n,t,i){var r=vt.exec(t);return r?Math.max(0,r[2]-(i||0))+(r[3]||"px"):t}function wi(n,t,r,u,f,e){var o=t==="width"?1:0,h=0,s=0;if(r===(u?"border":"content"))return 0;for(;o<4;o+=2)r==="margin"&&(s+=i.css(n,r+w[o],!0,f)),u?(r==="content"&&(s-=i.css(n,"padding"+w[o],!0,f)),r!=="margin"&&(s-=i.css(n,"border"+w[o]+"Width",!0,f))):(s+=i.css(n,"padding"+w[o],!0,f),r!=="padding"?s+=i.css(n,"border"+w[o]+"Width",!0,f):h+=i.css(n,"border"+w[o]+"Width",!0,f));return!u&&e>=0&&(s+=Math.max(0,Math.ceil(n["offset"+t[0].toUpperCase()+t.slice(1)]-e-s-h-.5))),s}function nf(n,t,r){var f=ui(n),u=yt(n,t,f),s=i.css(n,"boxSizing",!1,f)==="border-box",o=s;if(pi.test(u)){if(!r)return u;u="auto"}return o=o&&(e.boxSizingReliable()||u===n.style[t]),u!=="auto"&&(parseFloat(u)||i.css(n,"display",!1,f)!=="inline")||(u=n["offset"+t[0].toUpperCase()+t.slice(1)],o=!0),u=parseFloat(u)||0,u+wi(n,t,r||(s?"border":"content"),o,f,u)+"px"}function h(n,t,i,r,u){return new h.prototype.init(n,t,i,r,u)}function bi(){fi&&(f.hidden===!1&&n.requestAnimationFrame?n.requestAnimationFrame(bi):n.setTimeout(bi,i.fx.interval),i.fx.tick())}function uf(){return n.setTimeout(function(){st=undefined}),st=Date.now()}function ei(n,t){var r,u=0,i={height:n};for(t=t?1:0;u<4;u+=2-t)r=w[u],i["margin"+r]=i["padding"+r]=n;return t&&(i.opacity=i.width=n),i}function ff(n,t,i){for(var u,f=(a.tweeners[t]||[]).concat(a.tweeners["*"]),r=0,e=f.length;r<e;r++)if(u=f[r].call(i,t,n))return u}function io(n,t,u){var f,y,w,c,b,s,o,l,k="width"in t||"height"in t,v=this,p={},h=n.style,a=n.nodeType&&ti(n),e=r.get(n,"fxshow");u.queue||(c=i._queueHooks(n,"fx"),c.unqueued==null&&(c.unqueued=0,b=c.empty.fire,c.empty.fire=function(){c.unqueued||b()}),c.unqueued++,v.always(function(){v.always(function(){c.unqueued--;i.queue(n,"fx").length||c.empty.fire()})}));for(f in t)if(y=t[f],tf.test(y)){if(delete t[f],w=w||y==="toggle",y===(a?"hide":"show"))if(y==="show"&&e&&e[f]!==undefined)a=!0;else continue;p[f]=e&&e[f]||i.style(n,f)}if(s=!i.isEmptyObject(t),s||!i.isEmptyObject(p)){k&&n.nodeType===1&&(u.overflow=[h.overflow,h.overflowX,h.overflowY],o=e&&e.display,o==null&&(o=r.get(n,"display")),l=i.css(n,"display"),l==="none"&&(o?l=o:(ft([n],!0),o=n.style.display||o,l=i.css(n,"display"),ft([n]))),(l==="inline"||l==="inline-block"&&o!=null)&&i.css(n,"float")==="none"&&(s||(v.done(function(){h.display=o}),o==null&&(l=h.display,o=l==="none"?"":l)),h.display="inline-block"));u.overflow&&(h.overflow="hidden",v.always(function(){h.overflow=u.overflow[0];h.overflowX=u.overflow[1];h.overflowY=u.overflow[2]}));s=!1;for(f in p)s||(e?"hidden"in e&&(a=e.hidden):e=r.access(n,"fxshow",{display:o}),w&&(e.hidden=!a),a&&ft([n],!0),v.done(function(){a||ft([n]);r.remove(n,"fxshow");for(f in p)i.style(n,f,p[f])})),s=ff(a?e[f]:0,f,v),f in e||(e[f]=s.start,a&&(s.end=s.start,s.start=0))}}function ro(n,t){var r,f,e,u,o;for(r in n)if(f=y(r),e=t[f],u=n[r],Array.isArray(u)&&(e=u[1],u=n[r]=u[0]),r!==f&&(n[f]=u,delete n[r]),o=i.cssHooks[f],o&&"expand"in o){u=o.expand(u);delete n[f];for(r in u)r in n||(n[r]=u[r],t[r]=e)}else t[f]=e}function a(n,t,r){var o,s,h=0,v=a.prefilters.length,e=i.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var o=st||uf(),t=Math.max(0,f.startTime+f.duration-o),h=t/f.duration||0,i=1-h,r=0,u=f.tweens.length;r<u;r++)f.tweens[r].run(i);return(e.notifyWith(n,[f,i,t]),i<1&&u)?t:(u||e.notifyWith(n,[f,1,0]),e.resolveWith(n,[f]),!1)},f=e.promise({elem:n,props:i.extend({},t),opts:i.extend(!0,{specialEasing:{},easing:i.easing._default},r),originalProperties:t,originalOptions:r,startTime:st||uf(),duration:r.duration,tweens:[],createTween:function(t,r){var u=i.Tween(n,f.opts,t,r,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(u),u},stop:function(t){var i=0,r=t?f.tweens.length:0;if(s)return this;for(s=!0;i<r;i++)f.tweens[i].run(1);return t?(e.notifyWith(n,[f,1,0]),e.resolveWith(n,[f,t])):e.rejectWith(n,[f,t]),this}}),c=f.props;for(ro(c,f.opts.specialEasing);h<v;h++)if(o=a.prefilters[h].call(f,n,c,f.opts),o)return u(o.stop)&&(i._queueHooks(f.elem,f.opts.queue).stop=o.stop.bind(o)),o;return i.map(c,ff,f),u(f.opts.start)&&f.opts.start.call(n,f),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always),i.fx.timer(i.extend(l,{elem:n,anim:f,queue:f.opts.queue})),f}function g(n){var t=n.match(l)||[];return t.join(" ")}function nt(n){return n.getAttribute&&n.getAttribute("class")||""}function ki(n){return Array.isArray(n)?n:typeof n=="string"?n.match(l)||[]:[]}function tr(n,t,r,u){var f;if(Array.isArray(t))i.each(t,function(t,i){r||uo.test(n)?u(n,i):tr(n+"["+(typeof i=="object"&&i!=null?t:"")+"]",i,r,u)});else if(r||it(t)!=="object")u(n,t);else for(f in t)tr(n+"["+f+"]",t[f],r,u)}function yf(n){return function(t,i){typeof t!="string"&&(i=t,t="*");var r,f=0,e=t.toLowerCase().match(l)||[];if(u(i))while(r=e[f++])r[0]==="+"?(r=r.slice(1)||"*",(n[r]=n[r]||[]).unshift(i)):(n[r]=n[r]||[]).push(i)}}function pf(n,t,r,u){function e(s){var h;return f[s]=!0,i.each(n[s]||[],function(n,i){var s=i(t,r,u);if(typeof s!="string"||o||f[s]){if(o)return!(h=s)}else return t.dataTypes.unshift(s),e(s),!1}),h}var f={},o=n===ir;return e(t.dataTypes[0])||!f["*"]&&e("*")}function ur(n,t){var r,u,f=i.ajaxSettings.flatOptions||{};for(r in t)t[r]!==undefined&&((f[r]?n:u||(u={}))[r]=t[r]);return u&&i.extend(!0,n,u),n}function vo(n,t,i){for(var e,u,f,o,s=n.contents,r=n.dataTypes;r[0]==="*";)r.shift(),e===undefined&&(e=n.mimeType||t.getResponseHeader("Content-Type"));if(e)for(u in s)if(s[u]&&s[u].test(e)){r.unshift(u);break}if(r[0]in i)f=r[0];else{for(u in i){if(!r[0]||n.converters[u+" "+r[0]]){f=u;break}o||(o=u)}f=f||o}if(f)return f!==r[0]&&r.unshift(f),i[f]}function yo(n,t,i,r){var h,u,f,s,e,o={},c=n.dataTypes.slice();if(c[1])for(f in n.converters)o[f.toLowerCase()]=n.converters[f];for(u=c.shift();u;)if(n.responseFields[u]&&(i[n.responseFields[u]]=t),!e&&r&&n.dataFilter&&(t=n.dataFilter(t,n.dataType)),e=u,u=c.shift(),u)if(u==="*")u=e;else if(e!=="*"&&e!==u){if(f=o[e+" "+u]||o["* "+u],!f)for(h in o)if(s=h.split(" "),s[1]===u&&(f=o[e+" "+s[0]]||o["* "+s[0]],f)){f===!0?f=o[h]:o[h]!==!0&&(u=s[0],c.unshift(s[1]));break}if(f!==!0)if(f&&n.throws)t=f(t);else try{t=f(t)}catch(l){return{state:"parsererror",error:f?l:"No conversion from "+e+" to "+u}}}return{state:"success",data:t}}var k=[],f=n.document,df=Object.getPrototypeOf,d=k.slice,er=k.concat,si=k.push,wt=k.indexOf,bt={},or=bt.toString,kt=bt.hasOwnProperty,sr=kt.toString,gf=sr.call(Object),e={},u=function(n){return typeof n=="function"&&typeof n.nodeType!="number"},tt=function(n){return n!=null&&n===n.window},ne={type:!0,src:!0,noModule:!0},cr="3.3.1",i=function(n,t){return new i.fn.init(n,t)},te=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,b,ci,vr,yr,pr,wr,br,l,gr,gt,lt,ai,ou,st,fi,tf,rf,ef,ht,of,sf,hf,di,gi,wf,ct,fr,oi,bf,kf;i.fn=i.prototype={jquery:cr,constructor:i,length:0,toArray:function(){return d.call(this)},get:function(n){return n==null?d.call(this):n<0?this[n+this.length]:this[n]},pushStack:function(n){var t=i.merge(this.constructor(),n);return t.prevObject=this,t},each:function(n){return i.each(this,n)},map:function(n){return this.pushStack(i.map(this,function(t,i){return n.call(t,i,t)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(n){var i=this.length,t=+n+(n<0?i:0);return this.pushStack(t>=0&&t<i?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:si,sort:k.sort,splice:k.splice};i.extend=i.fn.extend=function(){var o,e,r,t,s,h,n=arguments[0]||{},f=1,l=arguments.length,c=!1;for(typeof n=="boolean"&&(c=n,n=arguments[f]||{},f++),typeof n=="object"||u(n)||(n={}),f===l&&(n=this,f--);f<l;f++)if((o=arguments[f])!=null)for(e in o)(r=n[e],t=o[e],n!==t)&&(c&&t&&(i.isPlainObject(t)||(s=Array.isArray(t)))?(s?(s=!1,h=r&&Array.isArray(r)?r:[]):h=r&&i.isPlainObject(r)?r:{},n[e]=i.extend(c,h,t)):t!==undefined&&(n[e]=t));return n};i.extend({expando:"jQuery"+(cr+Math.random()).replace(/\D/g,""),isReady:!0,error:function(n){throw new Error(n);},noop:function(){},isPlainObject:function(n){var t,i;return!n||or.call(n)!=="[object Object]"?!1:(t=df(n),!t)?!0:(i=kt.call(t,"constructor")&&t.constructor,typeof i=="function"&&sr.call(i)===gf)},isEmptyObject:function(n){for(var t in n)return!1;return!0},globalEval:function(n){hr(n)},each:function(n,t){var r,i=0;if(hi(n)){for(r=n.length;i<r;i++)if(t.call(n[i],i,n[i])===!1)break}else for(i in n)if(t.call(n[i],i,n[i])===!1)break;return n},trim:function(n){return n==null?"":(n+"").replace(te,"")},makeArray:function(n,t){var r=t||[];return n!=null&&(hi(Object(n))?i.merge(r,typeof n=="string"?[n]:n):si.call(r,n)),r},inArray:function(n,t,i){return t==null?-1:wt.call(t,n,i)},merge:function(n,t){for(var u=+t.length,i=0,r=n.length;i<u;i++)n[r++]=t[i];return n.length=r,n},grep:function(n,t,i){for(var u,f=[],r=0,e=n.length,o=!i;r<e;r++)u=!t(n[r],r),u!==o&&f.push(n[r]);return f},map:function(n,t,i){var e,u,r=0,f=[];if(hi(n))for(e=n.length;r<e;r++)u=t(n[r],r,i),u!=null&&f.push(u);else for(r in n)u=t(n[r],r,i),u!=null&&f.push(u);return er.apply([],f)},guid:1,support:e});typeof Symbol=="function"&&(i.fn[Symbol.iterator]=k[Symbol.iterator]);i.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(n,t){bt["[object "+t+"]"]=t.toLowerCase()});b=function(n){function u(n,t,r,u){var s,w,l,a,d,y,g,p=t&&t.ownerDocument,v=t?t.nodeType:9;if(r=r||[],typeof n!="string"||!n||v!==1&&v!==9&&v!==11)return r;if(!u&&((t?t.ownerDocument||t:c)!==i&&b(t),t=t||i,h)){if(v!==11&&(d=cr.exec(n)))if(s=d[1]){if(v===9)if(l=t.getElementById(s)){if(l.id===s)return r.push(l),r}else return r;else if(p&&(l=p.getElementById(s))&&et(t,l)&&l.id===s)return r.push(l),r}else{if(d[2])return k.apply(r,t.getElementsByTagName(n)),r;if((s=d[3])&&e.getElementsByClassName&&t.getElementsByClassName)return k.apply(r,t.getElementsByClassName(s)),r}if(e.qsa&&!lt[n+" "]&&(!o||!o.test(n))){if(v!==1)p=t,g=n;else if(t.nodeName.toLowerCase()!=="object"){for((a=t.getAttribute("id"))?a=a.replace(vi,yi):t.setAttribute("id",a=f),y=ft(n),w=y.length;w--;)y[w]="#"+a+" "+yt(y[w]);g=y.join(",");p=ni.test(n)&&ri(t.parentNode)||t}if(g)try{return k.apply(r,p.querySelectorAll(g)),r}catch(nt){}finally{a===f&&t.removeAttribute("id")}}}return si(n.replace(at,"$1"),t,r,u)}function ti(){function n(r,u){return i.push(r+" ")>t.cacheLength&&delete n[i.shift()],n[r+" "]=u}var i=[];return n}function l(n){return n[f]=!0,n}function a(n){var t=i.createElement("fieldset");try{return!!n(t)}catch(r){return!1}finally{t.parentNode&&t.parentNode.removeChild(t);t=null}}function ii(n,i){for(var r=n.split("|"),u=r.length;u--;)t.attrHandle[r[u]]=i}function wi(n,t){var i=t&&n,r=i&&n.nodeType===1&&t.nodeType===1&&n.sourceIndex-t.sourceIndex;if(r)return r;if(i)while(i=i.nextSibling)if(i===t)return-1;return n?1:-1}function ar(n){return function(t){var i=t.nodeName.toLowerCase();return i==="input"&&t.type===n}}function vr(n){return function(t){var i=t.nodeName.toLowerCase();return(i==="input"||i==="button")&&t.type===n}}function bi(n){return function(t){return"form"in t?t.parentNode&&t.disabled===!1?"label"in t?"label"in t.parentNode?t.parentNode.disabled===n:t.disabled===n:t.isDisabled===n||t.isDisabled!==!n&&lr(t)===n:t.disabled===n:"label"in t?t.disabled===n:!1}}function it(n){return l(function(t){return t=+t,l(function(i,r){for(var u,f=n([],i.length,t),e=f.length;e--;)i[u=f[e]]&&(i[u]=!(r[u]=i[u]))})})}function ri(n){return n&&typeof n.getElementsByTagName!="undefined"&&n}function ki(){}function yt(n){for(var t=0,r=n.length,i="";t<r;t++)i+=n[t].value;return i}function pt(n,t,i){var r=t.dir,u=t.next,e=u||r,o=i&&e==="parentNode",s=di++;return t.first?function(t,i,u){while(t=t[r])if(t.nodeType===1||o)return n(t,i,u);return!1}:function(t,i,h){var c,l,a,y=[v,s];if(h){while(t=t[r])if((t.nodeType===1||o)&&n(t,i,h))return!0}else while(t=t[r])if(t.nodeType===1||o)if(a=t[f]||(t[f]={}),l=a[t.uniqueID]||(a[t.uniqueID]={}),u&&u===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=l[e])&&c[0]===v&&c[1]===s)return y[2]=c[2];if(l[e]=y,y[2]=n(t,i,h))return!0}return!1}}function ui(n){return n.length>1?function(t,i,r){for(var u=n.length;u--;)if(!n[u](t,i,r))return!1;return!0}:n[0]}function yr(n,t,i){for(var r=0,f=t.length;r<f;r++)u(n,t[r],i);return i}function wt(n,t,i,r,u){for(var e,o=[],f=0,s=n.length,h=t!=null;f<s;f++)(e=n[f])&&(!i||i(e,r,u))&&(o.push(e),h&&t.push(f));return o}function fi(n,t,i,r,u,e){return r&&!r[f]&&(r=fi(r)),u&&!u[f]&&(u=fi(u,e)),l(function(f,e,o,s){var l,c,a,p=[],y=[],w=e.length,b=f||yr(t||"*",o.nodeType?[o]:o,[]),v=n&&(f||!t)?wt(b,p,n,o,s):b,h=i?u||(f?n:w||r)?[]:e:v;if(i&&i(v,h,o,s),r)for(l=wt(h,y),r(l,[],o,s),c=l.length;c--;)(a=l[c])&&(h[y[c]]=!(v[y[c]]=a));if(f){if(u||n){if(u){for(l=[],c=h.length;c--;)(a=h[c])&&l.push(v[c]=a);u(null,h=[],l,s)}for(c=h.length;c--;)(a=h[c])&&(l=u?nt(f,a):p[c])>-1&&(f[l]=!(e[l]=a))}}else h=wt(h===e?h.splice(w,h.length):h),u?u(null,e,h,s):k.apply(e,h)})}function ei(n){for(var o,u,r,s=n.length,h=t.relative[n[0].type],c=h||t.relative[" "],i=h?1:0,l=pt(function(n){return n===o},c,!0),a=pt(function(n){return nt(o,n)>-1},c,!0),e=[function(n,t,i){var r=!h&&(i||t!==ht)||((o=t).nodeType?l(n,t,i):a(n,t,i));return o=null,r}];i<s;i++)if(u=t.relative[n[i].type])e=[pt(ui(e),u)];else{if(u=t.filter[n[i].type].apply(null,n[i].matches),u[f]){for(r=++i;r<s;r++)if(t.relative[n[r].type])break;return fi(i>1&&ui(e),i>1&&yt(n.slice(0,i-1).concat({value:n[i-2].type===" "?"*":""})).replace(at,"$1"),u,i<r&&ei(n.slice(i,r)),r<s&&ei(n=n.slice(r)),r<s&&yt(n))}e.push(u)}return ui(e)}function pr(n,r){var f=r.length>0,e=n.length>0,o=function(o,s,c,l,a){var y,nt,d,g=0,p="0",tt=o&&[],w=[],it=ht,rt=o||e&&t.find.TAG("*",a),ut=v+=it==null?1:Math.random()||.1,ft=rt.length;for(a&&(ht=s===i||s||a);p!==ft&&(y=rt[p])!=null;p++){if(e&&y){for(nt=0,s||y.ownerDocument===i||(b(y),c=!h);d=n[nt++];)if(d(y,s||i,c)){l.push(y);break}a&&(v=ut)}f&&((y=!d&&y)&&g--,o&&tt.push(y))}if(g+=p,f&&p!==g){for(nt=0;d=r[nt++];)d(tt,w,s,c);if(o){if(g>0)while(p--)tt[p]||w[p]||(w[p]=nr.call(l));w=wt(w)}k.apply(l,w);a&&!o&&w.length>0&&g+r.length>1&&u.uniqueSort(l)}return a&&(v=ut,ht=it),tt};return f?l(o):o}var rt,e,t,st,oi,ft,bt,si,ht,w,ut,b,i,s,h,o,d,ct,et,f="sizzle"+1*new Date,c=n.document,v=0,di=0,hi=ti(),ci=ti(),lt=ti(),kt=function(n,t){return n===t&&(ut=!0),0},gi={}.hasOwnProperty,g=[],nr=g.pop,tr=g.push,k=g.push,li=g.slice,nt=function(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},dt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",r="[\\x20\\t\\r\\n\\f]",tt="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",ai="\\["+r+"*("+tt+")(?:"+r+"*([*^$|!~]?=)"+r+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+tt+"))|)"+r+"*\\]",gt=":("+tt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ai+")*)|.*)\\)|)",ir=new RegExp(r+"+","g"),at=new RegExp("^"+r+"+|((?:^|[^\\\\])(?:\\\\.)*)"+r+"+$","g"),rr=new RegExp("^"+r+"*,"+r+"*"),ur=new RegExp("^"+r+"*([>+~]|"+r+")"+r+"*"),fr=new RegExp("="+r+"*([^\\]'\"]*?)"+r+"*\\]","g"),er=new RegExp(gt),or=new RegExp("^"+tt+"$"),vt={ID:new RegExp("^#("+tt+")"),CLASS:new RegExp("^\\.("+tt+")"),TAG:new RegExp("^("+tt+"|[*])"),ATTR:new RegExp("^"+ai),PSEUDO:new RegExp("^"+gt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+r+"*(even|odd|(([+-]|)(\\d*)n|)"+r+"*(?:([+-]|)"+r+"*(\\d+)|))"+r+"*\\)|)","i"),bool:new RegExp("^(?:"+dt+")$","i"),needsContext:new RegExp("^"+r+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+r+"*((?:-\\d)?\\d*)"+r+"*\\)|)(?=[^-]|$)","i")},sr=/^(?:input|select|textarea|button)$/i,hr=/^h\d$/i,ot=/^[^{]+\{\s*\[native \w/,cr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ni=/[+~]/,y=new RegExp("\\\\([\\da-f]{1,6}"+r+"?|("+r+")|.)","ig"),p=function(n,t,i){var r="0x"+t-65536;return r!==r||i?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)},vi=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,yi=function(n,t){return t?n==="\0"?"":n.slice(0,-1)+"\\"+n.charCodeAt(n.length-1).toString(16)+" ":"\\"+n},pi=function(){b()},lr=pt(function(n){return n.disabled===!0&&("form"in n||"label"in n)},{dir:"parentNode",next:"legend"});try{k.apply(g=li.call(c.childNodes),c.childNodes);g[c.childNodes.length].nodeType}catch(wr){k={apply:g.length?function(n,t){tr.apply(n,li.call(t))}:function(n,t){for(var i=n.length,r=0;n[i++]=t[r++];);n.length=i-1}}}e=u.support={};oi=u.isXML=function(n){var t=n&&(n.ownerDocument||n).documentElement;return t?t.nodeName!=="HTML":!1};b=u.setDocument=function(n){var v,u,l=n?n.ownerDocument||n:c;return l===i||l.nodeType!==9||!l.documentElement?i:(i=l,s=i.documentElement,h=!oi(i),c!==i&&(u=i.defaultView)&&u.top!==u&&(u.addEventListener?u.addEventListener("unload",pi,!1):u.attachEvent&&u.attachEvent("onunload",pi)),e.attributes=a(function(n){return n.className="i",!n.getAttribute("className")}),e.getElementsByTagName=a(function(n){return n.appendChild(i.createComment("")),!n.getElementsByTagName("*").length}),e.getElementsByClassName=ot.test(i.getElementsByClassName),e.getById=a(function(n){return s.appendChild(n).id=f,!i.getElementsByName||!i.getElementsByName(f).length}),e.getById?(t.filter.ID=function(n){var t=n.replace(y,p);return function(n){return n.getAttribute("id")===t}},t.find.ID=function(n,t){if(typeof t.getElementById!="undefined"&&h){var i=t.getElementById(n);return i?[i]:[]}}):(t.filter.ID=function(n){var t=n.replace(y,p);return function(n){var i=typeof n.getAttributeNode!="undefined"&&n.getAttributeNode("id");return i&&i.value===t}},t.find.ID=function(n,t){if(typeof t.getElementById!="undefined"&&h){var i,u,f,r=t.getElementById(n);if(r){if(i=r.getAttributeNode("id"),i&&i.value===n)return[r];for(f=t.getElementsByName(n),u=0;r=f[u++];)if(i=r.getAttributeNode("id"),i&&i.value===n)return[r]}return[]}}),t.find.TAG=e.getElementsByTagName?function(n,t){return typeof t.getElementsByTagName!="undefined"?t.getElementsByTagName(n):e.qsa?t.querySelectorAll(n):void 0}:function(n,t){var i,r=[],f=0,u=t.getElementsByTagName(n);if(n==="*"){while(i=u[f++])i.nodeType===1&&r.push(i);return r}return u},t.find.CLASS=e.getElementsByClassName&&function(n,t){if(typeof t.getElementsByClassName!="undefined"&&h)return t.getElementsByClassName(n)},d=[],o=[],(e.qsa=ot.test(i.querySelectorAll))&&(a(function(n){s.appendChild(n).innerHTML="<a id='"+f+"'><\/a><select id='"+f+"-\r\\' msallowcapture=''><option selected=''><\/option><\/select>";n.querySelectorAll("[msallowcapture^='']").length&&o.push("[*^$]="+r+"*(?:''|\"\")");n.querySelectorAll("[selected]").length||o.push("\\["+r+"*(?:value|"+dt+")");n.querySelectorAll("[id~="+f+"-]").length||o.push("~=");n.querySelectorAll(":checked").length||o.push(":checked");n.querySelectorAll("a#"+f+"+*").length||o.push(".#.+[+~]")}),a(function(n){n.innerHTML="<a href='' disabled='disabled'><\/a><select disabled='disabled'><option/><\/select>";var t=i.createElement("input");t.setAttribute("type","hidden");n.appendChild(t).setAttribute("name","D");n.querySelectorAll("[name=d]").length&&o.push("name"+r+"*[*^$|!~]?=");n.querySelectorAll(":enabled").length!==2&&o.push(":enabled",":disabled");s.appendChild(n).disabled=!0;n.querySelectorAll(":disabled").length!==2&&o.push(":enabled",":disabled");n.querySelectorAll("*,:x");o.push(",.*:")})),(e.matchesSelector=ot.test(ct=s.matches||s.webkitMatchesSelector||s.mozMatchesSelector||s.oMatchesSelector||s.msMatchesSelector))&&a(function(n){e.disconnectedMatch=ct.call(n,"*");ct.call(n,"[s!='']:x");d.push("!=",gt)}),o=o.length&&new RegExp(o.join("|")),d=d.length&&new RegExp(d.join("|")),v=ot.test(s.compareDocumentPosition),et=v||ot.test(s.contains)?function(n,t){var r=n.nodeType===9?n.documentElement:n,i=t&&t.parentNode;return n===i||!!(i&&i.nodeType===1&&(r.contains?r.contains(i):n.compareDocumentPosition&&n.compareDocumentPosition(i)&16))}:function(n,t){if(t)while(t=t.parentNode)if(t===n)return!0;return!1},kt=v?function(n,t){if(n===t)return ut=!0,0;var r=!n.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(n.ownerDocument||n)===(t.ownerDocument||t)?n.compareDocumentPosition(t):1,r&1||!e.sortDetached&&t.compareDocumentPosition(n)===r)?n===i||n.ownerDocument===c&&et(c,n)?-1:t===i||t.ownerDocument===c&&et(c,t)?1:w?nt(w,n)-nt(w,t):0:r&4?-1:1}:function(n,t){if(n===t)return ut=!0,0;var r,u=0,o=n.parentNode,s=t.parentNode,f=[n],e=[t];if(o&&s){if(o===s)return wi(n,t)}else return n===i?-1:t===i?1:o?-1:s?1:w?nt(w,n)-nt(w,t):0;for(r=n;r=r.parentNode;)f.unshift(r);for(r=t;r=r.parentNode;)e.unshift(r);while(f[u]===e[u])u++;return u?wi(f[u],e[u]):f[u]===c?-1:e[u]===c?1:0},i)};u.matches=function(n,t){return u(n,null,null,t)};u.matchesSelector=function(n,t){if((n.ownerDocument||n)!==i&&b(n),t=t.replace(fr,"='$1']"),e.matchesSelector&&h&&!lt[t+" "]&&(!d||!d.test(t))&&(!o||!o.test(t)))try{var r=ct.call(n,t);if(r||e.disconnectedMatch||n.document&&n.document.nodeType!==11)return r}catch(f){}return u(t,i,null,[n]).length>0};u.contains=function(n,t){return(n.ownerDocument||n)!==i&&b(n),et(n,t)};u.attr=function(n,r){(n.ownerDocument||n)!==i&&b(n);var f=t.attrHandle[r.toLowerCase()],u=f&&gi.call(t.attrHandle,r.toLowerCase())?f(n,r,!h):undefined;return u!==undefined?u:e.attributes||!h?n.getAttribute(r):(u=n.getAttributeNode(r))&&u.specified?u.value:null};u.escape=function(n){return(n+"").replace(vi,yi)};u.error=function(n){throw new Error("Syntax error, unrecognized expression: "+n);};u.uniqueSort=function(n){var r,u=[],t=0,i=0;if(ut=!e.detectDuplicates,w=!e.sortStable&&n.slice(0),n.sort(kt),ut){while(r=n[i++])r===n[i]&&(t=u.push(i));while(t--)n.splice(u[t],1)}return w=null,n};st=u.getText=function(n){var r,i="",u=0,t=n.nodeType;if(t){if(t===1||t===9||t===11){if(typeof n.textContent=="string")return n.textContent;for(n=n.firstChild;n;n=n.nextSibling)i+=st(n)}else if(t===3||t===4)return n.nodeValue}else while(r=n[u++])i+=st(r);return i};t=u.selectors={cacheLength:50,createPseudo:l,match:vt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(n){return n[1]=n[1].replace(y,p),n[3]=(n[3]||n[4]||n[5]||"").replace(y,p),n[2]==="~="&&(n[3]=" "+n[3]+" "),n.slice(0,4)},CHILD:function(n){return n[1]=n[1].toLowerCase(),n[1].slice(0,3)==="nth"?(n[3]||u.error(n[0]),n[4]=+(n[4]?n[5]+(n[6]||1):2*(n[3]==="even"||n[3]==="odd")),n[5]=+(n[7]+n[8]||n[3]==="odd")):n[3]&&u.error(n[0]),n},PSEUDO:function(n){var i,t=!n[6]&&n[2];return vt.CHILD.test(n[0])?null:(n[3]?n[2]=n[4]||n[5]||"":t&&er.test(t)&&(i=ft(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(n[0]=n[0].slice(0,i),n[2]=t.slice(0,i)),n.slice(0,3))}},filter:{TAG:function(n){var t=n.replace(y,p).toLowerCase();return n==="*"?function(){return!0}:function(n){return n.nodeName&&n.nodeName.toLowerCase()===t}},CLASS:function(n){var t=hi[n+" "];return t||(t=new RegExp("(^|"+r+")"+n+"("+r+"|$)"))&&hi(n,function(n){return t.test(typeof n.className=="string"&&n.className||typeof n.getAttribute!="undefined"&&n.getAttribute("class")||"")})},ATTR:function(n,t,i){return function(r){var f=u.attr(r,n);return f==null?t==="!=":t?(f+="",t==="="?f===i:t==="!="?f!==i:t==="^="?i&&f.indexOf(i)===0:t==="*="?i&&f.indexOf(i)>-1:t==="$="?i&&f.slice(-i.length)===i:t==="~="?(" "+f.replace(ir," ")+" ").indexOf(i)>-1:t==="|="?f===i||f.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(n,t,i,r,u){var s=n.slice(0,3)!=="nth",o=n.slice(-4)!=="last",e=t==="of-type";return r===1&&u===0?function(n){return!!n.parentNode}:function(t,i,h){var p,w,y,c,a,b,k=s!==o?"nextSibling":"previousSibling",d=t.parentNode,nt=e&&t.nodeName.toLowerCase(),g=!h&&!e,l=!1;if(d){if(s){while(k){for(c=t;c=c[k];)if(e?c.nodeName.toLowerCase()===nt:c.nodeType===1)return!1;b=k=n==="only"&&!b&&"nextSibling"}return!0}if(b=[o?d.firstChild:d.lastChild],o&&g){for(c=d,y=c[f]||(c[f]={}),w=y[c.uniqueID]||(y[c.uniqueID]={}),p=w[n]||[],a=p[0]===v&&p[1],l=a&&p[2],c=a&&d.childNodes[a];c=++a&&c&&c[k]||(l=a=0)||b.pop();)if(c.nodeType===1&&++l&&c===t){w[n]=[v,a,l];break}}else if(g&&(c=t,y=c[f]||(c[f]={}),w=y[c.uniqueID]||(y[c.uniqueID]={}),p=w[n]||[],a=p[0]===v&&p[1],l=a),l===!1)while(c=++a&&c&&c[k]||(l=a=0)||b.pop())if((e?c.nodeName.toLowerCase()===nt:c.nodeType===1)&&++l&&(g&&(y=c[f]||(c[f]={}),w=y[c.uniqueID]||(y[c.uniqueID]={}),w[n]=[v,l]),c===t))break;return l-=u,l===r||l%r==0&&l/r>=0}}},PSEUDO:function(n,i){var e,r=t.pseudos[n]||t.setFilters[n.toLowerCase()]||u.error("unsupported pseudo: "+n);return r[f]?r(i):r.length>1?(e=[n,n,"",i],t.setFilters.hasOwnProperty(n.toLowerCase())?l(function(n,t){for(var u,f=r(n,i),e=f.length;e--;)u=nt(n,f[e]),n[u]=!(t[u]=f[e])}):function(n){return r(n,0,e)}):r}},pseudos:{not:l(function(n){var t=[],r=[],i=bt(n.replace(at,"$1"));return i[f]?l(function(n,t,r,u){for(var e,o=i(n,null,u,[]),f=n.length;f--;)(e=o[f])&&(n[f]=!(t[f]=e))}):function(n,u,f){return t[0]=n,i(t,null,f,r),t[0]=null,!r.pop()}}),has:l(function(n){return function(t){return u(n,t).length>0}}),contains:l(function(n){return n=n.replace(y,p),function(t){return(t.textContent||t.innerText||st(t)).indexOf(n)>-1}}),lang:l(function(n){return or.test(n||"")||u.error("unsupported lang: "+n),n=n.replace(y,p).toLowerCase(),function(t){var i;do if(i=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return i=i.toLowerCase(),i===n||i.indexOf(n+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var i=n.location&&n.location.hash;return i&&i.slice(1)===t.id},root:function(n){return n===s},focus:function(n){return n===i.activeElement&&(!i.hasFocus||i.hasFocus())&&!!(n.type||n.href||~n.tabIndex)},enabled:bi(!1),disabled:bi(!0),checked:function(n){var t=n.nodeName.toLowerCase();return t==="input"&&!!n.checked||t==="option"&&!!n.selected},selected:function(n){return n.parentNode&&n.parentNode.selectedIndex,n.selected===!0},empty:function(n){for(n=n.firstChild;n;n=n.nextSibling)if(n.nodeType<6)return!1;return!0},parent:function(n){return!t.pseudos.empty(n)},header:function(n){return hr.test(n.nodeName)},input:function(n){return sr.test(n.nodeName)},button:function(n){var t=n.nodeName.toLowerCase();return t==="input"&&n.type==="button"||t==="button"},text:function(n){var t;return n.nodeName.toLowerCase()==="input"&&n.type==="text"&&((t=n.getAttribute("type"))==null||t.toLowerCase()==="text")},first:it(function(){return[0]}),last:it(function(n,t){return[t-1]}),eq:it(function(n,t,i){return[i<0?i+t:i]}),even:it(function(n,t){for(var i=0;i<t;i+=2)n.push(i);return n}),odd:it(function(n,t){for(var i=1;i<t;i+=2)n.push(i);return n}),lt:it(function(n,t,i){for(var r=i<0?i+t:i;--r>=0;)n.push(r);return n}),gt:it(function(n,t,i){for(var r=i<0?i+t:i;++r<t;)n.push(r);return n})}};t.pseudos.nth=t.pseudos.eq;for(rt in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[rt]=ar(rt);for(rt in{submit:!0,reset:!0})t.pseudos[rt]=vr(rt);return ki.prototype=t.filters=t.pseudos,t.setFilters=new ki,ft=u.tokenize=function(n,i){var e,f,s,o,r,h,c,l=ci[n+" "];if(l)return i?0:l.slice(0);for(r=n,h=[],c=t.preFilter;r;){(!e||(f=rr.exec(r)))&&(f&&(r=r.slice(f[0].length)||r),h.push(s=[]));e=!1;(f=ur.exec(r))&&(e=f.shift(),s.push({value:e,type:f[0].replace(at," ")}),r=r.slice(e.length));for(o in t.filter)(f=vt[o].exec(r))&&(!c[o]||(f=c[o](f)))&&(e=f.shift(),s.push({value:e,type:o,matches:f}),r=r.slice(e.length));if(!e)break}return i?r.length:r?u.error(n):ci(n,h).slice(0)},bt=u.compile=function(n,t){var r,u=[],e=[],i=lt[n+" "];if(!i){for(t||(t=ft(n)),r=t.length;r--;)i=ei(t[r]),i[f]?u.push(i):e.push(i);i=lt(n,pr(e,u));i.selector=n}return i},si=u.select=function(n,i,r,u){var o,f,e,l,a,c=typeof n=="function"&&n,s=!u&&ft(n=c.selector||n);if(r=r||[],s.length===1){if(f=s[0]=s[0].slice(0),f.length>2&&(e=f[0]).type==="ID"&&i.nodeType===9&&h&&t.relative[f[1].type]){if(i=(t.find.ID(e.matches[0].replace(y,p),i)||[])[0],i)c&&(i=i.parentNode);else return r;n=n.slice(f.shift().value.length)}for(o=vt.needsContext.test(n)?0:f.length;o--;){if(e=f[o],t.relative[l=e.type])break;if((a=t.find[l])&&(u=a(e.matches[0].replace(y,p),ni.test(f[0].type)&&ri(i.parentNode)||i))){if(f.splice(o,1),n=u.length&&yt(f),!n)return k.apply(r,u),r;break}}}return(c||bt(n,s))(u,i,!h,r,!i||ni.test(n)&&ri(i.parentNode)||i),r},e.sortStable=f.split("").sort(kt).join("")===f,e.detectDuplicates=!!ut,b(),e.sortDetached=a(function(n){return n.compareDocumentPosition(i.createElement("fieldset"))&1}),a(function(n){return n.innerHTML="<a href='#'><\/a>",n.firstChild.getAttribute("href")==="#"})||ii("type|href|height|width",function(n,t,i){if(!i)return n.getAttribute(t,t.toLowerCase()==="type"?1:2)}),e.attributes&&a(function(n){return n.innerHTML="<input/>",n.firstChild.setAttribute("value",""),n.firstChild.getAttribute("value")===""})||ii("value",function(n,t,i){if(!i&&n.nodeName.toLowerCase()==="input")return n.defaultValue}),a(function(n){return n.getAttribute("disabled")==null})||ii(dt,function(n,t,i){var r;if(!i)return n[t]===!0?t.toLowerCase():(r=n.getAttributeNode(t))&&r.specified?r.value:null}),u}(n);i.find=b;i.expr=b.selectors;i.expr[":"]=i.expr.pseudos;i.uniqueSort=i.unique=b.uniqueSort;i.text=b.getText;i.isXMLDoc=b.isXML;i.contains=b.contains;i.escapeSelector=b.escape;var rt=function(n,t,r){for(var u=[],f=r!==undefined;(n=n[t])&&n.nodeType!==9;)if(n.nodeType===1){if(f&&i(n).is(r))break;u.push(n)}return u},lr=function(n,t){for(var i=[];n;n=n.nextSibling)n.nodeType===1&&n!==t&&i.push(n);return i},ar=i.expr.match.needsContext;ci=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;i.filter=function(n,t,r){var u=t[0];return(r&&(n=":not("+n+")"),t.length===1&&u.nodeType===1)?i.find.matchesSelector(u,n)?[u]:[]:i.find.matches(n,i.grep(t,function(n){return n.nodeType===1}))};i.fn.extend({find:function(n){var t,r,u=this.length,f=this;if(typeof n!="string")return this.pushStack(i(n).filter(function(){for(t=0;t<u;t++)if(i.contains(f[t],this))return!0}));for(r=this.pushStack([]),t=0;t<u;t++)i.find(n,f[t],r);return u>1?i.uniqueSort(r):r},filter:function(n){return this.pushStack(li(this,n||[],!1))},not:function(n){return this.pushStack(li(this,n||[],!0))},is:function(n){return!!li(this,typeof n=="string"&&ar.test(n)?i(n):n||[],!1).length}});yr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;pr=i.fn.init=function(n,t,r){var e,o;if(!n)return this;if(r=r||vr,typeof n=="string"){if(e=n[0]==="<"&&n[n.length-1]===">"&&n.length>=3?[null,n,null]:yr.exec(n),e&&(e[1]||!t)){if(e[1]){if(t=t instanceof i?t[0]:t,i.merge(this,i.parseHTML(e[1],t&&t.nodeType?t.ownerDocument||t:f,!0)),ci.test(e[1])&&i.isPlainObject(t))for(e in t)u(this[e])?this[e](t[e]):this.attr(e,t[e]);return this}return o=f.getElementById(e[2]),o&&(this[0]=o,this.length=1),this}return!t||t.jquery?(t||r).find(n):this.constructor(t).find(n)}return n.nodeType?(this[0]=n,this.length=1,this):u(n)?r.ready!==undefined?r.ready(n):n(i):i.makeArray(n,this)};pr.prototype=i.fn;vr=i(f);wr=/^(?:parents|prev(?:Until|All))/;br={children:!0,contents:!0,next:!0,prev:!0};i.fn.extend({has:function(n){var t=i(n,this),r=t.length;return this.filter(function(){for(var n=0;n<r;n++)if(i.contains(this,t[n]))return!0})},closest:function(n,t){var r,f=0,o=this.length,u=[],e=typeof n!="string"&&i(n);if(!ar.test(n))for(;f<o;f++)for(r=this[f];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(e?e.index(r)>-1:r.nodeType===1&&i.find.matchesSelector(r,n))){u.push(r);break}return this.pushStack(u.length>1?i.uniqueSort(u):u)},index:function(n){return n?typeof n=="string"?wt.call(i(n),this[0]):wt.call(this,n.jquery?n[0]:n):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,t){return this.pushStack(i.uniqueSort(i.merge(this.get(),i(n,t))))},addBack:function(n){return this.add(n==null?this.prevObject:this.prevObject.filter(n))}});i.each({parent:function(n){var t=n.parentNode;return t&&t.nodeType!==11?t:null},parents:function(n){return rt(n,"parentNode")},parentsUntil:function(n,t,i){return rt(n,"parentNode",i)},next:function(n){return kr(n,"nextSibling")},prev:function(n){return kr(n,"previousSibling")},nextAll:function(n){return rt(n,"nextSibling")},prevAll:function(n){return rt(n,"previousSibling")},nextUntil:function(n,t,i){return rt(n,"nextSibling",i)},prevUntil:function(n,t,i){return rt(n,"previousSibling",i)},siblings:function(n){return lr((n.parentNode||{}).firstChild,n)},children:function(n){return lr(n.firstChild)},contents:function(n){return v(n,"iframe")?n.contentDocument:(v(n,"template")&&(n=n.content||n),i.merge([],n.childNodes))}},function(n,t){i.fn[n]=function(r,u){var f=i.map(this,t,r);return n.slice(-5)!=="Until"&&(u=r),u&&typeof u=="string"&&(f=i.filter(u,f)),this.length>1&&(br[n]||i.uniqueSort(f),wr.test(n)&&f.reverse()),this.pushStack(f)}});l=/[^\x20\t\r\n\f]+/g;i.Callbacks=function(n){n=typeof n=="string"?ie(n):i.extend({},n);var o,r,c,f,t=[],s=[],e=-1,l=function(){for(f=f||n.once,c=o=!0;s.length;e=-1)for(r=s.shift();++e<t.length;)t[e].apply(r[0],r[1])===!1&&n.stopOnFalse&&(e=t.length,r=!1);n.memory||(r=!1);o=!1;f&&(t=r?[]:"")},h={add:function(){return t&&(r&&!o&&(e=t.length-1,s.push(r)),function f(r){i.each(r,function(i,r){u(r)?n.unique&&h.has(r)||t.push(r):r&&r.length&&it(r)!=="string"&&f(r)})}(arguments),r&&!o&&l()),this},remove:function(){return i.each(arguments,function(n,r){for(var u;(u=i.inArray(r,t,u))>-1;)t.splice(u,1),u<=e&&e--}),this},has:function(n){return n?i.inArray(n,t)>-1:t.length>0},empty:function(){return t&&(t=[]),this},disable:function(){return f=s=[],t=r="",this},disabled:function(){return!t},lock:function(){return f=s=[],r||o||(t=r=""),this},locked:function(){return!!f},fireWith:function(n,t){return f||(t=t||[],t=[n,t.slice?t.slice():t],s.push(t),o||l()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!c}};return h};i.extend({Deferred:function(t){var f=[["notify","progress",i.Callbacks("memory"),i.Callbacks("memory"),2],["resolve","done",i.Callbacks("once memory"),i.Callbacks("once memory"),0,"resolved"],["reject","fail",i.Callbacks("once memory"),i.Callbacks("once memory"),1,"rejected"]],o="pending",e={state:function(){return o},always:function(){return r.done(arguments).fail(arguments),this},"catch":function(n){return e.then(null,n)},pipe:function(){var n=arguments;return i.Deferred(function(t){i.each(f,function(i,f){var e=u(n[f[4]])&&n[f[4]];r[f[1]](function(){var n=e&&e.apply(this,arguments);n&&u(n.promise)?n.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[f[0]+"With"](this,e?[n]:arguments)})});n=null}).promise()},then:function(t,r,e){function s(t,r,f,e){return function(){var h=this,c=arguments,a=function(){var n,i;if(!(t<o)){if(n=f.apply(h,c),n===r.promise())throw new TypeError("Thenable self-resolution");i=n&&(typeof n=="object"||typeof n=="function")&&n.then;u(i)?e?i.call(n,s(o,r,ut,e),s(o,r,dt,e)):(o++,i.call(n,s(o,r,ut,e),s(o,r,dt,e),s(o,r,ut,r.notifyWith))):(f!==ut&&(h=undefined,c=[n]),(e||r.resolveWith)(h,c))}},l=e?a:function(){try{a()}catch(n){i.Deferred.exceptionHook&&i.Deferred.exceptionHook(n,l.stackTrace);t+1>=o&&(f!==dt&&(h=undefined,c=[n]),r.rejectWith(h,c))}};t?l():(i.Deferred.getStackHook&&(l.stackTrace=i.Deferred.getStackHook()),n.setTimeout(l))}}var o=0;return i.Deferred(function(n){f[0][3].add(s(0,n,u(e)?e:ut,n.notifyWith));f[1][3].add(s(0,n,u(t)?t:ut));f[2][3].add(s(0,n,u(r)?r:dt))}).promise()},promise:function(n){return n!=null?i.extend(n,e):e}},r={};return i.each(f,function(n,t){var i=t[2],u=t[5];e[t[1]]=i.add;u&&i.add(function(){o=u},f[3-n][2].disable,f[3-n][3].disable,f[0][2].lock,f[0][3].lock);i.add(t[3].fire);r[t[0]]=function(){return r[t[0]+"With"](this===r?undefined:this,arguments),this};r[t[0]+"With"]=i.fireWith}),e.promise(r),t&&t.call(r,r),r},when:function(n){var e=arguments.length,t=e,o=Array(t),f=d.call(arguments),r=i.Deferred(),s=function(n){return function(t){o[n]=this;f[n]=arguments.length>1?d.call(arguments):t;--e||r.resolveWith(o,f)}};if(e<=1&&(dr(n,r.done(s(t)).resolve,r.reject,!e),r.state()==="pending"||u(f[t]&&f[t].then)))return r.then();while(t--)dr(f[t],s(t),r.reject);return r.promise()}});gr=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;i.Deferred.exceptionHook=function(t,i){n.console&&n.console.warn&&t&&gr.test(t.name)&&n.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)};i.readyException=function(t){n.setTimeout(function(){throw t;})};gt=i.Deferred();i.fn.ready=function(n){return gt.then(n).catch(function(n){i.readyException(n)}),this};i.extend({isReady:!1,readyWait:1,ready:function(n){(n===!0?--i.readyWait:i.isReady)||(i.isReady=!0,n!==!0&&--i.readyWait>0)||gt.resolveWith(f,[i])}});i.ready.then=gt.then;f.readyState!=="complete"&&(f.readyState==="loading"||f.documentElement.doScroll)?(f.addEventListener("DOMContentLoaded",ni),n.addEventListener("load",ni)):n.setTimeout(i.ready);var p=function(n,t,r,f,e,o,s){var h=0,l=n.length,c=r==null;if(it(r)==="object"){e=!0;for(h in r)p(n,t,h,r[h],!0,o,s)}else if(f!==undefined&&(e=!0,u(f)||(s=!0),c&&(s?(t.call(n,f),t=null):(c=t,t=function(n,t,r){return c.call(i(n),r)})),t))for(;h<l;h++)t(n[h],r,s?f:f.call(n[h],h,t(n[h],r)));return e?n:c?t.call(n):l?t(n[0],r):o},re=/^-ms-/,ue=/-([a-z])/g;lt=function(n){return n.nodeType===1||n.nodeType===9||!+n.nodeType};at.uid=1;at.prototype={cache:function(n){var t=n[this.expando];return t||(t={},lt(n)&&(n.nodeType?n[this.expando]=t:Object.defineProperty(n,this.expando,{value:t,configurable:!0}))),t},set:function(n,t,i){var r,u=this.cache(n);if(typeof t=="string")u[y(t)]=i;else for(r in t)u[y(r)]=t[r];return u},get:function(n,t){return t===undefined?this.cache(n):n[this.expando]&&n[this.expando][y(t)]},access:function(n,t,i){return t===undefined||t&&typeof t=="string"&&i===undefined?this.get(n,t):(this.set(n,t,i),i!==undefined?i:t)},remove:function(n,t){var u,r=n[this.expando];if(r!==undefined){if(t!==undefined)for(Array.isArray(t)?t=t.map(y):(t=y(t),t=t in r?[t]:t.match(l)||[]),u=t.length;u--;)delete r[t[u]];(t===undefined||i.isEmptyObject(r))&&(n.nodeType?n[this.expando]=undefined:delete n[this.expando])}},hasData:function(n){var t=n[this.expando];return t!==undefined&&!i.isEmptyObject(t)}};var r=new at,o=new at,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,oe=/[A-Z]/g;i.extend({hasData:function(n){return o.hasData(n)||r.hasData(n)},data:function(n,t,i){return o.access(n,t,i)},removeData:function(n,t){o.remove(n,t)},_data:function(n,t,i){return r.access(n,t,i)},_removeData:function(n,t){r.remove(n,t)}});i.fn.extend({data:function(n,t){var f,u,e,i=this[0],s=i&&i.attributes;if(n===undefined){if(this.length&&(e=o.get(i),i.nodeType===1&&!r.get(i,"hasDataAttrs"))){for(f=s.length;f--;)s[f]&&(u=s[f].name,u.indexOf("data-")===0&&(u=y(u.slice(5)),nu(i,u,e[u])));r.set(i,"hasDataAttrs",!0)}return e}return typeof n=="object"?this.each(function(){o.set(this,n)}):p(this,function(t){var r;if(i&&t===undefined)return(r=o.get(i,n),r!==undefined)?r:(r=nu(i,n),r!==undefined)?r:void 0;this.each(function(){o.set(this,n,t)})},null,t,arguments.length>1,null,!0)},removeData:function(n){return this.each(function(){o.remove(this,n)})}});i.extend({queue:function(n,t,u){var f;if(n)return t=(t||"fx")+"queue",f=r.get(n,t),u&&(!f||Array.isArray(u)?f=r.access(n,t,i.makeArray(u)):f.push(u)),f||[]},dequeue:function(n,t){t=t||"fx";var r=i.queue(n,t),e=r.length,u=r.shift(),f=i._queueHooks(n,t),o=function(){i.dequeue(n,t)};u==="inprogress"&&(u=r.shift(),e--);u&&(t==="fx"&&r.unshift("inprogress"),delete f.stop,u.call(n,o,f));!e&&f&&f.empty.fire()},_queueHooks:function(n,t){var u=t+"queueHooks";return r.get(n,u)||r.access(n,u,{empty:i.Callbacks("once memory").add(function(){r.remove(n,[t+"queue",u])})})}});i.fn.extend({queue:function(n,t){var r=2;return(typeof n!="string"&&(t=n,n="fx",r--),arguments.length<r)?i.queue(this[0],n):t===undefined?this:this.each(function(){var r=i.queue(this,n,t);i._queueHooks(this,n);n==="fx"&&r[0]!=="inprogress"&&i.dequeue(this,n)})},dequeue:function(n){return this.each(function(){i.dequeue(this,n)})},clearQueue:function(n){return this.queue(n||"fx",[])},promise:function(n,t){var u,e=1,o=i.Deferred(),f=this,s=this.length,h=function(){--e||o.resolveWith(f,[f])};for(typeof n!="string"&&(t=n,n=undefined),n=n||"fx";s--;)u=r.get(f[s],n+"queueHooks"),u&&u.empty&&(e++,u.empty.add(h));return h(),o.promise(t)}});var tu=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,vt=new RegExp("^(?:([+-])=|)("+tu+")([a-z%]*)$","i"),w=["Top","Right","Bottom","Left"],ti=function(n,t){return n=t||n,n.style.display==="none"||n.style.display===""&&i.contains(n.ownerDocument,n)&&i.css(n,"display")==="none"},iu=function(n,t,i,r){var f,u,e={};for(u in t)e[u]=n.style[u],n.style[u]=t[u];f=i.apply(n,r||[]);for(u in t)n.style[u]=e[u];return f};ai={};i.fn.extend({show:function(){return ft(this,!0)},hide:function(){return ft(this)},toggle:function(n){return typeof n=="boolean"?n?this.show():this.hide():this.each(function(){ti(this)?i(this).show():i(this).hide()})}});var uu=/^(?:checkbox|radio)$/i,fu=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,eu=/^$|^module$|\/(?:java|ecma)script/i,c={option:[1,"<select multiple='multiple'>","<\/select>"],thead:[1,"<table>","<\/table>"],col:[2,"<table><colgroup>","<\/colgroup><\/table>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],td:[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"],_default:[0,"",""]};c.optgroup=c.option;c.tbody=c.tfoot=c.colgroup=c.caption=c.thead;c.th=c.td;ou=/<|&#?\w+;/,function(){var i=f.createDocumentFragment(),n=i.appendChild(f.createElement("div")),t=f.createElement("input");t.setAttribute("type","radio");t.setAttribute("checked","checked");t.setAttribute("name","t");n.appendChild(t);e.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked;n.innerHTML="<textarea>x<\/textarea>";e.noCloneChecked=!!n.cloneNode(!0).lastChild.defaultValue}();var ii=f.documentElement,ce=/^key/,le=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,hu=/^([^.]*)(?:\.(.+)|)/;i.event={global:{},add:function(n,t,u,f,e){var v,y,w,p,b,h,s,c,o,k,d,a=r.get(n);if(a)for(u.handler&&(v=u,u=v.handler,e=v.selector),e&&i.find.matchesSelector(ii,e),u.guid||(u.guid=i.guid++),(p=a.events)||(p=a.events={}),(y=a.handle)||(y=a.handle=function(t){return typeof i!="undefined"&&i.event.triggered!==t.type?i.event.dispatch.apply(n,arguments):undefined}),t=(t||"").match(l)||[""],b=t.length;b--;)(w=hu.exec(t[b])||[],o=d=w[1],k=(w[2]||"").split(".").sort(),o)&&(s=i.event.special[o]||{},o=(e?s.delegateType:s.bindType)||o,s=i.event.special[o]||{},h=i.extend({type:o,origType:d,data:f,handler:u,guid:u.guid,selector:e,needsContext:e&&i.expr.match.needsContext.test(e),namespace:k.join(".")},v),(c=p[o])||(c=p[o]=[],c.delegateCount=0,s.setup&&s.setup.call(n,f,k,y)!==!1||n.addEventListener&&n.addEventListener(o,y)),s.add&&(s.add.call(n,h),h.handler.guid||(h.handler.guid=u.guid)),e?c.splice(c.delegateCount++,0,h):c.push(h),i.event.global[o]=!0)},remove:function(n,t,u,f,e){var y,k,h,v,p,s,c,a,o,b,d,w=r.hasData(n)&&r.get(n);if(w&&(v=w.events)){for(t=(t||"").match(l)||[""],p=t.length;p--;){if(h=hu.exec(t[p])||[],o=d=h[1],b=(h[2]||"").split(".").sort(),!o){for(o in v)i.event.remove(n,o+t[p],u,f,!0);continue}for(c=i.event.special[o]||{},o=(f?c.delegateType:c.bindType)||o,a=v[o]||[],h=h[2]&&new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"),k=y=a.length;y--;)s=a[y],(e||d===s.origType)&&(!u||u.guid===s.guid)&&(!h||h.test(s.namespace))&&(!f||f===s.selector||f==="**"&&s.selector)&&(a.splice(y,1),s.selector&&a.delegateCount--,c.remove&&c.remove.call(n,s));k&&!a.length&&(c.teardown&&c.teardown.call(n,b,w.handle)!==!1||i.removeEvent(n,o,w.handle),delete v[o])}i.isEmptyObject(v)&&r.remove(n,"handle events")}},dispatch:function(n){var t=i.event.fix(n),u,c,s,e,f,l,h=new Array(arguments.length),a=(r.get(this,"events")||{})[t.type]||[],o=i.event.special[t.type]||{};for(h[0]=t,u=1;u<arguments.length;u++)h[u]=arguments[u];if(t.delegateTarget=this,!o.preDispatch||o.preDispatch.call(this,t)!==!1){for(l=i.event.handlers.call(this,t,a),u=0;(e=l[u++])&&!t.isPropagationStopped();)for(t.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!t.isImmediatePropagationStopped();)(!t.rnamespace||t.rnamespace.test(f.namespace))&&(t.handleObj=f,t.data=f.data,s=((i.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h),s!==undefined&&(t.result=s)===!1&&(t.preventDefault(),t.stopPropagation()));return o.postDispatch&&o.postDispatch.call(this,t),t.result}},handlers:function(n,t){var f,e,u,o,s,c=[],h=t.delegateCount,r=n.target;if(h&&r.nodeType&&!(n.type==="click"&&n.button>=1))for(;r!==this;r=r.parentNode||this)if(r.nodeType===1&&!(n.type==="click"&&r.disabled===!0)){for(o=[],s={},f=0;f<h;f++)e=t[f],u=e.selector+" ",s[u]===undefined&&(s[u]=e.needsContext?i(u,this).index(r)>-1:i.find(u,this,null,[r]).length),s[u]&&o.push(e);o.length&&c.push({elem:r,handlers:o})}return r=this,h<t.length&&c.push({elem:r,handlers:t.slice(h)}),c},addProp:function(n,t){Object.defineProperty(i.Event.prototype,n,{enumerable:!0,configurable:!0,get:u(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[n]},set:function(t){Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(n){return n[i.expando]?n:new i.Event(n)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==cu()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===cu()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&v(this,"input"))return this.click(),!1},_default:function(n){return v(n.target,"a")}},beforeunload:{postDispatch:function(n){n.result!==undefined&&n.originalEvent&&(n.originalEvent.returnValue=n.result)}}}};i.removeEvent=function(n,t,i){n.removeEventListener&&n.removeEventListener(t,i)};i.Event=function(n,t){if(!(this instanceof i.Event))return new i.Event(n,t);n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||n.defaultPrevented===undefined&&n.returnValue===!1?ri:et,this.target=n.target&&n.target.nodeType===3?n.target.parentNode:n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget):this.type=n;t&&i.extend(this,t);this.timeStamp=n&&n.timeStamp||Date.now();this[i.expando]=!0};i.Event.prototype={constructor:i.Event,isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et,isSimulated:!1,preventDefault:function(){var n=this.originalEvent;this.isDefaultPrevented=ri;n&&!this.isSimulated&&n.preventDefault()},stopPropagation:function(){var n=this.originalEvent;this.isPropagationStopped=ri;n&&!this.isSimulated&&n.stopPropagation()},stopImmediatePropagation:function(){var n=this.originalEvent;this.isImmediatePropagationStopped=ri;n&&!this.isSimulated&&n.stopImmediatePropagation();this.stopPropagation()}};i.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(n){var t=n.button;return n.which==null&&ce.test(n.type)?n.charCode!=null?n.charCode:n.keyCode:!n.which&&t!==undefined&&le.test(n.type)?t&1?1:t&2?3:t&4?2:0:n.which}},i.event.addProp);i.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(n,t){i.event.special[n]={delegateType:t,bindType:t,handle:function(n){var u,f=this,r=n.relatedTarget,e=n.handleObj;return r&&(r===f||i.contains(f,r))||(n.type=e.origType,u=e.handler.apply(this,arguments),n.type=t),u}}});i.fn.extend({on:function(n,t,i,r){return yi(this,n,t,i,r)},one:function(n,t,i,r){return yi(this,n,t,i,r,1)},off:function(n,t,r){var u,f;if(n&&n.preventDefault&&n.handleObj)return u=n.handleObj,i(n.delegateTarget).off(u.namespace?u.origType+"."+u.namespace:u.origType,u.selector,u.handler),this;if(typeof n=="object"){for(f in n)this.off(f,t,n[f]);return this}return(t===!1||typeof t=="function")&&(r=t,t=undefined),r===!1&&(r=et),this.each(function(){i.event.remove(this,n,r,t)})}});var ae=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ve=/<script|<style|<link/i,ye=/checked\s*(?:[^=]|=\s*.checked.)/i,pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;i.extend({htmlPrefilter:function(n){return n.replace(ae,"<$1><\/$2>")},clone:function(n,t,r){var u,c,o,f,h=n.cloneNode(!0),l=i.contains(n.ownerDocument,n);if(!e.noCloneChecked&&(n.nodeType===1||n.nodeType===11)&&!i.isXMLDoc(n))for(f=s(h),o=s(n),u=0,c=o.length;u<c;u++)ke(o[u],f[u]);if(t)if(r)for(o=o||s(n),f=f||s(h),u=0,c=o.length;u<c;u++)au(o[u],f[u]);else au(n,h);return f=s(h,"script"),f.length>0&&vi(f,!l&&s(n,"script")),h},cleanData:function(n){for(var u,t,f,s=i.event.special,e=0;(t=n[e])!==undefined;e++)if(lt(t)){if(u=t[r.expando]){if(u.events)for(f in u.events)s[f]?i.event.remove(t,f):i.removeEvent(t,f,u.handle);t[r.expando]=undefined}t[o.expando]&&(t[o.expando]=undefined)}}});i.fn.extend({detach:function(n){return vu(this,n,!0)},remove:function(n){return vu(this,n)},text:function(n){return p(this,function(n){return n===undefined?i.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=n)})},null,n,arguments.length)},append:function(){return ot(this,arguments,function(n){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=lu(this,n);t.appendChild(n)}})},prepend:function(){return ot(this,arguments,function(n){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=lu(this,n);t.insertBefore(n,t.firstChild)}})},before:function(){return ot(this,arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this)})},after:function(){return ot(this,arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling)})},empty:function(){for(var n,t=0;(n=this[t])!=null;t++)n.nodeType===1&&(i.cleanData(s(n,!1)),n.textContent="");return this},clone:function(n,t){return n=n==null?!1:n,t=t==null?n:t,this.map(function(){return i.clone(this,n,t)})},html:function(n){return p(this,function(n){var t=this[0]||{},r=0,u=this.length;if(n===undefined&&t.nodeType===1)return t.innerHTML;if(typeof n=="string"&&!ve.test(n)&&!c[(fu.exec(n)||["",""])[1].toLowerCase()]){n=i.htmlPrefilter(n);try{for(;r<u;r++)t=this[r]||{},t.nodeType===1&&(i.cleanData(s(t,!1)),t.innerHTML=n);t=0}catch(f){}}t&&this.empty().append(n)},null,n,arguments.length)},replaceWith:function(){var n=[];return ot(this,arguments,function(t){var r=this.parentNode;i.inArray(this,n)<0&&(i.cleanData(s(this)),r&&r.replaceChild(t,this))},n)}});i.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,t){i.fn[n]=function(n){for(var u,f=[],e=i(n),o=e.length-1,r=0;r<=o;r++)u=r===o?this:this.clone(!0),i(e[r])[t](u),si.apply(f,u.get());return this.pushStack(f)}});var pi=new RegExp("^("+tu+")(?!px)[a-z%]+$","i"),ui=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=n),i.getComputedStyle(t)},de=new RegExp(w.join("|"),"i");(function(){function r(){if(t){o.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0";t.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%";ii.appendChild(o).appendChild(t);var i=n.getComputedStyle(t);s=i.top!=="1%";a=u(i.marginLeft)===12;t.style.right="60%";l=u(i.right)===36;h=u(i.width)===36;t.style.position="absolute";c=t.offsetWidth===36||"absolute";ii.removeChild(o);t=null}}function u(n){return Math.round(parseFloat(n))}var s,h,c,l,a,o=f.createElement("div"),t=f.createElement("div");t.style&&(t.style.backgroundClip="content-box",t.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle=t.style.backgroundClip==="content-box",i.extend(e,{boxSizingReliable:function(){return r(),h},pixelBoxStyles:function(){return r(),l},pixelPosition:function(){return r(),s},reliableMarginLeft:function(){return r(),a},scrollboxSize:function(){return r(),c}}))})();var ge=/^(none|table(?!-c[ea]).+)/,pu=/^--/,no={position:"absolute",visibility:"hidden",display:"block"},wu={letterSpacing:"0",fontWeight:"400"},bu=["Webkit","Moz","ms"],ku=f.createElement("div").style;i.extend({cssHooks:{opacity:{get:function(n,t){if(t){var i=yt(n,"opacity");return i===""?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(n,t,r,u){if(n&&n.nodeType!==3&&n.nodeType!==8&&n.style){var f,s,o,c=y(t),l=pu.test(t),h=n.style;if(l||(t=du(c)),o=i.cssHooks[t]||i.cssHooks[c],r!==undefined){if(s=typeof r,s==="string"&&(f=vt.exec(r))&&f[1]&&(r=ru(n,t,f),s="number"),r==null||r!==r)return;s==="number"&&(r+=f&&f[3]||(i.cssNumber[c]?"":"px"));e.clearCloneStyle||r!==""||t.indexOf("background")!==0||(h[t]="inherit");o&&"set"in o&&(r=o.set(n,r,u))===undefined||(l?h.setProperty(t,r):h[t]=r)}else return o&&"get"in o&&(f=o.get(n,!1,u))!==undefined?f:h[t]}},css:function(n,t,r,u){var f,o,e,s=y(t),h=pu.test(t);return(h||(t=du(s)),e=i.cssHooks[t]||i.cssHooks[s],e&&"get"in e&&(f=e.get(n,!0,r)),f===undefined&&(f=yt(n,t,u)),f==="normal"&&t in wu&&(f=wu[t]),r===""||r)?(o=parseFloat(f),r===!0||isFinite(o)?o||0:f):f}});i.each(["height","width"],function(n,t){i.cssHooks[t]={get:function(n,r,u){if(r)return ge.test(i.css(n,"display"))&&(!n.getClientRects().length||!n.getBoundingClientRect().width)?iu(n,no,function(){return nf(n,t,u)}):nf(n,t,u)},set:function(n,r,u){var s,f=ui(n),h=i.css(n,"boxSizing",!1,f)==="border-box",o=u&&wi(n,t,u,h,f);return h&&e.scrollboxSize()===f.position&&(o-=Math.ceil(n["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(f[t])-wi(n,t,"border",!1,f)-.5)),o&&(s=vt.exec(r))&&(s[3]||"px")!=="px"&&(n.style[t]=r,r=i.css(n,t)),gu(n,r,o)}}});i.cssHooks.marginLeft=yu(e.reliableMarginLeft,function(n,t){if(t)return(parseFloat(yt(n,"marginLeft"))||n.getBoundingClientRect().left-iu(n,{marginLeft:0},function(){return n.getBoundingClientRect().left}))+"px"});i.each({margin:"",padding:"",border:"Width"},function(n,t){i.cssHooks[n+t]={expand:function(i){for(var r=0,f={},u=typeof i=="string"?i.split(" "):[i];r<4;r++)f[n+w[r]+t]=u[r]||u[r-2]||u[0];return f}};n!=="margin"&&(i.cssHooks[n+t].set=gu)});i.fn.extend({css:function(n,t){return p(this,function(n,t,r){var f,e,o={},u=0;if(Array.isArray(t)){for(f=ui(n),e=t.length;u<e;u++)o[t[u]]=i.css(n,t[u],!1,f);return o}return r!==undefined?i.style(n,t,r):i.css(n,t)},n,t,arguments.length>1)}});i.Tween=h;h.prototype={constructor:h,init:function(n,t,r,u,f,e){this.elem=n;this.prop=r;this.easing=f||i.easing._default;this.options=t;this.start=this.now=this.cur();this.end=u;this.unit=e||(i.cssNumber[r]?"":"px")},cur:function(){var n=h.propHooks[this.prop];return n&&n.get?n.get(this):h.propHooks._default.get(this)},run:function(n){var t,r=h.propHooks[this.prop];return this.pos=this.options.duration?t=i.easing[this.easing](n,this.options.duration*n,0,1,this.options.duration):t=n,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):h.propHooks._default.set(this),this}};h.prototype.init.prototype=h.prototype;h.propHooks={_default:{get:function(n){var t;return n.elem.nodeType!==1||n.elem[n.prop]!=null&&n.elem.style[n.prop]==null?n.elem[n.prop]:(t=i.css(n.elem,n.prop,""),!t||t==="auto"?0:t)},set:function(n){i.fx.step[n.prop]?i.fx.step[n.prop](n):n.elem.nodeType===1&&(n.elem.style[i.cssProps[n.prop]]!=null||i.cssHooks[n.prop])?i.style(n.elem,n.prop,n.now+n.unit):n.elem[n.prop]=n.now}}};h.propHooks.scrollTop=h.propHooks.scrollLeft={set:function(n){n.elem.nodeType&&n.elem.parentNode&&(n.elem[n.prop]=n.now)}};i.easing={linear:function(n){return n},swing:function(n){return.5-Math.cos(n*Math.PI)/2},_default:"swing"};i.fx=h.prototype.init;i.fx.step={};tf=/^(?:toggle|show|hide)$/;rf=/queueHooks$/;i.Animation=i.extend(a,{tweeners:{"*":[function(n,t){var i=this.createTween(n,t);return ru(i.elem,n,vt.exec(t),i),i}]},tweener:function(n,t){u(n)?(t=n,n=["*"]):n=n.match(l);for(var i,r=0,f=n.length;r<f;r++)i=n[r],a.tweeners[i]=a.tweeners[i]||[],a.tweeners[i].unshift(t)},prefilters:[io],prefilter:function(n,t){t?a.prefilters.unshift(n):a.prefilters.push(n)}});i.speed=function(n,t,r){var f=n&&typeof n=="object"?i.extend({},n):{complete:r||!r&&t||u(n)&&n,duration:n,easing:r&&t||t&&!u(t)&&t};return i.fx.off?f.duration=0:typeof f.duration!="number"&&(f.duration=f.duration in i.fx.speeds?i.fx.speeds[f.duration]:i.fx.speeds._default),(f.queue==null||f.queue===!0)&&(f.queue="fx"),f.old=f.complete,f.complete=function(){u(f.old)&&f.old.call(this);f.queue&&i.dequeue(this,f.queue)},f};i.fn.extend({fadeTo:function(n,t,i,r){return this.filter(ti).css("opacity",0).show().end().animate({opacity:t},n,i,r)},animate:function(n,t,u,f){var s=i.isEmptyObject(n),o=i.speed(t,u,f),e=function(){var t=a(this,i.extend({},n),o);(s||r.get(this,"finish"))&&t.stop(!0)};return e.finish=e,s||o.queue===!1?this.each(e):this.queue(o.queue,e)},stop:function(n,t,u){var f=function(n){var t=n.stop;delete n.stop;t(u)};return typeof n!="string"&&(u=t,t=n,n=undefined),t&&n!==!1&&this.queue(n||"fx",[]),this.each(function(){var s=!0,t=n!=null&&n+"queueHooks",o=i.timers,e=r.get(this);if(t)e[t]&&e[t].stop&&f(e[t]);else for(t in e)e[t]&&e[t].stop&&rf.test(t)&&f(e[t]);for(t=o.length;t--;)o[t].elem===this&&(n==null||o[t].queue===n)&&(o[t].anim.stop(u),s=!1,o.splice(t,1));(s||!u)&&i.dequeue(this,n)})},finish:function(n){return n!==!1&&(n=n||"fx"),this.each(function(){var t,e=r.get(this),u=e[n+"queue"],o=e[n+"queueHooks"],f=i.timers,s=u?u.length:0;for(e.finish=!0,i.queue(this,n,[]),o&&o.stop&&o.stop.call(this,!0),t=f.length;t--;)f[t].elem===this&&f[t].queue===n&&(f[t].anim.stop(!0),f.splice(t,1));for(t=0;t<s;t++)u[t]&&u[t].finish&&u[t].finish.call(this);delete e.finish})}});i.each(["toggle","show","hide"],function(n,t){var r=i.fn[t];i.fn[t]=function(n,i,u){return n==null||typeof n=="boolean"?r.apply(this,arguments):this.animate(ei(t,!0),n,i,u)}});i.each({slideDown:ei("show"),slideUp:ei("hide"),slideToggle:ei("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(n,t){i.fn[n]=function(n,i,r){return this.animate(t,n,i,r)}});i.timers=[];i.fx.tick=function(){var r,n=0,t=i.timers;for(st=Date.now();n<t.length;n++)r=t[n],r()||t[n]!==r||t.splice(n--,1);t.length||i.fx.stop();st=undefined};i.fx.timer=function(n){i.timers.push(n);i.fx.start()};i.fx.interval=13;i.fx.start=function(){fi||(fi=!0,bi())};i.fx.stop=function(){fi=null};i.fx.speeds={slow:600,fast:200,_default:400};i.fn.delay=function(t,r){return t=i.fx?i.fx.speeds[t]||t:t,r=r||"fx",this.queue(r,function(i,r){var u=n.setTimeout(i,t);r.stop=function(){n.clearTimeout(u)}})},function(){var n=f.createElement("input"),t=f.createElement("select"),i=t.appendChild(f.createElement("option"));n.type="checkbox";e.checkOn=n.value!=="";e.optSelected=i.selected;n=f.createElement("input");n.value="t";n.type="radio";e.radioValue=n.value==="t"}();ht=i.expr.attrHandle;i.fn.extend({attr:function(n,t){return p(this,i.attr,n,t,arguments.length>1)},removeAttr:function(n){return this.each(function(){i.removeAttr(this,n)})}});i.extend({attr:function(n,t,r){var u,f,e=n.nodeType;if(e!==3&&e!==8&&e!==2){if(typeof n.getAttribute=="undefined")return i.prop(n,t,r);if(e===1&&i.isXMLDoc(n)||(f=i.attrHooks[t.toLowerCase()]||(i.expr.match.bool.test(t)?ef:undefined)),r!==undefined){if(r===null){i.removeAttr(n,t);return}return f&&"set"in f&&(u=f.set(n,r,t))!==undefined?u:(n.setAttribute(t,r+""),r)}return f&&"get"in f&&(u=f.get(n,t))!==null?u:(u=i.find.attr(n,t),u==null?undefined:u)}},attrHooks:{type:{set:function(n,t){if(!e.radioValue&&t==="radio"&&v(n,"input")){var i=n.value;return n.setAttribute("type",t),i&&(n.value=i),t}}}},removeAttr:function(n,t){var i,u=0,r=t&&t.match(l);if(r&&n.nodeType===1)while(i=r[u++])n.removeAttribute(i)}});ef={set:function(n,t,r){return t===!1?i.removeAttr(n,r):n.setAttribute(r,r),r}};i.each(i.expr.match.bool.source.match(/\w+/g),function(n,t){var r=ht[t]||i.find.attr;ht[t]=function(n,t,i){var f,e,u=t.toLowerCase();return i||(e=ht[u],ht[u]=f,f=r(n,t,i)!=null?u:null,ht[u]=e),f}});of=/^(?:input|select|textarea|button)$/i;sf=/^(?:a|area)$/i;i.fn.extend({prop:function(n,t){return p(this,i.prop,n,t,arguments.length>1)},removeProp:function(n){return this.each(function(){delete this[i.propFix[n]||n]})}});i.extend({prop:function(n,t,r){var f,u,e=n.nodeType;if(e!==3&&e!==8&&e!==2)return(e===1&&i.isXMLDoc(n)||(t=i.propFix[t]||t,u=i.propHooks[t]),r!==undefined)?u&&"set"in u&&(f=u.set(n,r,t))!==undefined?f:n[t]=r:u&&"get"in u&&(f=u.get(n,t))!==null?f:n[t]},propHooks:{tabIndex:{get:function(n){var t=i.find.attr(n,"tabindex");return t?parseInt(t,10):of.test(n.nodeName)||sf.test(n.nodeName)&&n.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});e.optSelected||(i.propHooks.selected={get:function(n){var t=n.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(n){var t=n.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}});i.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){i.propFix[this.toLowerCase()]=this});i.fn.extend({addClass:function(n){var f,r,t,e,o,h,s,c=0;if(u(n))return this.each(function(t){i(this).addClass(n.call(this,t,nt(this)))});if(f=ki(n),f.length)while(r=this[c++])if(e=nt(r),t=r.nodeType===1&&" "+g(e)+" ",t){for(h=0;o=f[h++];)t.indexOf(" "+o+" ")<0&&(t+=o+" ");s=g(t);e!==s&&r.setAttribute("class",s)}return this},removeClass:function(n){var f,r,t,e,o,h,s,c=0;if(u(n))return this.each(function(t){i(this).removeClass(n.call(this,t,nt(this)))});if(!arguments.length)return this.attr("class","");if(f=ki(n),f.length)while(r=this[c++])if(e=nt(r),t=r.nodeType===1&&" "+g(e)+" ",t){for(h=0;o=f[h++];)while(t.indexOf(" "+o+" ")>-1)t=t.replace(" "+o+" "," ");s=g(t);e!==s&&r.setAttribute("class",s)}return this},toggleClass:function(n,t){var f=typeof n,e=f==="string"||Array.isArray(n);return typeof t=="boolean"&&e?t?this.addClass(n):this.removeClass(n):u(n)?this.each(function(r){i(this).toggleClass(n.call(this,r,nt(this),t),t)}):this.each(function(){var t,o,u,s;if(e)for(o=0,u=i(this),s=ki(n);t=s[o++];)u.hasClass(t)?u.removeClass(t):u.addClass(t);else(n===undefined||f==="boolean")&&(t=nt(this),t&&r.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||n===!1?"":r.get(this,"__className__")||""))})},hasClass:function(n){for(var t,r=0,i=" "+n+" ";t=this[r++];)if(t.nodeType===1&&(" "+g(nt(t))+" ").indexOf(i)>-1)return!0;return!1}});hf=/\r/g;i.fn.extend({val:function(n){var t,r,e,f=this[0];return arguments.length?(e=u(n),this.each(function(r){var u;this.nodeType===1&&(u=e?n.call(this,r,i(this).val()):n,u==null?u="":typeof u=="number"?u+="":Array.isArray(u)&&(u=i.map(u,function(n){return n==null?"":n+""})),t=i.valHooks[this.type]||i.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&t.set(this,u,"value")!==undefined||(this.value=u))})):f?(t=i.valHooks[f.type]||i.valHooks[f.nodeName.toLowerCase()],t&&"get"in t&&(r=t.get(f,"value"))!==undefined)?r:(r=f.value,typeof r=="string")?r.replace(hf,""):r==null?"":r:void 0}});i.extend({valHooks:{option:{get:function(n){var t=i.find.attr(n,"value");return t!=null?t:g(i.text(n))}},select:{get:function(n){for(var e,t,o=n.options,u=n.selectedIndex,f=n.type==="select-one",s=f?null:[],h=f?u+1:o.length,r=u<0?h:f?u:0;r<h;r++)if(t=o[r],(t.selected||r===u)&&!t.disabled&&(!t.parentNode.disabled||!v(t.parentNode,"optgroup"))){if(e=i(t).val(),f)return e;s.push(e)}return s},set:function(n,t){for(var u,r,f=n.options,e=i.makeArray(t),o=f.length;o--;)r=f[o],(r.selected=i.inArray(i.valHooks.option.get(r),e)>-1)&&(u=!0);return u||(n.selectedIndex=-1),e}}}});i.each(["radio","checkbox"],function(){i.valHooks[this]={set:function(n,t){if(Array.isArray(t))return n.checked=i.inArray(i(n).val(),t)>-1}};e.checkOn||(i.valHooks[this].get=function(n){return n.getAttribute("value")===null?"on":n.value})});e.focusin="onfocusin"in n;di=/^(?:focusinfocus|focusoutblur)$/;gi=function(n){n.stopPropagation()};i.extend(i.event,{trigger:function(t,e,o,s){var k,c,l,d,v,y,a,w,b=[o||f],h=kt.call(t,"type")?t.type:t,p=kt.call(t,"namespace")?t.namespace.split("."):[];if((c=w=l=o=o||f,o.nodeType!==3&&o.nodeType!==8)&&!di.test(h+i.event.triggered)&&(h.indexOf(".")>-1&&(p=h.split("."),h=p.shift(),p.sort()),v=h.indexOf(":")<0&&"on"+h,t=t[i.expando]?t:new i.Event(h,typeof t=="object"&&t),t.isTrigger=s?2:3,t.namespace=p.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=o),e=e==null?[t]:i.makeArray(e,[t]),a=i.event.special[h]||{},s||!a.trigger||a.trigger.apply(o,e)!==!1)){if(!s&&!a.noBubble&&!tt(o)){for(d=a.delegateType||h,di.test(d+h)||(c=c.parentNode);c;c=c.parentNode)b.push(c),l=c;l===(o.ownerDocument||f)&&b.push(l.defaultView||l.parentWindow||n)}for(k=0;(c=b[k++])&&!t.isPropagationStopped();)w=c,t.type=k>1?d:a.bindType||h,y=(r.get(c,"events")||{})[t.type]&&r.get(c,"handle"),y&&y.apply(c,e),y=v&&c[v],y&&y.apply&&lt(c)&&(t.result=y.apply(c,e),t.result===!1&&t.preventDefault());return t.type=h,s||t.isDefaultPrevented()||(!a._default||a._default.apply(b.pop(),e)===!1)&&lt(o)&&v&&u(o[h])&&!tt(o)&&(l=o[v],l&&(o[v]=null),i.event.triggered=h,t.isPropagationStopped()&&w.addEventListener(h,gi),o[h](),t.isPropagationStopped()&&w.removeEventListener(h,gi),i.event.triggered=undefined,l&&(o[v]=l)),t.result}},simulate:function(n,t,r){var u=i.extend(new i.Event,r,{type:n,isSimulated:!0});i.event.trigger(u,null,t)}});i.fn.extend({trigger:function(n,t){return this.each(function(){i.event.trigger(n,t,this)})},triggerHandler:function(n,t){var r=this[0];if(r)return i.event.trigger(n,t,r,!0)}});e.focusin||i.each({focus:"focusin",blur:"focusout"},function(n,t){var u=function(n){i.event.simulate(t,n.target,i.event.fix(n))};i.event.special[t]={setup:function(){var i=this.ownerDocument||this,f=r.access(i,t);f||i.addEventListener(n,u,!0);r.access(i,t,(f||0)+1)},teardown:function(){var i=this.ownerDocument||this,f=r.access(i,t)-1;f?r.access(i,t,f):(i.removeEventListener(n,u,!0),r.remove(i,t))}}});var pt=n.location,cf=Date.now(),nr=/\?/;i.parseXML=function(t){var r;if(!t||typeof t!="string")return null;try{r=(new n.DOMParser).parseFromString(t,"text/xml")}catch(u){r=undefined}return(!r||r.getElementsByTagName("parsererror").length)&&i.error("Invalid XML: "+t),r};var uo=/\[\]$/,lf=/\r?\n/g,fo=/^(?:submit|button|image|reset|file)$/i,eo=/^(?:input|select|textarea|keygen)/i;i.param=function(n,t){var r,f=[],e=function(n,t){var i=u(t)?t():t;f[f.length]=encodeURIComponent(n)+"="+encodeURIComponent(i==null?"":i)};if(Array.isArray(n)||n.jquery&&!i.isPlainObject(n))i.each(n,function(){e(this.name,this.value)});else for(r in n)tr(r,n[r],t,e);return f.join("&")};i.fn.extend({serialize:function(){return i.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var n=i.prop(this,"elements");return n?i.makeArray(n):this}).filter(function(){var n=this.type;return this.name&&!i(this).is(":disabled")&&eo.test(this.nodeName)&&!fo.test(n)&&(this.checked||!uu.test(n))}).map(function(n,t){var r=i(this).val();return r==null?null:Array.isArray(r)?i.map(r,function(n){return{name:t.name,value:n.replace(lf,"\r\n")}}):{name:t.name,value:r.replace(lf,"\r\n")}}).get()}});var oo=/%20/g,so=/#.*$/,ho=/([?&])_=[^&]*/,co=/^(.*?):[ \t]*([^\r\n]*)$/mg,lo=/^(?:GET|HEAD)$/,ao=/^\/\//,af={},ir={},vf="*/".concat("*"),rr=f.createElement("a");return rr.href=pt.href,i.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:pt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(pt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":vf,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":i.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(n,t){return t?ur(ur(n,i.ajaxSettings),t):ur(i.ajaxSettings,n)},ajaxPrefilter:yf(af),ajaxTransport:yf(ir),ajax:function(t,r){function b(t,r,f,l){var y,rt,g,p,b,a=r;s||(s=!0,d&&n.clearTimeout(d),c=undefined,k=l||"",e.readyState=t>0?4:0,y=t>=200&&t<300||t===304,f&&(p=vo(u,e,f)),p=yo(u,p,e,y),y?(u.ifModified&&(b=e.getResponseHeader("Last-Modified"),b&&(i.lastModified[o]=b),b=e.getResponseHeader("etag"),b&&(i.etag[o]=b)),t===204||u.type==="HEAD"?a="nocontent":t===304?a="notmodified":(a=p.state,rt=p.data,g=p.error,y=!g)):(g=a,(t||!a)&&(a="error",t<0&&(t=0))),e.status=t,e.statusText=(r||a)+"",y?tt.resolveWith(h,[rt,a,e]):tt.rejectWith(h,[e,a,g]),e.statusCode(w),w=undefined,v&&nt.trigger(y?"ajaxSuccess":"ajaxError",[e,u,y?rt:g]),it.fireWith(h,[e,a]),v&&(nt.trigger("ajaxComplete",[e,u]),--i.active||i.event.trigger("ajaxStop")))}typeof t=="object"&&(r=t,t=undefined);r=r||{};var c,o,k,y,d,a,s,v,g,p,u=i.ajaxSetup({},r),h=u.context||u,nt=u.context&&(h.nodeType||h.jquery)?i(h):i.event,tt=i.Deferred(),it=i.Callbacks("once memory"),w=u.statusCode||{},rt={},ut={},ft="canceled",e={readyState:0,getResponseHeader:function(n){var t;if(s){if(!y)for(y={};t=co.exec(k);)y[t[1].toLowerCase()]=t[2];t=y[n.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return s?k:null},setRequestHeader:function(n,t){return s==null&&(n=ut[n.toLowerCase()]=ut[n.toLowerCase()]||n,rt[n]=t),this},overrideMimeType:function(n){return s==null&&(u.mimeType=n),this},statusCode:function(n){var t;if(n)if(s)e.always(n[e.status]);else for(t in n)w[t]=[w[t],n[t]];return this},abort:function(n){var t=n||ft;return c&&c.abort(t),b(0,t),this}};if(tt.promise(e),u.url=((t||u.url||pt.href)+"").replace(ao,pt.protocol+"//"),u.type=r.method||r.type||u.method||u.type,u.dataTypes=(u.dataType||"*").toLowerCase().match(l)||[""],u.crossDomain==null){a=f.createElement("a");try{a.href=u.url;a.href=a.href;u.crossDomain=rr.protocol+"//"+rr.host!=a.protocol+"//"+a.host}catch(et){u.crossDomain=!0}}if(u.data&&u.processData&&typeof u.data!="string"&&(u.data=i.param(u.data,u.traditional)),pf(af,u,r,e),s)return e;v=i.event&&u.global;v&&i.active++==0&&i.event.trigger("ajaxStart");u.type=u.type.toUpperCase();u.hasContent=!lo.test(u.type);o=u.url.replace(so,"");u.hasContent?u.data&&u.processData&&(u.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(u.data=u.data.replace(oo,"+")):(p=u.url.slice(o.length),u.data&&(u.processData||typeof u.data=="string")&&(o+=(nr.test(o)?"&":"?")+u.data,delete u.data),u.cache===!1&&(o=o.replace(ho,"$1"),p=(nr.test(o)?"&":"?")+"_="+cf+++p),u.url=o+p);u.ifModified&&(i.lastModified[o]&&e.setRequestHeader("If-Modified-Since",i.lastModified[o]),i.etag[o]&&e.setRequestHeader("If-None-Match",i.etag[o]));(u.data&&u.hasContent&&u.contentType!==!1||r.contentType)&&e.setRequestHeader("Content-Type",u.contentType);e.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+(u.dataTypes[0]!=="*"?", "+vf+"; q=0.01":""):u.accepts["*"]);for(g in u.headers)e.setRequestHeader(g,u.headers[g]);if(u.beforeSend&&(u.beforeSend.call(h,e,u)===!1||s))return e.abort();if(ft="abort",it.add(u.complete),e.done(u.success),e.fail(u.error),c=pf(ir,u,r,e),c){if(e.readyState=1,v&&nt.trigger("ajaxSend",[e,u]),s)return e;u.async&&u.timeout>0&&(d=n.setTimeout(function(){e.abort("timeout")},u.timeout));try{s=!1;c.send(rt,b)}catch(et){if(s)throw et;b(-1,et)}}else b(-1,"No Transport");return e},getJSON:function(n,t,r){return i.get(n,t,r,"json")},getScript:function(n,t){return i.get(n,undefined,t,"script")}}),i.each(["get","post"],function(n,t){i[t]=function(n,r,f,e){return u(r)&&(e=e||f,f=r,r=undefined),i.ajax(i.extend({url:n,type:t,dataType:e,data:r,success:f},i.isPlainObject(n)&&n))}}),i._evalUrl=function(n){return i.ajax({url:n,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},i.fn.extend({wrapAll:function(n){var t;return this[0]&&(u(n)&&(n=n.call(this[0])),t=i(n,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var n=this;n.firstElementChild;)n=n.firstElementChild;return n}).append(this)),this},wrapInner:function(n){return u(n)?this.each(function(t){i(this).wrapInner(n.call(this,t))}):this.each(function(){var t=i(this),r=t.contents();r.length?r.wrapAll(n):t.append(n)})},wrap:function(n){var t=u(n);return this.each(function(r){i(this).wrapAll(t?n.call(this,r):n)})},unwrap:function(n){return this.parent(n).not("body").each(function(){i(this).replaceWith(this.childNodes)}),this}}),i.expr.pseudos.hidden=function(n){return!i.expr.pseudos.visible(n)},i.expr.pseudos.visible=function(n){return!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length)},i.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(t){}},wf={0:200,1223:204},ct=i.ajaxSettings.xhr(),e.cors=!!ct&&"withCredentials"in ct,e.ajax=ct=!!ct,i.ajaxTransport(function(t){var i,r;if(e.cors||ct&&!t.crossDomain)return{send:function(u,f){var o,e=t.xhr();if(e.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)e[o]=t.xhrFields[o];t.mimeType&&e.overrideMimeType&&e.overrideMimeType(t.mimeType);t.crossDomain||u["X-Requested-With"]||(u["X-Requested-With"]="XMLHttpRequest");for(o in u)e.setRequestHeader(o,u[o]);i=function(n){return function(){i&&(i=r=e.onload=e.onerror=e.onabort=e.ontimeout=e.onreadystatechange=null,n==="abort"?e.abort():n==="error"?typeof e.status!="number"?f(0,"error"):f(e.status,e.statusText):f(wf[e.status]||e.status,e.statusText,(e.responseType||"text")!=="text"||typeof e.responseText!="string"?{binary:e.response}:{text:e.responseText},e.getAllResponseHeaders()))}};e.onload=i();r=e.onerror=e.ontimeout=i("error");e.onabort!==undefined?e.onabort=r:e.onreadystatechange=function(){e.readyState===4&&n.setTimeout(function(){i&&r()})};i=i("abort");try{e.send(t.hasContent&&t.data||null)}catch(s){if(i)throw s;}},abort:function(){i&&i()}}}),i.ajaxPrefilter(function(n){n.crossDomain&&(n.contents.script=!1)}),i.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(n){return i.globalEval(n),n}}}),i.ajaxPrefilter("script",function(n){n.cache===undefined&&(n.cache=!1);n.crossDomain&&(n.type="GET")}),i.ajaxTransport("script",function(n){if(n.crossDomain){var r,t;return{send:function(u,e){r=i("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",t=function(n){r.remove();t=null;n&&e(n.type==="error"?404:200,n.type)});f.head.appendChild(r[0])},abort:function(){t&&t()}}}}),fr=[],oi=/(=)\?(?=&|$)|\?\?/,i.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var n=fr.pop()||i.expando+"_"+cf++;return this[n]=!0,n}}),i.ajaxPrefilter("json jsonp",function(t,r,f){var e,o,s,h=t.jsonp!==!1&&(oi.test(t.url)?"url":typeof t.data=="string"&&(t.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&oi.test(t.data)&&"data");if(h||t.dataTypes[0]==="jsonp")return e=t.jsonpCallback=u(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,h?t[h]=t[h].replace(oi,"$1"+e):t.jsonp!==!1&&(t.url+=(nr.test(t.url)?"&":"?")+t.jsonp+"="+e),t.converters["script json"]=function(){return s||i.error(e+" was not called"),s[0]},t.dataTypes[0]="json",o=n[e],n[e]=function(){s=arguments},f.always(function(){o===undefined?i(n).removeProp(e):n[e]=o;t[e]&&(t.jsonpCallback=r.jsonpCallback,fr.push(e));s&&u(o)&&o(s[0]);s=o=undefined}),"script"}),e.createHTMLDocument=function(){var n=f.implementation.createHTMLDocument("").body;return n.innerHTML="<form><\/form><form><\/form>",n.childNodes.length===2}(),i.parseHTML=function(n,t,r){if(typeof n!="string")return[];typeof t=="boolean"&&(r=t,t=!1);var s,u,o;return(t||(e.createHTMLDocument?(t=f.implementation.createHTMLDocument(""),s=t.createElement("base"),s.href=f.location.href,t.head.appendChild(s)):t=f),u=ci.exec(n),o=!r&&[],u)?[t.createElement(u[1])]:(u=su([n],t,o),o&&o.length&&i(o).remove(),i.merge([],u.childNodes))},i.fn.load=function(n,t,r){var f,s,h,e=this,o=n.indexOf(" ");return o>-1&&(f=g(n.slice(o)),n=n.slice(0,o)),u(t)?(r=t,t=undefined):t&&typeof t=="object"&&(s="POST"),e.length>0&&i.ajax({url:n,type:s||"GET",dataType:"html",data:t}).done(function(n){h=arguments;e.html(f?i("<div>").append(i.parseHTML(n)).find(f):n)}).always(r&&function(n,t){e.each(function(){r.apply(this,h||[n.responseText,t,n])})}),this},i.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(n,t){i.fn[t]=function(n){return this.on(t,n)}}),i.expr.pseudos.animated=function(n){return i.grep(i.timers,function(t){return n===t.elem}).length},i.offset={setOffset:function(n,t,r){var o,s,h,c,f,l,y,a=i.css(n,"position"),v=i(n),e={};a==="static"&&(n.style.position="relative");f=v.offset();h=i.css(n,"top");l=i.css(n,"left");y=(a==="absolute"||a==="fixed")&&(h+l).indexOf("auto")>-1;y?(o=v.position(),c=o.top,s=o.left):(c=parseFloat(h)||0,s=parseFloat(l)||0);u(t)&&(t=t.call(n,r,i.extend({},f)));t.top!=null&&(e.top=t.top-f.top+c);t.left!=null&&(e.left=t.left-f.left+s);"using"in t?t.using.call(n,e):v.css(e)}},i.fn.extend({offset:function(n){if(arguments.length)return n===undefined?this:this.each(function(t){i.offset.setOffset(this,n,t)});var r,u,t=this[0];if(t)return t.getClientRects().length?(r=t.getBoundingClientRect(),u=t.ownerDocument.defaultView,{top:r.top+u.pageYOffset,left:r.left+u.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var n,u,f,t=this[0],r={top:0,left:0};if(i.css(t,"position")==="fixed")u=t.getBoundingClientRect();else{for(u=this.offset(),f=t.ownerDocument,n=t.offsetParent||f.documentElement;n&&(n===f.body||n===f.documentElement)&&i.css(n,"position")==="static";)n=n.parentNode;n&&n!==t&&n.nodeType===1&&(r=i(n).offset(),r.top+=i.css(n,"borderTopWidth",!0),r.left+=i.css(n,"borderLeftWidth",!0))}return{top:u.top-r.top-i.css(t,"marginTop",!0),left:u.left-r.left-i.css(t,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var n=this.offsetParent;n&&i.css(n,"position")==="static";)n=n.offsetParent;return n||ii})}}),i.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,t){var r="pageYOffset"===t;i.fn[n]=function(i){return p(this,function(n,i,u){var f;if(tt(n)?f=n:n.nodeType===9&&(f=n.defaultView),u===undefined)return f?f[t]:n[i];f?f.scrollTo(r?f.pageXOffset:u,r?u:f.pageYOffset):n[i]=u},n,i,arguments.length)}}),i.each(["top","left"],function(n,t){i.cssHooks[t]=yu(e.pixelPosition,function(n,r){if(r)return r=yt(n,t),pi.test(r)?i(n).position()[t]+"px":r})}),i.each({Height:"height",Width:"width"},function(n,t){i.each({padding:"inner"+n,content:t,"":"outer"+n},function(r,u){i.fn[u]=function(f,e){var o=arguments.length&&(r||typeof f!="boolean"),s=r||(f===!0||e===!0?"margin":"border");return p(this,function(t,r,f){var e;return tt(t)?u.indexOf("outer")===0?t["inner"+n]:t.document.documentElement["client"+n]:t.nodeType===9?(e=t.documentElement,Math.max(t.body["scroll"+n],e["scroll"+n],t.body["offset"+n],e["offset"+n],e["client"+n])):f===undefined?i.css(t,r,s):i.style(t,r,f,s)},t,o?f:undefined,o)}})}),i.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(n,t){i.fn[t]=function(n,i){return arguments.length>0?this.on(t,null,n,i):this.trigger(t)}}),i.fn.extend({hover:function(n,t){return this.mouseenter(n).mouseleave(t||n)}}),i.fn.extend({bind:function(n,t,i){return this.on(n,null,t,i)},unbind:function(n,t){return this.off(n,null,t)},delegate:function(n,t,i,r){return this.on(t,n,i,r)},undelegate:function(n,t,i){return arguments.length===1?this.off(n,"**"):this.off(t,n||"**",i)}}),i.proxy=function(n,t){var f,e,r;return(typeof t=="string"&&(f=n[t],t=n,n=f),!u(n))?undefined:(e=d.call(arguments,2),r=function(){return n.apply(t||this,e.concat(d.call(arguments)))},r.guid=n.guid=n.guid||i.guid++,r)},i.holdReady=function(n){n?i.readyWait++:i.ready(!0)},i.isArray=Array.isArray,i.parseJSON=JSON.parse,i.nodeName=v,i.isFunction=u,i.isWindow=tt,i.camelCase=y,i.type=it,i.now=Date.now,i.isNumeric=function(n){var t=i.type(n);return(t==="number"||t==="string")&&!isNaN(n-parseFloat(n))},typeof define=="function"&&define.amd&&define("jquery",[],function(){return i}),bf=n.jQuery,kf=n.$,i.noConflict=function(t){return n.$===i&&(n.$=kf),t&&n.jQuery===i&&(n.jQuery=bf),i},t||(n.jQuery=n.$=i),i});
/*!
 * jQuery Migrate - v3.0.1 - 2017-09-26
 * Copyright jQuery Foundation and other contributors
 */
(function(n){typeof define=="function"&&define.amd?define(["jquery"],window,n):typeof module=="object"&&module.exports?module.exports=n(require("jquery"),window):n(jQuery,window)})(function(n,t){"use strict";function i(i){var r=t.console;f[i]||(f[i]=!0,n.migrateWarnings.push(i),r&&r.warn&&!n.migrateMute&&(r.warn("JQMIGRATE: "+i),n.migrateTrace&&r.trace&&r.trace()))}function e(n,t,r,u){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:function(){return i(u),r},set:function(n){i(u);r=n}})}function r(n,t,r,u){n[t]=function(){return i(u),r.apply(this,arguments)}}var f,s,l,h,u,a,v,y,p,w,c,b;n.migrateVersion="3.0.1",function(){t.console&&t.console.log&&((!n||/^[12]\./.test(n.fn.jquery))&&t.console.log("JQMIGRATE: jQuery 3.0.0+ REQUIRED"),n.migrateWarnings&&t.console.log("JQMIGRATE: Migrate plugin loaded multiple times"),t.console.log("JQMIGRATE: Migrate is installed"+(n.migrateMute?"":" with logging active")+", version "+n.migrateVersion))}();f={};n.migrateWarnings=[];n.migrateTrace===undefined&&(n.migrateTrace=!0);n.migrateReset=function(){f={};n.migrateWarnings.length=0};t.document.compatMode==="BackCompat"&&i("jQuery is not compatible with Quirks Mode");var k=n.fn.init,d=n.isNumeric,o=n.find,g=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,nt=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g;n.fn.init=function(n){var t=Array.prototype.slice.call(arguments);return typeof n=="string"&&n==="#"&&(i("jQuery( '#' ) is not a valid selector"),t[0]=[]),k.apply(this,t)};n.fn.init.prototype=n.fn;n.find=function(n){var r=Array.prototype.slice.call(arguments);if(typeof n=="string"&&g.test(n))try{t.document.querySelector(n)}catch(u){n=n.replace(nt,function(n,t,i,r){return"["+t+i+'"'+r+'"]'});try{t.document.querySelector(n);i("Attribute selector with '#' must be quoted: "+r[0]);r[0]=n}catch(f){i("Attribute selector with '#' was not fixed: "+r[0])}}return o.apply(this,r)};for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n.find[s]=o[s]);n.fn.size=function(){return i("jQuery.fn.size() is deprecated and removed; use the .length property"),this.length};n.parseJSON=function(){return i("jQuery.parseJSON is deprecated; use JSON.parse"),JSON.parse.apply(null,arguments)};n.isNumeric=function(t){function u(t){var i=t&&t.toString();return!n.isArray(t)&&i-parseFloat(i)+1>=0}var f=d(t),r=u(t);return f!==r&&i("jQuery.isNumeric() should not be called on constructed objects"),r};r(n,"holdReady",n.holdReady,"jQuery.holdReady is deprecated");r(n,"unique",n.uniqueSort,"jQuery.unique is deprecated; use jQuery.uniqueSort");e(n.expr,"filters",n.expr.pseudos,"jQuery.expr.filters is deprecated; use jQuery.expr.pseudos");e(n.expr,":",n.expr.pseudos,"jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos");l=n.ajax;n.ajax=function(){var n=l.apply(this,arguments);return n.promise&&(r(n,"success",n.done,"jQXHR.success is deprecated and removed"),r(n,"error",n.fail,"jQXHR.error is deprecated and removed"),r(n,"complete",n.always,"jQXHR.complete is deprecated and removed")),n};var tt=n.fn.removeAttr,it=n.fn.toggleClass,rt=/\S+/g;n.fn.removeAttr=function(t){var r=this;return n.each(t.match(rt),function(t,u){n.expr.match.bool.test(u)&&(i("jQuery.fn.removeAttr no longer sets boolean properties: "+u),r.prop(u,!1))}),tt.apply(this,arguments)};n.fn.toggleClass=function(t){return t!==undefined&&typeof t!="boolean"?it.apply(this,arguments):(i("jQuery.fn.toggleClass( boolean ) is deprecated"),this.each(function(){var i=this.getAttribute&&this.getAttribute("class")||"";i&&n.data(this,"__className__",i);this.setAttribute&&this.setAttribute("class",i||t===!1?"":n.data(this,"__className__")||"")}))};h=!1;n.swap&&n.each(["height","width","reliableMarginRight"],function(t,i){var r=n.cssHooks[i]&&n.cssHooks[i].get;r&&(n.cssHooks[i].get=function(){var n;return h=!0,n=r.apply(this,arguments),h=!1,n})});n.swap=function(n,t,r,u){var e,f,o={};h||i("jQuery.swap() is undocumented and deprecated");for(f in t)o[f]=n.style[f],n.style[f]=t[f];e=r.apply(n,u||[]);for(f in t)n.style[f]=o[f];return e};u=n.data;n.data=function(t,r,f){var o,s,e;if(r&&typeof r=="object"&&arguments.length===2){o=n.hasData(t)&&u.call(this,t);s={};for(e in r)e!==n.camelCase(e)?(i("jQuery.data() always sets/gets camelCased names: "+e),o[e]=r[e]):s[e]=r[e];return u.call(this,t,s),r}return r&&typeof r=="string"&&r!==n.camelCase(r)&&(o=n.hasData(t)&&u.call(this,t),o&&r in o)?(i("jQuery.data() always sets/gets camelCased names: "+r),arguments.length>2&&(o[r]=f),o[r]):u.apply(this,arguments)};a=n.Tween.prototype.run;v=function(n){return n};n.Tween.prototype.run=function(){n.easing[this.easing].length>1&&(i("'jQuery.easing."+this.easing.toString()+"' should use only one argument"),n.easing[this.easing]=v);a.apply(this,arguments)};n.fx.interval=n.fx.interval||13;t.requestAnimationFrame&&e(n.fx,"interval",n.fx.interval,"jQuery.fx.interval is deprecated");var ut=n.fn.load,ft=n.event.add,et=n.event.fix;return n.event.props=[],n.event.fixHooks={},e(n.event.props,"concat",n.event.props.concat,"jQuery.event.props.concat() is deprecated and removed"),n.event.fix=function(t){var f,e=t.type,u=this.fixHooks[e],r=n.event.props;if(r.length)for(i("jQuery.event.props are deprecated and removed: "+r.join());r.length;)n.event.addProp(r.pop());if(u&&!u._migrated_&&(u._migrated_=!0,i("jQuery.event.fixHooks are deprecated and removed: "+e),(r=u.props)&&r.length))while(r.length)n.event.addProp(r.pop());return f=et.call(this,t),u&&u.filter?u.filter(f,t):f},n.event.add=function(n,r){return n===t&&r==="load"&&t.document.readyState==="complete"&&i("jQuery(window).on('load'...) called after load event occurred"),ft.apply(this,arguments)},n.each(["load","unload","error"],function(t,r){n.fn[r]=function(){var n=Array.prototype.slice.call(arguments,0);return r==="load"&&typeof n[0]=="string"?ut.apply(this,n):(i("jQuery.fn."+r+"() is deprecated"),n.splice(0,0,r),arguments.length)?this.on.apply(this,n):(this.triggerHandler.apply(this,n),this)}}),n.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,r){n.fn[r]=function(n,t){return i("jQuery.fn."+r+"() event shorthand is deprecated"),arguments.length>0?this.on(r,null,n,t):this.trigger(r)}}),n(function(){n(t.document).triggerHandler("ready")}),n.event.special.ready={setup:function(){this===t.document&&i("'ready' event is deprecated")}},n.fn.extend({bind:function(n,t,r){i("jQuery.fn.bind() is deprecated");return this.on(n,null,t,r)},unbind:function(n,t){return i("jQuery.fn.unbind() is deprecated"),this.off(n,null,t)},delegate:function(n,t,r,u){i("jQuery.fn.delegate() is deprecated");return this.on(t,n,r,u)},undelegate:function(n,t,r){return i("jQuery.fn.undelegate() is deprecated"),arguments.length===1?this.off(n,"**"):this.off(t,n||"**",r)},hover:function(n,t){i("jQuery.fn.hover() is deprecated");return this.on("mouseenter",n).on("mouseleave",t||n)}}),y=n.fn.offset,n.fn.offset=function(){var u,r=this[0],f={top:0,left:0};return!r||!r.nodeType?(i("jQuery.fn.offset() requires a valid DOM element"),f):(u=(r.ownerDocument||t.document).documentElement,!n.contains(u,r))?(i("jQuery.fn.offset() requires an element connected to a document"),f):y.apply(this,arguments)},p=n.param,n.param=function(t,r){var u=n.ajaxSettings&&n.ajaxSettings.traditional;return r===undefined&&u&&(i("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),r=u),p.call(this,t,r)},w=n.fn.andSelf||n.fn.addBack,n.fn.andSelf=function(){return i("jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()"),w.apply(this,arguments)},c=n.Deferred,b=[["resolve","done",n.Callbacks("once memory"),n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory"),n.Callbacks("memory")]],n.Deferred=function(t){var r=c(),u=r.promise();return r.pipe=u.pipe=function(){var t=arguments;return i("deferred.pipe() is deprecated"),n.Deferred(function(i){n.each(b,function(f,e){var o=n.isFunction(t[f])&&t[f];r[e[1]](function(){var t=o&&o.apply(this,arguments);t&&n.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[e[0]+"With"](this===u?i.promise():this,o?[t]:arguments)})});t=null}).promise()},t&&t.call(r,r),r},n.Deferred.exceptionHook=c.exceptionHook,n});!function(n){n(["jquery"],function(n){return function(){function v(n,t,r){return u({type:f.error,iconClass:i().iconClasses.error,message:n,optionsOverride:r,title:t})}function r(r,u){return r||(r=i()),t=n("#"+r.containerId),t.length?t:(u&&(t=nt(r)),t)}function y(n,t,r){return u({type:f.info,iconClass:i().iconClasses.info,message:n,optionsOverride:r,title:t})}function p(n){o=n}function w(n,t,r){return u({type:f.success,iconClass:i().iconClasses.success,message:n,optionsOverride:r,title:t})}function b(n,t,r){return u({type:f.warning,iconClass:i().iconClasses.warning,message:n,optionsOverride:r,title:t})}function k(n,u){var f=i();t||r(f);h(n,f,u)||g(f)}function d(u){var f=i();return t||r(f),u&&0===n(":focus",u).length?void e(u):void(t.children().length&&t.remove())}function g(i){for(var u=t.children(),r=u.length-1;r>=0;r--)h(n(u[r]),i)}function h(t,i,r){var u=!(!r||!r.force)&&r.force;return!(!t||!u&&0!==n(":focus",t).length)&&(t[i.hideMethod]({duration:i.hideDuration,easing:i.hideEasing,complete:function(){e(t)}}),!0)}function nt(i){return t=n("<div/>").attr("id",i.containerId).addClass(i.positionClass),t.appendTo(n(i.target)),t}function tt(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;<\/button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1}}function c(n){o&&o(n)}function u(u){function k(n){return null==n&&(n=""),n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function nt(){ut();et();ot();st();ht();ct();ft();tt()}function tt(){var n="";switch(u.iconClass){case"toast-success":case"toast-info":n="polite";break;default:n="assertive"}o.attr("aria-live",n)}function it(){f.closeOnHover&&o.hover(vt,at);!f.onclick&&f.tapToDismiss&&o.click(v);f.closeButton&&p&&p.click(function(n){n.stopPropagation?n.stopPropagation():void 0!==n.cancelBubble&&n.cancelBubble!==!0&&(n.cancelBubble=!0);f.onCloseClick&&f.onCloseClick(n);v(!0)});f.onclick&&o.click(function(n){f.onclick(n);v()})}function rt(){o.hide();o[f.showMethod]({duration:f.showDuration,easing:f.showEasing,complete:f.onShown});f.timeOut>0&&(y=setTimeout(v,f.timeOut),h.maxHideTime=parseFloat(f.timeOut),h.hideEta=(new Date).getTime()+h.maxHideTime,f.progressBar&&(h.intervalId=setInterval(yt,10)))}function ut(){u.iconClass&&o.addClass(f.toastClass).addClass(w)}function ft(){f.newestOnTop?t.prepend(o):t.append(o)}function et(){if(u.title){var n=u.title;f.escapeHtml&&(n=k(u.title));d.append(n).addClass(f.titleClass);o.append(d)}}function ot(){if(u.message){var n=u.message;f.escapeHtml&&(n=k(u.message));g.append(n).addClass(f.messageClass);o.append(g)}}function st(){f.closeButton&&(p.addClass(f.closeClass).attr("role","button"),o.prepend(p))}function ht(){f.progressBar&&(b.addClass(f.progressClass),o.prepend(b))}function ct(){f.rtl&&o.addClass("rtl")}function lt(n,t){if(n.preventDuplicates){if(t.message===s)return!0;s=t.message}return!1}function v(t){var i=t&&f.closeMethod!==!1?f.closeMethod:f.hideMethod,r=t&&f.closeDuration!==!1?f.closeDuration:f.hideDuration,u=t&&f.closeEasing!==!1?f.closeEasing:f.hideEasing;if(!n(":focus",o).length||t)return clearTimeout(h.intervalId),o[i]({duration:r,easing:u,complete:function(){e(o);clearTimeout(y);f.onHidden&&"hidden"!==a.state&&f.onHidden();a.state="hidden";a.endTime=new Date;c(a)}})}function at(){(f.timeOut>0||f.extendedTimeOut>0)&&(y=setTimeout(v,f.extendedTimeOut),h.maxHideTime=parseFloat(f.extendedTimeOut),h.hideEta=(new Date).getTime()+h.maxHideTime)}function vt(){clearTimeout(y);h.hideEta=0;o.stop(!0,!0)[f.showMethod]({duration:f.showDuration,easing:f.showEasing})}function yt(){var n=(h.hideEta-(new Date).getTime())/h.maxHideTime*100;b.width(n+"%")}var f=i(),w=u.iconClass||f.iconClass;if("undefined"!=typeof u.optionsOverride&&(f=n.extend(f,u.optionsOverride),w=u.optionsOverride.iconClass||w),!lt(f,u)){l++;t=r(f,!0);var y=null,o=n("<div/>"),d=n("<div/>"),g=n("<div/>"),b=n("<div/>"),p=n(f.closeHtml),h={intervalId:null,hideEta:null,maxHideTime:null},a={toastId:l,state:"visible",startTime:new Date,options:f,map:u};return nt(),rt(),it(),c(a),f.debug&&console&&console.log(a),o}}function i(){return n.extend({},tt(),a.options)}function e(n){t||(t=r());n.is(":visible")||(n.remove(),n=null,0===t.children().length&&(t.remove(),s=void 0))}var t,o,s,l=0,f={error:"error",info:"info",success:"success",warning:"warning"},a={clear:k,remove:d,error:v,getContainer:r,info:y,options:{},subscribe:p,success:w,version:"2.1.3",warning:b};return a}()})}("function"==typeof define&&define.amd?define:function(n,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)});
/**!
 * @fileOverview Kickass library to create and place poppers near their reference elements.
 * @version 1.14.7
 * @license
 * Copyright (c) 2016 Federico Zivolo and contributors
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
(function(n,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define(t):n.Popper=t()})(this,function(){"use strict";function ei(n){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1;n()}))}}function oi(n){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1;n()},ot))}}function ct(n){return n&&{}.toString.call(n)==="[object Function]"}function i(n,t){if(n.nodeType!==1)return[];var r=n.ownerDocument.defaultView,i=r.getComputedStyle(n,null);return t?i[t]:i}function w(n){return n.nodeName==="HTML"?n:n.parentNode||n.host}function s(n){if(!n)return document.body;switch(n.nodeName){case"HTML":case"BODY":return n.ownerDocument.body;case"#document":return n.body}var t=i(n),r=t.overflow,u=t.overflowX,f=t.overflowY;return/(auto|scroll|overlay)/.test(r+f+u)?n:s(w(n))}function r(n){return n===11?b:n===10?k:b||k}function u(n){var e,t,f;if(!n)return document.documentElement;for(e=r(10)?document.body:null,t=n.offsetParent||null;t===e&&n.nextElementSibling;)t=(n=n.nextElementSibling).offsetParent;return(f=t&&t.nodeName,!f||f==="BODY"||f==="HTML")?n?n.ownerDocument.documentElement:document.documentElement:["TH","TD","TABLE"].indexOf(t.nodeName)!==-1&&i(t,"position")==="static"?u(t):t}function si(n){var t=n.nodeName;return t==="BODY"?!1:t==="HTML"||u(n.firstElementChild)===n}function d(n){return n.parentNode!==null?d(n.parentNode):n}function c(n,t){var i,f;if(!n||!n.nodeType||!t||!t.nodeType)return document.documentElement;var e=n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,o=e?n:t,s=e?t:n,r=document.createRange();return(r.setStart(o,0),r.setEnd(s,0),i=r.commonAncestorContainer,n!==i&&t!==i||o.contains(s))?si(i)?i:u(i):(f=d(n),f.host?c(f.host,t):c(n,d(t).host))}function f(n){var f=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"top",t=f==="top"?"scrollTop":"scrollLeft",i=n.nodeName,r,u;return i==="BODY"||i==="HTML"?(r=n.ownerDocument.documentElement,u=n.ownerDocument.scrollingElement||r,u[t]):n[t]}function hi(n,t){var e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1,r=f(t,"top"),u=f(t,"left"),i=e?-1:1;return n.top+=r*i,n.bottom+=r*i,n.left+=u*i,n.right+=u*i,n}function lt(n,t){var i=t==="x"?"Left":"Top",r=i==="Left"?"Right":"Bottom";return parseFloat(n["border"+i+"Width"],10)+parseFloat(n["border"+r+"Width"],10)}function at(n,t,i,u){return Math.max(t["offset"+n],t["scroll"+n],i["client"+n],i["offset"+n],i["scroll"+n],r(10)?parseInt(i["offset"+n])+parseInt(u["margin"+(n==="Height"?"Top":"Left")])+parseInt(u["margin"+(n==="Height"?"Bottom":"Right")]):0)}function vt(n){var i=n.body,t=n.documentElement,u=r(10)&&getComputedStyle(t);return{height:at("Height",i,t,u),width:at("Width",i,t,u)}}function t(t){return n({},t,{right:t.left+t.width,bottom:t.top+t.height})}function g(n){var u={},o,s,l;try{r(10)?(u=n.getBoundingClientRect(),o=f(n,"top"),s=f(n,"left"),u.top+=o,u.left+=s,u.bottom+=o,u.right+=s):u=n.getBoundingClientRect()}catch(p){}var e={left:u.left,top:u.top,width:u.right-u.left,height:u.bottom-u.top},a=n.nodeName==="HTML"?vt(n.ownerDocument):{},v=a.width||n.clientWidth||e.right-e.left,y=a.height||n.clientHeight||e.bottom-e.top,h=n.offsetWidth-v,c=n.offsetHeight-y;return(h||c)&&(l=i(n),h-=lt(l,"x"),c-=lt(l,"y"),e.width-=h,e.height-=c),t(e)}function nt(n,u){var p=arguments.length>2&&arguments[2]!==undefined?arguments[2]:!1,w=r(10),b=u.nodeName==="HTML",o=g(n),e=g(u),a=s(n),h=i(u),v=parseFloat(h.borderTopWidth,10),y=parseFloat(h.borderLeftWidth,10),f,c,l;return p&&b&&(e.top=Math.max(e.top,0),e.left=Math.max(e.left,0)),f=t({top:o.top-e.top-v,left:o.left-e.left-y,width:o.width,height:o.height}),f.marginTop=0,f.marginLeft=0,!w&&b&&(c=parseFloat(h.marginTop,10),l=parseFloat(h.marginLeft,10),f.top-=v-c,f.bottom-=v-c,f.left-=y-l,f.right-=y-l,f.marginTop=c,f.marginLeft=l),(w&&!p?u.contains(a):u===a&&a.nodeName!=="BODY")&&(f=hi(f,u)),f}function ai(n){var u=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1,i=n.ownerDocument.documentElement,r=nt(n,i),e=Math.max(i.clientWidth,window.innerWidth||0),o=Math.max(i.clientHeight,window.innerHeight||0),s=u?0:f(i),h=u?0:f(i,"left"),c={top:s-r.top+r.marginTop,left:h-r.left+r.marginLeft,width:e,height:o};return t(c)}function yt(n){var r=n.nodeName,t;return r==="BODY"||r==="HTML"?!1:i(n,"position")==="fixed"?!0:(t=w(n),!t)?!1:yt(t)}function pt(n){if(!n||!n.parentElement||r())return document.documentElement;for(var t=n.parentElement;t&&i(t,"transform")==="none";)t=t.parentElement;return t||document.documentElement}function tt(n,t,i,r){var h=arguments.length>4&&arguments[4]!==undefined?arguments[4]:!1,u={top:0,left:0},l=h?pt(n):c(n,t),e,f,o;if(r==="viewport")u=ai(l,h);else if(e=void 0,r==="scrollParent"?(e=s(w(t)),e.nodeName==="BODY"&&(e=n.ownerDocument.documentElement)):e=r==="window"?n.ownerDocument.documentElement:r,f=nt(e,l,h),e.nodeName!=="HTML"||yt(l))u=f;else{var a=vt(n.ownerDocument),v=a.height,y=a.width;u.top+=f.top-f.marginTop;u.bottom=v+f.top;u.left+=f.left-f.marginLeft;u.right=y+f.left}return i=i||0,o=typeof i=="number",u.left+=o?i:i.left||0,u.top+=o?i:i.top||0,u.right-=o?i:i.right||0,u.bottom-=o?i:i.bottom||0,u}function vi(n){var t=n.width,i=n.height;return t*i}function wt(t,i,r,u,f){var l=arguments.length>5&&arguments[5]!==undefined?arguments[5]:0;if(t.indexOf("auto")===-1)return t;var e=tt(r,u,l,f),o={top:{width:e.width,height:i.top-e.top},right:{width:e.right-i.right,height:e.height},bottom:{width:e.width,height:e.bottom-i.bottom},left:{width:i.left-e.left,height:e.height}},s=Object.keys(o).map(function(t){return n({key:t},o[t],{area:vi(o[t])})}).sort(function(n,t){return t.area-n.area}),h=s.filter(function(n){var t=n.width,i=n.height;return t>=r.clientWidth&&i>=r.clientHeight}),a=h.length>0?h[0].key:s[0].key,c=t.split("-")[1];return a+(c?"-"+c:"")}function bt(n,t,i){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,u=r?pt(t):c(t,i);return nt(i,u,r)}function kt(n){var i=n.ownerDocument.defaultView,t=i.getComputedStyle(n),r=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),u=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:n.offsetWidth+u,height:n.offsetHeight+r}}function l(n){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return n.replace(/left|right|bottom|top/g,function(n){return t[n]})}function dt(n,t,i){i=i.split("-")[0];var r=kt(n),e={width:r.width,height:r.height},u=["right","left"].indexOf(i)!==-1,o=u?"top":"left",f=u?"left":"top",s=u?"height":"width",h=u?"width":"height";return e[o]=t[o]+t[s]/2-r[s]/2,e[f]=i===f?t[f]-r[h]:t[l(f)],e}function h(n,t){return Array.prototype.find?n.find(t):n.filter(t)[0]}function yi(n,t,i){if(Array.prototype.findIndex)return n.findIndex(function(n){return n[t]===i});var r=h(n,function(n){return n[t]===i});return n.indexOf(r)}function gt(n,i,r){var u=r===undefined?n:n.slice(0,yi(n,"name",r));return u.forEach(function(n){n["function"]&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var r=n["function"]||n.fn;n.enabled&&ct(r)&&(i.offsets.popper=t(i.offsets.popper),i.offsets.reference=t(i.offsets.reference),i=r(i,n))}),i}function pi(){if(!this.state.isDestroyed){var n={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};if(n.offsets.reference=bt(this.state,this.popper,this.reference,this.options.positionFixed),n.placement=wt(this.options.placement,n.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),n.originalPlacement=n.placement,n.positionFixed=this.options.positionFixed,n.offsets.popper=dt(this.popper,n.offsets.reference,n.placement),n.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",n=gt(this.modifiers,n),this.state.isCreated)this.options.onUpdate(n);else{this.state.isCreated=!0;this.options.onCreate(n)}}}function ni(n,t){return n.some(function(n){var i=n.name,r=n.enabled;return r&&i===t})}function it(n){for(var i,r,u=[!1,"ms","Webkit","Moz","O"],f=n.charAt(0).toUpperCase()+n.slice(1),t=0;t<u.length;t++)if(i=u[t],r=i?""+i+f:n,typeof document.body.style[r]!="undefined")return r;return null}function wi(){return this.state.isDestroyed=!0,ni(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[it("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function ti(n){var t=n.ownerDocument;return t?t.defaultView:window}function ii(n,t,i,r){var f=n.nodeName==="BODY",u=f?n.ownerDocument.defaultView:n;u.addEventListener(t,i,{passive:!0});f||ii(s(u.parentNode),t,i,r);r.push(u)}function bi(n,t,i,r){i.updateBound=r;ti(n).addEventListener("resize",i.updateBound,{passive:!0});var u=s(n);return ii(u,"scroll",i.updateBound,i.scrollParents),i.scrollElement=u,i.eventsEnabled=!0,i}function ki(){this.state.eventsEnabled||(this.state=bi(this.reference,this.options,this.state,this.scheduleUpdate))}function di(n,t){return ti(n).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(n){n.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t}function gi(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=di(this.reference,this.state))}function rt(n){return n!==""&&!isNaN(parseFloat(n))&&isFinite(n)}function ut(n,t){Object.keys(t).forEach(function(i){var r="";["width","height","top","right","bottom","left"].indexOf(i)!==-1&&rt(t[i])&&(r="px");n.style[i]=t[i]+r})}function nr(n,t){Object.keys(t).forEach(function(i){var r=t[i];r!==!1?n.setAttribute(i,t[i]):n.removeAttribute(i)})}function tr(n){return ut(n.instance.popper,n.styles),nr(n.instance.popper,n.attributes),n.arrowElement&&Object.keys(n.arrowStyles).length&&ut(n.arrowElement,n.arrowStyles),n}function ir(n,t,i,r,u){var f=bt(u,t,n,i.positionFixed),e=wt(i.placement,f,t,n,i.modifiers.flip.boundariesElement,i.modifiers.flip.padding);return t.setAttribute("x-placement",e),ut(t,{position:i.positionFixed?"fixed":"absolute"}),i}function rr(n,t){var u=n.offsets,i=u.popper,l=u.reference,r=Math.round,a=Math.floor,f=function(n){return n},e=r(l.width),o=r(i.width),v=["left","right"].indexOf(n.placement)!==-1,s=n.placement.indexOf("-")!==-1,y=e%2==o%2,p=e%2==1&&o%2==1,h=t?v||s||y?r:a:f,c=t?r:f;return{left:h(p&&!s&&t?i.left-1:i.left),top:c(i.top),bottom:c(i.bottom),right:h(i.right)}}function ur(t,i){var k=i.x,d=i.y,nt=t.offsets.popper,c=h(t.instance.modifiers,function(n){return n.name==="applyStyle"}).gpuAcceleration,p,w,b;c!==undefined&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var tt=c!==undefined?c:i.gpuAcceleration,e=u(t.instance.popper),v=g(e),r={position:nt.position},f=rr(t,window.devicePixelRatio<2||!ri),o=k==="bottom"?"top":"bottom",s=d==="right"?"left":"right",y=it("transform"),l=void 0,a=void 0;return a=o==="bottom"?e.nodeName==="HTML"?-e.clientHeight+f.bottom:-v.height+f.bottom:f.top,l=s==="right"?e.nodeName==="HTML"?-e.clientWidth+f.right:-v.width+f.right:f.left,tt&&y?(r[y]="translate3d("+l+"px, "+a+"px, 0)",r[o]=0,r[s]=0,r.willChange="transform"):(p=o==="bottom"?-1:1,w=s==="right"?-1:1,r[o]=a*p,r[s]=l*w,r.willChange=o+", "+s),b={"x-placement":t.placement},t.attributes=n({},b,t.attributes),t.styles=n({},r,t.styles),t.arrowStyles=n({},t.offsets.arrow,t.arrowStyles),t}function ui(n,t,i){var u=h(n,function(n){var i=n.name;return i===t}),f=!!u&&n.some(function(n){return n.name===i&&n.enabled&&n.order<u.order}),r,e;return f||(r="`"+t+"`",e="`"+i+"`",console.warn(e+" modifier is required by "+r+" modifier in order to work, be sure to include it before "+r+"!")),f}function fr(n,r){var c,f;if(!ui(n.instance.modifiers,"arrow","keepTogether"))return n;if(f=r.element,typeof f=="string"){if(f=n.instance.popper.querySelector(f),!f)return n}else if(!n.instance.popper.contains(f))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),n;var k=n.placement.split("-")[0],w=n.offsets,h=w.popper,o=w.reference,l=["left","right"].indexOf(k)!==-1,v=l?"height":"width",y=l?"Top":"Left",u=y.toLowerCase(),d=l?"left":"top",a=l?"bottom":"right",s=kt(f)[v];o[a]-s<h[u]&&(n.offsets.popper[u]-=h[u]-(o[a]-s));o[u]+s>h[a]&&(n.offsets.popper[u]+=o[u]+s-h[a]);n.offsets.popper=t(n.offsets.popper);var g=o[u]+o[v]/2-s/2,b=i(n.instance.popper),nt=parseFloat(b["margin"+y],10),tt=parseFloat(b["border"+y+"Width"],10),p=g-n.offsets.popper[u]-nt-tt;return p=Math.max(Math.min(h[v]-s,p),0),n.arrowElement=f,n.offsets.arrow=(c={},e(c,u,Math.round(p)),e(c,d,""),c),n}function er(n){return n==="end"?"start":n==="start"?"end":n}function fi(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:!1,t=a.indexOf(n),i=a.slice(t+1).concat(a.slice(0,t));return r?i.reverse():i}function or(t,i){if(ni(t.instance.modifiers,"inner")||t.flipped&&t.placement===t.originalPlacement)return t;var e=tt(t.instance.popper,t.instance.reference,i.padding,i.boundariesElement,t.positionFixed),r=t.placement.split("-")[0],o=l(r),u=t.placement.split("-")[1]||"",f=[];switch(i.behavior){case v.FLIP:f=[r,o];break;case v.CLOCKWISE:f=fi(r);break;case v.COUNTERCLOCKWISE:f=fi(r,!0);break;default:f=i.behavior}return f.forEach(function(s,h){if(r!==s||f.length===h+1)return t;r=t.placement.split("-")[0];o=l(r);var a=t.offsets.popper,v=t.offsets.reference,c=Math.floor,p=r==="left"&&c(a.right)>c(v.left)||r==="right"&&c(a.left)<c(v.right)||r==="top"&&c(a.bottom)>c(v.top)||r==="bottom"&&c(a.top)<c(v.bottom),w=c(a.left)<c(e.left),b=c(a.right)>c(e.right),k=c(a.top)<c(e.top),d=c(a.bottom)>c(e.bottom),g=r==="left"&&w||r==="right"&&b||r==="top"&&k||r==="bottom"&&d,y=["top","bottom"].indexOf(r)!==-1,nt=!!i.flipVariations&&(y&&u==="start"&&w||y&&u==="end"&&b||!y&&u==="start"&&k||!y&&u==="end"&&d);(p||g||nt)&&(t.flipped=!0,(p||g)&&(r=f[h+1]),nt&&(u=er(u)),t.placement=r+(u?"-"+u:""),t.offsets.popper=n({},t.offsets.popper,dt(t.instance.popper,t.offsets.reference,t.placement)),t=gt(t.instance.modifiers,t,"flip"))}),t}function sr(n){var o=n.offsets,u=o.popper,i=o.reference,s=n.placement.split("-")[0],r=Math.floor,f=["top","bottom"].indexOf(s)!==-1,e=f?"right":"bottom",t=f?"left":"top",h=f?"width":"height";return u[e]<r(i[t])&&(n.offsets.popper[t]=r(i[t])-u[h]),u[t]>r(i[e])&&(n.offsets.popper[t]=r(i[e])),n}function hr(n,i,r,u){var h=n.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),e=+h[1],f=h[2],o,c,s;if(!e)return n;if(f.indexOf("%")===0){o=void 0;switch(f){case"%p":o=r;break;case"%":case"%r":default:o=u}return c=t(o),c[i]/100*e}return f==="vh"||f==="vw"?(s=void 0,s=f==="vh"?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0),s/100*e):e}function cr(n,t,i,r){var s=[0,0],c=["right","left"].indexOf(r)!==-1,u=n.split(/(\+|\-)/).map(function(n){return n.trim()}),f=u.indexOf(h(u,function(n){return n.search(/,|\s/)!==-1})),o,e;return u[f]&&u[f].indexOf(",")===-1&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead."),o=/\s*,\s*|\s+/,e=f!==-1?[u.slice(0,f).concat([u[f].split(o)[0]]),[u[f].split(o)[1]].concat(u.slice(f+1))]:[u],e=e.map(function(n,r){var f=(r===1?!c:c)?"height":"width",u=!1;return n.reduce(function(n,t){return n[n.length-1]===""&&["+","-"].indexOf(t)!==-1?(n[n.length-1]=t,u=!0,n):u?(n[n.length-1]+=t,u=!1,n):n.concat(t)},[]).map(function(n){return hr(n,f,t,i)})}),e.forEach(function(n,t){n.forEach(function(i,r){rt(i)&&(s[t]+=i*(n[r-1]==="-"?-1:1))})}),s}function lr(n,t){var f=t.offset,o=n.placement,e=n.offsets,i=e.popper,s=e.reference,u=o.split("-")[0],r=void 0;return r=rt(+f)?[+f,0]:cr(f,i,s,u),u==="left"?(i.top+=r[0],i.left-=r[1]):u==="right"?(i.top+=r[0],i.left+=r[1]):u==="top"?(i.left+=r[0],i.top-=r[1]):u==="bottom"&&(i.left+=r[0],i.top+=r[1]),n.popper=i,n}function ar(t,i){var s=i.boundariesElement||u(t.instance.popper),o;t.instance.reference===s&&(s=u(s));var h=it("transform"),f=t.instance.popper.style,c=f.top,l=f.left,a=f[h];f.top="";f.left="";f[h]="";o=tt(t.instance.popper,t.instance.reference,i.padding,s,t.positionFixed);f.top=c;f.left=l;f[h]=a;i.boundaries=o;var v=i.priority,r=t.offsets.popper,y={primary:function(n){var t=r[n];return r[n]<o[n]&&!i.escapeWithReference&&(t=Math.max(r[n],o[n])),e({},n,t)},secondary:function(n){var t=n==="right"?"left":"top",u=r[t];return r[n]>o[n]&&!i.escapeWithReference&&(u=Math.min(r[t],o[n]-(n==="right"?r.width:r.height))),e({},t,u)}};return v.forEach(function(t){var i=["left","top"].indexOf(t)!==-1?"primary":"secondary";r=n({},r,y[i](t))}),t.offsets.popper=r,t}function vr(t){var u=t.placement,l=u.split("-")[0],f=u.split("-")[1];if(f){var o=t.offsets,r=o.reference,s=o.popper,h=["bottom","top"].indexOf(l)!==-1,i=h?"left":"top",c=h?"width":"height",a={start:e({},i,r[i]),end:e({},i,r[i]+r[c]-s[c])};t.offsets.popper=n({},s,a[f])}return t}function yr(n){if(!ui(n.instance.modifiers,"hide","preventOverflow"))return n;var t=n.offsets.reference,i=h(n.instance.modifiers,function(n){return n.name==="preventOverflow"}).boundaries;if(t.bottom<i.top||t.left>i.right||t.top>i.bottom||t.right<i.left){if(n.hide===!0)return n;n.hide=!0;n.attributes["x-out-of-boundaries"]=""}else{if(n.hide===!1)return n;n.hide=!1;n.attributes["x-out-of-boundaries"]=!1}return n}function pr(n){var u=n.placement,i=u.split("-")[0],f=n.offsets,r=f.popper,o=f.reference,e=["left","right"].indexOf(i)!==-1,s=["top","left"].indexOf(i)===-1;return r[e?"left":"top"]=o[i]-(s?r[e?"width":"height"]:0),n.placement=l(u),n.offsets.popper=t(r),n}for(var st,ht,b,k,ri,ft,a,v,o=typeof window!="undefined"&&typeof document!="undefined",et=["Edge","Trident","Firefox"],ot=0,p=0;p<et.length;p+=1)if(o&&navigator.userAgent.indexOf(et[p])>=0){ot=1;break}st=o&&window.Promise;ht=st?ei:oi;b=o&&!!(window.MSInputMethodContext&&document.documentMode);k=o&&/MSIE 10/.test(navigator.userAgent);var ci=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function");},li=function(){function n(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}return function(t,i,r){return i&&n(t.prototype,i),r&&n(t,r),t}}(),e=function(n,t,i){return t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n},n=Object.assign||function(n){for(var i,r,t=1;t<arguments.length;t++){i=arguments[t];for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n};ri=o&&/Firefox/i.test(navigator.userAgent);ft=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"];a=ft.slice(3);v={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};var wr={shift:{order:100,enabled:!0,fn:vr},offset:{order:200,enabled:!0,fn:lr,offset:0},preventOverflow:{order:300,enabled:!0,fn:ar,priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:sr},arrow:{order:500,enabled:!0,fn:fr,element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:or,behavior:"flip",padding:5,boundariesElement:"viewport"},inner:{order:700,enabled:!1,fn:pr},hide:{order:800,enabled:!0,fn:yr},computeStyle:{order:850,enabled:!0,fn:ur,gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:tr,onLoad:ir,gpuAcceleration:undefined}},br={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:wr},y=function(){function t(i,r){var u=this,f=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},e;ci(this,t);this.scheduleUpdate=function(){return requestAnimationFrame(u.update)};this.update=ht(this.update.bind(this));this.options=n({},t.Defaults,f);this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]};this.reference=i&&i.jquery?i[0]:i;this.popper=r&&r.jquery?r[0]:r;this.options.modifiers={};Object.keys(n({},t.Defaults.modifiers,f.modifiers)).forEach(function(i){u.options.modifiers[i]=n({},t.Defaults.modifiers[i]||{},f.modifiers?f.modifiers[i]:{})});this.modifiers=Object.keys(this.options.modifiers).map(function(t){return n({name:t},u.options.modifiers[t])}).sort(function(n,t){return n.order-t.order});this.modifiers.forEach(function(n){if(n.enabled&&ct(n.onLoad))n.onLoad(u.reference,u.popper,u.options,n,u.state)});this.update();e=this.options.eventsEnabled;e&&this.enableEventListeners();this.state.eventsEnabled=e}return li(t,[{key:"update",value:function(){return pi.call(this)}},{key:"destroy",value:function(){return wi.call(this)}},{key:"enableEventListeners",value:function(){return ki.call(this)}},{key:"disableEventListeners",value:function(){return gi.call(this)}}]),t}();return y.Utils=(typeof window!="undefined"?window:global).PopperUtils,y.placements=ft,y.Defaults=br,y});
/*!
  * Bootstrap v4.1.3 (https://getbootstrap.com/)
  * Copyright 2011-2018 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  */
(function(n,t){typeof exports=="object"&&typeof module!="undefined"?t(exports,require("jquery"),require("popper.js")):typeof define=="function"&&define.amd?define(["exports","jquery","popper.js"],t):t(n.bootstrap={},n.jQuery,n.Popper)})(this,function(n,t,i){"use strict";function o(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function f(n,t,i){return t&&o(n.prototype,t),i&&o(n,i),n}function s(n,t,i){return t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i,n}function u(n){for(var i,r,t=1;t<arguments.length;t++)i=arguments[t]!=null?arguments[t]:{},r=Object.keys(i),typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(i).filter(function(n){return Object.getOwnPropertyDescriptor(i,n).enumerable}))),r.forEach(function(t){s(n,t,i[t])});return n}function h(n,t){n.prototype=Object.create(t.prototype);n.prototype.constructor=n;n.__proto__=t}t=t&&t.hasOwnProperty("default")?t["default"]:t;i=i&&i.hasOwnProperty("default")?i["default"]:i;var r=function(n){function f(n){return{}.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase()}function e(){return{bindType:i,delegateType:i,handle:function(t){return n(t.target).is(this)?t.handleObj.handler.apply(this,arguments):undefined}}}function o(i){var u=this,r=!1;n(this).one(t.TRANSITION_END,function(){r=!0});return setTimeout(function(){r||t.triggerTransitionEnd(u)},i),this}function s(){n.fn.emulateTransitionEnd=o;n.event.special[t.TRANSITION_END]=e()}var i="transitionend",r=1e6,u=1e3,t={TRANSITION_END:"bsTransitionEnd",getUID:function(n){do n+=~~(Math.random()*r);while(document.getElementById(n));return n},getSelectorFromElement:function(n){var t=n.getAttribute("data-target");t&&t!=="#"||(t=n.getAttribute("href")||"");try{return document.querySelector(t)?t:null}catch(i){return null}},getTransitionDurationFromElement:function(t){if(!t)return 0;var i=n(t).css("transition-duration"),r=parseFloat(i);return r?(i=i.split(",")[0],parseFloat(i)*u):0},reflow:function(n){return n.offsetHeight},triggerTransitionEnd:function(t){n(t).trigger(i)},supportsTransitionEnd:function(){return Boolean(i)},isElement:function(n){return(n[0]||n).nodeType},typeCheckConfig:function(n,i,r){for(var u in r)if(Object.prototype.hasOwnProperty.call(r,u)){var o=r[u],e=i[u],s=e&&t.isElement(e)?"element":f(e);if(!new RegExp(o).test(s))throw new Error(n.toUpperCase()+": "+('Option "'+u+'" provided type "'+s+'" ')+('but expected type "'+o+'".'));}}};return s(),t}(t),c=function(n){var i="alert",h="4.1.3",u="bs.alert",e="."+u,c=n.fn[i],o={CLOSE:"close"+e,CLOSED:"closed"+e,CLICK_DATA_API:"click"+e+".data-api"},s={ALERT:"alert",FADE:"fade",SHOW:"show"},t=function(){function t(n){this._element=n}var i=t.prototype;return i.close=function(n){var t=this._element,i;(n&&(t=this._getRootElement(n)),i=this._triggerCloseEvent(t),i.isDefaultPrevented())||this._removeElement(t)},i.dispose=function(){n.removeData(this._element,u);this._element=null},i._getRootElement=function(t){var u=r.getSelectorFromElement(t),i=!1;return u&&(i=document.querySelector(u)),i||(i=n(t).closest("."+s.ALERT)[0]),i},i._triggerCloseEvent=function(t){var i=n.Event(o.CLOSE);return n(t).trigger(i),i},i._removeElement=function(t){var u=this,i;if(n(t).removeClass(s.SHOW),!n(t).hasClass(s.FADE)){this._destroyElement(t);return}i=r.getTransitionDurationFromElement(t);n(t).one(r.TRANSITION_END,function(n){return u._destroyElement(t,n)}).emulateTransitionEnd(i)},i._destroyElement=function(t){n(t).detach().trigger(o.CLOSED).remove()},t._jQueryInterface=function(i){return this.each(function(){var f=n(this),r=f.data(u);r||(r=new t(this),f.data(u,r));i==="close"&&r[i](this)})},t._handleDismiss=function(n){return function(t){t&&t.preventDefault();n.close(this)}},f(t,null,[{key:"VERSION",get:function(){return h}}]),t}();n(document).on(o.CLICK_DATA_API,{DISMISS:'[data-dismiss="alert"]'}.DISMISS,t._handleDismiss(new t));return n.fn[i]=t._jQueryInterface,n.fn[i].Constructor=t,n.fn[i].noConflict=function(){return n.fn[i]=c,t._jQueryInterface},t}(t),l=function(n){var r="button",c="4.1.3",e="bs.button",o="."+e,s=".data-api",l=n.fn[r],t={ACTIVE:"active",BUTTON:"btn",FOCUS:"focus"},i={DATA_TOGGLE_CARROT:'[data-toggle^="button"]',DATA_TOGGLE:'[data-toggle="buttons"]',INPUT:"input",ACTIVE:".active",BUTTON:".btn"},h={CLICK_DATA_API:"click"+o+s,FOCUS_BLUR_DATA_API:"focus"+o+s+" "+("blur"+o+s)},u=function(){function r(n){this._element=n}var u=r.prototype;return u.toggle=function(){var f=!0,o=!0,u=n(this._element).closest(i.DATA_TOGGLE)[0],r,e;if(u&&(r=this._element.querySelector(i.INPUT),r)){if(r.type==="radio"&&(r.checked&&this._element.classList.contains(t.ACTIVE)?f=!1:(e=u.querySelector(i.ACTIVE),e&&n(e).removeClass(t.ACTIVE))),f){if(r.hasAttribute("disabled")||u.hasAttribute("disabled")||r.classList.contains("disabled")||u.classList.contains("disabled"))return;r.checked=!this._element.classList.contains(t.ACTIVE);n(r).trigger("change")}r.focus();o=!1}o&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(t.ACTIVE));f&&n(this._element).toggleClass(t.ACTIVE)},u.dispose=function(){n.removeData(this._element,e);this._element=null},r._jQueryInterface=function(t){return this.each(function(){var i=n(this).data(e);i||(i=new r(this),n(this).data(e,i));t==="toggle"&&i[t]()})},f(r,null,[{key:"VERSION",get:function(){return c}}]),r}();n(document).on(h.CLICK_DATA_API,i.DATA_TOGGLE_CARROT,function(r){r.preventDefault();var f=r.target;n(f).hasClass(t.BUTTON)||(f=n(f).closest(i.BUTTON));u._jQueryInterface.call(n(f),"toggle")}).on(h.FOCUS_BLUR_DATA_API,i.DATA_TOGGLE_CARROT,function(r){var u=n(r.target).closest(i.BUTTON)[0];n(u).toggleClass(t.FOCUS,/^focus(in)?$/.test(r.type))});return n.fn[r]=u._jQueryInterface,n.fn[r].Constructor=u,n.fn[r].noConflict=function(){return n.fn[r]=l,u._jQueryInterface},u}(t),a=function(n){var h="carousel",y="4.1.3",l="bs.carousel",e="."+l,v=".data-api",p=n.fn[h],w=37,b=39,k=500,a={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0},d={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"},i={NEXT:"next",PREV:"prev",LEFT:"left",RIGHT:"right"},o={SLIDE:"slide"+e,SLID:"slid"+e,KEYDOWN:"keydown"+e,MOUSEENTER:"mouseenter"+e,MOUSELEAVE:"mouseleave"+e,TOUCHEND:"touchend"+e,LOAD_DATA_API:"load"+e+v,CLICK_DATA_API:"click"+e+v},t={CAROUSEL:"carousel",ACTIVE:"active",SLIDE:"slide",RIGHT:"carousel-item-right",LEFT:"carousel-item-left",NEXT:"carousel-item-next",PREV:"carousel-item-prev",ITEM:"carousel-item"},s={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},c=function(){function v(t,i){this._items=null;this._interval=null;this._activeElement=null;this._isPaused=!1;this._isSliding=!1;this.touchTimeout=null;this._config=this._getConfig(i);this._element=n(t)[0];this._indicatorsElement=this._element.querySelector(s.INDICATORS);this._addEventListeners()}var c=v.prototype;return c.next=function(){this._isSliding||this._slide(i.NEXT)},c.nextWhenVisible=function(){!document.hidden&&n(this._element).is(":visible")&&n(this._element).css("visibility")!=="hidden"&&this.next()},c.prev=function(){this._isSliding||this._slide(i.PREV)},c.pause=function(n){n||(this._isPaused=!0);this._element.querySelector(s.NEXT_PREV)&&(r.triggerTransitionEnd(this._element),this.cycle(!0));clearInterval(this._interval);this._interval=null},c.cycle=function(n){n||(this._isPaused=!1);this._interval&&(clearInterval(this._interval),this._interval=null);this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},c.to=function(t){var f=this,r,u;if(this._activeElement=this._element.querySelector(s.ACTIVE_ITEM),r=this._getItemIndex(this._activeElement),!(t>this._items.length-1)&&!(t<0)){if(this._isSliding){n(this._element).one(o.SLID,function(){return f.to(t)});return}if(r===t){this.pause();this.cycle();return}u=t>r?i.NEXT:i.PREV;this._slide(u,this._items[t])}},c.dispose=function(){n(this._element).off(e);n.removeData(this._element,l);this._items=null;this._config=null;this._element=null;this._interval=null;this._isPaused=null;this._isSliding=null;this._activeElement=null;this._indicatorsElement=null},c._getConfig=function(n){return n=u({},a,n),r.typeCheckConfig(h,n,d),n},c._addEventListeners=function(){var t=this;if(this._config.keyboard)n(this._element).on(o.KEYDOWN,function(n){return t._keydown(n)});if(this._config.pause==="hover"){n(this._element).on(o.MOUSEENTER,function(n){return t.pause(n)}).on(o.MOUSELEAVE,function(n){return t.cycle(n)});if("ontouchstart"in document.documentElement)n(this._element).on(o.TOUCHEND,function(){t.pause();t.touchTimeout&&clearTimeout(t.touchTimeout);t.touchTimeout=setTimeout(function(n){return t.cycle(n)},k+t._config.interval)})}},c._keydown=function(n){if(!/input|textarea/i.test(n.target.tagName))switch(n.which){case w:n.preventDefault();this.prev();break;case b:n.preventDefault();this.next()}},c._getItemIndex=function(n){return this._items=n&&n.parentNode?[].slice.call(n.parentNode.querySelectorAll(s.ITEM)):[],this._items.indexOf(n)},c._getItemByDirection=function(n,t){var e=n===i.NEXT,o=n===i.PREV,r=this._getItemIndex(t),s=this._items.length-1,h=o&&r===0||e&&r===s,f,u;return h&&!this._config.wrap?t:(f=n===i.PREV?-1:1,u=(r+f)%this._items.length,u===-1?this._items[this._items.length-1]:this._items[u])},c._triggerSlideEvent=function(t,i){var u=this._getItemIndex(t),f=this._getItemIndex(this._element.querySelector(s.ACTIVE_ITEM)),r=n.Event(o.SLIDE,{relatedTarget:t,direction:i,from:f,to:u});return n(this._element).trigger(r),r},c._setActiveIndicatorElement=function(i){var u,r;this._indicatorsElement&&(u=[].slice.call(this._indicatorsElement.querySelectorAll(s.ACTIVE)),n(u).removeClass(t.ACTIVE),r=this._indicatorsElement.children[this._getItemIndex(i)],r&&n(r).addClass(t.ACTIVE))},c._slide=function(u,f){var y=this,h=this._element.querySelector(s.ACTIVE_ITEM),k=this._getItemIndex(h),e=f||h&&this._getItemByDirection(u,h),d=this._getItemIndex(e),p=Boolean(this._interval),c,l,a,w,v,b;if(u===i.NEXT?(c=t.LEFT,l=t.NEXT,a=i.LEFT):(c=t.RIGHT,l=t.PREV,a=i.RIGHT),e&&n(e).hasClass(t.ACTIVE)){this._isSliding=!1;return}(w=this._triggerSlideEvent(e,a),w.isDefaultPrevented())||h&&e&&(this._isSliding=!0,p&&this.pause(),this._setActiveIndicatorElement(e),v=n.Event(o.SLID,{relatedTarget:e,direction:a,from:k,to:d}),n(this._element).hasClass(t.SLIDE)?(n(e).addClass(l),r.reflow(e),n(h).addClass(c),n(e).addClass(c),b=r.getTransitionDurationFromElement(h),n(h).one(r.TRANSITION_END,function(){n(e).removeClass(c+" "+l).addClass(t.ACTIVE);n(h).removeClass(t.ACTIVE+" "+l+" "+c);y._isSliding=!1;setTimeout(function(){return n(y._element).trigger(v)},0)}).emulateTransitionEnd(b)):(n(h).removeClass(t.ACTIVE),n(e).addClass(t.ACTIVE),this._isSliding=!1,n(this._element).trigger(v)),p&&this.cycle())},v._jQueryInterface=function(t){return this.each(function(){var i=n(this).data(l),r=u({},a,n(this).data()),f;if(typeof t=="object"&&(r=u({},r,t)),f=typeof t=="string"?t:r.slide,i||(i=new v(this,r),n(this).data(l,i)),typeof t=="number")i.to(t);else if(typeof f=="string"){if(typeof i[f]=="undefined")throw new TypeError('No method named "'+f+'"');i[f]()}else r.interval&&(i.pause(),i.cycle())})},v._dataApiClickHandler=function(i){var s=r.getSelectorFromElement(this),f,o,e;s&&(f=n(s)[0],f&&n(f).hasClass(t.CAROUSEL))&&(o=u({},n(f).data(),n(this).data()),e=this.getAttribute("data-slide-to"),e&&(o.interval=!1),v._jQueryInterface.call(n(f),o),e&&n(f).data(l).to(e),i.preventDefault())},f(v,null,[{key:"VERSION",get:function(){return y}},{key:"Default",get:function(){return a}}]),v}();n(document).on(o.CLICK_DATA_API,s.DATA_SLIDE,c._dataApiClickHandler);n(window).on(o.LOAD_DATA_API,function(){for(var i,r=[].slice.call(document.querySelectorAll(s.DATA_RIDE)),t=0,u=r.length;t<u;t++)i=n(r[t]),c._jQueryInterface.call(i,i.data())});return n.fn[h]=c._jQueryInterface,n.fn[h].Constructor=c,n.fn[h].noConflict=function(){return n.fn[h]=p,c._jQueryInterface},c}(t),v=function(n){var e="collapse",v="4.1.3",i="bs.collapse",o="."+i,y=n.fn[e],c={toggle:!0,parent:""},p={toggle:"boolean",parent:"(string|element)"},s={SHOW:"show"+o,SHOWN:"shown"+o,HIDE:"hide"+o,HIDDEN:"hidden"+o,CLICK_DATA_API:"click"+o+".data-api"},t={SHOW:"show",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"},l={WIDTH:"width",HEIGHT:"height"},a={ACTIVES:".show, .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},h=function(){function h(t,i){var f,u,o;for(this._isTransitioning=!1,this._element=t,this._config=this._getConfig(i),this._triggerArray=n.makeArray(document.querySelectorAll('[data-toggle="collapse"][href="#'+t.id+'"],'+('[data-toggle="collapse"][data-target="#'+t.id+'"]'))),f=[].slice.call(document.querySelectorAll(a.DATA_TOGGLE)),u=0,o=f.length;u<o;u++){var s=f[u],e=r.getSelectorFromElement(s),h=[].slice.call(document.querySelectorAll(e)).filter(function(n){return n===t});e!==null&&h.length>0&&(this._selector=e,this._triggerArray.push(s))}this._parent=this._config.parent?this._getParent():null;this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray);this._config.toggle&&this.toggle()}var o=h.prototype;return o.toggle=function(){n(this._element).hasClass(t.SHOW)?this.hide():this.show()},o.show=function(){var e=this,u,o,c,f;if(!this._isTransitioning&&!n(this._element).hasClass(t.SHOW)&&(this._parent&&(u=[].slice.call(this._parent.querySelectorAll(a.ACTIVES)).filter(function(n){return n.getAttribute("data-parent")===e._config.parent}),u.length===0&&(u=null)),!u||(o=n(u).not(this._selector).data(i),!o||!o._isTransitioning))&&(c=n.Event(s.SHOW),n(this._element).trigger(c),!c.isDefaultPrevented())){u&&(h._jQueryInterface.call(n(u).not(this._selector),"hide"),o||n(u).data(i,null));f=this._getDimension();n(this._element).removeClass(t.COLLAPSE).addClass(t.COLLAPSING);this._element.style[f]=0;this._triggerArray.length&&n(this._triggerArray).removeClass(t.COLLAPSED).attr("aria-expanded",!0);this.setTransitioning(!0);var l=function(){n(e._element).removeClass(t.COLLAPSING).addClass(t.COLLAPSE).addClass(t.SHOW);e._element.style[f]="";e.setTransitioning(!1);n(e._element).trigger(s.SHOWN)},v=f[0].toUpperCase()+f.slice(1),y="scroll"+v,p=r.getTransitionDurationFromElement(this._element);n(this._element).one(r.TRANSITION_END,l).emulateTransitionEnd(p);this._element.style[f]=this._element[y]+"px"}},o.hide=function(){var c=this,f,i,e,u,o,h,l,a,v;if(!this._isTransitioning&&n(this._element).hasClass(t.SHOW)&&(f=n.Event(s.HIDE),n(this._element).trigger(f),!f.isDefaultPrevented())){if(i=this._getDimension(),this._element.style[i]=this._element.getBoundingClientRect()[i]+"px",r.reflow(this._element),n(this._element).addClass(t.COLLAPSING).removeClass(t.COLLAPSE).removeClass(t.SHOW),e=this._triggerArray.length,e>0)for(u=0;u<e;u++)o=this._triggerArray[u],h=r.getSelectorFromElement(o),h!==null&&(l=n([].slice.call(document.querySelectorAll(h))),l.hasClass(t.SHOW)||n(o).addClass(t.COLLAPSED).attr("aria-expanded",!1));this.setTransitioning(!0);a=function(){c.setTransitioning(!1);n(c._element).removeClass(t.COLLAPSING).addClass(t.COLLAPSE).trigger(s.HIDDEN)};this._element.style[i]="";v=r.getTransitionDurationFromElement(this._element);n(this._element).one(r.TRANSITION_END,a).emulateTransitionEnd(v)}},o.setTransitioning=function(n){this._isTransitioning=n},o.dispose=function(){n.removeData(this._element,i);this._config=null;this._parent=null;this._element=null;this._triggerArray=null;this._isTransitioning=null},o._getConfig=function(n){return n=u({},c,n),n.toggle=Boolean(n.toggle),r.typeCheckConfig(e,n,p),n},o._getDimension=function(){var t=n(this._element).hasClass(l.WIDTH);return t?l.WIDTH:l.HEIGHT},o._getParent=function(){var f=this,t=null,i,u;return r.isElement(this._config.parent)?(t=this._config.parent,typeof this._config.parent.jquery!="undefined"&&(t=this._config.parent[0])):t=document.querySelector(this._config.parent),i='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',u=[].slice.call(t.querySelectorAll(i)),n(u).each(function(n,t){f._addAriaAndCollapsedClass(h._getTargetFromElement(t),[t])}),t},o._addAriaAndCollapsedClass=function(i,r){if(i){var u=n(i).hasClass(t.SHOW);r.length&&n(r).toggleClass(t.COLLAPSED,!u).attr("aria-expanded",u)}},h._getTargetFromElement=function(n){var t=r.getSelectorFromElement(n);return t?document.querySelector(t):null},h._jQueryInterface=function(t){return this.each(function(){var f=n(this),r=f.data(i),e=u({},c,f.data(),typeof t=="object"&&t?t:{});if(!r&&e.toggle&&/show|hide/.test(t)&&(e.toggle=!1),r||(r=new h(this,e),f.data(i,r)),typeof t=="string"){if(typeof r[t]=="undefined")throw new TypeError('No method named "'+t+'"');r[t]()}})},f(h,null,[{key:"VERSION",get:function(){return v}},{key:"Default",get:function(){return c}}]),h}();n(document).on(s.CLICK_DATA_API,a.DATA_TOGGLE,function(t){t.currentTarget.tagName==="A"&&t.preventDefault();var u=n(this),f=r.getSelectorFromElement(this),e=[].slice.call(document.querySelectorAll(f));n(e).each(function(){var t=n(this),r=t.data(i),f=r?"toggle":u.data();h._jQueryInterface.call(t,f)})});return n.fn[e]=h._jQueryInterface,n.fn[e].Constructor=h,n.fn[e].noConflict=function(){return n.fn[e]=y,h._jQueryInterface},h}(t),y=function(n){var c="dropdown",d="4.1.3",a="bs.dropdown",s="."+a,y=".data-api",g=n.fn[c],v=27,p=32,k=9,w=38,b=40,nt=3,tt=new RegExp(w+"|"+b+"|"+v),e={HIDE:"hide"+s,HIDDEN:"hidden"+s,SHOW:"show"+s,SHOWN:"shown"+s,CLICK:"click"+s,CLICK_DATA_API:"click"+s+y,KEYDOWN_DATA_API:"keydown"+s+y,KEYUP_DATA_API:"keyup"+s+y},t={DISABLED:"disabled",SHOW:"show",DROPUP:"dropup",DROPRIGHT:"dropright",DROPLEFT:"dropleft",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",POSITION_STATIC:"position-static"},o={DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",MENU:".dropdown-menu",NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)"},l={TOP:"top-start",TOPEND:"top-end",BOTTOM:"bottom-start",BOTTOMEND:"bottom-end",RIGHT:"right-start",RIGHTEND:"right-end",LEFT:"left-start",LEFTEND:"left-end"},it={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},rt={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"},h=function(){function h(n,t){this._element=n;this._popper=null;this._config=this._getConfig(t);this._menu=this._getMenuElement();this._inNavbar=this._detectNavbar();this._addEventListeners()}var y=h.prototype;return y.toggle=function(){var u,l,s,c,f;if(!this._element.disabled&&!n(this._element).hasClass(t.DISABLED)&&(u=h._getParentFromElement(this._element),l=n(this._menu).hasClass(t.SHOW),h._clearMenus(),!l)&&(s={relatedTarget:this._element},c=n.Event(e.SHOW,s),n(u).trigger(c),!c.isDefaultPrevented())){if(!this._inNavbar){if(typeof i=="undefined")throw new TypeError("Bootstrap dropdown require Popper.js (https://popper.js.org)");f=this._element;this._config.reference==="parent"?f=u:r.isElement(this._config.reference)&&(f=this._config.reference,typeof this._config.reference.jquery!="undefined"&&(f=this._config.reference[0]));this._config.boundary!=="scrollParent"&&n(u).addClass(t.POSITION_STATIC);this._popper=new i(f,this._menu,this._getPopperConfig())}if("ontouchstart"in document.documentElement&&n(u).closest(o.NAVBAR_NAV).length===0)n(document.body).children().on("mouseover",null,n.noop);this._element.focus();this._element.setAttribute("aria-expanded",!0);n(this._menu).toggleClass(t.SHOW);n(u).toggleClass(t.SHOW).trigger(n.Event(e.SHOWN,s))}},y.dispose=function(){n.removeData(this._element,a);n(this._element).off(s);this._element=null;this._menu=null;this._popper!==null&&(this._popper.destroy(),this._popper=null)},y.update=function(){this._inNavbar=this._detectNavbar();this._popper!==null&&this._popper.scheduleUpdate()},y._addEventListeners=function(){var t=this;n(this._element).on(e.CLICK,function(n){n.preventDefault();n.stopPropagation();t.toggle()})},y._getConfig=function(t){return t=u({},this.constructor.Default,n(this._element).data(),t),r.typeCheckConfig(c,t,this.constructor.DefaultType),t},y._getMenuElement=function(){if(!this._menu){var n=h._getParentFromElement(this._element);n&&(this._menu=n.querySelector(o.MENU))}return this._menu},y._getPlacement=function(){var r=n(this._element.parentNode),i=l.BOTTOM;return r.hasClass(t.DROPUP)?(i=l.TOP,n(this._menu).hasClass(t.MENURIGHT)&&(i=l.TOPEND)):r.hasClass(t.DROPRIGHT)?i=l.RIGHT:r.hasClass(t.DROPLEFT)?i=l.LEFT:n(this._menu).hasClass(t.MENURIGHT)&&(i=l.BOTTOMEND),i},y._detectNavbar=function(){return n(this._element).closest(".navbar").length>0},y._getPopperConfig=function(){var i=this,n={},t;return typeof this._config.offset=="function"?n.fn=function(n){return n.offsets=u({},n.offsets,i._config.offset(n.offsets)||{}),n}:n.offset=this._config.offset,t={placement:this._getPlacement(),modifiers:{offset:n,flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}},this._config.display==="static"&&(t.modifiers.applyStyle={enabled:!1}),t},h._jQueryInterface=function(t){return this.each(function(){var i=n(this).data(a),r=typeof t=="object"?t:null;if(i||(i=new h(this,r),n(this).data(a,i)),typeof t=="string"){if(typeof i[t]=="undefined")throw new TypeError('No method named "'+t+'"');i[t]()}})},h._clearMenus=function(i){var u,r,l,y,c;if(!i||i.which!==nt&&(i.type!=="keyup"||i.which===k))for(u=[].slice.call(document.querySelectorAll(o.DATA_TOGGLE)),r=0,l=u.length;r<l;r++){var f=h._getParentFromElement(u[r]),v=n(u[r]).data(a),s={relatedTarget:u[r]};(i&&i.type==="click"&&(s.clickEvent=i),v)&&(y=v._menu,n(f).hasClass(t.SHOW))&&(i&&(i.type==="click"&&/input|textarea/i.test(i.target.tagName)||i.type==="keyup"&&i.which===k)&&n.contains(f,i.target)||(c=n.Event(e.HIDE,s),n(f).trigger(c),c.isDefaultPrevented())||("ontouchstart"in document.documentElement&&n(document.body).children().off("mouseover",null,n.noop),u[r].setAttribute("aria-expanded","false"),n(y).removeClass(t.SHOW),n(f).removeClass(t.SHOW).trigger(n.Event(e.HIDDEN,s))))}},h._getParentFromElement=function(n){var t,i=r.getSelectorFromElement(n);return i&&(t=document.querySelector(i)),t||n.parentNode},h._dataApiKeydownHandler=function(i){var f,e,s,u,r;if((/input|textarea/i.test(i.target.tagName)?i.which!==p&&(i.which===v||(i.which===b||i.which===w)&&!n(i.target).closest(o.MENU).length):tt.test(i.which))&&(i.preventDefault(),i.stopPropagation(),!this.disabled&&!n(this).hasClass(t.DISABLED))){if(f=h._getParentFromElement(this),e=n(f).hasClass(t.SHOW),!e&&(i.which!==v||i.which!==p)||e&&(i.which===v||i.which===p)){i.which===v&&(s=f.querySelector(o.DATA_TOGGLE),n(s).trigger("focus"));n(this).trigger("click");return}(u=[].slice.call(f.querySelectorAll(o.VISIBLE_ITEMS)),u.length!==0)&&(r=u.indexOf(i.target),i.which===w&&r>0&&r--,i.which===b&&r<u.length-1&&r++,r<0&&(r=0),u[r].focus())}},f(h,null,[{key:"VERSION",get:function(){return d}},{key:"Default",get:function(){return it}},{key:"DefaultType",get:function(){return rt}}]),h}();n(document).on(e.KEYDOWN_DATA_API,o.DATA_TOGGLE,h._dataApiKeydownHandler).on(e.KEYDOWN_DATA_API,o.MENU,h._dataApiKeydownHandler).on(e.CLICK_DATA_API+" "+e.KEYUP_DATA_API,h._clearMenus).on(e.CLICK_DATA_API,o.DATA_TOGGLE,function(t){t.preventDefault();t.stopPropagation();h._jQueryInterface.call(n(this),"toggle")}).on(e.CLICK_DATA_API,o.FORM_CHILD,function(n){n.stopPropagation()});return n.fn[c]=h._jQueryInterface,n.fn[c].Constructor=h,n.fn[c].noConflict=function(){return n.fn[c]=g,h._jQueryInterface},h}(t,i),p=function(n){var s="modal",a="4.1.3",h="bs.modal",e="."+h,v=n.fn[s],y=27,l={backdrop:!0,keyboard:!0,focus:!0,show:!0},p={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},t={HIDE:"hide"+e,HIDDEN:"hidden"+e,SHOW:"show"+e,SHOWN:"shown"+e,FOCUSIN:"focusin"+e,RESIZE:"resize"+e,CLICK_DISMISS:"click.dismiss"+e,KEYDOWN_DISMISS:"keydown.dismiss"+e,MOUSEUP_DISMISS:"mouseup.dismiss"+e,MOUSEDOWN_DISMISS:"mousedown.dismiss"+e,CLICK_DATA_API:"click"+e+".data-api"},i={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show"},o={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top"},c=function(){function v(n,t){this._config=this._getConfig(t);this._element=n;this._dialog=n.querySelector(o.DIALOG);this._backdrop=null;this._isShown=!1;this._isBodyOverflowing=!1;this._ignoreBackdropClick=!1;this._scrollbarWidth=0}var c=v.prototype;return c.toggle=function(n){return this._isShown?this.hide():this.show(n)},c.show=function(r){var u=this,f;if(!this._isTransitioning&&!this._isShown&&(n(this._element).hasClass(i.FADE)&&(this._isTransitioning=!0),f=n.Event(t.SHOW,{relatedTarget:r}),n(this._element).trigger(f),!this._isShown&&!f.isDefaultPrevented())){this._isShown=!0;this._checkScrollbar();this._setScrollbar();this._adjustDialog();n(document.body).addClass(i.OPEN);this._setEscapeEvent();this._setResizeEvent();n(this._element).on(t.CLICK_DISMISS,o.DATA_DISMISS,function(n){return u.hide(n)});n(this._dialog).on(t.MOUSEDOWN_DISMISS,function(){n(u._element).one(t.MOUSEUP_DISMISS,function(t){n(t.target).is(u._element)&&(u._ignoreBackdropClick=!0)})});this._showBackdrop(function(){return u._showElement(r)})}},c.hide=function(u){var s=this,f,e,o;(u&&u.preventDefault(),!this._isTransitioning&&this._isShown)&&(f=n.Event(t.HIDE),n(this._element).trigger(f),this._isShown&&!f.isDefaultPrevented())&&(this._isShown=!1,e=n(this._element).hasClass(i.FADE),e&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),n(document).off(t.FOCUSIN),n(this._element).removeClass(i.SHOW),n(this._element).off(t.CLICK_DISMISS),n(this._dialog).off(t.MOUSEDOWN_DISMISS),e?(o=r.getTransitionDurationFromElement(this._element),n(this._element).one(r.TRANSITION_END,function(n){return s._hideModal(n)}).emulateTransitionEnd(o)):this._hideModal())},c.dispose=function(){n.removeData(this._element,h);n(window,document,this._element,this._backdrop).off(e);this._config=null;this._element=null;this._dialog=null;this._backdrop=null;this._isShown=null;this._isBodyOverflowing=null;this._ignoreBackdropClick=null;this._scrollbarWidth=null},c.handleUpdate=function(){this._adjustDialog()},c._getConfig=function(n){return n=u({},l,n),r.typeCheckConfig(s,n,p),n},c._showElement=function(u){var f=this,o=n(this._element).hasClass(i.FADE),s,e,h;this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element);this._element.style.display="block";this._element.removeAttribute("aria-hidden");this._element.scrollTop=0;o&&r.reflow(this._element);n(this._element).addClass(i.SHOW);this._config.focus&&this._enforceFocus();s=n.Event(t.SHOWN,{relatedTarget:u});e=function(){f._config.focus&&f._element.focus();f._isTransitioning=!1;n(f._element).trigger(s)};o?(h=r.getTransitionDurationFromElement(this._element),n(this._dialog).one(r.TRANSITION_END,e).emulateTransitionEnd(h)):e()},c._enforceFocus=function(){var i=this;n(document).off(t.FOCUSIN).on(t.FOCUSIN,function(t){document!==t.target&&i._element!==t.target&&n(i._element).has(t.target).length===0&&i._element.focus()})},c._setEscapeEvent=function(){var i=this;if(this._isShown&&this._config.keyboard)n(this._element).on(t.KEYDOWN_DISMISS,function(n){n.which===y&&(n.preventDefault(),i.hide())});else this._isShown||n(this._element).off(t.KEYDOWN_DISMISS)},c._setResizeEvent=function(){var i=this;if(this._isShown)n(window).on(t.RESIZE,function(n){return i.handleUpdate(n)});else n(window).off(t.RESIZE)},c._hideModal=function(){var r=this;this._element.style.display="none";this._element.setAttribute("aria-hidden",!0);this._isTransitioning=!1;this._showBackdrop(function(){n(document.body).removeClass(i.OPEN);r._resetAdjustments();r._resetScrollbar();n(r._element).trigger(t.HIDDEN)})},c._removeBackdrop=function(){this._backdrop&&(n(this._backdrop).remove(),this._backdrop=null)},c._showBackdrop=function(u){var f=this,e=n(this._element).hasClass(i.FADE)?i.FADE:"",s,o,h;if(this._isShown&&this._config.backdrop){this._backdrop=document.createElement("div");this._backdrop.className=i.BACKDROP;e&&this._backdrop.classList.add(e);n(this._backdrop).appendTo(document.body);n(this._element).on(t.CLICK_DISMISS,function(n){if(f._ignoreBackdropClick){f._ignoreBackdropClick=!1;return}n.target===n.currentTarget&&(f._config.backdrop==="static"?f._element.focus():f.hide())});if(e&&r.reflow(this._backdrop),n(this._backdrop).addClass(i.SHOW),!u)return;if(!e){u();return}s=r.getTransitionDurationFromElement(this._backdrop);n(this._backdrop).one(r.TRANSITION_END,u).emulateTransitionEnd(s)}else!this._isShown&&this._backdrop?(n(this._backdrop).removeClass(i.SHOW),o=function(){f._removeBackdrop();u&&u()},n(this._element).hasClass(i.FADE)?(h=r.getTransitionDurationFromElement(this._backdrop),n(this._backdrop).one(r.TRANSITION_END,o).emulateTransitionEnd(h)):o()):u&&u()},c._adjustDialog=function(){var n=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&n&&(this._element.style.paddingLeft=this._scrollbarWidth+"px");this._isBodyOverflowing&&!n&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},c._resetAdjustments=function(){this._element.style.paddingLeft="";this._element.style.paddingRight=""},c._checkScrollbar=function(){var n=document.body.getBoundingClientRect();this._isBodyOverflowing=n.left+n.right<window.innerWidth;this._scrollbarWidth=this._getScrollbarWidth()},c._setScrollbar=function(){var t=this,i,r,u,f;this._isBodyOverflowing&&(i=[].slice.call(document.querySelectorAll(o.FIXED_CONTENT)),r=[].slice.call(document.querySelectorAll(o.STICKY_CONTENT)),n(i).each(function(i,r){var u=r.style.paddingRight,f=n(r).css("padding-right");n(r).data("padding-right",u).css("padding-right",parseFloat(f)+t._scrollbarWidth+"px")}),n(r).each(function(i,r){var u=r.style.marginRight,f=n(r).css("margin-right");n(r).data("margin-right",u).css("margin-right",parseFloat(f)-t._scrollbarWidth+"px")}),u=document.body.style.paddingRight,f=n(document.body).css("padding-right"),n(document.body).data("padding-right",u).css("padding-right",parseFloat(f)+this._scrollbarWidth+"px"))},c._resetScrollbar=function(){var r=[].slice.call(document.querySelectorAll(o.FIXED_CONTENT)),i,t;n(r).each(function(t,i){var r=n(i).data("padding-right");n(i).removeData("padding-right");i.style.paddingRight=r?r:""});i=[].slice.call(document.querySelectorAll(""+o.STICKY_CONTENT));n(i).each(function(t,i){var r=n(i).data("margin-right");typeof r!="undefined"&&n(i).css("margin-right",r).removeData("margin-right")});t=n(document.body).data("padding-right");n(document.body).removeData("padding-right");document.body.style.paddingRight=t?t:""},c._getScrollbarWidth=function(){var n=document.createElement("div"),t;return n.className=i.SCROLLBAR_MEASURER,document.body.appendChild(n),t=n.getBoundingClientRect().width-n.clientWidth,document.body.removeChild(n),t},v._jQueryInterface=function(t,i){return this.each(function(){var r=n(this).data(h),f=u({},l,n(this).data(),typeof t=="object"&&t?t:{});if(r||(r=new v(this,f),n(this).data(h,r)),typeof t=="string"){if(typeof r[t]=="undefined")throw new TypeError('No method named "'+t+'"');r[t](i)}else f.show&&r.show(i)})},f(v,null,[{key:"VERSION",get:function(){return a}},{key:"Default",get:function(){return l}}]),v}();n(document).on(t.CLICK_DATA_API,o.DATA_TOGGLE,function(i){var e=this,f,o=r.getSelectorFromElement(this),s,l;o&&(f=document.querySelector(o));s=n(f).data(h)?"toggle":u({},n(f).data(),n(this).data());(this.tagName==="A"||this.tagName==="AREA")&&i.preventDefault();l=n(f).one(t.SHOW,function(i){if(!i.isDefaultPrevented())l.one(t.HIDDEN,function(){n(e).is(":visible")&&e.focus()})});c._jQueryInterface.call(n(f),s,this)});return n.fn[s]=c._jQueryInterface,n.fn[s].Constructor=c,n.fn[s].noConflict=function(){return n.fn[s]=v,c._jQueryInterface},c}(t),e=function(n){var h="tooltip",y="4.1.3",c="bs.tooltip",t="."+c,p=n.fn[h],a="bs-tooltip",w=new RegExp("(^|\\s)"+a+"\\S+","g"),b={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)"},k={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},d={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"><\/div><div class="tooltip-inner"><\/div><\/div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent"},s={SHOW:"show",OUT:"out"},g={HIDE:"hide"+t,HIDDEN:"hidden"+t,SHOW:"show"+t,SHOWN:"shown"+t,INSERTED:"inserted"+t,CLICK:"click"+t,FOCUSIN:"focusin"+t,FOCUSOUT:"focusout"+t,MOUSEENTER:"mouseenter"+t,MOUSELEAVE:"mouseleave"+t},e={FADE:"fade",SHOW:"show"},v={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner",ARROW:".arrow"},o={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"},l=function(){function p(n,t){if(typeof i=="undefined")throw new TypeError("Bootstrap tooltips require Popper.js (https://popper.js.org)");this._isEnabled=!0;this._timeout=0;this._hoverState="";this._activeTrigger={};this._popper=null;this.element=n;this.config=this._getConfig(t);this.tip=null;this._setListeners()}var l=p.prototype;return l.enable=function(){this._isEnabled=!0},l.disable=function(){this._isEnabled=!1},l.toggleEnabled=function(){this._isEnabled=!this._isEnabled},l.toggle=function(t){if(this._isEnabled)if(t){var r=this.constructor.DATA_KEY,i=n(t.currentTarget).data(r);i||(i=new this.constructor(t.currentTarget,this._getDelegateConfig()),n(t.currentTarget).data(r,i));i._activeTrigger.click=!i._activeTrigger.click;i._isWithActiveTrigger()?i._enter(null,i):i._leave(null,i)}else{if(n(this.getTipElement()).hasClass(e.SHOW)){this._leave(null,this);return}this._enter(null,this)}},l.dispose=function(){clearTimeout(this._timeout);n.removeData(this.element,this.constructor.DATA_KEY);n(this.element).off(this.constructor.EVENT_KEY);n(this.element).closest(".modal").off("hide.bs.modal");this.tip&&n(this.tip).remove();this._isEnabled=null;this._timeout=null;this._hoverState=null;this._activeTrigger=null;this._popper!==null&&this._popper.destroy();this._popper=null;this.element=null;this.config=null;this.tip=null},l.show=function(){var t=this,f,l,u,o,a,h,y,c,p;if(n(this.element).css("display")==="none")throw new Error("Please use show on visible elements");if(f=n.Event(this.constructor.Event.SHOW),this.isWithContent()&&this._isEnabled){if(n(this.element).trigger(f),l=n.contains(this.element.ownerDocument.documentElement,this.element),f.isDefaultPrevented()||!l)return;if(u=this.getTipElement(),o=r.getUID(this.constructor.NAME),u.setAttribute("id",o),this.element.setAttribute("aria-describedby",o),this.setContent(),this.config.animation&&n(u).addClass(e.FADE),a=typeof this.config.placement=="function"?this.config.placement.call(this,u,this.element):this.config.placement,h=this._getAttachment(a),this.addAttachmentClass(h),y=this.config.container===!1?document.body:n(document).find(this.config.container),n(u).data(this.constructor.DATA_KEY,this),n.contains(this.element.ownerDocument.documentElement,this.tip)||n(u).appendTo(y),n(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new i(this.element,u,{placement:h,modifiers:{offset:{offset:this.config.offset},flip:{behavior:this.config.fallbackPlacement},arrow:{element:v.ARROW},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(n){n.originalPlacement!==n.placement&&t._handlePopperPlacementChange(n)},onUpdate:function(n){t._handlePopperPlacementChange(n)}}),n(u).addClass(e.SHOW),"ontouchstart"in document.documentElement)n(document.body).children().on("mouseover",null,n.noop);c=function(){t.config.animation&&t._fixTransition();var i=t._hoverState;t._hoverState=null;n(t.element).trigger(t.constructor.Event.SHOWN);i===s.OUT&&t._leave(null,t)};n(this.tip).hasClass(e.FADE)?(p=r.getTransitionDurationFromElement(this.tip),n(this.tip).one(r.TRANSITION_END,c).emulateTransitionEnd(p)):c()}},l.hide=function(t){var i=this,u=this.getTipElement(),f=n.Event(this.constructor.Event.HIDE),h=function(){i._hoverState!==s.SHOW&&u.parentNode&&u.parentNode.removeChild(u);i._cleanTipClass();i.element.removeAttribute("aria-describedby");n(i.element).trigger(i.constructor.Event.HIDDEN);i._popper!==null&&i._popper.destroy();t&&t()},c;(n(this.element).trigger(f),f.isDefaultPrevented())||(n(u).removeClass(e.SHOW),"ontouchstart"in document.documentElement&&n(document.body).children().off("mouseover",null,n.noop),this._activeTrigger[o.CLICK]=!1,this._activeTrigger[o.FOCUS]=!1,this._activeTrigger[o.HOVER]=!1,n(this.tip).hasClass(e.FADE)?(c=r.getTransitionDurationFromElement(u),n(u).one(r.TRANSITION_END,h).emulateTransitionEnd(c)):h(),this._hoverState="")},l.update=function(){this._popper!==null&&this._popper.scheduleUpdate()},l.isWithContent=function(){return Boolean(this.getTitle())},l.addAttachmentClass=function(t){n(this.getTipElement()).addClass(a+"-"+t)},l.getTipElement=function(){return this.tip=this.tip||n(this.config.template)[0],this.tip},l.setContent=function(){var t=this.getTipElement();this.setElementContent(n(t.querySelectorAll(v.TOOLTIP_INNER)),this.getTitle());n(t).removeClass(e.FADE+" "+e.SHOW)},l.setElementContent=function(t,i){var r=this.config.html;typeof i=="object"&&(i.nodeType||i.jquery)?r?n(i).parent().is(t)||t.empty().append(i):t.text(n(i).text()):t[r?"html":"text"](i)},l.getTitle=function(){var n=this.element.getAttribute("data-original-title");return n||(n=typeof this.config.title=="function"?this.config.title.call(this.element):this.config.title),n},l._getAttachment=function(n){return k[n.toUpperCase()]},l._setListeners=function(){var t=this,i=this.config.trigger.split(" ");i.forEach(function(i){if(i==="click")n(t.element).on(t.constructor.Event.CLICK,t.config.selector,function(n){return t.toggle(n)});else if(i!==o.MANUAL){var r=i===o.HOVER?t.constructor.Event.MOUSEENTER:t.constructor.Event.FOCUSIN,u=i===o.HOVER?t.constructor.Event.MOUSELEAVE:t.constructor.Event.FOCUSOUT;n(t.element).on(r,t.config.selector,function(n){return t._enter(n)}).on(u,t.config.selector,function(n){return t._leave(n)})}n(t.element).closest(".modal").on("hide.bs.modal",function(){return t.hide()})});this.config.selector?this.config=u({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},l._fixTitle=function(){var n=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||n!=="string")&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},l._enter=function(t,i){var r=this.constructor.DATA_KEY;if(i=i||n(t.currentTarget).data(r),i||(i=new this.constructor(t.currentTarget,this._getDelegateConfig()),n(t.currentTarget).data(r,i)),t&&(i._activeTrigger[t.type==="focusin"?o.FOCUS:o.HOVER]=!0),n(i.getTipElement()).hasClass(e.SHOW)||i._hoverState===s.SHOW){i._hoverState=s.SHOW;return}if(clearTimeout(i._timeout),i._hoverState=s.SHOW,!i.config.delay||!i.config.delay.show){i.show();return}i._timeout=setTimeout(function(){i._hoverState===s.SHOW&&i.show()},i.config.delay.show)},l._leave=function(t,i){var r=this.constructor.DATA_KEY;if(i=i||n(t.currentTarget).data(r),i||(i=new this.constructor(t.currentTarget,this._getDelegateConfig()),n(t.currentTarget).data(r,i)),t&&(i._activeTrigger[t.type==="focusout"?o.FOCUS:o.HOVER]=!1),!i._isWithActiveTrigger()){if(clearTimeout(i._timeout),i._hoverState=s.OUT,!i.config.delay||!i.config.delay.hide){i.hide();return}i._timeout=setTimeout(function(){i._hoverState===s.OUT&&i.hide()},i.config.delay.hide)}},l._isWithActiveTrigger=function(){for(var n in this._activeTrigger)if(this._activeTrigger[n])return!0;return!1},l._getConfig=function(t){return t=u({},this.constructor.Default,n(this.element).data(),typeof t=="object"&&t?t:{}),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),r.typeCheckConfig(h,t,this.constructor.DefaultType),t},l._getDelegateConfig=function(){var t={},n;if(this.config)for(n in this.config)this.constructor.Default[n]!==this.config[n]&&(t[n]=this.config[n]);return t},l._cleanTipClass=function(){var i=n(this.getTipElement()),t=i.attr("class").match(w);t!==null&&t.length&&i.removeClass(t.join(""))},l._handlePopperPlacementChange=function(n){var t=n.instance;this.tip=t.popper;this._cleanTipClass();this.addAttachmentClass(this._getAttachment(n.placement))},l._fixTransition=function(){var t=this.getTipElement(),i=this.config.animation;t.getAttribute("x-placement")===null&&(n(t).removeClass(e.FADE),this.config.animation=!1,this.hide(),this.show(),this.config.animation=i)},p._jQueryInterface=function(t){return this.each(function(){var i=n(this).data(c),r=typeof t=="object"&&t;if((i||!/dispose|hide/.test(t))&&(i||(i=new p(this,r),n(this).data(c,i)),typeof t=="string")){if(typeof i[t]=="undefined")throw new TypeError('No method named "'+t+'"');i[t]()}})},f(p,null,[{key:"VERSION",get:function(){return y}},{key:"Default",get:function(){return d}},{key:"NAME",get:function(){return h}},{key:"DATA_KEY",get:function(){return c}},{key:"Event",get:function(){return g}},{key:"EVENT_KEY",get:function(){return t}},{key:"DefaultType",get:function(){return b}}]),p}();return n.fn[h]=l._jQueryInterface,n.fn[h].Constructor=l,n.fn[h].noConflict=function(){return n.fn[h]=p,l._jQueryInterface},l}(t,i),w=function(n){var i="popover",a="4.1.3",r="bs.popover",t="."+r,v=n.fn[i],s="bs-popover",y=new RegExp("(^|\\s)"+s+"\\S+","g"),p=u({},e.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-header"><\/h3><div class="popover-body"><\/div><\/div>'}),w=u({},e.DefaultType,{content:"(string|element|function)"}),c={FADE:"fade",SHOW:"show"},l={TITLE:".popover-header",CONTENT:".popover-body"},b={HIDE:"hide"+t,HIDDEN:"hidden"+t,SHOW:"show"+t,SHOWN:"shown"+t,INSERTED:"inserted"+t,CLICK:"click"+t,FOCUSIN:"focusin"+t,FOCUSOUT:"focusout"+t,MOUSEENTER:"mouseenter"+t,MOUSELEAVE:"mouseleave"+t},o=function(u){function e(){return u.apply(this,arguments)||this}h(e,u);var o=e.prototype;return o.isWithContent=function(){return this.getTitle()||this._getContent()},o.addAttachmentClass=function(t){n(this.getTipElement()).addClass(s+"-"+t)},o.getTipElement=function(){return this.tip=this.tip||n(this.config.template)[0],this.tip},o.setContent=function(){var i=n(this.getTipElement()),t;this.setElementContent(i.find(l.TITLE),this.getTitle());t=this._getContent();typeof t=="function"&&(t=t.call(this.element));this.setElementContent(i.find(l.CONTENT),t);i.removeClass(c.FADE+" "+c.SHOW)},o._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},o._cleanTipClass=function(){var i=n(this.getTipElement()),t=i.attr("class").match(y);t!==null&&t.length>0&&i.removeClass(t.join(""))},e._jQueryInterface=function(t){return this.each(function(){var i=n(this).data(r),u=typeof t=="object"?t:null;if((i||!/destroy|hide/.test(t))&&(i||(i=new e(this,u),n(this).data(r,i)),typeof t=="string")){if(typeof i[t]=="undefined")throw new TypeError('No method named "'+t+'"');i[t]()}})},f(e,null,[{key:"VERSION",get:function(){return a}},{key:"Default",get:function(){return p}},{key:"NAME",get:function(){return i}},{key:"DATA_KEY",get:function(){return r}},{key:"Event",get:function(){return b}},{key:"EVENT_KEY",get:function(){return t}},{key:"DefaultType",get:function(){return w}}]),e}(e);return n.fn[i]=o._jQueryInterface,n.fn[i].Constructor=o,n.fn[i].noConflict=function(){return n.fn[i]=v,o._jQueryInterface},o}(t),b=function(n){var i="scrollspy",v="4.1.3",s="bs.scrollspy",h="."+s,y=n.fn[i],a={offset:10,method:"auto",target:""},p={offset:"number",method:"string",target:"(string|element)"},c={ACTIVATE:"activate"+h,SCROLL:"scroll"+h,LOAD_DATA_API:"load"+h+".data-api"},e={DROPDOWN_ITEM:"dropdown-item",DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active"},t={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",NAV_LIST_GROUP:".nav, .list-group",NAV_LINKS:".nav-link",NAV_ITEMS:".nav-item",LIST_ITEMS:".list-group-item",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},l={OFFSET:"offset",POSITION:"position"},o=function(){function y(i,r){var u=this;this._element=i;this._scrollElement=i.tagName==="BODY"?window:i;this._config=this._getConfig(r);this._selector=this._config.target+" "+t.NAV_LINKS+","+(this._config.target+" "+t.LIST_ITEMS+",")+(this._config.target+" "+t.DROPDOWN_ITEMS);this._offsets=[];this._targets=[];this._activeTarget=null;this._scrollHeight=0;n(this._scrollElement).on(c.SCROLL,function(n){return u._process(n)});this.refresh();this._process()}var o=y.prototype;return o.refresh=function(){var t=this,f=this._scrollElement===this._scrollElement.window?l.OFFSET:l.POSITION,i=this._config.method==="auto"?f:this._config.method,e=i===l.POSITION?this._getScrollTop():0,u;this._offsets=[];this._targets=[];this._scrollHeight=this._getScrollHeight();u=[].slice.call(document.querySelectorAll(this._selector));u.map(function(t){var u,f=r.getSelectorFromElement(t),o;return(f&&(u=document.querySelector(f)),u&&(o=u.getBoundingClientRect(),o.width||o.height))?[n(u)[i]().top+e,f]:null}).filter(function(n){return n}).sort(function(n,t){return n[0]-t[0]}).forEach(function(n){t._offsets.push(n[0]);t._targets.push(n[1])})},o.dispose=function(){n.removeData(this._element,s);n(this._scrollElement).off(h);this._element=null;this._scrollElement=null;this._config=null;this._selector=null;this._offsets=null;this._targets=null;this._activeTarget=null;this._scrollHeight=null},o._getConfig=function(t){if(t=u({},a,typeof t=="object"&&t?t:{}),typeof t.target!="string"){var f=n(t.target).attr("id");f||(f=r.getUID(i),n(t.target).attr("id",f));t.target="#"+f}return r.typeCheckConfig(i,t,p),t},o._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},o._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},o._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},o._process=function(){var t=this._getScrollTop()+this._config.offset,r=this._getScrollHeight(),e=this._config.offset+r-this._getOffsetHeight(),i,u,n,f;if(this._scrollHeight!==r&&this.refresh(),t>=e){i=this._targets[this._targets.length-1];this._activeTarget!==i&&this._activate(i);return}if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0){this._activeTarget=null;this._clear();return}for(u=this._offsets.length,n=u;n--;)f=this._activeTarget!==this._targets[n]&&t>=this._offsets[n]&&(typeof this._offsets[n+1]=="undefined"||t<this._offsets[n+1]),f&&this._activate(this._targets[n])},o._activate=function(i){var u,r;this._activeTarget=i;this._clear();u=this._selector.split(",");u=u.map(function(n){return n+'[data-target="'+i+'"],'+(n+'[href="'+i+'"]')});r=n([].slice.call(document.querySelectorAll(u.join(","))));r.hasClass(e.DROPDOWN_ITEM)?(r.closest(t.DROPDOWN).find(t.DROPDOWN_TOGGLE).addClass(e.ACTIVE),r.addClass(e.ACTIVE)):(r.addClass(e.ACTIVE),r.parents(t.NAV_LIST_GROUP).prev(t.NAV_LINKS+", "+t.LIST_ITEMS).addClass(e.ACTIVE),r.parents(t.NAV_LIST_GROUP).prev(t.NAV_ITEMS).children(t.NAV_LINKS).addClass(e.ACTIVE));n(this._scrollElement).trigger(c.ACTIVATE,{relatedTarget:i})},o._clear=function(){var i=[].slice.call(document.querySelectorAll(this._selector));n(i).filter(t.ACTIVE).removeClass(e.ACTIVE)},y._jQueryInterface=function(t){return this.each(function(){var i=n(this).data(s),r=typeof t=="object"&&t;if(i||(i=new y(this,r),n(this).data(s,i)),typeof t=="string"){if(typeof i[t]=="undefined")throw new TypeError('No method named "'+t+'"');i[t]()}})},f(y,null,[{key:"VERSION",get:function(){return v}},{key:"Default",get:function(){return a}}]),y}();n(window).on(c.LOAD_DATA_API,function(){for(var i,r=[].slice.call(document.querySelectorAll(t.DATA_SPY)),f=r.length,u=f;u--;)i=n(r[u]),o._jQueryInterface.call(i,i.data())});return n.fn[i]=o._jQueryInterface,n.fn[i].Constructor=o,n.fn[i].noConflict=function(){return n.fn[i]=y,o._jQueryInterface},o}(t),k=function(n){var u="tab",c="4.1.3",h="bs.tab",e="."+h,l=n.fn[u],o={HIDE:"hide"+e,HIDDEN:"hidden"+e,SHOW:"show"+e,SHOWN:"shown"+e,CLICK_DATA_API:"click"+e+".data-api"},t={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"},i={DROPDOWN:".dropdown",NAV_LIST_GROUP:".nav, .list-group",ACTIVE:".active",ACTIVE_UL:"> li > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"},s=function(){function u(n){this._element=n}var e=u.prototype;return e.show=function(){var a=this,e,u,f,s,v,h,c,l;this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&n(this._element).hasClass(t.ACTIVE)||n(this._element).hasClass(t.DISABLED)||(f=n(this._element).closest(i.NAV_LIST_GROUP)[0],s=r.getSelectorFromElement(this._element),f&&(v=f.nodeName==="UL"?i.ACTIVE_UL:i.ACTIVE,u=n.makeArray(n(f).find(v)),u=u[u.length-1]),h=n.Event(o.HIDE,{relatedTarget:this._element}),c=n.Event(o.SHOW,{relatedTarget:u}),u&&n(u).trigger(h),n(this._element).trigger(c),c.isDefaultPrevented()||h.isDefaultPrevented())||(s&&(e=document.querySelector(s)),this._activate(this._element,f),l=function(){var t=n.Event(o.HIDDEN,{relatedTarget:a._element}),i=n.Event(o.SHOWN,{relatedTarget:u});n(u).trigger(t);n(a._element).trigger(i)},e?this._activate(e,e.parentNode,l):l())},e.dispose=function(){n.removeData(this._element,h);this._element=null},e._activate=function(u,f,e){var l=this,s,c;s=f.nodeName==="UL"?n(f).find(i.ACTIVE_UL):n(f).children(i.ACTIVE);var o=s[0],a=e&&o&&n(o).hasClass(t.FADE),h=function(){return l._transitionComplete(u,o,e)};o&&a?(c=r.getTransitionDurationFromElement(o),n(o).one(r.TRANSITION_END,h).emulateTransitionEnd(c)):h()},e._transitionComplete=function(u,f,e){var o,s,h;f&&(n(f).removeClass(t.SHOW+" "+t.ACTIVE),o=n(f.parentNode).find(i.DROPDOWN_ACTIVE_CHILD)[0],o&&n(o).removeClass(t.ACTIVE),f.getAttribute("role")==="tab"&&f.setAttribute("aria-selected",!1));n(u).addClass(t.ACTIVE);u.getAttribute("role")==="tab"&&u.setAttribute("aria-selected",!0);r.reflow(u);n(u).addClass(t.SHOW);u.parentNode&&n(u.parentNode).hasClass(t.DROPDOWN_MENU)&&(s=n(u).closest(i.DROPDOWN)[0],s&&(h=[].slice.call(s.querySelectorAll(i.DROPDOWN_TOGGLE)),n(h).addClass(t.ACTIVE)),u.setAttribute("aria-expanded",!0));e&&e()},u._jQueryInterface=function(t){return this.each(function(){var r=n(this),i=r.data(h);if(i||(i=new u(this),r.data(h,i)),typeof t=="string"){if(typeof i[t]=="undefined")throw new TypeError('No method named "'+t+'"');i[t]()}})},f(u,null,[{key:"VERSION",get:function(){return c}}]),u}();n(document).on(o.CLICK_DATA_API,i.DATA_TOGGLE,function(t){t.preventDefault();s._jQueryInterface.call(n(this),"show")});return n.fn[u]=s._jQueryInterface,n.fn[u].Constructor=s,n.fn[u].noConflict=function(){return n.fn[u]=l,s._jQueryInterface},s}(t);(function(n){if(typeof n=="undefined")throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var t=n.fn.jquery.split(" ")[0].split("."),i=9;if(t[0]<2&&t[1]<i||t[0]===1&&t[1]===i&&t[2]<1||t[0]>=4)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0");})(t);n.Util=r;n.Alert=c;n.Button=l;n.Carousel=a;n.Collapse=v;n.Dropdown=y;n.Modal=p;n.Popover=w;n.Scrollspy=b;n.Tab=k;n.Tooltip=e;Object.defineProperty(n,"__esModule",{value:!0})});
/*! pace 1.0.2 */
(function(){var nt,ct,lt,at,vt,yt,pt,wt,a,n,bt,kt,tt,dt,gt,o,ni,r,v,y,it,s,p,ti,rt,ut,f,ii,u,t,w,ft,ri,h,et,b,i,e,ot,c,k,st,d,g,ui,fi,ht,hi,ei,l=[].slice,oi={}.hasOwnProperty,si=function(n,t){function r(){this.constructor=n}for(var i in t)oi.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},ci=[].indexOf||function(n){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===n)return t;return-1};for(it={catchupTime:100,initialRate:.03,minTime:250,ghostTime:100,maxProgressPerFrame:20,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},u=function(){var n;return null!=(n="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?n:+new Date},w=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,y=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==w&&(w=function(n){return setTimeout(n,50)},y=function(n){return clearTimeout(n)}),ri=function(n){var t,i;return t=u(),(i=function(){var r;return r=u()-t,r>=33?(t=u(),n(r,function(){return w(i)})):setTimeout(i,33-r)})()},ft=function(){var i,t,n;return n=arguments[0],t=arguments[1],i=3<=arguments.length?l.call(arguments,2):[],"function"==typeof n[t]?n[t].apply(n,i):n[t]},s=function(){var n,t,r,f,i,u,e;for(t=arguments[0],f=2<=arguments.length?l.call(arguments,1):[],u=0,e=f.length;e>u;u++)if(r=f[u])for(n in r)oi.call(r,n)&&(i=r[n],null!=t[n]&&"object"==typeof t[n]&&null!=i&&"object"==typeof i?s(t[n],i):t[n]=i);return t},ni=function(n){var i,r,u,t,f;for(r=i=0,t=0,f=n.length;f>t;t++)u=n[t],r+=Math.abs(u),i++;return r/i},ti=function(n,t){var i,r,u;if(null==n&&(n="options"),null==t&&(t=!0),u=document.querySelector("[data-pace-"+n+"]")){if(i=u.getAttribute("data-pace-"+n),!t)return i;try{return JSON.parse(i)}catch(f){return r=f,"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",r):void 0}}},pt=function(){function n(){}return n.prototype.on=function(n,t,i,r){var u;return null==r&&(r=!1),null==this.bindings&&(this.bindings={}),null==(u=this.bindings)[n]&&(u[n]=[]),this.bindings[n].push({handler:t,ctx:i,once:r})},n.prototype.once=function(n,t,i){return this.on(n,t,i,!0)},n.prototype.off=function(n,t){var i,u,r;if(null!=(null!=(u=this.bindings)?u[n]:void 0)){if(null==t)return delete this.bindings[n];for(i=0,r=[];i<this.bindings[n].length;)r.push(this.bindings[n][i].handler===t?this.bindings[n].splice(i,1):i++);return r}},n.prototype.trigger=function(){var f,r,n,e,t,o,s,i,u;if(n=arguments[0],f=2<=arguments.length?l.call(arguments,1):[],null!=(s=this.bindings)?s[n]:void 0){for(t=0,u=[];t<this.bindings[n].length;)i=this.bindings[n][t],e=i.handler,r=i.ctx,o=i.once,e.apply(null!=r?r:this,f),u.push(o?this.bindings[n].splice(t,1):t++);return u}},n}(),n=window.Pace||{},window.Pace=n,s(n,pt.prototype),t=n.options=s({},it,window.paceOptions,ti()),ht=["ajax","document","eventLag","elements"],d=0,ui=ht.length;ui>d;d++)i=ht[d],t[i]===!0&&(t[i]=it[i]);a=function(n){function t(){return hi=t.__super__.constructor.apply(this,arguments)}return si(t,n),t}(Error);ct=function(){function n(){this.progress=0}return n.prototype.getElement=function(){var n;if(null==this.el){if(n=document.querySelector(t.target),!n)throw new a;this.el=document.createElement("div");this.el.className="pace pace-active";document.body.className=document.body.className.replace(/pace-done/g,"");document.body.className+=" pace-running";this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"><\/div>\n<\/div>\n<div class="pace-activity"><\/div>';null!=n.firstChild?n.insertBefore(this.el,n.firstChild):n.appendChild(this.el)}return this.el},n.prototype.finish=function(){var n;return n=this.getElement(),n.className=n.className.replace("pace-active",""),n.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},n.prototype.update=function(n){return this.progress=n,this.render()},n.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(n){a=n}return this.el=void 0},n.prototype.render=function(){var n,f,i,e,r,o,u;if(null==document.querySelector(t.target))return!1;for(n=this.getElement(),e="translate3d("+this.progress+"%, 0, 0)",u=["webkitTransform","msTransform","transform"],r=0,o=u.length;o>r;r++)f=u[r],n.children[0].style[f]=e;return(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(n.children[0].setAttribute("data-progress-text",""+(0|this.progress)+"%"),this.progress>=100?i="99":(i=this.progress<10?"0":"",i+=0|this.progress),n.children[0].setAttribute("data-progress",""+i)),this.lastRenderedProgress=this.progress},n.prototype.done=function(){return this.progress>=100},n}();wt=function(){function n(){this.bindings={}}return n.prototype.trigger=function(n,t){var f,i,e,r,u;if(null!=this.bindings[n]){for(r=this.bindings[n],u=[],i=0,e=r.length;e>i;i++)f=r[i],u.push(f.call(this,t));return u}},n.prototype.on=function(n,t){var i;return null==(i=this.bindings)[n]&&(i[n]=[]),this.bindings[n].push(t)},n}();st=window.XMLHttpRequest;k=window.XDomainRequest;c=window.WebSocket;p=function(n,t){var u,i,r=[];for(i in t.prototype)try{r.push(null==n[i]&&"function"!=typeof t[i]?"function"==typeof Object.defineProperty?Object.defineProperty(n,i,{get:function(){return t.prototype[i]},configurable:!0,enumerable:!0}):n[i]=t.prototype[i]:void 0)}catch(f){u=f}return r};f=[];n.ignore=function(){var n,t,i;return t=arguments[0],n=2<=arguments.length?l.call(arguments,1):[],f.unshift("ignore"),i=t.apply(null,n),f.shift(),i};n.track=function(){var n,t,i;return t=arguments[0],n=2<=arguments.length?l.call(arguments,1):[],f.unshift("track"),i=t.apply(null,n),f.shift(),i};b=function(n){var i;return(null==n&&(n="GET"),"track"===f[0])?"force":!f.length&&t.ajax&&("socket"===n&&t.ajax.trackWebSockets||(i=n.toUpperCase(),ci.call(t.ajax.trackMethods,i)>=0))?!0:!1};bt=function(n){function i(){var n,r=this;i.__super__.constructor.apply(this,arguments);n=function(n){var t;return t=n.open,n.open=function(i,u){return b(i)&&r.trigger("request",{type:i,url:u,request:n}),t.apply(n,arguments)}};window.XMLHttpRequest=function(t){var i;return i=new st(t),n(i),i};try{p(window.XMLHttpRequest,st)}catch(u){}if(null!=k){window.XDomainRequest=function(){var t;return t=new k,n(t),t};try{p(window.XDomainRequest,k)}catch(u){}}if(null!=c&&t.ajax.trackWebSockets){window.WebSocket=function(n,t){var i;return i=null!=t?new c(n,t):new c(n),b("socket")&&r.trigger("request",{type:"socket",url:n,protocols:t,request:i}),i};try{p(window.WebSocket,c)}catch(u){}}}return si(i,n),i}(wt);g=null;rt=function(){return null==g&&(g=new bt),g};et=function(n){var i,r,f,u;for(u=t.ajax.ignoreURLs,r=0,f=u.length;f>r;r++)if(i=u[r],"string"==typeof i){if(-1!==n.indexOf(i))return!0}else if(i.test(n))return!0;return!1};rt().on("request",function(r){var u,o,f,e,s;return e=r.type,f=r.request,s=r.url,et(s)?void 0:n.running||t.restartOnRequestAfter===!1&&"force"!==b(e)?void 0:(o=arguments,u=t.restartOnRequestAfter||0,"boolean"==typeof u&&(u=0),setTimeout(function(){var c,t,s,h,r,u;if(c="socket"===e?f.readyState<2:0<(h=f.readyState)&&4>h){for(n.restart(),r=n.sources,u=[],t=0,s=r.length;s>t;t++){if(i=r[t],i instanceof nt){i.watch.apply(i,o);break}u.push(void 0)}return u}},u))});nt=function(){function n(){var n=this;this.elements=[];rt().on("request",function(){return n.watch.apply(n,arguments)})}return n.prototype.watch=function(n){var t,i,r,u;return r=n.type,t=n.request,u=n.url,et(u)?void 0:(i="socket"===r?new dt(t):new gt(t),this.elements.push(i))},n}();gt=function(){function n(n){var f,o,i,e,r,u,t=this;if(this.progress=0,null!=window.ProgressEvent)for(o=null,n.addEventListener("progress",function(n){return t.progress=n.lengthComputable?100*n.loaded/n.total:t.progress+(100-t.progress)/2},!1),u=["load","abort","timeout","error"],i=0,e=u.length;e>i;i++)f=u[i],n.addEventListener(f,function(){return t.progress=100},!1);else r=n.onreadystatechange,n.onreadystatechange=function(){var i;return 0===(i=n.readyState)||4===i?t.progress=100:3===n.readyState&&(t.progress=50),"function"==typeof r?r.apply(null,arguments):void 0}}return n}();dt=function(){function n(n){var r,t,u,i,f=this;for(this.progress=0,i=["error","open"],t=0,u=i.length;u>t;t++)r=i[t],n.addEventListener(r,function(){return f.progress=100},!1)}return n}();at=function(){function n(n){var r,t,u,i;for(null==n&&(n={}),this.elements=[],null==n.selectors&&(n.selectors=[]),i=n.selectors,t=0,u=i.length;u>t;t++)r=i[t],this.elements.push(new vt(r))}return n}();vt=function(){function n(n){this.selector=n;this.progress=0;this.check()}return n.prototype.check=function(){var n=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return n.check()},t.elements.checkInterval)},n.prototype.done=function(){return this.progress=100},n}();lt=function(){function n(){var n,i,t=this;this.progress=null!=(i=this.states[document.readyState])?i:100;n=document.onreadystatechange;document.onreadystatechange=function(){return null!=t.states[document.readyState]&&(t.progress=t.states[document.readyState]),"function"==typeof n?n.apply(null,arguments):void 0}}return n.prototype.states={loading:0,interactive:50,complete:100},n}();yt=function(){function n(){var i,f,r,e,n,o=this;this.progress=0;i=0;n=[];e=0;r=u();f=setInterval(function(){var s;return s=u()-r-50,r=u(),n.push(s),n.length>t.eventLag.sampleCount&&n.shift(),i=ni(n),++e>=t.eventLag.minSamples&&i<t.eventLag.lagThreshold?(o.progress=100,clearInterval(f)):o.progress=300/(i+3)},50)}return n}();tt=function(){function n(n){this.source=n;this.last=this.sinceLastUpdate=0;this.rate=t.initialRate;this.catchup=0;this.progress=this.lastProgress=0;null!=this.source&&(this.progress=ft(this.source,"progress"))}return n.prototype.tick=function(n,i){var r;return null==i&&(i=ft(this.source,"progress")),i>=100&&(this.done=!0),i===this.last?this.sinceLastUpdate+=n:(this.sinceLastUpdate&&(this.rate=(i-this.last)/this.sinceLastUpdate),this.catchup=(i-this.progress)/t.catchupTime,this.sinceLastUpdate=0,this.last=i),i>this.progress&&(this.progress+=this.catchup*n),r=1-Math.pow(this.progress/100,t.easeFactor),this.progress+=r*this.rate*n,this.progress=Math.min(this.lastProgress+t.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},n}();e=null;h=null;r=null;ot=null;o=null;v=null;n.running=!1;ut=function(){if(t.restartOnPushState)return n.restart()};null!=window.history.pushState&&(fi=window.history.pushState,window.history.pushState=function(){return ut(),fi.apply(window.history,arguments)});null!=window.history.replaceState&&(ei=window.history.replaceState,window.history.replaceState=function(){return ut(),ei.apply(window.history,arguments)});kt={ajax:nt,elements:at,document:lt,eventLag:yt};(ii=function(){var u,f,o,l,a,s,v,c;for(n.sources=e=[],s=["ajax","elements","document","eventLag"],f=0,l=s.length;l>f;f++)u=s[f],t[u]!==!1&&e.push(new kt[u](t[u]));for(c=null!=(v=t.extraSources)?v:[],o=0,a=c.length;a>o;o++)i=c[o],e.push(new i(t));return n.bar=r=new ct,h=[],ot=new tt})();n.stop=function(){return n.trigger("stop"),n.running=!1,r.destroy(),v=!0,null!=o&&("function"==typeof y&&y(o),o=null),ii()};n.restart=function(){return n.trigger("restart"),n.stop(),n.start()};n.go=function(){var f;return n.running=!0,r.render(),f=u(),v=!1,o=ri(function(o,s){var nt,p,w,it,b,c,l,et,a,y,k,d,g,rt,ut,ft;for(et=100-r.progress,p=k=0,w=!0,c=d=0,rt=e.length;rt>d;c=++d)for(i=e[c],y=null!=h[c]?h[c]:h[c]=[],b=null!=(ft=i.elements)?ft:[i],l=g=0,ut=b.length;ut>g;l=++g)it=b[l],a=null!=y[l]?y[l]:y[l]=new tt(it),w&=a.done,a.done||(p++,k+=a.tick(o));return nt=k/p,r.update(ot.tick(o,nt)),r.done()||w||v?(r.update(100),n.trigger("done"),setTimeout(function(){return r.finish(),n.running=!1,n.trigger("hide")},Math.max(t.ghostTime,Math.max(t.minTime-(u()-f),0)))):s()})};n.start=function(i){s(t,i);n.running=!0;try{r.render()}catch(u){a=u}return document.querySelector(".pace")?(n.trigger("start"),n.go()):setTimeout(n.start,50)};"function"==typeof define&&define.amd?define(["pace"],function(){return n}):"object"==typeof exports?module.exports=n:t.startOnPageLoad&&n.start()}).call(this);
/*!
 * perfect-scrollbar v1.3.0
 * (c) 2017 Hyunje Jun
 * @license MIT
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.PerfectScrollbar=t()}(this,function(){"use strict";function r(n){return getComputedStyle(n)}function i(n,t){var r,i;for(r in t)i=t[r],"number"==typeof i&&(i+="px"),n.style[r]=i;return n}function l(n){var t=document.createElement("div");return t.className=n,t}function f(n,t){if(!d)throw new Error("No element matching method supported");return d.call(n,t)}function o(n){n.remove?n.remove():n.parentNode&&n.parentNode.removeChild(n)}function y(n,t){return Array.prototype.filter.call(n.children,function(n){return f(n,t)})}function p(n,i){var r=n.element.classList,u=t.state.scrolling(i);r.contains(u)?clearTimeout(g[i]):r.add(u)}function w(n,i){g[i]=setTimeout(function(){return n.isAlive&&n.element.classList.remove(t.state.scrolling(i))},n.settings.scrollingThreshold)}function tt(n,t){p(n,t);w(n,t)}function a(n){if("function"==typeof CustomEvent)return new CustomEvent(n);var t=document.createEvent("CustomEvent");return t.initCustomEvent(n,!1,!1,void 0),t}function it(n,t,i,r,u){var s=i[0],h=i[1],o=i[2],f=i[3],c=i[4],l=i[5],e;void 0===r&&(r=!0);void 0===u&&(u=!1);e=n.element;n.reach[f]=null;e[o]<1&&(n.reach[f]="start");e[o]>n[s]-n[h]-1&&(n.reach[f]="end");t&&(e.dispatchEvent(a("ps-scroll-"+f)),t<0?e.dispatchEvent(a("ps-scroll-"+c)):t>0&&e.dispatchEvent(a("ps-scroll-"+l)),r&&tt(n,f));n.reach[f]&&(t||u)&&e.dispatchEvent(a("ps-"+f+"-reach-"+n.reach[f]))}function n(n){return parseInt(n,10)||0}function rt(n){return f(n,"input,[contenteditable]")||f(n,"select,[contenteditable]")||f(n,"textarea,[contenteditable]")||f(n,"button,[contenteditable]")}function ut(t){var i=r(t);return n(i.width)+n(i.paddingLeft)+n(i.paddingRight)+n(i.borderLeftWidth)+n(i.borderRightWidth)}function b(n,t){return n.settings.minScrollbarLength&&(t=Math.max(t,n.settings.minScrollbarLength)),n.settings.maxScrollbarLength&&(t=Math.min(t,n.settings.maxScrollbarLength)),t}function ft(n,t){var r={width:t.railXWidth},u;r.left=t.isRtl?t.negativeScrollAdjustment+n.scrollLeft+t.containerWidth-t.contentWidth:n.scrollLeft;t.isScrollbarXUsingBottom?r.bottom=t.scrollbarXBottom-n.scrollTop:r.top=t.scrollbarXTop+n.scrollTop;i(t.scrollbarXRail,r);u={top:n.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?u.right=t.isRtl?t.contentWidth-(t.negativeScrollAdjustment+n.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:t.scrollbarYRight-n.scrollLeft:u.left=t.isRtl?t.negativeScrollAdjustment+n.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:t.scrollbarYLeft+n.scrollLeft;i(t.scrollbarYRail,u);i(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth});i(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}function k(n,t){function i(t){o[f]=s+c*(t[r]-h);p(n,e);u(n);t.stopPropagation();t.preventDefault()}function l(){w(n,e);n.event.unbind(n.ownerDocument,"mousemove",i)}var a=t[0],v=t[1],r=t[2],y=t[3],b=t[4],k=t[5],f=t[6],e=t[7],o=n.element,s=null,h=null,c=null;n.event.bind(n[b],"mousedown",function(t){s=o[f];h=t[r];c=(n[v]-n[a])/(n[y]-n[k]);n.event.bind(n.ownerDocument,"mousemove",i);n.event.once(n.ownerDocument,"mouseup",l);t.stopPropagation();t.preventDefault()})}var d="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.msMatchesSelector),t={main:"ps",element:{thumb:function(n){return"ps__thumb-"+n},rail:function(n){return"ps__rail-"+n},consuming:"ps__child--consume"},state:{focus:"ps--focus",active:function(n){return"ps--active-"+n},scrolling:function(n){return"ps--scrolling-"+n}}},g={x:null,y:null},h=function(n){this.element=n;this.handlers={}},nt={isEmpty:{configurable:!0}},e;h.prototype.bind=function(n,t){void 0===this.handlers[n]&&(this.handlers[n]=[]);this.handlers[n].push(t);this.element.addEventListener(n,t,!1)};h.prototype.unbind=function(n,t){var i=this;this.handlers[n]=this.handlers[n].filter(function(r){return!(!t||r===t)||(i.element.removeEventListener(n,r,!1),!1)})};h.prototype.unbindAll=function(){var n=this;for(var t in n.handlers)n.unbind(t)};nt.isEmpty.get=function(){var n=this;return Object.keys(this.handlers).every(function(t){return 0===n.handlers[t].length})};Object.defineProperties(h.prototype,nt);e=function(){this.eventElements=[]};e.prototype.eventElement=function(n){var t=this.eventElements.filter(function(t){return t.element===n})[0];return t||(t=new h(n),this.eventElements.push(t)),t};e.prototype.bind=function(n,t,i){this.eventElement(n).bind(t,i)};e.prototype.unbind=function(n,t,i){var r=this.eventElement(n);r.unbind(t,i);r.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(r),1)};e.prototype.unbindAll=function(){this.eventElements.forEach(function(n){return n.unbindAll()});this.eventElements=[]};e.prototype.once=function(n,t,i){var r=this.eventElement(n),u=function(n){r.unbind(t,u);i(n)};r.bind(t,u)};var v=function(n,t,i,r,u){void 0===r&&(r=!0);void 0===u&&(u=!1);var f;if("top"===t)f=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==t)throw new Error("A proper axis should be provided");f=["contentWidth","containerWidth","scrollLeft","x","left","right"]}it(n,i,f,r,u)},s={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof navigator&&navigator.msMaxTouchPoints,isChrome:"undefined"!=typeof navigator&&/Chrome/i.test(navigator&&navigator.userAgent)},u=function(i){var r=i.element;i.containerWidth=r.clientWidth;i.containerHeight=r.clientHeight;i.contentWidth=r.scrollWidth;i.contentHeight=r.scrollHeight;r.contains(i.scrollbarXRail)||(y(r,t.element.rail("x")).forEach(function(n){return o(n)}),r.appendChild(i.scrollbarXRail));r.contains(i.scrollbarYRail)||(y(r,t.element.rail("y")).forEach(function(n){return o(n)}),r.appendChild(i.scrollbarYRail));!i.settings.suppressScrollX&&i.containerWidth+i.settings.scrollXMarginOffset<i.contentWidth?(i.scrollbarXActive=!0,i.railXWidth=i.containerWidth-i.railXMarginWidth,i.railXRatio=i.containerWidth/i.railXWidth,i.scrollbarXWidth=b(i,n(i.railXWidth*i.containerWidth/i.contentWidth)),i.scrollbarXLeft=n((i.negativeScrollAdjustment+r.scrollLeft)*(i.railXWidth-i.scrollbarXWidth)/(i.contentWidth-i.containerWidth))):i.scrollbarXActive=!1;!i.settings.suppressScrollY&&i.containerHeight+i.settings.scrollYMarginOffset<i.contentHeight?(i.scrollbarYActive=!0,i.railYHeight=i.containerHeight-i.railYMarginHeight,i.railYRatio=i.containerHeight/i.railYHeight,i.scrollbarYHeight=b(i,n(i.railYHeight*i.containerHeight/i.contentHeight)),i.scrollbarYTop=n(r.scrollTop*(i.railYHeight-i.scrollbarYHeight)/(i.contentHeight-i.containerHeight))):i.scrollbarYActive=!1;i.scrollbarXLeft>=i.railXWidth-i.scrollbarXWidth&&(i.scrollbarXLeft=i.railXWidth-i.scrollbarXWidth);i.scrollbarYTop>=i.railYHeight-i.scrollbarYHeight&&(i.scrollbarYTop=i.railYHeight-i.scrollbarYHeight);ft(r,i);i.scrollbarXActive?r.classList.add(t.state.active("x")):(r.classList.remove(t.state.active("x")),i.scrollbarXWidth=0,i.scrollbarXLeft=0,r.scrollLeft=0);i.scrollbarYActive?r.classList.add(t.state.active("y")):(r.classList.remove(t.state.active("y")),i.scrollbarYHeight=0,i.scrollbarYTop=0,r.scrollTop=0)},et={"click-rail":function(n){n.event.bind(n.scrollbarY,"mousedown",function(n){return n.stopPropagation()});n.event.bind(n.scrollbarYRail,"mousedown",function(t){var i=t.pageY-window.pageYOffset-n.scrollbarYRail.getBoundingClientRect().top>n.scrollbarYTop?1:-1;n.element.scrollTop+=i*n.containerHeight;u(n);t.stopPropagation()});n.event.bind(n.scrollbarX,"mousedown",function(n){return n.stopPropagation()});n.event.bind(n.scrollbarXRail,"mousedown",function(t){var i=t.pageX-window.pageXOffset-n.scrollbarXRail.getBoundingClientRect().left>n.scrollbarXLeft?1:-1;n.element.scrollLeft+=i*n.containerWidth;u(n);t.stopPropagation()})},"drag-thumb":function(n){k(n,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x"]);k(n,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y"])},keyboard:function(n){function i(i,r){var f=t.scrollTop,u;if(0===i){if(!n.scrollbarYActive)return!1;if(0===f&&r>0||f>=n.contentHeight-n.containerHeight&&r<0)return!n.settings.wheelPropagation}if(u=t.scrollLeft,0===r){if(!n.scrollbarXActive)return!1;if(0===u&&i<0||u>=n.contentWidth-n.containerWidth&&i>0)return!n.settings.wheelPropagation}return!0}var t=n.element,r=function(){return f(t,":hover")},e=function(){return f(n.scrollbarX,":focus")||f(n.scrollbarY,":focus")};n.event.bind(n.ownerDocument,"keydown",function(f){var s,h,o;if(!(f.isDefaultPrevented&&f.isDefaultPrevented()||f.defaultPrevented)&&(r()||e())){if(s=document.activeElement?document.activeElement:n.ownerDocument.activeElement,s){if("IFRAME"===s.tagName)s=s.contentDocument.activeElement;else for(;s.shadowRoot;)s=s.shadowRoot.activeElement;if(rt(s))return}h=0;o=0;switch(f.which){case 37:h=f.metaKey?-n.contentWidth:f.altKey?-n.containerWidth:-30;break;case 38:o=f.metaKey?n.contentHeight:f.altKey?n.containerHeight:30;break;case 39:h=f.metaKey?n.contentWidth:f.altKey?n.containerWidth:30;break;case 40:o=f.metaKey?-n.contentHeight:f.altKey?-n.containerHeight:-30;break;case 32:o=f.shiftKey?n.containerHeight:-n.containerHeight;break;case 33:o=n.containerHeight;break;case 34:o=-n.containerHeight;break;case 36:o=n.contentHeight;break;case 35:o=-n.contentHeight;break;default:return}n.settings.suppressScrollX&&0!==h||n.settings.suppressScrollY&&0!==o||(t.scrollTop-=o,t.scrollLeft+=h,u(n),i(h,o)&&f.preventDefault())}})},wheel:function(n){function e(t,r){var u=0===i.scrollTop,f=i.scrollTop+i.offsetHeight===i.scrollHeight,e=0===i.scrollLeft,o=i.scrollLeft+i.offsetWidth===i.offsetWidth;return!(Math.abs(r)>Math.abs(t)?u||f:e||o)||!n.settings.wheelPropagation}function o(n){var t=n.deltaX,i=-1*n.deltaY;return void 0!==t&&void 0!==i||(t=n.wheelDeltaX/-6,i=n.wheelDeltaY/6),n.deltaMode&&1===n.deltaMode&&(t*=10,i*=10),t!==t&&i!==i&&(t=0,i=n.wheelDelta),n.shiftKey?[-i,-t]:[t,i]}function h(n,u,f){var e,o,h,c;if(!s.isWebKit&&i.querySelector("select:focus"))return!0;if(!i.contains(n))return!1;for(e=n;e&&e!==i;){if(e.classList.contains(t.element.consuming)||(o=r(e),[o.overflow,o.overflowX,o.overflowY].join("").match(/(scroll|auto)/)&&((h=e.scrollHeight-e.clientHeight,h>0&&!(0===e.scrollTop&&f>0||e.scrollTop===h&&f<0))||(c=e.scrollLeft-e.clientWidth,c>0&&!(0===e.scrollLeft&&u<0||e.scrollLeft===c&&u>0)))))return!0;e=e.parentNode}return!1}function f(t){var c=o(t),r=c[0],f=c[1],s;h(t.target,r,f)||(s=!1,n.settings.useBothWheelAxes?n.scrollbarYActive&&!n.scrollbarXActive?(f?i.scrollTop-=f*n.settings.wheelSpeed:i.scrollTop+=r*n.settings.wheelSpeed,s=!0):n.scrollbarXActive&&!n.scrollbarYActive&&(r?i.scrollLeft+=r*n.settings.wheelSpeed:i.scrollLeft-=f*n.settings.wheelSpeed,s=!0):(i.scrollTop-=f*n.settings.wheelSpeed,i.scrollLeft+=r*n.settings.wheelSpeed),u(n),(s=s||e(r,f))&&!t.ctrlKey&&(t.stopPropagation(),t.preventDefault()))}var i=n.element;void 0!==window.onwheel?n.event.bind(i,"wheel",f):void 0!==window.onmousewheel&&n.event.bind(i,"mousewheel",f)},touch:function(n){function w(t,r){var u=i.scrollTop,f=i.scrollLeft,e=Math.abs(t),o=Math.abs(r);if(o>e){if(r<0&&u===n.contentHeight-n.containerHeight||r>0&&0===u)return 0===window.scrollY&&r>0&&s.isChrome}else if(e>o&&(t<0&&f===n.contentWidth-n.containerWidth||t>0&&0===f))return!0;return!0}function v(t,r){i.scrollTop-=r;i.scrollLeft-=t;u(n)}function y(n){return n.targetTouches?n.targetTouches[0]:n}function p(n){return!(n.pointerType&&"pen"===n.pointerType&&0===n.buttons||(!n.targetTouches||1!==n.targetTouches.length)&&(!n.pointerType||"mouse"===n.pointerType||n.pointerType===n.MSPOINTER_TYPE_MOUSE))}function h(n){if(p(n)){var t=y(n);o.pageX=t.pageX;o.pageY=t.pageY;a=(new Date).getTime();null!==e&&clearInterval(e)}}function b(n,u,f){var e,o,s,h;if(!i.contains(n))return!1;for(e=n;e&&e!==i;){if(e.classList.contains(t.element.consuming)||(o=r(e),[o.overflow,o.overflowX,o.overflowY].join("").match(/(scroll|auto)/)&&((s=e.scrollHeight-e.clientHeight,s>0&&!(0===e.scrollTop&&f>0||e.scrollTop===s&&f<0))||(h=e.scrollLeft-e.clientWidth,h>0&&!(0===e.scrollLeft&&u<0||e.scrollLeft===h&&u>0)))))return!0;e=e.parentNode}return!1}function c(n){var e,r;if(p(n)){var s=y(n),u={pageX:s.pageX,pageY:s.pageY},t=u.pageX-o.pageX,i=u.pageY-o.pageY;if(b(n.target,t,i))return;v(t,i);o=u;e=(new Date).getTime();r=e-a;r>0&&(f.x=t/r,f.y=i/r,a=e);w(t,i)&&n.preventDefault()}}function l(){n.settings.swipeEasing&&(clearInterval(e),e=setInterval(function(){n.isInitialized?clearInterval(e):f.x||f.y?Math.abs(f.x)<.01&&Math.abs(f.y)<.01?clearInterval(e):(v(30*f.x,30*f.y),f.x*=.8,f.y*=.8):clearInterval(e)},10))}if(s.supportsTouch||s.supportsIePointer){var i=n.element,o={},a=0,f={},e=null;s.supportsTouch?(n.event.bind(i,"touchstart",h),n.event.bind(i,"touchmove",c),n.event.bind(i,"touchend",l)):s.supportsIePointer&&(window.PointerEvent?(n.event.bind(i,"pointerdown",h),n.event.bind(i,"pointermove",c),n.event.bind(i,"pointerup",l)):window.MSPointerEvent&&(n.event.bind(i,"MSPointerDown",h),n.event.bind(i,"MSPointerMove",c),n.event.bind(i,"MSPointerUp",l)))}}},c=function(f,o){var c=this,a,v,y,s,h;if(void 0===o&&(o={}),"string"==typeof f&&(f=document.querySelector(f)),!f||!f.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=f;f.classList.add(t.main);this.settings={handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1};for(a in o)c.settings[a]=o[a];this.containerWidth=null;this.containerHeight=null;this.contentWidth=null;this.contentHeight=null;v=function(){return f.classList.add(t.state.focus)};y=function(){return f.classList.remove(t.state.focus)};this.isRtl="rtl"===r(f).direction;this.isNegativeScroll=function(){var t=f.scrollLeft,n=null;return f.scrollLeft=-1,n=f.scrollLeft<0,f.scrollLeft=t,n}();this.negativeScrollAdjustment=this.isNegativeScroll?f.scrollWidth-f.clientWidth:0;this.event=new e;this.ownerDocument=f.ownerDocument||document;this.scrollbarXRail=l(t.element.rail("x"));f.appendChild(this.scrollbarXRail);this.scrollbarX=l(t.element.thumb("x"));this.scrollbarXRail.appendChild(this.scrollbarX);this.scrollbarX.setAttribute("tabindex",0);this.event.bind(this.scrollbarX,"focus",v);this.event.bind(this.scrollbarX,"blur",y);this.scrollbarXActive=null;this.scrollbarXWidth=null;this.scrollbarXLeft=null;s=r(this.scrollbarXRail);this.scrollbarXBottom=parseInt(s.bottom,10);isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=n(s.top)):this.isScrollbarXUsingBottom=!0;this.railBorderXWidth=n(s.borderLeftWidth)+n(s.borderRightWidth);i(this.scrollbarXRail,{display:"block"});this.railXMarginWidth=n(s.marginLeft)+n(s.marginRight);i(this.scrollbarXRail,{display:""});this.railXWidth=null;this.railXRatio=null;this.scrollbarYRail=l(t.element.rail("y"));f.appendChild(this.scrollbarYRail);this.scrollbarY=l(t.element.thumb("y"));this.scrollbarYRail.appendChild(this.scrollbarY);this.scrollbarY.setAttribute("tabindex",0);this.event.bind(this.scrollbarY,"focus",v);this.event.bind(this.scrollbarY,"blur",y);this.scrollbarYActive=null;this.scrollbarYHeight=null;this.scrollbarYTop=null;h=r(this.scrollbarYRail);this.scrollbarYRight=parseInt(h.right,10);isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=n(h.left)):this.isScrollbarYUsingRight=!0;this.scrollbarYOuterWidth=this.isRtl?ut(this.scrollbarY):null;this.railBorderYWidth=n(h.borderTopWidth)+n(h.borderBottomWidth);i(this.scrollbarYRail,{display:"block"});this.railYMarginHeight=n(h.marginTop)+n(h.marginBottom);i(this.scrollbarYRail,{display:""});this.railYHeight=null;this.railYRatio=null;this.reach={x:f.scrollLeft<=0?"start":f.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:f.scrollTop<=0?"start":f.scrollTop>=this.contentHeight-this.containerHeight?"end":null};this.isAlive=!0;this.settings.handlers.forEach(function(n){return et[n](c)});this.lastScrollTop=f.scrollTop;this.lastScrollLeft=f.scrollLeft;this.event.bind(this.element,"scroll",function(n){return c.onScroll(n)});u(this)};return c.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,i(this.scrollbarXRail,{display:"block"}),i(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=n(r(this.scrollbarXRail).marginLeft)+n(r(this.scrollbarXRail).marginRight),this.railYMarginHeight=n(r(this.scrollbarYRail).marginTop)+n(r(this.scrollbarYRail).marginBottom),i(this.scrollbarXRail,{display:"none"}),i(this.scrollbarYRail,{display:"none"}),u(this),v(this,"top",0,!1,!0),v(this,"left",0,!1,!0),i(this.scrollbarXRail,{display:""}),i(this.scrollbarYRail,{display:""}))},c.prototype.onScroll=function(){this.isAlive&&(u(this),v(this,"top",this.element.scrollTop-this.lastScrollTop),v(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=this.element.scrollTop,this.lastScrollLeft=this.element.scrollLeft)},c.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),o(this.scrollbarX),o(this.scrollbarY),o(this.scrollbarXRail),o(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},c.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(n){return!n.match(/^ps([-_].+|)$/)}).join(" ")},c});
/*!
  * CoreUI v2.0.0 (https://coreui.io)
  * Copyright 2018 ukasz Holeczek
  * Licensed under MIT (https://coreui.io)
  */
if(!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("jquery"),require("perfect-scrollbar")):"function"==typeof define&&define.amd?define(["exports","jquery","perfect-scrollbar"],t):t(n.coreui={},n.jQuery,n.PerfectScrollbar)}(this,function(n,t,i){"use strict";function et(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function p(n,t,i){return t&&et(n.prototype,t),i&&et(n,i),n}t=t&&t.hasOwnProperty("default")?t.default:t;i=i&&i.hasOwnProperty("default")?i.default:i;var u,o,w,ot,b,k,st,ht,d,g,ct,lt,nt,a,e,s,tt,at,it,vt,yt,pt,h,r,c,rt,wt,bt,kt,ut,y,f,ft,dt,gt,ni,ti,v,ii,ri,ui,fi,ei,l,si=(o="ajaxLoad",w="coreui.ajaxLoad",ot=(u=t).fn[o],b="active",k="open",st="view-script",ht="click",d=".sidebar-nav .nav-dropdown",g=".sidebar-nav .nav-link",ct=".sidebar-nav .nav-item",lt=".view-script",nt={defaultPage:"main.html",errorPage:"404.html",subpagesDirectory:"views/"},a=function(){function t(n,t){this._config=this._getConfig(t);this._element=n;var i=location.hash.replace(/^#/,"");""!==i?this.setUpUrl(i):this.setUpUrl(this._config.defaultPage);this._addEventListeners()}var n=t.prototype;return n.loadPage=function(n){var i=this._element,t=this._config;u.ajax({type:"GET",url:t.subpagesDirectory+n,dataType:"html",beforeSend:function(){u(lt).remove()},success:function(t){var r=document.createElement("div"),f;r.innerHTML=t;f=Array.from(r.querySelectorAll("script")).map(function(n){return n.attributes.getNamedItem("src").nodeValue});r.querySelectorAll("script").forEach(function(n){return n.parentNode.removeChild(n)});u("body").animate({scrollTop:0},0);u(i).html(r);f.length&&function t(n,i){void 0===i&&(i=0);var r=document.createElement("script");r.type="text/javascript";r.src=n[i];r.className=st;r.onload=r.onreadystatechange=function(){this.readyState&&"complete"!==this.readyState||n.length>i+1&&t(n,i+1)};document.getElementsByTagName("body")[0].appendChild(r)}(f);window.location.hash=n},error:function(){window.location.href=t.errorPage}})},n.setUpUrl=function(n){u(g).removeClass(b);u(d).removeClass(k);u(d+':has(a[href="'+n.replace(/^\//,"").split("?")[0]+'"])').addClass(k);u(ct+' a[href="'+n.replace(/^\//,"").split("?")[0]+'"]').addClass(b);this.loadPage(n)},n.loadBlank=function(n){window.open(n)},n.loadTop=function(n){window.location=n},n._getConfig=function(n){return Object.assign({},nt,n)},n._addEventListeners=function(){var n=this;u(document).on(ht,g+'[href!="#"]',function(t){t.preventDefault();t.stopPropagation();"_top"===t.currentTarget.target?n.loadTop(t.currentTarget.href):"_blank"===t.currentTarget.target?n.loadBlank(t.currentTarget.href):n.setUpUrl(t.currentTarget.pathname)})},t._jQueryInterface=function(n){return this.each(function(){var i=u(this).data(w);i||(i=new t(this,"object"==typeof n&&n),u(this).data(w,i))})},p(t,null,[{key:"VERSION",get:function(){return"2.0.0"}},{key:"Default",get:function(){return nt}}]),t}(),u.fn[o]=a._jQueryInterface,u.fn[o].Constructor=a,u.fn[o].noConflict=function(){return u.fn[o]=ot,a._jQueryInterface},a),oi=function(n,t){var r=t.indexOf(n),i=t.slice(0,r+1);-1!==i.map(function(n){return document.body.classList.contains(n)}).indexOf(!0)?i.map(function(n){return document.body.classList.remove(n)}):document.body.classList.add(n)},hi=(s="aside-menu",tt="coreui.aside-menu",at=(e=t).fn[s],it={CLICK:"click",LOAD_DATA_API:"load.coreui.aside-menu.data-api",TOGGLE:"toggle"},vt=".aside-menu",yt=".aside-menu-toggler",pt=["aside-menu-show","aside-menu-sm-show","aside-menu-md-show","aside-menu-lg-show","aside-menu-xl-show"],h=function(){function n(n){this._element=n;this._addEventListeners()}return n.prototype._addEventListeners=function(){e(yt).on(it.CLICK,function(n){n.preventDefault();n.stopPropagation();var t=n.currentTarget.dataset.toggle;oi(t,pt)})},n._jQueryInterface=function(){return this.each(function(){var i=e(this),t=i.data(tt);t||(t=new n(this),i.data(tt,t))})},p(n,null,[{key:"VERSION",get:function(){return"2.0.0"}}]),n}(),e(window).on(it.LOAD_DATA_API,function(){var n=e(vt);h._jQueryInterface.call(n)}),e.fn[s]=h._jQueryInterface,e.fn[s].Constructor=h,e.fn[s].noConflict=function(){return e.fn[s]=at,h._jQueryInterface},h),ci=(c="sidebar",rt="coreui.sidebar",wt=(r=t).fn[c],bt="active",kt="brand-minimized",ut="open",y="sidebar-minimized",f={CLICK:"click",DESTROY:"destroy",INIT:"init",LOAD_DATA_API:"load.coreui.sidebar.data-api",TOGGLE:"toggle"},ft="body",dt=".brand-minimizer",gt=".nav-dropdown-toggle",ni=".nav-dropdown-items",ti=".nav-link",v=".sidebar-nav",ii=".sidebar-nav > .nav",ri=".sidebar",ui=".sidebar-minimizer",fi=".sidebar-toggler",ei=["sidebar-show","sidebar-sm-show","sidebar-md-show","sidebar-lg-show","sidebar-xl-show"],l=function(){function n(n){this._element=n;this.perfectScrollbar(f.INIT);this.setActiveLink();this._addEventListeners()}var t=n.prototype;return t.perfectScrollbar=function(n){"undefined"!=typeof i&&(n!==f.INIT||document.body.classList.contains(y)||new i(document.querySelector(v),{suppressScrollX:!0}),n===f.DESTROY&&new i(document.querySelector(v),{suppressScrollX:!0}).destroy(),n===f.TOGGLE&&(document.body.classList.contains(y)?new i(document.querySelector(v),{suppressScrollX:!0}).destroy():new i(document.querySelector(v),{suppressScrollX:!0})))},t.setActiveLink=function(){r(ii).find(ti).each(function(n,t){var u=t,i=String(window.location).split("?")[0];"#"===i.substr(i.length-1)&&(i=i.slice(0,-1));r(r(u))[0].href===i&&r(u).addClass(bt).parents(ni).add(u).each(function(n,t){r(u=t).parent().addClass(ut)})})},t._addEventListeners=function(){var n=this;r(dt).on(f.CLICK,function(n){n.preventDefault();n.stopPropagation();r(ft).toggleClass(kt)});r(gt).on(f.CLICK,function(n){n.preventDefault();n.stopPropagation();var t=n.target;r(t).parent().toggleClass(ut)});r(ui).on(f.CLICK,function(t){t.preventDefault();t.stopPropagation();r(ft).toggleClass(y);n.perfectScrollbar(f.TOGGLE)});r(fi).on(f.CLICK,function(n){n.preventDefault();n.stopPropagation();var t=n.currentTarget.dataset.toggle;oi(t,ei)})},n._jQueryInterface=function(){return this.each(function(){var i=r(this),t=i.data(rt);t||(t=new n(this),i.data(rt,t))})},p(n,null,[{key:"VERSION",get:function(){return"2.0.0"}}]),n}(),r(window).on(f.LOAD_DATA_API,function(){var n=r(ri);l._jQueryInterface.call(n)}),r.fn[c]=l._jQueryInterface,r.fn[c].Constructor=l,r.fn[c].noConflict=function(){return r.fn[c]=wt,l._jQueryInterface},l);Object.entries||(Object.entries=function(n){for(var i=Object.keys(n),t=i.length,r=new Array(t);t--;)r[t]=[i[t],n[i[t]]];return r});!function(n){if("undefined"==typeof n)throw new TypeError("CoreUI's JavaScript requires jQuery. jQuery must be included before CoreUI's JavaScript.");var t=n.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1===t[0]&&9===t[1]&&t[2]<1||4<=t[0])throw new Error("CoreUI's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0");}(t);window.getStyle=function(n,t){var u,i,r;return void 0===t&&(t=document.body),u=n.match(/^--.*/i)&&Boolean(document.documentMode)&&10<=document.documentMode?(i={},0===(r=Object.entries(document.styleSheets).filter(function(n){return":root"===n[1].cssText.substring(0,5)})).length&&(r=Object.entries(document.styleSheets)),Object.entries(r[0][1].cssRules).filter(function(n){return".ie-custom-properties"===n[1].selectorText})[0][1].style.cssText.split(";").forEach(function(n){if(n){var t=n.split(": ")[0],r=n.split(": ")[1];i["--"+t.trim()]=r.trim()}}),i)[n]:window.getComputedStyle(t,null).getPropertyValue(n).replace(/^\s/,""),u};window.hexToRgb=function(n){if("undefined"==typeof n)throw new Error("Hex color is not defined");var t,i,r;if(!n.match(/^#(?:[0-9a-f]{3}){1,2}$/i))throw new Error(n+" is not a valid hex color");return 7===n.length?(t=parseInt(n.substring(1,3),16),i=parseInt(n.substring(3,5),16),r=parseInt(n.substring(5,7),16)):(t=parseInt(n.substring(1,2),16),i=parseInt(n.substring(2,3),16),r=parseInt(n.substring(3,5),16)),"rgba("+t+", "+i+", "+r+")"};window.hexToRgba=function(n,t){if(void 0===t&&(t=100),"undefined"==typeof n)throw new Error("Hex color is not defined");var i,r,u;if(!n.match(/^#(?:[0-9a-f]{3}){1,2}$/i))throw new Error(n+" is not a valid hex color");return 7===n.length?(i=parseInt(n.substring(1,3),16),r=parseInt(n.substring(3,5),16),u=parseInt(n.substring(5,7),16)):(i=parseInt(n.substring(1,2),16),r=parseInt(n.substring(2,3),16),u=parseInt(n.substring(3,5),16)),"rgba("+i+", "+r+", "+u+", "+t/100+")"};window.rgbToHex=function(n){var t;if("undefined"==typeof n)throw new Error("Hex color is not defined");if(t=n.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),!t)throw new Error(n+" is not a valid rgb color");var i="0"+parseInt(t[1],10).toString(16),r="0"+parseInt(t[2],10).toString(16),u="0"+parseInt(t[3],10).toString(16);return"#"+i.slice(-2)+r.slice(-2)+u.slice(-2)};n.AjaxLoad=si;n.AsideMenu=hi;n.Sidebar=ci;Object.defineProperty(n,"__esModule",{value:!0})}),typeof dhx=="undefined"&&(window.dhx=window.dhx4={version:"5.1.0",skin:null,skinDetect:function(n){var t=Math.floor(dhx4.readFromCss(n+"_skin_detect")/10)*10;return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace",40:"material"}[t]||null},readFromCss:function(n,t,i){var r=document.createElement("DIV"),u;return r.className=n,document.body.firstChild!=null?document.body.insertBefore(r,document.body.firstChild):document.body.appendChild(r),typeof i=="string"&&(r.innerHTML=i),u=r[t||"offsetWidth"],r.parentNode.removeChild(r),r=null,u},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var n=this.first();for(var t in this.data)n=Math.max(n,this.data[t]);return n},reserve:function(n){return this.data[n]=this.last()+this.step,this.data[n]},clear:function(n){this.data[n]!=null&&(this.data[n]=null,delete this.data[n])}},s2b:function(n){return typeof n=="string"&&(n=n.toLowerCase()),n==!0||n==1||n=="true"||n=="1"||n=="yes"||n=="y"||n=="on"},s2j:function(n){var t=null;dhx4.temp=null;try{eval("dhx4.temp="+n)}catch(i){dhx4.temp=null}return t=dhx4.temp,dhx4.temp=null,t},absLeft:function(n){return typeof n=="string"&&(n=document.getElementById(n)),this.getOffset(n).left},absTop:function(n){return typeof n=="string"&&(n=document.getElementById(n)),this.getOffset(n).top},_aOfs:function(n){for(var t=0,i=0;n;)t=t+parseInt(n.offsetTop),i=i+parseInt(n.offsetLeft),n=n.offsetParent;return{top:t,left:i}},_aOfsRect:function(n){var r=n.getBoundingClientRect(),t=document.body,i=document.documentElement,u=window.pageYOffset||i.scrollTop||t.scrollTop,f=window.pageXOffset||i.scrollLeft||t.scrollLeft,e=i.clientTop||t.clientTop||0,o=i.clientLeft||t.clientLeft||0,s=r.top+u-e,h=r.left+f-o;return{top:Math.round(s),left:Math.round(h)}},getOffset:function(n){return n.getBoundingClientRect?this._aOfsRect(n):this._aOfs(n)},_isObj:function(n){return n!=null&&typeof n=="object"&&typeof n.length=="undefined"},_copyObj:function(n){var i,t;if(this._isObj(n)){i={};for(t in n)i[t]=typeof n[t]=="object"&&n[t]!=null?this._copyObj(n[t]):n[t]}else for(i=[],t=0;t<n.length;t++)i[t]=typeof n[t]=="object"&&n[t]!=null?this._copyObj(n[t]):n[t];return i},screenDim:function(){var t=navigator.userAgent.indexOf("MSIE")>=0,n={};return n.left=document.body.scrollLeft,n.right=n.left+(window.innerWidth||document.body.clientWidth),n.top=Math.max((t?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop),n.bottom=n.top+(t?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight),n},selectTextRange:function(n,t,i){var r,u;if(n=typeof n=="string"?document.getElementById(n):n,r=n.value.length,t=Math.max(Math.min(t,r),0),i=Math.min(i,r),n.setSelectionRange)try{n.setSelectionRange(t,i)}catch(f){}else if(n.createTextRange){u=n.createTextRange();u.moveStart("character",t);u.moveEnd("character",i-r);try{u.select()}catch(f){}}},transData:null,transDetect:function(){var n,t;if(this.transData==null){this.transData={transProp:!1,transEv:null};n={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(t in n)this.transData.transProp==!1&&document.documentElement.style[t]!=null&&(this.transData.transProp=t,this.transData.transEv=n[t]);n=null}return this.transData},_xmlNodeValue:function(n){for(var i="",t=0;t<n.childNodes.length;t++)i+=n.childNodes[t].nodeValue!=null?n.childNodes[t].nodeValue.toString().replace(/^[\n\r\s]{0,}/,"").replace(/[\n\r\s]{0,}$/,""):"";return i}},window.dhx4.isIE=navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE6=window.XMLHttpRequest==null&&navigator.userAgent.indexOf("MSIE")>=0,window.dhx4.isIE7=navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0,window.dhx4.isIE8=navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE9=navigator.userAgent.indexOf("MSIE 9.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE10=navigator.userAgent.indexOf("MSIE 10.0")>=0&&navigator.userAgent.indexOf("Trident")>=0&&window.navigator.pointerEnabled!=!0,window.dhx4.isIE11=navigator.userAgent.indexOf("Trident")>=0&&window.navigator.pointerEnabled==!0,window.dhx4.isEdge=navigator.userAgent.indexOf("Edge")>=0,window.dhx4.isOpera=navigator.userAgent.indexOf("Opera")>=0,window.dhx4.isChrome=navigator.userAgent.indexOf("Chrome")>=0&&!window.dhx4.isEdge,window.dhx4.isKHTML=(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0)&&!window.dhx4.isEdge,window.dhx4.isFF=navigator.userAgent.indexOf("Firefox")>=0,window.dhx4.isIPad=navigator.userAgent.search(/iPad/gi)>=0,window.dhx4.dnd={evs:{},p_en:(window.dhx4.isIE||window.dhx4.isEdge)&&(window.navigator.pointerEnabled||window.navigator.msPointerEnabled),_mTouch:function(n){return window.dhx4.isIE10&&n.pointerType==n.MSPOINTER_TYPE_MOUSE||window.dhx4.isIE11&&n.pointerType=="mouse"||window.dhx4.isEdge&&n.pointerType=="mouse"},_touchOn:function(n){n==null&&(n=document.body);n.style.touchAction=n.style.msTouchAction="";n=null},_touchOff:function(n){n==null&&(n=document.body);n.style.touchAction=n.style.msTouchAction="none";n=null}},window.navigator.pointerEnabled==!0?window.dhx4.dnd.evs={start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled==!0?window.dhx4.dnd.evs={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:typeof addEventListener!="undefined"&&(window.dhx4.dnd.evs={start:"touchstart",move:"touchmove",end:"touchend"})),typeof window.dhx4.template=="undefined"&&(window.dhx4.trim=function(n){return String(n).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")},window.dhx4.template=function(n,t,i){return n.replace(/#([a-z0-9_-]{1,})(\|([^#]*))?#/gi,function(){var f=arguments[1],u=window.dhx4.trim(arguments[3]),e=null,o=[t[f]],n,r;if(u.length>0){for(u=u.split(":"),n=[],r=0;r<u.length;r++)r>0&&n[n.length-1].match(/\\$/)!=null?n[n.length-1]=n[n.length-1].replace(/\\$/,"")+":"+u[r]:n.push(u[r]);for(e=n[0],r=1;r<n.length;r++)o.push(n[r])}return typeof e=="string"&&typeof window.dhx4.template[e]=="function"?window.dhx4.template[e].apply(window.dhx4.template,o):f.length>0&&typeof t[f]!="undefined"?i==!0?window.dhx4.trim(t[f]):String(t[f]):""})},window.dhx4.template.date=function(n,t){return n!=null?n instanceof Date?window.dhx4.date2str(n,t):(n=n.toString(),n.match(/^\d*$/)!=null)?window.dhx4.date2str(new Date(parseInt(n)),t):n:""},window.dhx4.template.maxlength=function(n,t){return String(n).substr(0,t)},window.dhx4.template.number_format=function(n,t,i,r){var u=window.dhx4.template._parseFmt(t,i,r);return u==!1?n:window.dhx4.template._getFmtValue(n,u)},window.dhx4.template.lowercase=function(n){return(typeof n=="undefined"||n==null)&&(n=""),String(n).toLowerCase()},window.dhx4.template.uppercase=function(n){return(typeof n=="undefined"||n==null)&&(n=""),String(n).toUpperCase()},window.dhx4.template._parseFmt=function(n,t,i){var r=n.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/),u,f,e;return r==null||r.length!=4?!1:(u={i_len:!1,i_sep:typeof t=="string"?t:",",d_len:!1,d_sep:typeof i=="string"?i:".",s_bef:typeof r[1]=="string"?r[1]:"",s_aft:typeof r[3]=="string"?r[3]:""},f=r[2].split("."),f[1]!=null&&(u.d_len=f[1].length),e=f[0].split(","),e.length>1&&(u.i_len=e[e.length-1].length),u)},window.dhx4.template._getFmtValue=function(n,t){var i=String(n).match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/),r,o,u,f,e;if(i!=null&&i.length==5){if(r="",i[1]!=null&&(r+=i[1]),r+=t.s_bef,t.i_len!==!1){for(o=0,u="",f=i[2].length-1;f>=0;f--)u=""+i[2].charAt(f)+u,++o==t.i_len&&f>0&&(u=t.i_sep+u,o=0);r+=u}else r+=i[2];if(t.d_len!==!1){for(i[4]==null&&(i[4]="");i[4].length<t.d_len;)i[4]+="0";eval("dhx4.temp = new RegExp(/\\d{"+t.d_len+"}/);");e=i[4].match(dhx4.temp);e!=null&&(r+=t.d_sep+e);dhx4.temp=e=null}return r+t.s_aft}return n}),typeof window.dhx4.dateLang=="undefined"&&(window.dhx4.dateLang="en",window.dhx4.dateStrings={en:{monthFullName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShortName:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFullName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShortName:["Su","Mo","Tu","We","Th","Fr","Sa"]}},window.dhx4.dateFormat={en:"%Y-%m-%d"},window.dhx4.date2str=function(n,t,i){if((t==null||typeof t=="undefined")&&(t=window.dhx4.dateFormat[window.dhx4.dateLang]),(i==null||typeof i=="undefined")&&(i=window.dhx4.dateStrings[window.dhx4.dateLang]),n instanceof Date)var r=function(n){return String(n).length==1?"0"+String(n):n},u=function(t){switch(t){case"%d":return r(n.getDate());case"%j":return n.getDate();case"%D":return i.dayShortName[n.getDay()];case"%l":return i.dayFullName[n.getDay()];case"%m":return r(n.getMonth()+1);case"%n":return n.getMonth()+1;case"%M":return i.monthShortName[n.getMonth()];case"%F":return i.monthFullName[n.getMonth()];case"%y":return r(n.getYear()%100);case"%Y":return n.getFullYear();case"%g":return(n.getHours()+11)%12+1;case"%h":return r((n.getHours()+11)%12+1);case"%G":return n.getHours();case"%H":return r(n.getHours());case"%i":return r(n.getMinutes());case"%s":return r(n.getSeconds());case"%a":return n.getHours()>11?"pm":"am";case"%A":return n.getHours()>11?"PM":"AM";case"%%":return"%";case"%u":return n.getMilliseconds();case"%P":if(window.dhx4.temp_calendar!=null&&window.dhx4.temp_calendar.tz!=null)return window.dhx4.temp_calendar.tz;var u=n.getTimezoneOffset(),f=Math.abs(Math.floor(u/60)),e=Math.abs(u)-f*60;return(u>0?"-":"+")+r(f)+":"+r(e);default:return t}},f=String(t||window.dhx4.dateFormat).replace(/%[a-zA-Z]/g,u);return f||String(n)},window.dhx4.str2date=function(n,t,i){var f,u,p,c,h,l,e,v,r,y,o;if((t==null||typeof t=="undefined")&&(t=window.dhx4.dateFormat[window.dhx4.dateLang]),(i==null||typeof i=="undefined")&&(i=window.dhx4.dateStrings[window.dhx4.dateLang]),t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$&"),f=[],u=[],t=t.replace(/%[a-z]/gi,function(n){switch(n){case"%d":case"%m":case"%y":case"%h":case"%H":case"%i":case"%s":return u.push(n),"(\\d{2})";case"%D":case"%l":case"%M":case"%F":return u.push(n),"([a-z-]{1,})";case"%j":case"%n":case"%g":case"%G":return u.push(n),"(\\d{1,2})";case"%Y":return u.push(n),"(\\d{4})";case"%a":return u.push(n),"([a|p]m)";case"%A":return u.push(n),"([A|P]M)";case"%u":return u.push(n),"(\\d{1,6})";case"%P":return u.push(n),"([+-]\\d{1,2}:\\d{1,2})"}return n}),p=new RegExp(t,"i"),c=n.match(p),c==null||c.length-1!=u.length)return"Invalid Date";for(r=1;r<c.length;r++)f.push(c[r]);var w={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7,"%u":7,"%P":7},s={},a={};for(r=0;r<u.length;r++)typeof w[u[r]]!="undefined"&&(h=w[u[r]],s[h]||(s[h]=[],a[h]=[]),s[h].push(f[r]),a[h].push(u[r]));for(f=[],u=[],r=1;r<=7;r++)if(s[r]!=null)for(l=0;l<s[r].length;l++)f.push(s[r][l]),u.push(a[r][l]);for(e=new Date,e.setDate(1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),v=function(n,t){for(var i=0;i<t.length;i++)if(t[i].toLowerCase()==n)return i;return-1},r=0;r<f.length;r++)switch(u[r]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":case"%u":isNaN(f[r])||e[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds","%u":"setMilliseconds"}[u[r]]](Number(f[r])+(u[r]=="%m"||u[r]=="%n"?-1:0));break;case"%M":case"%F":y=v(f[r].toLowerCase(),i[{"%M":"monthShortName","%F":"monthFullName"}[u[r]]]);y>=0&&e.setMonth(y);break;case"%y":isNaN(f[r])||(o=Number(f[r]),e.setFullYear(o+(o>50?1900:2e3)));break;case"%g":case"%h":isNaN(f[r])||(o=Number(f[r]),o<=12&&o>=0&&e.setHours(o+(v("pm",f)>=0?o==12?0:12:o==12?-12:0)));break;case"%P":window.dhx4.temp_calendar!=null&&(window.dhx4.temp_calendar.tz=f[r])}return e}),typeof window.dhx4.ajax=="undefined"&&(window.dhx4.ajax={cache:!1,method:"get",parse:function(n){var t;return typeof n!="string"?n:(n=n.replace(/^[\s]+/,""),window.DOMParser&&!dhx4.isIE?t=(new window.DOMParser).parseFromString(n,"text/xml"):window.ActiveXObject!==window.undefined&&(t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(n)),t)},xmltop:function(n,t,i){if((typeof t.status=="undefined"||t.status<400)&&(xml=t.responseXML?t.responseXML||t:dhx4.ajax.parse(t.responseText||t),xml&&xml.documentElement!==null))try{if(!xml.getElementsByTagName("parsererror").length)return xml.getElementsByTagName(n)[0]}catch(r){}return i!==-1&&dhx4.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],i]),document.createElement("DIV")},xpath:function(n,t){if(t.nodeName||(t=t.responseXML||t),dhx4.isIE)try{return t.selectNodes(n)||[]}catch(f){return[]}else{for(var i=[],r,u=(t.ownerDocument||t).evaluate(n,t,null,XPathResult.ANY_TYPE,null);r=u.iterateNext();)i.push(r);return i}},query:function(n){return dhx4.ajax._call(n.method||"GET",n.url,n.data||"",n.async||!0,n.callback,null,n.headers)},get:function(n,t){return this._call("GET",n,null,!0,t)},getSync:function(n){return this._call("GET",n,null,!1)},put:function(n,t,i){return this._call("PUT",n,t,!0,i)},del:function(n,t,i){return this._call("DELETE",n,t,!0,i)},post:function(n,t,i){return arguments.length==1?t="":arguments.length==2&&(typeof t=="function"||typeof window[t]=="function")?(i=t,t=""):t=String(t),this._call("POST",n,t,!0,i)},postSync:function(n,t){return t=t==null?"":String(t),this._call("POST",n,t,!1)},getLong:function(n,t){this._call("GET",n,null,!0,t,{url:n})},postLong:function(n,t,i){arguments.length==2&&(typeof t=="function"||typeof window[t])&&(i=t,t="");this._call("POST",n,t,!0,i,{url:n,postData:t})},_call:function(n,t,i,r,u,f,e){var h,c,l;if(typeof i=="object"){h=[];for(c in i)h.push(c+"="+encodeURIComponent(i[c]));i=h.join("&")}var s=dhx.promise.defer(),o=window.XMLHttpRequest&&!dhx4.isIE?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a=navigator.userAgent.match(/AppleWebKit/)!=null&&navigator.userAgent.match(/Qt/)!=null&&navigator.userAgent.match(/Safari/)!=null;if(r==!0&&(o.onreadystatechange=function(){if(o.readyState==4||a==!0&&o.readyState==3){if((o.status!=200||o.responseText=="")&&(s.reject(o),!dhx4.callEvent("onAjaxError",[{xmlDoc:o,filePath:t,async:r}])))return;window.setTimeout(function(){if(typeof u=="function"){try{u.apply(window,[{xmlDoc:o,filePath:t,async:r}])}catch(n){s.reject(n)}s.resolve(o.responseText)}f!=null&&(typeof f.postData!="undefined"?dhx4.ajax.postLong(f.url,f.postData,u):dhx4.ajax.getLong(f.url,u));u=null;o=null},1)}}),n=="GET"&&(t+=this._dhxr(t)),o.open(n,t,r),e!=null)for(l in e)o.setRequestHeader(l,e[l]);else n=="POST"||n=="PUT"||n=="DELETE"?o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):n=="GET"&&(i=null);return o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.send(i),r!=!0&&(o.readyState==4||a==!0&&o.readyState==3)&&(o.status!=200||o.responseText=="")&&dhx4.callEvent("onAjaxError",[{xmlDoc:o,filePath:t,async:r}]),s.xmlDoc=o,s.filePath=t,s.async=r,s},_dhxr:function(n,t){return this.cache!=!0?(n.match(/^[\?\&]$/)==null&&(n=n.indexOf("?")>=0?"&":"?"),typeof t=="undefined"&&(t=!0),n+"dhxr"+(new Date).getTime()+(t==!0?"=1":"")):""}}),typeof window.dhx4._enableDataLoading=="undefined"&&(window.dhx4._enableDataLoading=function(n,t,i,r,u){var e,f;if(u=="clear"){for(f in n._dhxdataload)n._dhxdataload[f]=null,delete n._dhxdataload[f];n._loadData=null;n._dhxdataload=null;n.load=null;n.loadStruct=null;n=null;return}if(n._dhxdataload={initObj:t,xmlToJson:i,xmlRootTag:r,onBeforeXLS:null},n._loadData=function(n,t,i){var u,h,e,r,s,f,o;if(arguments.length==2&&(i=t,t=null),u=null,arguments.length==3&&(i=arguments[2]),this.callEvent("onXLS",[]),typeof n=="string"){if(r=n.replace(/^\s{1,}/,"").replace(/\s{1,}$/,""),h=new RegExp("^<"+this._dhxdataload.xmlRootTag),h.test(r.replace(/^<\?xml[^\?]*\?>\s*/,""))&&(u=dhx4.ajax.parse(n),u!=null&&(u=this[this._dhxdataload.xmlToJson].apply(this,[u]))),u==null&&(r.match(/^[\s\S]*{[.\s\S]*}[\s\S]*$/)!=null||r.match(/^[\s\S]*\[[.\s\S]*\][\s\S]*$/)!=null)&&(u=dhx4.s2j(r)),u==null){if(e=[],typeof this._dhxdataload.onBeforeXLS=="function"&&(r=this._dhxdataload.onBeforeXLS.apply(this,[n]),r!=null&&typeof r=="object"&&(r.url!=null&&(n=r.url),r.params!=null)))for(s in r.params)e.push(s+"="+encodeURIComponent(r.params[s]));return(f=this,o=function(t){var r=null;r=(t.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||t.xmlDoc.responseText.replace(/^\s{1,}/,"").match(/^</)!=null?f[f._dhxdataload.xmlToJson].apply(f,[t.xmlDoc.responseXML]):dhx4.s2j(t.xmlDoc.responseText);r!=null&&f[f._dhxdataload.initObj].apply(f,[r,n]);f.callEvent("onXLE",[]);i!=null&&(typeof i=="function"?i.apply(f,[]):typeof window[i]=="function"&&window[i].apply(f,[]));o=i=null;r=t=f=null},e=e.join("&")+(typeof t=="string"?"&"+t:""),dhx4.ajax.method=="post")?dhx4.ajax.post(n,e,o):dhx4.ajax.method=="get"?dhx4.ajax.get(n+(e.length>0?(n.indexOf("?")>0?"&":"?")+e:""),o):void 0}}else u=typeof n.documentElement=="object"||typeof n.tagName!="undefined"&&typeof n.getElementsByTagName!="undefined"&&n.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0?this[this._dhxdataload.xmlToJson].apply(this,[n]):window.dhx4._copyObj(n);u!=null&&this[this._dhxdataload.initObj].apply(this,[u]);this.callEvent("onXLE",[]);i!=null&&(typeof i=="function"?i.apply(this,[]):typeof window[i]=="function"&&window[i].apply(this,[]),i=null)},u!=null){e={struct:"loadStruct",data:"load"};for(f in u)u[f]==!0&&(n[e[f]]=function(){return this._loadData.apply(this,arguments)})}n=null}),typeof window.dhx4._eventable=="undefined"&&(window.dhx4._eventable=function(n,t){if(t=="clear"){n.detachAllEvents();n.dhxevs=null;n.attachEvent=null;n.detachEvent=null;n.checkEvent=null;n.callEvent=null;n.detachAllEvents=null;n=null;return}n.dhxevs={data:{}};n.attachEvent=function(n,t){n=String(n).toLowerCase();this.dhxevs.data[n]||(this.dhxevs.data[n]={});var i=window.dhx4.newId();return this.dhxevs.data[n][i]=t,i};n.detachEvent=function(n){var t,r,i;for(t in this.dhxevs.data){r=0;for(i in this.dhxevs.data[t])i==n?(this.dhxevs.data[t][i]=null,delete this.dhxevs.data[t][i]):r++;r==0&&(this.dhxevs.data[t]=null,delete this.dhxevs.data[t])}};n.checkEvent=function(n){return n=String(n).toLowerCase(),this.dhxevs.data[n]!=null};n.callEvent=function(n,t){var i,r;if(n=String(n).toLowerCase(),this.dhxevs.data[n]==null)return!0;i=!0;for(r in this.dhxevs.data[n])i=this.dhxevs.data[n][r].apply(this,t)&&i;return i};n.detachAllEvents=function(){var n,t;for(n in this.dhxevs.data){for(t in this.dhxevs.data[n])this.dhxevs.data[n][t]=null,delete this.dhxevs.data[n][t];this.dhxevs.data[n]=null;delete this.dhxevs.data[n]}};n=null},dhx4._eventable(dhx4)),window.dhtmlxValidation||(dhtmlxValidation=function(){},dhtmlxValidation.prototype={isEmpty:function(n){return n==""},isNotEmpty:function(n){return n instanceof Array?n.length>0:!n==""},isValidBoolean:function(n){return!!n.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(n){return!!n.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,5})$)/i)},isValidInteger:function(n){return!!n.toString().match(/(^-?\d+$)/)},isValidNumeric:function(n){return!!n.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(n){return!!n.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(n){var t=n.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return t&&!!(t[1]<=9999&&t[2]<=12&&t[3]<=31&&t[4]<=59&&t[5]<=59&&t[6]<=59)||!1},isValidDate:function(n){var t=n.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return t&&!!(t[1]<=9999&&t[2]<=12&&t[3]<=31)||!1},isValidTime:function(n){var t=n.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return t&&!!(t[1]<=24&&t[2]<=59&&t[3]<=59)||!1},isValidIPv4:function(n){var t=n.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return t&&!!(t[1]<=255&&t[2]<=255&&t[3]<=255&&t[4]<=255)||!1},isValidCurrency:function(n){return n.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)&&!0||!1},isValidSSN:function(n){return n.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&!0||!1},isValidSIN:function(n){return n.toString().match(/^\d{9}$/)&&!0||!1}},dhtmlxValidation=new dhtmlxValidation),typeof dhtmlx=="undefined"&&(window.dhtmlx={extend:function(n,t){for(var i in t)n[i]||(n[i]=t[i]);return n},extend_api:function(n,t,i){var r=window[n];r&&(window[n]=function(n){var i,u;if(n&&typeof n=="object"&&!n.tagName){u=r.apply(this,t._init?t._init(n):arguments);for(i in dhtmlx)t[i]&&this[t[i]](dhtmlx[i]);for(i in n)t[i]?this[t[i]](n[i]):i.indexOf("on")===0&&this.attachEvent(i,n[i])}else u=r.apply(this,arguments);return t._patch&&t._patch(this),u||this},window[n].prototype=r.prototype,i&&dhtmlx.extend(window[n].prototype,i))},url:function(n){return n.indexOf("?")!=-1?"&":"?"}}),dhtmlDragAndDropObject.prototype.removeDraggableItem=function(n){n.onmousedown=null;n.dragStarter=null;n.dragLanding=null},dhtmlDragAndDropObject.prototype.addDraggableItem=function(n,t){n.onmousedown=this.preCreateDragCopy;n.dragStarter=t;this.addDragLanding(n,t)},dhtmlDragAndDropObject.prototype.addDragLanding=function(n,t){n.dragLanding=t},dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(n){if(!(n||window.event)||(n||event).button!=2)return window.dhtmlDragAndDrop.waitDrag?(window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1):(window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(n),window.dhtmlDragAndDrop.waitDrag=1,window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup,window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove,window.dhtmlDragAndDrop.dragStartNode=this,window.dhtmlDragAndDrop.dragStartObject=this.dragStarter,document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy,document.body.onmousemove=window.dhtmlDragAndDrop.callDrag,window.dhtmlDragAndDrop.downtime=(new Date).valueOf(),n&&n.preventDefault)?(n.preventDefault(),!1):!1},dhtmlDragAndDropObject.prototype.callDrag=function(n){var t,r,i,u;if(n||(n=window.event),dragger=window.dhtmlDragAndDrop,!((new Date).valueOf()-dragger.downtime<100)){if(!dragger.dragNode)if(dragger.waitDrag){if(dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,n),!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return!1};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else return dragger.stopDrag(n,!0);dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode&&(t=dragger.gldragNode,dragger.gldragNode.old&&(t=dragger.gldragNode.old),t.parentNode.removeChild(t),r=dragger.dragNode.pWindow,t.pWindow&&t.pWindow.dhtmlDragAndDrop.lastLanding&&t.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(t.pWindow.dhtmlDragAndDrop.lastLanding),_isIE?(i=document.createElement("Div"),i.innerHTML=dragger.dragNode.outerHTML,dragger.dragNode=i.childNodes[0]):dragger.dragNode=dragger.dragNode.cloneNode(!0),dragger.dragNode.pWindow=window,dragger.gldragNode.old=dragger.dragNode,document.body.appendChild(dragger.dragNode),r.dhtmlDragAndDrop.dragNode=dragger.dragNode);dragger.dragNode.style.left=n.clientX+15+(dragger.fx?dragger.fx*-1:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=n.clientY+3+(dragger.fy?dragger.fy*-1:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";u=n.srcElement?n.srcElement:n.target;dragger.checkLanding(u,n)}},dhtmlDragAndDropObject.prototype.calculateFramePosition=function(n){var u;if(window.name){for(var t=parent.frames[window.name].frameElement.offsetParent,i=0,r=0;t;)i+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent;if(parent.dhtmlDragAndDrop&&(u=parent.dhtmlDragAndDrop.calculateFramePosition(1),i+=u.split("_")[0]*1,r+=u.split("_")[1]*1),n)return i+"_"+r;this.fx=i;this.fy=r}return"0_0"},dhtmlDragAndDropObject.prototype.checkLanding=function(n,t){n&&n.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=n,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,t.clientX,t.clientY,t),this.lastLanding_scr=_isIE?t.srcElement:t.target):n&&n.tagName!="BODY"?this.checkLanding(n.parentNode,t):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,t.clientX,t.clientY,t),this.lastLanding=0,this._onNotFound&&this._onNotFound())},dhtmlDragAndDropObject.prototype.stopDrag=function(n,t){if(dragger=window.dhtmlDragAndDrop,!t){dragger.stopFrameRoute();var i=dragger.lastLanding;dragger.lastLanding=null;i&&i.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,i,_isIE?event.srcElement:n.target)}dragger.lastLanding=null;dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode);dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0},dhtmlDragAndDropObject.prototype.stopFrameRoute=function(n){n&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var t=0;t<window.frames.length;t++)try{window.frames[t]!=n&&window.frames[t].dhtmlDragAndDrop&&window.frames[t].dhtmlDragAndDrop.stopFrameRoute(window)}catch(i){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=n&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(i){}},dhtmlDragAndDropObject.prototype.initFrameRoute=function(n,t){n&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=n.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=n.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=n.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=n.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&t&&(!_isFF||_FFrv<1.8)&&window.dhtmlDragAndDrop.calculateFramePosition());try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=n&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(r){}for(var i=0;i<window.frames.length;i++)try{window.frames[i]!=n&&window.frames[i].dhtmlDragAndDrop&&window.frames[i].dhtmlDragAndDrop.initFrameRoute(window,!n||t?1:0)}catch(r){}},_isFF=!1,_isIE=!1,_isOpera=!1,_isKHTML=!1,_isMacOS=!1,_isChrome=!1,_FFrv=!1,_KHTMLrv=!1,_OperaRv=!1,navigator.userAgent.indexOf("Macintosh")!=-1&&(_isMacOS=!0),navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&(_isChrome=!0),navigator.userAgent.indexOf("Safari")!=-1||navigator.userAgent.indexOf("Konqueror")!=-1?(_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),_KHTMLrv>525?(_isFF=!0,_FFrv=1.9):_isKHTML=!0):navigator.userAgent.indexOf("Opera")!=-1?(_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))):navigator.appName.indexOf("Microsoft")!=-1?(_isIE=!0,(navigator.appVersion.indexOf("MSIE 8.0")!=-1||navigator.appVersion.indexOf("MSIE 9.0")!=-1||navigator.appVersion.indexOf("MSIE 10.0")!=-1||document.documentMode>7)&&document.compatMode!="BackCompat"&&(_isIE=8)):navigator.appName=="Netscape"&&navigator.userAgent.indexOf("Trident")!=-1?_isIE=8:(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])),typeof dhtmlxEvent=="undefined"){function dhtmlxEvent(n,t,i){n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent&&n.attachEvent("on"+t,i)}}dhtmlxEvent.touchDelay==null&&(dhtmlxEvent.touchDelay=2e3);typeof dhtmlxEvent.initTouch=="undefined"&&(dhtmlxEvent.initTouch=function(){function u(){if(t){var i=document.createEvent("HTMLEvents");i.initEvent("dblclick",!0,!0);t.dispatchEvent(i);n=t=null}}var n,t,i,r;dhtmlxEvent(document.body,"touchstart",function(f){t=f.touches[0].target;i=f.touches[0].clientX;r=f.touches[0].clientY;n=window.setTimeout(u,dhtmlxEvent.touchDelay)});dhtmlxEvent(document.body,"touchmove",function(u){n&&(Math.abs(u.touches[0].clientX-i)>50||Math.abs(u.touches[0].clientY-r)>50)&&(window.clearTimeout(n),n=t=!1)});dhtmlxEvent(document.body,"touchend",function(){n&&(window.clearTimeout(n),n=t=!1)});dhtmlxEvent.initTouch=function(){}}),function(n){function t(n,t){var i=this;i.promise=i;i.state="pending";i.val=null;i.fn=n||null;i.er=t||null;i.next=[]}var i=typeof setImmediate!="undefined"?setImmediate:function(n){setTimeout(n,0)},r;t.prototype.resolve=function(n){var t=this;t.state==="pending"&&(t.val=n,t.state="resolving",i(function(){t.fire()}))};t.prototype.reject=function(n){var t=this;t.state==="pending"&&(t.val=n,t.state="rejecting",i(function(){t.fire()}))};t.prototype.then=function(n,i){var r=this,u=new t(n,i);return r.next.push(u),r.state==="resolved"&&u.resolve(r.val),r.state==="rejected"&&u.reject(r.val),u};t.prototype.fail=function(n){return this.then(null,n)};t.prototype.finish=function(n){var t=this,i;if(t.state=n,t.state==="resolved")for(i=0;i<t.next.length;i++)t.next[i].resolve(t.val);if(t.state==="rejected"){for(i=0;i<t.next.length;i++)t.next[i].reject(t.val);if(!t.next.length)throw t.val;}};t.prototype.thennable=function(n,t,i,r,u){var e=this,f;if(u=u||e.val,typeof u=="object"&&typeof n=="function")try{f=0;n.call(u,function(n){f++==0&&t(n)},function(n){f++==0&&i(n)})}catch(o){i(o)}else r(u)};t.prototype.fire=function(){var n=this,t;try{t=n.val&&n.val.then}catch(i){return n.val=i,n.state="rejecting",n.fire()}n.thennable(t,function(t){n.val=t;n.state="resolving";n.fire()},function(t){n.val=t;n.state="rejecting";n.fire()},function(i){if(n.val=i,n.state==="resolving"&&typeof n.fn=="function")try{n.val=n.fn.call(undefined,n.val)}catch(r){return n.val=r,n.finish("rejected")}if(n.state==="rejecting"&&typeof n.er=="function")try{n.val=n.er.call(undefined,n.val);n.state="resolving"}catch(r){return n.val=r,n.finish("rejected")}if(n.val===n)return n.val=TypeError(),n.finish("rejected");n.thennable(t,function(t){n.val=t;n.finish("resolved")},function(t){n.val=t;n.finish("rejected")},function(t){n.val=t;n.state==="resolving"?n.finish("resolved"):n.finish("rejected")})})};t.prototype.done=function(){if(this.state="rejected"&&!this.next)throw this.val;return null};t.prototype.nodeify=function(n){return typeof n=="function"?this.then(function(t){try{n(null,t)}catch(i){setImmediate(function(){throw i;})}return t},function(t){try{n(t)}catch(i){setImmediate(function(){throw i;})}return t}):this};t.prototype.spread=function(n,t){return this.all().then(function(t){return typeof n=="function"&&n.apply(null,t)},t)};t.prototype.all=function(){var n=this;return this.then(function(i){function s(){++e===o&&r.resolve(i)}var r=new t,e,o,u,h,f,c;if(!(i instanceof Array))return r.reject(TypeError),r;for(e=0,o=i.length,u=0,h=i.length;u<h;u++){f=i[u];try{c=f&&f.then}catch(l){r.reject(l);break}(function(t){n.thennable(c,function(n){i[t]=n;s()},function(n){r.reject(n)},function(){s()},f)})(u)}return r})};r={all:function(n){var i=new t(null,null);return i.resolve(n),i.all()},defer:function(){return new t(null,null)},fcall:function(){var n=new t,i=Array.apply([],arguments),u=i.shift(),r;try{r=u.apply(null,i);n.resolve(r)}catch(f){n.reject(f)}return n},nfcall:function(){var n=new t,i=Array.apply([],arguments),r=i.shift();try{i.push(function(t,i){return t?n.reject(t):n.resolve(i)});r.apply(null,i)}catch(u){n.reject(u)}return n}};n.promise=r}(dhx);window.dhtmlx||(dhtmlx={});dhtmlx.assert=function(n,t){n||dhtmlx.error(t)};dhtmlx.assert_enabled=function(){return!1};dhtmlx.assert_event=function(n,t){var i,r,u;n._event_check||(n._event_check={},n._event_check_size={});for(i in t){n._event_check[i.toLowerCase()]=t[i];r=-1;for(u in t[i])r++;n._event_check_size[i.toLowerCase()]=r}};dhtmlx.assert_method_info=function(n,t,i,r){for(var f=[],u=0;u<r.length;u++)f.push(r[u][0]+" : "+r[u][1]+"\n   "+r[u][2].describe()+(r[u][3]?"; optional":""));return n.name+"."+t+"\n"+i+"\n Arguments:\n - "+f.join("\n - ")};dhtmlx.assert_method=function(n,t){for(var i in t)dhtmlx.assert_method_process(n,i,t[i].descr,t[i].args,t[i].min||99,t[i].skip)};dhtmlx.assert_method_process=function(n,t,i,r,u,f){var e=n[t];f||(n[t]=function(){if(arguments.length!=r.length&&arguments.length<u)dhtmlx.log("warn","Incorrect count of parameters\n"+n[t].describe()+"\n\nExpecting "+r.length+" but have only "+arguments.length);else for(var i=0;i<r.length;i++)r[i][3]||r[i][2](arguments[i])||dhtmlx.log("warn","Incorrect method call\n"+n[t].describe()+"\n\nActual value of "+(i+1)+" parameter: {"+typeof arguments[i]+"} "+arguments[i]);return e.apply(this,arguments)});n[t].describe=function(){return dhtmlx.assert_method_info(n,t,i,r)}};dhtmlx.assert_event_call=function(n,t,i){n._event_check&&(n._event_check[t]?dhtmlx.isNotDefined(i)?dhtmlx.log("warn","Event without parameters :"+t):n._event_check_size[t]!=i.length&&dhtmlx.log("warn","Incorrect event call, expected "+n._event_check_size[t]+" parameter(s), but have "+i.length+" parameter(s), for "+t+" event"):dhtmlx.log("warn","Not expected event call :"+t))};dhtmlx.assert_event_attach=function(n,t){n._event_check&&!n._event_check[t]&&dhtmlx.log("warn","Unknown event name: "+t)};dhtmlx.assert_property=function(n,t){n._settings_check||(n._settings_check={});dhtmlx.extend(n._settings_check,t)};dhtmlx.assert_check=function(n,t){if(typeof n=="object")for(var i in n)dhtmlx.assert_settings(i,n[i],t)};dhtmlx.assert_settings=function(n,t,i){var f,r;if(i=i||this._settings_check,i){if(!i[n])return dhtmlx.log("warn","Unknown propery: "+n);var u=!1;for(f=0;f<i[n].length;f++)if((r=i[n][f],typeof r!="string")&&(typeof r=="function"?u=u||r(t):typeof r=="object"&&typeof r[1]=="function"&&(u=u||r[1](t),u&&r[2]&&dhtmlx.assert_check(t,r[2])),u))break;u||dhtmlx.log("warn","Invalid configuration\n"+dhtmlx.assert_info(n,i)+"\nActual value: {"+typeof t+"} "+t)}};dhtmlx.assert_info=function(n,t){for(var r=t[n],f="",u=[],i=0;i<r.length;i++)typeof rule=="string"?f=r[i]:r[i].describe?u.push(r[i].describe()):r[i][1]&&r[i][1].describe&&u.push(r[i][1].describe());return"Property: "+n+", "+f+" \nExpected value: \n - "+u.join("\n - ")};dhtmlx.assert_enabled()&&(dhtmlx.assert_rule_color=function(n){return typeof n!="string"?!1:n.indexOf("#")!==0?!1:n.substr(1).replace(/[0-9A-F]/gi,"")!==""?!1:!0},dhtmlx.assert_rule_color.describe=function(){return"{String} Value must start from # and contain hexadecimal code of color"},dhtmlx.assert_rule_template=function(n){return typeof n=="function"?!0:typeof n=="string"?!0:!1},dhtmlx.assert_rule_template.describe=function(){return"{Function},{String} Value must be a function which accepts data object and return text string, or a sting with optional template markers"},dhtmlx.assert_rule_boolean=function(n){return typeof n=="boolean"?!0:!1},dhtmlx.assert_rule_boolean.describe=function(){return"{Boolean} true or false"},dhtmlx.assert_rule_object=function(n){return typeof n=="object"?!0:!1},dhtmlx.assert_rule_object.describe=function(){return"{Object} Configuration object"},dhtmlx.assert_rule_string=function(n){return typeof n=="string"?!0:!1},dhtmlx.assert_rule_string.describe=function(){return"{String} Plain string"},dhtmlx.assert_rule_htmlpt=function(n){return!!dhtmlx.toNode(n)},dhtmlx.assert_rule_htmlpt.describe=function(){return"{Object},{String} HTML node or ID of HTML Node"},dhtmlx.assert_rule_notdocumented=function(){return!1},dhtmlx.assert_rule_notdocumented.describe=function(){return"This options wasn't documented"},dhtmlx.assert_rule_key=function(n){var t=function(t){return n[t]};return t.describe=function(){var t=[];for(var i in n)t.push(i);return"{String} can take one of next values: "+t.join(", ")},t},dhtmlx.assert_rule_dimension=function(n){return n*1==n&&!isNaN(n)&&n>=0?!0:!1},dhtmlx.assert_rule_dimension.describe=function(){return"{Integer} value must be a positive number"},dhtmlx.assert_rule_number=function(n){return typeof n=="number"?!0:!1},dhtmlx.assert_rule_number.describe=function(){return"{Integer} value must be a number"},dhtmlx.assert_rule_function=function(n){return typeof n=="function"?!0:!1},dhtmlx.assert_rule_function.describe=function(){return"{Function} value must be a custom function"},dhtmlx.assert_rule_any=function(){return!0},dhtmlx.assert_rule_any.describe=function(){return"Any value"},dhtmlx.assert_rule_mix=function(n,t){var i=function(i){return n(i)||t(i)?!0:!1};return i.describe=function(){return n.describe()},i});dhtmlx.codebase="./";dhtmlx.copy=function(n){var t=dhtmlx.copy._function;return t.prototype=n,new t};dhtmlx.copy._function=function(){};dhtmlx.extend=function(n,t){for(var i in t)n[i]=t[i];return dhtmlx.assert_enabled()&&t._assert&&(n._assert(),n._assert=null),dhtmlx.assert(n,"Invalid nesting target"),dhtmlx.assert(t,"Invalid nesting source"),t._init&&n._init(),n};dhtmlx.proto_extend=function(){for(var r,f,n=arguments,i=n[0],u=[],t=n.length-1;t>0;t--){typeof n[t]=="function"&&(n[t]=n[t].prototype);for(r in n[t])r=="_init"?u.push(n[t][r]):i[r]||(i[r]=n[t][r])}return n[0]._init&&u.push(n[0]._init),i._init=function(){for(var n=0;n<u.length;n++)u[n].apply(this,arguments)},i.base=n[1],f=function(n){this._init(n);this._parseSettings&&this._parseSettings(n,this.defaults)},f.prototype=i,i=n=null,f};dhtmlx.bind=function(n,t){return function(){return n.apply(t,arguments)}};dhtmlx.require=function(n){dhtmlx._modules[n]||(dhtmlx.assert(dhtmlx.ajax,"load module is required"),dhtmlx.exec(dhtmlx.ajax().sync().get(dhtmlx.codebase+n).responseText),dhtmlx._modules[n]=!0)};dhtmlx._modules={};dhtmlx.exec=function(n){window.execScript?window.execScript(n):window.eval(n)};dhtmlx.methodPush=function(n,t){return function(){return n[t].apply(n,arguments)}};dhtmlx.isNotDefined=function(n){return typeof n=="undefined"};dhtmlx.delay=function(n,t,i,r){setTimeout(function(){var r=n.apply(t,i);return n=t=i=null,r},r||1)};dhtmlx.uid=function(){return this._seed||(this._seed=(new Date).valueOf()),this._seed++,this._seed};dhtmlx.toNode=function(n){return typeof n=="string"?document.getElementById(n):n};dhtmlx.toArray=function(n){return dhtmlx.extend(n||[],dhtmlx.PowerArray)};dhtmlx.toFunctor=function(n){return typeof n=="string"?eval(n):n};dhtmlx._events={};dhtmlx.event=function(n,t,i,r){n=dhtmlx.toNode(n);var u=dhtmlx.uid();return dhtmlx._events[u]=[n,t,i],r&&(i=dhtmlx.bind(i,r)),n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent&&n.attachEvent("on"+t,i),u};dhtmlx.eventRemove=function(n){if(n){dhtmlx.assert(this._events[n],"Removing non-existing event");var t=dhtmlx._events[n];t[0].removeEventListener?t[0].removeEventListener(t[1],t[2],!1):t[0].detachEvent&&t[0].detachEvent("on"+t[1],t[2]);delete this._events[n]}};dhtmlx.log=function(n,t,i){window.console&&console.log&&(n=n.toLowerCase(),window.console[n]?window.console[n](t||"unknown error"):window.console.log(n+": "+t),i&&window.console.log(i))};dhtmlx.log_full_time=function(n){dhtmlx._start_time_log=new Date;dhtmlx.log("Info","Timing start ["+n+"]");window.setTimeout(function(){var t=new Date;dhtmlx.log("Info","Timing end ["+n+"]:"+(t.valueOf()-dhtmlx._start_time_log.valueOf())/1e3+"s")},1)};dhtmlx.log_time=function(n){var t="_start_time_log"+n,i;dhtmlx[t]?(i=new Date,dhtmlx.log("Info","Timing end ["+n+"]:"+(i.valueOf()-dhtmlx[t].valueOf())/1e3+"s"),dhtmlx[t]=null):(dhtmlx[t]=new Date,dhtmlx.log("Info","Timing start ["+n+"]"))};dhtmlx.error=function(n,t){dhtmlx.log("error",n,t)};dhtmlx.EventSystem={_init:function(){this._events={};this._handlers={};this._map={}},block:function(){this._events._block=!0},unblock:function(){this._events._block=!1},mapEvent:function(n){dhtmlx.extend(this._map,n)},callEvent:function(n,t){var i,r,u;if(this._events._block)return!0;if(n=n.toLowerCase(),dhtmlx.assert_event_call(this,n,t),i=this._events[n.toLowerCase()],r=!0,dhtmlx.debug&&dhtmlx.log("info","["+this.name+"] event:"+n,t),i)for(u=0;u<i.length;u++)i[u].apply(this,t||[])===!1&&(r=!1);return this._map[n]&&!this._map[n].callEvent(n,t)&&(r=!1),r},attachEvent:function(n,t,i){n=n.toLowerCase();dhtmlx.assert_event_attach(this,n);i=i||dhtmlx.uid();t=dhtmlx.toFunctor(t);var r=this._events[n]||dhtmlx.toArray();return r.push(t),this._events[n]=r,this._handlers[i]={f:t,t:n},i},detachEvent:function(n){if(this._handlers[n]){var t=this._handlers[n].t,i=this._handlers[n].f,r=this._events[t];r.remove(i);delete this._handlers[n]}}};dhtmlx.PowerArray={removeAt:function(n,t){n>=0&&this.splice(n,t||1)},remove:function(n){this.removeAt(this.find(n))},insertAt:function(n,t){if(t||t===0){var i=this.splice(t,this.length-t);this[t]=n;this.push.apply(this,i)}else this.push(n)},find:function(n){for(i=0;i<this.length;i++)if(n==this[i])return i;return-1},each:function(n,t){for(var i=0;i<this.length;i++)n.call(t||this,this[i])},map:function(n,t){for(var i=0;i<this.length;i++)this[i]=n.call(t||this,this[i]);return this}};dhtmlx.env={};navigator.userAgent.indexOf("Opera")!=-1?dhtmlx._isOpera=!0:(dhtmlx._isIE=!!document.all,dhtmlx._isFF=!document.all,dhtmlx._isWebKit=navigator.userAgent.indexOf("KHTML")!=-1,navigator.appVersion.indexOf("MSIE 8.0")!=-1&&document.compatMode!="BackCompat"&&(dhtmlx._isIE=8),navigator.appVersion.indexOf("MSIE 9.0")!=-1&&document.compatMode!="BackCompat"&&(dhtmlx._isIE=9));dhtmlx.env={},function(){var n,i,t;for(dhtmlx.env.transform=!1,dhtmlx.env.transition=!1,n={},n.names=["transform","transition"],n.transform=["transform","WebkitTransform","MozTransform","oTransform","msTransform"],n.transition=["transition","WebkitTransition","MozTransition","oTransition"],i=document.createElement("DIV"),t=0;t<n.names.length;t++)while(p=n[n.names[t]].pop())typeof i.style[p]!="undefined"&&(dhtmlx.env[n.names[t]]=!0)}();dhtmlx.env.transform_prefix=function(){var n;return dhtmlx._isOpera?n="-o-":(n="",dhtmlx._isFF&&(n="-moz-"),dhtmlx._isWebKit&&(n="-webkit-")),n}();dhtmlx.env.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}();dhtmlx.zIndex={drag:1e4};dhtmlx.html={create:function(n,t,i){var r,u;t=t||{};r=document.createElement(n);for(u in t)r.setAttribute(u,t[u]);return t.style&&(r.style.cssText=t.style),t["class"]&&(r.className=t["class"]),i&&(r.innerHTML=i),r},getValue:function(n){return(n=dhtmlx.toNode(n),!n)?"":dhtmlx.isNotDefined(n.value)?n.innerHTML:n.value},remove:function(n){if(n instanceof Array)for(var t=0;t<n.length;t++)this.remove(n[t]);else n&&n.parentNode&&n.parentNode.removeChild(n)},insertBefore:function(n,t,i){n&&(t?t.parentNode.insertBefore(n,t):i.appendChild(n))},locate:function(n,t){var i,r;for(n=n||event,i=n.target||n.srcElement;i;){if(i.getAttribute&&(r=i.getAttribute(t),r))return r;i=i.parentNode}return null},offset:function(n){var t,i;if(n.getBoundingClientRect){var f=n.getBoundingClientRect(),r=document.body,u=document.documentElement,e=window.pageYOffset||u.scrollTop||r.scrollTop,o=window.pageXOffset||u.scrollLeft||r.scrollLeft,s=u.clientTop||r.clientTop||0,h=u.clientLeft||r.clientLeft||0,t=f.top+e-s,i=f.left+o-h;return{y:Math.round(t),x:Math.round(i)}}for(t=0,i=0;n;)t=t+parseInt(n.offsetTop,10),i=i+parseInt(n.offsetLeft,10),n=n.offsetParent;return{y:t,x:i}},pos:function(n){if(n=n||event,n.pageX||n.pageY)return{x:n.pageX,y:n.pageY};var t=dhtmlx._isIE&&document.compatMode!="BackCompat"?document.documentElement:document.body;return{x:n.clientX+t.scrollLeft-t.clientLeft,y:n.clientY+t.scrollTop-t.clientTop}},preventEvent:function(n){n&&n.preventDefault&&n.preventDefault();dhtmlx.html.stopEvent(n)},stopEvent:function(n){return(n||event).cancelBubble=!0,!1},addCss:function(n,t){n.className+=" "+t},removeCss:function(n,t){n.className=n.className.replace(RegExp(t,"g"),"")}},function(){var n=document.getElementsByTagName("SCRIPT");dhtmlx.assert(n.length,"Can't locate codebase");n.length&&(n=(n[n.length-1].getAttribute("src")||"").split("/"),n.splice(n.length-1,1),dhtmlx.codebase=n.slice(0,n.length).join("/")+"/")}();dhtmlx.ui||(dhtmlx.ui={});dhtmlx.Destruction={_init:function(){dhtmlx.destructors.push(this)},destructor:function(){this.destructor=function(){};this._htmlmap=null;this._htmlrows=null;this._html&&document.body.appendChild(this._html);this._html=null;this._obj&&(this._obj.innerHTML="",this._obj._htmlmap=null);this._obj=this._dataobj=null;this.data=null;this._events=this._handlers={};this.canvases=[];this.render&&(this.render=function(){})}};dhtmlx.destructors=[];dhtmlx.event(window,"unload",function(){var t,i,n;if(dhtmlx.destructors){for(t=0;t<dhtmlx.destructors.length;t++)dhtmlx.destructors[t].destructor(-1);dhtmlx.destructors=[]}for(i in dhtmlx._events)n=dhtmlx._events[i],n[0].removeEventListener?n[0].removeEventListener(n[1],n[2],!1):n[0].detachEvent&&n[0].detachEvent("on"+n[1],n[2]),delete dhtmlx._events[i]});dhtmlx.ajax=function(n,t,i){if(arguments.length!==0){var r=new dhtmlx.ajax;i&&(r.master=i);r.get(n,null,t)}return this.getXHR?this:new dhtmlx.ajax};dhtmlx.ajax.prototype={getXHR:function(){return dhtmlx._isIE?new ActiveXObject("Microsoft.xmlHTTP"):new XMLHttpRequest},send:function(n,t,i){var r=this.getXHR(),e,o,f,u;if(typeof i=="function"&&(i=[i]),typeof t=="object"){e=[];for(o in t)f=t[o],(f===null||f===dhtmlx.undefined)&&(f=""),e.push(o+"="+encodeURIComponent(f));t=e.join("&")}return t&&!this.post&&(n=n+(n.indexOf("?")!=-1?"&":"?")+t,t=null),r.open(this.post?"POST":"GET",n,!this._sync),this.post&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),u=this,r.onreadystatechange=function(){if(!r.readyState||r.readyState==4){if(i&&u)for(var n=0;n<i.length;n++)i[n]&&i[n].call(u.master||u,r.responseText,r.responseXML,r);u.master=null;i=u=null}},r.send(t||null),r},get:function(n,t,i){return this.post=!1,this.send(n,t,i)},post:function(n,t,i){return this.post=!0,this.send(n,t,i)},sync:function(){return this._sync=!0,this}};dhtmlx.AtomDataLoader={_init:function(n){this.data={};n&&(this._settings.datatype=n.datatype||"json",this._after_init.push(this._load_when_ready))},_load_when_ready:function(){this._ready_for_data=!0;this._settings.url&&this.url_setter(this._settings.url);this._settings.data&&this.data_setter(this._settings.data)},url_setter:function(n){return this._ready_for_data?(this.load(n,this._settings.datatype),n):n},data_setter:function(n){return this._ready_for_data?(this.parse(n,this._settings.datatype),!0):n},load:function(n,t){if(this.callEvent("onXLS",[]),typeof t=="string"?(this.data.driver=dhtmlx.DataDriver[t],t=arguments[2]):this.data.driver=dhtmlx.DataDriver[this._settings.datatype||"xml"],window.dhx4)return dhx4.ajax.get(n,dhtmlx.bind(function(n){var i=n.xmlDoc,r=i.responseText,u=i.responseXML;this._onLoad&&this._onLoad.call(this,r,u,i);t&&t.call(this,r,u,i)},this));dhtmlx.ajax(n,[this._onLoad,t],this)},parse:function(n,t){this.callEvent("onXLS",[]);this.data.driver=dhtmlx.DataDriver[t||"xml"];this._onLoad(n,null)},_onLoad:function(n,t){var i=this.data.driver,r=i.getRecords(i.toObject(n,t))[0];this.data=i?i.getDetails(r):n;this.callEvent("onXLE",[])},_check_data_feed:function(n){if(!this._settings.dataFeed||this._ignore_feed||!n)return!0;var t=this._settings.dataFeed;return typeof t=="function"?t.call(this,n.id||n,n):(t=t+(t.indexOf("?")==-1?"?":"&")+"action=get&id="+encodeURIComponent(n.id||n),this.callEvent("onXLS",[]),dhtmlx.ajax(t,function(n){this._ignore_feed=!0;this.setValues(dhtmlx.DataDriver.json.toObject(n)[0]);this._ignore_feed=!1;this.callEvent("onXLE",[])},this),!1)}};dhtmlx.DataDriver={};dhtmlx.DataDriver.json={toObject:function(n){return(n||(n="[]"),typeof n=="string")?(eval("dhtmlx.temp="+n),dhtmlx.temp):n},getRecords:function(n){return(n&&n.data&&(n=n.data),n&&!(n instanceof Array))?[n]:n},getDetails:function(n){return n},getInfo:function(n){return{_size:n.total_count||0,_from:n.pos||0,_key:n.dhx_security}}};dhtmlx.DataDriver.json_ext={toObject:function(n){var r,u,i,f,t;if(n||(n="[]"),typeof n=="string"){for(eval("temp="+n),dhtmlx.temp=[],u=r.header,i=0;i<r.data.length;i++){for(f={},t=0;t<u.length;t++)typeof r.data[i][t]!="undefined"&&(f[u[t]]=r.data[i][t]);dhtmlx.temp.push(f)}return dhtmlx.temp}return n},getRecords:function(n){return n&&!(n instanceof Array)?[n]:n},getDetails:function(n){return n},getInfo:function(n){return{_size:n.total_count||0,_from:n.pos||0}}};dhtmlx.DataDriver.html={toObject:function(n){if(typeof n=="string"){var t=null;return n.indexOf("<")==-1&&(t=dhtmlx.toNode(n)),t||(t=document.createElement("DIV"),t.innerHTML=n),t.getElementsByTagName(this.tag)}return n},getRecords:function(n){return n.tagName?n.childNodes:n},getDetails:function(n){return dhtmlx.DataDriver.xml.tagToObject(n)},getInfo:function(){return{_size:0,_from:0}},tag:"LI"};dhtmlx.DataDriver.jsarray={toObject:function(n){return typeof n=="string"?(eval("dhtmlx.temp="+n),dhtmlx.temp):n},getRecords:function(n){return n},getDetails:function(n){for(var i={},t=0;t<n.length;t++)i["data"+t]=n[t];return i},getInfo:function(){return{_size:0,_from:0}}};dhtmlx.DataDriver.csv={toObject:function(n){return n},getRecords:function(n){return n.split(this.row)},getDetails:function(n){var i,t;for(n=this.stringToArray(n),i={},t=0;t<n.length;t++)i["data"+t]=n[t];return i},getInfo:function(){return{_size:0,_from:0}},stringToArray:function(n){n=n.split(this.cell);for(var t=0;t<n.length;t++)n[t]=n[t].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return n},row:"\n",cell:","};dhtmlx.DataDriver.xml={toObject:function(n,t){return t&&(t=this.checkResponse(n,t))?t:typeof n=="string"?this.fromString(n):n},getRecords:function(n){return this.xpath(n,this.records)},records:"/*/item",getDetails:function(n){return this.tagToObject(n,{})},getInfo:function(n){return{_size:n.documentElement.getAttribute("total_count")||0,_from:n.documentElement.getAttribute("pos")||0,_key:n.documentElement.getAttribute("dhx_security")}},xpath:function(n,t){var u,r,o;if(window.XPathResult){u=n;n.nodeName.indexOf("document")==-1&&(n=n.ownerDocument);for(var f=[],e=n.evaluate(t,u,null,XPathResult.ANY_TYPE,null),i=e.iterateNext();i;)f.push(i),i=e.iterateNext();return f}r=!0;try{typeof n.selectNodes=="undefined"&&(r=!1)}catch(s){}return r?n.selectNodes(t):(o=t.split("/").pop(),n.getElementsByTagName(o))},tagToObject:function(n,t){var u,f,i;t=t||{};var e=!1,r=n.childNodes;for(i=0;i<r.length;i++)r[i].nodeType==1&&(u=r[i].tagName,typeof t[u]!="undefined"?(t[u]instanceof Array||(t[u]=[t[u]]),t[u].push(this.tagToObject(r[i],{}))):t[r[i].tagName]=this.tagToObject(r[i],{}),e=!0);if(f=n.attributes,f&&f.length){for(i=0;i<f.length;i++)t[f[i].name]=f[i].value;e=!0}return e?(t.value=this.nodeValue(n),t):this.nodeValue(n)},nodeValue:function(n){return n.firstChild?n.firstChild.wholeText||n.firstChild.data:""},fromString:function(n){if(window.DOMParser&&!dhtmlx._isIE)return(new DOMParser).parseFromString(n,"text/xml");if(window.ActiveXObject){var t=new ActiveXObject("Microsoft.xmlDOM");return t.loadXML(n),t}dhtmlx.error("Load from xml string is not supported")},checkResponse:function(n,t){if(t&&t.firstChild&&t.firstChild.tagName!="parsererror")return t;var i=this.fromString(n.replace(/^[\s]+/,""));if(i)return i;dhtmlx.error("xml can't be parsed",n)}};dhtmlx.DataLoader={_init:function(n){n=n||"";this.name="DataStore";this.data=n.datastore||new dhtmlx.DataStore;this._readyHandler=this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._call_onready,this))},load:function(n){dhtmlx.AtomDataLoader.load.apply(this,arguments);this.data.feed||(this.data.feed=function(t,i){if(this._load_count)return this._load_count=[t,i];this._load_count=!0;this.load(n+(n.indexOf("?")==-1?"?":"&")+"posStart="+t+"&count="+i,function(){var n=this._load_count;this._load_count=!1;typeof n=="object"&&this.data.feed.apply(this,n)})})},_onLoad:function(n,t){this.data._parse(this.data.driver.toObject(n,t));this.callEvent("onXLE",[]);this._readyHandler&&(this.data.detachEvent(this._readyHandler),this._readyHandler=null)},dataFeed_setter:function(n){return this.data.attachEvent("onBeforeFilter",dhtmlx.bind(function(n,t){var i,r,u,f;if(this._settings.dataFeed){if(i={},!n&&!i)return;if(typeof n=="function"){if(!t)return;n(t,i)}else i={text:t};if(this.clearAll(),r=this._settings.dataFeed,typeof r=="function")return r.call(this,t,i);u=[];for(f in i)u.push("dhx_filter["+f+"]="+encodeURIComponent(i[f]));return this.load(r+(r.indexOf("?")<0?"?":"&")+u.join("&"),this._settings.datatype),!1}},this)),n},_call_onready:function(){if(this._settings.ready){var n=dhtmlx.toFunctor(this._settings.ready);n&&n.call&&n.apply(this,arguments)}}};dhtmlx.DataStore=function(){this.name="DataStore";dhtmlx.extend(this,dhtmlx.EventSystem);this.setDriver("xml");this.pull={};this.order=dhtmlx.toArray()};dhtmlx.DataStore.prototype={setDriver:function(n){dhtmlx.assert(dhtmlx.DataDriver[n],"incorrect DataDriver");this.driver=dhtmlx.DataDriver[n]},_parse:function(n){var u,e,f,o,t,r,i;for(this.callEvent("onParse",[this.driver,n]),this._filter_order&&this.filter(),u=this.driver.getInfo(n),u._key&&(dhtmlx.security_key=u._key),e=this.driver.getRecords(n),f=(u._from||0)*1,f===0&&this.order[0]&&(f=this.order.length),o=0,t=0;t<e.length;t++)i=this.driver.getDetails(e[t]),r=this.id(i),this.pull[r]||(this.order[o+f]=r,o++),this.pull[r]=i,this.extraParser&&this.extraParser(i),this._scheme&&(this._scheme.$init?this._scheme.$update(i):this._scheme.$update&&this._scheme.$update(i));for(t=0;t<u._size;t++)this.order[t]||(r=dhtmlx.uid(),i={id:r,$template:"loading"},this.pull[r]=i,this.order[t]=r);this.callEvent("onStoreLoad",[this.driver,n]);this.refresh()},id:function(n){return n.id||(n.id=dhtmlx.uid())},changeId:function(n,t){dhtmlx.assert(this.pull[n],"Can't change id, for non existing item: "+n);this.pull[t]=this.pull[n];this.pull[t].id=t;this.order[this.order.find(n)]=t;this._filter_order&&(this._filter_order[this._filter_order.find(n)]=t);this.callEvent("onIdChange",[n,t]);this._render_change_id&&this._render_change_id(n,t)},get:function(n){return this.item(n)},set:function(n,t){return this.update(n,t)},item:function(n){return this.pull[n]},update:function(n,t){if(this._scheme&&this._scheme.$update&&this._scheme.$update(t),this.callEvent("onBeforeUpdate",[n,t])===!1)return!1;this.pull[n]=t;this.refresh(n)},refresh:function(n){this._skip_refresh||(n?this.callEvent("onStoreUpdated",[n,this.pull[n],"update"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(n){this._skip_refresh=!0;n.call(this);this._skip_refresh=!1},getRange:function(n,t){if(n=n?this.indexById(n):this.startOffset||0,t?t=this.indexById(t):(t=Math.min(this.endOffset||Infinity,this.dataCount()-1),t<0&&(t=0)),this.min&&(n=this.min),this.max&&(t=this.max),n>t){var i=t;t=n;n=i}return this.getIndexRange(n,t)},getIndexRange:function(n,t){var r,i;for(t=Math.min(t||Infinity,this.dataCount()-1),r=dhtmlx.toArray(),i=n||0;i<=t;i++)r.push(this.item(this.order[i]));return r},dataCount:function(){return this.order.length},exists:function(n){return!!this.pull[n]},move:function(n,t){if(n<0||t<0){dhtmlx.error("DataStore::move","Incorrect indexes");return}var i=this.idByIndex(n),r=this.item(i);this.order.removeAt(n);this.order.insertAt(i,Math.min(this.order.length,t));this.callEvent("onStoreUpdated",[i,r,"move"])},scheme:function(n){this._scheme=n},sync:function(n,t,i){var u,r;typeof t!="function"&&(i=t,t=null);dhtmlx.debug_bind&&(this.debug_sync_master=n,dhtmlx.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id));u=n;n.name!="DataStore"&&(n=n.data);r=dhtmlx.bind(function(r,u,f){(f!="update"||t)&&(r=null);r||(this.order=dhtmlx.toArray([].concat(n.order)),this._filter_order=null,this.pull=n.pull,t&&this.silent(t),this._on_sync&&this._on_sync());dhtmlx.debug_bind&&dhtmlx.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id);i?i=!1:this.refresh(r)},this);n.attachEvent("onStoreUpdated",r);this.feed=function(n,t){u.loadNext(t,n)};r()},add:function(n,t){var r,i,u,f;if(this._scheme){n=n||{};for(r in this._scheme)n[r]=n[r]||this._scheme[r];this._scheme&&(this._scheme.$init?this._scheme.$update(n):this._scheme.$update&&this._scheme.$update(n))}return(i=this.id(n),u=this.dataCount(),(dhtmlx.isNotDefined(t)||t<0)&&(t=u),t>u&&(dhtmlx.log("Warning","DataStore:add","Index of out of bounds"),t=Math.min(this.order.length,t)),this.callEvent("onBeforeAdd",[i,n,t])===!1)?!1:this.exists(i)?dhtmlx.error("Not unique ID"):(this.pull[i]=n,this.order.insertAt(i,t),this._filter_order&&(f=this._filter_order.length,!t&&this.order.length&&(f=0),this._filter_order.insertAt(i,f)),this.callEvent("onafterAdd",[i,t]),this.callEvent("onStoreUpdated",[i,n,"add"]),i)},remove:function(n){var t,i;if(n instanceof Array){for(t=0;t<n.length;t++)this.remove(n[t]);return}if(this.callEvent("onBeforeDelete",[n])===!1)return!1;if(!this.exists(n))return dhtmlx.error("Not existing ID",n);i=this.item(n);this.order.remove(n);this._filter_order&&this._filter_order.remove(n);delete this.pull[n];this.callEvent("onafterdelete",[n]);this.callEvent("onStoreUpdated",[n,i,"delete"])},clearAll:function(){this.pull={};this.order=dhtmlx.toArray();this.feed=null;this._filter_order=null;this.callEvent("onClearAll",[]);this.refresh()},idByIndex:function(n){return(n>=this.order.length||n<0)&&dhtmlx.log("Warning","DataStore::idByIndex Incorrect index"),this.order[n]},indexById:function(n){return this.order.find(n)},next:function(n,t){return this.order[this.indexById(n)+(t||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(n,t){return this.order[this.indexById(n)-(t||1)]},sort:function(n,t,i){var r=n,u,e,f;(typeof n=="function"?r={as:n,dir:t}:typeof n=="string"&&(r={by:n,dir:t,as:i}),u=[r.by,r.dir,r.as],this.callEvent("onbeforesort",u))&&(this.order.length&&(e=dhtmlx.sort.create(r),f=this.getRange(this.first(),this.last()),f.sort(e),this.order=f.map(function(n){return this.id(n)},this)),this.refresh(),this.callEvent("onaftersort",u))},filter:function(n,t){var r,u,i,f;if(this.callEvent("onBeforeFilter",[n,t])&&(this._filter_order&&(this.order=this._filter_order,delete this._filter_order),this.order.length)){if(n){for(r=n,t=t||"",typeof n=="string"&&(n=dhtmlx.Template.fromHTML(n),t=t.toString().toLowerCase(),r=function(t,i){return n(t).toLowerCase().indexOf(i)!=-1}),u=dhtmlx.toArray(),i=0;i<this.order.length;i++)f=this.order[i],r(this.item(f),t)&&u.push(f);this._filter_order=this.order;this.order=u}this.refresh();this.callEvent("onAfterFilter",[])}},each:function(n,t){for(var i=0;i<this.order.length;i++)n.call(t||this,this.item(this.order[i]))},provideApi:function(n,t){var r,i;for(this.debug_bind_master=n,t&&this.mapEvent({onbeforesort:n,onaftersort:n,onbeforeadd:n,onafteradd:n,onbeforedelete:n,onafterdelete:n,onbeforeupdate:n}),r=["get","set","sort","add","remove","exists","idByIndex","indexById","item","update","refresh","dataCount","filter","next","previous","clearAll","first","last","serialize"],i=0;i<r.length;i++)n[r[i]]=dhtmlx.methodPush(this,r[i]);dhtmlx.assert_enabled()&&this.assert_event(n)},serialize:function(){for(var t=this.order,i=[],n=0;n<t.length;n++)i.push(this.pull[t[n]]);return i}};dhtmlx.sort={create:function(n){return dhtmlx.sort.dir(n.dir,dhtmlx.sort.by(n.by,n.as))},as:{int:function(n,t){return n=n*1,t=t*1,n>t?1:n<t?-1:0},string_strict:function(n,t){return n=n.toString(),t=t.toString(),n>t?1:n<t?-1:0},string:function(n,t){return n=n.toString().toLowerCase(),t=t.toString().toLowerCase(),n>t?1:n<t?-1:0}},by:function(n,t){return n?(typeof t!="function"&&(t=dhtmlx.sort.as[t||"string"]),n=dhtmlx.Template.fromHTML(n),function(i,r){return t(n(i),n(r))}):t},dir:function(n,t){return n=="asc"?t:function(n,i){return t(n,i)*-1}}};dhtmlx.KeyEvents={_init:function(){dhtmlx.event(this._obj,"keypress",this._onKeyPress,this)},_onKeyPress:function(n){n=n||event;var t=n.which||n.keyCode;this.callEvent(this._edit_id?"onEditKeyPress":"onKeyPress",[t,n.ctrlKey,n.shiftKey,n])}};dhtmlx.MouseEvents={_init:function(){this.on_click&&(dhtmlx.event(this._obj,"click",this._onClick,this),dhtmlx.event(this._obj,"contextmenu",this._onContext,this));this.on_dblclick&&dhtmlx.event(this._obj,"dblclick",this._onDblClick,this);this.on_mouse_move&&(dhtmlx.event(this._obj,"mousemove",this._onMouse,this),dhtmlx.event(this._obj,dhtmlx._isIE?"mouseleave":"mouseout",this._onMouse,this))},_onClick:function(n){return this._mouseEvent(n,this.on_click,"ItemClick")},_onDblClick:function(n){return this._mouseEvent(n,this.on_dblclick,"ItemDblClick")},_onContext:function(n){var t=dhtmlx.html.locate(n,this._id);if(t&&!this.callEvent("onBeforeContextMenu",[t,n]))return dhtmlx.html.preventEvent(n)},_onMouse:function(n){dhtmlx._isIE&&(n=document.createEventObject(event));this._mouse_move_timer&&window.clearTimeout(this._mouse_move_timer);this.callEvent("onMouseMoving",[n]);this._mouse_move_timer=window.setTimeout(dhtmlx.bind(function(){n.type=="mousemove"?this._onMouseMove(n):this._onMouseOut(n)},this),500)},_onMouseMove:function(n){this._mouseEvent(n,this.on_mouse_move,"MouseMove")||this.callEvent("onMouseOut",[n||event])},_onMouseOut:function(n){this.callEvent("onMouseOut",[n||event])},_mouseEvent:function(n,t,i){n=n||event;for(var r=n.target||n.srcElement,u="",f=null,e=!1;r&&r.parentNode;){if(!e&&r.getAttribute&&(f=r.getAttribute(this._id),f)){if(r.getAttribute("userdata")&&this.callEvent("onLocateData",[f,r,n]),!this.callEvent("on"+i,[f,n,r]))return;e=!0}if(u=r.className,u&&(u=u.split(" "),u=u[0]||u[1],t[u]))return t[u].call(this,n,f||dhtmlx.html.locate(n,this._id),r);r=r.parentNode}return e}};dhtmlx.Settings={_init:function(){this._settings=this.config={}},define:function(n,t){return typeof n=="object"?this._parseSeetingColl(n):this._define(n,t)},_define:function(n,t){dhtmlx.assert_settings.call(this,n,t);var i=this[n+"_setter"];return this._settings[n]=i?i.call(this,t):t},_parseSeetingColl:function(n){if(n)for(var t in n)this._define(t,n[t])},_parseSettings:function(n,t){var i=dhtmlx.extend({},t);typeof n!="object"||n.tagName||dhtmlx.extend(i,n);this._parseSeetingColl(i)},_mergeSettings:function(n,t){for(var i in t)switch(typeof n[i]){case"object":n[i]=this._mergeSettings(n[i]||{},t[i]);break;case"undefined":n[i]=t[i]}return n},_parseContainer:function(n,t,i){typeof n!="object"||n.tagName||(n=n.container);this._obj=this.$view=dhtmlx.toNode(n);!this._obj&&i&&(this._obj=i(n));dhtmlx.assert(this._obj,"Incorrect html container");this._obj.className+=" "+t;this._obj.onselectstart=function(){return!1};this._dataobj=this._obj},_set_type:function(n){if(typeof n=="object")return this.type_setter(n);dhtmlx.assert(this.types,"RenderStack :: Types are not defined");dhtmlx.assert(this.types[n],"RenderStack :: Inccorect type name",n);this.type=dhtmlx.extend({},this.types[n]);this.customize()},customize:function(n){n&&dhtmlx.extend(this.type,n);this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type));this.type._item_end=this.template_item_end(this.type);this.render()},type_setter:function(n){return this._set_type(typeof n=="object"?dhtmlx.Type.add(this,n):n),n},template_setter:function(n){return this.type_setter({template:n})},css_setter:function(n){return this._obj.className+=" "+n,n}};dhtmlx.Template={_cache:{},empty:function(){return""},setter:function(n){return dhtmlx.Template.fromHTML(n)},obj_setter:function(n){var t=dhtmlx.Template.setter(n),i=this;return function(){return t.apply(i,arguments)}},fromHTML:function(n){return typeof n=="function"?n:this._cache[n]?this._cache[n]:(n=(n||"").toString(),n=n.replace(/[\r\n]+/g,"\\n"),n=n.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"'),n=n.replace(/\{common\.([^}\(]*)\}/g,'"+common.$1+"'),n=n.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1(obj):"")+"'),n=n.replace(/\{obj\.([^}]*)\}/g,'"+obj.$1+"'),n=n.replace(/#([a-z0-9_]+)#/gi,'"+obj.$1+"'),n=n.replace(/\{obj\}/g,'"+obj+"'),n=n.replace(/\{-obj/g,"{obj"),n=n.replace(/\{-common/g,"{common"),n='return "'+n+'";',this._cache[n]=Function("obj","common",n))}};dhtmlx.Type={add:function(n,t){!n.types&&n.prototype.types&&(n=n.prototype);dhtmlx.assert_enabled()&&this.assert_event(t);var i=t.name||"default";return this._template(t),this._template(t,"edit"),this._template(t,"loading"),n.types[i]=dhtmlx.extend(dhtmlx.extend({},n.types[i]||this._default),t),i},_default:{css:"default",template:function(){return""},template_edit:function(){return""},template_loading:function(){return"..."},width:150,height:80,margin:5,padding:0},_template:function(n,t){t="template"+(t?"_"+t:"");var i=n[t];if(i&&typeof i=="string"){if(i.indexOf("->")!=-1){i=i.split("->");switch(i[0]){case"html":i=dhtmlx.html.getValue(i[1]).replace(/\"/g,'\\"');break;case"http":i=(new dhtmlx.ajax).sync().get(i[1],{uid:(new Date).valueOf()}).responseText}}n[t]=dhtmlx.Template.fromHTML(i)}}};dhtmlx.SingleRender={_init:function(){},_toHTML:function(n){return this.type._item_start(n,this.type)+this.type.template(n,this.type)+this.type._item_end},render:function(){(!this.callEvent||this.callEvent("onBeforeRender",[this.data]))&&(this.data&&(this._dataobj.innerHTML=this._toHTML(this.data)),this.callEvent&&this.callEvent("onAfterRender",[]))}};dhtmlx.ui.Tooltip=function(n){this.name="Tooltip";dhtmlx.assert_enabled()&&this._assert();typeof n=="string"&&(n={template:n});dhtmlx.extend(this,dhtmlx.Settings);dhtmlx.extend(this,dhtmlx.SingleRender);this._parseSettings(n,{type:"default",dy:0,dx:20});this._dataobj=this._obj=document.createElement("DIV");this._obj.className="dhx_tooltip";dhtmlx.html.insertBefore(this._obj,document.body.firstChild)};dhtmlx.ui.Tooltip.prototype={show:function(n,t){this._disabled||(this.data!=n&&(this.data=n,this.render(n)),this._obj.style.top=t.y+this._settings.dy+"px",this._obj.style.left=t.x+this._settings.dx+"px",this._obj.style.display="block")},hide:function(){this.data=null;this._obj.style.display="none"},disable:function(){this._disabled=!0},enable:function(){this._disabled=!1},types:{"default":dhtmlx.Template.fromHTML("{obj.id}")},template_item_start:dhtmlx.Template.empty,template_item_end:dhtmlx.Template.empty};dhtmlx.AutoTooltip={tooltip_setter:function(n){var t=new dhtmlx.ui.Tooltip(n);return this.attachEvent("onMouseMove",function(n,i){t.show(this.get(n),dhtmlx.html.pos(i))}),this.attachEvent("onMouseOut",function(){t.hide()}),this.attachEvent("onMouseMoving",function(){t.hide()}),t}};dhtmlx.compat=function(n,t){dhtmlx.compat[n]&&dhtmlx.compat[n](t)};dhtmlx.attaches||(dhtmlx.attaches={});dhtmlx.attaches.attachAbstract=function(n,t){var i=document.createElement("DIV"),r,u;return i.id="CustomObject_"+dhtmlx.uid(),i.style.width="100%",i.style.height="100%",i.cmp="grid",document.body.appendChild(i),this.attachObject(i.id),t.container=i.id,r=this.vs[this.av],r.grid=new window[n](t),r.gridId=i.id,r.gridObj=i,r.grid.setSizes=function(){this.resize?this.resize():this.render()},u="_viewRestore",this.vs[this[u]()].grid};dhtmlx.attaches.attachDataView=function(n){return this.attachAbstract("dhtmlXDataView",n)};dhtmlx.attaches.attachChart=function(n){return this.attachAbstract("dhtmlXChart",n)};dhtmlx.compat.layout=function(){};dhtmlXCellObject.prototype.showView=function(n){if(this.conf.view==n)return!1;this._viewSave(this.conf.view);this._viewRestore(n);this._updateIdx();this._adjustCont();this.conf.view=n;var t=typeof this.conf.views_loaded[this.conf.view]=="undefined";return this.conf.views_loaded[this.conf.view]=!0,t};dhtmlXCellObject.prototype.getViewName=function(){return this.conf.view};dhtmlXCellObject.prototype.unloadView=function(n){var r,t,i;if(n==this.conf.view){r=this.conf.unloading;this.conf.unloading=!0;typeof this.detachMenu=="function"&&this.detachMenu();typeof this.detachToolbar=="function"&&this.detachToolbar();typeof this.detachRibbon=="function"&&this.detachRibbon();this.detachStatusBar();this._detachObject(null,!0);this.conf.unloading=r;this.conf.unloading||this._adjustCont(this._idd);return}if(this.views[n]!=null){t=this.views[n];for(i in t.dataNodes)typeof t.dataNodes[i].unload=="function"&&t.dataNodes[i].unload(),t.dataNodes[i]=null,t.dataNodesCont[i]=null;t.dataType=="url"?t.cellCont!=null&&t.cellCont[0]!="null"&&this._detachURLEvents(t.cellCont[0]):t.dataObj!=null&&(typeof t.dataObj.unload=="function"?t.dataObj.unload():typeof t.dataObj.destructor=="function"&&t.dataObj.destructor(),t.dataObj=null);t=null;this._viewDelete(n);typeof this.conf.views_loaded[n]!="undefined"&&delete this.conf.views_loaded[n]}};dhtmlXCellObject.prototype.getId=function(){return this._idd};dhtmlXCellObject.prototype.progressOn=function(){var t,n;this.conf.progress!=!0&&(this.conf.progress=!0,t=document.createElement("DIV"),t.className=this.conf.idx_data.pr1,n=document.createElement("DIV"),this.conf.skin=="material"&&(window.dhx4.isFF||window.dhx4.isChrome||window.dhx4.isOpera||window.dhx4.isEdge)?(n.className=this.conf.idx_data.pr3,n.innerHTML='<svg class="dhx_cell_prsvg" viewBox="25 25 50 50"><circle class="dhx_cell_prcircle" cx="50" cy="50" r="20"/><\/svg>'):n.className=this.conf.idx_data.pr2,this.conf.idx.cover!=null?this.cell.insertBefore(n,this.cell.childNodes[this.conf.idx.cover]):this.cell.appendChild(n),this.cell.insertBefore(t,n),t=n=null,this._updateIdx(),this._adjustProgress())};dhtmlXCellObject.prototype.progressOff=function(){var t,n;if(this.conf.progress==!0){for(t in{pr3:3,pr2:2,pr1:1})n=this.cell.childNodes[this.conf.idx[t]],n!=null&&n.parentNode.removeChild(n),n=null;this.conf.progress=!1;this._updateIdx()}};dhtmlXCellObject.prototype._adjustProgress=function(){if(this.conf.idx.pr1!=null){this.conf.pr||(this.conf.pr={});var t=this.cell.childNodes[this.conf.idx.pr1],n=this.cell.childNodes[this.conf.idx.pr2]||this.cell.childNodes[this.conf.idx.pr3];this.conf.pr.ofs||(n.style.width=t.offsetWidth+"px",n.style.height=t.offsetHeight+"px",this.conf.pr.ofs={w:n.offsetWidth-n.clientWidth,h:n.offsetHeight-n.clientHeight});n.style.width=t.offsetWidth-this.conf.pr.ofs.w+"px";n.style.height=t.offsetHeight-this.conf.pr.ofs.h+"px";t=n=null}};dhtmlXCellObject.prototype._showCellCover=function(){if(this.conf.cover!=!0){this.conf.cover=!0;var n=document.createElement("DIV");n.className=this.conf.idx_data.cover;this.cell.appendChild(n);n=null;this._updateIdx()}};dhtmlXCellObject.prototype._hideCellCover=function(){this.conf.cover==!0&&(this.cell.removeChild(this.cell.childNodes[this.conf.idx.cover]),this._updateIdx(),this.conf.cover=!1)};dhtmlXCellObject.prototype._showBorders=function(n){this.conf.borders||(this.conf.borders=!0,this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css,this.conf.cells_cont=null,this._mtbUpdBorder(),this.callEvent("_onBorderChange",[!0]),n!==!0&&this._adjustCont(this._idd))};dhtmlXCellObject.prototype._hideBorders=function(n){this.conf.borders&&(this.conf.borders=!1,this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css+" dhx_cell_cont_no_borders",this.conf.cells_cont=null,this._mtbUpdBorder(),this.callEvent("_onBorderChange",[!1]),n!==!0&&this._adjustCont(this._idd))};dhtmlXCellObject.prototype._getWidth=function(){return this.cell.offsetWidth};dhtmlXCellObject.prototype._getHeight=function(){return this.cell.offsetHeight};dhtmlXCellObject.prototype.showInnerScroll=function(){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto"};dhtmlXCellObject.prototype._unload=function(){var n;this.conf.unloading=!0;this.callEvent("_onCellUnload",[]);this.progressOff();this.unloadView(this.conf.view);this.dataNodes=null;this.cell.parentNode.removeChild(this.cell);this.cell=null;window.dhx4._eventable(this,"clear");for(n in this.views)this.unloadView(n);this.conf=null;for(n in this)this[n]=null};dhtmlXCellObject.prototype.attachObject=function(n,t){if(!window.dhx4.s2b(t)||typeof dhtmlXWindowsCell=="function"&&this instanceof window.dhtmlXWindowsCell||(t=!1),typeof n=="string"&&(n=document.getElementById(n)),n.parentNode==this.cell.childNodes[this.conf.idx.cont]){n=null;return}if(t){n.style.display="";var i=n.offsetWidth,r=n.offsetHeight}this._attachObject(n);this.dataType="obj";n.style.display="";n=null;t&&this._adjustByCont(i,r)};dhtmlXCellObject.prototype.appendObject=function(n){if(typeof n=="string"&&(n=document.getElementById(n)),n.parentNode==this.cell.childNodes[this.conf.idx.cont]){n=null;return}this.conf.append_mode||(this.cell.childNodes[this.conf.idx.cont].style.overflow="auto",this.conf.append_mode=!0);this._attachObject(n,null,null,!0);this.dataType="obj";n.style.display="";n=null};dhtmlXCellObject.prototype.detachObject=function(n,t){this._detachObject(null,n,t)};dhtmlXCellObject.prototype.getAttachedStatusBar=function(){return this.dataNodes.sb};dhtmlXCellObject.prototype.getAttachedObject=function(){return this.dataType=="obj"||this.dataType=="url"||this.dataType=="url-ajax"?this.cell.childNodes[this.conf.idx.cont].firstChild:this.dataObj};dhtmlXCellObject.prototype.attachURL=function(n,t,i){var f,r,e,o,u,s;if(i==!0&&(i={}),f=typeof i!="undefined"&&i!=!1&&i!=null,this.conf.url_data==null&&(this.conf.url_data={}),this.conf.url_data.url=n,this.conf.url_data.ajax=t==!0,this.conf.url_data.post_data=i==!0?{}:i||null,this.conf.url_data.xml_doc!=null){try{this.conf.url_data.xml_doc.xmlDoc.abort()}catch(h){}this.conf.url_data.xml_doc.xmlDoc=null;this.conf.url_data.xml_doc=null}if(t==!0)if(r=this,f){e="";for(o in i)e+="&"+encodeURIComponent(o)+"="+encodeURIComponent(i[o]);this.conf.url_data.xml_doc=dhx4.ajax.post(n,e,function(n){r.attachHTMLString!=null&&typeof n.xmlDoc.responseText=="string"&&(r.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+n.xmlDoc.responseText+"<\/div>"),typeof r._doOnFrameContentLoaded=="function"&&r._doOnFrameContentLoaded(),r.dataType="url-ajax");r=n=null})}else this.conf.url_data.xml_doc=dhx4.ajax.get(n,function(n){r.attachHTMLString!=null&&typeof n.xmlDoc.responseText=="string"&&(r.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+n.xmlDoc.responseText+"<\/div>"),typeof r._doOnFrameContentLoaded=="function"&&r._doOnFrameContentLoaded(),r.dataType="url-ajax");r=n=null});else this.dataType=="url"?u=this.getFrame():(u=document.createElement("IFRAME"),u.frameBorder=0,u.border=0,u.style.width="100%",u.style.height="100%",u.style.position="relative",this._attachObject(u),this.dataType="url",this._attachURLEvents()),f?(s=typeof this.conf.url_data.post_ifr=="undefined",this.conf.url_data.post_ifr=!0,s&&this._attachURLEvents(),u.src="about:blank"):u.src=n+window.dhx4.ajax._dhxr(n),u=null;u=null};dhtmlXCellObject.prototype.reloadURL=function(){(this.dataType=="url"||this.dataType=="url-ajax")&&this.conf.url_data!=null&&this.attachURL(this.conf.url_data.url,this.conf.url_data.ajax,this.conf.url_data.post_data)};dhtmlXCellObject.prototype.attachHTMLString=function(n){var r,t,i;for(this._attachObject(null,null,n),r=n.match(/<script[^>]*>[^\f]*?<\/script>/g)||[],t=0;t<r.length;t++)i=r[t].replace(/<([\/]{0,1})script[^>]*>/gi,""),i&&(window.execScript?window.execScript(i):window.eval(i))};dhtmlXCellObject.prototype.attachScheduler=function(n,t,i,r){var f,e,u;return r=r||window.scheduler,f=!1,i&&(u=document.getElementById(i),u&&(f=!0)),f||(e=i||'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"><\/div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"><\/div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"><\/div>',u=document.createElement("DIV"),u.id="dhxSchedObj_"+(new Date).getTime(),u.style.width="100%",u.style.height="100%",u.style.position="relative",u.style.overflow="hidden",u.className="dhx_cal_container",u.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;<\/div><div class="dhx_cal_next_button">&nbsp;<\/div><div class="dhx_cal_today_button"><\/div><div class="dhx_cal_date"><\/div>'+e+'<\/div><div class="dhx_cal_header"><\/div><div class="dhx_cal_data"><\/div>'),this._attachObject(u),this.dataType="scheduler",this.dataObj=r,this.dataObj.setSizes=function(){this.update_view()},r.init(u.id,n,t),u=null,this.callEvent("_onContentAttach",[]),this.dataObj};dhtmlXCellObject.prototype.attachMap=function(n){var t=document.createElement("DIV");return t.style.width="100%",t.style.height="100%",t.style.position="relative",t.style.overflow="hidden",this._attachObject(t),n||(n={center:new google.maps.LatLng(40.719837,-73.992348),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP}),this.dataType="maps",this.dataObj=new google.maps.Map(t,n),this.dataObj.setSizes=function(){google.maps.event.trigger(this,"resize")},t=null,this.callEvent("_onContentAttach",[]),this.dataObj};dhtmlXCellObject.prototype._createNode_sb=function(n,t,i,r,u){if(typeof u!="undefined")n=u;else{var f=t||{},o=typeof f.text=="string"&&f.text.length>0?f.text:"&nbsp;",e=typeof f.height=="number"?f.height:!1,n=document.createElement("DIV");n.className="dhx_cell_statusbar_def";n.innerHTML="<div class='"+(f.paging==!0?"dhx_cell_statusbar_paging":"dhx_cell_statusbar_text")+"'>"+o+"<\/div>";e!=!1&&(n.firstChild.style.height=n.firstChild.style.lineHeight=e+"px")}return this.conf.idx.pr1!=null?this.cell.insertBefore(n,this.cell.childNodes[this.conf.idx.pr1]):this.cell.appendChild(n),this.conf.ofs_nodes.b.sb=!0,this._updateIdx(),this._adjustCont(this._idd),n};dhtmlXCellObject.prototype.attachStatusBar=function(n){if(!this.dataNodes.sb)return n!=null&&window.dhx4.s2b(n.paging)==!0&&(n.height=null),this.conf.skin=="dhx_skyblue"&&typeof dhtmlXWindowsCell=="function"&&this instanceof window.dhtmlXWindowsCell&&(this.cell.childNodes[this.conf.idx.cont].className+=" dhx_cell_statusbar_attached"),this.dataNodes.sb=this._attachObject("sb",n),this.dataNodes.sb.setText=function(n){this.childNodes[0].innerHTML=n},this.dataNodes.sb.getText=function(){return this.childNodes[0].innerHTML},this.dataNodes.sb.onselectstart=function(){return!1},this.dataNodes.sb};dhtmlXCellObject.prototype.detachStatusBar=function(){this.dataNodes.sb&&(this.conf.skin=="dhx_skyblue"&&typeof dhtmlXWindowsCell=="function"&&this instanceof window.dhtmlXWindowsCell&&(this.cell.childNodes[this.conf.idx.cont].className=this.cell.childNodes[this.conf.idx.cont].className.replace(/\s{0,}dhx_cell_statusbar_attached/,"")),this.dataNodes.sb.setText=this.dataNodes.sb.getText=this.dataNodes.sb.onselectstart=null,this.dataNodes.sb=null,delete this.dataNodes.sb,this._detachObject("sb"))};dhtmlXCellObject.prototype.showStatusBar=function(){this._mtbShowHide("sb","")};dhtmlXCellObject.prototype.hideStatusBar=function(){this._mtbShowHide("sb","none")};dhtmlXCellObject.prototype._mtbShowHide=function(n,t){this.dataNodes[n]&&(this.cell.childNodes[this.conf.idx[n]].style.display=t,this._adjustCont())};dhtmlXCellObject.prototype.getFrame=dhtmlXCellObject.prototype._getFrame=function(){return this.dataType!="url"?null:this.cell.childNodes[this.conf.idx.cont].firstChild};dhtmlXCellObject.prototype._attachURLEvents=function(){if(this.dataType=="url"){var n=this,i=this._idd,t=this.cell.childNodes[this.conf.idx.cont].firstChild;typeof this._doOnFrameMouseDown!="function"&&(this._doOnFrameMouseDown=function(t){n.callEvent("_onContentMouseDown",[i,t||event])});typeof addEventListener=="function"?t.onload=function(){try{typeof n._doOnFrameMouseDown=="function"&&this.contentWindow.document.body.addEventListener("mousedown",n._doOnFrameMouseDown,!1)}catch(t){}try{typeof n._doOnFrameContentLoaded=="function"&&n._doOnFrameContentLoaded()}catch(t){}}:t.onreadystatechange=function(){if(this.readyState=="complete"){try{typeof n._doOnFrameMouseDown=="function"&&this.contentWindow.document.body.attachEvent("onmousedown",n._doOnFrameMouseDown)}catch(t){}try{typeof n._doOnFrameContentLoaded=="function"&&n._doOnFrameContentLoaded()}catch(t){}}}}};dhtmlXCellObject.prototype._doOnFrameContentLoaded=function(){var u,n,r,t,i;if(this.conf.url_data.post_ifr==!0){u=this.getFrame().contentWindow.document;n=u.createElement("FORM");n.method="POST";n.action=this.conf.url_data.url;u.body.appendChild(n);r={};window.dhx4.ajax.cache!=!0&&(r["dhxr"+(new Date).getTime()]="1");for(t in this.conf.url_data.post_data)r[t]=this.conf.url_data.post_data[t];for(t in r)i=u.createElement("INPUT"),i.type="hidden",i.name=t,i.value=r[t],n.appendChild(i),i=null;this.conf.url_data.post_ifr=!1;n.submit()}else this.callEvent("_onContentLoaded",[this._idd])};dhtmlXCellObject.prototype._detachURLEvents=function(n){if(n==null){if(this.dataType!="url")return;n=this.cell.childNodes[this.conf.idx.cont].firstChild}if(n){if(typeof addEventListener=="function"){n.onload=null;try{n.contentWindow.document.body.removeEventListener("mousedown",this._doOnFrameMouseDown,!1)}catch(t){}}else{n.onreadystatechange=null;try{n.contentWindow.document.body.detachEvent("onmousedown",this._doOnFrameMouseDown)}catch(t){}}n=null}};dhtmlXCellObject.prototype._attachObject=function(n,t,i,r){if(typeof n=="string"&&{menu:1,toolbar:1,ribbon:1,sb:1}[n]==1)return this["_createNode_"+n].apply(this,arguments);r!=!0&&this._detachObject(null,!0,null);typeof i=="string"?this.cell.childNodes[this.conf.idx.cont].innerHTML=i:this.cell.childNodes[this.conf.idx.cont].appendChild(n);n=null};dhtmlXCellObject.prototype._detachObject=function(n,t,i){var r,u;if(this.callEvent("_onBeforeContentDetach",[]),n=="menu"||n=="toolbar"||n=="ribbon"||n=="sb"){r=this.cell.childNodes[this.conf.idx[n]];r.parentNode.removeChild(r);r=null;this.conf.ofs_nodes[n=="sb"?"b":"t"][n]=!1;this._updateIdx();this.conf.unloading||this._adjustCont(this._idd);return}if(t==!0?i=!1:typeof i=="undefined"?i=document.body:typeof i=="string"&&(i=document.getElementById(i)),i===!1){if(this.conf.unloading==!0&&String(this.dataType).match(/ajax/)!=null&&this.conf.url_data!=null&&this.conf.url_data.xml_doc!=null){try{this.conf.url_data.xml_doc.xmlDoc.abort()}catch(f){}this.conf.url_data.xml_doc.xmlDoc=null;this.conf.url_data.xml_doc=null}this.dataType=="url"?this._detachURLEvents():this.dataObj!=null&&(typeof this.dataObj.unload=="function"?this.dataObj.unload():typeof this.dataObj.destructor=="function"&&this.dataObj.destructor())}for(r=this.cell.childNodes[this.conf.idx.cont];r.childNodes.length>0;)i===!1?r.removeChild(r.lastChild):(r.firstChild.style.display="none",i.appendChild(r.firstChild));this.conf.append_mode&&(r.style.overflow="",this.conf.append_mode=!1);u=this.dataType=="tabbar";this.dataObj=null;this.dataType=null;i=r=null;this.conf.unloading!=!0&&u&&(this.showHeader(!0),this._showBorders())};dhtmlXCellObject.prototype._attachFromCell=function(n){var i,t;this.detachObject(!0);i="layout";typeof dhtmlXWindowsCell=="function"&&this instanceof window.dhtmlXWindowsCell&&(i="window");typeof dhtmlXWindowsCell=="function"&&n instanceof window.dhtmlXWindowsCell&&n.wins.w[n._idd].conf.parked==!0&&n.wins._winCellSetOpacity(n._idd,"open",!1);typeof dhtmlXAccordionCell=="function"&&n instanceof window.dhtmlXAccordionCell&&n.conf.opened==!1&&n._cellSetOpacity("open",!1);for(t in n.dataNodes)this._attachObject(t,null,null,null,n.cell.childNodes[n.conf.idx[t]]),this.dataNodes[t]=n.dataNodes[t],n.dataNodes[t]=null,n.conf.ofs_nodes[t=="sb"?"b":"t"][t]=!1,n._updateIdx();if(this._mtbUpdBorder(),n.dataType!=null&&n.dataObj!=null){for(this.dataType=n.dataType,this.dataObj=n.dataObj;n.cell.childNodes[n.conf.idx.cont].childNodes.length>0;)this.cell.childNodes[this.conf.idx.cont].appendChild(n.cell.childNodes[n.conf.idx.cont].firstChild);n.dataType=null;n.dataObj=null;this.dataType=="grid"&&(i=="window"&&this.conf.skin=="dhx_skyblue"?(this.dataObj.entBox.style.border="1px solid #a4bed4",this.dataObj._sizeFix=0):(this.dataObj.entBox.style.border="0px solid white",this.dataObj._sizeFix=2))}else while(n.cell.childNodes[n.conf.idx.cont].childNodes.length>0)this.cell.childNodes[this.conf.idx.cont].appendChild(n.cell.childNodes[n.conf.idx.cont].firstChild);this.conf.view=n.conf.view;n.conf.view="def";for(t in n.views)this.views[t]=n.views[t],n.views[t]=null,delete n.views[t];n._updateIdx();n._adjustCont();this._updateIdx();this._adjustCont();n.conf.progress==!0?(n.progressOff(),this.progressOn()):this.progressOff();i=="window"&&this.wins.w[this._idd].conf.parked&&this.wins._winCellSetOpacity(this._idd,"close",!1)};dhtmlXCellTop.prototype.setOffsets=function(n,t){var u=!1,i,r;for(i in n)r=i.charAt(0),typeof this.conf.ofs[r]=="undefined"||isNaN(n[i])||(this.conf.ofs[r]=parseInt(n[i]),u=!0);t!==!1&&typeof this.setSizes=="function"&&u==!0&&this.setSizes()};dhtmlXCellTop.prototype.attachMenu=function(n){if(this.dataNodes.menu==null)return this.dataNodes.menuObj=document.createElement("DIV"),this.dataNodes.menuObj.className="dhxcelltop_menu",this.base.insertBefore(this.dataNodes.menuObj,this.dataNodes.toolbarObj||this.dataNodes.ribbonObj||this.cont),(typeof n!="object"||n==null)&&(n={}),n.skin=this.conf.skin,n.parent=this.dataNodes.menuObj,this.dataNodes.menu=new dhtmlXMenuObject(n),this.dataNodes.menuEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.menuObj.style.display!="none"&&(this.conf.ofs_menu==null&&(this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px",this.conf.ofs_menu={w:this.dataNodes.menuObj.offsetWidth-parseInt(this.dataNodes.menuObj.style.width)}),this.dataNodes.menuObj.style.left=this.conf.ofs.l+"px",this.dataNodes.menuObj.style.marginTop=(this.dataNodes.haObj!=null?0:this.conf.ofs.t)+"px",this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r-this.conf.ofs_menu.w+"px")}),this.conf.ofs_nodes.t.menuObj=!0,this.setSizes(),n.parnt=null,n=null,this.dataNodes.menu};dhtmlXCellTop.prototype.detachMenu=function(){this.dataNodes.menu!=null&&(this.dataNodes.menu.unload(),this.dataNodes.menu=null,this.dataNodes.menuObj.parentNode.removeChild(this.dataNodes.menuObj),this.dataNodes.menuObj=null,this.detachEvent(this.dataNodes.menuEv),this.dataNodes.menuEv=null,delete this.dataNodes.menu,delete this.dataNodes.menuObj,delete this.dataNodes.menuEv,this.conf.ofs_nodes.t.menuObj=!1,this.conf.unloading||this.setSizes())};dhtmlXCellTop.prototype.attachToolbar=function(n){if((this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null))return this.dataNodes.toolbarObj=document.createElement("DIV"),this.dataNodes.toolbarObj.className="dhxcelltop_toolbar",this.base.insertBefore(this.dataNodes.toolbarObj,this.cont),this.dataNodes.toolbarObj.appendChild(document.createElement("DIV")),(typeof n!="object"||n==null)&&(n={}),n.skin=this.conf.skin,n.parent=this.dataNodes.toolbarObj.firstChild,this.dataNodes.toolbar=new dhtmlXToolbarObject(n),this.dataNodes.toolbarEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.toolbarObj.style.display!="none"&&(this.dataNodes.toolbarObj.style.left=this.conf.ofs.l+"px",this.dataNodes.toolbarObj.style.marginTop=(this.dataNodes.haObj!=null||this.dataNodes.menuObj!=null?0:this.conf.ofs.t)+"px",this.dataNodes.toolbarObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px")}),this.dataNodes.toolbar._masterCell=this,this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell.setSizes()}),this.conf.ofs_nodes.t.toolbarObj=!0,this.setSizes(),n.parnt=null,n=null,this.dataNodes.toolbar};dhtmlXCellTop.prototype.detachToolbar=function(){this.dataNodes.toolbar!=null&&(this.dataNodes.toolbar._masterCell=null,this.dataNodes.toolbar.unload(),this.dataNodes.toolbar=null,this.dataNodes.toolbarObj.parentNode.removeChild(this.dataNodes.toolbarObj),this.dataNodes.toolbarObj=null,this.detachEvent(this.dataNodes.toolbarEv),this.dataNodes.toolbarEv=null,this.conf.ofs_nodes.t.toolbarObj=!1,delete this.dataNodes.toolbar,delete this.dataNodes.toolbarObj,delete this.dataNodes.toolbarEv,this.conf.unloading||this.setSizes())};dhtmlXCellTop.prototype.attachRibbon=function(n){if(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null){this.dataNodes.ribbonObj=document.createElement("DIV");this.dataNodes.ribbonObj.className="dhxcelltop_ribbon";this.base.insertBefore(this.dataNodes.ribbonObj,this.cont);this.dataNodes.ribbonObj.appendChild(document.createElement("DIV"));(typeof n!="object"||n==null)&&(n={});n.skin=this.conf.skin;n.parent=this.dataNodes.ribbonObj.firstChild;this.dataNodes.ribbon=new dhtmlXRibbon(n);this.dataNodes.ribbonEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.ribbonObj.style.display!="none"&&(this.dataNodes.ribbonObj.style.left=this.conf.ofs.l+"px",this.dataNodes.ribbonObj.style.marginTop=(this.dataNodes.haObj!=null||this.dataNodes.menuObj!=null?0:this.conf.ofs.t)+"px",this.dataNodes.ribbonObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px",this.dataNodes.ribbon.setSizes())});this.conf.ofs_nodes.t.ribbonObj=!0;var t=this;return this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){t.setSizes()}),this.setSizes(),n.parnt=null,n=null,this.dataNodes.ribbon}};dhtmlXCellTop.prototype.detachRibbon=function(){this.dataNodes.ribbon!=null&&(this.dataNodes.ribbon.unload(),this.dataNodes.ribbon=null,this.dataNodes.ribbonObj.parentNode.removeChild(this.dataNodes.ribbonObj),this.dataNodes.ribbonObj=null,this.detachEvent(this.dataNodes.ribbonEv),this.dataNodes.ribbonEv=null,this.conf.ofs_nodes.t.ribbonObj=!1,delete this.dataNodes.ribbon,delete this.dataNodes.ribbonObj,delete this.dataNodes.ribbonEv,this.conf.unloading||this.setSizes())};dhtmlXCellTop.prototype.attachStatusBar=function(n){if(!this.dataNodes.sbObj)return typeof n=="undefined"&&(n={}),this.dataNodes.sbObj=document.createElement("DIV"),this.dataNodes.sbObj.className="dhxcelltop_statusbar",this.cont.nextSibling!=null?this.base.insertBefore(this.dataNodes.sbObj,this.cont.nextSibling):this.base.appendChild(this.dataNodes.sbObj),this.dataNodes.sbObj.innerHTML="<div class='dhxcont_statusbar'>"+(typeof n.text=="string"&&n.text.length>0?n.text:"&nbsp;")+"<\/div>",typeof n.height=="number"&&(this.dataNodes.sbObj.firstChild.style.height=this.dataNodes.sbObj.firstChild.style.lineHeight=n.height+"px"),this.dataNodes.sbObj.setText=function(n){this.childNodes[0].innerHTML=n},this.dataNodes.sbObj.getText=function(){return this.childNodes[0].innerHTML},this.dataNodes.sbObj.onselectstart=function(){return!1},this.dataNodes.sbEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.sbObj.style.display!="none"&&(this.dataNodes.sbObj.style.left=this.conf.ofs.l+"px",this.dataNodes.sbObj.style.bottom=(this.dataNodes.faObj!=null?this.dataNodes.faObj.offsetHeight:0)+this.conf.ofs.t+"px",this.dataNodes.sbObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px")}),this.conf.ofs_nodes.b.sbObj=!0,this.setSizes(),this.dataNodes.sbObj};dhtmlXCellTop.prototype.detachStatusBar=function(){this.dataNodes.sbObj&&(this.dataNodes.sbObj.setText=this.dataNodes.sbObj.getText=this.dataNodes.sbObj.onselectstart=null,this.dataNodes.sbObj.parentNode.removeChild(this.dataNodes.sbObj),this.dataNodes.sbObj=null,this.detachEvent(this.dataNodes.sbEv),this.dataNodes.sbEv=null,this.conf.ofs_nodes.b.sbObj=!1,delete this.dataNodes.sb,delete this.dataNodes.sbObj,delete this.dataNodes.sbEv,this.conf.unloading||this.setSizes())};dhtmlXCellTop.prototype.showMenu=function(){this._mtbShowHide("menuObj","")};dhtmlXCellTop.prototype.hideMenu=function(){this._mtbShowHide("menuObj","none")};dhtmlXCellTop.prototype.showToolbar=function(){this._mtbShowHide("toolbarObj","")};dhtmlXCellTop.prototype.hideToolbar=function(){this._mtbShowHide("toolbarObj","none")};dhtmlXCellTop.prototype.showRibbon=function(){this._mtbShowHide("ribbonObj","")};dhtmlXCellTop.prototype.hideRibbon=function(){this._mtbShowHide("ribbonObj","none")};dhtmlXCellTop.prototype.showStatusBar=function(){this._mtbShowHide("sbObj","")};dhtmlXCellTop.prototype.hideStatusBar=function(){this._mtbShowHide("sbObj","none")};dhtmlXCellTop.prototype._mtbShowHide=function(n,t){this.dataNodes[n]!=null&&(this.dataNodes[n].style.display=t,this.setSizes())};dhtmlXCellTop.prototype._mtbUnload=function(){this.detachMenu();this.detachToolbar();this.detachStatusBar();this.detachRibbon()};dhtmlXCellTop.prototype.getAttachedMenu=function(){return this.dataNodes.menu};dhtmlXCellTop.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar};dhtmlXCellTop.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon};dhtmlXCellTop.prototype.getAttachedStatusBar=function(){return this.dataNodes.sbObj};dhtmlXCellTop.prototype.progressOn=function(){var t,n;this.conf.progress||(this.conf.progress=!0,t=document.createElement("DIV"),t.className="dhxcelltop_progress",this.base.appendChild(t),n=document.createElement("DIV"),this.conf.skin=="material"&&(window.dhx4.isFF||window.dhx4.isChrome||window.dhx4.isOpera||window.dhx4.isEdge)?(n.className="dhxcelltop_progress_svg",n.innerHTML='<svg class="dhx_cell_prsvg" viewBox="25 25 50 50"><circle class="dhx_cell_prcircle" cx="50" cy="50" r="20"/><\/svg>'):(n=document.createElement("DIV"),n.className="dhxcelltop_progress_img"),this.base.appendChild(n),t=n=null)};dhtmlXCellTop.prototype.progressOff=function(){var n,t,i;if(this.conf.progress){for(n={dhxcelltop_progress:!0,dhxcelltop_progress_img:!0,dhxcelltop_progress_svg:!0},t=0;t<this.base.childNodes.length;t++)typeof this.base.childNodes[t].className!="undefined"&&n[this.base.childNodes[t].className]==!0&&(n[this.base.childNodes[t].className]=this.base.childNodes[t]);for(i in n)n[i]!=!0&&this.base.removeChild(n[i]),n[i]=null;this.conf.progress=!1;n=null}};dhtmlXCellTop.prototype.attachHeader=function(n,t){this.dataNodes.haObj==null&&(typeof n!="object"&&(n=document.getElementById(n)),this.dataNodes.haObj=document.createElement("DIV"),this.dataNodes.haObj.className="dhxcelltop_hdr",this.dataNodes.haObj.style.height=(t||n.offsetHeight)+"px",this.base.insertBefore(this.dataNodes.haObj,this.dataNodes.menuObj||this.dataNodes.toolbarObj||this.cont),this.dataNodes.haObj.appendChild(n),n.style.visibility="visible",n=null,this.dataNodes.haEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.haObj.style.left=this.conf.ofs.l+"px";this.dataNodes.haObj.style.marginTop=this.conf.ofs.t+"px";this.dataNodes.haObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"}),this.conf.ofs_nodes.t.haObj=!0,this.setSizes())};dhtmlXCellTop.prototype.detachHeader=function(){if(this.dataNodes.haObj){while(this.dataNodes.haObj.childNodes.length>0)this.dataNodes.haObj.lastChild.style.visibility="hidden",document.body.appendChild(this.dataNodes.haObj.lastChild);this.dataNodes.haObj.parentNode.removeChild(this.dataNodes.haObj);this.dataNodes.haObj=null;this.detachEvent(this.dataNodes.haEv);this.dataNodes.haEv=null;this.conf.ofs_nodes.t.haObj=!1;delete this.dataNodes.haEv;delete this.dataNodes.haObj;this.conf.unloading||this.setSizes()}};dhtmlXCellTop.prototype.attachFooter=function(n,t){if(this.dataNodes.faObj==null){typeof n!="object"&&(n=document.getElementById(n));this.dataNodes.faObj=document.createElement("DIV");this.dataNodes.faObj.className="dhxcelltop_ftr";this.dataNodes.faObj.style.height=(t||n.offsetHeight)+"px";var i=this.dataNodes.sbObj||this.cont;this.base.lastChild==i?this.base.appendChild(this.dataNodes.faObj):this.base.insertBefore(this.dataNodes.faObj,i.nextSibling);this.dataNodes.faEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.faObj.style.left=this.conf.ofs.l+"px";this.dataNodes.faObj.style.bottom=this.conf.ofs.b+"px";this.dataNodes.faObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.dataNodes.faObj.appendChild(n);n.style.visibility="visible";i=n=null;this.conf.ofs_nodes.b.faObj=!0;this.setSizes()}};dhtmlXCellTop.prototype.detachFooter=function(){if(this.dataNodes.faObj){while(this.dataNodes.faObj.childNodes.length>0)this.dataNodes.faObj.lastChild.style.visibility="hidden",document.body.appendChild(this.dataNodes.faObj.lastChild);this.dataNodes.faObj.parentNode.removeChild(this.dataNodes.faObj);this.dataNodes.faObj=null;this.detachEvent(this.dataNodes.faEv);this.dataNodes.faEv=null;this.conf.ofs_nodes.b.faObj=!1;delete this.dataNodes.faEv;delete this.dataNodes.faObj;this.conf.unloading||this.setSizes()}};dhtmlXCalendarObject.prototype.lang="en";dhtmlXCalendarObject.prototype.langData={en:{dateformat:"%Y-%m-%d",hdrformat:"%F %Y",monthesFNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthesSNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysFNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysSNames:["Su","Mo","Tu","We","Th","Fr","Sa"],weekstart:1,weekname:"w",today:"Today",clear:"Clear"}};dhtmlXCalendarObject.prototype._buildMonthHdr=function(n){var i=this,r=function(n){return String(n).length==1?"0"+String(n):n},t=function(n,t){return"<span class='dhtmlxcalendar_month_label_"+n+"'>"+t+"<\/span>"},u=String(this.langData[this.lang].hdrformat||"%F %Y").replace(/%[a-z]/gi,function(u){switch(u){case"%m":return t("month",r(n.getMonth()+1));case"%n":return t("month",n.getMonth()+1);case"%M":return t("month",i.langData[i.lang].monthesSNames[n.getMonth()]);case"%F":return t("month",i.langData[i.lang].monthesFNames[n.getMonth()]);case"%y":return t("year",r(n.getYear()%100));case"%Y":return t("year",n.getFullYear());case"%%":return"%";default:return u}});return i=r=t=null,u};dhtmlXCalendarObject.prototype.enableIframe=function(n){n==!0?this._ifr||(this._ifr=document.createElement("IFRAME"),this._ifr.frameBorder=0,this._ifr.border=0,this._ifr.setAttribute("src","javascript:false;"),this._ifr.className="dhtmlxcalendar_ifr",this._ifr.onload=function(){this.onload=null;this.contentWindow.document.open("text/html","replace");this.contentWindow.document.write("<html><head><style>html,body{width:100%;height:100%;overflow:hidden;margin:0px;}<\/style><\/head><body<\/body><\/html>")},this.base.parentNode.insertBefore(this._ifr,this.base),this._ifrSize()):this._ifr&&(this._ifr.parentNode.removeChild(this._ifr),this._ifr=null)};dhtmlXCalendarObject.prototype._ifrSize=function(){this._ifr&&(this._ifr.style.left=this.base.style.left,this._ifr.style.top=this.base.style.top,this._ifr.style.width=this.base.offsetWidth+"px",this._ifr.style.height=this.base.offsetHeight+"px")};dhtmlxCalendarObject=dhtmlXCalendarObject;dhtmlXCalendarObject.prototype._dateStrings=function(){var n=this.langData[this.lang];return{monthFullName:n.monthesFNames,monthShortName:n.monthesSNames,dayFullName:n.daysFNames,dayShortName:n.daysSNames}};dhtmlXCalendarObject.prototype._strToDate=function(n,t){return window.dhx4.str2date(n,t||this._dateFormat,this._dateStrings())};dhtmlXCalendarObject.prototype._dateToStr=function(n,t){return window.dhx4.date2str(n,t||this._dateFormat,this._dateStrings())};window.dhtmlxDblCalendarObject=window.dhtmlXDoubleCalendarObject=window.dhtmlXDoubleCalendar=function(n){var t=this;return this.leftCalendar=new dhtmlXCalendarObject(n),this.leftCalendar.hideTime(),this.rightCalendar=new dhtmlXCalendarObject(n),this.rightCalendar.hideTime(),this.leftCalendar.attachEvent("onClick",function(n){t._updateRange("rightCalendar",n,null);t._evOnClick(["left",n])}),this.rightCalendar.attachEvent("onClick",function(n){t._updateRange("leftCalendar",null,n);t._evOnClick(["right",n])}),this.leftCalendar.attachEvent("onBeforeChange",function(n){return t._evOnBeforeChange(["left",n])}),this.rightCalendar.attachEvent("onBeforeChange",function(n){return t._evOnBeforeChange(["right",n])}),this.show=function(){this.leftCalendar.show();this.rightCalendar.base.style.marginLeft=this.leftCalendar.base.offsetWidth-1+"px";this.rightCalendar.show()},this.hide=function(){this.leftCalendar.hide();this.rightCalendar.hide()},this.setDateFormat=function(n){this.leftCalendar.setDateFormat(n);this.rightCalendar.setDateFormat(n)},this.setDates=function(n,t){n!=null&&this.leftCalendar.setDate(n);t!=null&&this.rightCalendar.setDate(t);this._updateRange()},this._updateRange=function(n,t,i){arguments.length==3?(n=="leftCalendar"?this.leftCalendar:this.rightCalendar).setSensitiveRange(t,i):(this.leftCalendar.setSensitiveRange(null,this.rightCalendar.getDate()),this.rightCalendar.setSensitiveRange(this.leftCalendar.getDate(),null))},this.getFormatedDate=function(){return this.leftCalendar.getFormatedDate.apply(this.leftCalendar,arguments)},this.unload=function(){window.dhx4._eventable(this,"clear");this.leftCalendar.unload();this.rightCalendar.unload();this.leftCalendar=this.rightCalendar=null;this._updateRange=null;this._evOnClick=null;this._evOnBeforeChange=null;this.show=null;this.hide=null;this.setDateFormat=null;this.setDates=null;this.getFormatedDate=null;this.unload=null;t=null},this._evOnClick=function(n){return this.callEvent("onClick",n)},this._evOnBeforeChange=function(n){return this.callEvent("onBeforeChange",n)},window.dhx4._eventable(this),this};dhtmlXCombo.prototype.setName=function(n){this.conf.form_name=n;this.base.childNodes[1].name=n;this.base.childNodes[2].name=n.replace(/(\[.*)?$/,"_new_value$1")};dhtmlXCombo.prototype.readonly=function(n){window.dhx4.s2b(n)?(this.base.firstChild.setAttribute("readOnly","true"),this.conf.ro_mode=!0):(this.base.firstChild.removeAttribute("readOnly"),this.conf.ro_mode=!1)};dhtmlXCombo.prototype.setPlaceholder=function(n){(typeof n=="undefined"||n==null)&&(n="");this.base.firstChild.setAttribute("placeholder",String(n))};dhtmlXCombo.prototype.setTemplate=function(n){for(var t in n)typeof this.conf.template[t]!="undefined"&&(this.conf.template[t]=t=="header"?window.dhx4.s2b(n[t]):String(n[t]));n.columns!=null?this._mcMakeTemplate(n.columns):this._mcDetachHeader();for(t in this.t)this.t[t].obj.setText(this.t[t].item,this.t[t].item._conf.text);this._confirmSelect("template")};dhtmlXCombo.prototype.setSkin=function(n){n!=this.conf.skin&&(this.conf.skin=n,this.base.className="dhxcombo_"+this.conf.skin+(this.conf.enabled?"":" dhxcombo_disabled"),this.list.className="dhxcombolist_"+this.conf.skin+(this.hdr!=null?" dhxcombolist_multicolumn":""),this.hdr!=null&&(this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr"),this.conf.i_ofs=n=="material"?26:23,this._adjustBase())};dhtmlXCombo.prototype.getInput=function(){return this.base.firstChild};dhtmlXCombo.prototype.getButton=function(){return this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)]};dhtmlXCombo.prototype.getList=function(){return this.list};dhtmlXCombo.prototype.getBase=function(){return this.base};dhtmlXCombo.prototype.getParent=function(){return this.DOMParent};dhtmlXCombo.prototype.forEachOption=function(n){for(var t=0;t<this.list.childNodes.length;t++)n.apply(window,[this._getOption(this.list.childNodes[t]._optId,t)])};dhtmlXCombo.prototype.setFocus=function(){this.conf.enabled&&this.base.firstChild.focus()};dhtmlXCombo.prototype.setFontSize=function(n,t){n!=null&&(this.base.firstChild.style.fontSize=n);t!=null&&(this.list.style.fontSize=t)};dhtmlXCombo.prototype.getOption=function(n){for(var r,t=null,u=null,i=0;i<this.list.childNodes.length;i++)t==null&&(r=this.list.childNodes[i]._optId,this.t[r].obj.getValue(this.t[r].item)==n&&(t=r,u=i));return t==null?null:this._getOption(t,u)};dhtmlXCombo.prototype.getOptionByIndex=function(n){return n<0?null:this.list.childNodes[n]==null?null:this._getOption(this.list.childNodes[n]._optId,n)};dhtmlXCombo.prototype.getOptionByLabel=function(n){for(var r,t=null,u=null,i=0;i<this.list.childNodes.length;i++)t==null&&(r=this.list.childNodes[i]._optId,this.t[r].obj.getText(this.t[r].item,!0)==n&&(t=r,u=i));return t==null?null:this._getOption(t,u)};dhtmlXCombo.prototype.getSelectedIndex=function(){return this._getOptionProp(this.conf.last_selected,"index",-1)};dhtmlXCombo.prototype.getSelectedText=function(){return this._getOptionProp(this.conf.last_selected,"text","")};dhtmlXCombo.prototype.getSelectedValue=function(){return this._getOptionProp(this.conf.temp_selected||this.conf.last_selected,"value",null)};dhtmlXCombo.prototype.getActualValue=function(){return this.base.childNodes[1].value};dhtmlXCombo.prototype.getComboText=function(){return this.base.childNodes[0].value};dhtmlXCombo.prototype.getIndexByValue=function(n){var t=this.getOption(n);return t!=null?t.index:-1};dhtmlXCombo.prototype.setComboText=function(n){this.conf.allow_free_text==!0&&(this.unSelectOption(),this.conf.last_text=this.base.firstChild.value=n,this.conf.f_server_last=this.base.firstChild.value.toLowerCase())};dhtmlXCombo.prototype.setComboValue=function(n){var t=this.getOption(n);t!=null?this.selectOption(t.index):(this.conf.last_value=n,this.base.childNodes[1].value=this.conf.last_value,this.base.childNodes[2].value="true")};dhtmlXCombo.prototype.selectOption=function(n){if(!(n<0)&&!(n>=this.list.childNodes.length)){var t=this.list.childNodes[n]._optId;this._setSelected(t,this._isListVisible(),!0);this._confirmSelect("script")}};dhtmlXCombo.prototype.unSelectOption=function(){this.conf.last_hover!=null&&(this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,!1),this.conf.last_hover=null);this.base.firstChild.value="";this.conf.f_mode!=!1&&this._filterOpts(!0);this._hideList();this._updateTopImage(null);this._confirmSelect("script")};dhtmlXCombo.prototype.confirmValue=function(){this._confirmSelect("script")};dhtmlXCombo.prototype.enable=function(n){(n=typeof n=="undefined"?!0:window.dhx4.s2b(n),this.conf.enabled!=n)&&(this.conf.enabled=n,n?(this.base.className="dhxcombo_"+this.conf.skin,this.base.firstChild.removeAttribute("disabled")):(this._hideList(),this.base.className="dhxcombo_"+this.conf.skin+" dhxcombo_disabled",this.base.firstChild.setAttribute("disabled","true")),this._updateTopImage(this.conf.last_selected))};dhtmlXCombo.prototype.disable=function(n){n=typeof n=="undefined"?!0:window.dhx4.s2b(n);this.enable(!n)};dhtmlXCombo.prototype.isEnabled=function(){return this.conf.enabled==!0};dhtmlXCombo.prototype.show=function(n){n=typeof n=="undefined"?!0:window.dhx4.s2b(n);this.base.style.display=n==!0?"":"none"};dhtmlXCombo.prototype.hide=function(n){typeof n=="undefined"&&(n=!0);this.show(!n)};dhtmlXCombo.prototype.isVisible=function(){return this.base.style.display==""};dhtmlXCombo.prototype.setFilterHandler=function(n){typeof n=="function"?(this.conf.f_func=n,this.conf.f_mode=!0,this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null):typeof n=="string"&&typeof window[n]=="function"?(this.conf.f_func=window[n],this.conf.f_mode=!0,this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null):this.conf.f_func=null};dhtmlXCombo.prototype.enableFilteringMode=function(n,t,i,r){n==!0||n=="between"?(this.conf.f_mode=n==!0?"start":"between",t?(this.conf.f_url=t,this.conf.f_cache=window.dhx4.s2b(i),this.conf.f_dyn=window.dhx4.s2b(r)):(this.conf.f_url=null,this.conf.f_cache=!1,this.conf.f_dyn=!1)):(this.conf.f_mode=!1,this.conf.f_url=null,this.conf.f_cache=!1,this.conf.f_dyn=!1)};dhtmlXCombo.prototype.filter=function(n,t){for(var r,i=0;i<this.list.childNodes.length;i++)r=n.apply(window,[this._getOption(this.list.childNodes[i]._optId,i)]),this.list.childNodes[i].style.display=r===!0?"":"none";(typeof t=="undefined"||t==!0)&&this._showList(!0)};dhtmlXCombo.prototype.sort=function(n){for(var r,i=[],t=0;t<this.list.childNodes.length;t++)r=this.list.childNodes[t]._optId,i.push([r,this._getOption(r,t)]);for(n=="asc"||n=="desc"?(k=!0,i.sort(function(t,i){t=t[1].text_option.toLowerCase();i=i[1].text_option.toLowerCase();var r=n=="asc"?1:-1;return t>i?r:-1*r})):(typeof n=="function"||typeof window[n]=="function")&&(typeof window[n]=="function"&&(n=window[n]),i.sort(function(t,i){return n.apply(window,[t[1],i[1]])}));this.list.childNodes.length>0;)this.list.removeChild(this.list.lastChild);for(t=0;t<i.length;t++)this.list.appendChild(this.t[i[t][0]].item)};dhtmlXCombo.prototype.enableAutocomplete=function(n){n=typeof n=="undefined"?!0:window.dhx4.s2b(n);this.conf.f_ac=n};dhtmlXCombo.prototype.disableAutocomplete=function(n){n=typeof n=="undefined"?!0:window.dhx4.s2b(n);this.enableAutocomplete(!n)};dhtmlXCombo.prototype.allowFreeText=function(n,t){this.conf.allow_free_text=typeof n=="undefined"?!0:window.dhx4.s2b(n);this.conf.free_text_empty=typeof t=="undefined"?!1:window.dhx4.s2b(t)};dhtmlXCombo.prototype._checkForMatch=function(n){for(var u=window.dhx4.trim(this.base.firstChild.value).toLowerCase(),i=null,t=this.list.firstChild,r;t!=null;)t.style.display==""&&t._optId!=null&&(r=window.dhx4.trim(this.t[t._optId].obj.getText(t,!0)).toLowerCase(),u==r&&(i=t._optId,t=null)),t!=null&&(t=t.nextSibling);this.conf.last_match==null?i!=null?(this._setSelected(i,!0,!0),this.conf.last_match=i):(this.conf.f_mode!="between"||n==!0)&&(this._setSelected(null,!0,!0),this.conf.last_match=null):i!=null?i!=this.conf.last_match&&(this._setSelected(i,!0,!0),this.conf.last_match=i):(this._setSelected(null,!0,!0),this.conf.last_match=null)};dhtmlXCombo.prototype._selectRange=function(n,t){this.conf.combo_focus==!0&&window.dhx4.selectTextRange(this.base.firstChild,n,t)};dhtmlXCombo.prototype.openSelect=function(){this._isListVisible()||this._showList()};dhtmlXCombo.prototype.closeAll=function(){this._hideList()};dhtmlXCombo.prototype._showList=function(n){if(this._getListVisibleCount()==0){n&&this._isListVisible()&&this._hideList();return}if(this._isListVisible()){this._checkListHeight();return}this.list.style.zIndex=window.dhx4.zim.reserve(this.conf.list_zi_id);this.hdr!=null&&this.conf.template.header==!0&&(this.hdr.style.zIndex=Number(this.list.style.zIndex)+1);this.list.style.visibility="hidden";this.list.style.display="";this.hdr!=null&&this.conf.template.header==!0&&(this.hdr.style.visibility=this.list.style.visibility,this.hdr.style.display=this.list.style.display);var t=this.hdr!=null&&this.conf.template.header==!0?this.hdr.offsetHeight:0;this.list.style.width=Math.max(this.conf.opts_width||this.conf.col_w||0,this.conf.combo_width)+"px";this.list.style.top=window.dhx4.absTop(this.base)+t+this.base.offsetHeight-1+"px";this.list.style.left=window.dhx4.absLeft(this.base)+"px";this.hdr!=null&&this.conf.template.header==!0&&(this.hdr.style.width=this.list.style.width,this.hdr.style.left=this.list.style.left,this.hdr.style.top=parseInt(this.list.style.top)-t+"px");this._checkListHeight();this.list.style.visibility="visible";this.hdr!=null&&this.conf.template.header==!0&&(this.hdr.style.visibility="visible");this.callEvent("onOpen",[])};dhtmlXCombo.prototype._hideList=function(){this._isListVisible()&&(window.dhx4.zim.clear(this.conf.list_zi_id),this.list.style.display="none",this.hdr!=null&&this.conf.template.header==!0&&(this.hdr.style.display="none"),this.conf.clear_click=!1,this.callEvent("onClose",[]))};dhtmlXCombo.prototype._isListVisible=function(){return this.list.style.display==""};dhtmlXCombo.prototype._getListVisibleCount=function(){for(var t=0,n=0;n<this.list.childNodes.length;n++)t+=this.list.childNodes[n].style.display==""?1:0;return t};dhtmlXCombo.prototype._checkListHeight=function(){var n;if(this._isListVisible()){if(this.conf.item_h==null){for(n=this.list.firstChild;n!=null;)n.style.display==""?(this.conf.item_h=n.offsetHeight+(this.hdr!=null?-1:0),n=null):n=n.nextSibling;n=null}var o=window.dhx4.screenDim(),i=window.dhx4.absTop(this.base),f=this.base.offsetHeight,r=this.hdr!=null&&this.conf.template.header==!0?this.hdr.offsetHeight:0,s=Math.max(0,Math.floor((i-r-o.top)/this.conf.item_h)),t=Math.max(0,Math.floor((o.bottom-(i+f+r))/this.conf.item_h)),e=this._getListVisibleCount();t<Math.min(this.conf.opts_count_min,e)&&s>t&&(t=null);var h=Math.min(t==null?s:t,this.conf.opts_count,e),c=h<e?h*this.conf.item_h+"px":"",u=this.conf.sp[this.conf.skin][this.hdr!=null&&this.conf.template.header==!0?"hdr_ofs":"list_ofs"];this.list.style.height=c;this.list.style.top=(t==null?i-this.list.offsetHeight+u:i+f+r-u)+"px";this.hdr!=null&&this.conf.template.header==!0&&(this.hdr.style.top=(t==null?i-r-this.list.offsetHeight+u:i+f-u)+"px")}};dhtmlXCombo.prototype._scrollToItem=function(n){var t=this.t[n].item.offsetTop,i=t+this.t[n].item.offsetHeight,r=this.list.scrollTop,u=r+this.list.clientHeight;t<r?this.list.scrollTop=t+(this.hdr!=null&&this.conf.template.header==!0?1:0):i>u&&(this.list.scrollTop=i-this.list.clientHeight+(this.hdr!=null&&this.conf.template.header==!0?-this.conf.sp[this.conf.skin].scr_ofs:0))};dhtmlXCombo.prototype._setSelected=function(n,t,i,r){if(this.conf.temp_selected=null,i&&this._updateTopImage(n),n!=null&&this.conf.last_hover==n){t&&this._scrollToItem(n);return}this.conf.last_hover!=null&&(this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,!1),this.conf.last_hover=null,n==null&&this.callEvent("onSelectionChange",[]));n!=null&&(this.t[n].obj.setSelected(this.t[n].item,!0),this.conf.last_hover=n,r!=!0&&(this.conf.temp_selected=n,this.callEvent("onSelectionChange",[])),this.conf.s_mode=="select"&&this.t[n].item==this.t[n].item.parentNode.lastChild&&this._subloadRequest(),t&&this._scrollToItem(n))};dhtmlXCombo.prototype._subloadRequest=function(){if(this.conf.f_url!=null&&this.conf.f_dyn==!0&&this.conf.f_dyn_end==!1){var i="mask="+encodeURIComponent(this.conf.f_mask)+"&pos="+this.list.childNodes.length,n=this,t=function(i){n.conf.f_cache&&n.conf.f_cache_data[n.conf.f_mask].data.push(i.xmlDoc.responseXML);var r=n.list.childNodes.length;n.conf.f_loading=!0;n.load(i.xmlDoc.responseXML);n.conf.f_loading=!1;r==n.list.childNodes.length&&(n.conf.f_dyn_end=!0,n.conf.f_cache&&(n.conf.f_cache_data[n.conf.f_mask].dyn_end=!0));t=n=null};window.dhx4.ajax.method=="post"?window.dhx4.ajax.post(this.conf.f_url,i,t):window.dhx4.ajax.method=="get"&&window.dhx4.ajax.get(this.conf.f_url+(String(this.conf.f_url).indexOf("?")>=0?"&":"?")+i,t)}};dhtmlXCombo.prototype.addOption=function(n,t,i,r,u){var e=null,f,o;if(n instanceof Array)for(f=0;f<n.length;f++)typeof n[f]!="undefined"&&(n[f]instanceof Array?(o=this._renderOption({value:n[f][0],text:n[f][1],css:n[f][2],img:n[f][3]}),e==null&&window.dhx4.s2b(n[f][4])==!0&&(e=o)):(o=this._renderOption(n[f]),e==null&&window.dhx4.s2b(n[f].selected)==!0&&(e=o)));else o=this._renderOption({value:n,text:t,css:i,img:r}),e==null&&window.dhx4.s2b(u)==!0&&(e=o);e!=null&&(this._setSelected(e,this._isListVisible(),!0),this._confirmSelect("onInit"))};dhtmlXCombo.prototype.updateOption=function(n,t,i,r){var u=this._getOptionId(n);u!=null&&(this.t[u].obj.update(this.t[u].item,{value:t,text:i,css:r}),this.conf.last_selected==u&&(this.conf.last_text=this.base.firstChild.value=this.t[u].obj.getText(this.t[u].item,!0),this.conf.f_server_last=this.base.firstChild.value.toLowerCase()))};dhtmlXCombo.prototype.deleteOption=function(n){var t,i;for(t in this.t)i=this.t[t].obj.getValue(this.t[t].item),i==n&&this._removeOption(t);this._isListVisible()&&this._showList(!0)};dhtmlXCombo.prototype.clearAll=function(n){n=typeof n=="undefined"?!0:window.dhx4.s2b(n);for(var t in this.t)this._removeOption(t);this.conf.tm_hover&&window.clearTimeout(this.conf.tm_hover);this.conf.last_hover=null;this.conf.last_selected=null;this.list.scrollTop=0;n==!0&&this._hideList()};dhtmlXCombo.prototype._renderOption=function(n){var r=window.dhx4.newId(),t=document.createElement("DIV"),i,u;return t._optId=r,t._tpl=this.conf.template,typeof n.img=="undefined"&&typeof n.img_src!="undefined"&&(n.img=n.img_src,delete n.img_src),typeof n.img_dis=="undefined"&&typeof n.img_src_dis!="undefined"&&(n.img_dis=n.img_src_dis,delete n.img_src_dis),n.img_path=this.conf.img_path,n.img_def=this.conf.img_def,n.img_def_dis=this.conf.img_def_dis,this.list.appendChild(t),i=this._isListVisible()&&window.dhx4.isFF==!0,i==!0&&(u=this.list.scrollTop,this.list.scrollTop-=1),this.hdr!=null&&(n.multicol=!0),this.t[t._optId]={obj:this.modes[this.conf.opts_type].render(t,n),item:t,conf:{type:this.conf.opts_type}},t=null,i==!0&&(this.list.scrollTop+=1),r};dhtmlXCombo.prototype._removeOption=function(n){this.t[n].obj.destruct(this.t[n].item);this.t[n].obj=null;this.t[n].item.parentNode.removeChild(this.t[n].item);this.t[n].item=null;this.t[n].conf=null;this.t[n]=null;delete this.t[n];this.conf.last_hover==n&&(this.conf.last_hover=null);this.conf.last_selected==n&&(this.conf.last_selected=null,this._confirmSelect("onDelete"))};dhtmlXCombo.prototype._confirmSelect=function(n,t){var i=!1;if(typeof t=="undefined"&&(t=!0),this.conf.f_server_tm&&window.clearTimeout(this.conf.f_server_tm),this.conf.last_hover!=null)i=i||this.conf.last_value!=this._getOptionValue(this.conf.last_hover),this.conf.last_match=this.conf.last_selected=this.conf.last_hover,this.conf.last_value=this._getOptionValue(this.conf.last_selected),this.conf.last_text=this.base.firstChild.value=this.t[this.conf.last_selected].obj.getText(this.t[this.conf.last_selected].item,!0),this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this.base.childNodes[1].value=this.conf.last_value,this.base.childNodes[2].value="false";else if(this.conf.allow_free_text||this.base.firstChild.value==""&&this.conf.allow_empty_value)i=i||this.conf.last_text!=this.base.firstChild.value,this.conf.last_match=this.conf.last_value=this.conf.last_selected=null,this.conf.last_text=this.base.firstChild.value,this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this.base.childNodes[1].value=this.conf.last_text,this.base.childNodes[2].value="true";else if(n!="template"){this._cancelSelect(!0);this._updateTopImage(this.conf.last_selected);return}this.conf.f_ac&&this.conf.f_mode=="start"&&(this.conf.f_ac_text="",n!="blur"&&this._selectRange(this.base.firstChild.value.length,this.base.firstChild.value.length));t&&this._hideList();i==!0&&n!="onInit"&&n!="onDelete"&&(this.callEvent("onSelectionChange",[]),this.callEvent("onChange",[this.conf.last_value,this.conf.last_text]))};dhtmlXCombo.prototype._cancelSelect=function(n){this._hideList();n==!0&&this.conf.allow_free_text==!1&&this.conf.free_text_empty==!0?(this.conf.f_server_last=this.conf.last_match=this.conf.last_value=this.conf.last_selected=null,this.base.childNodes[1].value=this.conf.last_text=this.base.firstChild.value="",this.base.childNodes[2].value="false"):this.base.firstChild.value=this.conf.last_text;this.conf.f_mode!=!1&&this._filterOpts(!0)};dhtmlXCombo.prototype._getOption=function(n,t){var i,r,f,u;if(!this.t[n])return null;if(typeof t=="undefined"&&(t=-1),t<0)for(i=0;i<this.list.childNodes.length;i++)t<0&&this.list.childNodes[i]._optId==n&&(t=i);if(r={value:this.t[n].obj.getValue(this.t[n].item),text:this.t[n].obj.getText(this.t[n].item),text_input:this.t[n].obj.getText(this.t[n].item,!0),text_option:this.t[n].obj.getText(this.t[n].item,null,!0),css:this.t[n].obj.getCss(this.t[n].item),selected:n==this.conf.last_selected,index:t},typeof this.t[n].obj.getExtraData=="function"){f=this.t[n].obj.getExtraData(this.t[n].item);for(u in f)typeof r[u]=="undefined"&&(r[u]=f[u])}return r};dhtmlXCombo.prototype._getOptionProp=function(n,t,i){if(n!=null){var r=this._getOption(n);if(r!=null)return r[t]}return i};dhtmlXCombo.prototype._getOptionId=function(n){for(var t,i=null,r=0;r<this.list.childNodes.length;r++)i==null&&(t=this.list.childNodes[r]._optId,n==this.t[t].obj.getValue(this.t[t].item)&&(i=t));return i};dhtmlXCombo.prototype._getOptionValue=function(n){return this._getOptionProp(n,"value",null)};dhtmlXCombo.prototype.setSize=function(n){this.conf.combo_width=parseInt(n)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0);this.base.style.width=Math.max(0,this.conf.combo_width)+"px";this._adjustBase();this._isListVisible()&&(this._hideList(),this._showList())};dhtmlXCombo.prototype._adjustBase=function(){this.base.firstChild.style.width=Math.max(0,this.conf.combo_width-(this.conf.i_ofs+1)-(this.conf.combo_image?this.conf.i_ofs:0))+"px";this.base.firstChild.style.marginLeft=this.conf.combo_image?this.conf.i_ofs+"px":"0px"};dhtmlXCombo.prototype.setOptionWidth=function(n){this.conf.opts_width=parseInt(n)||null};dhtmlXCombo.prototype.setOptionIndex=function(n,t){var r,i;isNaN(t)||t<0||(r=this.getOption(n),r!=null)&&t!=r.index&&(i=this.list.childNodes[r.index],i.parentNode.removeChild(i),this.list.childNodes[t]!=null?this.list.insertBefore(i,this.list.childNodes[t]):this.list.appendChild(i),i=null)};dhtmlXCombo.prototype.getOptionsCount=function(){return this.list.childNodes.length};dhtmlXCombo.prototype._mcMakeTemplate=function(n){var u="",f="",i,r,t;for(this.conf.col_w=0,i=0;i<n.length;i++){var r=Number(parseInt(n[i].width)||50),e=n[i].css||"",o=i==0&&window.dhx4.isIE6==!0?"_first":"";f+="<div class='dhxcombo_cell"+o+" "+e+"' style='width:"+r+"px;'><div class='dhxcombo_cell_text'>"+(n[i].option||"&nbsp;")+"<\/div><\/div>";u+="<div class='dhxcombo_hdrcell"+o+" "+e+"' style='width:"+r+"px;'><div class='dhxcombo_hdrcell_text'>"+(n[i].header||"&nbsp;")+"<\/div><\/div>";this.conf.col_w+=r+1}r=500;t=document.createElement("DIV");t.style.position="absolute";t.style.top="10px";t.style.left=-r*2+"px";t.style.width=r+"px";t.style.height="50px";t.style.overflowY="scroll";t.innerHTML="<div>&nbsp;<\/div>";document.body.appendChild(t);this.conf.col_w+=r-t.firstChild.offsetWidth+10;t.parentNode.removeChild(t);t=null;this.conf.template.option=f;this._mcAttachHeader(u);this.list.className+=" dhxcombolist_multicolumn"};dhtmlXCombo.prototype._mcAttachHeader=function(n){this.hdr==null&&(this.hdr=document.createElement("DIV"),this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr",this.hdr.style.display="none",this.list.parentNode.insertBefore(this.hdr,this.list),typeof addEventListener=="function"?this.hdr.addEventListener("mousedown",this._doOnListMouseDown,!1):this.hdr.attachEvent("onmousedown",this._doOnListMouseDown),this.conf.opts_type=="checkbox"&&this.conf.combo_image==!0&&(this.conf.combo_image=!1,this.base.lastChild.className.match(/dhxcombo_top_image/)!=null&&this.base.removeChild(this.base.lastChild),this._adjustBase()));this.hdr.innerHTML="<div class='dhxcombo_hdrtext'>"+n+"<\/div>"};dhtmlXCombo.prototype._mcDetachHeader=function(){this.hdr!=null&&(typeof addEventListener=="function"?this.hdr.removeEventListener("mousedown",this._doOnListMouseDown,!1):this.hdr.detachEvent("onmousedown",this._doOnListMouseDown),this.hdr.parentNode.removeChild(this.hdr),this.hdr=null);this.conf.col_w=null;this.conf.item_h=null};dhtmlXCombo.prototype.modes={};dhtmlXCombo.prototype.doWithItem=function(n,t){var i=n>=0&&n<this.list.childNodes.length?this.list.childNodes[n]._optId:null,u,r;if(i==null||typeof this.t[i].obj[t]!="function")return null;for(u=[this.t[i].item],r=2;r<arguments.length;r++)u.push(arguments[r]);return this.t[i].obj[t].apply(this.t[i].obj,u)};dhtmlXCombo.prototype.modes.option={image:!1,html:!1,option_css:"dhxcombo_option_text",render:function(n,t){return n._conf={value:t.value,css:""},n.className="dhxcombo_option",n.innerHTML="<div class='"+this.option_css+"'>&nbsp;<\/div>",t.css!=null&&(n.lastChild.style.cssText=t.css,n._conf.css=t.css),this.setText(n,t.text),this},destruct:function(n){n._conf=null},update:function(n,t){n._conf.value=t.value;n._conf.css=t.css;n.lastChild.style.cssText=t.css;this.setText(n,t.text)},setText:function(n,t,i){n._conf.text=t;var r=typeof t=="object"?window.dhx4.template(n._tpl.option,this.replaceHtml(n._conf.text,i),!0):window.dhx4.trim(this.replaceHtml(n._conf.text,i)||"");n.lastChild.innerHTML=r.length==0?"&nbsp;":r},getText:function(n,t,i){return window.dhx4.s2b(t)&&typeof n._conf.text=="object"?window.dhx4.template(n._tpl.input,n._conf.text,!0):window.dhx4.s2b(i)&&typeof n._conf.text=="object"?window.dhx4.template(n._tpl.option,n._conf.text,!0):n._conf.text},getValue:function(n){return n._conf.value},getCss:function(n){return n._conf.css},setSelected:function(n,t){n.className="dhxcombo_option"+(t?" dhxcombo_option_selected":"")},isSelected:function(n){return String(n.className).indexOf("dhxcombo_option_selected")>=0},getExtraData:function(){return{type:"option"}},replaceHtml:function(n,t){var i,r;if(this.html==!0)return n;if((typeof t=="undefined"||t==null)&&(t={}),typeof n=="object"){r={};for(i in n)r[i]=t[i]==!0?n[i]:this.replaceHtml(n[i])}else r=(n||"").replace(/[\<\>\&\s]/g,function(n){switch(n){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case" ":return"&nbsp;"}return n});return r}};dhtmlXCombo.prototype.modes.checkbox={image:!0,html:!1,image_css:"dhxcombo_checkbox dhxcombo_chbx_#state#",option_css:"dhxcombo_option_text dhxcombo_option_text_chbx",render:function(n,t){this.image_css_regexp==null&&(this.image_css_regexp=new RegExp(this.image_css.replace("#state#","\\d*")));n._conf={value:t.value,css:"",checked:window.dhx4.s2b(t.checked)};n.className="dhxcombo_option";var i={};return t.multicol==!0?(t.text.checkbox="<div class='"+String(this.image_css).replace("#state#",n._conf.checked?"1":"0")+"'><\/div>&nbsp;",i.checkbox=!0,n.innerHTML="<div class='"+dhtmlXCombo.prototype.modes.option.option_css+"'><\/div>"):n.innerHTML="<div class='"+String(this.image_css).replace("#state#",n._conf.checked?"1":"0")+"'><\/div><div class='"+this.option_css+"'>&nbsp;<\/div>",t.css!=null&&(n.lastChild.style.cssText+=t.css,n._conf.css=t.css),this.setText(n,t.text,i),this},setChecked:function(n,t){n._conf.checked=window.dhx4.s2b(t);var i=String(this.image_css).replace("#state#",n._conf.checked?"1":"0");this._changeChbxCss(n.childNodes,i)},_changeChbxCss:function(n,t){for(var i=0;i<n.length;i++)n[i].tagName!=null&&n[i].className!=null&&n[i].className.match(this.image_css_regexp)!=null?n[i].className=t:n[i].childNodes.length>0&&this._changeChbxCss(n[i].childNodes,t)},isChecked:function(n){return n._conf.checked==!0},getExtraData:function(n){return{type:"checkbox",checked:n._conf.checked}},optionClick:function(n,t,i){for(var f=!0,r=t.target||t.srcElement,u;f==!0&&r!=null&&r!=n&&r.className!=null;)r.className.match(this.image_css_regexp)!=null?(u=[n._conf.value,!n._conf.checked],i.callEvent("onBeforeCheck",u)===!0&&(this.setChecked(n,!this.isChecked(n)),i.callEvent("onCheck",u)),f=!1,u=null):r=r.parentNode;return r=i=n=null,f},getTopImage:function(){return""},topImageClick:function(){return!0}};dhtmlXComboExtend("checkbox","option");dhtmlXCombo.prototype.setChecked=function(n,t){this.doWithItem(n,"setChecked",t)};dhtmlXCombo.prototype.getChecked=function(){for(var t=[],n=0;n<this.list.childNodes.length;n++)this.isChecked(n)&&t.push(this._getOptionProp(this.list.childNodes[n]._optId,"value",""));return t};dhtmlXCombo.prototype.isChecked=function(n){return this.doWithItem(n,"isChecked")};dhtmlXCombo.prototype.modes.image={image:!0,html:!1,image_css:"dhxcombo_image",option_css:"dhxcombo_option_text dhxcombo_option_text_image",render:function(n,t){return n._conf={value:t.value,css:""},n.className="dhxcombo_option",n.innerHTML="<div class='"+this.image_css+"'><\/div><div class='"+this.option_css+"'>&nbsp;<\/div>",t.css!=null&&(n.lastChild.style.cssText+=t.css,n._conf.css=t.css),this.setText(n,t.text),this.setImage(n,t.img,t.img_dis,t.img_path,t.img_def,t.img_def_dis),this},update:function(n,t){n._conf.value=t.value;n._conf.css=t.css;n.lastChild.style.cssText=t.css;this.setText(n,t.text);this.setImage(n,t.img,t.img_dis,t.img_path,t.img_def,t.img_def_dis)},setImage:function(n,t,i,r,u,f){t=t!=null&&t.length>0?r+t:u!=null&&u.length>0?r+u:null;i=i!=null&&i.length>0?r+i:f!=null&&f.length>0?r+f:f==!0?t:null;n._conf.img=t;n._conf.img_dis=i;n.firstChild.style.backgroundImage=t!=null?"url("+t+")":"none"},getExtraData:function(){return{type:"image"}},getTopImage:function(n,t){var i=t?"img":"img_dis";return n!=null&&n._conf[i]!=null?"<div class='"+this.image_css+"' style='background-image:url("+n._conf[i]+");'><\/div>":""}};dhtmlXComboExtend("image","option");dhtmlXCombo.prototype.setDefaultImage=function(n,t){n!=null&&(this.conf.img_def=n);t!=null&&(this.conf.img_def_dis=t)};dhtmlXCombo.prototype.setImagePath=function(n){this.conf.img_path=n};dhtmlXColorPicker.prototype.linkTo=function(n,t,i){arguments.length==1&&(t=i=n);var r;return n=n||null,i=i||null,typeof t=="string"&&(t=document.getElementById(t)),r=this._addNode(t,n,i),r&&this._attachEventsToNode(r),r};dhtmlXColorPicker.prototype._isBaseNode=function(n){return n==this.base?!0:n.parentElement==document.body?!1:n.parentElement?this._isBaseNode(n.parentElement):!1};dhtmlXColorPicker.prototype._hasInput=function(n){for(var r=!1,i=this._nodes.length,t=0;t<i;t++)if(this._nodes[t].valueCont==n){r=!0;break}return r};dhtmlXColorPicker.prototype._findNodesByArray=function(n){for(var i,r=n.length,t=0;t<r;t++)i=typeof n[t]=="string"?document.getElementById(n[t]):n[t],i&&this._addNode(i)};dhtmlXColorPicker.prototype._addNode=function(n,t,i){var r,u,f,e;return(r=typeof n=="string"?document.getElementById(n):n,typeof t=="string"&&(t=document.getElementById(t)),typeof i=="string"&&(i=document.getElementById(i)),!r)?null:(dhx4.s2b(r.getAttribute("colorbox"))&&(u=document.createElement("div"),u.style.width=r.offsetWidth+"px",u.style.height=r.offsetHeight+"px",r.style.width=r.offsetWidth-(r.offsetHeight+8)+"px",r.parentNode.insertBefore(u,r),u.style.position="relative",f=document.createElement("div"),u.appendChild(r),u.appendChild(f),f.className="dhxcp_colorBox",r.className+=" dhxcp_colorInput",f.style.width=f.style.height=r.offsetHeight+"px"),e={node:r,valueColor:t!=undefined?t:f||r,valueCont:i!=undefined?i:r,conf:{customColors:r.getAttribute("customcolors")!=null?dhx4.s2b(r.getAttribute("customcolors")):null,selectedColor:r.getAttribute("selectedcolor")}},this._nodes.push(e),this.activeNode||(this.activeNode=e),e)};dhtmlXColorPicker.prototype.getNode=function(n){var t=null,i=null;return t=typeof n=="string"?document.getElementById(n):n,t.tagName!=undefined&&(i=this._getNodeByElement(t)),i};dhtmlXColorPicker.prototype._getNodeByElement=function(n){for(var i=null,r=this._nodes.length,t=0;t<r;t++)this._nodes[t].node==n&&(i=this._nodes[t]);return i};dhtmlXColorPicker.prototype._getNodeByValueCont=function(n){for(var i=null,r=this._nodes.length,t=0;t<r;t++)this._nodes[t].valueCont&&this._nodes[t].valueCont==n&&(i=this._nodes[t]);return i};dhtmlXColorPicker.prototype.initMemoryColors=function(){var t=this,n;this._controllerNodes.memory_block.innerHTML="<div class='dhxcp_memory_button_cont'><button class='dhxcp_save_to_memory'><div class='dhxcp_label_bm'>"+this.i18n[this.conf.lang].btnAddColor+"<\/div><\/button><\/div><div class='dhxcp_memory_els_cont'><a class='dhxcp_memory_el'><\/a><a class='dhxcp_memory_el'><\/a><a class='dhxcp_memory_el'><\/a><a class='dhxcp_memory_el'><\/a><a class='dhxcp_memory_el'><\/a><a class='dhxcp_memory_el'><\/a><a class='dhxcp_memory_el'><\/a><a class='dhxcp_memory_el'><\/a><\/div>";this.memory=new this.Memory(this._controllerNodes.memory_block.childNodes[1]);this.memory.onSelect=this._onSelectMemoryEl;this.memory.onSave=function(n){var i=t.colorAIP.rgb2hex({r:n.red,g:n.green,b:n.blue});t.callEvent("onSaveColor",[i])};n=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=this._controllerNodes.memory_block.childNodes[0].firstChild.firstChild;typeof addEventListener=="function"?n.addEventListener("click",this.saveColor,!1):n.attachEvent("onclick",this.saveColor)};dhtmlXColorPicker.prototype._refreshCoordinatesByHSL=function(n,t,i){var r,u,f;r=Math.round((this.configColorArea.maxX-this.configColorArea.minX)*n/359)+this.configColorArea.minX;u=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-i)/100)+this.configColorArea.minY;f=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-t)/100)+this.configColorArea.minY;this._setColorAreaXY(r,u);this._setContrastY(f)};dhtmlXColorPicker.prototype._parseColor=function(n){var i,t;return n instanceof Array?t={r:parseInt(n[0]),g:parseInt(n[1]),b:parseInt(n[2])}:typeof n=="string"&&(n=n.replace(/\s/g,""),/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i.test(n)?(i=n.match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i),t={r:parseInt(i[1]),g:parseInt(i[2]),b:parseInt(i[3])}):t=this.colorAIP.hex2rgb(n)),t};dhtmlXColorPicker.prototype.setColor=function(n){var u=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue}),t=this._parseColor(n),i=t instanceof Object,f,r;return(i=i&&0<=t.r&&t.r<=255,i=i&&0<=t.g&&t.g<=255,i=i&&0<=t.b&&t.b<=255,!i)?u:(f=this.colorAIP.rgb2hex({r:t.r,g:t.g,b:t.b}),f==u)?u:(this.value.red=t.r,this.value.green=t.g,this.value.blue=t.b,r=this.colorAIP.rgb2hsl(t.r/255,t.g/255,t.b/255),this.value.hue=Math.round(r.h),this.value.sat=Math.round(r.s*100),this.value.lum=Math.round(r.l*100),this._refreshCoordinatesByHSL(this.value.hue,this.value.sat,this.value.lum),this._refreshContrast(),this._refreshInputValues(),this._refreshColorValue(),f)};dhtmlXColorPicker.prototype.getSelectedColor=function(){return[this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue}),[this.value.red,this.value.green,this.value.blue],[this.value.hue,this.value.sat,this.value.lum]]};dhtmlXColorPicker.prototype._attachEventsToNode=function(n){typeof addEventListener=="function"?n.node.addEventListener("click",this._doOnClickByNode,!1):n.node.attachEvent("onclick",this._doOnClickByNode);n.valueCont&&n.valueCont.tagName.toLowerCase()=="input"&&(typeof addEventListener=="function"?(n.valueCont.addEventListener("focus",this._doOnFocusByInput,!1),n.valueCont.addEventListener("blur",this._doOnBlurByInput,!1)):(n.valueCont.attachEvent("onfocus",this._doOnFocusByInput),n.valueCont.attachEvent("onblur",this._doOnBlurByInput)))};dhtmlXColorPicker.prototype._detachEventsFromNode=function(n){typeof addEventListener=="function"?n.node.removeEventListener("click",this._doOnClickByNode,!1):n.node.detachEvent("onclick",this._doOnClickByNode);n.valueCont&&n.valueCont.tagName.toLowerCase()=="input"&&(typeof addEventListener=="function"?(n.valueCont.removeEventListener("focus",this._doOnFocusByInput,!1),n.valueCont.removeEventListener("blur",this._doOnBlurByInput,!1)):(n.valueCont.detachEvent("onfocus",this._doOnFocusByInput),n.valueCont.detachEvent("onblur",this._doOnBlurByInput)))};dhtmlXColorPicker.prototype.show=function(n){var t=!1;n!=undefined&&(this.activeNode=this.getNode(n)||this.activeNode);this.activeNode&&this.activeNode.valueCont&&this.activeNode.valueCont.value&&this.setColor(this.activeNode.valueCont.value);this.activeNode?(t=this.activeNode.conf.customColors!=null?this.activeNode.conf.customColors:this.conf.customColors,this.setColor(this.activeNode.conf.selectedColor)):t=this.conf.customColors;t?this.showMemory():this.hideMemory();this.base._dhx_remove?(this.base.firstChild.style.zIndex=dhx4.zim.reserve(this.conf.cp_id),this.base.style.visibility="hidden",document.body.firstChild?document.body.insertBefore(this.base,document.body.firstChild):document.body.appendChild(this.base),this._refreshPosition(),this.base.style.visibility="visible",typeof addEventListener=="function"?document.body.addEventListener("mousedown",this._doOnClickByBody,!1):document.body.attachEvent("onmousedown",this._doOnClickByBody)):this.base.appendChild(this._globalNode);this._controllerNodes.fr_cover&&this.base.insertBefore(this._controllerNodes.fr_cover,this._globalNode);this.callEvent("onShow",[this.activeNode?this.activeNode.node:null])};dhtmlXColorPicker.prototype.setPosition=function(n,t){var i=null,r=parseInt(n),u=parseInt(t);isNaN(r)&&(i={right:"right",bottom:"bottom"}[n.toLowerCase()]?n:null);this.base._dhx_remove?i==null||(this.conf.position=i,this._refreshPosition(i)):isNaN(r)||isNaN(u)||(this._globalNode.style.left=r+"px",this._globalNode.style.top=u+"px",this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.style.left=this._globalNode.style.left,this._controllerNodes.fr_cover.style.top=this._globalNode.style.top))};dhtmlXColorPicker.prototype._initListenerInput=function(){var n=this;this._inputListenerId=this._inputListenerId||setInterval(function(){n._refreshValueByInput()},70)};dhtmlXColorPicker.prototype._removeListenerInput=function(){this._inputListenerId&&(clearInterval(this._inputListenerId),this._inputListenerId=null)};dhtmlXColorPicker.prototype._refreshValueByInput=function(){var n=this.activeNode.valueCont.value,t=this.getSelectedColor()[0];this._inputListenerId&&/^#[\da-f]{6}$/i.test(n)&&n!=t&&(this.setColor(n),this.callEvent("onSelect",[n,this.activeNode.node]))};dhtmlXColorPicker.prototype._refreshPosition=function(n){var i,r;if(this.activeNode!=null){var f=dhx4.absTop(this.activeNode.node),u=dhx4.absLeft(this.activeNode.node),t=dhx4.screenDim(),e=this._globalNode.offsetWidth,o=this._globalNode.offsetHeight,i=0;n=n||this.conf.position;switch(n){case"bottom":i=f+this.activeNode.node.offsetHeight+this.conf.indent;r=u;r+e>t.left+t.right&&(r=u+this.activeNode.node.offsetWidth-e);r<t.left&&(r=u);i+o>t.top+t.bottom&&(i=f-o-this.conf.indent);i-t.top<0&&(i=t.top+this.conf.indent);this._globalNode.style.top=i+"px";this._globalNode.style.left=r+"px";break;default:r=u+this.activeNode.node.offsetWidth+this.conf.indent;i=f;n=="right"&&(r+e>t.left+t.right&&(r=u-e-this.conf.indent),r<t.left&&(r=u+this.activeNode.node.offsetWidth+this.conf.indent));t.bottom-(i+o)<=0&&(i=f+this.activeNode.node.offsetHeight-o);i-t.top<0&&(i=t.top+this.conf.indent);this._globalNode.style.left=r+"px";this._globalNode.style.top=i+"px"}this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.style.left=this._globalNode.style.left,this._controllerNodes.fr_cover.style.top=this._globalNode.style.top)}};dhtmlXColorPicker.prototype.isVisible=function(){return this.base._dhx_remove?this.base.parentNode==document.body:this._globalNode.parentNode==this.base};dhtmlXColorPicker.prototype.hide=function(){if(this.base._dhx_remove)this.base.parentNode&&(this.base.parentNode.removeChild(this.base),dhx4.zim.clear(this.conf.cp_id),typeof addEventListener=="function"?document.body.removeEventListener("mousedown",this._doOnClickByBody,!1):document.body.detachEvent("onmousedown",this._doOnClickByBody));else{if(this.isVisible()==!1)return;this.base.removeChild(this._globalNode)}this._controllerNodes.fr_cover&&this._controllerNodes.fr_cover.parentNode&&this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover);this.callEvent!=undefined&&this.callEvent("onHide",[this.activeNode?this.activeNode.node:null])};dhtmlXColorPicker.prototype.configColorArea={minX:1,maxX:209,minY:1,maxY:119};dhtmlXColorPicker.prototype._skinCollection={dhx_skyblue:!0,dhx_web:!0,dhx_terrace:!0,material:!0};dhtmlXColorPicker.prototype.i18n={en:{labelHue:"Hue",labelSat:"Sat",labelLum:"Lum",labelRed:"Red",labelGreen:"Green",labelBlue:"Blue",btnAddColor:"Save the color",btnSelect:"Select",btnCancel:"Cancel"}};dhtmlXColorPicker.prototype.loadUserLanguage=function(n){typeof this._mergeLangModules=="function"&&this._mergeLangModules();this.conf.lang=n;this._refreshLanguage()};dhtmlXColorPicker.prototype._refreshLanguage=function(){var n,t=this.i18n[this.conf.lang];for(n in t)this._labelNodes[n]&&(this._labelNodes[n].innerHTML=t[n])};dhtmlXColorPicker.prototype._setColorAreaXY=function(n,t){var i=this.configColorArea;n=parseInt(n);i.minX>n?this.conf.x=i.minX:n>i.maxX?this.conf.x=i.maxX:isNaN(n)||(this.conf.x=n);t=parseInt(t);i.minY>t?this.conf.y=i.minY:t>i.maxY?this.conf.y=i.maxY:isNaN(t)||(this.conf.y=t);this._refreshLines()};dhtmlXColorPicker.prototype._setColorByXYC=function(n){n=n||!1;this.value.hue=Math.round(359*(this.conf.x-this.configColorArea.minX)/(this.configColorArea.maxX-this.configColorArea.minX));this.value.lum=Math.round(100-100*(this.conf.y-this.configColorArea.minY)/(this.configColorArea.maxY-this.configColorArea.minY));this.value.sat=Math.round(100-100*(this.conf.c-this.configColorArea.minY)/(this.configColorArea.maxY-this.configColorArea.minY));var t=this.colorAIP.hsl2rgb(this.value.hue,this.value.sat/100,this.value.lum/100);this.value.red=Math.round(255*t.r);this.value.green=Math.round(255*t.g);this.value.blue=Math.round(255*t.b);n||this._refreshContrast();this._refreshInputValues();this._refreshColorValue()};dhtmlXColorPicker.prototype._setContrastY=function(n){var t=this.configColorArea;n=parseInt(n);isNaN(n)||(this.conf.c=Math.min(Math.max(t.minY,n),t.maxY));this._refreshContrastLine()};dhtmlXColorPicker.prototype._refreshInputValues=function(){this._controllerNodes.hue.value=this.value.hue;this._controllerNodes.sat.value=this.value.sat;this._controllerNodes.lum.value=this.value.lum;this._controllerNodes.red.value=this.value.red;this._controllerNodes.green.value=this.value.green;this._controllerNodes.blue.value=this.value.blue};dhtmlXColorPicker.prototype._refreshColorValue=function(){this._controllerNodes.color.style.backgroundColor="rgb("+[this.value.red,this.value.green,this.value.blue].join(", ")+")";var n=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue});this._controllerNodes.hsv.value=n;this.callEvent("onChange",[n])};dhtmlXColorPicker.prototype._refreshContrast=function(){var n=this.colorAIP.hsl2rgb(this.value.hue,0,this.value.lum/100),t=this.colorAIP.hsl2rgb(this.value.hue,1,this.value.lum/100),u=this._checkIeVersion(),i,f,e,r;u&&u<=9?(i=this._controllerNodes.contrastArea.firstChild,i==this._controllerNodes.contrast_line&&(i=document.createElement("div"),i.className+="dhxcp_ie_gradient",this._controllerNodes.contrastArea.appendChild(i),this._controllerNodes.contrastArea.appendChild(this._controllerNodes.contrast_line)),f=this.colorAIP.rgb2hex({r:Math.round(255*n.r),g:Math.round(255*n.g),b:Math.round(255*n.b)}),e=this.colorAIP.rgb2hex({r:Math.round(255*t.r),g:Math.round(255*t.g),b:Math.round(255*t.b)}),i.style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+e+"', endColorstr='"+f+"', GradientType=0)"):(n=[Math.round(255*n.r),Math.round(255*n.g),Math.round(255*n.b)],t=[Math.round(255*t.r),Math.round(255*t.g),Math.round(255*t.b)],r="linear-gradient(rgb("+t.join(",")+"), rgb("+n.join(",")+"))",window.dhx4.isKHTML==!0&&navigator.userAgent.match(/Windows/gi)!=null&&(r="-webkit-"+r),this._controllerNodes.contrastArea.style.backgroundImage=r)};dhtmlXColorPicker.prototype._refreshLines=function(){this._controllerNodes.v_line.style.left=this.conf.x+"px";this._controllerNodes.h_line.style.top=this.conf.y+"px"};dhtmlXColorPicker.prototype._refreshContrastLine=function(){this._controllerNodes.contrast_line.style.top=this.conf.c+"px"};dhtmlXColorPicker.prototype._getOffsetPosition=function(n,t){var i={x:NaN,y:NaN},r=n.target||n.srcElement;return r==t?(i.x=n.offsetX!=undefined?n.offsetX:n.layerX,i.y=n.offsetY!=undefined?n.offsetY:n.layerY):r==this._controllerNodes.v_line?i.y=n.offsetY!=undefined?n.offsetY:n.layerY:i.x=n.offsetX!=undefined?n.offsetX:n.layerX,i};dhtmlXColorPicker.prototype.colorAIP={hex2rgb:function(n){var t=n.match(/^(#)([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);return t!=null?{r:parseInt("0x"+t[2]),g:parseInt("0x"+t[3]),b:parseInt("0x"+t[4])}:null},rgb2hex:function(n){var t=parseInt(n.r),i=parseInt(n.g),r=parseInt(n.b);return t=t||0,i=i||0,r=r||0,"#"+(t?t<16?"0"+t.toString(16):t.toString(16):"00")+(i?i<16?"0"+i.toString(16):i.toString(16):"00")+(r?r<16?"0"+r.toString(16):r.toString(16):"00")},rgb2hsl:function(n,t,i){var e,o,f,r=Math.max(n,t,i),u=Math.min(n,t,i);return f=.5*(r+u),r==u?e=0:r==n?(e=60*(t-i)/(r-u),t<i&&(e+=360)):e=r==t?60*(i-n)/(r-u)+120:60*(n-t)/(r-u)+240,o=f==0||r==u?0:f<=.5?.5*(r-u)/f:.5*(r-u)/(1-f),{h:e,s:o,l:f}},hsl2rgb:function(n,t,i){var o,e,s,r=[],f=[],u;for(o=i<=.5?i*(1+t):i+t-i*t,e=2*i-o,s=n/360,r.push(s+1/3),r.push(s),r.push(s-1/3),u=0;u<3;u++)r[u]<0?r[u]+=1:r[u]>1&&(r[u]-=1),r[u]<1/6?f.push(e+(o-e)*6*r[u]):r[u]<.5?f.push(o):r[u]<2/3?f.push(e+(o-e)*(2/3-r[u])*6):f.push(e);return{r:f[0],g:f[1],b:f[2]}}};dhtmlXColorPicker.prototype._checkIeVersion=function(){var n=navigator.userAgent.match(/(MSIE)\s(\d\.\d)/i);return n&&n[2]?parseInt(n[2]):null};dhtmlXColorPicker.prototype.setCustomColors=function(){this.memory==null&&(this.initMemoryColors(),this.conf.customColors=!0);for(var i,t,r,f,u=arguments.length,n=0;n<u;n++)if(arguments[n]instanceof Array){i=this._rgb2value(arguments[n][0],arguments[n][1],arguments[n][2]);this.memory.setValue(i,null,!1);continue}else if(typeof arguments[n]=="string"){if(t=arguments[n].match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i),t instanceof Array){i=this._rgb2value(t[1],t[2],t[3]);this.memory.setValue(i,null,!1);continue}if(t=arguments[n].match(/(#[\da-f]{6})/ig),t instanceof Array)for(f=t.length,r=0;r<f;r++)i=this._hex2value(t[r]),this.memory.setValue(i,null,!1)}};dhtmlXColorPicker.prototype.getCustomColors=function(){var i=[],n,t;if(this.memory!=null&&this.conf.customColors==!0)for(n=0;n<this.memory.controllers.length;n++)t=this.memory.controllers[n].value,i.push(this.colorAIP.rgb2hex({r:t.red,g:t.green,b:t.blue}));return i};dhtmlXColorPicker.prototype._rgb2value=function(n,t,i){var r=this.colorAIP.rgb2hsl(n/255,t/255,i/255);return{red:n,green:t,blue:i,hue:Math.round(r.h),sat:Math.round(r.s*100),lum:Math.round(r.l*100)}};dhtmlXColorPicker.prototype._hex2value=function(n){var t,i;return t=this.colorAIP.hex2rgb(n),i=this.colorAIP.rgb2hsl(t.r/255,t.g/255,t.b/255),{red:t.r,green:t.g,blue:t.b,hue:Math.round(i.h),sat:Math.round(i.s*100),lum:Math.round(i.l*100)}};dhtmlXColorPicker.prototype.showMemory=function(){this.memory==null&&this.initMemoryColors();this._globalNode.className.match(/dhxcp_add_memory/)||(this._globalNode.className+=" dhxcp_add_memory");this.conf.customColors=!0};dhtmlXColorPicker.prototype.hideMemory=function(){this.memory!=null&&(this._globalNode.className=this._globalNode.className.replace(/\sdhxcp_add_memory/,""));this.conf.customColors=!1};dhtmlXColorPicker.prototype.setSkin=function(n){var r,t,i;if(this._skinCollection[n]==!0){if(r="dhtmlxcp_"+(this.skin||"dummy"),this.base.className=this.base.className.replace(new RegExp(r),""),this.base.className+=" dhtmlxcp_"+n,this.skin=n,this.skin=="material"){t={labelHue:"H",labelSat:"S",labelLum:"L",labelRed:"R",labelGreen:"G",labelBlue:"B"};for(i in t)this.i18n.en[i]=t[i]}this.base.className.match(/dhxcp_shadow/)!=null||dhx4.isIE6||dhx4.isIE7||dhx4.isIE8||(this.base.className+=" dhxcp_shadow")}};dhtmlXColorPicker.prototype.hideOnSelect=function(n){n=dhx4.s2b(n);this.conf.hideOnSelect=n};dhtmlXColorPicker.prototype._indexOf=function(n,t){for(var u=-1,r=n.length,i=r;i>=0;i--)if(n[i]==t){u=i;break}return u};dhtmlXColorPicker.prototype.destructMemory=function(){if(this.memory!=null){this.hideMemory();var n=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=null;typeof addEventListener=="function"?n.removeEventListener("click",this.saveColor,!1):n.detachEvent("onclick",this.saveColor);this.memory.remove();this._controllerNodes.memory_block.innerHTML="";this.memory=null}};dhtmlXColorPicker.prototype.Memory=function(n){var i=this,t=null,r={red:255,blue:255,green:255,hue:0,sat:0,lum:100};this.select=function(){var r=this!=window?this:event.srcElement,n=n||r.dhxpc_memory;if(t!=null&&i.unSelect(),t=n,n.domElement.className+=" dhxcp_memory_el_select",typeof i.onSelect=="function")i.onSelect(n)};this.onSelect=null;this.onSave=null;this._createMemoryController=function(n){var t={domElement:n,value:dhx4._copyObj(r)};return n.dhxpc_memory=t,typeof addEventListener=="function"?n.addEventListener("click",i.select,!1):n.attachEvent("onclick",i.select),t};this._findMemoryControllers=function(n){for(var i=n.getElementsByTagName("a"),u=[],r=i.length,t=0;t<r;t++)u.push(this._createMemoryController(i[t]));return u};this.controllers=this._findMemoryControllers(n);this.unSelect=function(){t&&(t.domElement.className=t.domElement.className.replace(/\s.*$/i,""));t=null};this.setActiveNext=function(){var n=null,i;return t==null?t=this.controllers[0]:(n=this.getIndex(t),i=this.controllers.length,this.unSelect(),t=n+1<i?this.controllers[n+1]:this.controllers[0]),t.domElement.className+=" dhxcp_memory_el_next",t};this.setValue=function(n,i,r){if(t=i||t,t==null&&(t=this.controllers[0]),t.value.red=n.red,t.value.blue=n.blue,t.value.green=n.green,t.value.hue=n.hue,t.value.sat=n.sat,t.value.lum=n.lum,t.domElement.style.backgroundColor="rgb("+[n.red,n.green,n.blue].join(", ")+")",this.setActiveNext(),r!=!1&&typeof this.onSave=="function")this.onSave(n)};this.clean=function(){for(var u=this.controllers.length,n,i=0;i<u;i++)n=this.controllers[i],n.value=dhx4._copyObj(r),n.domElement.style.backgroundColor="rgb("+[r.red,r.green,r.blue].join(", ")+")";this.unSelect();t=this.controllers[0]};this.getIndex=function(n){for(var r=-1,i=this.controllers.length,t=0;t<i;t++)if(this.controllers[t]==n){r=t;break}return r};this.remove=function(){for(var t=this.controllers.length,n=0;n<t;n++)typeof addEventListener=="function"?this.controllers[n].domElement.removeEventListener("click",this.select,!1):this.controllers[n].domElement.detachEvent("onclick",this.select),delete this.controllers[n].domElement.dhxpc_memory;delete this.onSelect;delete this.controllers;delete this.onSave}};window.dhx4.isIE6&&(dhtmlXColorPicker.prototype._cpInitFRM=function(){var n;this._controllerNodes.fr_cover||(n=document.createElement("IFRAME"),n.className="dhxcp_frm",n.border=0,n.frameBorder=0,this._controllerNodes.fr_cover=n);this.base._dhx_remove||this.base.insertBefore(n,this._globalNode)});dhtmlXSlider.prototype._setOrient=function(n){n=n||!1;/\s?dhxsl_cont_hr/i.test(this._nodes.cont.className)&&(this._nodes.cont.className=this._nodes.cont.className.replace(/\s?dhxsl_cont_hr/i,""));/\s?dhxsl_cont_vr/i.test(this._nodes.cont.className)&&(this._nodes.cont.className=this._nodes.cont.className.replace(/\s?dhxsl_cont_vr/i,""));this._nodes.cont.className+=n?" dhxsl_cont_vr":" dhxsl_cont_hr"};dhtmlXSlider.prototype._getTouchCoord=function(n){var t=(n.type.match(/mouse/)!=null?"client":"page")+(this.conf.vertical==!0?"Y":"X");return typeof n[t]!="undefined"&&n[t]!=0?n[t]:n.touches!=null&&n.touches[0]!=null?n.touches[0][t]||0:0};dhtmlXSlider.prototype._attachEvents=function(n){typeof addEventListener=="function"?(n.runner.addEventListener("mousedown",this._initMover,!1),n.runner.addEventListener("touchstart",this._initMover,!1),n.cont.addEventListener("mousedown",this._doOnSetValue,!1),n.cont.addEventListener("touchstart",this._doOnSetValue,!1),n.runner2&&(n.runner2.addEventListener("mousedown",this._initMover,!1),n.runner2.addEventListener("touchstart",this._initMover,!1))):(n.runner.attachEvent("onmousedown",this._initMover),n.cont.attachEvent("onmousedown",this._doOnSetValue),n.runner2&&n.runner2.attachEvent("onmousedown",this._initMover))};dhtmlXSlider.prototype._detachEvents=function(n){typeof addEventListener=="function"?(n.runner.removeEventListener("mousedown",this._initMover,!1),n.runner.removeEventListener("touchstart",this._initMover,!1),n.cont.removeEventListener("mousedown",this._doOnSetValue,!1),n.cont.removeEventListener("touchstart",this._doOnSetValue,!1),n.runner2&&(n.runner2.removeEventListener("mousedown",this._initMover,!1),n.runner2.removeEventListener("touchstart",this._initMover,!1))):(n.runner.detachEvent("onmousedown",this._initMover),n.cont.detachEvent("onmousedown",this._doOnSetValue),n.runner2&&n.runner2.detachEvent("onmousedown",this._initMover))};dhtmlXSlider.prototype._mergeConfig=function(n){for(var t in n)switch(t.toLowerCase()){case"min":case"max":case"size":case"step":case"value":case"inverse":this.conf[t]=n[t];break;case"tooltip":case"visible":case"vertical":case"disabled":case"range":case"bg":this.conf[t]=dhx4.s2b(n[t]);break;case"bg_mode":this.conf[t]={left:"left",right:"right"}[n[t]]||"left";break;case"parent":continue;case"skin":this.conf[t]=this._skinCollection[n[t]]==!0?n[t]:null;break;default:this.conf[t]=n[t]}};dhtmlXSlider.prototype._readAttFormNode=function(n){for(var u=n.attributes,f=u.length,i={},t,r=0;r<f;r++){t=u[r];switch(t.name.toLowerCase()){case"size":case"min":case"max":case"value":case"step":i[t.name]=Number(t.value);break;case"skin":i[t.name]=t.value;break;case"vertical":case"disabled":case"visible":case"range":case"bg":i[t.name]=dhx4.s2b(t.value);break;case"linkto":i[t.name]=t.value;break;case"tooltip":i[t.name]=dhx4.s2b(t.value);break;case"bg_mode":i[t.name]={left:"left",right:"right"}[t.value]||"left"}}return i};dhtmlXSlider.prototype._renderArgumets=function(n){for(var i={},r=n.length,t=0;t<r;t++)switch(t){case 0:i.parent=n[t];break;case 1:i.size=n[t];break;case 2:i.skin=n[t];break;case 3:i.vertical=n[t];break;case 4:i.min=n[t];break;case 5:i.max=n[t];break;case 6:i.value=n[t];break;case 7:i.step=n[t]}return i};dhtmlXSlider.prototype._skinCollection={dhx_skyblue:!0,dhx_web:!0,dhx_terrace:!0,material:!0};dhtmlXSlider.prototype._indexOf=function(n,t){for(var u=-1,r=n.length,i=r;i>=0;i--)if(n[i]==t){u=i;break}return u};dhtmlXSlider.prototype._refreshRunner=function(n){var t=this.conf.vertical==!0?{x:"top",y:"left",ofs_w:"offsetHeight",ofs_h:"offsetWidth"}:{x:"left",y:"top",ofs_w:"offsetWidth",ofs_h:"offsetHeight"},f=this._nodes.cont[t.ofs_w]-this._nodes.runner[t.ofs_w],i=this._nodes.runner,r=this._nodes.runner2,u;(n==null||n==0)&&(u=this._getCoord(f,this.conf.value instanceof Array?this.conf.value[0]:this.conf.value),i.style[t.x]=u+this.conf.border+"px",i.style[t.y]=Math.round((this._nodes.cont[t.ofs_h]-i[t.ofs_h])/2)+"px");this.conf.range==!0&&(n==null||n==1)&&(u=this._getCoord(f,this.conf.value[1]),r.style[t.x]=u+this.conf.border+"px",r.style[t.y]=Math.round((this._nodes.cont[t.ofs_h]-i[t.ofs_h])/2)+"px");this.conf.range==!0&&(i.style[t.x]==r.style[t.x]&&this.conf.value[1]==this.conf.max?i.style.zIndex!=2&&(i.style.zIndex=2):i.style.zIndex==2&&(i.style.zIndex=1));i=r=null;this._refreshBG()};dhtmlXSlider.prototype._setValueByCoord=function(n){var r=dhx4.absLeft(this._nodes.cont),u=dhx4.absTop(this._nodes.cont),t,i;i=this.conf.vertical?(n.y-u-this._nodes.runner.offsetHeight/2)/(this._nodes.cont.offsetHeight-this._nodes.runner.offsetHeight):(n.x-r-this._nodes.runner.offsetWidth/2)/(this._nodes.cont.offsetWidth-this._nodes.runner.offsetWidth);t=(this.conf.max-this.conf.min)*i+this.conf.min;this.setValue(t,!0)};dhtmlXSlider.prototype._getCoord=function(n,t){var i=this.conf.inverse?this._inverseValue(t):t,r=(i-this.conf.min)/(this.conf.max-this.conf.min);return Math.round(n*r)};dhtmlXSlider.prototype._normalize=function(n,t,i){n=Number(n);n=Math.round(n/this.conf.step)*this.conf.step;var r=Math.pow(10,this.conf.decimals);return n=Math.round(n*r)/r,Math.max(t,Math.min(i,n))};dhtmlXSlider.prototype._normalizeRange=function(n,t,i){return n[1]<n[0]&&(n[1]=n[0]),n[0]=this._normalize(n[0],t,Math.min(i,n[1])),n[1]=this._normalize(n[1],Math.max(t,n[0]),i),n};dhtmlXSlider.prototype._refreshBG=function(){var u;if(this.conf.bg==!0){var i=this._nodes.track.firstChild,t=this._nodes.runner,r=t.nextSibling,n=this.conf.vertical==!0?{x:"top",w:"height",ofs:"offsetHeight"}:{x:"left",w:"width",ofs:"offsetWidth"};this.conf.range==!0?(i.style[n.x]=Math.floor(parseInt(t.style[n.x])+t[n.ofs]/2)+"px",i.style[n.w]=Math.max(Math.floor(parseInt(r.style[n.x])+r[n.ofs]/2)-parseInt(i.style[n.x]),0)+"px"):(u=this.conf.inverse==!0?{left:"right",right:"left"}[this.conf.bg_mode]:this.conf.bg_mode,i.style[n.x]=(u=="left"?"0":Math.floor(parseInt(t.style[n.x])+t[n.ofs]/2))+"px",i.style[n.w]=(u=="left"?Math.floor(parseInt(t.style[n.x])+t[n.ofs]/2):this._nodes.track[n.ofs]-parseInt(i.style[n.x]))+"px");i=t=r=null}};dhtmlXSlider.prototype._attachNode=function(n,t){this._detachNode(t);var i=n.tagName.toLowerCase();if(i){this._attachedNode["node_"+t]=n;switch(i){case"input":case"select":typeof addEventListener=="function"?(n.addEventListener("change",this._doOnChangeInput,!1),n.addEventListener("keydown",this._doOnKeyDown,!1)):(n.attachEvent("onchange",this._doOnChangeInput),n.attachEvent("onkeydown",this._doOnKeyDown));this._attachedNode.setValue=function(n,t,i){var r=n instanceof Array?n[i||0]:n;this["node_"+(i||0)].value=dhtmlXSlider.prototype._atatchedNodeFixDec(r,t)};break;default:this._attachedNode.setValue=function(n,t,i){var r=n instanceof Array?n[i||0]:n;this["node_"+(i||0)].innerHTML=dhtmlXSlider.prototype._atatchedNodeFixDec(r,t)}}this._attachedNode.setValue(this.conf.value,this.conf.decimals,t)}};dhtmlXSlider.prototype._detachNode=function(n){var t=this._attachedNode["node_"+n],i;if(t){i=t.tagName;switch(i){case"input":case"select":typeof addEventListener=="function"?(t.removeEventListener("change",this._doOnChangeInput,!1),t.removeEventListener("keydown",this._doOnChangeInput,!1)):(t.detachEvent("change",this._doOnChangeInput),t.detachEvent("keydown",this._doOnChangeInput))}delete this._attachedNode["node_"+n];delete this._attachedNode.setValue;t=null}};dhtmlXSlider.prototype._atatchedNodeFixDec=function(n,t){var i,r;if(n=String(n),t>0)for(i=n.match(/\.\d{1,}$/),i!=null&&(t=Math.max(t-i[0].length+1)),n+=n.indexOf(".")<0?".":"",r=0;r<t;r++)n+="0";return n};dhtmlXSlider.prototype._detectDecimals=function(){var n=this.conf.step.toString().match(/\.(\d*)$/);this.conf.decimals=n!=null?n[1].length:0};dhtmlXSlider.prototype.setSize=function(n){isNaN(n)||(this.conf.vertical?(this._nodes.cont.style.width&&delete this._nodes.cont.style.width,this._nodes.cont.style.height=n-this.conf.margin+"px"):(this._nodes.cont.style.height&&delete this._nodes.cont.style.height,this._nodes.cont.style.width=n-this.conf.margin+"px"),this._refreshRunner())};dhtmlXSlider.prototype.setSkin=function(n){n=n.toLowerCase();var t,i=-1,r,u="dhtmlxslider";if(t=this.base.className.match(/\S\w+/ig),t instanceof Array){for(r in this._skinCollection)if(i==-1)i=this._indexOf(t,u+"_"+r);else break;i=i==-1?t.length:i}else t=[],i=0;t[i]=u+"_"+n;this.base.className=t.join(" ");this.conf.skin=n;this._nodes&&this._refreshRunner()};dhtmlXSlider.prototype.setValue=function(n,t){var i,r,u;t=t||!1;i=null;r=!1;this.conf.range==!0?(this._r_actv!=null&&(i=this._r_actv==this._nodes.runner?0:1),n=this._normalizeRange(n,this.conf.min,this.conf.max),r=this.conf.value[0]!=n[0]||this.conf.value[1]!=n[1]):(n=this._normalize(n,this.conf.min,this.conf.max),r=this.conf.value!=n);(r=!0)&&(this.conf.value=n,this._refreshRunner(i),this._refreshTooltip(),t&&(u=[n,this],this.conf.range==!0&&(this._r_actv!=null?u.push(this._r_actv==this._nodes.runner?0:1):this.conf.init_index!=null&&u.push(this.conf.init_index.valueOf())),this.callEvent("onChange",u)));typeof this._attachedNode.setValue=="function"&&(i==null&&(i=this.conf.init_index),this._attachedNode.setValue(this.conf.value,this.conf.decimals,i))};dhtmlXSlider.prototype.getValue=function(){return this.conf.range==!0?[this.conf.value[0].valueOf(),this.conf.value[1].valueOf()]:this.conf.value.valueOf()};dhtmlXSlider.prototype._inverseValue=function(n){return this.conf.max+this.conf.min-n};dhtmlXSlider.prototype.disable=function(n){var i,t,r;if(n=n==!1?!1:!0,i=null,n){for(t in this._nodes)t!="cont"&&(r=t=="runner2"?"runner":t,this._nodes[t]!=null&&(i=new RegExp("\\s?dhxsl_"+r+"_dis","i"),i.test(this._nodes[t].className)||(this._nodes[t].className+=" dhxsl_"+r+"_dis")));this.conf.disabled=!0}else this.enable()};dhtmlXSlider.prototype.enable=function(){var t,n,i;for(n in this._nodes)n!="cont"&&(i=n=="runner2"?"runner":n,this._nodes[n]!=null&&(t=new RegExp("\\s?dhxsl_"+i+"_dis","i"),t.test(this._nodes[n].className)&&(this._nodes[n].className=this._nodes[n].className.replace(t,""))));this.conf.disabled=!1};dhtmlXSlider.prototype.isEnabled=function(){return!this.conf.disabled};dhtmlXSlider.prototype.disableTooltip=function(){this._nodes.cont.removeAttribute("title");this.conf.tooltip=!1};dhtmlXSlider.prototype.enableTooltip=function(n){n=typeof n=="undefined"?!0:dhx4.s2b(n);n?(this.conf.tooltip=!0,this._refreshTooltip()):this.disableTooltip()};dhtmlXSlider.prototype.setMax=function(n){!isNaN(n)&&this.conf.min<n&&(this.conf.max=n,this.setValue(this.conf.value))};dhtmlXSlider.prototype.getMax=function(){return this.conf.max};dhtmlXSlider.prototype.setMin=function(n){!isNaN(n)&&this.conf.max>n&&(this.conf.min=n,this.setValue(this.conf.value))};dhtmlXSlider.prototype.getMin=function(){return this.conf.min};dhtmlXSlider.prototype.setStep=function(n){var t=this.conf.max-this.conf.min;!isNaN(n)&&n<t&&(this.conf.step=n,this._detectDecimals(),this.setValue(this.conf.value))};dhtmlXSlider.prototype.getStep=function(){return this.conf.step};dhtmlXSlider.prototype.show=function(){/\s?dhxsl_hidden/i.test(this._nodes.cont.className)&&(this._nodes.cont.className=this._nodes.cont.className.replace(/\s?dhxsl_hidden/i,""));this.conf.visible=!0};dhtmlXSlider.prototype.hide=function(){/\s?dhxsl_hidden/i.test(this._nodes.cont.className)||(this._nodes.cont.className+=" dhxsl_hidden");this.conf.visible=!1};dhtmlXSlider.prototype.isVisible=function(){return this.conf.visible};dhtmlXSlider.prototype.linkTo=function(n){n instanceof Array||(n=[n]);for(var t=0;t<n.length&&t<2;t++)n[t]!=null&&(typeof n[t]=="string"&&(n[t]=document.getElementById(n[t])),this._attachNode(n[t],t))};dhtmlXSlider.prototype._refreshTooltip=function(){this.conf.tooltip==!0&&(this._nodes.cont.title=this.conf.value instanceof Array?this.conf.value.join(", "):this.conf.value)};dhtmlXSlider.prototype.getRunnerIndex=function(){return this._r_actv==null?-1:this._r_actv==this._nodes.runner?0:1};dhtmlXPopup.prototype.attachObject=function(n){return this._attachNode("object",{obj:n})};dhtmlXPopup.prototype._attach_init_object=function(n){this._nodeObj=typeof n.obj=="string"?document.getElementById(n.obj):n.obj;n.obj=null;document.getElementById(this._nodeId).appendChild(this._nodeObj);this._nodeObj.style.display="";this._nodeObj.style.visibility="visible"};dhtmlXPopup.prototype.attachHTML=function(n){return this._attachNode("html",{html:n})};dhtmlXPopup.prototype._attach_init_html=function(n){document.getElementById(this._nodeId).innerHTML=n.html;this._nodeObj={text:n.html}};dhtmlXPopup.prototype.attachForm=function(n,t){return this._attachNode("form",{struct:n,width:t})};dhtmlXPopup.prototype._attach_init_form=function(n){var t=this;this._nodeObj=new dhtmlXForm(this._nodeId,n.struct);this._nodeObj.setSkin(this.conf.skin);this._nodeObj.attachEvent("_onBeforeEditorAccess",function(){t._clearClick=!0});this.conf.editorEv!=null&&this.checkEvent(this.conf.editorEv)==!1&&(this.conf.editorEv=null);dhtmlXForm.prototype.items.editor!=null&&this.conf.editorEv==null&&(this.conf.editorEv=this.attachEvent("onShow",function(){var t=dhtmlXForm.prototype.items.editor.editor,i,n,r;for(i in t){for(n=t[i].base,r=!1;n!=null;)n==this.p?(r=!0,n=null):n=n.parentNode;n=null;r==!0&&(t[i].cell.conf.cells_cont=null,t[i].setSizes())}t=null;this.detachEvent(this.conf.editorEv);this.conf.editorEv=null}),this._nodeObjEv==null&&(this._nodeObjEv=[]),this._nodeObjEv.push(this.conf.editorEv))};dhtmlXPopup.prototype.attachCalendar=function(n){return this._attachNode("calendar",n||{})};dhtmlXPopup.prototype._attach_init_calendar=function(n){n.double==!0?(this._nodeObj=new dhtmlXDoubleCalendarObject(this._nodeId),this._nodeObj.leftCalendar.setSkin(this.conf.skin),this._nodeObj.rightCalendar.setSkin(this.conf.skin)):(this._nodeObj=new dhtmlXCalendarObject(this._nodeId),this._nodeObj.setSkin(this.conf.skin));this._nodeObj.show()};dhtmlXPopup.prototype.attachGrid=function(n,t){return this._attachNode("grid",{width:n||400,height:t||200})};dhtmlXPopup.prototype._attach_init_grid=function(){this._nodeObj=new dhtmlXGridObject(this._nodeId);this._nodeObj.setSkin(this.conf.skin)};dhtmlXPopup.prototype.attachTree=function(n,t,i){return this._attachNode("tree",{width:n||400,height:t||200,rootId:i||0})};dhtmlXPopup.prototype._attach_init_tree=function(n){this._nodeObj=new dhtmlXTreeObject(this._nodeId,"100%","100%",n.rootId)};dhtmlXPopup.prototype.attachLayout=function(n,t,i){return this._attachNode("layout",{width:n||400,height:t||200,pattern:i||"3L"})};dhtmlXPopup.prototype._attach_init_layout=function(n){this._nodeObj=new dhtmlXLayoutObject(this._nodeId,n.pattern,this.conf.skin)};dhtmlXPopup.prototype.attachAccordion=function(n,t,i){return this._attachNode("accordion",{width:n||400,height:t||200,conf:i||{}})};dhtmlXPopup.prototype._attach_init_accordion=function(n){n.conf.parent=this._nodeId;n.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXAccordion(n.conf)};dhtmlXPopup.prototype.attachTabbar=function(n,t,i){return typeof i=="string"?i={mode:i}:(typeof i!="object"||i==null)&&(i={}),this._attachNode("tabbar",{width:n||400,height:t||200,conf:i})};dhtmlXPopup.prototype._attach_init_tabbar=function(n){n.conf.parent=this._nodeId;n.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXTabBar(n.conf)};dhtmlXPopup.prototype.attachSidebar=function(n,t,i){return i==null&&(i={}),this._attachNode("sidebar",{width:n||400,height:t||200,conf:i})};dhtmlXPopup.prototype._attach_init_sidebar=function(n){n.conf.parent=this._nodeId;n.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXSideBar(n.conf)};dhtmlXPopup.prototype.attachEditor=function(n,t,i){return this._attachNode("editor",{width:n||400,height:t||200,conf:i||{}})};dhtmlXPopup.prototype._attach_init_editor=function(n){document.getElementById(this._nodeId).className="dhxeditor_"+this.conf.skin;n.conf.parent=this._nodeId;n.conf.skin==null&&(n.conf.skin=this.conf.skin);this._nodeObj=new dhtmlXEditor(n.conf);var t=this.attachEvent("onShow",function(){this._nodeObj instanceof window.dhtmlXEditor&&this._nodeObj.setSizes()});this._nodeObjEv==null&&(this._nodeObjEv=[]);this._nodeObjEv.push(t)};dhtmlXPopup.prototype.attachColorPicker=function(n){return(typeof n!="object"||n==null)&&(n={}),this._attachNode("colorpicker",{conf:n})};dhtmlXPopup.prototype._attach_init_colorpicker=function(n){n.conf.skin=this.conf.skin;n.conf.parent=this._nodeId;this._nodeObj=new dhtmlXColorPicker(n.conf)};dhtmlXPopup.prototype.attachCarousel=function(n,t,i){return i==null&&(i={}),this._attachNode("carousel",{width:n||400,height:t||300,conf:i})};dhtmlXPopup.prototype._attach_init_carousel=function(n){n.conf.parent=this._nodeId;n.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXCarousel(n.conf)};dhtmlXPopup.prototype.attachTreeView=function(n,t,i){return i==null&&(i={}),this._attachNode("treeview",{width:n||400,height:t||300,conf:i})};dhtmlXPopup.prototype._attach_init_treeview=function(n){n.conf.parent=this._nodeId;n.conf.skin=this.conf.skin;this._nodeObj=new dhtmlXTreeView(n.conf);this._nodeObj.base.className+=" dhxtreeview_with_border";var t=this.attachEvent("onShow",function(){this._nodeObj instanceof window.dhtmlXTreeView&&this._nodeObj.setSizes()});this._nodeObjEv==null&&(this._nodeObjEv=[]);this._nodeObjEv.push(t)};dhtmlXPopup.prototype.setDimension=function(n,t){if(this._nodeId!=null&&(n!=null||t!=null)){var i=document.getElementById(this._nodeId);n!=null&&(i.style.width=n+"px");t!=null&&(i.style.height=t+"px");this._repaint();this._nodeObj!=null&&typeof this._nodeObj.setSizes=="function"&&this._nodeObj.setSizes();i=null}};dhtmlXMenuObject.prototype._init=function(){this._isInited!=!0&&(this.conf.dload?(this._dhxdataload.onBeforeXLS=function(){var n={params:{}};for(var t in this.conf.dload_params)n.params[t]=this.conf.dload_params[t];return n},this.loadStruct(this.conf.dload_url)):(this._initTopLevelMenu(),this._isInited=!0))};dhtmlXMenuObject.prototype._countVisiblePolygonItems=function(n){var r=0,t,u,i;for(t in this.itemPull)u=this.itemPull[t].parent,i=this.itemPull[t].type,this.idPull[t]!=null&&u==n&&(i=="item"||i=="radio"||i=="checkbox")&&this.idPull[t].style.display!="none"&&r++;return r};dhtmlXMenuObject.prototype._redefineComplexState=function(n){if(this.idPrefix+this.topId!=n&&this.idPull["polygon_"+n]!=null&&this.idPull[n]!=null){var t=this._countVisiblePolygonItems(n);t>0&&!this.itemPull[n].complex&&this._updateItemComplexState(n,!0,!1);t==0&&this.itemPull[n].complex&&this._updateItemComplexState(n,!1,!1)}};dhtmlXMenuObject.prototype._updateItemComplexState=function(n,t){if(!this.conf.context&&this._getItemLevelType(n.replace(this.idPrefix,""))=="TopLevel"){this.itemPull[n].complex=t;return}if(this.idPull[n]!=null&&this.itemPull[n]!=null&&(this.itemPull[n].complex=t,n!=this.idPrefix+this.topId)){var i=null,r=this.idPull[n].childNodes[this.conf.rtl?0:2];if(r.childNodes[0]&&String(r.childNodes[0].className).search("complex_arrow")===0&&(i=r.childNodes[0]),this.itemPull[n].complex){if(i==null){for(i=document.createElement("DIV"),i.className="complex_arrow",i.id="arrow_"+n;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);r.appendChild(i)}this.conf.dload&&this.itemPull[n].loaded=="get"&&this.conf.dload_icon?i.className!="complex_arrow_loading"&&(i.className="complex_arrow_loading"):i.className="complex_arrow";return}this.itemPull[n].complex||i==null||(r.removeChild(i),this.itemPull[n].hotkey_backup!=null&&this.setHotKey&&this.setHotKey(n.replace(this.idPrefix,""),this.itemPull[n].hotkey_backup))}};dhtmlXMenuObject.prototype._getItemLevelType=function(n){return this.itemPull[this.idPrefix+n].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea"};dhtmlXMenuObject.prototype.setIconsPath=function(n){this.conf.icons_path=n};dhtmlXMenuObject.prototype._updateItemImage=function(n){var o,f,u,i,t,r,e;if(n=this.idPrefix+n,o=this.itemPull[n].type,o!="checkbox"&&o!="radio"){if(f=this.itemPull[n].parent==this.idPrefix+this.topId&&!this.conf.context,t=null,f)for(u=0;u<this.idPull[n].childNodes.length;u++)(t==null&&(this.idPull[n].childNodes[u].className||"")=="dhtmlxMenu_TopLevel_Item_Icon"||(this.idPull[n].childNodes[u].tagName||"").toLowerCase()=="i")&&(t=this.idPull[n].childNodes[u]);else{try{t=this.idPull[n].childNodes[this.conf.rtl?2:0].childNodes[0]}catch(s){}t!=null&&typeof t.className!="undefined"&&(t.className=="sub_icon"||t.tagName.toLowerCase()=="i")||(t=null)}if(i=this.itemPull[n][this.itemPull[n].state=="enabled"?"imgen":"imgdis"],i.length>0)if(t!=null)this.conf.icons_css==!0?t.className=this.conf.icons_path+i:t.src=this.conf.icons_path+i;else if(f)this.conf.icons_css==!0?(t=document.createElement("i"),t.className=this.conf.icons_path+i):(t=document.createElement("IMG"),t.className="dhtmlxMenu_TopLevel_Item_Icon",t.src=this.conf.icons_path+i,t.border="0",t.id="image_"+n),!this.conf.rtl&&this.idPull[n].childNodes.length>0?this.idPull[n].insertBefore(t,this.idPull[n].childNodes[0]):this.idPull[n].appendChild(t);else if(this.conf.icons_css==!0)r=this.idPull[n].childNodes[this.conf.rtl?2:0],r.innerHTML="<i class='"+this.conf.icons_path+i+"'><\/i>";else{for(t=document.createElement("IMG"),t.className="sub_icon",t.src=this.conf.icons_path+i,t.border="0",t.id="image_"+n,r=this.idPull[n].childNodes[this.conf.rtl?2:0];r.childNodes.length>0;)r.removeChild(r.childNodes[0]);r.appendChild(t)}else t!=null&&(f?(t.parentNode.removeChild(t),t=null):(e=t.parentNode,e.removeChild(t),e.innerHTML="&nbsp;",e=t=null))}};dhtmlXMenuObject.prototype._getAllParents=function(n){var t=[],i,u,r;for(i in this.itemPull)if(this.itemPull[i].parent==n&&(t[t.length]=this.itemPull[i].id,this.itemPull[i].complex))for(u=this._getAllParents(this.itemPull[i].id),r=0;r<u.length;r++)t[t.length]=u[r];return t};dhtmlXMenuObject.prototype._autoDetectVisibleArea=function(){if(!this.conf.v_enabled){var n=window.dhx4.screenDim();this.conf.v.x1=n.left;this.conf.v.x2=n.right;this.conf.v.y1=n.top;this.conf.v.y2=n.bottom}};dhtmlXMenuObject.prototype.getItemPosition=function(n){var i,u,r,t;if(n=this.idPrefix+n,i=-1,this.itemPull[n]==null)return i;for(u=this.itemPull[n].parent,r=this.idPull["polygon_"+u]!=null?this.idPull["polygon_"+u].tbd:this.cont,t=0;t<r.childNodes.length;t++)(r.childNodes[t]==this.idPull["separator_"+n]||r.childNodes[t]==this.idPull[n])&&(i=t);return i};dhtmlXMenuObject.prototype.setItemPosition=function(n,t){if(n=this.idPrefix+n,this.idPull[n]!=null){var f=this.itemPull[n].parent==this.idPrefix+this.topId,r=this.idPull[n],e=this.getItemPosition(n.replace(this.idPrefix,"")),u=this.itemPull[n].parent,i=this.idPull["polygon_"+u]!=null?this.idPull["polygon_"+u].tbd:this.cont;i.removeChild(i.childNodes[e]);t<0&&(t=0);f&&t<1&&(t=1);t<i.childNodes.length?i.insertBefore(r,i.childNodes[t]):i.appendChild(r)}};dhtmlXMenuObject.prototype.getParentId=function(n){return(n=this.idPrefix+n,this.itemPull[n]==null)?null:(this.itemPull[n].parent!=null?this.itemPull[n].parent:this.topId).replace(this.idPrefix,"")};dhtmlXMenuObject.prototype.hide=function(){this._clearAndHide()};dhtmlXMenuObject.prototype.clearAll=function(){this.removeItem(this.idPrefix+this.topId,!0);this._isInited=!1;this.idPrefix=this._genStr(12)+"_";this.itemPull={}};typeof dhtmlXMenuObject.prototype.liveInst=="undefined"&&(dhtmlXMenuObject.prototype.liveInst={});dhtmlXMenuObject.prototype.setIconset=function(n){this.conf.icons_css=n=="awesome"};dhtmlXMenuObject.prototype._redistribTopLevelSelection=function(n){var i=this._getSubItemToDeselectByPolygon("parent"),t;for(this._removeSubItemFromSelected(-1,-1),t=0;t<i.length;t++)i[t]!=n&&this._hidePolygon(i[t]),this.idPull[i[t]]!=null&&i[t]!=n&&(this.idPull[i[t]].className=this.idPull[i[t]].className.replace(/Selected/g,"Normal"));this.itemPull[this.idPrefix+n].state=="enabled"&&(this.idPull[this.idPrefix+n].className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_Selected",this._addSubItemToSelected(this.idPrefix+n,"parent"),this.conf.selected=this.conf.mode=="win"?this.conf.selected!=-1?n:this.conf.selected:n,this.itemPull[this.idPrefix+n].complex&&this.conf.selected!=-1&&this._showPolygon(this.idPrefix+n,this.conf.dir_toplv))};dhtmlXMenuObject.prototype._initTopLevelMenu=function(){var t,n;if(this.conf.dir_toplv="bottom",this.conf.dir_sublv=this.conf.rtl?"left":"right",this.conf.context)this.idPull[this.idPrefix+this.topId]=[0,0],this._addSubMenuPolygon(this.idPrefix+this.topId,this.idPrefix+this.topId);else for(t=this._getMenuNodes(this.idPrefix+this.topId),n=0;n<t.length;n++)this.itemPull[t[n]].type=="item"&&this._renderToplevelItem(t[n],null),this.itemPull[t[n]].type=="separator"&&this._renderSeparator(t[n],null)};dhtmlXMenuObject.prototype._renderToplevelItem=function(n,t){var i=this,r=document.createElement("DIV"),f,e,o,u;r.id=n;r.className=this.itemPull[n].state=="enabled"&&this.itemPull[n].cssNormal!=null?this.itemPull[n].cssNormal:"dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_"+(this.itemPull[n].state=="enabled"?"Normal":"Disabled");this.itemPull[n].title!=""&&(f=document.createElement("DIV"),f.className="top_level_text",f.innerHTML=this.itemPull[n].title,r.appendChild(f));this.itemPull[n].tip.length>0&&(r.title=this.itemPull[n].tip);(this.itemPull[n].imgen!=""||this.itemPull[n].imgdis!="")&&(e=this.itemPull[n][this.itemPull[n].state=="enabled"?"imgen":"imgdis"],e&&(this.conf.icons_css==!0?(o=document.createElement("i"),o.className=this.conf.icons_path+e,r.childNodes.length>0&&!this.conf.rtl?r.insertBefore(o,r.childNodes[0]):r.appendChild(o)):(u=document.createElement("IMG"),u.border="0",u.id="image_"+n,u.src=this.conf.icons_path+e,u.className="dhtmlxMenu_TopLevel_Item_Icon",r.childNodes.length>0&&!this.conf.rtl?r.insertBefore(u,r.childNodes[0]):r.appendChild(u))));r.onselectstart=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1};r.oncontextmenu=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1};this.cont||(this.cont=document.createElement("DIV"),this.cont.dir="ltr",this.cont.className=this.conf.align=="right"?"align_right":"align_left",this.base.appendChild(this.cont));t!=null&&(t++,t<0&&(t=0),t>this.cont.childNodes.length-1&&(t=null));t!=null?this.cont.insertBefore(r,this.cont.childNodes[t]):this.cont.appendChild(r);this.idPull[r.id]=r;this.itemPull[n].complex&&!this.conf.dload&&this._addSubMenuPolygon(this.itemPull[n].id,this.itemPull[n].id);r.onmouseover=function(){var t,n,r,u;for(i.conf.mode=="web"&&window.clearTimeout(i.conf.tm_handler),t=i._getSubItemToDeselectByPolygon("parent"),i._removeSubItemFromSelected(-1,-1),n=0;n<t.length;n++)t[n]!=this.id&&i._hidePolygon(t[n]),i.idPull[t[n]]!=null&&t[n]!=this.id&&(i.itemPull[t[n]].cssNormal!=null?i.idPull[t[n]].className=i.itemPull[t[n]].cssNormal:(i.idPull[t[n]].className=="sub_item_selected"&&(i.idPull[t[n]].className="sub_item"),i.idPull[t[n]].className=i.idPull[t[n]].className.replace(/Selected/g,"Normal")));i.itemPull[this.id].state=="enabled"&&(this.className="dhtmlxMenu_"+i.conf.skin+"_TopLevel_Item_Selected",i._addSubItemToSelected(this.id,"parent"),i.conf.selected=i.conf.mode=="win"?i.conf.selected!=-1?this.id:i.conf.selected:this.id,i.conf.dload&&(i.itemPull[this.id].loaded=="no"&&(this._dynLoadTM=(new Date).getTime(),i.itemPull[this.id].loaded="get",r=this.id.replace(i.idPrefix,""),i._dhxdataload.onBeforeXLS=function(){var n={params:{}},t;n.params[this.conf.dload_pid]=r;for(t in this.conf.dload_params)n.params[t]=this.conf.dload_params[t];return n},i.loadStruct(i.conf.dload_url)),i.conf.top_mode&&i.conf.mode=="web"&&!i.conf.context&&(this._mouseOver=!0)),i.conf.dload&&(!i.conf.dload||i.itemPull[this.id].loaded&&i.itemPull[this.id].loaded!="yes")||i.itemPull[this.id].complex&&i.conf.selected!=-1&&(i.conf.top_mode&&i.conf.mode=="web"&&!i.conf.context?(this._mouseOver=!0,u=this.id,this._menuOpenTM=window.setTimeout(function(){i._showPolygon(u,i.conf.dir_toplv)},i.conf.top_tmtime)):i._showPolygon(this.id,i.conf.dir_toplv)));i._doOnTouchMenu(this.id.replace(i.idPrefix,""))};r.onmouseout=function(){i.itemPull[this.id].complex&&i.conf.selected!=-1||i.itemPull[this.id].state!="enabled"||(r.className=i.itemPull[this.id].cssNormal!=null?i.itemPull[this.id].cssNormal:"dhtmlxMenu_"+i.conf.skin+"_TopLevel_Item_Normal");i.conf.mode=="web"&&(window.clearTimeout(i.conf.tm_handler),i.conf.tm_handler=window.setTimeout(function(){i._clearAndHide()},i.conf.tm_sec,"JavaScript"));i.conf.top_mode&&i.conf.mode=="web"&&!i.conf.context&&(this._mouseOver=!1,window.clearTimeout(this._menuOpenTM))};r.onclick=function(n){var t;if(i.conf.mode=="web"&&window.clearTimeout(i.conf.tm_handler),i.conf.mode=="web"||i.itemPull[this.id].state!="disabled"){n=n||event;n.cancelBubble=!0;n.preventDefault?n.preventDefault():n.returnValue=!1;i.conf.mode=="win"&&i.itemPull[this.id].complex&&(i.conf.selected==this.id?(i.conf.selected=-1,t=!1):(i.conf.selected=this.id,t=!0),t?i._showPolygon(this.id,i.conf.dir_toplv):i._hidePolygon(this.id));var r=i.itemPull[this.id].complex?"c":"-",u=i.itemPull[this.id].state!="enabled"?"d":"-",f={ctrl:n.ctrlKey,alt:n.altKey,shift:n.shiftKey};return i._doOnClick(this.id.replace(i.idPrefix,""),r+u+"t",f),!1}};this.conf.skin=="dhx_terrace"&&this._improveTerraceSkin()};dhtmlXMenuObject.prototype._addSubMenuPolygon=function(n,t){for(var f=this._renderSublevelPolygon(n,t),r=this._getMenuNodes(t),u,i=0;i<r.length;i++)this.itemPull[r[i]].type=="separator"?this._renderSeparator(r[i],null):this._renderSublevelItem(r[i],null);for(u=n==t?"topLevel":"subLevel",i=0;i<r.length;i++)this.itemPull[r[i]].complex&&this._addSubMenuPolygon(n,this.itemPull[r[i]].id)};dhtmlXMenuObject.prototype._renderSublevelPolygon=function(n,t){var i=document.createElement("DIV"),r,u;return i.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_Polygon "+(this.conf.rtl?"dir_right":""),i.dir="ltr",i.oncontextmenu=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,!1},i.id="polygon_"+t,i.onclick=function(n){n=n||event;n.cancelBubble=!0},i.style.display="none",document.body.insertBefore(i,document.body.firstChild),i.innerHTML='<div style="position:relative;"><\/div><div style="position: relative; overflow:hidden;"><\/div><div style="position:relative;"><\/div>',r=document.createElement("TABLE"),r.className="dhtmlxMebu_SubLevelArea_Tbl",r.cellSpacing=0,r.cellPadding=0,r.border=0,u=document.createElement("TBODY"),r.appendChild(u),i.childNodes[1].appendChild(r),i.tbl=r,i.tbd=u,this.idPull[i.id]=i,this.sxDacProc!=null&&(this.idPull["sxDac_"+t]=new this.sxDacProc(i,i.className),window.dhx4.isIE?(this.idPull["sxDac_"+t]._setSpeed(this.dacSpeedIE),this.idPull["sxDac_"+t]._setCustomCycle(this.dacCyclesIE)):(this.idPull["sxDac_"+t]._setSpeed(this.dacSpeed),this.idPull["sxDac_"+t]._setCustomCycle(this.dacCycles))),i};dhtmlXMenuObject.prototype._renderSublevelItem=function(n,t){var i=this,r=document.createElement("TR"),f,s,h,u,c,l,e,a,v,o;r.className=this.itemPull[n].state=="enabled"?"sub_item":"sub_item_dis";f=document.createElement("TD");f.className="sub_item_icon";s=this.itemPull[n].type;h=this.itemPull[n][this.itemPull[n].state=="enabled"?"imgen":"imgdis"];h!=""?((s=="checkbox"||s=="radio")&&(u=document.createElement("DIV"),u.id="image_"+this.itemPull[n].id,u.className="sub_icon "+h,f.appendChild(u)),s=="checkbox"||s=="radio"||(this.conf.icons_css==!0?f.innerHTML="<i class='"+this.conf.icons_path+h+"'><\/i>":(u=document.createElement("IMG"),u.id="image_"+this.itemPull[n].id,u.className="sub_icon",u.src=this.conf.icons_path+h,f.appendChild(u)))):f.innerHTML="&nbsp;";c=document.createElement("TD");c.className="sub_item_text";this.itemPull[n].title!=""?(l=document.createElement("DIV"),l.className="sub_item_text",l.innerHTML=this.itemPull[n].title,c.appendChild(l)):c.innerHTML="&nbsp;";e=document.createElement("TD");e.className="sub_item_hk";this.itemPull[n].complex?(a=document.createElement("DIV"),a.className="complex_arrow",a.id="arrow_"+this.itemPull[n].id,e.appendChild(a)):this.itemPull[n].hotkey.length>0&&!this.itemPull[n].complex?(v=document.createElement("DIV"),v.className="sub_item_hk",v.innerHTML=this.itemPull[n].hotkey,e.appendChild(v)):e.innerHTML="&nbsp;";r.appendChild(this.conf.rtl?e:f);r.appendChild(c);r.appendChild(this.conf.rtl?f:e);r.id=this.itemPull[n].id;r.parent=this.itemPull[n].parent;this.itemPull[n].tip.length>0&&(r.title=this.itemPull[n].tip);r.onselectstart=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1};r.onmouseover=function(){i.conf.hide_tm[this.id]&&window.clearTimeout(i.conf.hide_tm[this.id]);i.conf.mode=="web"&&window.clearTimeout(i.conf.tm_handler);this._visible||i._redistribSubLevelSelection(this.id,this.parent);this._visible=!0};r.onmouseout=function(){i.conf.mode=="web"&&(i.conf.tm_handler&&window.clearTimeout(i.conf.tm_handler),i.conf.tm_handler=window.setTimeout(function(){i&&i._clearAndHide&&i._clearAndHide()},i.conf.tm_sec,"JavaScript"));var n=this;i.conf.hide_tm[this.id]&&window.clearTimeout(i.conf.hide_tm[this.id]);i.conf.hide_tm[this.id]=window.setTimeout(function(){n._visible=!1},50)};r.onclick=function(n){if(i.checkEvent("onClick")||!i.itemPull[this.id].complex){n=n||event;n.cancelBubble=!0;n.preventDefault?n.preventDefault():n.returnValue=!1;tc=i.itemPull[this.id].complex?"c":"-";td=i.itemPull[this.id].state=="enabled"?"-":"d";var t={ctrl:n.ctrlKey,alt:n.altKey,shift:n.shiftKey};switch(i.itemPull[this.id].type){case"checkbox":i._checkboxOnClickHandler(this.id.replace(i.idPrefix,""),tc+td+"n",t);break;case"radio":i._radioOnClickHandler(this.id.replace(i.idPrefix,""),tc+td+"n",t);break;case"item":i._doOnClick(this.id.replace(i.idPrefix,""),tc+td+"n",t)}return!1}};o=this.idPull["polygon_"+this.itemPull[n].parent];t!=null&&(t++,t<0&&(t=0),t>o.tbd.childNodes.length-1&&(t=null));t!=null&&o.tbd.childNodes[t]!=null?o.tbd.insertBefore(r,o.tbd.childNodes[t]):o.tbd.appendChild(r);this.idPull[r.id]=r};dhtmlXMenuObject.prototype._renderSeparator=function(n,t){var f=this.conf.context?"SubLevelArea":this.itemPull[n].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea",o,r,e,i,s,u;f=="TopLevel"&&this.conf.context||(o=this,f!="TopLevel"&&(r=document.createElement("TR"),r.className="sub_sep",e=document.createElement("TD"),e.colSpan="3",r.appendChild(e)),i=document.createElement("DIV"),i.id="separator_"+n,i.className=f=="TopLevel"?"top_sep":"sub_sep",i.onselectstart=function(n){n=n||event;n.preventDefault?n.preventDefault():n.returnValue=!1},i.onclick=function(n){n=n||event;n.cancelBubble=!0;var t={ctrl:n.ctrlKey,alt:n.altKey,shift:n.shiftKey};o._doOnClick(this.id.replace("separator_"+o.idPrefix,""),"--s",t)},f=="TopLevel"?(t!=null?(t++,t<0&&(t=0),this.cont.childNodes[t]!=null?this.cont.insertBefore(i,this.cont.childNodes[t]):this.cont.appendChild(i)):(s=this.cont.childNodes[this.cont.childNodes.length-1],String(s).search("TopLevel_Text")==-1?this.cont.appendChild(i):this.cont.insertBefore(i,s)),this.idPull[i.id]=i):(u=this.idPull["polygon_"+this.itemPull[n].parent],t!=null&&(t++,t<0&&(t=0),t>u.tbd.childNodes.length-1&&(t=null)),t!=null&&u.tbd.childNodes[t]!=null?u.tbd.insertBefore(r,u.tbd.childNodes[t]):u.tbd.appendChild(r),e.appendChild(i),this.idPull[i.id]=r))};dhtmlXMenuObject.prototype.addNewSeparator=function(n,t){t=this.idPrefix+(t!=null?t:this._genStr(24));var i=this.idPrefix+this.getParentId(n);this._addItemIntoGlobalStrorage(t,i,"","separator",!1,"","");this._renderSeparator(t,this.getItemPosition(n))};dhtmlXMenuObject.prototype._initObj=function(n,t,i){var r,e,u,f,o,s,h;for(n instanceof Array||(i=n.parentId,i!=null&&String(i).indexOf(this.idPrefix)!==0&&(i=this.idPrefix+String(i)),n=n.items),r=0;r<n.length;r++){(typeof n[r].id=="undefined"||n[r].id==null)&&(n[r].id=this._genStr(24));n[r].text==null&&(n[r].text="");String(n[r].id).indexOf(this.idPrefix)!==0&&(n[r].id=this.idPrefix+String(n[r].id));e={type:"item",tip:"",hotkey:"",state:"enabled",imgen:"",imgdis:""};for(u in e)typeof n[r][u]=="undefined"&&(n[r][u]=e[u]);if(n[r].imgen==""&&n[r].img!=null&&(n[r].imgen=n[r].img),n[r].imgdis==""&&n[r].img_disabled!=null&&(n[r].imgdis=n[r].img_disabled),n[r].title==null&&n[r].text!=null&&(n[r].title=n[r].text),n[r].href!=null&&(n[r].href.link!=null&&(n[r].href_link=n[r].href.link),n[r].href.target!=null&&(n[r].href_target=n[r].href.target)),n[r].userdata!=null)for(u in n[r].userdata)this.userData[n[r].id+"_"+u]=n[r].userdata[u];typeof n[r].enabled!="undefined"&&window.dhx4.s2b(n[r].enabled)==!1?n[r].state="disabled":typeof n[r].disabled!="undefined"&&window.dhx4.s2b(n[r].disabled)==!0&&(n[r].state="disabled");typeof n[r].parent=="undefined"&&(n[r].parent=i!=null?i:this.idPrefix+this.topId);n[r].type=="checkbox"&&(n[r].checked=window.dhx4.s2b(n[r].checked),n[r].imgen=n[r].imgdis="chbx_"+(n[r].checked?"1":"0"));n[r].type=="radio"&&(n[r].checked=window.dhx4.s2b(n[r].checked),n[r].imgen=n[r].imgdis="rdbt_"+(n[r].checked?"1":"0"),(typeof n[r].group=="undefined"||n[r].group==null)&&(n[r].group=this._genStr(24)),this.radio[n[r].group]==null&&(this.radio[n[r].group]=[]),this.radio[n[r].group].push(n[r].id));this.itemPull[n[r].id]=n[r];n[r].items!=null&&n[r].items.length>0?(this.itemPull[n[r].id].complex=!0,this._initObj(n[r].items,!0,n[r].id)):this.conf.dload&&n[r].complex==!0&&(this.itemPull[n[r].id].loaded="no");this.itemPull[n[r].id].items=null}if(t!==!0)if(this.conf.dload==!0)if(i==null)this._initTopLevelMenu();else{if(this._addSubMenuPolygon(i,i),this.conf.selected==i){var c=this.itemPull[i].parent==this.idPrefix+this.topId,l=c&&!this.conf.context?this.conf.dir_toplv:this.conf.dir_sublv,a=!1;c&&this.conf.top_mode&&this.conf.mode=="web"&&!this.conf.context&&(f=this.idPull[i],f._mouseOver==!0&&(o=this.conf.top_tmtime-((new Date).getTime()-f._dynLoadTM),o>1&&(s=i,h=this,f._menuOpenTM=window.setTimeout(function(){h._showPolygon(s,l);h=s=null},o),a=!0)));a||this._showPolygon(i,l)}this.itemPull[i].loaded="yes";this.conf.dload_icon==!0&&this._updateLoaderIcon(i,!1)}else this._init()};dhtmlXMenuObject.prototype._xmlToJson=function(n,t){var h=[],u,e,r,c,f,o,s,i;if(t==null){if(u=n.getElementsByTagName(this.conf.tags.root),u==null||u!=null&&u.length==0)return{items:[]};u=u[0]}else u=n;for(u.getAttribute("parentId")!=null&&(t=this.idPrefix+u.getAttribute("parentId")),e=0;e<u.childNodes.length;e++)if(typeof u.childNodes[e].tagName!="undefined"&&String(u.childNodes[e].tagName).toLowerCase()==this.conf.tags.item){for(i=u.childNodes[e],r={id:this.idPrefix+(i.getAttribute("id")||this._genStr(24)),title:i.getAttribute("text")||"",imgen:i.getAttribute("img")||"",imgdis:i.getAttribute("imgdis")||"",tip:"",hotkey:"",type:i.getAttribute("type")||"item"},i.getAttribute("cssNormal")!=null&&(r.cssNormal=i.getAttribute("cssNormal")),r.type=="checkbox"&&(r.checked=i.getAttribute("checked")),r.type=="radio"&&(r.checked=i.getAttribute("checked"),r.group=i.getAttribute("group")),r.state="enabled",i.getAttribute("enabled")!=null&&window.dhx4.s2b(i.getAttribute("enabled"))==!1?r.state="disabled":i.getAttribute("disabled")!=null&&window.dhx4.s2b(i.getAttribute("disabled"))==!0&&(r.state="disabled"),r.parent=t!=null?t:this.idPrefix+this.topId,this.conf.dload?(r.complex=i.getAttribute("complex")!=null,r.complex&&(r.loaded="no")):(c=this._xmlToJson(i,r.id),r.items=c.items,r.complex=r.items.length>0),f=0;f<i.childNodes.length;f++)typeof i.childNodes[f].tagName!="undefined"&&(o=String(i.childNodes[f].tagName||"").toLowerCase(),o==this.conf.tags.userdata&&(s=i.childNodes[f],s.getAttribute("name")!=null&&(this.userData[r.id+"_"+s.getAttribute("name")]=s.firstChild!=null&&s.firstChild.nodeValue!=null?s.firstChild.nodeValue:"")),o==this.conf.tags.text_ext&&(r.title=i.childNodes[f].firstChild.nodeValue),o==this.conf.tags.tooltip&&(r.tip=i.childNodes[f].firstChild.nodeValue),o==this.conf.tags.hotkey&&(r.hotkey=i.childNodes[f].firstChild.nodeValue),o==this.conf.tags.href&&r.type=="item"&&(r.href_link=i.childNodes[f].firstChild.nodeValue,i.childNodes[f].getAttribute("target")!=null&&(r.href_target=i.childNodes[f].getAttribute("target"))));h.push(r)}return{parentId:t,items:h}};dhtmlXMenuObject.prototype.enableDynamicLoading=function(n,t){this.conf.dload=!0;this.conf.dload_url=n;this.conf.dload_sign=String(this.conf.dload_url).search(/\?/)==-1?"?":"&";this.conf.dload_icon=t;this._init()};dhtmlXMenuObject.prototype._updateLoaderIcon=function(n,t){var i,r;this.idPull[n]!=null&&(String(this.idPull[n].className).search("TopLevel_Item")>=0||(i=this.conf.rtl?0:2,this.idPull[n].childNodes[i])&&this.idPull[n].childNodes[i].childNodes[0]&&(r=this.idPull[n].childNodes[i].childNodes[0],String(r.className).search("complex_arrow")===0&&(r.className="complex_arrow"+(t?"_loading":""))))};dhtmlXMenuObject.prototype.addNewSibling=function(n,t,i,r,u,f){var e=this.idPrefix+(t!=null?t:this._genStr(24)),o=this.idPrefix+(n!=null?this.getParentId(n):this.topId);this._addItemIntoGlobalStrorage(e,o,i,"item",r,u,f);o!=this.idPrefix+this.topId||this.conf.context?this._renderSublevelItem(e,this.getItemPosition(n)):this._renderToplevelItem(e,this.getItemPosition(n))};dhtmlXMenuObject.prototype.addNewChild=function(n,t,i,r,u,f,e){if(n==null)if(this.conf.context)n=this.topId;else{this.addNewSibling(n,i,r,u,f,e);t!=null&&this.setItemPosition(i,t);return}i=this.idPrefix+(i!=null?i:this._genStr(24));this.setHotKey&&this.setHotKey(n,"");n=this.idPrefix+n;this._addItemIntoGlobalStrorage(i,n,r,"item",u,f,e);this.idPull["polygon_"+n]==null&&this._renderSublevelPolygon(n,n);this._renderSublevelItem(i,t-1);this._redefineComplexState(n)};dhtmlXMenuObject.prototype.removeItem=function(n,t,i){var o,h,r,c,f,e,u,s;if(t||(n=this.idPrefix+n),o=null,n!=this.idPrefix+this.topId){if(this.itemPull[n]==null)return;if(this.idPull["polygon_"+n]&&this.idPull["polygon_"+n]._tmShow&&window.clearTimeout(this.idPull["polygon_"+n]._tmShow),h=this.itemPull[n].type,h=="separator")r=this.idPull["separator_"+n],this.itemPull[n].parent==this.idPrefix+this.topId?(r.onclick=null,r.onselectstart=null,r.id=null,r.parentNode.removeChild(r)):(r.childNodes[0].childNodes[0].onclick=null,r.childNodes[0].childNodes[0].onselectstart=null,r.childNodes[0].childNodes[0].id=null,r.childNodes[0].removeChild(r.childNodes[0].childNodes[0]),r.removeChild(r.childNodes[0]),r.parentNode.removeChild(r)),this.idPull["separator_"+n]=null,this.itemPull[n]=null,delete this.idPull["separator_"+n],delete this.itemPull[n],r=null;else{for(o=this.itemPull[n].parent,r=this.idPull[n],r.onclick=null,r.oncontextmenu=null,r.onmouseover=null,r.onmouseout=null,r.onselectstart=null,r.id=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);r.parentNode.removeChild(r);this.idPull[n]=null;this.itemPull[n]=null;delete this.idPull[n];delete this.itemPull[n];r=null}h=null}for(c in this.itemPull)this.itemPull[c].parent==n&&this.removeItem(c,!0,!0);for(f=new Array(n),o==null||i||this.idPull["polygon_"+o]!=null&&this.idPull["polygon_"+o].tbd.childNodes.length==0&&(f.push(o),this._updateItemComplexState(o,!1,!1)),e=0;e<f.length;e++)this.idPull["polygon_"+f[e]]&&(u=this.idPull["polygon_"+f[e]],u.onclick=null,u.oncontextmenu=null,u.tbl.removeChild(u.tbd),u.tbd=null,u.childNodes[1].removeChild(u.tbl),u.tbl=null,u.id=null,u.parentNode.removeChild(u),u=null,window.dhx4.isIE6&&(s="polygon_"+f[e]+"_ie6cover",this.idPull[s]!=null&&(document.body.removeChild(this.idPull[s]),delete this.idPull[s])),this.idPull["arrowup_"+n]!=null&&this._removeArrow&&this._removeArrow("arrowup_"+n),this.idPull["arrowdown_"+n]!=null&&this._removeArrow&&this._removeArrow("arrowdown_"+n),this.idPull["polygon_"+f[e]]=null,delete this.idPull["polygon_"+f[e]]);f=null;this.conf.skin=="dhx_terrace"&&arguments.length==1&&this._improveTerraceSkin()};dhtmlXMenuObject.prototype._addItemIntoGlobalStrorage=function(n,t,i,r,u,f,e){var o={id:n,title:i,imgen:f!=null?f:"",imgdis:e!=null?e:"",type:r,state:u==!0?"disabled":"enabled",parent:t,complex:!1,hotkey:"",tip:""};this.itemPull[o.id]=o};dhtmlXMenuObject.prototype.renderAsContextMenu=function(){this.conf.context=!0;this.base._autoSkinUpdate==!0&&(this.base.className=this.base.className.replace("dhtmlxMenu_"+this.conf.skin+"_Middle",""),this.base._autoSkinUpdate=!1);this.conf.ctx_baseid!=null&&this.addContextZone(this.conf.ctx_baseid)};dhtmlXMenuObject.prototype.addContextZone=function(n){var t,r,u,i;n==document.body?(n="document.body."+this.idPrefix,t=document.body):t=typeof n=="string"?document.getElementById(n):n;r=!1;for(u in this.conf.ctx_zones)r=r||u==n||this.conf.ctx_zones[u]==t;if(r==!0)return!1;this.conf.ctx_zones[n]=t;i=this;window.dhx4.isOpera?(this.operaContext=function(n){i._doOnContextMenuOpera(n,i)},t.addEventListener("mouseup",this.operaContext,!1)):(t.oncontextmenu==null||t._oldContextMenuHandler||(t._oldContextMenuHandler=t.oncontextmenu),t.oncontextmenu=function(n){for(var t in dhtmlXMenuObject.prototype.liveInst)t!=i.conf.live_id&&dhtmlXMenuObject.prototype.liveInst[t].context&&dhtmlXMenuObject.prototype.liveInst[t]._hideContextMenu();return n=n||event,n.cancelBubble=!0,n.preventDefault?n.preventDefault():n.returnValue=!1,i._doOnContextBeforeCall(n,this),!1})};dhtmlXMenuObject.prototype._doOnContextMenuOpera=function(n,t){for(var i in dhtmlXMenuObject.prototype.liveInst)i!=t.conf.live_id&&dhtmlXMenuObject.prototype.liveInst[i].context&&dhtmlXMenuObject.prototype.liveInst[i]._hideContextMenu();return n.cancelBubble=!0,n.preventDefault?n.preventDefault():n.returnValue=!1,n.button==0&&n.ctrlKey==!0&&t._doOnContextBeforeCall(n,this),!1};dhtmlXMenuObject.prototype.removeContextZone=function(n){if(!this.isContextZone(n))return!1;n==document.body&&(n="document.body."+this.idPrefix);var t=this.conf.ctx_zones[n];window.dhx4.isOpera?t.removeEventListener("mouseup",this.operaContext,!1):(t.oncontextmenu=t._oldContextMenuHandler!=null?t._oldContextMenuHandler:null,t._oldContextMenuHandler=null);try{this.conf.ctx_zones[n]=null;delete this.conf.ctx_zones[n]}catch(i){}return!0};dhtmlXMenuObject.prototype.isContextZone=function(n){if(n==document.body&&this.conf.ctx_zones["document.body."+this.idPrefix]!=null)return!0;var t=!1;return this.conf.ctx_zones[n]!=null&&this.conf.ctx_zones[n]==document.getElementById(n)&&(t=!0),t};dhtmlXMenuObject.prototype._isContextMenuVisible=function(){return this.idPull["polygon_"+this.idPrefix+this.topId]==null?!1:this.idPull["polygon_"+this.idPrefix+this.topId].style.display==""};dhtmlXMenuObject.prototype._showContextMenu=function(n,t,i){if(this._clearAndHide(),this.idPull["polygon_"+this.idPrefix+this.topId]==null)return!1;window.clearTimeout(this.conf.tm_handler);this.idPull[this.idPrefix+this.topId]=[n,t];this._showPolygon(this.idPrefix+this.topId,"bottom");this.callEvent("onContextMenu",[i])};dhtmlXMenuObject.prototype._hideContextMenu=function(){if(this.idPull["polygon_"+this.idPrefix+this.topId]==null)return!1;this._clearAndHide();this._hidePolygon(this.idPrefix+this.topId)};dhtmlXMenuObject.prototype._doOnContextBeforeCall=function(n,t){var i,r;if(this.conf.ctx_zoneid=t.id,this._clearAndHide(),this._hideContextMenu(),window.dhx4.isChrome==!0||window.dhx4.isEdge==!0||window.dhx4.isOpera==!0||window.dhx4.isIE11==!0)i=window.dhx4.absLeft(n.target)+n.offsetX,r=window.dhx4.absTop(n.target)+n.offsetY;else if(window.dhx4.isIE6==!0||window.dhx4.isIE7==!0||window.dhx4.isIE==!0)i=window.dhx4.absLeft(n.srcElement)+n.x||0,r=window.dhx4.absTop(n.srcElement)+n.y||0;else var u=n.srcElement||n.target,f=window.dhx4.isIE||window.dhx4.isKHTML?n.offsetX:n.layerX,e=window.dhx4.isIE||window.dhx4.isKHTML?n.offsetY:n.layerY,i=window.dhx4.absLeft(u)+f,r=window.dhx4.absTop(u)+e;this.checkEvent("onBeforeContextMenu")?this.callEvent("onBeforeContextMenu",[t.id,n])&&this.conf.ctx_autoshow&&(this._showContextMenu(i,r,t.id),this.callEvent("onAfterContextMenu",[t.id,n])):this.conf.ctx_autoshow&&(this._showContextMenu(i,r,t.id),this.callEvent("onAfterContextMenu",[t.id]))};dhtmlXMenuObject.prototype.showContextMenu=function(n,t){this._showContextMenu(n,t,!1)};dhtmlXMenuObject.prototype.hideContextMenu=function(){this._hideContextMenu()};dhtmlXMenuObject.prototype.setAutoShowMode=function(n){this.conf.ctx_autoshow=n==!0?!0:!1};dhtmlXMenuObject.prototype.setAutoHideMode=function(n){this.conf.ctx_autohide=n==!0?!0:!1};dhtmlXMenuObject.prototype.setContextMenuHideAllMode=function(n){this.conf.ctx_hideall=n==!0?!0:!1};dhtmlXMenuObject.prototype.getContextMenuHideAllMode=function(){return this.conf.ctx_hideall};dhtmlXMenuObject.prototype._improveTerraceSkin=function(){var n,t,i,r;for(n in this.itemPull)if(this.itemPull[n].parent==this.idPrefix+this.topId&&this.idPull[n]!=null){t=!1;i=!1;this.idPull[n].parentNode.firstChild==this.idPull[n]&&(t=!0);this.idPull[n].parentNode.lastChild==this.idPull[n]&&(i=!0);for(r in this.itemPull)this.itemPull[r].type=="separator"&&this.itemPull[r].parent==this.idPrefix+this.topId&&(this.idPull[n].nextSibling==this.idPull["separator_"+r]&&(i=!0),this.idPull[n].previousSibling==this.idPull["separator_"+r]&&(t=!0));this.idPull[n].style.borderLeftWidth=t?"1px":"0px";this.idPull[n].style.borderTopLeftRadius=this.idPull[n].style.borderBottomLeftRadius=t?"3px":"0px";this.idPull[n].style.borderTopRightRadius=this.idPull[n].style.borderBottomRightRadius=i?"3px":"0px";this.idPull[n]._bl=t;this.idPull[n]._br=i}};dhtmlXMenuObject.prototype._improveTerraceButton=function(n,t){t?(this.idPull[n].style.borderBottomLeftRadius=this.idPull[n]._bl?"3px":"0px",this.idPull[n].style.borderBottomRightRadius=this.idPull[n]._br?"3px":"0px"):(this.idPull[n].style.borderBottomLeftRadius="0px",this.idPull[n].style.borderBottomRightRadius="0px")};typeof dhtmlXCellObject!="undefined"&&(dhtmlXCellObject.prototype._createNode_menu=function(n,t,i,r,u){return typeof u!="undefined"?n=u:(n=document.createElement("DIV"),n.className="dhx_cell_menu_"+(this.conf.borders?"def":"no_borders"),n.appendChild(document.createElement("DIV"))),this.cell.insertBefore(n,this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont]),this.conf.ofs_nodes.t.menu=!0,this._updateIdx(),n},dhtmlXCellObject.prototype.attachMenu=function(n){if(!this.dataNodes.menu)return this.callEvent("_onBeforeContentAttach",["menu"]),typeof n=="undefined"&&(n={}),typeof n.skin=="undefined"&&(n.skin=this.conf.skin),n.parent=this._attachObject("menu").firstChild,this.dataNodes.menu=new dhtmlXMenuObject(n),this._adjustCont(this._idd),n.parent=null,n=null,this.callEvent("_onContentAttach",[]),this.dataNodes.menu},dhtmlXCellObject.prototype.detachMenu=function(){this.dataNodes.menu!=null&&(typeof this.dataNodes.menu.unload=="function"&&this.dataNodes.menu.unload(),this.dataNodes.menu=null,delete this.dataNodes.menu,this._detachObject("menu"))},dhtmlXCellObject.prototype.showMenu=function(){this._mtbShowHide("menu","")},dhtmlXCellObject.prototype.hideMenu=function(){this._mtbShowHide("menu","none")},dhtmlXCellObject.prototype.getAttachedMenu=function(){return this.dataNodes.menu});dhtmlXMenuObject.prototype.setItemEnabled=function(n){this._changeItemState(n,"enabled",this._getItemLevelType(n))};dhtmlXMenuObject.prototype.setItemDisabled=function(n){this._changeItemState(n,"disabled",this._getItemLevelType(n))};dhtmlXMenuObject.prototype.isItemEnabled=function(n){return this.itemPull[this.idPrefix+n]!=null?this.itemPull[this.idPrefix+n].state=="enabled":!1};dhtmlXMenuObject.prototype._changeItemState=function(n,t,i){var r=this.idPrefix+n;return this.itemPull[r]!=null&&this.idPull[r]!=null&&this.itemPull[r].state!=t&&(this.itemPull[r].state=t,this.idPull[r].className=this.itemPull[r].parent!=this.idPrefix+this.topId||this.conf.context?"sub_item"+(this.itemPull[r].state=="enabled"?"":"_dis"):"dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_"+(this.itemPull[r].state=="enabled"?"Normal":"Disabled"),this._updateItemComplexState(this.idPrefix+n,this.itemPull[this.idPrefix+n].complex,!1),this._updateItemImage(n,i),this.idPrefix+this.conf.last_click==r&&i!="TopLevel"&&this._redistribSubLevelSelection(r,this.itemPull[r].parent),i=="TopLevel"&&!this.conf.context),!1};dhtmlXMenuObject.prototype.getItemText=function(n){return this.itemPull[this.idPrefix+n]!=null?this.itemPull[this.idPrefix+n].title:""};dhtmlXMenuObject.prototype.setItemText=function(n,t){var i,r;if(n=this.idPrefix+n,this.itemPull[n]!=null&&this.idPull[n]!=null)if(this._clearAndHide(),this.itemPull[n].title=t,this.itemPull[n].parent!=this.idPrefix+this.topId||this.conf.context){for(i=null,r=0;r<this.idPull[n].childNodes[1].childNodes.length;r++)String(this.idPull[n].childNodes[1].childNodes[r].className||"")=="sub_item_text"&&(i=this.idPull[n].childNodes[1].childNodes[r]);String(this.itemPull[n].title).length==""||this.itemPull[n].title==null?i&&(i.parentNode.removeChild(i),i=null,this.idPull[n].childNodes[1].innerHTML="&nbsp;"):(i||(i=document.createElement("DIV"),i.className="sub_item_text",this.idPull[n].childNodes[1].innerHTML="",this.idPull[n].childNodes[1].appendChild(i)),i.innerHTML=this.itemPull[n].title)}else{for(i=null,r=0;r<this.idPull[n].childNodes.length;r++)try{this.idPull[n].childNodes[r].className=="top_level_text"&&(i=this.idPull[n].childNodes[r])}catch(u){}String(this.itemPull[n].title).length==""||this.itemPull[n].title==null?i!=null&&i.parentNode.removeChild(i):(i||(i=document.createElement("DIV"),i.className="top_level_text",this.conf.rtl&&this.idPull[n].childNodes.length>0?this.idPull[n].insertBefore(i,this.idPull[n].childNodes[0]):this.idPull[n].appendChild(i)),i.innerHTML=this.itemPull[n].title)}};dhtmlXMenuObject.prototype.loadFromHTML=function(n,t,i){var f=this.conf.tags.item,r,u;this.conf.tags.item="div";r=typeof n=="string"?document.getElementById(n):n;u=this._xmlToJson(r,this.idPrefix+this.topId);this._initObj(u);this.conf.tags.item=f;t&&r.parentNode.removeChild(r);r=objOd=null;onload!=null&&(typeof i=="function"?i():typeof window[i]=="function"&&window[i]())};dhtmlXMenuObject.prototype.hideItem=function(n){this._changeItemVisible(n,!1)};dhtmlXMenuObject.prototype.showItem=function(n){this._changeItemVisible(n,!0)};dhtmlXMenuObject.prototype.isItemHidden=function(n){var t=null;return this.idPull[this.idPrefix+n]!=null&&(t=this.idPull[this.idPrefix+n].style.display=="none"),t};dhtmlXMenuObject.prototype._changeItemVisible=function(n,t){var i=this.idPrefix+n;this.itemPull[i]!=null&&(this.itemPull[i].type=="separator"&&(i="separator_"+i),this.idPull[i]!=null)&&(this.idPull[i].style.display=t?"":"none",this._redefineComplexState(this.itemPull[this.idPrefix+n].parent))};dhtmlXMenuObject.prototype.setUserData=function(n,t,i){this.userData[this.idPrefix+n+"_"+t]=i};dhtmlXMenuObject.prototype.getUserData=function(n,t){return this.userData[this.idPrefix+n+"_"+t]!=null?this.userData[this.idPrefix+n+"_"+t]:null};dhtmlXMenuObject.prototype.setOpenMode=function(n){this.conf.mode=n=="win"?"win":"web"};dhtmlXMenuObject.prototype.setWebModeTimeout=function(n){this.conf.tm_sec=isNaN(n)?400:n};dhtmlXMenuObject.prototype.getItemImage=function(n){var t=[null,null];return n=this.idPrefix+n,this.itemPull[n].type=="item"&&(t[0]=this.itemPull[n].imgen,t[1]=this.itemPull[n].imgdis),t};dhtmlXMenuObject.prototype.setItemImage=function(n,t,i){this.itemPull[this.idPrefix+n].type=="item"&&(this.itemPull[this.idPrefix+n].imgen=t,this.itemPull[this.idPrefix+n].imgdis=i,this._updateItemImage(n,this._getItemLevelType(n)))};dhtmlXMenuObject.prototype.clearItemImage=function(n){this.setItemImage(n,"","")};dhtmlXMenuObject.prototype.setVisibleArea=function(n,t,i,r){this.conf.v_enabled=!0;this.conf.v.x1=n;this.conf.v.x2=t;this.conf.v.y1=i;this.conf.v.y2=r};dhtmlXMenuObject.prototype.setTooltip=function(n,t){(n=this.idPrefix+n,this.itemPull[n]!=null&&this.idPull[n]!=null)&&(this.idPull[n].title=t.length>0?t:null,this.itemPull[n].tip=t)};dhtmlXMenuObject.prototype.getTooltip=function(n){return this.itemPull[this.idPrefix+n]==null?null:this.itemPull[this.idPrefix+n].tip};dhtmlXMenuObject.prototype.setTopText=function(n){this.conf.context||(this._topText==null&&(this._topText=document.createElement("DIV"),this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this.conf.rtl?"left":this.conf.align=="left"?"right":"left"),this.base.appendChild(this._topText)),this._topText.innerHTML=n)};dhtmlXMenuObject.prototype.setAlign=function(n){this.conf.align!=n&&(n=="left"||n=="right")&&(this.conf.align=n,this.cont&&(this.cont.className=this.conf.align=="right"?"align_right":"align_left"),this._topText!=null&&(this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this.conf.align=="left"?"right":"left")))};dhtmlXMenuObject.prototype.setHref=function(n,t,i){this.itemPull[this.idPrefix+n]!=null&&(this.itemPull[this.idPrefix+n].href_link=t,i!=null&&(this.itemPull[this.idPrefix+n].href_target=i))};dhtmlXMenuObject.prototype.clearHref=function(n){this.itemPull[this.idPrefix+n]!=null&&(delete this.itemPull[this.idPrefix+n].href_link,delete this.itemPull[this.idPrefix+n].href_target)};dhtmlXMenuObject.prototype.getCircuit=function(n){for(var t=new Array(n);this.getParentId(n)!=this.topId;)n=this.getParentId(n),t[t.length]=n;return t.reverse()};dhtmlXMenuObject.prototype._getCheckboxState=function(n){return this.itemPull[this.idPrefix+n]==null?null:this.itemPull[this.idPrefix+n].checked};dhtmlXMenuObject.prototype._setCheckboxState=function(n,t){this.itemPull[this.idPrefix+n]!=null&&(this.itemPull[this.idPrefix+n].checked=t)};dhtmlXMenuObject.prototype._updateCheckboxImage=function(n){if(this.idPull[this.idPrefix+n]!=null){this.itemPull[this.idPrefix+n].imgen="chbx_"+(this._getCheckboxState(n)?"1":"0");this.itemPull[this.idPrefix+n].imgdis=this.itemPull[this.idPrefix+n].imgen;try{this.idPull[this.idPrefix+n].childNodes[this.conf.rtl?2:0].childNodes[0].className="sub_icon "+this.itemPull[this.idPrefix+n].imgen}catch(t){}}};dhtmlXMenuObject.prototype._checkboxOnClickHandler=function(n,t,i){if(t.charAt(1)!="d"&&this.itemPull[this.idPrefix+n]!=null){var r=this._getCheckboxState(n);this.checkEvent("onCheckboxClick")?this.callEvent("onCheckboxClick",[n,r,this.conf.ctx_zoneid,i])&&this.setCheckboxState(n,!r):this.setCheckboxState(n,!r);this.checkEvent("onClick")&&this.callEvent("onClick",[n])}};dhtmlXMenuObject.prototype.setCheckboxState=function(n,t){this._setCheckboxState(n,t);this._updateCheckboxImage(n)};dhtmlXMenuObject.prototype.getCheckboxState=function(n){return this._getCheckboxState(n)};dhtmlXMenuObject.prototype.addCheckbox=function(n,t,i,r,u,f,e){var h,c,o,s;if(!this.conf.context||t!=this.topId){if(this.itemPull[this.idPrefix+t]==null)return;if(n=="child"&&this.itemPull[this.idPrefix+t].type!="item")return}h="chbx_"+(f?"1":"0");c=h;n=="sibling"?(o=this.idPrefix+(r!=null?r:this._genStr(24)),s=this.idPrefix+this.getParentId(t),this._addItemIntoGlobalStrorage(o,s,u,"checkbox",e,h,c),this.itemPull[o].checked=f,this._renderSublevelItem(o,this.getItemPosition(t))):(o=this.idPrefix+(r!=null?r:this._genStr(24)),s=this.idPrefix+t,this._addItemIntoGlobalStrorage(o,s,u,"checkbox",e,h,c),this.itemPull[o].checked=f,this.idPull["polygon_"+s]==null&&this._renderSublevelPolygon(s,s),this._renderSublevelItem(o,i-1),this._redefineComplexState(s))};dhtmlXMenuObject.prototype.setHotKey=function(n,t){var u,i,r;if((n=this.idPrefix+n,this.itemPull[n]!=null&&this.idPull[n]!=null)&&(this.itemPull[n].parent!=this.idPrefix+this.topId||this.conf.context)&&!this.itemPull[n].complex&&(u=this.itemPull[n].type,u=="item"||u=="checkbox"||u=="radio")){i=null;try{this.idPull[n].childNodes[this.conf.rtl?0:2].childNodes[0].className=="sub_item_hk"&&(i=this.idPull[n].childNodes[this.conf.rtl?0:2].childNodes[0])}catch(f){}if(t.length==0)this.itemPull[n].hotkey_backup=this.itemPull[n].hotkey,this.itemPull[n].hotkey="",i!=null&&i.parentNode.removeChild(i);else{if(this.itemPull[n].hotkey=t,this.itemPull[n].hotkey_backup=null,i==null){for(i=document.createElement("DIV"),i.className="sub_item_hk",r=this.idPull[n].childNodes[this.conf.rtl?0:2];r.childNodes.length>0;)r.removeChild(r.childNodes[0]);r.appendChild(i)}i.innerHTML=t}}};dhtmlXMenuObject.prototype.getHotKey=function(n){return this.itemPull[this.idPrefix+n]==null?null:this.itemPull[this.idPrefix+n].hotkey};dhtmlXMenuObject.prototype._clearAllSelectedSubItemsInPolygon=function(n){for(var i=this._getSubItemToDeselectByPolygon(n),t=0;t<this.conf.opened_poly.length;t++)this.conf.opened_poly[t]!=n&&this._hidePolygon(this.conf.opened_poly[t]);for(t=0;t<i.length;t++)this.idPull[i[t]]!=null&&this.itemPull[i[t]].state=="enabled"&&(this.idPull[i[t]].className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_Item_Normal")};dhtmlXMenuObject.prototype._checkArrowsState=function(n){var t=this.idPull["polygon_"+n].childNodes[1],i=this.idPull["arrowup_"+n],r=this.idPull["arrowdown_"+n];i.className=t.scrollTop==0?"dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp_Disabled":"dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp"+(i.over?"_Over":"");r.className=t.scrollTop+t.offsetHeight<t.scrollHeight?"dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown"+(r.over?"_Over":""):"dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown_Disabled";t=i=r=null};dhtmlXMenuObject.prototype._addUpArrow=function(n){var t=this,i=document.createElement("DIV"),r;i.pId=this.idPrefix+n;i.id="arrowup_"+this.idPrefix+n;i.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp";i.over=!1;i.onselectstart=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1};i.oncontextmenu=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1};i.onmouseover=function(){(t.conf.mode=="web"&&window.clearTimeout(t.conf.tm_handler),t._clearAllSelectedSubItemsInPolygon(this.pId),this.className!="dhtmlxMenu_"+t.conf.skin+"_SubLevelArea_ArrowUp_Disabled")&&(this.className="dhtmlxMenu_"+t.conf.skin+"_SubLevelArea_ArrowUp_Over",this.over=!0,t._canScrollUp=!0,t._doScrollUp(this.pId,!0))};i.onmouseout=function(){(t.conf.mode=="web"&&(window.clearTimeout(t.conf.tm_handler),t.conf.tm_handler=window.setTimeout(function(){t._clearAndHide()},t.conf.tm_sec,"JavaScript")),this.over=!1,t._canScrollUp=!1,this.className!="dhtmlxMenu_"+t.conf.skin+"_SubLevelArea_ArrowUp_Disabled")&&(this.className="dhtmlxMenu_"+t.conf.skin+"_SubLevelArea_ArrowUp",window.clearTimeout(t.conf.of_utm))};i.onclick=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,!1};r=this.idPull["polygon_"+this.idPrefix+n];r.childNodes[0].appendChild(i);this.idPull[i.id]=i;r=i=null};dhtmlXMenuObject.prototype._addDownArrow=function(n){var t=this,i=document.createElement("DIV"),r;i.pId=this.idPrefix+n;i.id="arrowdown_"+this.idPrefix+n;i.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown";i.over=!1;i.onselectstart=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1};i.oncontextmenu=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1};i.onmouseover=function(){(t.conf.mode=="web"&&window.clearTimeout(t.conf.tm_handler),t._clearAllSelectedSubItemsInPolygon(this.pId),this.className!="dhtmlxMenu_"+t.conf.skin+"_SubLevelArea_ArrowDown_Disabled")&&(this.className="dhtmlxMenu_"+t.conf.skin+"_SubLevelArea_ArrowDown_Over",this.over=!0,t._canScrollDown=!0,t._doScrollDown(this.pId,!0))};i.onmouseout=function(){(t.conf.mode=="web"&&(window.clearTimeout(t.conf.tm_handler),t.conf.tm_handler=window.setTimeout(function(){t._clearAndHide()},t.conf.tm_sec,"JavaScript")),this.over=!1,t._canScrollDown=!1,this.className!="dhtmlxMenu_"+t.conf.skin+"_SubLevelArea_ArrowDown_Disabled")&&(this.className="dhtmlxMenu_"+t.conf.skin+"_SubLevelArea_ArrowDown",window.clearTimeout(t.conf.of_dtm))};i.onclick=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,!1};r=this.idPull["polygon_"+this.idPrefix+n];r.childNodes[2].appendChild(i);this.idPull[i.id]=i;r=i=null};dhtmlXMenuObject.prototype._removeUpArrow=function(n){var t="arrowup_"+this.idPrefix+n;this._removeArrow(t)};dhtmlXMenuObject.prototype._removeDownArrow=function(n){var t="arrowdown_"+this.idPrefix+n;this._removeArrow(t)};dhtmlXMenuObject.prototype._removeArrow=function(n){var t=this.idPull[n];t.onselectstart=null;t.oncontextmenu=null;t.onmouseover=null;t.onmouseout=null;t.onclick=null;t.parentNode&&t.parentNode.removeChild(t);t=null;this.idPull[n]=null;try{delete this.idPull[n]}catch(i){}};dhtmlXMenuObject.prototype._isArrowExists=function(n){return this.idPull["arrowup_"+n]!=null&&this.idPull["arrowdown_"+n]!=null?!0:!1};dhtmlXMenuObject.prototype._doScrollUp=function(n,t){var r=this.idPull["polygon_"+n].childNodes[1],u,i,f;this._canScrollUp&&r.scrollTop>0?(u=!1,i=r.scrollTop-this.conf.of_ustep,i<0&&(u=!0,i=0),r.scrollTop=i,u?t=!0:(f=this,this.conf.of_utm=window.setTimeout(function(){f._doScrollUp(n,!1);f=null},this.conf.of_utime))):(this._canScrollUp=!1,this._checkArrowsState(n));t&&this._checkArrowsState(n)};dhtmlXMenuObject.prototype._doScrollDown=function(n,t){var i=this.idPull["polygon_"+n].childNodes[1],u,r,f;this._canScrollDown&&i.scrollTop+i.offsetHeight<=i.scrollHeight?(u=!1,r=i.scrollTop+this.conf.of_dstep,r+i.offsetHeight>=i.scrollHeight&&(u=!0,r=i.scrollHeight-i.offsetHeight),i.scrollTop=r,u?t=!0:(f=this,this.conf.of_dtm=window.setTimeout(function(){f._doScrollDown(n,!1);f=null},this.conf.of_dtime))):(this._canScrollDown=!1,this._checkArrowsState(n));t&&this._checkArrowsState(n)};dhtmlXMenuObject.prototype._countPolygonItems=function(n){var r=0,i,u,t;for(i in this.itemPull)u=this.itemPull[i].parent,t=this.itemPull[i].type,u==this.idPrefix+n&&(t=="item"||t=="radio"||t=="checkbox")&&r++;return r};dhtmlXMenuObject.prototype.setOverflowHeight=function(n){var t,i;if(n==="auto"){this.conf.overflow_limit=0;this.conf.auto_overflow=!0;return}if(this.conf.overflow_limit!=0||!(n<=0)){if(this._clearAndHide(),this.conf.overflow_limit>=0&&n>0){this.conf.overflow_limit=n;return}if(this.conf.overflow_limit>0&&n<=0){for(t in this.itemPull)this._isArrowExists(t)&&(i=String(t).replace(this.idPrefix,""),this._removeUpArrow(i),this._removeDownArrow(i),this.idPull["polygon_"+t].childNodes[1].style.height="");this.conf.overflow_limit=0;return}}};dhtmlXMenuObject.prototype._getRadioImgObj=function(n){var t;try{t=this.idPull[this.idPrefix+n].childNodes[this.conf.rtl?2:0].childNodes[0]}catch(i){t=null}return t};dhtmlXMenuObject.prototype._setRadioState=function(n,t){var r=this._getRadioImgObj(n),i;r!=null&&(i=this.itemPull[this.idPrefix+n],i.checked=t,i.imgen="rdbt_"+(i.checked?"1":"0"),i.imgdis=i.imgen,r.className="sub_icon "+i.imgen)};dhtmlXMenuObject.prototype._radioOnClickHandler=function(n,t,i){if(t.charAt(1)!="d"&&this.itemPull[this.idPrefix+n].group!=null){var r=this.itemPull[this.idPrefix+n].group;this.checkEvent("onRadioClick")?this.callEvent("onRadioClick",[r,this.getRadioChecked(r),n,this.conf.ctx_zoneid,i])&&this.setRadioChecked(r,n):this.setRadioChecked(r,n);this.checkEvent("onClick")&&this.callEvent("onClick",[n])}};dhtmlXMenuObject.prototype.getRadioChecked=function(n){for(var i,r,f,u=null,t=0;t<this.radio[n].length;t++)i=this.radio[n][t].replace(this.idPrefix,""),r=this._getRadioImgObj(i),r!=null&&(f=r.className.match(/rdbt_1$/gi),f!=null&&(u=i));return u};dhtmlXMenuObject.prototype.setRadioChecked=function(n,t){var i,r;if(this.radio[n]!=null)for(i=0;i<this.radio[n].length;i++)r=this.radio[n][i].replace(this.idPrefix,""),this._setRadioState(r,r==t)};dhtmlXMenuObject.prototype.addRadioButton=function(n,t,i,r,u,f,e,o){var s,c;if(!this.conf.context||t!=this.topId){if(this.itemPull[this.idPrefix+t]==null)return;if(n=="child"&&this.itemPull[this.idPrefix+t].type!="item")return}var h=this.idPrefix+(r!=null?r:this._genStr(24)),l="rdbt_"+(e?"1":"0"),a=l;n=="sibling"?(s=this.idPrefix+this.getParentId(t),this._addItemIntoGlobalStrorage(h,s,u,"radio",o,l,a),this._renderSublevelItem(h,this.getItemPosition(t))):(s=this.idPrefix+t,this._addItemIntoGlobalStrorage(h,s,u,"radio",o,l,a),this.idPull["polygon_"+s]==null&&this._renderSublevelPolygon(s,s),this._renderSublevelItem(h,i-1),this._redefineComplexState(s));c=f!=null?f:this._genStr(24);this.itemPull[h].group=c;this.radio[c]==null&&(this.radio[c]=[]);this.radio[c][this.radio[c].length]=h;e==!0&&this.setRadioChecked(c,String(h).replace(this.idPrefix,""))};dhtmlXMenuObject.prototype.serialize=function(){return"<menu>"+this._readLevel(this.idPrefix+this.topId)+"<\/menu>"};dhtmlXMenuObject.prototype._readLevel=function(n){var i="";for(var t in this.itemPull)if(this.itemPull[t].parent==n){var u="",f="",e="",s=String(this.itemPull[t].id).replace(this.idPrefix,""),r="",h=this.itemPull[t].title!=""?' text="'+this.itemPull[t].title+'"':"",o="";this.itemPull[t].type=="item"&&(this.itemPull[t].imgen!=""&&(u=' img="'+this.itemPull[t].imgen+'"'),this.itemPull[t].imgdis!=""&&(f=' imgdis="'+this.itemPull[t].imgdis+'"'),this.itemPull[t].hotkey!=""&&(e="<hotkey>"+this.itemPull[t].hotkey+"<\/hotkey>"));this.itemPull[t].type=="separator"?r=' type="separator"':this.itemPull[t].state=="disabled"&&(o=' enabled="false"');this.itemPull[t].type=="checkbox"&&(r=' type="checkbox"'+(this.itemPull[t].checked?' checked="true"':""));this.itemPull[t].type=="radio"&&(r=' type="radio" group="'+this.itemPull[t].group+'" '+(this.itemPull[t].checked?' checked="true"':""));i+="<item id='"+s+"'"+h+r+u+f+o+">";i+=e;this.itemPull[t].complex&&(i+=this._readLevel(t));i+="<\/item>"}return i};dhtmlXMenuObject.prototype.enableEffect=function(n,t,i){this._menuEffect=n=="opacity"||n=="slide"||n=="slide+"?n:!1;this._pOpStyleIE=navigator.userAgent.search(/MSIE\s[678]\.0/gi)>=0;for(var r in this.idPull)r.search(/polygon/)===0&&(this._pOpacityApply(r,this._pOpStyleIE?100:1),this.idPull[r].style.height="");this._pOpMax=(typeof t=="undefined"?100:t)/(this._pOpStyleIE?1:100);this._pOpStyleName=this._pOpStyleIE?"filter":"opacity";this._pOpStyleValue=this._pOpStyleIE?"progid:DXImageTransform.Microsoft.Alpha(Opacity=#)":"#";this._pSlSteps=this._pOpStyleIE?10:20;this._pSlTMTimeMax=i||50};dhtmlXMenuObject.prototype._showPolygonEffect=function(n){this._pShowHide(n,!0)};dhtmlXMenuObject.prototype._hidePolygonEffect=function(n){this._pShowHide(n,!1)};dhtmlXMenuObject.prototype._pOpacityApply=function(n,t){this.idPull[n].style[this._pOpStyleName]=String(this._pOpStyleValue).replace("#",t||this.idPull[n]._op)};dhtmlXMenuObject.prototype._pShowHide=function(n,t){if(this.idPull){if(this.idPull[n]._tmShow!=null){if(this.idPull[n]._step_h>0&&t==!0||this.idPull[n]._step_h<0&&t==!1)return;window.clearTimeout(this.idPull[n]._tmShow);this.idPull[n]._tmShow=null;this.idPull[n]._max_h=null}if(t!=!1||this.idPull[n].style.visibility!="hidden"&&this.idPull[n].style.display!="none"){if(t==!0&&this.idPull[n].style.display=="none"&&(this.idPull[n].style.visibility="hidden",this.idPull[n].style.display=""),this.idPull[n]._max_h==null){if(this.idPull[n]._max_h=parseInt(this.idPull[n].offsetHeight),this.idPull[n]._h=t==!0?0:this.idPull[n]._max_h,this.idPull[n]._step_h=Math.round(this.idPull[n]._max_h/this._pSlSteps)*(t==!0?1:-1),this.idPull[n]._step_h==0)return;this.idPull[n]._step_tm=Math.round(this._pSlTMTimeMax/this._pSlSteps);this._menuEffect=="slide+"||this._menuEffect=="opacity"?(this.idPull[n].op_tm=this.idPull[n]._step_tm,this.idPull[n].op_step=this._pOpMax/this._pSlSteps*(t==!0?1:-1),this._pOpStyleIE&&(this.idPull[n].op_step=Math.round(this.idPull[n].op_step)),this.idPull[n]._op=t==!0?0:this._pOpMax,this._pOpacityApply(n)):(this.idPull[n]._op=this._pOpStyleIE?100:1,this._pOpacityApply(n));this._menuEffect.search(/slide/)===0&&(this.idPull[n].style.height="0px");this.idPull[n].style.visibility="visible"}this._pEffectSet(n,this.idPull[n]._h+this.idPull[n]._step_h)}}};dhtmlXMenuObject.prototype._pEffectSet=function(n,t){if(this.idPull)if(this.idPull[n]._tmShow&&window.clearTimeout(this.idPull[n]._tmShow),this.idPull[n]._h=Math.max(0,Math.min(t,this.idPull[n]._max_h)),this._menuEffect.search(/slide/)===0&&(this.idPull[n].style.height=this.idPull[n]._h+"px"),t+=this.idPull[n]._step_h,(this._menuEffect=="slide+"||this._menuEffect=="opacity")&&(this.idPull[n]._op=Math.max(0,Math.min(this._pOpMax,this.idPull[n]._op+this.idPull[n].op_step)),this._pOpacityApply(n)),this.idPull[n]._step_h>0&&t<=this.idPull[n]._max_h||this.idPull[n]._step_h<0&&t>=0){var i=this;this.idPull[n]._tmShow=window.setTimeout(function(){i._pEffectSet(n,t)},this.idPull[n]._step_tm)}else this._menuEffect.search(/slide/)===0&&(this.idPull[n].style.height=""),this.idPull[n]._step_h<0&&(this.idPull[n].style.visibility="hidden"),(this._menuEffect=="slide+"||this._menuEffect=="opacity")&&(this.idPull[n]._op=this.idPull[n]._step_h<0?this._pOpStyleIE?100:1:this._pOpMax,this._pOpacityApply(n)),this.idPull[n]._tmShow=null,this.idPull[n]._h=null,this.idPull[n]._max_h=null,this.idPull[n]._step_tm=null};dhtmlXRibbon.prototype.setSizes=function(){this._tabbar!=null&&typeof this.setSizes=="function"&&this._tabbar.setSizes()};dhtmlXRibbon.prototype._renderData=function(n){var t=this._base.firstChild;n!=null&&(this.conf.icons_path=n.icons_path||this.conf.icons_path,this.conf.icons_css=this.conf.icons_css||n.iconset=="awesome",n.tabs instanceof Array?(this._base.className=this._base.className.replace(/\s?dhxrb_without_tabbar/i,""),t.className="dhxrb_with_tabbar",this._tabbar=new dhtmlXTabBar(t),this._attachEventTabbar(),this._tabbar.setSkin(this.conf.skin),this.conf.arrows_mode!=null&&this._tabbar.setArrowsMode(this.conf.arrows_mode),this.childIds=this._appendTabs(n.tabs)):n.items instanceof Array&&(/\s?dhxrb_without_tabbar/i.test(this._base.className)||(this._base.className+=" dhxrb_without_tabbar"),/\s?dhxrb_background_area/i.test(t.className)&&(t.className="dhxrb_background_area"),t.innerHTML="<div class='dhxrb_g_area'><\/div>",this.childIds=this._appendBlocks(n.items,t.firstChild)),this.callEvent("_onHeightChanged",[]))};dhtmlXRibbon.prototype._xmlToJson=function(n){var i=n.lastChild||null,r={},t=[];return i&&i.tagName=="ribbon"&&(t=this._convertXmlNodeListIntoObject(i.childNodes)),t[0]&&t[0].type&&t[0].type.toLowerCase()=="block"?r.items=t:r.tabs=t,r};dhtmlXRibbon.prototype._convertXmlNodeListIntoObject=function(n){for(var u=[],i,r=n.length,t=0;t<r;t++)i=this._covertXmlNodeToObject(n[t]),i&&u.push(i);return u};dhtmlXRibbon.prototype._covertXmlNodeToObject=function(n){if(!n||!n.tagName||!(n.tagName.toLowerCase()=="item"||n.tagName.toLowerCase()=="tab"))return null;for(var r=n.attributes,i={},u=r.length,t=0;t<u;t++)switch(r[t].name){case"isbig":i.isbig=dhx4.s2b(r[t].value);break;case"state":i.state=dhx4.s2b(r[t].value);break;default:i[r[t].name]=r[t].value}return n.childNodes.length&&(n.getAttribute("type")=="buttonCombo"||n.getAttribute("type")=="buttonSelect"?i.data=n:n.tagName.toLowerCase()=="tab"?i.items=this._convertXmlNodeListIntoObject(n.childNodes):i.list=this._convertXmlNodeListIntoObject(n.childNodes)),i};dhtmlXRibbon.prototype._appendTabs=function(n){for(var i,u=[],r=n.length,t=0;t<r;t++)i=this._addTab(n[t]),n[t].items instanceof Array&&(i.childIds=this._appendBlocks(n[t].items,i.base,i)),u.push(i.id);return u};dhtmlXRibbon.prototype._addTab=function(n){var i,t={conf:{active:!1,text:"",width:null,position:null,disable:!1},base:document.createElement("div"),type:"tab",childIds:[]};for(i in n)i!="items"&&(t.conf[i]=n[i]);for(t.id=n.id?n.id:dhx4.newId();this._items[t.id];)t.id=dhx4.newId();return this._tabbar.addTab(t.id,t.conf.text,t.conf.width,t.conf.position,t.conf.active),t.base.className="dhxrb_g_area",t.base._dhx_ribbonId=t.id,this.tabs(t.id).attachObject(t.base),this._changeApiForTab(this.tabs(t.id)),this._items[t.id]=t,t};dhtmlXRibbon.prototype._changeApiForTab=function(n){for(var t in this._tabOriginalApi)this._tabOriginalApi[t]=this._tabOriginalApi[t]||n[t],n[t]=this._tabCustomApi[t]};dhtmlXRibbon.prototype._tabOriginalApi={enable:null,disable:null,close:null};dhtmlXRibbon.prototype._appendBlocks=function(n,t,i){var r,o,u,e,s,f,h=[];for(i=i||null,o=n.length,r=0;r<o;r++)if(typeof n[r]=="object"&&n[r].type=="block"){if(u=this._addBlock(n[r],t),n[r].list&&n[r].list instanceof Array)for(e=n[r].list,s=e.length,f=0;f<s;f++)this._addItem(u.id,null,null,e[f]);i!=null&&(u.parentId=i.id);u.conf.disable&&this.disable(u.id);h.push(u.id)}return h};dhtmlXRibbon.prototype._addBlock=function(n,t){var i,r;i={conf:{text:"",text_pos:"bottom",type:"block",mode:"cols",disable:!1},type:"block",childIds:[],base:document.createElement("div"),contForItems:document.createElement("div"),contForText:document.createElement("div")};for(r in n)r!="list"&&r!="type"&&r!="id"&&(i.conf[r]=n[r]);for(i.id=n.id?n.id:dhx4.newId();this._items[i.id];)i.id=dhx4.newId();return i.base.className="dhxrb_block_base",t.appendChild(i.base),i.contForItems.className="dhxrb_block_items",i.contForText.className="dhxrb_block_label",i.base.appendChild(i.contForItems),i.conf.text&&(i.contForText.innerHTML=i.conf.text,i.conf.text_pos=="top"?i.base.insertBefore(i.contForText,i.contForItems):i.base.appendChild(i.contForText)),i.base._dhx_ribbonId=i.id,this._items[i.id]=i,i};dhtmlXRibbon.prototype._addItem=function(n,t,i,r){var o=this._items[n],e,c,f=null,s=this,u,h;if(r.type!="newLevel"&&!this.items[r.type])return null;if(r.type=="newLevel"?this._addNewLevel(o):o.type=="group"?(e=document.createElement("div"),e.className="dhxrb_in_group",o.base.appendChild(e)):r.isbig?(e=document.createElement("div"),e.className="dhxrb_big_button",o.contForItems.appendChild(e)):(c=this._getContainerForSmallItem(o),e=document.createElement("div"),e.className=o.conf.mode=="rows"?"dhxrb_in_row":"dhxrb_3rows_button",c.appendChild(e)),e){this._attachEventForItem(e);u={icons_path:r.icons_path||this.conf.icons_path,icons_css:this.conf.icons_css,skin:this.conf.skin};for(h in r)u[h]=r[h];for(u.id||(u.id=dhx4.newId());this._items[u.id];)u.id=dhx4.newId();f=this.items[u.type]&&this.items[u.type].render?this.items[u.type].render(e,u):null}return f!=null&&(this._items[f.id]=f,f.parentId=o.id,o.childIds.push(f.id),e._dhx_ribbonId=f.id,u.onclick&&typeof u.onclick=="function"&&(this._eventHandlers[f.id]=this._eventHandlers[f.id]||{},this._eventHandlers[f.id].onclick=u.onclick),f.callEvent=function(){s.callEvent.apply(s,arguments)},f._callHandler=function(){s._callHandler.apply(s,arguments)},this.items[u.type]&&typeof this.items[u.type].callAfterInit=="function"&&this.items[u.type].callAfterInit.apply(this,[f])),f};dhtmlXRibbon.prototype._callHandler=function(n,t){this._eventHandlers[n]&&this._eventHandlers[n].onclick&&this._eventHandlers[n].onclick.apply(this,t)};dhtmlXRibbon.prototype.items={};dhtmlXRibbon.prototype.items.button={render:function(n,t){var r,i,u;i={base:n,id:t.id,type:t.type,conf:{text:"",text_pos:t.isbig?"bottom":"right",img:null,imgdis:null,isbig:!1,disable:!1,skin:t.skin,icons_css:t.icons_css}};for(r in t)r!="id"&&r!="onclick"&&r!="type"&&(i.conf[r]=t[r]);return u=i.conf.icons_css==!0?"<i class='"+i.conf.icons_path+(i.conf.img||"")+"'><\/i>":"<img class='dhxrb_image"+(i.conf.img?"'":" dhxrb_invisible'")+" src='"+(i.conf.img?i.conf.icons_path+i.conf.img:"")+"' />",n.innerHTML=u+"<div class='dhxrb_label_button'>"+i.conf.text+"<\/div>",typeof this.afterRender=="function"&&this.afterRender(i),i.conf.disable&&this.disable(i),i},getText:function(n){return n.conf.text},setText:function(n,t){var i=n.base.childNodes[1];n.conf.text=t;i.innerHTML=t},setImage:function(n,t){n.conf.img=t;n.conf.disable==!1&&(n.base.childNodes[0][n.conf.icons_css?"className":"src"]=n.conf.icons_path+n.conf.img)},setImageDis:function(n,t){n.conf.imgdis=t;n.conf.disable==!0&&(n.base.childNodes[0][n.conf.icons_css?"className":"src"]=n.conf.icons_path+n.conf.imgdis)},mousedown:function(){return!0},click:function(n,t,i){return i.button!=0?!1:(t._callHandler(n.id,[n.id]),n.callEvent("onClick",[n.id]),!1)},disable:function(n){var t=n.base.childNodes[0],i=n.base.childNodes[1];return n.conf.imgdis&&(t[n.conf.icons_css?"className":"src"]=n.conf.icons_path+n.conf.imgdis,/\s?dhxrb_invisible/i.test(t.className)&&(t.className=t.className.replace(/\s?dhxrb_invisible/i,""))),/\s?dhxrb_disable_text_style/i.test(i.className)||(i.className+=" dhxrb_disable_text_style"),!0},enable:function(n){var t=n.base.childNodes[0],i=n.base.childNodes[1];return n.conf.img?t[n.conf.icons_css?"className":"src"]=n.conf.icons_path+n.conf.img:/\s?dhxrb_invisible/i.test(t.className)||(t.className+=" dhxrb_invisible"),/\s?dhxrb_disable_text_style/i.test(i.className)&&(i.className=i.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0}};dhtmlXRibbon.prototype.items.buttonTwoState={click:function(){return!1},afterRender:function(n){n.conf.state&&this.setState(n,n.conf.state)},mouseover:function(n){return/dhxrb_highlight0/.test(n.base.className)||(n.base.className+=" dhxrb_highlight0"),!1},mouseout:function(n){return/dhxrb_highlight0/.test(n.base.className)&&(n.base.className=n.base.className.replace(/\s?dhxrb_highlight0/,"")),!1},mousedown:function(n,t){return t._callHandler(n.id,[n.id,!n.conf.state]),this.setState(n,!n.conf.state,!0),!1},mouseup:function(){return!1},setState:function(n,t,i){i=i||!1;t=dhx4.s2b(t);t?/dhxrb_highlight1/.test(n.base.className)||(n.base.className+=" dhxrb_highlight1"):/dhxrb_highlight1/.test(n.base.className)&&(n.base.className=n.base.className.replace(/\s?dhxrb_highlight1/,""));n.conf.state=t;i&&n.callEvent("onStateChange",[n.id,n.conf.state])},getState:function(n){return n.conf.state==!0}};dhtmlXRibbon.prototype.items.buttonSegment={click:function(){return!1},mousedown:function(n,t){return this.setState(n,t,!0),!1},callAfterInit:function(n){(n.conf.state||dhtmlXRibbon.prototype.items.buttonSegment._getSelectedNeighbor(n,this)==null)&&(n.conf.state&&(n.conf.state=!1),dhtmlXRibbon.prototype.items.buttonSegment.setState(n,this,!1))},afterRender:function(){},setState:function(n,t,i){i=i||!1;var r=null,u=dhx4.s2b(n.conf.state);u==!1&&(r=this._getSelectedNeighbor(n,t),r!=null&&this._unSelect(r),/dhxrb_highlight1/.test(n.base.className)||(n.base.className+=" dhxrb_highlight1"),n.conf.state=!0,i&&(t._callHandler(n.id,[n.id,r?r.id:null]),t.callEvent("onStateChange",[n.id,r?r.id:null])))},remove:function(n,t){var e=dhx4.s2b(n.conf.state),i=null,u=0,f=t._items[n.parentId],r;if(e){while(f.childIds[u]&&i==null)r=t._items[f.childIds[u]],r.type=="buttonSegment"&&r!=n&&(i=r),u++;i&&this.setState(i,t)}},_unSelect:function(n){var t=dhx4.s2b(n.conf.state);t&&(/dhxrb_highlight1/.test(n.base.className)&&(n.base.className=n.base.className.replace(/\s?dhxrb_highlight1/,"")),n.conf.state=!1)},_getSelectedNeighbor:function(n,t){for(var u=t._items[n.parentId],r,e=null,f=u.childIds.length,i=0;i<f;i++)if(r=t._items[u.childIds[i]],r.type=="buttonSegment"&&r.conf.state){e=r;break}return e}};dhtmlXRibbon.prototype.items.buttonSelect={itemCollection:[],_isAttachedEventInWindow:!1,afterRender:function(n){var t=n.base.childNodes[1];t.innerHTML+="<span class='dhxrb_arrow'>&nbsp;<\/span>";n.menu=null;this.itemCollection.push(n);this._attachEventToWindow();t=null},setText:function(n,t){var i=n.base.childNodes[1].lastChild;n.conf.text=t;n.base.childNodes[1].innerHTML=t;n.base.childNodes[1].appendChild(i)},setOptionText:function(n,t,i){n.menu!=null?n.menu.setItemText(t,i):this._loopThroughItems(n.conf.items,t,i,!1)},getOptionText:function(n,t){return n.menu!=null?n.menu.getItemText(t):this._loopThroughItems(n.conf.items,t,null,!0)},_loopThroughItems:function(n,t,i,r){for(var f,u=0;u<n.length;u++){if(n[u].id==t)return r!=!0?(n[u].text=i,!0):n[u].text;if(n[u].items!=null&&(f=this._loopThroughItems(n[u].items,t,i,r),f!=null))return f}return null},_attachEventToWindow:function(){this._isAttachedEventInWindow==!1&&(typeof addEventListener=="function"?document.body.addEventListener("mousedown",this._hideAllMenus,!1):document.body.attachEvent("onmousedown",this._hideAllMenus),this._isAttachedEventInWindow=!0)},_detachEventFromWindow:function(){typeof addEventListener=="function"?document.body.removeEventListener("mousedown",this._hideAllMenus,!1):document.body.detachEvent("onmousedown",this._hideAllMenus);this._isAttachedEventInWindow=!1},_hideAllMenus:function(n){var t,r,u,f,i;for(n=n||event,t=n.target||n.srcElement,r=!0;t!=null&&r==!0;)t.className!=null&&/SubLevelArea_Polygon/i.test(t.className)?r=!1:t=t.parentNode;if(r!=!1){u=dhtmlXRibbon.prototype.items.buttonSelect.itemCollection;for(f in u)i=u[f],i.menu instanceof dhtmlXMenuObject&&(i._skipHiding?i._skipHiding=!1:dhtmlXRibbon.prototype.items.buttonSelect.hideMenu(i))}},mousedown:function(n){return n._skipHiding=!0,this.showMenu(n),!1},mouseup:function(){return!1},click:function(){},setState:function(){},showMenu:function(n){var t=dhx4.absLeft(n.base),i=dhx4.absTop(n.base)+n.base.offsetHeight;n.menu instanceof dhtmlXMenuObject?n.menu.showContextMenu(t,i):(n.menu=new dhtmlXMenuObject({parent:n.base,icons_path:n.conf.icons_path,context:!0,items:n.conf.items,skin:n.conf.skin}),n.conf.data&&(n.menu.loadStruct(n.conf.data),delete n.conf.data),n.menu.setAutoHideMode(!1),n.menu.attachEvent("onHide",function(t){t==null&&dhtmlXRibbon.prototype.items.buttonSelect._doOnHideMenu(n)}),n.menu.attachEvent("onShow",function(t){t==null&&dhtmlXRibbon.prototype.items.buttonSelect._doOnShowMenu(n)}),n.menu.attachEvent("onClick",function(t){n.callEvent("onClick",[t,n.id])}),n.base.oncontextmenu=function(){return!1},dhtmlXRibbon.prototype.items.buttonSelect.showMenu(n))},hideMenu:function(n){n.menu instanceof dhtmlXMenuObject&&n.menu.hideContextMenu()},remove:function(n){var t;n.menu instanceof dhtmlXMenuObject&&(n.menu.unload(),n.menu=null);n.base.oncontextmenu=null;t=dhtmlXRibbon.prototype._indexOf(dhtmlXRibbon.prototype.items.buttonSelect.itemCollection,n);t!=-1&&dhtmlXRibbon.prototype.items.buttonSelect.itemCollection.splice(t,1);dhtmlXRibbon.prototype.items.buttonSelect.itemCollection.length==0&&this._detachEventFromWindow()},setSkin:function(n,t){n.menu instanceof dhtmlXMenuObject&&n.menu.setSkin(t)},_doOnHideMenu:function(n){n._skipHiding?n._skipHiding=!1:/dhxrb_highlight1/.test(n.base.className)&&(n.base.className=n.base.className.replace(/\s?dhxrb_highlight1/,""))},_doOnShowMenu:function(n){/dhxrb_highlight1/.test(n.base.className)||(n.base.className+=" dhxrb_highlight1")}};dhtmlXRibbon.prototype.items.group={render:function(n,t){var i,r;r={base:n,id:t.id,type:t.type,conf:{disable:!1,skin:t.skin},childIds:[]};n.className="dhxrb_group";for(i in t)i!="id"&&i!="onclick"&&i!="type"&&(r.conf[i]=t[i]);return r},callAfterInit:function(n){this._detachEventFromItem(n.base);for(var r=n.conf.list,u,t,f=r?r.length:0,i=0;i<f;i++)(u=this._addItem(n.id,null,null,r[i]),u!=null)&&(t=u.base.childNodes[1],!t||t.innerHTML||/\s?dhxrb_label_hide/i.test(t.className)||(t.className+=" dhxrb_label_hide"));dhtmlXRibbon.prototype.items.group.normalize(n);n.conf.disable&&this.disable(n.id);r=undefined},normalize:function(n){for(var i=n.base.children,o=i.length,u=!1,f=0,e,r,t=0;t<o;t++){if(!/dhxrb_separator_group/i.test(i[t].className)&&/dhxrb_item_hide/i.test(i[t].className)){f++;continue}if(Math.ceil((t-f)/2)-Math.floor((t-f)/2)==0){if(/dhxrb_separator_group/i.test(i[t].className)){i[t].parentNode.removeChild(i[t]);u=!0;break}}else if(!/dhxrb_separator_group/i.test(i[t].className)){e=document.createElement("div");e.className="dhxrb_separator_groupp";n.base.insertBefore(e,i[t]);u=!0;break}}u?this.normalize(n):(r=n.base.lastChild,r&&/dhxrb_separator_group/i.test(r.className)&&r.parentNode.removeChild(r))},hideChild:function(n,t){var i=dhtmlXRibbon.prototype._indexOf(n.base.children,t.base),r;if(i==0)i++;else if(i!=-1)i--;else return;r=n.base.children[i];r&&/dhxrb_separator_group/i.test(r.className)&&r.parentNode.removeChild(r)},showChild:function(n){this.normalize(n)}};dhtmlXRibbon.prototype.items.input={render:function(n,t){var r,i={base:n,id:t.id,type:t.type,conf:{text:"",text_pos:t.isbig?"bottom":"right",img:null,imgdis:null,isbig:!1,disable:!1,skin:t.skin,value:""}};for(r in t)r!="id"&&r!="onclick"&&r!="type"&&(i.conf[r]=t[r]);return n.innerHTML="<input type='text' class='dhxrb_input'><div class='dhxrb_label_button'>"+i.conf.text+"<\/div>",typeof this.afterRender=="function"&&this.afterRender(i),i.conf.disable&&this.disable(i),i.conf.width&&this.setWidth(i,i.conf.width),i.conf.value&&this.setValue(i,i.conf.value),i},callAfterInit:function(n){var t=n.base.childNodes[0];this._detachEventFromItem(n.base);this._attachEventsToInput(t)},setText:dhtmlXRibbon.prototype.items.button.setText,getText:dhtmlXRibbon.prototype.items.button.getText,change:function(n){var t=n.base.childNodes[0];n.conf.value=t.value},keydown:function(n,t,i){if(i.keyCode==13){var r=n.base.childNodes[0];n.conf.value=r.value;t.callEvent("onEnter",[n.id,n.conf.value])}},remove:function(n,t){var i=n.base.childNodes[0];t._detachEventsFromInput(i)},getValue:function(n){var t=n.base.childNodes[0],i;return i=t.value,t=undefined,i},setValue:function(n,t){var i=n.base.childNodes[0],t;i.value=t;n.conf.value=t},setWidth:function(n,t){var i=n.base.childNodes[0];i.style.width=parseInt(t)+"px"},disable:function(n){var i=n.base.childNodes[0],t=n.base.childNodes[1];return i.disabled=!0,/\s?dhxrb_disable_text_style/i.test(t.className)||(t.className+=" dhxrb_disable_text_style"),!0},enable:function(n){var i=n.base.childNodes[0],t=n.base.childNodes[1];return i.disabled=!1,/\s?dhxrb_disable_text_style/i.test(t.className)&&(t.className=t.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0},getInput:function(n){return n.base.childNodes[0]}};dhtmlXRibbon.prototype.getInput=function(n){var t=this._items[n];return t==null||t.type!="input"?null:this.items[t.type].getInput(t)};dhtmlXRibbon.prototype.items.checkbox={render:function(n,t){var i,r={base:n,id:t.id,type:t.type,conf:{text:"",text_pos:t.isbig?"bottom":"right",disable:!1,checked:!1}};for(i in t)i!="id"&&i!="onclick"&&i!="type"&&(r.conf[i]=t[i]);return n.innerHTML="<div class='dhxrb_checkbox'><\/div><div class='dhxrb_label_checkbox'>"+r.conf.text+"<\/div>",typeof this.afterRender=="function"&&this.afterRender(r),r.conf.checked&&this.check(r),r},callAfterInit:function(n){n.conf.disable&&this.disable(n.id)},setText:dhtmlXRibbon.prototype.items.button.setText,getText:dhtmlXRibbon.prototype.items.button.getText,mousedown:function(){return!1},mouseup:function(){return!1},click:function(n,t,i){if(i.button!=0)return!1;n.type=="checkbox"&&(n.conf.checked?this.uncheck(n,!0):this.check(n,!0))},check:function(n,t){(t=t||!1,n.type=="checkbox")&&(n.conf.checked=!0,/\s?dhxrb_checked/i.test(n.base.className)||(n.base.className+=" dhxrb_checked"),t&&n.callEvent("onCheck",[n.id,n.conf.checked]))},uncheck:function(n,t){(t=t||!1,n.type=="checkbox")&&(n.conf.checked=!1,/\s?dhxrb_checked/i.test(n.base.className)&&(n.base.className=n.base.className.replace(/\s?dhxrb_checked/i,"")),t&&n.callEvent("onCheck",[n.id,n.conf.checked]))},isChecked:function(n){return n.type!="checkbox"?!1:n.conf.checked==!0},disable:function(){return!0},enable:function(){return!0}};dhtmlXRibbon.prototype.items.text={render:function(n,t){var i={base:n,id:t.id,type:t.type,conf:{text:""}};for(var r in t)r!="id"&&r!="type"&&(i.conf[r]=t[r]);return n.innerHTML="<div class='dhxrb_item_text'>"+i.conf.text+"<\/div>",typeof this.afterRender=="function"&&this.afterRender(i),i},callAfterInit:function(n){this._detachEventFromItem(n.base)},getText:function(n){return n.conf.text},setText:function(n,t){n.conf.text=t;n.base.firstChild.innerHTML=n.conf.text}};dhtmlXRibbon.prototype.items.buttonCombo={render:function(n,t){var r,i,u={};i={base:n,id:t.id,type:t.type,conf:{text:"",text_pos:"right",width:140,skin:t.skin,callEvent:!0,mode:t.comboType,image_path:t.comboImagePath,default_image:t.comboDefaultImage,default_image_dis:t.comboDefaultImageDis}};for(r in t)r!="id"&&r!="onclick"&&r!="type"&&(i.conf[r]=t[r]);for(r in i.conf)r!="text"&&r!="text_pos"&&r!="disable"&&r!="data"&&(u[r]=i.conf[r]);return i.base.className+=" dhxrb_buttoncombo_cont",i.base.innerHTML="<div class='dhxrb_buttoncombo'><\/div><div class='dhxrb_label_button'>"+i.conf.text+"<\/div>",u.parent=i.base.firstChild,i.combo=new dhtmlXCombo(u),i.combo.setSkin(u.skin),i.combo.attachEvent("onChange",function(n,t){i._callHandler(i.id,[n,t]);i.conf.callEvent==!0&&i.callEvent("onSelectOption",[i.id,n,t]);i.conf.callEvent=!0}),i.conf.data&&(i.combo.load(i.conf.data),delete i.conf.data),typeof this.afterRender=="function"&&this.afterRender(i),i.conf.disable&&this.disable(i),i},callAfterInit:function(n){this._detachEventFromItem(n.base)},disable:function(n){var t=n.base.lastChild;return n.combo instanceof dhtmlXCombo&&n.combo.disable(),/\s?dhxrb_disable_text_style/i.test(t.className)||(t.className+=" dhxrb_disable_text_style"),!0},enable:function(n){var t=n.base.lastChild;return n.combo instanceof dhtmlXCombo&&n.combo.enable(),/\s?dhxrb_disable_text_style/i.test(t.className)&&(t.className=t.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0},remove:function(n){n.combo instanceof dhtmlXCombo&&(n.combo.unload(),n.combo=null)},getValue:function(n){var t=null;return n.combo instanceof dhtmlXCombo&&(t=n.combo.getSelectedValue()),t},setValue:function(n,t,i){n.combo instanceof dhtmlXCombo&&(n.conf.callEvent=i,n.combo.setComboValue(t),n.conf.callEvent=!0)},setSkin:function(n,t){n.combo instanceof dhtmlXCombo&&n.combo.setSkin(t)}};dhtmlXRibbon.prototype.items.slider={render:function(n,t){var r,i,u={};i={base:n,id:t.id,type:t.type,conf:{text:"",text_pos:"right",size:150,vertical:!1,min:0,max:99,value:0,step:1,margin:10,disabled:!1,enableTooltip:!1}};for(r in t)r!="id"&&r!="onclick"&&r!="type"&&(i.conf[r]=t[r]);for(r in i.conf)r!="text"&&r!="text_pos"&&r!="isbig"&&(u[r]=i.conf[r]);return i.base.innerHTML="<center><div class='dhxrb_slider'><\/div><\/center><div class='dhxrb_label_button'>"+i.conf.text+"<\/div>",u.parent=i.base.firstChild.firstChild,i.slider=new dhtmlXSlider(u),typeof this.afterRender=="function"&&this.afterRender(i),i.conf.disable&&this.disable(i),i.slider.attachEvent("onChange",function(n){i._callHandler(i.id,[n]);i.callEvent("onValueChange",[i.id,n])}),i},callAfterInit:function(n){this._detachEventFromItem(n.base)},setSkin:function(n,t){n.slider instanceof dhtmlXSlider&&n.slider.setSkin(t)},disable:function(n){var t=n.base.childNodes[1];return n.slider instanceof dhtmlXSlider&&n.slider.disable(),/\s?dhxrb_disable_text_style/i.test(t.className)||(t.className+=" dhxrb_disable_text_style"),!0},enable:function(n){var t=n.base.childNodes[1];return n.slider instanceof dhtmlXSlider&&n.slider.enable(),/\s?dhxrb_disable_text_style/i.test(t.className)&&(t.className=t.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0},remove:function(n){n.slider instanceof dhtmlXSlider&&(n.slider.unload(),n.slider=null)},getValue:function(n){var t=null;return n.slider instanceof dhtmlXSlider&&(t=n.slider.getValue()),t},setValue:function(n,t){n.slider instanceof dhtmlXSlider&&n.slider.setValue(t)}};dhtmlXRibbon.prototype.items._extends=function(n,t){for(var i in t)n[i]=n[i]||t[i];return n};dhtmlXRibbon.prototype._addNewLevel=function(n){var t,i;n.conf.mode=="rows"?(t=n.contForItems.lastChild,t&&/dhxrb_block_rows/i.test(t.className)&&t.childNodes.length<3?(i=document.createElement("div"),i.className="dhxrb_block_row",t.appendChild(i)):(t=document.createElement("div"),t.className="dhxrb_block_rows",n.contForItems.appendChild(t),i=document.createElement("div"),i.className="dhxrb_block_row",t.appendChild(i))):(i=document.createElement("div"),i.className="dhxrb_3rows_block",n.contForItems.appendChild(i))};dhtmlXRibbon.prototype._attachEventForItem=function(n){typeof addEventListener=="function"?(n.addEventListener("mouseover",this._doOnHighlight0,!1),n.addEventListener("mouseout",this._doOffHighlight0,!1),n.addEventListener("mousedown",this._doOnHighlight1,!1),n.addEventListener("mouseup",this._doOffHighlight1,!1),n.addEventListener("click",this._doOnClick,!1)):(n.attachEvent("onmouseover",this._doOnHighlight0),n.attachEvent("onmouseout",this._doOffHighlight0),n.attachEvent("onmousedown",this._doOnHighlight1),n.attachEvent("onmouseup",this._doOffHighlight1),n.attachEvent("onclick",this._doOnClick))};dhtmlXRibbon.prototype._detachEventFromItem=function(n){typeof addEventListener=="function"?(n.removeEventListener("mouseover",this._doOnHighlight0,!1),n.removeEventListener("mouseout",this._doOffHighlight0,!1),n.removeEventListener("mousedown",this._doOnHighlight1,!1),n.removeEventListener("mouseup",this._doOffHighlight1,!1),n.removeEventListener("click",this._doOnClick,!1)):(n.detachEvent("onmouseover",this._doOnHighlight0),n.detachEvent("onmouseout",this._doOffHighlight0),n.detachEvent("onmousedown",this._doOnHighlight1),n.detachEvent("onmouseup",this._doOffHighlight1),n.detachEvent("onclick",this._doOnClick))};dhtmlXRibbon.prototype._attachEventsToInput=function(n){typeof addEventListener=="function"?(n.addEventListener("focus",this._doOnFocus,!1),n.addEventListener("blur",this._doOnBlur,!1),n.addEventListener("change",this._doOnChange,!1),n.addEventListener("keydown",this._doOnKeydown,!1)):(n.attachEvent("onfocus",this._doOnFocus),n.attachEvent("onblur",this._doOnBlur),n.attachEvent("onchange",this._doOnChange),n.attachEvent("onkeydown",this._doOnKeydown))};dhtmlXRibbon.prototype._detachEventsFromInput=function(n){typeof addEventListener=="function"?(n.removeEventListener("focus",this._doOnFocus,!1),n.removeEventListener("blur",this._doOnBlur,!1),n.removeEventListener("change",this._doOnChange,!1),n.removeEventListener("keydown",this._doOnKeydown,!1)):(n.detachEvent("onfocus",this._doOnFocus),n.detachEvent("onblur",this._doOnBlur),n.detachEvent("onchange",this._doOnChange),n.detachEvent("onkeydown",this._doOnKeydown))};dhtmlXRibbon.prototype._getContainerForSmallItem=function(n){var i=n.contForItems.lastChild,t=null;return n.conf.mode=="rows"?i&&/\s?dhxrb_block_rows/i.test(i.className)?(t=i.lastChild,t||(t=document.createElement("div"),t.className="dhxrb_block_row",i.appendChild(t))):(i=document.createElement("div"),i.className="dhxrb_block_rows",n.contForItems.appendChild(i),t=document.createElement("div"),t.className="dhxrb_block_row",i.appendChild(t)):i&&/dhxrb_3rows_block/i.test(i.className)&&i.childNodes.length<3?t=i:(t=document.createElement("div"),t.className="dhxrb_3rows_block",n.contForItems.appendChild(t)),t};dhtmlXRibbon.prototype._findItemByNode=function(n){while(n&&!n._dhx_ribbonId)n=n.parentNode;return n};dhtmlXRibbon.prototype._indexOf=function(n,t){for(var r=n.length,i=0;i<r;i++)if(n[i]==t)return i;return-1};dhtmlXRibbon.prototype._removeItem=function(n){var t,r=-1,i=this._items[n.parentId];if(n.type=="group"){this._removeGroup(n);return}delete this._items[n.id];t=n.base.parentNode;this._detachEventFromItem(n.base);t.removeChild(n.base);i.type=="block"?t!=i.contForItems&&t.childNodes.length==0&&t.parentNode.removeChild(t):i.type=="group"&&dhtmlXRibbon.prototype.items.group.normalize(i);r=this._indexOf(i.childIds,n.id);r!=-1&&i.childIds.splice(r,1);this.items[n.type]&&typeof this.items[n.type].remove=="function"&&this.items[n.type].remove(n,this)};dhtmlXRibbon.prototype._removeGroup=function(n){for(var r=[],u,f=this._items[n.parentId],i=n.base.parentNode,t=0;t<n.childIds.length;t++)r.push(this._items[n.childIds[t]]);for(t=0;t<r.length;t++)this._removeItem(r[t]);delete this._items[n.id];n.base.parentNode&&i.removeChild(n.base);i.childNodes.length==0&&i.parentNode.removeChild(i);u=this._indexOf(f.childIds,n.id);u!=-1&&f.childIds.splice(u,1);this.items[n.type]&&typeof this.items[n.type].remove=="function"&&this.items[n.type].remove(n)};dhtmlXRibbon.prototype._removeBlock=function(n){for(var i=[],r,u,t=0;t<n.childIds.length;t++)i.push(this._items[n.childIds[t]]);for(t=0;t<i.length;t++)this._removeItem(i[t]);delete this._items[n.id];n.base.parentNode.removeChild(n.base);u=n.parentId?this._items[n.parentId]:this;r=this._indexOf(u.childIds,n.id);r!=-1&&u.childIds.splice(r,1)};dhtmlXRibbon.prototype._removeTab=function(n){for(var i=[],r,t=0;t<n.childIds.length;t++)i.push(this._items[n.childIds[t]]);for(t=0;t<i.length;t++)this._removeBlock(i[t]);delete this._items[n.id];r=this._indexOf(this.childIds,n.id);r!=-1&&this.childIds.splice(r,1)};dhtmlXRibbon.prototype._skinCollection={dhx_skyblue:!0,dhx_web:!0,dhx_terrace:!0,material:!0};dhtmlXRibbon.prototype._setSkinForItems=function(n){var i,t;for(i in this._items)t=this._items[i],t.conf.skin=n,dhtmlXRibbon.prototype.items[t.type]&&typeof dhtmlXRibbon.prototype.items[t.type].setSkin=="function"&&dhtmlXRibbon.prototype.items[t.type].setSkin(t,n);t=undefined;i=undefined};dhtmlXRibbon.prototype._setBlockText=function(n,t){n.conf.text=t;n.contForText.innerHTML=t;!t&&t!=0&&n.contForText.parentNode?n.contForText.parentNode.removeChild(n.contForText):n.contForText.parentNode||(n.conf.text_pos=="top"?n.base.insertBefore(n.contForText,n.contForItems):n.base.appendChild(n.contForText))};dhtmlXRibbon.prototype.hide=function(n){var t=this._items[n],i;this.items[t.type]&&typeof this.items[t.type].hide=="function"&&this.items[t.type].hide(t)!=!0||t.type!="tab"&&(/\s?dhxrb_item_hide/i.test(t.base.className)||(t.base.className+=" dhxrb_item_hide"),i=this._items[t.parentId],i&&this.items[i.type]&&typeof this.items[i.type].hideChild=="function"&&this.items[i.type].hideChild(i,t))};dhtmlXRibbon.prototype.show=function(n){var t=this._items[n],i;this.items[t.type]&&typeof this.items[t.type].show=="function"&&this.items[t.type].show(t)!=!0||t.type!="tab"&&(/\s?dhxrb_item_hide/i.test(t.base.className)&&(t.base.className=t.base.className.replace(/\s?dhxrb_item_hide/i,"")),i=this._items[t.parentId],i&&this.items[i.type]&&typeof this.items[i.type].showChild=="function"&&this.items[i.type].showChild(i,t))};dhtmlXRibbon.prototype.check=function(n,t){t=dhx4.s2b(t);var i=this._items[n];i&&!i.conf.checked&&typeof this.items[i.type].check=="function"&&(this.items[i.type].check(i),t&&this.callEvent("onCheck",[i.id,i.conf.checked]))};dhtmlXRibbon.prototype.uncheck=function(n,t){t=dhx4.s2b(t);var i=this._items[n];i&&i.conf.checked&&typeof this.items[i.type].uncheck=="function"&&(this.items[i.type].uncheck(i),t&&this.callEvent("onCheck",[i.id,i.conf.checked]))};dhtmlXRibbon.prototype.isChecked=function(n){var t=this._items[n];if(t&&typeof this.items[t.type].isChecked=="function")return this.items[t.type].isChecked(t)};dhtmlXRibbon.prototype.disable=function(n){var t=this._items[n],i;if((!this.items[t.type]||typeof this.items[t.type].disable!="function"||this.items[t.type].disable(t)==!0)&&t.type!="tab"){if(t.type=="block"||t.type=="group")for(i=0;i<t.childIds.length;i++)this.disable(t.childIds[i]);/\s?dhxrb_item_disable/i.test(t.base.className)||(t.base.className+=" dhxrb_item_disable");t.base.className.match(/dhxrb_highlight/gi)!=null&&(t.base.className=t.type=="buttonTwoState"?t.base.className.replace(/\s*dhxrb_highlight0/gi,""):t.base.className.replace(/\s*dhxrb_highlight\d/gi,""));t.conf.disable=!0}};dhtmlXRibbon.prototype.enable=function(n){var t=this._items[n];if((!this.items[t.type]||typeof this.items[t.type].enable!="function"||this.items[t.type].enable(t)==!0)&&t.type!="tab"){if(t.type=="block"||t.type=="group")for(q=0;q<t.childIds.length;q++)this.enable(t.childIds[q]);/\s?dhxrb_item_disable/i.test(t.base.className)&&(t.base.className=t.base.className.replace(/\s?dhxrb_item_disable/i,""));t.conf.disable=!1}};dhtmlXRibbon.prototype.isEnabled=function(n){var t=this._items[n];return this.items[t.type]&&typeof this.items[t.type].isEnabled=="function"?this.items[t.type].isEnabled(t):t.type=="tab"?void 0:t.conf.disable!=!0};dhtmlXRibbon.prototype.isVisible=function(n){var t=this._items[n];return this.items[t.type]&&typeof this.items[t.type].isVisible=="function"?this.items[t.type].isVisible(t):t.type=="tab"?void 0:!/\s?dhxrb_item_hide/i.test(t.base.className)};dhtmlXRibbon.prototype.setItemState=function(n,t,i){t=dhx4.s2b(t);i=dhx4.s2b(i);var r=this._items[n];if(r&&typeof this.items[r.type].setState=="function")switch(r.type){case"buttonSegment":this.items[r.type].setState(r,this,i);break;default:this.items[r.type].setState(r,t,i)}};dhtmlXRibbon.prototype.getItemState=function(n){var t=this._items[n];if(t&&typeof this.items[t.type].getState=="function")switch(t.type){case"buttonTwoState":case"buttonSegment":return this.items[t.type].getState(t)}return null};dhtmlXRibbon.prototype.setIconPath=function(n){this.conf.icons_path=n};dhtmlXRibbon.prototype.setIconset=function(n){this.conf.icons_css=n=="awesome"};dhtmlXRibbon.prototype.removeItem=function(n){var t=this._items[n];if(t!=null)switch(t.type){case"tab":break;case"block":this._removeBlock(t);break;case"group":this._removeGroup(t);break;default:this._removeItem(t)}};dhtmlXRibbon.prototype.setSkin=function(n){if(n=typeof n=="string"?n.toLowerCase():"",this._skinCollection[n]==!0){var t,i=-1,r,u="dhtmlxribbon";if(t=this._base.className.match(/\S\w+/ig),t instanceof Array){for(r in this._skinCollection)if(i==-1)i=this._indexOf(t,u+"_"+r);else break;i=i==-1?t.length:i}else t=[],i=0;t[i]=u+"_"+n;this._base.className=t.join(" ");this.conf.skin=n;this._tabbar!=null&&this._tabbar.setSkin(n);this._setSkinForItems(n)}};dhtmlXRibbon.prototype.tabs=function(n){return this._tabbar instanceof dhtmlXTabBar?this._tabbar.tabs(n):undefined};dhtmlXRibbon.prototype.getItemType=function(n){var t=this._items[n];return t?t.type:undefined};dhtmlXRibbon.prototype.getValue=function(n){var t=this._items[n],i=undefined;return t&&this.items[t.type]&&typeof this.items[t.type].getValue=="function"&&(i=this.items[t.type].getValue(t)),i};dhtmlXRibbon.prototype.setValue=function(n,t,i){var r=this._items[n];i=i===!1?!1:!0;r&&this.items[r.type]&&typeof this.items[r.type].setValue=="function"&&this.items[r.type].setValue(r,t,i)};dhtmlXRibbon.prototype.getItemText=function(n){var t=this._items[n];return t?t.type=="tab"?this.tabs(t.id).getText():t.type=="block"?this.items.button.getText(t):this.items[t.type]&&typeof this.items[t.type].getText=="function"?this.items[t.type].getText(t):null:null};dhtmlXRibbon.prototype.setItemText=function(n,t){var i=this._items[n];if(i)i.type=="tab"?this.tabs(i.id).setText(t):i.type=="block"?this._setBlockText(i,t):this.items[i.type]&&typeof this.items[i.type].setText=="function"&&this.items[i.type].setText(i,t);else return};dhtmlXRibbon.prototype.setItemOptionText=function(n,t,i){var r=this._items[n];r.type=="buttonSelect"&&this.items[r.type].setOptionText(r,t,i)};dhtmlXRibbon.prototype.getItemOptionText=function(n,t){var i=this._items[n];return i.type=="buttonSelect"?this.items[i.type].getOptionText(i,t):null};dhtmlXRibbon.prototype.setItemImage=function(n,t){var i=this._items[n];i!=null&&this.items[i.type]!=null&&typeof this.items[i.type].setImage=="function"&&this.items[i.type].setImage(i,t)};dhtmlXRibbon.prototype.setItemImageDis=function(n,t){var i=this._items[n];i!=null&&this.items[i.type]!=null&&typeof this.items[i.type].setImageDis=="function"&&this.items[i.type].setImageDis(i,t)};dhtmlXRibbon.prototype.getCombo=function(n){var t=this._items[n];return t!=null&&t.type=="buttonCombo"?t.combo:null},function(){var n=dhtmlXRibbon.prototype.items;n.buttonTwoState=n._extends(n.buttonTwoState,n.button);n.buttonSelect=n._extends(n.buttonSelect,n.buttonTwoState);n.buttonSegment=n._extends(n.buttonSegment,n.buttonTwoState)}();typeof dhtmlXCellObject!="undefined"&&(dhtmlXCellObject.prototype._createNode_ribbon=function(n,t,i,r,u){return typeof u!="undefined"?n=u:(n=document.createElement("DIV"),n.className="dhx_cell_ribbon_"+(this.conf.borders?"def":"no_borders"),n.appendChild(document.createElement("DIV"))),this.cell.insertBefore(n,this.cell.childNodes[this.conf.idx.cont]),this.conf.ofs_nodes.t.ribbon=!0,this._updateIdx(),this._adjustCont(this._idd),n},dhtmlXCellObject.prototype.attachRibbon=function(n){if(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null){this.callEvent("_onBeforeContentAttach",["ribbon"]);typeof n=="undefined"&&(n={});typeof n.skin=="undefined"&&(n.skin=this.conf.skin);n.parent=this._attachObject("ribbon").firstChild;this.dataNodes.ribbon=new dhtmlXRibbon(n);var t=this;return this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){t._adjustCont(t._idd)}),this._adjustCont(),n.parent=null,n=null,this.callEvent("_onContentAttach",[]),this.dataNodes.ribbon}},dhtmlXCellObject.prototype.detachRibbon=function(){this.dataNodes.ribbon!=null&&(typeof this.dataNodes.ribbon.unload=="function"&&this.dataNodes.ribbon.unload(),this.dataNodes.ribbon=null,delete this.dataNodes.ribbon,this._detachObject("ribbon"))},dhtmlXCellObject.prototype.showRibbon=function(){this._mtbShowHide("ribbon","")},dhtmlXCellObject.prototype.hideRibbon=function(){this._mtbShowHide("ribbon","none")},dhtmlXCellObject.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon});dhtmlXToolbarObject.prototype.addSpacer=function(n){var r=this.idPrefix+n,f,i,e,u,t;if(this._spacer!=null){if(this._spacer.idd==n)return;if(this._spacer==this.objPull[r].obj.parentNode){for(i=!0;i;)f=this._spacer.childNodes[0].idd,this.base.appendChild(this._spacer.childNodes[0]),(f==n||this._spacer.childNodes.length==0)&&(this.objPull[r].arw!=null&&this.base.appendChild(this.objPull[r].arw),i=!1);this._spacer.idd=n;this._fixSpacer();return}if(this.base==this.objPull[r].obj.parentNode){for(i=!0,e=this.objPull[r].arw!=null;i;)t=this.base.childNodes.length-1,e==!0&&this.base.childNodes[t]==this.objPull[r].arw&&(i=!1),this.base.childNodes[t].idd==n&&(i=!1),i&&(this._spacer.childNodes.length>0?this._spacer.insertBefore(this.base.childNodes[t],this._spacer.childNodes[0]):this._spacer.appendChild(this.base.childNodes[t]));this._spacer.idd=n;this._fixSpacer();return}}else{for(u=null,t=0;t<this.base.childNodes.length;t++)this.base.childNodes[t]==this.objPull[this.idPrefix+n].obj&&(u=t,this.objPull[this.idPrefix+n].arw!=null&&(u=t+1));if(u!=null){for(this._spacer=document.createElement("DIV"),this._spacer.className=this.conf.align=="right"?" dhxtoolbar_float_left":" dhxtoolbar_float_right",this._spacer.dir="ltr",this._spacer.idd=n;this.base.childNodes.length>u+1;)this._spacer.appendChild(this.base.childNodes[u+1]);this.cont.appendChild(this._spacer);this._fixSpacer()}}this.conf.skin=="dhx_terrace"&&this._improveTerraceSkin()};dhtmlXToolbarObject.prototype.removeSpacer=function(){if(this._spacer){while(this._spacer.childNodes.length>0)this.base.appendChild(this._spacer.childNodes[0]);this._spacer.parentNode.removeChild(this._spacer);this._spacer=null;this.conf.skin=="dhx_terrace"&&this._improveTerraceSkin()}};dhtmlXToolbarObject.prototype._fixSpacer=function(){if(typeof addEventListener=="undefined"&&this._spacer!=null){this._spacer.style.borderLeft="1px solid #a4bed4";var n=this._spacer;window.setTimeout(function(){n.style.borderLeft="0px solid #a4bed4";n=null},1)}};dhtmlXToolbarObject.prototype.getType=function(n){var r=this.getParentId(n),t,i;return r!=null?(t=null,i=this.objPull[this.idPrefix+r]._listOptions[n],i!=null&&(t=i.sep!=null?"buttonSelectSeparator":"buttonSelectButton"),t):this.objPull[this.idPrefix+n]==null?null:this.objPull[this.idPrefix+n].type};dhtmlXToolbarObject.prototype.getTypeExt=function(n){var t=this.getType(n);return t=="buttonSelectButton"||t=="buttonSelectSeparator"?t=="buttonSelectButton"?"button":"separator":null};dhtmlXToolbarObject.prototype.inArray=function(n,t){for(var i=0;i<n.length;i++)if(n[i]==t)return!0;return!1};dhtmlXToolbarObject.prototype.getParentId=function(n){var i=null,t,r;for(t in this.objPull)if(this.objPull[t]._listOptions)for(r in this.objPull[t]._listOptions)r==n&&(i=String(t).replace(this.idPrefix,""));return i};dhtmlXToolbarObject.prototype._addItem=function(n,t){typeof n.text=="string"&&(n.text=window.dhx4.trim(n.text),n.text.length==0&&(n.text=null));this._addItemToStorage(n,t);this.conf.skin=="dhx_terrace"&&this._improveTerraceSkin()};dhtmlXToolbarObject.prototype.addButton=function(n,t,i,r,u){this._addItem({id:n,type:"button",text:i,img:r,imgdis:u},t)};dhtmlXToolbarObject.prototype.addText=function(n,t,i){this._addItem({id:n,type:"text",text:i},t)};dhtmlXToolbarObject.prototype.addButtonSelect=function(n,t,i,r,u,f,e,o,s,h){for(var l,a=[],c=0;c<r.length;c++)l={},r[c]instanceof Array?(l.id=r[c][0],l.type=r[c][1]=="obj"?"button":"separator",l.text=r[c][2]||null,l.img=r[c][3]||null):r[c]instanceof Object&&r[c]!=null&&typeof r[c].id!="undefined"&&typeof r[c].type!="undefined"&&(l.id=r[c].id,l.type=r[c].type=="obj"?"button":"separator",l.text=r[c].text,l.img=r[c].img),a.push(l);this._addItem({id:n,type:"buttonSelect",text:i,img:u,imgdis:f,renderSelect:e,openAll:o,options:a,maxOpen:s,mode:h},t)};dhtmlXToolbarObject.prototype.addButtonTwoState=function(n,t,i,r,u){this._addItem({id:n,type:"buttonTwoState",img:r,imgdis:u,text:i},t)};dhtmlXToolbarObject.prototype.addSeparator=function(n,t){this._addItem({id:n,type:"separator"},t)};dhtmlXToolbarObject.prototype.addSlider=function(n,t,i,r,u,f,e,o,s){this._addItem({id:n,type:"slider",length:i,valueMin:r,valueMax:u,valueNow:f,textMin:e,textMax:o,toolTip:s},t)};dhtmlXToolbarObject.prototype.addInput=function(n,t,i,r){this._addItem({id:n,type:"buttonInput",value:i,width:r},t)};dhtmlXToolbarObject.prototype.forEachItem=function(n){for(var t in this.objPull)this.inArray(this.rootTypes,this.objPull[t].type)&&n(this.objPull[t].id.replace(this.idPrefix,""))},function(){for(var t,r,i="isVisible,enableItem,disableItem,isEnabled,setItemText,getItemText,setItemToolTip,getItemToolTip,getInput,setItemImage,setItemImageDis,clearItemImage,clearItemImageDis,setItemState,getItemState,setItemToolTipTemplate,getItemToolTipTemplate,setValue,getValue,setMinValue,getMinValue,setMaxValue,getMaxValue,setWidth,getWidth,setMaxOpen".split(","),u=[!1,"","",!1,"","","","","","","","","",!1,"","","",null,"",[null,null],"",[null,null],"",null],f=function(n,t){return function(i,r,u){return i=this.idPrefix+i,this.objPull[i][n]!=null?this.objPull[i][n].call(this.objPull[i],r,u):t}},n=0;n<i.length;n++)t=i[n],r=u[n],dhtmlXToolbarObject.prototype[t]=f(t,r)}();dhtmlXToolbarObject.prototype.showItem=function(n){n=this.idPrefix+n;this.objPull[n]!=null&&this.objPull[n].showItem!=null&&(this.objPull[n].showItem(),this.conf.skin=="dhx_terrace"&&this._improveTerraceSkin())};dhtmlXToolbarObject.prototype.hideItem=function(n){n=this.idPrefix+n;this.objPull[n]!=null&&this.objPull[n].hideItem!=null&&(this.objPull[n].hideItem(),this.conf.skin=="dhx_terrace"&&this._improveTerraceSkin())};dhtmlXToolbarObject.prototype.getPosition=function(n){return this._getPosition(n)};dhtmlXToolbarObject.prototype._getPosition=function(n){var i,r,t;if(this.objPull[this.idPrefix+n]==null)return null;for(i=null,r=0,t=0;t<this.base.childNodes.length;t++)this.base.childNodes[t].idd!=null&&(this.base.childNodes[t].idd==n&&(i=r),r++);if(!i&&this._spacer!=null)for(t=0;t<this._spacer.childNodes.length;t++)this._spacer.childNodes[t].idd!=null&&(this._spacer.childNodes[t].idd==n&&(i=r),r++);return i};dhtmlXToolbarObject.prototype.setPosition=function(n,t){this._setPosition(n,t)};dhtmlXToolbarObject.prototype._setPosition=function(n,t){var r,i,u;this.objPull[this.idPrefix+n]!=null&&(r=null,this._spacer&&(r=this._spacer.idd,this.removeSpacer()),isNaN(t)&&(t=this.base.childNodes.length),t<0&&(t=0),i=this.objPull[this.idPrefix+n],this.base.removeChild(i.obj),i.arw&&this.base.removeChild(i.arw),u=this._getIdByPosition(t,!0),u[0]==null?(this.base.appendChild(i.obj),i.arw&&this.base.appendChild(i.arw)):(this.base.insertBefore(i.obj,this.base.childNodes[u[1]]),i.arw&&this.base.insertBefore(i.arw,this.base.childNodes[u[1]+1])),r!=null&&this.addSpacer(r))};dhtmlXToolbarObject.prototype._getIdByPosition=function(n,t){for(var i=null,f=0,r=0,u=0;u<this.base.childNodes.length;u++)this.base.childNodes[u].idd!=null&&i==null&&f++==n&&(i=this.base.childNodes[u].idd),i==null&&r++;return r=i==null?null:r,t==!0?[i,r]:i};dhtmlXToolbarObject.prototype.removeItem=function(n){this._removeItem(n);this.conf.skin=="dhx_terrace"&&this._improveTerraceSkin()};dhtmlXToolbarObject.prototype._removeItem=function(n){var r=this.getType(n),t,i;if(n=this.idPrefix+n,t=this.objPull[n],{button:1,buttonTwoState:1}[r]==1){window.dhx4.isIE&&(t.obj.onselectstart=null);this._evs.clear.apply(t,[t.obj.evs,t.obj]);for(i in t.obj)typeof t.obj[i]=="function"&&(t.obj[i]=null);t.obj.parentNode.removeChild(t.obj);t.obj=null;for(i in t)t[i]=null}if(r=="buttonSelect"){for(i in t._listOptions)this.removeListOption(n,i);t._listOptions=null;t.polygon._ie6cover&&(document.body.removeChild(t.polygon._ie6cover),t.polygon._ie6cover=null);t.p_tbl.removeChild(t.p_tbody);t.polygon.removeChild(t.p_tbl);t.polygon.onselectstart=null;document.body.removeChild(t.polygon);window.dhx4.isIE&&(t.obj.onselectstart=null,t.arw.onselectstart=null);this._evs.clear.apply(t,[t.obj.evs,t.obj]);this._evs.clear.apply(t,[t.arw.evs,t.arw]);for(i in t.obj)typeof t.obj[i]=="function"&&(t.obj[i]=null);t.obj.parentNode.removeChild(t.obj);t.obj=null;for(i in t.arw)typeof t.arw[i]=="function"&&(t.arw[i]=null);t.arw.parentNode.removeChild(t.arw);t.arw=null;for(i in t)t[i]=null}if(r=="buttonInput"&&(t.obj.childNodes[0].onkeydown=null,t.obj.removeChild(t.obj.childNodes[0]),t.obj.w=null,t.obj.idd=null,t.obj.parentNode.removeChild(t.obj),t.obj=null,t.id=null,t.type=null,t.enableItem=null,t.disableItem=null,t.isEnabled=null,t.showItem=null,t.hideItem=null,t.isVisible=null,t.setItemToolTip=null,t.getItemToolTip=null,t.setWidth=null,t.getWidth=null,t.setValue=null,t.getValue=null,t.setItemText=null,t.getItemText=null),r=="slider"){for(window.dhx4.isIPad?(document.removeEventListener("touchmove",pen._doOnMouseMoveStart,!1),document.removeEventListener("touchend",pen._doOnMouseMoveEnd,!1)):typeof addEventListener=="function"?(window.removeEventListener("mousemove",t.pen._doOnMouseMoveStart,!1),window.removeEventListener("mouseup",t.pen._doOnMouseMoveEnd,!1)):(document.body.detachEvent("onmousemove",t.pen._doOnMouseMoveStart),document.body.detachEvent("onmouseup",t.pen._doOnMouseMoveEnd)),t.pen.allowMove=null,t.pen.initXY=null,t.pen.maxX=null,t.pen.minX=null,t.pen.nowX=null,t.pen.newNowX=null,t.pen.valueMax=null,t.pen.valueMin=null,t.pen.valueNow=null,t.pen._definePos=null,t.pen._detectLimits=null,t.pen._doOnMouseMoveStart=null,t.pen._doOnMouseMoveEnd=null,t.pen.onmousedown=null,t.obj.removeChild(t.pen),t.pen=null,t.label.tip=null,document.body.removeChild(t.label),t.label=null,t.obj.onselectstart=null,t.obj.idd=null;t.obj.childNodes.length>0;)t.obj.removeChild(t.obj.childNodes[0]);t.obj.parentNode.removeChild(t.obj);t.obj=null;t.id=null;t.type=null;t.state=null;t.enableItem=null;t.disableItem=null;t.isEnabled=null;t.setItemToolTipTemplate=null;t.getItemToolTipTemplate=null;t.setMaxValue=null;t.setMinValue=null;t.getMaxValue=null;t.getMinValue=null;t.setValue=null;t.getValue=null;t.showItem=null;t.hideItem=null;t.isVisible=null}r=="separator"&&(t.obj.onselectstart=null,t.obj.idd=null,t.obj.parentNode.removeChild(t.obj),t.obj=null,t.id=null,t.type=null,t.showItem=null,t.hideItem=null,t.isVisible=null);r=="text"&&(t.obj.onselectstart=null,t.obj.idd=null,t.obj.parentNode.removeChild(t.obj),t.obj=null,t.id=null,t.type=null,t.showItem=null,t.hideItem=null,t.isVisible=null,t.setWidth=null,t.setItemText=null,t.getItemText=null);r=null;t=null;this.objPull[n]=null;delete this.objPull[n]},function(){for(var t,i="addListOption,removeListOption,showListOption,hideListOption,isListOptionVisible,enableListOption,disableListOption,isListOptionEnabled,setListOptionPosition,getListOptionPosition,setListOptionText,getListOptionText,setListOptionToolTip,getListOptionToolTip,setListOptionImage,getListOptionImage,clearListOptionImage,forEachListOption,getAllListOptions,setListOptionSelected,getListOptionSelected".split(","),r=function(n){return function(t,i,r,u,f,e){if(t=this.idPrefix+t,this.objPull[t]!=null)return this.objPull[t].type!="buttonSelect"?void 0:this.objPull[t][n].call(this.objPull[t],i,r,u,f,e)}},n=0;n<i.length;n++)t=i[n],dhtmlXToolbarObject.prototype[t]=r(t)}();dhtmlXToolbarObject.prototype._rtlParseBtn=function(n,t){return n+t};dhtmlXToolbarObject.prototype._separatorObject=function(n,t,i){return this.id=n.idPrefix+t,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_sep",this.obj.style.display=i.hidden!=null?"none":"",this.obj.idd=String(t),this.obj.title=i.title||"",this.obj.onselectstart=function(n){n=n||event;n.preventDefault?n.preventDefault():n.returnValue=!1},this.obj.ontouchstart=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,!1},n.base.appendChild(this.obj),this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return this.obj.style.display==""},this};dhtmlXToolbarObject.prototype._textObject=function(n,t,i){return this.id=n.idPrefix+t,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_text",this.obj.style.display=i.hidden!=null?"none":"",this.obj.idd=String(t),this.obj.title=i.title||"",this.obj.onselectstart=function(n){n=n||event;n.preventDefault?n.preventDefault():n.returnValue=!1},this.obj.ontouchstart=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,!1},this.obj.innerHTML=i.text||"",n.base.appendChild(this.obj),this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return this.obj.style.display==""},this.setItemText=function(n){this.obj.innerHTML=n},this.getItemText=function(){return this.obj.innerHTML},this.setWidth=function(n){this.obj.style.width=n+"px"},this.setItemToolTip=function(n){this.obj.title=n},this.getItemToolTip=function(){return this.obj.title},this};dhtmlXToolbarObject.prototype._buttonObject=function(n,t,i){var u,r;return this.id=n.idPrefix+t,this.state=i.enabled!=null?!1:!0,this.imgEn=i.img||"",this.imgDis=i.imgdis||"",this.img=this.state?this.imgEn!=""?this.imgEn:"":this.imgDis!=""?this.imgDis:"",this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis"),this.obj.style.display=i.hidden!=null?"none":"",this.obj.allowClick=!1,this.obj.extAction=i.action||null,this.obj.renderAs=this.obj.className,this.obj.idd=String(t),this.obj.title=i.title||"",this.obj.pressed=!1,u=n.conf.icons_css?"<i class='"+n.conf.icons_path+this.img+"'><\/i>":"<img src='"+n.conf.icons_path+this.img+"'>",this.obj.innerHTML=n._rtlParseBtn(this.img!=""?u:"",i.text!=null?"<div class='dhxtoolbar_text'>"+i.text+"<\/div>":""),n.base.appendChild(this.obj),window.dhx4.isIE&&(this.obj.onselectstart=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1}),r=this,this._doOnMouseOver=function(n){(n=n||event,r.state!=!1&&r.obj.pressed!=!0&&r.obj.over!=!0)&&(r.obj.className.match(/dhxtoolbar_btn_over/gi)==null&&(r.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over"),r.obj.over=!0)},this._doOnMouseOut=function(n){(n=n||event,r.state!=!1)&&(r.obj.className.match(/dhxtoolbar_btn_over/gi)!=null&&(r.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def"),r.obj.over=r.obj.pressed=!1)},this._doOnMouseDown=function(t){if(t=t||event,t.type=="touchstart"){if(t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,n.conf.touch_id!=null&&n.conf.touch_id!=r.id)return;n.conf.touch_id=r.id}r.state!=!1&&(r.obj.className.match(/dhxtoolbar_btn_pres/gi)==null&&(r.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres"),r.obj.pressed=!0)},this._doOnMouseUp=function(t){(t=t||event,t.type=="touchend"&&(t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,n.conf.touch_id==r.id&&(n.conf.touch_id=null)),r.state!=!1&&r.obj.pressed!=!1)&&(r.obj.className.match(/dhxtoolbar_btn_pres/gi)!=null&&(r.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(r.obj.over?"over":"def")),r.obj.pressed=!1,r.obj.extAction&&window.setTimeout(function(){try{r&&r.obj&&window[r.obj.extAction](r.id)}catch(n){}},1),n.callEvent("onClick",[r.obj.idd.replace(n.idPrefix,"")]))},this.obj.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",mouseup:"_doOnMouseUp",touchstart:"_doOnMouseDown",touchend:"_doOnMouseUp"},n._evs.add.apply(this,[this.obj.evs,this.obj]),this.enableItem=function(){n._enableItem(this)},this.disableItem=function(){n._disableItem(this)},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return this.obj.style.display==""},this.setItemText=function(t){n._setItemText(this,t)},this.getItemText=function(){return n._getItemText(this)},this.setItemImage=function(t){n._setItemImage(this,t,!0)},this.clearItemImage=function(){n._clearItemImage(this,!0)},this.setItemImageDis=function(t){n._setItemImage(this,t,!1)},this.clearItemImageDis=function(){n._clearItemImage(this,!1)},this.setItemToolTip=function(n){this.obj.title=n},this.getItemToolTip=function(){return this.obj.title},this};dhtmlXToolbarObject.prototype._buttonSelectObject=function(n,t,i){var e,r,u,f;if(this.id=n.idPrefix+t,this.state=i.enabled!=null?i.enabled=="true"?!0:!1:!0,this.imgEn=i.img||"",this.imgDis=i.imgdis||"",this.img=this.state?this.imgEn!=""?this.imgEn:"":this.imgDis!=""?this.imgDis:"",this.mode=i.mode||"button",this.mode=="select"?(this.openAll=!0,this.renderSelect=!1,i.text&&i.text.length!=0||(i.text="&nbsp;")):(this.openAll=window.dhx4.s2b(i.openAll)==!0,this.renderSelect=i.renderSelect==null?!0:window.dhx4.s2b(i.renderSelect)),this.maxOpen=isNaN(i.maxOpen?i.maxOpen:"")?null:i.maxOpen,this._maxOpenTest=function(){var t,i;isNaN(this.maxOpen)||n._sbw||(t=document.createElement("DIV"),t.className="dhxtoolbar_maxopen_test",document.body.appendChild(t),i=document.createElement("DIV"),i.className="dhxtoolbar_maxopen_test2",t.appendChild(i),n._sbw=t.offsetWidth-i.offsetWidth,t.removeChild(i),i=null,document.body.removeChild(t),t=null)},this._maxOpenTest(),this.obj=document.createElement("DIV"),this.obj.allowClick=!1,this.obj.extAction=i.action||null,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis"),this.obj.style.display=i.hidden!=null?"none":"",this.obj.renderAs=this.obj.className,this.obj.onselectstart=function(n){n=n||event;n.preventDefault?n.preventDefault():n.returnValue=!1},this.obj.idd=String(t),this.obj.title=i.title||"",this.obj.pressed=!1,this.callEvent=!1,e=n.conf.icons_css?"<i class='"+n.conf.icons_path+this.img+"'><\/i>":"<img src='"+n.conf.icons_path+this.img+"'>",this.obj.innerHTML=n._rtlParseBtn(this.img!=""?e:"",i.text!=null?"<div class='dhxtoolbar_text'>"+i.text+"<\/div>":""),n.base.appendChild(this.obj),this.arw=document.createElement("DIV"),this.arw.className="dhx_toolbar_arw dhxtoolbar_btn_"+(this.state?"def":"dis"),this.arw.style.display=this.obj.style.display,this.arw.innerHTML="<div class='arwimg'>&nbsp;<\/div>",this.arw.title=this.obj.title,this.arw.onselectstart=function(n){n=n||event;n.preventDefault?n.preventDefault():n.returnValue=!1},n.base.appendChild(this.arw),r=this,window.dhx4.isIE&&(this.arw.onselectstart=this.obj.onselectstart=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1}),this._doOnMouseOver=function(t){(t=t||event,r.state!=!1&&r.obj.over!=!0&&n.anyUsed!=r.obj.idd)&&(r.obj.className.match(/dhxtoolbar_btn_over/gi)==null&&(r.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over",r.arw.className="dhx_toolbar_arw dhxtoolbar_btn_over"),r.obj.over=!0)},this._doOnMouseOut=function(t){(t=t||event,r.state!=!1&&n.anyUsed!=r.obj.idd&&n.anyUsed!=r.obj.idd)&&(r.obj.className.match(/dhxtoolbar_btn_over/gi)!=null&&(r.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",r.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def"),r.obj.over=r.obj.pressed=!1)},this._doOnMouseDown=function(t){if(t=t||event,t.type=="touchstart"){if(t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,n.conf.touch_id!=null&&n.conf.touch_id!=r.id)return;n.conf.touch_id=r.id}if(r.state!=!1)if(n.anyUsed==r.obj.idd)r.obj.over==!0?(r.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over",r.arw.className="dhx_toolbar_arw dhxtoolbar_btn_over"):(r.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",r.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def"),r._hidePoly(!0),n.anyUsed=null;else{var i=t.target||t.srcElement;r.openAll==!0||i==r.arw||i.parentNode==r.arw?(t.type=="touchstart"&&(r.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over"),r.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres",r.arw._skip=!0,r._showPoly(!0),n.anyUsed=r.obj.idd):(r.obj.className.match(/dhxtoolbar_btn_pres/gi)==null&&(r.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres",r.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres"),r.obj.pressed=!0)}},this._doOnMouseUp=function(i){if(i=i||event,i.type=="touchend"){if(r.polygon.style.display=="")return;i.preventDefault&&i.preventDefault();i.cancelBubble=!0;n.conf.touch_id==r.id&&(n.conf.touch_id=null)}if(r.state!=!1&&r.obj.pressed!=!1){if(r.obj.className.match(/dhxtoolbar_btn_pres/gi)!=null&&(r.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(r.obj.over?"over":"def"),r.arw.className="dhx_toolbar_arw dhxtoolbar_btn_"+(r.obj.over?"over":"def")),this.extAction){var u=this;window.setTimeout(function(){try{window[u.extAction](t)}catch(n){}u=null},1)}n.callEvent("onClick",[r.obj.idd.replace(n.idPrefix,"")])}},this.arw.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",touchstart:"_doOnMouseDown"},n._evs.add.apply(this,[this.arw.evs,this.arw]),this.obj.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",mouseup:"_doOnMouseUp",touchstart:"_doOnMouseDown",touchend:"_doOnMouseUp"},n._evs.add.apply(this,[this.obj.evs,this.obj]),this._showPoly=function(t){var i,r,u,f;if(n.anyUsed!=null&&n.objPull[n.idPrefix+n.anyUsed].type=="buttonSelect"&&(i=n.objPull[n.idPrefix+n.anyUsed],i.polygon.style.display!="none"&&(i.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",i.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def",i.obj.over=!1,window.dhx4.zim.clear(i.polygon._idd),i.polygon.style.display="none",i.polygon._ie6cover&&(i.polygon._ie6cover.style.display="none"),n.conf.skin=="dhx_terrace"&&n._improveTerraceButtonSelect(i.id,!0),n.callEvent("onButtonSelectHide",[i.obj.idd]))),this.polygon.style.top="0px",this.polygon.style.visibility="hidden",this.polygon.style.zIndex=window.dhx4.zim.reserve(this.polygon._idd),this.polygon.style.display="",n.conf.skin=="dhx_terrace"&&n._improveTerraceButtonSelect(this.id,!1),this._fixMaxOpenHeight(this.maxOpen||null),n._autoDetectVisibleArea(),r=window.dhx4.absTop(this.obj)+this.obj.offsetHeight+n.conf.sel_ofs_y,u=this.polygon.offsetHeight,r+u>n.tY2&&(f=this.maxOpen!=null?Math.floor((n.tY2-r)/22):0,f>=1?this._fixMaxOpenHeight(f):(r=window.dhx4.absTop(this.obj)-u-n.conf.sel_ofs_y,r<0&&(r=0))),this.polygon.style.top=r+"px",n.rtl)this.polygon.style.left=window.dhx4.absLeft(this.obj)+this.obj.offsetWidth-this.polygon.offsetWidth+n.conf.sel_ofs_x+"px";else{var o=document.body.scrollLeft,s=o+(window.innerWidth||document.body.clientWidth),e=window.dhx4.absLeft(this.obj)+n.conf.sel_ofs_x;e+this.polygon.offsetWidth>s&&(e=window.dhx4.absLeft(this.arw)+this.arw.offsetWidth-this.polygon.offsetWidth);this.polygon.style.left=Math.max(e,5)+"px"}this.polygon.style.visibility="visible";this.polygon._ie6cover&&(this.polygon._ie6cover.style.left=this.polygon.style.left,this.polygon._ie6cover.style.top=this.polygon.style.top,this.polygon._ie6cover.style.width=this.polygon.offsetWidth+"px",this.polygon._ie6cover.style.height=this.polygon.offsetHeight+"px",this.polygon._ie6cover.style.display="");t&&n.callEvent("onButtonSelectShow",[this.obj.idd])},this._hidePoly=function(t){window.dhx4.zim.clear(this.polygon._idd);this.polygon.style.display="none";this.polygon._ie6cover&&(this.polygon._ie6cover.style.display="none");n.conf.skin=="dhx_terrace"&&n._improveTerraceButtonSelect(this.id,!0);t&&n.callEvent("onButtonSelectHide",[this.obj.idd]);n.conf.touch_id=null},this.obj.iddPrefix=n.idPrefix,this._listOptions={},this._fixMaxOpenHeight=function(t){var u="auto",f=!1,i,e;if(t!==null){i=0;for(e in this._listOptions)i++;i>t?(this._ph=22*t,u=this._ph+"px"):f=!0}this.polygon.style.width="auto";this.polygon.style.height="auto";f||r.maxOpen==null||(this.polygon.style.width=this.p_tbl.offsetWidth+n._sbw+"px",this.polygon.style.height=u)},this._separatorButtonSelectObject=function(n,t,i){return this.obj={},this.obj.tr=document.createElement("TR"),this.obj.tr.className="tr_sep",this.obj.tr.onselectstart=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1},this.obj.td=document.createElement("TD"),this.obj.td.colSpan="2",this.obj.td.className="td_btn_sep",this.obj.td.onselectstart=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1},isNaN(i)?i=r.p_tbody.childNodes.length+1:i<1&&(i=1),i>r.p_tbody.childNodes.length?r.p_tbody.appendChild(this.obj.tr):r.p_tbody.insertBefore(this.obj.tr,r.p_tbody.childNodes[i-1]),this.obj.tr.appendChild(this.obj.td),this.obj.sep=document.createElement("DIV"),this.obj.sep.className="btn_sep",this.obj.sep.onselectstart=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1},this.obj.td.appendChild(this.obj.sep),r._listOptions[n]=this.obj,this},this._buttonButtonSelectObject=function(t,i,u){var f=!0,e;return typeof i.enabled!="undefined"?f=window.dhx4.s2b(i.enabled):typeof i.disabled!="undefined"&&(f=window.dhx4.s2b(i.disabled)),this.obj={},this.obj.tr=document.createElement("TR"),this.obj.tr.en=f,this.obj.tr.extAction=i.action||null,this.obj.tr._selected=i.selected!=null,this.obj.tr.className="tr_btn"+(this.obj.tr.en?this.obj.tr._selected&&r.renderSelect?" tr_btn_selected":"":" tr_btn_disabled"),this.obj.tr.onselectstart=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1},this.obj.tr.idd=String(t),isNaN(u)?u=r.p_tbody.childNodes.length+1:u<1&&(u=1),u>r.p_tbody.childNodes.length?r.p_tbody.appendChild(this.obj.tr):r.p_tbody.insertBefore(this.obj.tr,r.p_tbody.childNodes[u-1]),this.obj.td_a=document.createElement("TD"),this.obj.td_a.className="td_btn_img",this.obj.td_a.onselectstart=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1},this.obj.td_b=document.createElement("TD"),this.obj.td_b.className="td_btn_txt",this.obj.td_b.onselectstart=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1},n.rtl?(this.obj.tr.appendChild(this.obj.td_b),this.obj.tr.appendChild(this.obj.td_a)):(this.obj.tr.appendChild(this.obj.td_a),this.obj.tr.appendChild(this.obj.td_b)),i.img!=null?(this.obj.td_a.innerHTML=n.conf.icons_css==!0?"<i class='"+n.conf.icons_path+i.img+"'><\/i>":"<img class='btn_sel_img' src='"+n.conf.icons_path+i.img+"' border='0'>",this.obj.tr._img=i.img):this.obj.td_a.innerHTML="&nbsp;",e=i.text!=null?i.text:i.itemText||"",this.obj.td_b.innerHTML="<div class='btn_sel_text'>"+e+"<\/div>",this.obj.tr.onmouseover=function(n){(n=n||event,n.type.match(/touch/)==null)&&(!this.en||this._selected&&r.renderSelect||(this.className="tr_btn tr_btn_over"))},this.obj.tr.onmouseout=function(n){(n=n||event,n.type.match(/touch/)==null)&&this.en&&(this._selected&&r.renderSelect?String(this.className).search("tr_btn_selected")==-1&&(this.className="tr_btn tr_btn_selected"):this.className="tr_btn")},this.obj.tr.ontouchstart=this.obj.tr.onmousedown=function(n){n=n||event;this._etype==null&&(this._etype=n.type)},this.obj.tr.onclick=function(t){var i,u;if(t=t||event,t.cancelBubble=!0,this.en){if(r.setListOptionSelected(this.idd.replace(n.idPrefix,"")),r.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",r.arw.className="dhx_toolbar_arw dhxtoolbar_btn_def",r.obj.over=!1,this._etype!=null&&this._etype.match(/touch/)==null?(window.dhx4.zim.clear(r.polygon._idd),r.polygon.style.display="none",r.polygon._ie6cover&&(r.polygon._ie6cover.style.display="none")):(i=r.polygon,window.setTimeout(function(){window.dhx4.zim.clear(i._idd);i.style.display="none";i=null},500)),this._etype=null,n.conf.skin=="dhx_terrace"&&n._improveTerraceButtonSelect(r.id,!0),n.anyUsed=null,n.conf.touch_id=null,n.callEvent("onButtonSelectHide",[r.obj.idd]),u=this.idd.replace(n.idPrefix,""),this.extAction)try{window[this.extAction](u)}catch(t){}n.callEvent("onClick",[u])}},r._listOptions[t]=this.obj,this},this.polygon=document.createElement("DIV"),this.polygon.dir="ltr",this.polygon.style.display="none",this.polygon.className="dhx_toolbar_poly_"+n.conf.skin+" dhxtoolbar_icons_"+n.conf.iconSize+n.conf.cssShadow,this.polygon.onselectstart=function(n){n=n||event;n.preventDefault?n.preventDefault():n.returnValue=!1},this.polygon.onmousedown=function(n){n=n||event;n.cancelBubble=!0},this.polygon.style.overflowY="auto",this.polygon._idd=window.dhx4.newId(),this.polygon.ontouchstart=function(n){n=n||event;n.cancelBubble=!0},this.polygon.ontouchend=function(n){n=n||event;n.cancelBubble=!0},this.p_tbl=document.createElement("TABLE"),this.p_tbl.className="buttons_cont",this.p_tbl.cellSpacing="0",this.p_tbl.cellPadding="0",this.p_tbl.border="0",this.polygon.appendChild(this.p_tbl),this.p_tbody=document.createElement("TBODY"),this.p_tbl.appendChild(this.p_tbody),i.options!=null)for(u=0;u<i.options.length;u++)f="_"+(i.options[u].type||"")+"ButtonSelectObject",i.options[u].id==null&&(i.options[u].id=n._genStr(24)),typeof this[f]=="function"&&new this[f](i.options[u].id,i.options[u]);return document.body.appendChild(this.polygon),window.dhx4.isIE6&&(this.polygon._ie6cover=document.createElement("IFRAME"),this.polygon._ie6cover.frameBorder=0,this.polygon._ie6cover.style.position="absolute",this.polygon._ie6cover.style.border="none",this.polygon._ie6cover.style.backgroundColor="#000000",this.polygon._ie6cover.style.filter="alpha(opacity=100)",this.polygon._ie6cover.style.display="none",this.polygon._ie6cover.setAttribute("src","javascript:false;"),document.body.appendChild(this.polygon._ie6cover)),this.setWidth=function(n){this.obj.style.width=n-this.arw.offsetWidth+"px";this.polygon.style.width=this.obj.offsetWidth+this.arw.offsetWidth-2+"px";this.p_tbl.style.width=this.polygon.style.width},this.enableItem=function(){n._enableItem(this)},this.disableItem=function(){n._disableItem(this)},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display="";this.arw.style.display=""},this.hideItem=function(){this.obj.style.display="none";this.arw.style.display="none"},this.isVisible=function(){return this.obj.style.display==""},this.setItemText=function(t){n._setItemText(this,t)},this.getItemText=function(){return n._getItemText(this)},this.setItemImage=function(t){n._setItemImage(this,t,!0)},this.clearItemImage=function(){n._clearItemImage(this,!0)},this.setItemImageDis=function(t){n._setItemImage(this,t,!1)},this.clearItemImageDis=function(){n._clearItemImage(this,!1)},this.setItemToolTip=function(n){this.obj.title=n;this.arw.title=n},this.getItemToolTip=function(){return this.obj.title},this.addListOption=function(n,t,i,r,u){if(i=="button"||i=="separator"){var f={id:n,type:i,text:r,img:u};new this["_"+i+"ButtonSelectObject"](n,f,t)}},this.removeListOption=function(n){if(this._isListButton(n,!0)){var t=this._listOptions[n];if(t.td_a!=null&&t.td_b!=null){for(t.td_a.onselectstart=null,t.td_b.onselectstart=null;t.td_a.childNodes.length>0;)t.td_a.removeChild(t.td_a.childNodes[0]);while(t.td_b.childNodes.length>0)t.td_b.removeChild(t.td_b.childNodes[0]);for(t.tr.onselectstart=null,t.tr.onmouseover=null,t.tr.onmouseout=null,t.tr.onclick=null,t.tr.ontouchstart=null,t.tr.onmousedown=null;t.tr.childNodes.length>0;)t.tr.removeChild(t.tr.childNodes[0]);t.tr.parentNode.removeChild(t.tr);t.td_a=null;t.td_b=null;t.tr=null}else{for(t.sep.onselectstart=null,t.td.onselectstart=null,t.tr.onselectstart=null;t.td.childNodes.length>0;)t.td.removeChild(t.td.childNodes[0]);while(t.tr.childNodes.length>0)t.tr.removeChild(t.tr.childNodes[0]);t.tr.parentNode.removeChild(t.tr);t.sep=null;t.td=null;t.tr=null}t=null;this._listOptions[n]=null;try{delete this._listOptions[n]}catch(i){}}},this.showListOption=function(n){this._isListButton(n,!0)&&(this._listOptions[n].tr.style.display="")},this.hideListOption=function(n){this._isListButton(n,!0)&&(this._listOptions[n].tr.style.display="none")},this.isListOptionVisible=function(n){if(this._isListButton(n,!0))return this._listOptions[n].tr.style.display!="none"},this.enableListOption=function(t){this._isListButton(t)&&(this._listOptions[t].tr.en=!0,this._listOptions[t].tr.className="tr_btn"+(this._listOptions[t].tr._selected&&n.renderSelect?" tr_btn_selected":""))},this.disableListOption=function(n){this._isListButton(n)&&(this._listOptions[n].tr.en=!1,this._listOptions[n].tr.className="tr_btn tr_btn_disabled")},this.isListOptionEnabled=function(n){if(this._isListButton(n))return this._listOptions[n].tr.en},this.setListOptionPosition=function(n,t){if(this._listOptions[n]&&this.getListOptionPosition(n)!=t&&!isNaN(t)){t<1&&(t=1);var i=this._listOptions[n].tr;this.p_tbody.removeChild(i);t>this.p_tbody.childNodes.length?this.p_tbody.appendChild(i):this.p_tbody.insertBefore(i,this.p_tbody.childNodes[t-1]);i=null}},this.getListOptionPosition=function(n){var i=-1,t;if(!this._listOptions[n])return i;for(t=0;t<this.p_tbody.childNodes.length;t++)this.p_tbody.childNodes[t]==this._listOptions[n].tr&&(i=t+1);return i},this.setListOptionImage=function(t,i){if(this._isListButton(t)){var r=this._listOptions[t].tr.childNodes[n.rtl?1:0];r.innerHTML=n.conf.icons_css?"<i class='"+n.conf.icons_path+i+"'><\/i>":"<img src='"+n.conf.icons_path+i+"' class='btn_sel_img'>";r=null}},this.getListOptionImage=function(t){if(this._isListButton(t)){var i=this._listOptions[t].tr.childNodes[n.rtl?1:0],r=null;return i.childNodes.length>0&&(r=i.childNodes[0][n.conf.icons_css?"className":"src"]),i=null,r}},this.clearListOptionImage=function(t){if(this._isListButton(t)){for(var i=this._listOptions[t].tr.childNodes[n.rtl?1:0];i.childNodes.length>0;)i.removeChild(i.childNodes[0]);i.innerHTML="&nbsp;";i=null}},this.setListOptionText=function(t,i){this._isListButton(t)&&(this._listOptions[t].tr.childNodes[n.rtl?0:1].childNodes[0].innerHTML=i)},this.getListOptionText=function(t){if(this._isListButton(t))return this._listOptions[t].tr.childNodes[n.rtl?0:1].childNodes[0].innerHTML},this.setListOptionToolTip=function(n,t){this._isListButton(n)&&(this._listOptions[n].tr.title=t)},this.getListOptionToolTip=function(n){if(this._isListButton(n))return this._listOptions[n].tr.title},this.forEachListOption=function(n){for(var t in this._listOptions)n(t)},this.getAllListOptions=function(){var n=[];for(var t in this._listOptions)n[n.length]=t;return n},this.setListOptionSelected=function(n){var i,t;for(i in this._listOptions)t=this._listOptions[i],t.td_a!=null&&t.td_b!=null&&t.tr.en&&(i==n?(t.tr._selected=!0,t.tr.className="tr_btn"+(this.renderSelect?" tr_btn_selected":""),this.mode=="select"&&(t.tr._img?this.setItemImage(t.tr._img):this.clearItemImage(),this.setItemText(this.getListOptionText(n)))):(t.tr._selected=!1,t.tr.className="tr_btn")),t=null},this.getListOptionSelected=function(){var n=null;for(var t in this._listOptions)this._listOptions[t].tr._selected==!0&&(n=t);return n},this._isListButton=function(n,t){return this._listOptions[n]==null?!1:!t&&this._listOptions[n].tr.className=="tr_sep"?!1:!0},this.setMaxOpen=function(n){if(this._ph=null,typeof n=="number"){this.maxOpen=n;this._maxOpenTest();return}this.maxOpen=null},i.width&&this.setWidth(i.width),this.mode=="select"&&typeof i.selected!="undefined"&&this.setListOptionSelected(i.selected),this};dhtmlXToolbarObject.prototype._buttonInputObject=function(n,t,i){this.id=n.idPrefix+t;this.obj=document.createElement("DIV");this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def";this.obj.style.display=i.hidden!=null?"none":"";this.obj.idd=String(t);this.obj.w=i.width!=null?i.width:100;this.obj.title=i.title!=null?i.title:"";this.obj.innerHTML="<input class='dhxtoolbar_input' type='text' style='width:"+this.obj.w+"px;'"+(i.value!=null?" value='"+i.value+"'":"")+">";var r=n,u=this;return this.obj.childNodes[0].onkeydown=function(n){n=n||event;n.keyCode==13&&r.callEvent("onEnter",[u.obj.idd,this.value])},n.base.appendChild(this.obj),this.enableItem=function(){this.obj.childNodes[0].disabled=!1},this.disableItem=function(){this.obj.childNodes[0].disabled=!0},this.isEnabled=function(){return!this.obj.childNodes[0].disabled},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return this.obj.style.display!="none"},this.setValue=function(n){this.obj.childNodes[0].value=n},this.getValue=function(){return this.obj.childNodes[0].value},this.setWidth=function(n){this.obj.w=n;this.obj.childNodes[0].style.width=this.obj.w+"px"},this.getWidth=function(){return this.obj.w},this.setItemToolTip=function(n){this.obj.title=n},this.getItemToolTip=function(){return this.obj.title},this.getInput=function(){return this.obj.firstChild},typeof i.enabled!="undefined"&&window.dhx4.s2b(i.enabled)==!1&&this.disableItem(),this};dhtmlXToolbarObject.prototype._buttonTwoStateObject=function(n,t,i){var u,r;return this.id=n.idPrefix+t,this.state=i.enabled!=null?!1:!0,this.imgEn=i.img!=null?i.img:"",this.imgDis=i.imgdis!=null?i.imgdis:"",this.img=this.state?this.imgEn!=""?this.imgEn:"":this.imgDis!=""?this.imgDis:"",this.obj=document.createElement("DIV"),this.obj.pressed=i.selected!=null,this.obj.extAction=i.action||null,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.obj.pressed?"pres"+(this.state?"":"_dis"):this.state?"def":"dis"),this.obj.style.display=i.hidden!=null?"none":"",this.obj.renderAs=this.obj.className,this.obj.idd=String(t),this.obj.title=i.title||"",this.obj.pressed&&(this.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"),u=n.conf.icons_css?"<i class='"+n.conf.icons_path+this.img+"'><\/i>":"<img src='"+n.conf.icons_path+this.img+"'>",this.obj.innerHTML=n._rtlParseBtn(this.img!=""?u:"",i.text!=null?"<div class='dhxtoolbar_text'>"+i.text+"<\/div>":""),n.base.appendChild(this.obj),window.dhx4.isIE&&(this.obj.onselectstart=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1}),r=this,this._doOnMouseOver=function(n){(n=n||event,r.state!=!1&&r.obj.over!=!0)&&(r.obj.pressed!=!0&&r.obj.className.match(/dhxtoolbar_btn_over/gi)==null&&(r.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over"),r.obj.over=!0)},this._doOnMouseOut=function(n){(n=n||event,r.state!=!1)&&(r.obj.pressed!=!0&&r.obj.className.match(/dhxtoolbar_btn_over/gi)!=null&&(r.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def"),r.obj.over=!1)},this._doOnMouseDown=function(t){if(t=t||event,t.type=="touchstart"){if(t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,n.conf.touch_id!=null&&n.conf.touch_id!=r.id)return;n.conf.touch_id=r.id}if(r.state!=!1&&n.callEvent("onBeforeStateChange",[r.obj.idd.replace(n.idPrefix,""),r.obj.pressed])===!0){r.obj.pressed=!r.obj.pressed;r.obj.className="dhx_toolbar_btn "+(r.obj.pressed==!0?"dhxtoolbar_btn_pres":r.obj.over==!0?"dhxtoolbar_btn_over":"dhxtoolbar_btn_def");var i=r.obj.idd.replace(n.idPrefix,"");if(r.obj.extAction)try{window[r.obj.extAction](idd,r.obj.pressed)}catch(t){}n.callEvent("onStateChange",[i,r.obj.pressed])}},this._doOnMouseUp=function(t){t=t||event;t.type=="touchend"&&(t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,n.conf.touch_id==r.id&&(n.conf.touch_id=null))},this.obj.evs={mouseover:"_doOnMouseOver",mouseout:"_doOnMouseOut",mousedown:"_doOnMouseDown",touchstart:"_doOnMouseDown",touchend:"_doOnMouseUp"},n._evs.add.apply(this,[this.obj.evs,this.obj]),this.setItemState=function(t,i){if(this.obj.pressed!=t&&(t==!0?(this.obj.pressed=!0,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres"+(this.state?"":"_dis")):(this.obj.pressed=!1,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis")),i==!0)){var r=this.obj.idd.replace(n.idPrefix,"");if(this.obj.extAction)try{window[this.obj.extAction](r,this.obj.pressed)}catch(u){}n.callEvent("onStateChange",[r,this.obj.pressed])}},this.getItemState=function(){return this.obj.pressed},this.enableItem=function(){n._enableItem(this)},this.disableItem=function(){n._disableItem(this)},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return this.obj.style.display==""},this.setItemText=function(t){n._setItemText(this,t)},this.getItemText=function(){return n._getItemText(this)},this.setItemImage=function(t){n._setItemImage(this,t,!0)},this.clearItemImage=function(){n._clearItemImage(this,!0)},this.setItemImageDis=function(t){n._setItemImage(this,t,!1)},this.clearItemImageDis=function(){n._clearItemImage(this,!1)},this.setItemToolTip=function(n){this.obj.title=n},this.getItemToolTip=function(){return this.obj.title},this};dhtmlXToolbarObject.prototype._sliderObject=function(n,t,i){var f,r,u;return this.id=n.idPrefix+t,this.state=i.enabled!=null?i.enabled=="true"?!0:!1:!0,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis"),this.obj.style.display=i.hidden!=null?"none":"",this.obj.onselectstart=function(n){n=n||event;n.preventDefault?n.preventDefault():n.returnValue=!1},this.obj.idd=String(t),this.obj.len=i.length!=null?Number(i.length):50,this.obj.innerHTML="<div class='dhxtoolbar_text'>"+(i.textMin||"")+"<\/div><div class='dhxtoolbar_sl_bg_l'><\/div><div class='dhxtoolbar_sl_bg_m' style='width:"+this.obj.len+"px;'><\/div><div class='dhxtoolbar_sl_bg_r'><\/div><div class='dhxtoolbar_text'>"+(i.textMax||"")+"<\/div>",n.base.appendChild(this.obj),f=this,this.pen=document.createElement("DIV"),this.pen.className="dhxtoolbar_sl_pen",this.obj.appendChild(this.pen),r=this.pen,this.label=document.createElement("DIV"),this.label.dir="ltr",this.label.className="dhx_toolbar_slider_label_"+n.conf.skin+(n.rtl?"_rtl":""),this.label.style.display="none",this.label.tip=i.toolTip||"%v",this.label._zi=window.dhx4.newId(),document.body.appendChild(this.label),u=this.label,this.pen.valueMin=i.valueMin!=null?Number(i.valueMin):0,this.pen.valueMax=i.valueMax!=null?Number(i.valueMax):100,this.pen.valueMin>this.pen.valueMax&&(this.pen.valueMin=this.pen.valueMax),this.pen.valueNow=i.valueNow!=null?Number(i.valueNow):this.pen.valueMax,this.pen.valueNow>this.pen.valueMax&&(this.pen.valueNow=this.pen.valueMax),this.pen.valueNow<this.pen.valueMin&&(this.pen.valueNow=this.pen.valueMin),this.pen._detectLimits=function(){this.minX=f.obj.childNodes[1].offsetLeft+2;this.maxX=f.obj.childNodes[3].offsetLeft-this.offsetWidth+1},this.pen._detectLimits(),this.pen._definePos=function(){this.nowX=Math.round((this.valueNow-this.valueMin)*(this.maxX-this.minX)/(this.valueMax-this.valueMin)+this.minX);this.style.left=this.nowX+"px";this.newNowX=this.nowX},this.pen._definePos(),this.pen.initXY=0,this.pen.allowMove=!1,this.pen[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(n){f.state!=!1&&(n=n||event,this.initXY=window.dhx4.isIPad?n.touches[0].clientX:n.clientX,this.newValueNow=this.valueNow,this.allowMove=!0,this.className="dhxtoolbar_sl_pen dhxtoolbar_over",u.tip!=""&&(u.style.visibility="hidden",u.style.display="",u.innerHTML=u.tip.replace("%v",this.valueNow),u.style.left=Math.round(window.dhx4.absLeft(this)+this.offsetWidth/2-u.offsetWidth/2)+"px",u.style.top=window.dhx4.absTop(this)-u.offsetHeight-3+"px",u.style.visibility="",u.style.zIndex=window.dhx4.zim.reserve(u._zi)))},this.pen._doOnMouseMoveStart=function(n){if(n=n||event,r.allowMove){var t=window.dhx4.isIPad?n.touches[0].clientX:n.clientX,i=t-r.initXY;if(!(t<window.dhx4.absLeft(r)+Math.round(r.offsetWidth/2))||r.nowX!=r.minX)return t>window.dhx4.absLeft(r)+Math.round(r.offsetWidth/2)&&r.nowX==r.maxX?void 0:(r.newNowX=r.nowX+i,r.newNowX<r.minX&&(r.newNowX=r.minX),r.newNowX>r.maxX&&(r.newNowX=r.maxX),r.nowX=r.newNowX,r.style.left=r.nowX+"px",r.initXY=t,r.newValueNow=Math.round((r.valueMax-r.valueMin)*(r.newNowX-r.minX)/(r.maxX-r.minX)+r.valueMin),u.tip!=""&&(u.innerHTML=u.tip.replace(/%v/gi,r.newValueNow),u.style.left=Math.round(window.dhx4.absLeft(r)+r.offsetWidth/2-u.offsetWidth/2)+"px",u.style.top=window.dhx4.absTop(r)-u.offsetHeight-3+"px"),n.cancelBubble=!0,n.preventDefault?n.preventDefault():n.returnValue=!1,!1)}},this.pen._doOnMouseMoveEnd=function(){r.allowMove&&(r.className="dhxtoolbar_sl_pen",r.allowMove=!1,r.nowX=r.newNowX,r.valueNow=r.newValueNow,u.tip!=""&&(u.style.display="none",window.dhx4.zim.clear(u._zi)),n.callEvent("onValueChange",[f.obj.idd.replace(n.idPrefix,""),r.valueNow]))},window.dhx4.isIPad?(document.addEventListener("touchmove",r._doOnMouseMoveStart,!1),document.addEventListener("touchend",r._doOnMouseMoveEnd,!1)):typeof addEventListener!="undefined"?(window.addEventListener("mousemove",r._doOnMouseMoveStart,!1),window.addEventListener("mouseup",r._doOnMouseMoveEnd,!1)):(document.body.attachEvent("onmousemove",r._doOnMouseMoveStart),document.body.attachEvent("onmouseup",r._doOnMouseMoveEnd)),this.enableItem=function(){this.state||(this.state=!0,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def")},this.disableItem=function(){this.state&&(this.state=!1,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_dis")},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return this.obj.style.display==""},this.setValue=function(t,i){t=Number(t);t<this.pen.valueMin&&(t=this.pen.valueMin);t>this.pen.valueMax&&(t=this.pen.valueMax);this.pen.valueNow=t;this.pen._definePos();i==!0&&n.callEvent("onValueChange",[this.obj.idd.replace(n.idPrefix,""),this.pen.valueNow])},this.getValue=function(){return this.pen.valueNow},this.setMinValue=function(n,t){(n=Number(n),n>this.pen.valueMax)||(this.obj.childNodes[0].innerHTML=t,this.obj.childNodes[0].style.display=t.length>0?"":"none",this.pen.valueMin=n,this.pen.valueNow<this.pen.valueMin&&(this.pen.valueNow=this.pen.valueMin),this.pen._detectLimits(),this.pen._definePos())},this.setMaxValue=function(n,t){(n=Number(n),n<this.pen.valueMin)||(this.obj.childNodes[4].innerHTML=t,this.obj.childNodes[4].style.display=t.length>0?"":"none",this.pen.valueMax=n,this.pen.valueNow>this.pen.valueMax&&(this.pen.valueNow=this.pen.valueMax),this.pen._detectLimits(),this.pen._definePos())},this.getMinValue=function(){var n=this.obj.childNodes[0].innerHTML,t=this.pen.valueMin;return[t,n]},this.getMaxValue=function(){var n=this.obj.childNodes[4].innerHTML,t=this.pen.valueMax;return[t,n]},this.setItemToolTipTemplate=function(n){this.label.tip=n},this.getItemToolTipTemplate=function(){return this.label.tip},this};dhtmlXToolbarObject.prototype.unload=function(){for(typeof addEventListener=="function"?(window.removeEventListener("mousedown",this._doOnClick,!1),window.removeEventListener("touchstart",this._doOnClick,!1)):document.body.detachEvent("onmousedown",this._doOnClick),this._doOnClick=null,this.clearAll(),this.objPull=null,this._xmlLoader&&(this._xmlLoader.destructor(),this._xmlLoader=null);this.base.childNodes.length>0;)this.base.removeChild(this.base.childNodes[0]);for(this.cont.removeChild(this.base),this.base=null;this.cont.childNodes.length>0;)this.cont.removeChild(this.cont.childNodes[0]);this.cont.className="";this.cont=null;window.dhx4._enableDataLoading(this,null,null,null,"clear");window.dhx4._eventable(this,"clear");this.tX1=null;this.tX2=null;this.tY1=null;this.tY2=null;this.anyUsed=null;this.idPrefix=null;this.rootTypes=null;this._rtl=null;this._rtlParseBtn=null;this.setRTL=null;this._sbw=null;this._getObj=null;this._addImgObj=null;this._setItemImage=null;this._clearItemImage=null;this._setItemText=null;this._getItemText=null;this._enableItem=null;this._disableItem=null;this._xmlParser=null;this._addItemToStorage=null;this._genStr=null;this._addItem=null;this._getPosition=null;this._setPosition=null;this._getIdByPosition=null;this._separatorObject=null;this._textObject=null;this._buttonObject=null;this._buttonSelectObject=null;this._buttonInputObject=null;this._buttonTwoStateObject=null;this._sliderObject=null;this._autoDetectVisibleArea=null;this._removeItem=null;this.setAlign=null;this.setSkin=null;this.setIconsPath=null;this.setIconPath=null;this.loadXML=null;this.loadXMLString=null;this.clearAll=null;this.addSpacer=null;this.removeSpacer=null;this.getType=null;this.getTypeExt=null;this.inArray=null;this.getParentId=null;this.addButton=null;this.addText=null;this.addButtonSelect=null;this.addButtonTwoState=null;this.addSeparator=null;this.addSlider=null;this.addInput=null;this.forEachItem=null;this.showItem=null;this.hideItem=null;this.isVisible=null;this.enableItem=null;this.disableItem=null;this.isEnabled=null;this.setItemText=null;this.getItemText=null;this.setItemToolTip=null;this.getItemToolTip=null;this.setItemImage=null;this.setItemImageDis=null;this.clearItemImage=null;this.clearItemImageDis=null;this.setItemState=null;this.getItemState=null;this.setItemToolTipTemplate=null;this.getItemToolTipTemplate=null;this.setValue=null;this.getValue=null;this.setMinValue=null;this.getMinValue=null;this.setMaxValue=null;this.getMaxValue=null;this.setWidth=null;this.getWidth=null;this.getPosition=null;this.setPosition=null;this.removeItem=null;this.addListOption=null;this.removeListOption=null;this.showListOption=null;this.hideListOption=null;this.isListOptionVisible=null;this.enableListOption=null;this.disableListOption=null;this.isListOptionEnabled=null;this.setListOptionPosition=null;this.getListOptionPosition=null;this.setListOptionText=null;this.getListOptionText=null;this.setListOptionToolTip=null;this.getListOptionToolTip=null;this.setListOptionImage=null;this.getListOptionImage=null;this.clearListOptionImage=null;this.forEachListOption=null;this.getAllListOptions=null;this.setListOptionSelected=null;this.getListOptionSelected=null;this.unload=null;this.setUserData=null;this.getUserData=null;this.setMaxOpen=null;this.items=null;this.conf=null};dhtmlXToolbarObject.prototype._autoDetectVisibleArea=function(){var n=window.dhx4.screenDim();this.tX1=n.left;this.tX2=n.right;this.tY1=n.top;this.tY2=n.bottom};dhtmlXToolbarObject.prototype.setIconset=function(n){this.conf.icons_css=n=="awesome"};dhtmlXToolbarObject.prototype._evs={add:function(n,t){for(var i in n)typeof addEventListener=="function"?t.addEventListener(i,this[n[i]],!1):i.match(/^touch/)==null&&t.attachEvent("on"+i,this[n[i]]);t=n=null},clear:function(n,t){for(var i in n)typeof addEventListener=="function"?t.removeEventListener(i,this[n[i]],!1):i.match(/^touch/)==null&&t.detachEvent("on"+i,this[n[i]]);t=n=null}};dhtmlXToolbarObject.prototype._initObj=function(n){for(var t=0;t<n.length;t++)this._addItemToStorage(n[t]);this.conf.skin=="dhx_terrace"&&this._improveTerraceSkin()};dhtmlXToolbarObject.prototype._xmlToJson=function(n){var v=[],t=n.getElementsByTagName("toolbar"),u,f,e,s,h,r,o,i;if(t!=null&&t[0]!=null){t=t[0];var c=function(n){for(var i=null,t=0;t<n.childNodes.length;t++)if(i==null&&n.childNodes[t].tagName=="itemText"){i=window.dhx4._xmlNodeValue(n.childNodes[t]);break}return i},l=["id","type","hidden","title","text","enabled","img","imgdis","action","openAll","renderSelect","mode","maxOpen","width","value","selected","length","textMin","textMax","toolTip","valueMin","valueMax","valueNow"],a=["id","type","enabled","disabled","action","selected","img","text"];for(u=0;u<t.childNodes.length;u++)if(t.childNodes[u].tagName=="item"){for(f={},r=0;r<l.length;r++)s=t.childNodes[u].getAttribute(l[r]),s!=null&&(f[l[r]]=s);for(e=0;e<t.childNodes[u].childNodes.length;e++){if(t.childNodes[u].childNodes[e].tagName=="item"&&f.type=="buttonSelect"){for(i={},r=0;r<a.length;r++)s=t.childNodes[u].childNodes[e].getAttribute(a[r]),s!=null&&(i[a[r]]=s);for(h=t.childNodes[u].childNodes[e].getElementsByTagName("userdata"),r=0;r<h.length;r++){i.userdata||(i.userdata={});o={};try{o.name=h[r].getAttribute("name")}catch(y){o.name=null}try{o.value=h[r].firstChild.nodeValue}catch(y){o.value=""}o.name!=null&&(i.userdata[o.name]=o.value)}i.text=c(t.childNodes[u].childNodes[e])||i.text;f.options==null&&(f.options=[]);f.options.push(i)}if(t.childNodes[u].childNodes[e].tagName=="userdata"){f.userdata==null&&(f.userdata={});i={};try{i.name=t.childNodes[u].childNodes[e].getAttribute("name")}catch(y){i.name=null}try{i.value=t.childNodes[u].childNodes[e].firstChild.nodeValue}catch(y){i.value=""}i.name!=null&&(f.userdata[i.name]=i.value)}}f.text=c(t.childNodes[u])||f.text;v.push(f)}c=null}return v};dhtmlXToolbarObject.prototype._addItemToStorage=function(n,t){var f=n.id||this._genStr(24),u=n.type||"",e,i,r;if(u=="spacer"?this.addSpacer(this._lastId):this._lastId=f,u!=""&&this["_"+u+"Object"]!=null){if(u=="buttonSelect"&&n.options!=null)for(i=0;i<n.options.length;i++)n.options[i].type=="obj"&&(n.options[i].type="button"),n.options[i].type=="sep"&&(n.options[i].type="separator");if(u=="slider"){e={tip_template:"toolTip",value_min:"valueMin",value_max:"valueMax",value_now:"valueNow",text_min:"textMin",text_max:"textMax"};for(r in e)n[e[r]]==null&&n[r]!=null&&(n[e[r]]=n[r])}u=="buttonInput"&&n.value==null&&n.text!=null&&(n.value=n.text);u=="buttonTwoState"&&typeof n.selected=="undefined"&&typeof n.pressed!="undefined"&&window.dhx4.s2b(n.pressed)&&(n.selected=!0);typeof n.enabled=="undefined"&&typeof n.disabled!="undefined"&&window.dhx4.s2b(n.disabled)&&(n.enabled=!1);n.imgDis==null&&n.img_disabled!=null&&(n.imgdis=n.img_disabled);(typeof n.openAll=="undefined"||n.openAll==null)&&this.conf.skin=="dhx_terrace"&&(n.openAll=!0);this.objPull[this.idPrefix+f]=new this["_"+u+"Object"](this,f,n);this.objPull[this.idPrefix+f].type=u;this.setPosition(f,t)}if(n.userdata!=null)for(r in n.userdata)this.setUserData(f,r,n.userdata[r]);if(n.options!=null)for(i=0;i<n.options.length;i++)if(n.options[i].userdata!=null)for(r in n.options[i].userdata)this.setListOptionUserData(n.id,n.options[i].id,r,n.options[i].userdata[r])};dhtmlXToolbarObject.prototype.setSkin=function(n,t){var r,i;t===!0?this.cont.className=this.cont.className.replace(/dhxtoolbar_icons_\d{1,}/,"dhxtoolbar_icons_"+this.conf.iconSize):(this.conf.skin=n,this.conf.skin=="dhx_skyblue"&&(this.conf.sel_ofs_y=1),this.conf.skin=="dhx_web"&&(this.conf.sel_ofs_y=1,this.conf.sel_ofs_x=1),this.conf.skin=="dhx_terrace"&&(this.conf.sel_ofs_y=-1,this.conf.sel_ofs_x=0),this.conf.skin=="material"&&(this.conf.sel_ofs_y=-1,this.conf.sel_ofs_x=0),this.cont.className="dhx_toolbar_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize+this.conf.cssShadow);for(r in this.objPull)i=this.objPull[r],i.type=="slider"&&(i.pen._detectLimits(),i.pen._definePos(),i.label.className="dhx_toolbar_slider_label_"+this.conf.skin),i.type=="buttonSelect"&&(i.polygon.className="dhx_toolbar_poly_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize+this.conf.cssShadow);n=="dhx_terrace"&&this._improveTerraceSkin()};dhtmlXToolbarObject.prototype.setAlign=function(n){this.conf.align=n=="right"?"right":"left";this.base.className=n=="right"?"dhxtoolbar_float_right":"dhxtoolbar_float_left";this._spacer&&(this._spacer.className=n=="right"?" dhxtoolbar_float_left":" dhxtoolbar_float_right")};dhtmlXToolbarObject.prototype.setIconSize=function(n){this.conf.iconSize={18:!0,24:!0,32:!0,48:!0}[n]?n:18;this.setSkin(this.conf.skin,!0);this.callEvent("_onIconSizeChange",[this.conf.iconSize])};dhtmlXToolbarObject.prototype.setIconsPath=function(n){this.conf.icons_path=n};dhtmlXToolbarObject.prototype.setUserData=function(n,t,i){n=this.idPrefix+n;this.objPull[n]!=null&&(this.objPull[n].userData==null&&(this.objPull[n].userData={}),this.objPull[n].userData[t]=i)};dhtmlXToolbarObject.prototype.getUserData=function(n,t){return(n=this.idPrefix+n,this.objPull[n]!=null&&this.objPull[n].userData!=null)?this.objPull[n].userData[t]||null:null};dhtmlXToolbarObject.prototype._isListOptionExists=function(n,t){if(this.objPull[this.idPrefix+n]==null)return!1;var i=this.objPull[this.idPrefix+n];return i.type!="buttonSelect"?!1:i._listOptions[t]==null?!1:!0};dhtmlXToolbarObject.prototype.setListOptionUserData=function(n,t,i,r){if(this._isListOptionExists(n,t)){var u=this.objPull[this.idPrefix+n]._listOptions[t];u.userData==null&&(u.userData={});u.userData[i]=r}};dhtmlXToolbarObject.prototype.getListOptionUserData=function(n,t,i){if(!this._isListOptionExists(n,t))return null;var r=this.objPull[this.idPrefix+n]._listOptions[t];return r.userData?r.userData[i]?r.userData[i]:null:null};dhtmlXToolbarObject.prototype._improveTerraceSkin=function(){var n,t,f;this.conf.terrace_radius==null&&(this.conf.terrace_radius="3px");var i=[],s={separator:!0,text:!0},u=[this.base];for(this._spacer!=null&&u.push(this._spacer),n=0;n<u.length;n++){for(i[n]=[],t=0;t<u[n].childNodes.length;t++)u[n].childNodes[t].idd!=null&&u[n].childNodes[t].style.display!="none"&&(f=this.idPrefix+u[n].childNodes[t].idd,this.objPull[f]!=null&&this.objPull[f].obj==u[n].childNodes[t]&&i[n].push({a:f,type:this.objPull[f].type,node:this.objPull[f][this.objPull[f].type=="buttonSelect"?"arw":"obj"]}));u[n]=null}for(n=0;n<i.length;n++)for(t=0;t<i[n].length;t++){var r=i[n][t],e=!1,o=!1;s[r.type]||((t==i[n].length-1||i[n][t+1]!=null&&s[i[n][t+1].type])&&(e=!0),(t==0||t-1>=0&&i[n][t-1]!=null&&s[i[n][t-1].type])&&(o=!0));r.node.style.borderRightWidth=e?"1px":"0px";r.node.style.borderTopRightRadius=r.node.style.borderBottomRightRadius=e?this.conf.terrace_radius:"0px";r.type=="buttonSelect"?(r.node.previousSibling.style.borderTopLeftRadius=r.node.previousSibling.style.borderBottomLeftRadius=o?this.conf.terrace_radius:"0px",r.node.previousSibling._br=e,r.node.previousSibling._bl=o):r.node.style.borderTopLeftRadius=r.node.style.borderBottomLeftRadius=o?this.conf.terrace_radius:"0px";r.node._br=e;r.node._bl=o}for(n=0;n<i.length;n++){for(t=0;t<i[n].length;t++){for(f in i[n][t])i[n][t][f]=null;i[n][t]=null}i[n]=null}i=u=null};dhtmlXToolbarObject.prototype._improveTerraceButtonSelect=function(n,t){var i=this.objPull[n];t==!0?(i.obj.style.borderBottomLeftRadius=i.obj._bl?this.conf.terrace_radius:"0px",i.arw.style.borderBottomRightRadius=i.obj._br?this.conf.terrace_radius:"0px"):(i.obj.style.borderBottomLeftRadius="0px",i.arw.style.borderBottomRightRadius="0px");i=null};typeof dhtmlXCellObject!="undefined"&&(dhtmlXCellObject.prototype._createNode_toolbar=function(n,t,i,r,u){return typeof u!="undefined"?n=u:(n=document.createElement("DIV"),n.className="dhx_cell_toolbar_"+(this.conf.borders?"def":"no_borders"),n.appendChild(document.createElement("DIV")),n.firstChild.className="dhx_toolbar_base_18_dhx_skyblue"),this.cell.insertBefore(n,this.cell.childNodes[this.conf.idx.cont]),this.conf.ofs_nodes.t.toolbar=!0,this._updateIdx(),n},dhtmlXCellObject.prototype.attachToolbar=function(n){if((this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null))return this.callEvent("_onBeforeContentAttach",["toolbar"]),typeof n=="undefined"?n={}:typeof n=="string"&&(n={skin:n}),typeof n.skin=="undefined"&&(n.skin=this.conf.skin),n.parent=this._attachObject("toolbar").firstChild,this.dataNodes.toolbar=new dhtmlXToolbarObject(n),this._adjustCont(this._idd),this.dataNodes.toolbar._masterCell=this,this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell._adjustCont()}),n.parent=null,n=null,this.callEvent("_onContentAttach",[]),this.dataNodes.toolbar},dhtmlXCellObject.prototype.detachToolbar=function(){this.dataNodes.toolbar!=null&&(this.dataNodes.toolbar._masterCell=null,typeof this.dataNodes.toolbar.unload=="function"&&this.dataNodes.toolbar.unload(),this.dataNodes.toolbar=null,delete this.dataNodes.toolbar,this._detachObject("toolbar"))},dhtmlXCellObject.prototype.showToolbar=function(){this._mtbShowHide("toolbar","")},dhtmlXCellObject.prototype.hideToolbar=function(){this._mtbShowHide("toolbar","none")},dhtmlXCellObject.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar});dhtmlXEditor.prototype.setSizes=function(){this.cell._setSize(0,0,this.base.clientWidth,this.base.clientHeight);this.editor!=null&&(this.editor.style.left="5px",this.editor.style.width=this.base.clientWidth-5+"px")};dhtmlXEditor.prototype.setReadonly=function(n){this.conf.roMode=n===!0;this._prepareContent(!0,this.conf.roMode);this.cBlock.style.display=this.conf.roMode?"":"none"};dhtmlXEditor.prototype.isReadonly=function(){return this.conf.roMode||!1};dhtmlXEditor.prototype.setSkin=function(n){this.base.className=String(this.base.className).replace(new RegExp("dhxeditor_"+this.conf.skin),"dhxeditor_"+n);this.conf.skin=this.cell.conf.skin=n;this.tb&&(this.cell.detachToolbar(n),this.tb=null,this.attachToolbar());this.setSizes()};dhtmlXEditor.prototype._fontConf=function(){var n;return n=this.conf.skin==""?{family:this.conf.font.family,size:this.conf.font.size,color:this.conf.font.color}:{family:"Roboto, Arial, Helvetica",size:"14px",color:"#404040"},window.dhx4.template("font-size: #size#; font-family: #family#; color: #color#;",n)};window.dhtmlXEditorCell=function(n,t){dhtmlXCellObject.apply(this,[n,"_editor"]);var i=this;return this.editor=t,this.conf.skin=this.editor.conf.skin,this.attachEvent("_onCellUnload",function(){this._stbUnload();this.editor=null;i=null}),this._stbInit(),this};dhtmlXEditorCell.prototype=new dhtmlXCellObject;dhtmlXEditorCell.prototype._stbInit=function(){var u=this,i=document.createElement("DIV"),f,r,n,t;i.className="dhx_cell_stb"+(dhx4.isIE6||dhx4.isIE7||dhx4.isIE8?"":" dhx_cell_stb_shadow");this.cell.insertBefore(i,this.cell.childNodes[this.conf.idx.cont]);i.onselectstart=function(n){return n=n||event,n.cancelBubble=!0,n.preventDefault?n.preventDefault():n.returnValue=!1,!1};f={bold:"applyBold",italic:"applyItalic",underline:"applyUnderscore",clearformat:"clearFormatting"};for(r in f)n=document.createElement("A"),n.href="javascript:void(0);",n.tabIndex=-1,i.appendChild(n),n.onmousedown=n.onclick=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1},t=document.createElement("DIV"),t.className="dhx_cell_stb_button btn_"+r,t._actv=r.charAt(0),t._cmd=f[r],n.appendChild(t),t.onclick=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1},t.onmousedown=function(n){n=n||event;n.preventDefault?n.preventDefault():n.returnValue=!1;u.editor[this._cmd]();u.editor.callEvent("onToolbarClick",[this._actv])},t=n=null;i=null;this._stbUnload=function(){var n=this.cell.childNodes[this.conf.idx.stb];for(n.onselectstart=null;n.childNodes.length>0;)n.lastChild.onmousedown=n.lastChild.onclick=null,n.lastChild.firstChild.onmousedown=n.lastChild.firstChild.onclick=null,n.lastChild.firstChild._actv=n.lastChild.firstChild._cmd=null,n.lastChild.removeChild(n.lastChild.firstChild),n.removeChild(n.lastChild);n.parentNode.removeChild(n);n=u=null;this.conf.idx_data.stb=this.conf.ofs_nodes.t._getStbHeight=null;delete this.conf.ofs_nodes.t._getStbHeight;delete this.conf.idx_data.stb;this._updateIdx()};this.conf.stb_visible=!0;this.conf.ofs_nodes.t._getStbHeight="func";this.conf.idx_data.stb="dhx_cell_stb";this._updateIdx()};dhtmlXEditorCell.prototype._stbHide=function(){this.cell.childNodes[this.conf.idx.stb].style.display="none";this.conf.stb_visible=!1};dhtmlXEditorCell.prototype._getStbHeight=function(){return this.conf.stb_visible==!0&&this.conf.skin=="material"?(this.conf.stb_height==null&&(this.conf.stb_height=window.dhx4.readFromCss("dhxeditor_material stb_height_detect","scrollHeight","<div class='dhx_cell_editor'><div class='dhx_cell_stb'><\/div><\/div>")),this.conf.stb_height):this.cell.childNodes[this.conf.idx.stb].offsetHeight};dhtmlXCellObject.prototype.attachEditor=function(n){var t,i,r;return this.callEvent("_onBeforeContentAttach",["editor"]),t=document.createElement("DIV"),t.style.width="100%",t.style.height="100%",t.style.position="relative",t.style.overflow="hidden",this._attachObject(t),typeof n=="object"&&n!=null||(n={}),n.parent=t,this.dataType="editor",this.dataObj=new dhtmlXEditor(n),t=null,n.parent=null,n=null,typeof dhtmlXPortalCell=="function"&&this instanceof window.dhtmlXPortalCell&&(this.portal.conf.editor_ev==null&&(i=this.portal.attachEvent("onBeforeDrag",function(n){return this.cdata[n].dataType=="editor"&&(this.cdata[n].conf.editor_cont=this.cdata[n].dataObj.getContent()),!0}),r=this.portal.attachEvent("onDrop",function(n){this.cdata[n].dataType=="editor"&&(this.cdata[n].dataObj.setContent(this.cdata[n].conf.editor_cont),this.cdata[n].dataObj._prepareContent(!0),this.cdata[n].conf.editor_cont=null)}),this.portal.conf.editor_ev=[i,r]),this.conf.editor_ev=this.attachEvent("_onBeforeContentDetach",function(){var t,i,n;if(this.detachEvent(this.conf.editor_ev),this.conf.editor_ev=null,this instanceof window.dhtmlXPortalCell){t=!1;for(i in this.portal.cdata)this.portal.cdata[i]!=this&&this.portal.cdata[i].dataType=="editor"&&(t=!0);if(t==!1){for(n=0;n<this.portal.conf.editor_ev.length;n++)this.portal.detachEvent(this.portal.conf.editor_ev[n]);this.portal.conf.editor_ev=null}}})),this.callEvent("_onContentAttach",[]),this.dataObj};dhtmlXEditor.prototype.attachToolbar=function(n){var t,i,f,r,u;if(this.tb==null){for(n!=null&&(this.conf.iconsPath=n),this.cell._stbHide(),this.tb=this.cell.attachToolbar({icons_path:this.conf.iconsPath+"/dhxeditor_"+String(this.conf.skin).replace(/^dhx_/,"")+"/",skin:this.conf.skin}),this.setSizes(),t=this.conf.skin=="material"?"png":"gif",this._availFonts=["Arial","Arial Narrow","Comic Sans MS","Courier","Georgia","Impact","Tahoma","Times New Roman","Verdana"],this._initFont=this._availFonts[0],this._xmlFonts="",i=0;i<this._availFonts.length;i++)f=String(this._availFonts[i]).replace(/\s/g,"_"),this._xmlFonts+='<item type="button" id="applyFontFamily:'+f+'"><itemText><![CDATA[<img src="'+this.tb.imagePath+"font_"+String(f).toLowerCase()+"."+t+'" border="0" style="/*margin-top:1px;margin-bottom:1px;*/width:110px;height:16px;">]\]><\/itemText><\/item>';this._availSizes={"1":"8pt","2":"10pt","3":"12pt","4":"14pt","5":"18pt","6":"24pt","7":"36pt"};this._xmlSizes="";for(r in this._availSizes)this._xmlSizes+='<item type="button" id="applyFontSize:'+r+":"+this._availSizes[r]+'" text="'+this._availSizes[r]+'"/>';this.tbXML='<toolbar><item id="applyH1" type="buttonTwoState" img="h1.'+t+'" imgdis="h4_dis.'+t+'" title="H1"/><item id="applyH2" type="buttonTwoState" img="h2.'+t+'" imgdis="h4_dis.'+t+'" title="H2"/><item id="applyH3" type="buttonTwoState" img="h3.'+t+'" imgdis="h4_dis.'+t+'" title="H3"/><item id="applyH4" type="buttonTwoState" img="h4.'+t+'" imgdis="h4_dis.'+t+'" title="H4"/><item id="separ01" type="separator"/><item id="applyBold" type="buttonTwoState" img="bold.'+t+'" imgdis="bold_dis.'+t+'" title="Bold Text"/><item id="applyItalic" type="buttonTwoState" img="italic.'+t+'" imgdis="italic_dis.'+t+'" title="Italic Text"/><item id="applyUnderscore" type="buttonTwoState" img="underline.'+t+'" imgdis="underline_dis.'+t+'" title="Underscore Text"/><item id="applyStrikethrough" type="buttonTwoState" img="strike.'+t+'" imgdis="strike_dis.'+t+'" title="Strikethrough Text"/><item id="separ02" type="separator"/><item id="alignLeft" type="buttonTwoState" img="align_left.'+t+'" imgdis="align_left_dis.'+t+'" title="Left Alignment"/><item id="alignCenter" type="buttonTwoState" img="align_center.'+t+'" imgdis="align_center_dis.'+t+'" title="Center Alignment"/><item id="alignRight" type="buttonTwoState" img="align_right.'+t+'" imgdis="align_right_dis.'+t+'" title="Right Alignment"/><item id="alignJustify" type="buttonTwoState" img="align_justify.'+t+'" title="Justified Alignment"/><item id="separ03" type="separator"/><item id="applySub" type="buttonTwoState" img="script_sub.'+t+'" imgdis="script_sub.'+t+'" title="Subscript"/><item id="applySuper" type="buttonTwoState" img="script_super.'+t+'" imgdis="script_super_dis.'+t+'" title="Superscript"/><item id="separ04" type="separator"/><item id="createNumList" type="button" img="list_number.'+t+'" imgdis="list_number_dis.'+t+'" title="Number List"/><item id="createBulList" type="button" img="list_bullet.'+t+'" imgdis="list_bullet_dis.'+t+'" title="Bullet List"/><item id="separ05" type="separator"/><item id="increaseIndent" type="button" img="indent_inc.'+t+'" imgdis="indent_inc_dis.'+t+'" title="Increase Indent"/><item id="decreaseIndent" type="button" img="indent_dec.'+t+'" imgdis="indent_dec_dis.'+t+'" title="Decrease Indent"/><item id="separ06" type="separator"/><item id="clearFormatting" type="button" img="clear.'+t+'" title="Clear Formatting"/><\/toolbar>';this.tb.loadStruct(this.tbXML);this._checkAlign=function(n){this.tb.setItemState("alignCenter",!1);this.tb.setItemState("alignRight",!1);this.tb.setItemState("alignJustify",!1);this.tb.setItemState("alignLeft",!1);n&&this.tb.setItemState(n,!0)};this._checkH=function(n){this.tb.setItemState("applyH1",!1);this.tb.setItemState("applyH2",!1);this.tb.setItemState("applyH3",!1);this.tb.setItemState("applyH4",!1);n&&this.tb.setItemState(n,!0)};this._doOnFocusChanged=function(n){var i,t;n.h1||n.h2||n.h3||n.h4?this.tb.setItemState("applyBold",!1):(i=String(n.fontWeight).search(/bold/i)!=-1||Number(n.fontWeight)>=700,this.tb.setItemState("applyBold",i));t="alignLeft";String(n.textAlign).search(/center/)!=-1&&(t="alignCenter");String(n.textAlign).search(/right/)!=-1&&(t="alignRight");String(n.textAlign).search(/justify/)!=-1&&(t="alignJustify");this.tb.setItemState(t,!0);this._checkAlign(t);this.tb.setItemState("applyH1",n.h1);this.tb.setItemState("applyH2",n.h2);this.tb.setItemState("applyH3",n.h3);this.tb.setItemState("applyH4",n.h4);window._KHTMLrv&&(n.sub=n.vAlign=="sub",n.sup=n.vAlign=="super");this.tb.setItemState("applyItalic",n.fontStyle=="italic");this.tb.setItemState("applyStrikethrough",n.del);this.tb.setItemState("applySub",n.sub);this.tb.setItemState("applySuper",n.sup);this.tb.setItemState("applyUnderscore",n.u)};this._doOnToolbarClick=function(n){var t=String(n).split(":");this[t[0]]!=null&&typeof this[t[0]]=="function"&&(this[t[0]](t[1]),this.callEvent("onToolbarClick",[n]))};this._doOnStateChange=function(n){this[n]();switch(n){case"alignLeft":case"alignCenter":case"alignRight":case"alignJustify":this._checkAlign(n);break;case"applyH1":case"applyH2":case"applyH3":case"applyH4":this._checkH(n)}this.callEvent("onToolbarClick",[n])};this._doOnBeforeStateChange=function(n,t){return(n=="alignLeft"||n=="alignCenter"||n=="alignRight"||n=="alignJustify")&&t==!0?!1:!0};u=this;this.tb.attachEvent("onClick",function(n){u._doOnToolbarClick(n)});this.tb.attachEvent("onStateChange",function(n,t){u._doOnStateChange(n,t)});this.tb.attachEvent("onBeforeStateChange",function(n,t){return u._doOnBeforeStateChange(n,t)});this.applyBold=function(){this._runCommand("Bold")};this.applyItalic=function(){this._runCommand("Italic")};this.applyUnderscore=function(){this._runCommand("Underline")};this.applyStrikethrough=function(){this._runCommand("StrikeThrough")};this.alignLeft=function(){this._runCommand("JustifyLeft")};this.alignRight=function(){this._runCommand("JustifyRight")};this.alignCenter=function(){this._runCommand("JustifyCenter")};this.alignJustify=function(){this._runCommand("JustifyFull")};this.applySub=function(){this._runCommand("Subscript")};this.applySuper=function(){this._runCommand("Superscript")};this.applyH1=function(){this._runCommand("FormatBlock","<H1>")};this.applyH2=function(){this._runCommand("FormatBlock","<H2>")};this.applyH3=function(){this._runCommand("FormatBlock","<H3>")};this.applyH4=function(){this._runCommand("FormatBlock","<H4>")};this.createNumList=function(){this._runCommand("InsertOrderedList")};this.createBulList=function(){this._runCommand("InsertUnorderedList")};this.increaseIndent=function(){this._runCommand("Indent")};this.decreaseIndent=function(){this._runCommand("Outdent")};this.clearFormatting=function(){this._runCommand("RemoveFormat");this.tb.setItemState("applyBold",!1);this.tb.setItemState("applyItalic",!1);this.tb.setItemState("applyStrikethrough",!1);this.tb.setItemState("applySub",!1);this.tb.setItemState("applySuper",!1);this.tb.setItemState("applyUnderscore",!1);var n=this.getContent();n=n.replace(/<\/?h\d>/gi,"");this.setContent(n)}}};dhtmlx.Group={_init:function(){dhtmlx.assert(this.data,"DataStore required for grouping");this.data.attachEvent("onStoreLoad",dhtmlx.bind(function(){this._settings.group&&this.group(this._settings.group,!1)},this));this.attachEvent("onBeforeRender",dhtmlx.bind(function(n){this._settings.sort&&(n.block(),n.sort(this._settings.sort),n.unblock())},this));this.data.attachEvent("onClearAll",dhtmlx.bind(function(){this.data._not_grouped_order=this.data._not_grouped_pull=null},this));this.attachEvent("onBeforeSort",dhtmlx.bind(function(){this._settings.sort=null},this))},_init_group_data_event:function(n,t){n.attachEvent("onClearAll",dhtmlx.bind(function(){this.ungroup(!1);this.block();this.clearAll();this.unblock()},t))},sum:function(n,t){n=dhtmlx.Template.setter(n);t=t||this.data;var i=0;return t.each(function(t){i+=n(t)*1}),i},min:function(n,t){n=dhtmlx.Template.setter(n);t=t||this.data;var i=Infinity;return t.each(function(t){n(t)*1<i&&(i=n(t)*1)}),i*1},max:function(n,t){n=dhtmlx.Template.setter(n);t=t||this.data;var i=-Infinity;return t.each(function(t){n(t)*1>i&&(i=n(t)*1)}),i},_split_data_by:function(n){var s=function(n,t){return n=dhtmlx.Template.setter(n),n(t[0])},f=dhtmlx.Template.setter(n.by),r,i,e,u,t,o;n.map[f]||(n.map[f]=[f,s]);r={};i=[];this.data.each(function(n){var t=f(n);r[t]||(i.push({id:t}),r[t]=dhtmlx.toArray());r[t].push(n)});for(e in n.map)for(u=n.map[e][1]||s,typeof u!="function"&&(u=this[u]),t=0;t<i.length;t++)i[t][e]=u.call(this,n.map[e][0],r[i[t].id]);for(this.data._not_grouped_order=this.data.order,this.data._not_grouped_pull=this.data.pull,this.data.order=dhtmlx.toArray(),this.data.pull={},t=0;t<i.length;t++)o=this.data.id(i[t]),this.data.pull[o]=i[t],this.data.order.push(o);this.callEvent("onStoreUpdated",[])},group:function(n,t){this.ungroup(!1);this._split_data_by(n);t!==!1&&this.data.callEvent("onStoreUpdated",[])},ungroup:function(n){this.data._not_grouped_order&&(this.data.order=this.data._not_grouped_order,this.data.pull=this.data._not_grouped_pull,this.data._not_grouped_pull=this.data._not_grouped_order=null);n!==!1&&this.data.callEvent("onStoreUpdated",[])},group_setter:function(n){return dhtmlx.assert(typeof n=="object","Incorrect group value"),dhtmlx.assert(n.by,"group.by is mandatory"),dhtmlx.assert(n.map,"group.map is mandatory"),n},sort_setter:function(n){return typeof n!="object"&&(n={by:n}),this._mergeSettings(n,{as:"string",dir:"asc"}),n}};dhtmlx.Date={Locale:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},date_part:function(n){return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n},time_part:function(n){return(n.valueOf()/1e3-n.getTimezoneOffset()*60)%86400},week_start:function(n){var t=n.getDay();return this.config.start_on_monday&&(t===0?t=6:t--),this.date_part(this.add(n,-1*t,"day"))},month_start:function(n){return n.setDate(1),this.date_part(n)},year_start:function(n){return n.setMonth(0),this.month_start(n)},day_start:function(n){return this.date_part(n)},add:function(n,t,i){var r=new Date(n.valueOf());switch(i){case"day":r.setDate(r.getDate()+t);break;case"week":r.setDate(r.getDate()+7*t);break;case"month":r.setMonth(r.getMonth()+t);break;case"year":r.setYear(r.getFullYear()+t);break;case"hour":r.setHours(r.getHours()+t);break;case"minute":r.setMinutes(r.getMinutes()+t);break;default:return dhtmlx.Date["add_"+i](n,t,i)}return r},to_fixed:function(n){return n<10?"0"+n:n},copy:function(n){return new Date(n.valueOf())},date_to_str:function(n,t){return n=n.replace(/%[a-zA-Z]/g,function(n){switch(n){case"%d":return'"+dhtmlx.Date.to_fixed(date.getDate())+"';case"%m":return'"+dhtmlx.Date.to_fixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+dhtmlx.Date.to_fixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+dhtmlx.Date.Locale.day_short[date.getDay()]+"';case"%l":return'"+dhtmlx.Date.Locale.day_full[date.getDay()]+"';case"%M":return'"+dhtmlx.Date.Locale.month_short[date.getMonth()]+"';case"%F":return'"+dhtmlx.Date.Locale.month_full[date.getMonth()]+"';case"%h":return'"+dhtmlx.Date.to_fixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+dhtmlx.Date.to_fixed(date.getHours())+"';case"%i":return'"+dhtmlx.Date.to_fixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+dhtmlx.Date.to_fixed(date.getSeconds())+"';case"%W":return'"+dhtmlx.Date.to_fixed(dhtmlx.Date.getISOWeek(date))+"';default:return n}}),t&&(n=n.replace(/date\.get/g,"date.getUTC")),new Function("date",'return "'+n+'";')},str_to_date:function(n,t){for(var u,r="var temp=date.split(/[^0-9a-zA-Z]+/g);",f=n.match(/%[a-zA-Z]/g),i=0;i<f.length;i++)switch(f[i]){case"%j":case"%d":r+="set[2]=temp["+i+"]||1;";break;case"%n":case"%m":r+="set[1]=(temp["+i+"]||1)-1;";break;case"%y":r+="set[0]=temp["+i+"]*1+(temp["+i+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":r+="set[3]=temp["+i+"]||0;";break;case"%i":r+="set[4]=temp["+i+"]||0;";break;case"%Y":r+="set[0]=temp["+i+"]||0;";break;case"%a":case"%A":r+="set[3]=set[3]%12+((temp["+i+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":r+="set[5]=temp["+i+"]||0;"}return u="set[0],set[1],set[2],set[3],set[4],set[5]",t&&(u=" Date.UTC("+u+")"),new Function("date","var set=[0,0,1,0,0,0]; "+r+" return new Date("+u+");")},getISOWeek:function(n){var t,i;if(!n)return!1;t=n.getDay();t===0&&(t=7);i=new Date(n.valueOf());i.setDate(n.getDate()+(4-t));var r=i.getFullYear(),u=Math.floor((i.getTime()-new Date(r,0,1).getTime())/864e5);return 1+Math.floor(u/7)},getUTCISOWeek:function(n){return this.getISOWeek(n)}};dhtmlx.math={};dhtmlx.math._toHex=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];dhtmlx.math.toHex=function(n,t){for(n=parseInt(n,10),str="";n>0;)str=this._toHex[n%16]+str,n=Math.floor(n/16);while(str.length<t)str="0"+str;return str};dhtmlx.math.hexToDec=function(n){return parseInt(n,16)};dhtmlx.math.toRgb=function(n){var t,i,r,u;return typeof n!="string"?(t=n[0],i=n[1],r=n[2]):n.indexOf("rgb")!=-1?(u=n.substr(n.indexOf("(")+1,n.lastIndexOf(")")-n.indexOf("(")-1).split(","),t=u[0],i=u[1],r=u[2]):(n.substr(0,1)=="#"&&(n=n.substr(1)),t=this.hexToDec(n.substr(0,2)),i=this.hexToDec(n.substr(2,2)),r=this.hexToDec(n.substr(4,2))),t=parseInt(t,10)||0,i=parseInt(i,10)||0,r=parseInt(r,10)||0,(t<0||t>255)&&(t=0),(i<0||i>255)&&(i=0),(r<0||r>255)&&(r=0),[t,i,r]};dhtmlx.math.hsvToRgb=function(n,t,i){var h,c,e,o,s,r,u,f;h=Math.floor(n/60)%6;c=n/60-h;e=i*(1-t);o=i*(1-c*t);s=i*(1-(1-c)*t);r=0;u=0;f=0;switch(h){case 0:r=i;u=s;f=e;break;case 1:r=o;u=i;f=e;break;case 2:r=e;u=i;f=s;break;case 3:r=e;u=o;f=i;break;case 4:r=s;u=e;f=i;break;case 5:r=i;u=e;f=o}return r=Math.floor(r*255),u=Math.floor(u*255),f=Math.floor(f*255),[r,u,f]};dhtmlx.math.rgbToHsv=function(n,t,i){var e,u,f,h,s,c,o,r;return e=n/255,u=t/255,f=i/255,o=Math.min(e,u,f),r=Math.max(e,u,f),s=0,h=r==0?0:1-o/r,c=r,r==o?s=0:r==e&&u>=f?s=60*(u-f)/(r-o)+0:r==e&&u<f?s=60*(u-f)/(r-o)+360:r==u?s=60*(f-e)/(r-o)+120:r==f&&(s=60*(e-u)/(r-o)+240),[s,h,c]};dhtmlx.presets||(dhtmlx.presets={});dhtmlx.presets.chart={simple:{item:{borderColor:"#ffffff",color:"#2b7100",shadow:!1,borderWidth:2},line:{color:"#8ecf03",width:2}},plot:{color:"#1293f8",item:{borderColor:"#636363",borderWidth:1,color:"#ffffff",type:"r",shadow:!1},line:{color:"#1293f8",width:2}},diamond:{color:"#b64040",item:{borderColor:"#b64040",color:"#b64040",type:"d",radius:3,shadow:!0},line:{color:"#ff9000",width:2}},point:{color:"#fe5916",disableLines:!0,fill:!1,disableItems:!1,item:{color:"#feb916",borderColor:"#fe5916",radius:2,borderWidth:1,type:"r"},alpha:1},line:{line:{color:"#3399ff",width:2},item:{color:"#ffffff",borderColor:"#3399ff",radius:2,borderWidth:2,type:"d"},fill:!1,disableItems:!1,disableLines:!1,alpha:1},area:{fill:"#3399ff",line:{color:"#3399ff",width:1},disableItems:!0,alpha:.2,disableLines:!1},round:{item:{radius:3,borderColor:"#3f83ff",borderWidth:1,color:"#3f83ff",type:"r",shadow:!1,alpha:.6}},square:{item:{radius:3,borderColor:"#447900",borderWidth:2,color:"#69ba00",type:"s",shadow:!1,alpha:1}},column:{color:"RAINBOW",gradient:!1,width:45,radius:0,alpha:1,border:!0},stick:{width:5,gradient:!1,color:"#67b5c9",radius:2,alpha:1,border:!1},alpha:{color:"#b9a8f9",width:70,gradient:"falling",radius:0,alpha:.5,border:!0}};dhtmlx.ui.Map=function(n){this.name="Map";this._id="map_"+dhtmlx.uid();this._key=n;this._map=[];this._areas=[]};dhtmlx.ui.Map.prototype={addRect:function(n,t,i){this._areas.push({index:i,points:t});this._createMapArea(n,"RECT",t,i)},addPoly:function(n,t,i){this._createMapArea(n,"POLY",t,i)},_createMapArea:function(n,t,i,r){var u="";arguments.length==4&&(u="userdata='"+r+"'");this._map.push("<area "+this._key+"='"+n+"' shape='"+t+"' coords='"+i.join()+"' "+u+"><\/area>")},addSector:function(n,t,i,r,u,f,e,o){var s=[],h;for(s.push(r),s.push(Math.floor(u*e)),h=t;h<i;h+=Math.PI/18)s.push(Math.floor(r+f*Math.cos(h))),s.push(Math.floor((u+f*Math.sin(h))*e));return s.push(Math.floor(r+f*Math.cos(i))),s.push(Math.floor((u+f*Math.sin(i))*e)),s.push(r),s.push(Math.floor(u*e)),this.addPoly(n,s,o)},render:function(n){var t=dhtmlx.html.create("DIV"),i;t.style.cssText="position:absolute; width:100%; height:100%; top:0px; left:0px;";n.appendChild(t);i=dhtmlx._isIE?"":"src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='";t.innerHTML="<map id='"+this._id+"' name='"+this._id+"'>"+this._map.join("\n")+"<\/map><img "+i+" class='dhx_map_img' usemap='#"+this._id+"' onmousedown='return false;'>";n._htmlmap=t;this._map=[]}};dhtmlx.chart={};dhtmlx.chart.scatter={pvt_render_scatter:function(n,t,i,r,u,f){var e,o,h,s;if(!this._settings.xValue)return dhtmlx.log("warning","Undefined propery: xValue");for(e=this._getLimits(),o=this._getLimits("h","xValue"),u||(this.canvases.x||(this.canvases.x=new dhtmlx.ui.Canvas(this._obj,"axis_x")),this.canvases.y||(this.canvases.y=new dhtmlx.ui.Canvas(this._obj,"axis_y")),this._drawYAxis(this.canvases.y.getCanvas(),t,i,r,e.min,e.max),this._drawHXAxis(this.canvases.x.getCanvas(),t,i,r,o.min,o.max)),e={min:this._settings.yAxis.start,max:this._settings.yAxis.end},o={min:this._settings.xAxis.start,max:this._settings.xAxis.end},h=this._getScatterParams(n,t,i,r,o,e),this._mapStart=i,s=0;s<t.length;s++)this._drawScatterItem(n,f,i,r,h,o,e,t[s],u)},_getScatterParams:function(n,t,i,r,u,f){var e={};return e.totalHeight=r.y-i.y,e.totalWidth=r.x-i.x,this._calcScatterUnit(e,u.min,u.max,e.totalWidth,"X"),this._calcScatterUnit(e,f.min,f.max,e.totalHeight,"Y"),e},_drawScatterItem:function(n,t,i,r,u,f,e,o,s){var h=this._calculateScatterItemPosition(u,r,i,f,o,"X"),c=this._calculateScatterItemPosition(u,i,r,e,o,"Y");this._drawItem(n,h,c,o,this._settings.label.call(this,o),s,t)},_calculateScatterItemPosition:function(n,t,i,r,u,f){var o=this._settings[f=="X"?"xValue":"value"].call(this,u),h=n["valueFactor"+f],s=(parseFloat(o||0)-r.min)*h,c=n["unit"+f],e=i[f.toLowerCase()]-(f=="X"?-1:1)*Math.floor(c*s);return s<0&&(e=i[f.toLowerCase()]),o>r.max&&(e=t[f.toLowerCase()]),o<r.min&&(e=i[f.toLowerCase()]),e},_calcScatterUnit:function(n,t,i,r,u){var f=this._getRelativeValue(t,i);u=u||"";n["relValue"+u]=f[0];n["valueFactor"+u]=f[1];n["unit"+u]=n["relValue"+u]?r/n["relValue"+u]:10}};dhtmlx.chart.radar={pvt_render_radar:function(n,t,i,r,u,f){this._renderRadarChart(n,t,i,r,u,f)},_renderRadarChart:function(n,t,i,r,u,f){var o,s;if(t.length){var e=this._getPieParameters(i,r),h=this._settings.radius?this._settings.radius:e.radius,c=this._settings.x?this._settings.x:e.x,l=this._settings.y?this._settings.y:e.y,a=[];for(o=0;o<t.length;o++)a.push(1);s=this._getRatios(a,t.length);this._mapStart=i;u||this._drawRadarAxises(s,c,l,h,t);this._drawRadarData(n,s,c,l,h,t,u,f)}},_drawRadarData:function(n,t,i,r,u,f,e,o){var w,l,s,h,a,it,rt,b,c,ut,ft,k,v,y,d,p,g,nt,tt;for(s=this._settings,a=s.yAxis.start,it=s.yAxis.end,tt=this._getRelativeValue(a,it),k=tt[0],nt=k?u/k:u/2,g=tt[1],v=-Math.PI/2,w=l=v,c=[],b=0,h=0;h<f.length;h++)p?d=p:(y=s.value(f[h]),d=(parseFloat(y||0)-a)*g),ut=Math.floor(nt*d),y=s.value(h!=f.length-1?f[h+1]:f[0]),p=(parseFloat(y||0)-a)*g,ft=Math.floor(nt*p),w=l,l=h!=f.length-1?v+t[h]-.0001:v,rt=b||this._getPositionByAngle(w,i,r,ut),b=this._getPositionByAngle(l,i,r,ft),c.push(rt);s.fill&&this._fillRadarChart(n,c,f);s.disableLines||this._strokeRadarChart(n,c,f);s.disableItems||this._drawRadarItemMarkers(n,c,f,e,o);c=null},_drawRadarItemMarkers:function(n,t,i,r,u){for(var f=0;f<t.length;f++)this._drawItem(n,t[f].x,t[f].y,i[f],this._settings.label.call(this,i),r,u)},_fillRadarChart:function(n,t,i){var u,f,r;for(n.globalAlpha=this._settings.alpha.call(this,{}),n.beginPath(),r=0;r<t.length;r++)n.fillStyle=this._settings.fill.call(this,i[r]),u=t[r],f=t[r+1]||t[0],r||n.moveTo(u.x,u.y),n.lineTo(f.x,f.y);n.fill();n.globalAlpha=1},_strokeRadarChart:function(n,t,i){for(var u,f,r=0;r<t.length;r++)u=t[r],f=t[r+1]||t[0],this._drawLine(n,u.x,u.y,f.x,f.y,this._settings.line.color.call(this,i[r]),this._settings.line.width)},_drawRadarAxises:function(n,t,i,r,u){var o=this._settings.yAxis,c=this._settings.xAxis,s=o.start,l=o.end,a=o.step,h={},w=this._configYAxis,d,y,p,ut,nt,k,tt;(typeof w.step=="undefined"||typeof w.start=="undefined"||typeof w.end=="undefined")&&(d=this._getLimits(),h=this._calculateScale(d.min,d.max),s=h.start,l=h.end,a=h.step,o.end=l,o.start=s);var e=[],f,v,g,it=0,ft=r*a/(l-s),rt,b;for(a<1&&(rt=Math.min(this._log10(a),s<=0?0:this._log10(s)),b=Math.pow(10,-rt)),y=[],this.canvases.scale||(this.canvases.scale=new dhtmlx.ui.Canvas(this._obj,"radar_scale")),p=this.canvases.scale.getCanvas(),f=l;f>=s;f-=a){if(h.fixNum&&(f=parseFloat(new Number(f).toFixed(h.fixNum))),e.push(Math.floor(it*ft)+.5),b&&(f=Math.round(f*b)/b),ut=i-r+e[e.length-1],this.canvases.scale.renderTextAt("middle","left",t,ut,o.template(f.toString()),"dhx_axis_item_y dhx_radar"),n.length<2){this._drawScaleSector(p,"arc",t,i,r-e[e.length-1],-Math.PI/2,3*Math.PI/2,f);return}for(nt=-Math.PI/2,k=nt,v=0;v<n.length;v++)f==l&&y.push(k),tt=nt+n[v]-.0001,this._drawScaleSector(p,w.lineShape||"line",t,i,r-e[e.length-1],k,tt,f,v,u[f]),k=tt;it++}for(f=0;f<y.length;f++)g=this._getPositionByAngle(y[f],t,i,r),c.lines.call(this,u[f],f)&&this._drawLine(p,t,i,g.x,g.y,c?c.lineColor.call(this,u[f]):"#cfcfcf",1),this._drawRadarScaleLabel(p,t,i,r,y[f],c?c.template.call(this,u[f]):"&nbsp;")},_drawScaleSector:function(n,t,i,r,u,f,e,o,s){var h,c,l;if(u<0)return!1;h=this._getPositionByAngle(f,i,r,u);c=this._getPositionByAngle(e,i,r,u);l=this._settings.yAxis;l.bg&&(n.beginPath(),n.moveTo(i,r),t=="arc"?n.arc(i,r,u,f,e,!1):(n.lineTo(h.x,h.y),n.lineTo(c.x,c.y)),n.fillStyle=l.bg(o,s),n.moveTo(i,r),n.fill(),n.closePath());l.lines.call(this,o)&&(n.lineWidth=1,n.beginPath(),t=="arc"?n.arc(i,r,u,f,e,!1):(n.moveTo(h.x,h.y),n.lineTo(c.x,c.y)),n.strokeStyle=l.lineColor.call(this,o),n.stroke())},_drawRadarScaleLabel:function(n,t,i,r,u,f){var e=this.canvases.scale.renderText(0,0,f,"dhx_axis_radar_title",1),s=e.scrollWidth,l=e.offsetHeight,o=.001,a=this._getPositionByAngle(u,t,i,r+5),h=0,c=0;(u<0||u>Math.PI)&&(c=-l);u>Math.PI/2&&(h=-s);Math.abs(u+Math.PI/2)<o||Math.abs(u-Math.PI/2)<o?h=-s/2:(Math.abs(u)<o||Math.abs(u-Math.PI)<o)&&(c=-l/2);e.style.top=a.y+c+"px";e.style.left=a.x+h+"px";e.style.width=s+"px";e.style.whiteSpace="nowrap"}};dhtmlx.chart.area={pvt_render_area:function(n,t,i,r,u,f){var g,e,s,p,w,a,o,l,h,b,k,d,c,v,y;if(a=this._calculateLineParams(n,t,i,r,u),e=this._settings,p=e.eventRadius||Math.floor(a.cellWidth/2),t.length){for(o=[],b=e.offset?i.x+a.cellWidth*.5:i.x,s=0;s<t.length;s++)if(w=t[s],h=this._getPointY(w,i,r,a),c=b+a.cellWidth*s,h){if(v=typeof h=="object"?h.y0:h,s&&this._settings.fixOverflow){if(l=this._getPointY(t[s-1],i,r,a),l.out&&l.out==h.out)continue;k=a.cellWidth*(s-1)-.5+b;d=typeof l=="object"?l.y0:l;l.out&&(y=l.out=="min"?r.y:i.y,o.push([this._calcOverflowX(k,c,d,v,y),y]));h.out&&(y=h.out=="min"?r.y:i.y,o.push([this._calcOverflowX(k,c,d,v,y),y]),s==t.length-1&&y==i.y&&o.push([c,i.y]))}h.out||(o.push([c,v]),f.addRect(w.id,[c-p-i.x,v-p-i.y,c+p-i.x,v+p-i.y],u));e.yAxis||(g=!e.offset&&s==t.length-1?"left":"center",this.canvases[u].renderTextAt(!1,g,c,v-e.labelOffset,e.label(w)))}o.length&&(o.push([c,r.y]),o.push([o[0][0],r.y]));n.globalAlpha=this._settings.alpha.call(this,t[0]);n.fillStyle=this._settings.color.call(this,t[0]);n.beginPath();this._path(n,o);n.fill();e.border&&(n.lineWidth=e.borderWidth||1,e.borderColor?n.strokeStyle=e.borderColor.call(this,t[0]):this._setBorderStyles(n,n.fillStyle),n.beginPath(),this._path(n,o),n.stroke());n.lineWidth=1;n.globalAlpha=1}}};dhtmlx.chart.stackedArea={pvt_render_stackedArea:function(n,t,i,r,u,f){var b,k,d,l,e,a,nt,y,p,c,h,s,o,v,w,g;if(c=this._calculateLineParams(n,t,i,r,u),l=this._settings,y=l.eventRadius||Math.floor(c.cellWidth/2),t.length){for(h=[],v=[],s=l.offset?i.x+c.cellWidth*.5:i.x,w=function(n,i){return u?t[n].$startY?i-r.y+t[n].$startY:0:i},g=function(n,t,i){var r=(i.y-t.y)/(i.x-t.x);return r*n+t.y-r*t.x},e=0;e<t.length;e++)p=t[e],e?s+=c.cellWidth:(o=w(e,r.y),h.push([s,o])),o=w(e,this._getPointY(p,i,r,c)),v.push(isNaN(o)&&!e?t[e].$startY||r.y:o),o&&(h.push([s,o]),f.addRect(p.id,[s-y-i.x,o-y-i.y,s+y-i.x,o+y-i.y],u),l.yAxis||(d=!l.offset&&nt?"left":"center",this.canvases[u].renderTextAt(!1,d,s,o-l.labelOffset,l.label(p))));if(h.push([s,w(e-1,r.y)]),u)for(e=t.length-2;e>0;e--)s-=c.cellWidth,o=t[e].$startY,o&&h.push([s,o]);for(h.push([h[0][0],h[0][1]]),n.globalAlpha=this._settings.alpha.call(this,t[0]),n.fillStyle=this._settings.color.call(this,t[0]),n.beginPath(),this._path(n,h),n.fill(),e=0;e<t.length;e++){if(o=v[e],!o)for(e==t.length-1&&(o=t[e].$startY),a=e+1;a<t.length;a++)if(v[a]){b={x:i.x,y:v[0]};k={x:i.x+c.cellWidth*a,y:v[a]};o=g(i.x+c.cellWidth*e,b,k);break}t[e].$startY=o}}}};dhtmlx.chart.spline={pvt_render_spline:function(n,t,i,r,u,f){var c,e,s,h,y,o,k,w,l,p,b,d,g,a,v;if(y=this._calculateLineParams(n,t,i,r,u),c=this._settings,this._mapStart=i,s=[],t.length){for(w=c.offset?i.x+y.cellWidth*.5:i.x,e=0;e<t.length;e++)b=this._getPointY(t[e],i,r,y),b&&(k=e?y.cellWidth*e-.5+w:w,s.push({x:k,y:b,index:e}));for(o=this._getSplineParameters(s),e=0;e<s.length;e++){if(l=s[e].x,d=s[e].y,e<s.length-1){for(p=s[e+1].x,g=s[e+1].y,h=l;h<p;h++)a=this._getSplineYPoint(h,l,e,o.a,o.b,o.c,o.d),a<i.y&&(a=i.y),a>r.y&&(a=r.y),v=this._getSplineYPoint(h+1,l,e,o.a,o.b,o.c,o.d),v<i.y&&(v=i.y),v>r.y&&(v=r.y),this._drawLine(n,h,a,h+1,v,c.line.color(t[e]),c.line.width);this._drawLine(n,p-1,this._getSplineYPoint(h,l,e,o.a,o.b,o.c,o.d),p,g,c.line.color(t[e]),c.line.width)}this._drawItem(n,l,d,t[s[e].index],c.label(t[s[e].index]),u,f)}}},_getSplineParameters:function(n){for(var u,f,r,s,h,c,l,i=[],e=[],o=n.length,t=0;t<o-1;t++)i[t]=n[t+1].x-n[t].x,e[t]=(n[t+1].y-n[t].y)/i[t];for(u=[],f=[],u[0]=0,u[1]=2*(i[0]+i[1]),f[0]=0,f[1]=6*(e[1]-e[0]),t=2;t<o-1;t++)u[t]=2*(i[t-1]+i[t])-i[t-1]*i[t-1]/u[t-1],f[t]=6*(e[t]-e[t-1])-i[t-1]*f[t-1]/u[t-1];for(r=[],r[o-1]=r[0]=0,t=o-2;t>=1;t--)r[t]=(f[t]-i[t]*r[t+1])/u[t];for(s=[],h=[],c=[],l=[],t=0;t<o-1;t++)s[t]=n[t].y,h[t]=-i[t]*r[t+1]/6-i[t]*r[t]/3+(n[t+1].y-n[t].y)/i[t],c[t]=r[t]/2,l[t]=(r[t+1]-r[t])/(6*i[t]);return{a:s,b:h,c:c,d:l}},_getSplineYPoint:function(n,t,i,r,u,f,e){return r[i]+(n-t)*(u[i]+(n-t)*(f[i]+(n-t)*e[i]))}};dhtmlx.chart.barH={pvt_render_barH:function(n,t,i,r,u,f){var b,e,y,tt,c,h,ut,p,l,k,st,d,it,ft,et,ot,o,w,g,v,nt,s;y=(r.y-i.y)/t.length;ut=this._getLimits("h");p=ut.max;l=ut.min;ot=r.x-i.x;nt=!!this._settings.yAxis;u||this._drawHScales(n,t,i,r,l,p,y);nt&&(p=parseFloat(this._settings.xAxis.end),l=parseFloat(this._settings.xAxis.start));ft=this._getRelativeValue(l,p);d=ft[0];st=ft[1];w=d?ot/d:10;nt||(et=10,w=d?(ot-et)/d:10);e=parseInt(this._settings.width,10);var a=this._series.length,rt=this._settings.seriesMargin,ht=this._settings.seriesPadding;for(this._series&&e*a+ht+(a>2?rt*a:0)>y&&(e=y/a-ht-(a>2?rt:0)),b=(y-e*a-rt*(a-1))/2,this._settings.border&&(e=parseInt(e,10),b=parseInt(b,10)),it=typeof this._settings.radius!="undefined"?parseInt(this._settings.radius,10):Math.round(e/5),k=!1,c=this._settings.gradient,c&&typeof c!="function"?(k=c,c=!1):c&&(c=n.createLinearGradient(i.x,i.y,r.x,i.y),this._settings.gradient(c)),nt||this._drawLine(n,i.x-.5,i.y,i.x-.5,r.y,"#000000",1),h=0;h<t.length;h++){if(o=parseFloat(this._settings.value(t[h]||0)),o>p&&(o=p),o-=l,o*=st,g=i.x,v=i.y+b+(a>2?rt*u:0)+parseInt(h*y,10)+e*u,o<0&&this._settings.origin=="auto"||this._settings.xAxis&&o===0&&!(this._settings.origin!="auto"&&this._settings.origin>l)){this.canvases[u].renderTextAt("middle","right",g+10,v+e/2+b,this._settings.label(t[h]));continue}o<0&&this._settings.origin!="auto"&&this._settings.origin>l&&(o=0);nt||(o+=et/w);tt=c||this._settings.color.call(this,t[h]);this._settings.border&&this._drawBarHBorder(n,g,v,e,l,it,w,o,tt);n.globalAlpha=this._settings.alpha.call(this,t[h]);s=this._drawBarH(n,r,g,v,e,l,it,w,o,tt,c,k);k!=!1&&this._drawBarHGradient(n,g,v,e,l,it,w,o,tt,k);n.globalAlpha=1;s[3]==v?(this.canvases[u].renderTextAt("middle","left",s[0]-5,s[3]+Math.floor(e/2),this._settings.label(t[h])),f.addRect(t[h].id,[s[0]-i.x,s[3]-i.y,s[2]-i.x,s[3]+e-i.y],u)):(this.canvases[u].renderTextAt("middle",!1,s[2]+5,s[1]+Math.floor(e/2),this._settings.label(t[h])),f.addRect(t[h].id,[s[0]-i.x,v-i.y,s[2]-i.x,s[3]-i.y],u))}},_setBarHPoints:function(n,t,i,r,u,f,e,o,s){var c=0,y,h,p,l,a,v;return u>f*e&&(y=(u-f*e)/u,c=-Math.asin(y)+Math.PI/2),n.moveTo(t,i+o),h=t+f*e-u-(u?0:o),u<f*e&&n.lineTo(h,i+o),p=i+u,u&&u>0&&n.arc(h,p,u-o,-Math.PI/2+c,0,!1),l=i+r-u-(u?0:o),a=h+u-(u?o:0),n.lineTo(a,l),u&&u>0&&n.arc(h,l,u-o,0,Math.PI/2-c,!1),v=i+r-o,n.lineTo(t,v),s||n.lineTo(t,i+o),[a,v]},_drawHScales:function(n,t,i,r,u,f,e){var o=0;this._settings.xAxis&&(this.canvases.x||(this.canvases.x=new dhtmlx.ui.Canvas(this._obj)),o=this._drawHXAxis(this.canvases.x.getCanvas(),t,i,r,u,f));this._settings.yAxis&&(this.canvases.y||(this.canvases.y=new dhtmlx.ui.Canvas(this._obj)),this._drawHYAxis(this.canvases.y.getCanvas(),t,i,r,e,o))},_drawHYAxis:function(n,t,i,r,u,f){var e,c;if(this._settings.yAxis){var s,o=parseInt(f?f:i.x,10)-.5,l=r.y+.5,h=i.y;for(this._drawLine(n,o,l,o,h,this._settings.yAxis.color,1),e=0;e<t.length;e++)c=this._settings.origin!="auto"&&this._settings.view=="barH"&&parseFloat(this._settings.value(t[e]))<this._settings.origin,s=h+u/2+e*u,this.canvases.y.renderTextAt("middle",c?!1:"left",c?o+5:o-5,s,this._settings.yAxis.template(t[e]),"dhx_axis_item_y",c?0:o-10),this._settings.yAxis.lines.call(this,t[e])&&this._drawLine(n,i.x,s,r.x,s,this._settings.yAxis.lineColor.call(this,t[e]),1);this._drawLine(n,i.x+.5,h+.5,r.x,h+.5,this._settings.yAxis.lineColor.call(this,{}),1);this._setYAxisTitle(i,r)}},_drawHXAxis:function(n,t,i,r,u,f){var o,h={},s=this._settings.xAxis,k,y,e,l,p,d,w;if(s){var a=r.y+.5,c=i.x-.5,v=r.x-.5,b=i.x;if(this._drawLine(n,c,a,v,a,s.color,1),s.step&&(o=parseFloat(s.step)),(typeof this._configXAxis.step=="undefined"||typeof this._configXAxis.start=="undefined"||typeof this._configXAxis.end=="undefined")&&(h=this._calculateScale(u,f),u=h.start,f=h.end,o=h.step,this._settings.xAxis.end=f,this._settings.xAxis.start=u,this._settings.xAxis.step=o),o!==0){for(k=(v-c)*o/(f-u),y=0,e=u;e<=f;e+=o)h.fixNum&&(e=parseFloat(new Number(e).toFixed(h.fixNum))),l=Math.floor(c+y*k)+.5,e==u&&this._settings.origin=="auto"||!s.lines.call(this,e)||this._drawLine(n,l,a,l,i.y,this._settings.xAxis.lineColor.call(this,e),1),e==this._settings.origin&&(b=l+1),p=e,o<1&&(d=Math.min(this._log10(o),u<=0?0:this._log10(u)),w=Math.pow(10,-d),p=Math.round(e*w)/w),this.canvases.x.renderTextAt(!1,!0,l,a+2,s.template(p.toString()),"dhx_axis_item_x"),y++;return this.canvases.x.renderTextAt(!0,!1,c,r.y+this._settings.padding.bottom-3,this._settings.xAxis.title,"dhx_axis_title_x",r.x-i.x),s.lines.call(this,{})||this._drawLine(n,c,i.y-.5,v,i.y-.5,this._settings.xAxis.color,.2),b}}},_correctBarHParams:function(n,t,i,r,u,f,e){var s=this._settings.yAxis,o=t;return!!s&&this._settings.origin!="auto"&&this._settings.origin>e&&(t+=(this._settings.origin-e)*u,o=t,r=r-(this._settings.origin-e),r<0&&(r*=-1,n.translate(t,i+f),n.rotate(Math.PI),t=.5,i=0),t+=.5),{value:r,x0:t,y0:i,start:o}},_drawBarH:function(n,t,i,r,u,f,e,o,s,h,c,l){var v,a;n.save();a=this._correctBarHParams(n,i,r,s,o,u,f);n.fillStyle=h;n.beginPath();o*a.value>0?(v=this._setBarHPoints(n,a.x0,a.y0,u,e,o,a.value,this._settings.border?1:0),c&&!l&&n.lineTo(t.x,a.y0+(this._settings.border?1:0))):v=[a.x0,a.y0+1];n.fill();n.restore();var y=a.y0,p=a.y0!=r?r:v[1],w=a.y0!=r?a.start-v[0]:a.start,b=a.y0!=r?a.start:v[0];return[w,y,b,p]},_drawBarHBorder:function(n,t,i,r,u,f,e,o,s){n.save();var h=this._correctBarHParams(n,t,i,o,e,r,u);n.beginPath();this._setBorderStyles(n,s);n.globalAlpha=.9;e*h.value>0&&this._setBarHPoints(n,h.x0,h.y0,r,f,e,h.value,n.lineWidth/2,1);n.stroke();n.restore()},_drawBarHGradient:function(n,t,i,r,u,f,e,o,s,h){n.save();var c=this._correctBarHParams(n,t,i,o,e,r,u),l=this._setBarGradient(n,c.x0,c.y0+r,c.x0+e*c.value,c.y0,h,s,"x");n.fillStyle=l.gradient;n.beginPath();e*c.value>0&&this._setBarHPoints(n,c.x0,c.y0+l.offset,r-l.offset*2,f,e,c.value,l.offset);n.fill();n.globalAlpha=1;n.restore()}};dhtmlx.assert(dhtmlx.chart.barH);dhtmlx.chart.stackedBarH={pvt_render_stackedBarH:function(n,t,i,r,u,f){var a,v,ft,w,g=r.x-i.x,b=!!this._settings.yAxis,et=this._getStackedLimits(t),y,nt,p,tt,h,rt,d,e,o,c,s,ut,l,st;a=et.max;v=et.min;y=Math.floor((r.y-i.y)/t.length);u||this._drawHScales(n,t,i,r,v,a,y);b&&(a=parseFloat(this._settings.xAxis.end),v=parseFloat(this._settings.xAxis.start));nt=this._getRelativeValue(v,a);w=nt[0];ft=nt[1];p=w?g/w:10;b||(tt=10,p=w?(g-tt)/w:10);h=parseInt(this._settings.width,10);h+4>y&&(h=y-4);var ht=(y-h)/2,it=0,k=!1,ot=this._settings.gradient;for(ot&&(k=!0),b||this._drawLine(n,i.x-.5,i.y,i.x-.5,r.y,"#000000",1),rt=0,d=0,e=0;e<this._series.length;e++)e==u&&(d=rt),this._series[e].view=="stackedBarH"&&rt++;for(e=0;e<t.length;e++){if(d||(t[e].$startX=i.x),o=parseFloat(this._settings.value(t[e]||0)),o>a&&(o=a),o-=v,o*=ft,c=i.x,s=i.y+ht+e*y,d?c=t[e].$startX:t[e].$startX=c,o<0||this._settings.yAxis&&o===0){this.canvases.y.renderTextAt("middle",!0,c+10,s+h/2,this._settings.label(t[e]));continue}b||(o+=tt/p);ut=this._settings.color.call(this,t[e]);n.globalAlpha=this._settings.alpha.call(this,t[e]);n.fillStyle=this._settings.color.call(this,t[e]);n.beginPath();l=this._setBarHPoints(n,c,s,h,it,p,o,this._settings.border?1:0);ot&&!k&&n.lineTo(i.x+g,s+(this._settings.border?1:0));n.fill();k!=!1&&(st=this._setBarGradient(n,c,s+h,c,s,k,ut,"x"),n.fillStyle=st.gradient,n.beginPath(),l=this._setBarHPoints(n,c,s,h,it,p,o,0),n.fill());this._settings.border&&this._drawBarHBorder(n,c,s,h,v,it,p,o,ut);n.globalAlpha=1;this.canvases[u].renderTextAt("middle",!0,t[e].$startX+(l[0]-t[e].$startX)/2-1,s+(l[1]-s)/2,this._settings.label(t[e]));f.addRect(t[e].id,[t[e].$startX-i.x,s-i.y,l[0]-i.x,l[1]-i.y],u);t[e].$startX=l[0]}}};dhtmlx.chart.stackedBar={pvt_render_stackedBar:function(n,t,i,r,u,f){var w,v,b,c,s,et,nt,e=this._settings,ht=r.y-i.y,ct=!!e.yAxis,lt=!!e.xAxis,ot=this._getStackedLimits(t),k=e.origin===0,y,tt,it,h,st,rt,o,l,p,ut,ft,d,a,g;if(w=ot.max,v=ot.min,t.length)for(y=(r.x-i.x)/t.length,u||(b=this._drawScales(t,i,r,v,w,y)),ct&&(w=parseFloat(e.yAxis.end),v=parseFloat(e.yAxis.start)),tt=this._getRelativeValue(v,w),nt=tt[0],et=tt[1],it=nt?ht/nt:10,h=parseInt(e.width,10),h+4>y&&(h=y-4),st=Math.floor((y-h)/2),rt=e.gradient?e.gradient:!1,lt||this._drawLine(n,i.x,r.y+.5,r.x,r.y+.5,"#000000",1),o=0;o<t.length;o++)if((l=parseFloat(e.value(t[o]||0)),this._logScaleCalc&&(l=this._log10(l)),c=i.x+st+o*y,p=k&&l<0,u?s=p?t[o].$startYN:t[o].$startY:(s=b-1,t[o].$startY=s,k&&(p&&(s=b+1),t[o].$startYN=b+1)),l)&&(u||k||(l-=v),l*=et,!(s<i.y+1))){if(e.yAxis&&l===0){this.canvases.y.renderTextAt(!0,!0,c+Math.floor(h/2),s,this._settings.label(t[o]));continue}ut=this._settings.color.call(this,t[o]);ft=Math.abs(s-(k?r.y+v*it:r.y))<3;n.globalAlpha=e.alpha.call(this,t[o]);n.fillStyle=n.strokeStyle=e.color.call(this,t[o]);n.beginPath();d=s-it*l+(ft?p?-1:1:0);a=this._setStakedBarPoints(n,c-(e.border?.5:0),s,h+(e.border?.5:0),d,0,i.y);n.fill();n.stroke();rt&&(n.save(),g=this._setBarGradient(n,c,s,c+h,a[1],rt,ut,"y"),n.fillStyle=g.gradient,n.beginPath(),a=this._setStakedBarPoints(n,c+g.offset,s,h-g.offset*2,d,e.border?1:0,i.y),n.fill(),n.restore());e.border&&(n.save(),typeof e.border=="string"?n.strokeStyle=e.border:this._setBorderStyles(n,ut),n.beginPath(),this._setStakedBarPoints(n,c-.5,parseInt(s,10)+.5,h+1,parseInt(d,10)+.5,0,i.y,ft),n.stroke(),n.restore());n.globalAlpha=1;this.canvases[u].renderTextAt(!1,!0,c+Math.floor(h/2),a[1]+(s-a[1])/2-7,this._settings.label(t[o]));f.addRect(t[o].id,[c-i.x,a[1]-i.y,a[0]-i.x,t[o][p?"$startYN":"$startY"]-i.y],u);t[o][p?"$startYN":"$startY"]=a[1]}},_setStakedBarPoints:function(n,t,i,r,u,f,e,o){var c,s,h;return n.moveTo(t,i),u<e&&(u=e),n.lineTo(t,u),c=t+r,s=u,n.lineTo(c,s),h=t+r,n.lineTo(h,i),o||n.lineTo(t,i),[h,s]}};dhtmlx.chart.line={pvt_render_line:function(n,t,i,r,u,f){var s,e,o,y,b,l,a,v,p,w,c,h;if(y=this._calculateLineParams(n,t,i,r,u),s=this._settings,t.length){for(b=s.offset?i.x+y.cellWidth*.5:i.x,o=[],e=0;e<t.length;e++)if(h=this._getPointY(t[e],i,r,y),h){if(a=e?y.cellWidth*e-.5+b:b,p=typeof h=="object"?h.y0:h,e&&this._settings.fixOverflow){if(c=this._getPointY(t[e-1],i,r,y),c.out&&c.out==h.out)continue;l=y.cellWidth*(e-1)-.5+b;v=typeof c=="object"?c.y0:c;c.out&&(w=c.out=="min"?r.y:i.y,o.push({x:this._calcOverflowX(l,a,v,p,w),y:w}));h.out&&(w=h.out=="min"?r.y:i.y,o.push({x:this._calcOverflowX(l,a,v,p,w),y:w}))}h.out||o.push({x:a,y:h,index:e})}for(this._mapStart=i,e=1;e<=o.length;e++)l=o[e-1].x,v=o[e-1].y,e<o.length&&(a=o[e].x,p=o[e].y,this._drawLine(n,l,v,a,p,s.line.color.call(this,t[e-1]),s.line.width),s.line&&s.line.shadow&&(n.globalAlpha=.3,this._drawLine(n,l+2,v+s.line.width+8,a+2,p+s.line.width+8,"#eeeeee",s.line.width+3),n.globalAlpha=1)),typeof o[e-1].index!="undefined"&&this._drawItem(n,l,v,t[o[e-1].index],s.label(t[o[e-1].index]),u,f,i)}},_calcOverflowX:function(n,t,i,r,u){return n+(u-i)*(t-n)/(r-i)},_drawItem:function(n,t,i,r,u,f,e){var o=this._settings.item,s=parseInt(o.radius.call(this,r),10)||0,l=this._mapStart,a,h,c;if(s){if(n.save(),o.shadow){for(n.lineWidth=1,n.strokeStyle="#bdbdbd",n.fillStyle="#bdbdbd",a=[.1,.2,.3],h=a.length-1;h>=0;h--)n.globalAlpha=a[h],n.strokeStyle="#d0d0d0",n.beginPath(),this._strokeChartItem(n,t,i+2*s/3,s+h+1,o.type),n.stroke();n.beginPath();n.globalAlpha=.3;n.fillStyle="#bdbdbd";this._strokeChartItem(n,t,i+2*s/3,s+1,o.type);n.fill()}n.restore();o.type=="image"&&o.src?this._drawImage(n,t-s,i-s,o.src,s*2,s*2):(n.lineWidth=o.borderWidth,n.fillStyle=o.color.call(this,r),n.strokeStyle=o.borderColor.call(this,r),n.globalAlpha=o.alpha.call(this,r),n.beginPath(),this._strokeChartItem(n,t,i,s+1,o.type),n.fill(),n.stroke(),n.globalAlpha=1)}u&&this.canvases[f].renderTextAt(!1,!0,t,i-s-this._settings.labelOffset,this._settings.label.call(this,r));c=this._settings.eventRadius||s+1;e.addRect(r.id,[t-c-l.x,i-c-l.y,t+c-l.x,i+c-l.y],f)},_drawImage:function(n,t,i,r,u,f){var e=document.createElement("img"),o;e.style.display="none";e.style.width=u+"px";e.style.height=f+"px";document.body.appendChild(e);e.src=r;o=function(){n.drawImage(e,t,i)};e.complete?o(e):e.onload=o},_strokeChartItem:function(n,t,i,r,u){var f=[],e;t=parseInt(t,10);i=parseInt(i,10);u&&(u=="square"||u=="s")?(r*=Math.sqrt(2)/2,f=[[t-r-n.lineWidth/2,i-r],[t+r,i-r],[t+r,i+r],[t-r,i+r],[t-r,i-r]]):u&&(u=="diamond"||u=="d")?(e=n.lineWidth>1?n.lineWidth*Math.sqrt(2)/4:0,f=[[t,i-r],[t+r,i],[t,i+r],[t-r,i],[t+e,i-r-e]]):f=u&&(u=="triangle"||u=="t")?[[t,i-r],[t+Math.sqrt(3)*r/2,i+r/2],[t-Math.sqrt(3)*r/2,i+r/2],[t,i-r]]:[[t,i,r,0,Math.PI*2,!0]];this._path(n,f)},_getPointY:function(n,t,i,r){var o=r.minValue,s=r.maxValue,h=r.unit,c=r.valueFactor,f=this._settings.value(n),e=(parseFloat(f||0)-o)*c,u;return this._settings.yAxis||(e+=r.startValue/h),u=i.y-h*e,this._settings.fixOverflow&&(this._settings.view=="line"||this._settings.view=="area")?f>s?u={y:t.y,y0:u,out:"max"}:(e<0||f<o)&&(u={y:i.y,y0:u,out:"min"}):(f>s&&(u=t.y),(e<0||f<o)&&(u=i.y)),u},_calculateLineParams:function(n,t,i,r,u){var f={},e,o,s,h;return f.totalHeight=r.y-i.y,f.cellWidth=(r.x-i.x)/(this._settings.offset?t.length:t.length-1),o=!!this._settings.yAxis,s=this._settings.view.indexOf("stacked")!=-1?this._getStackedLimits(t):this._getLimits(),f.maxValue=s.max,f.minValue=s.min,u||this._drawScales(t,i,r,f.minValue,f.maxValue,f.cellWidth),o&&(f.maxValue=parseFloat(this._settings.yAxis.end),f.minValue=parseFloat(this._settings.yAxis.start)),h=this._getRelativeValue(f.minValue,f.maxValue),e=h[0],f.valueFactor=h[1],f.unit=e?f.totalHeight/e:10,f.startValue=0,o||(f.startValue=10,f.unit!=f.totalHeight&&(f.unit=e?(f.totalHeight-f.startValue)/e:10)),f}};dhtmlx.chart.bar={pvt_render_bar:function(n,t,i,r,u,f){var o,v,e,et,w,h,b,ct,ot,nt,y,tt,k,lt=r.y-i.y,c,it,d,st,rt,s,a,g,ft,p;for(k=!!this._settings.yAxis,tt=!!this._settings.xAxis,et=this._getLimits(),w=et.max,h=et.min,v=(r.x-i.x)/t.length,u||this._settings.origin!="auto"&&!k||this._drawScales(t,i,r,h,w,v),k&&(w=parseFloat(this._settings.yAxis.end),h=parseFloat(this._settings.yAxis.start)),ot=this._getRelativeValue(h,w),b=ot[0],ct=ot[1],y=b?lt/b:b,k||this._settings.origin!="auto"&&tt||(nt=10,y=b?(lt-nt)/b:nt),!u&&this._settings.origin!="auto"&&!k&&this._settings.origin>h&&this._drawXAxis(n,t,i,r,v,r.y-y*(this._settings.origin-h)),o=parseInt(this._settings.width,10),c=0,it=0,e=0;e<this._series.length;e++)e==u&&(it=c),this._series[e].view=="bar"&&c++;d=this._settings.seriesMargin;st=this._settings.seriesPadding;this._series&&o*c+st+(c>2?d*c:0)>v&&(o=v/c-st-(c>2?d:0));rt=(v-o*c-d*(c-1))/2;this._settings.border&&(o=parseInt(o,10),rt=parseInt(rt,10));var ht=typeof this._settings.radius!="undefined"?parseInt(this._settings.radius,10):Math.round(o/5),ut=!1,l=this._settings.gradient;for(l&&typeof l!="function"?(ut=l,l=!1):l&&(l=n.createLinearGradient(0,r.y,0,i.y),this._settings.gradient(l)),tt||this._drawLine(n,i.x,r.y+.5,r.x,r.y+.5,"#000000",1),e=0;e<t.length;e++)if(s=parseFloat(this._settings.value(t[e])||0),!isNaN(s)){if(s>w&&(s=w),s-=h,s*=ct,a=i.x+rt+(c>2?d*it:0)+e*v+o*it,g=r.y,s<0||this._settings.yAxis&&s===0&&!(this._settings.origin!="auto"&&this._settings.origin>h)){this.canvases[u].renderTextAt(!0,!0,a+Math.floor(o/2),g,this._settings.label(t[e]));continue}k||this._settings.origin!="auto"&&tt||(s+=nt/y);ft=l||this._settings.color.call(this,t[e]);n.globalAlpha=this._settings.alpha.call(this,t[e]);p=this._drawBar(n,i,a,g,o,h,ht,y,s,ft,l,ut);ut&&this._drawBarGradient(n,a,g,o,h,ht,y,s,ft,ut);this._settings.border&&this._drawBarBorder(n,a,g,o,h,ht,y,s,ft);n.globalAlpha=1;p[0]!=a?this.canvases[u].renderTextAt(!1,!0,a+Math.floor(o/2),p[1],this._settings.label(t[e])):this.canvases[u].renderTextAt(!0,!0,a+Math.floor(o/2),p[3],this._settings.label(t[e]));f.addRect(t[e].id,[a-i.x,p[3]-i.y,p[2]-i.x,p[1]-i.y],u)}},_correctBarParams:function(n,t,i,r,u,f,e){var s=this._settings.xAxis,o=i;return!!s&&this._settings.origin!="auto"&&this._settings.origin>e&&(i-=(this._settings.origin-e)*u,o=i,r=r-(this._settings.origin-e),r<0&&(r*=-1,n.translate(t+f,i),n.rotate(Math.PI),t=0,i=0),i-=.5),{value:r,x0:t,y0:i,start:o}},_drawBar:function(n,t,i,r,u,f,e,o,s,h,c,l){var v,a;n.save();n.fillStyle=h;a=this._correctBarParams(n,i,r,s,o,u,f);v=o*a.value>0?this._setBarPoints(n,a.x0,a.y0,u,e,o,a.value,this._settings.border?1:0):[a.x0,a.y0];c&&!l&&n.lineTo(a.x0+(this._settings.border?1:0),t.y);n.fill();n.restore();var y=a.x0,p=a.x0!=i?i+v[0]:v[0],w=a.x0!=i?a.start-v[1]-a.y0:a.y0,b=a.x0!=i?a.start-a.y0:v[1];return[y,w,p,b]},_drawBarBorder:function(n,t,i,r,u,f,e,o,s){var h;n.save();h=this._correctBarParams(n,t,i,o,e,r,u);this._setBorderStyles(n,s);e*h.value>0&&this._setBarPoints(n,h.x0,h.y0,r,f,e,h.value,n.lineWidth/2,1);n.stroke();n.restore()},_drawBarGradient:function(n,t,i,r,u,f,e,o,s,h){n.save();var c=this._correctBarParams(n,t,i,o,e,r,u),l=this._setBarGradient(n,c.x0,c.y0,c.x0+r,c.y0-e*c.value+2,h,s,"y"),a=this._settings.border?1:0;n.fillStyle=l.gradient;e*c.value>0&&this._setBarPoints(n,c.x0+l.offset,c.y0,r-l.offset*2,f,e,c.value,l.offset+a);n.fill();n.restore()},_setBarPoints:function(n,t,i,r,u,f,e,o,s){var c,l,h,p,a,v,y;return n.beginPath(),c=0,u>f*e&&(l=(u-f*e)/u,l<=1&&l>=-1&&(c=-Math.acos(l)+Math.PI/2)),n.moveTo(t+o,i),h=i-Math.floor(f*e)+u+(u?0:o),u<f*e&&n.lineTo(t+o,h),p=t+u,u&&u>0&&n.arc(p,h,u-o,-Math.PI+c,-Math.PI/2,!1),a=t+r-u-o,v=h-u+(u?o:0),n.lineTo(a,v),u&&u>0&&n.arc(a,h,u-o,-Math.PI/2,0-c,!1),y=t+r-o,n.lineTo(y,i),s||n.lineTo(t+o,i),[y,v]}};dhtmlx.chart.pie={pvt_render_pie:function(n,t,i,r,u,f){this._renderPie(n,t,i,r,1,f,u)},_renderPie:function(n,t,i,r,u,f,e){var y,h,l,a,v,g,nt,s,w,b;if(t.length&&(y=this._getPieParameters(i,r),h=this._settings.radius?this._settings.radius:y.radius,!(h<0))){var p=this._getValues(t),k=this._getTotalValue(p),d=this._getRatios(p,k),c=this._settings.x?this._settings.x:y.x,o=this._settings.y?this._settings.y:y.y;for(u==1&&this._settings.shadow&&this._addShadow(n,c,o,h),o=o/u,l=-Math.PI/2,v=[],n.scale(1,u),this._settings.gradient&&(g=u!=1?c+h/3:c,nt=u!=1?o+h/3:o,this._showRadialGradient(n,c,o,h,g,nt)),this._settings.labelLines&&(this._labelMargins=this._getLabelMargins(d,h)),s=0;s<t.length;s++)p[s]&&(n.strokeStyle=t.length==1?this._settings.color.call(this,t[s]):this._settings.lineColor.call(this,t[s]),n.beginPath(),n.moveTo(c,o),v.push(l),a=-Math.PI/2+d[s]-.0001,n.arc(c,o,h,l,a,!1),n.lineTo(c,o),w=this._settings.color.call(this,t[s]),n.fillStyle=w,n.fill(),this._settings.pieInnerText&&this._drawSectorLabel(c,o,5*h/6,l,a,u,this._settings.pieInnerText(t[s],k),!0),this._settings.label&&this._drawSectorLabel(c,o,h,l,a,u,this._settings.label(t[s]),0,this._labelMargins?this._labelMargins[s]:{},n),u!=1&&(this._createLowerSector(n,c,o,l,a,h,!0),n.fillStyle="#000000",n.globalAlpha=.2,this._createLowerSector(n,c,o,l,a,h,!1),n.globalAlpha=1,n.fillStyle=w),f.addSector(t[s].id,l,a,c-i.x,o-i.y/u,h,u,e),l=a);if(n.globalAlpha=.8,v.length>1)for(s=0;s<v.length;s++)b=this._getPositionByAngle(v[s],c,o,h),this._drawLine(n,c,o,b.x,b.y,this._settings.lineColor.call(this,t[s]),2);u==1&&(n.lineWidth=2,n.strokeStyle="#ffffff",n.beginPath(),n.arc(c,o,h+1,0,2*Math.PI,!1),n.stroke());n.globalAlpha=1;n.scale(1,1/u)}},_getLabelMargins:function(n,t){for(var c,l,r={1:[0]},u,g,f,v,i,e,o=1;o<n.length;o++){c=-Math.PI/2+(o>1?n[o-1]-(n[o-1]-n[o-2])/2:n[o-1]/2);l=-Math.PI/2+n[o]-(n[o]-n[o-1])/2;var w=Math.cos(l),y=Math.sin(l),b=Math.cos(c),p=Math.sin(c),k=Math.round((t+8)*Math.abs(Math.sin(l)-Math.sin(c))),a=w<0?y<0?4:3:y<0?1:2,d=b<0?p<0?4:3:p<0?1:2;r[a]||(r[a]=[]);r[a].push(d==a?k:0)}u=[];g=0;for(f in r){var nt=r[f].length,s=0,h=0;if(f==1||f==3){for(i=f-1,v=0;i>0;)r[i]&&(v+=r[i].length),i--;for(u[v+r[f].length-1]={y:0,x:0},i=r[f].length-2;i>=0;)(s||i)&&r[f][i+1]-s<18?s+=18-r[f][i+1]:s=0,u[v+i]={y:s*(f==1?-1:1)},i--;for(e=u.length-r[f].length;e<u.length;e++)u[e].y!=0?(h+=6,u[e].x=h):(u[e].x=0,h=0)}else{for(i=1,u.push({y:0,x:0});i<r[f].length;)r[f][i]-s<18?s+=18-r[f][i]:s=0,u.push({y:s*(f==4?-1:1)}),i++;for(e=u.length-1;e>=u.length-r[f].length;e--)u[e].y!=0?(h+=8,u[e].x=h):(h=0,u[e].x=0)}}return u},_getValues:function(n){for(var i=[],t=0;t<n.length;t++)i.push(parseFloat(this._settings.value(n[t])||0));return i},_getTotalValue:function(n){for(var i=0,t=0;t<n.length;t++)i+=n[t];return i},_getRatios:function(n,t){var r,u=[],f=0,i;for(t=t||this._getTotalValue(n),i=0;i<n.length;i++)r=n[i],u[i]=Math.PI*2*(t?(r+f)/t:1/n.length),f+=r;return u},_getPieParameters:function(n,t){var i=t.x-n.x,r=t.y-n.y,u=n.x+i/2,f=n.y+r/2,e=Math.min(i/2,r/2);return{x:u,y:f,radius:e}},_createLowerSector:function(n,t,i,r,u,f,e){if(n.lineWidth=1,r<=0&&u>=0||r>=0&&u<=Math.PI||Math.abs(r-Math.PI)>.003&&r<=Math.PI&&u>=Math.PI){r<=0&&u>=0&&(r=0,e=!1,this._drawSectorLine(n,t,i,f,r,u));r<=Math.PI&&u>=Math.PI&&(u=Math.PI,e=!1,this._drawSectorLine(n,t,i,f,r,u));var o=(this._settings.height||Math.floor(f/4))/this._settings.cant;n.beginPath();n.arc(t,i,f,r,u,!1);n.lineTo(t+f*Math.cos(u),i+f*Math.sin(u)+o);n.arc(t,i+o,f,u,r,!0);n.lineTo(t+f*Math.cos(r),i+f*Math.sin(r));n.fill();e&&n.stroke()}},_drawSectorLine:function(n,t,i,r,u,f){n.beginPath();n.arc(t,i,r,u,f,!1);n.stroke()},_addShadow:function(n,t,i,r){var f,u;for(n.globalAlpha=.5,f=["#c4c4c4","#c6c6c6","#cacaca","#dcdcdc","#dddddd","#e0e0e0","#eeeeee","#f5f5f5","#f8f8f8"],u=f.length-1;u>-1;u--)n.beginPath(),n.fillStyle=f[u],n.arc(t+1,i+1,r+u,0,Math.PI*2,!0),n.fill();n.globalAlpha=1},_getGrayGradient:function(n){return n.addColorStop(0,"#ffffff"),n.addColorStop(.7,"#7a7a7a"),n.addColorStop(1,"#000000"),n},_showRadialGradient:function(n,t,i,r,u,f){n.beginPath();var e;typeof this._settings.gradient!="function"?(e=n.createRadialGradient(u,f,r/4,t,i,r),e=this._getGrayGradient(e)):e=this._settings.gradient(e);n.fillStyle=e;n.arc(t,i,r,0,Math.PI*2,!0);n.fill();n.globalAlpha=.7},_drawSectorLabel:function(n,t,i,r,u,f,e,o,s,h){var y=this.canvases[0].renderText(0,0,e,0,1),a,b,c,d,tt,ft,nt,it,w,v;if(y){a=y.scrollWidth;y.style.width=a+"px";a>n&&(a=n);b=u-r<.2?4:8;o&&(b=a/1.8);c=r+(u-r)/2;d=i;i=o?5*i/6:i+this._settings.labelOffset;i=i-(b-8)/2;var k=-b,p="right";(c>=Math.PI/2&&c<Math.PI||c<=3*Math.PI/2&&c>=Math.PI)&&(k=-a-k,p="left");tt=0;!o&&f<1&&c>0&&c<Math.PI&&(tt=(this._settings.height||Math.floor(i/4))/f);var g=(t+Math.floor(i+tt)*Math.sin(c))*f+-8,l=n+Math.floor(i+b/2)*Math.cos(c)+k,rt=u<Math.PI/2+.01,ut=r<Math.PI/2;ut&&rt?l=Math.max(l,n+3):ut||rt?o||this._settings.labelLines||!(c>=Math.PI/2&&c<Math.PI||c<=3*Math.PI/2&&c>=Math.PI)||(l+=a/3):l=Math.min(l,n-a);this._settings.labelLines&&!o&&(ft=Math.abs((Math.abs(s||0)+Math.abs(d*Math.sin(c)))/Math.sin(c)),s.y&&(g+=s.y),p=="left"?l-=s.x:l+=s.x,h.beginPath(),h.strokeStyle="#555",nt=n+d*Math.cos(c),it=t+d*Math.sin(c),h.moveTo(nt,it),w=l-(p=="left"?k-8:2),v=g,p=="left"&&w>nt?(w=nt-Math.abs(v-it+16)/Math.tan(c-Math.PI),v=v+16,c<Math.PI&&(v-=8)):v+=8,h.lineTo(w,v),h.lineTo(w+(p=="left"?-5:5),v),h.stroke(),g=v-8,l=w+k+(p=="left"?-15:15));y.style.top=g+"px";y.style.left=l+"px";y.style.width=a+"px";y.style.textAlign=p;y.style.whiteSpace="nowrap"}}};dhtmlx.chart.pie3D={pvt_render_pie3D:function(n,t,i,r,u,f){this._renderPie(n,t,i,r,this._settings.cant,f)}};dhtmlx.chart.donut={pvt_render_donut:function(n,t,i,r,u,f){if(t.length){this._renderPie(n,t,i,r,1,f);var e=this._settings,o=this._getPieParameters(i,r),s=e.radius?e.radius:o.radius,h=e.innerRadius&&e.innerRadius<s?e.innerRadius:s/3,c=e.x?e.x:o.x,l=e.y?e.y:o.y;n.fillStyle="#ffffff";n.beginPath();n.arc(c,l,h,0,Math.PI*2,!0);n.fill()}}};dhtmlx.DataDriver.dhtmlxgrid={_grid_getter:"_get_cell_value",toObject:function(n){return this._grid=n,n},getRecords:function(n){return n.rowsBuffer},getDetails:function(n){for(var i={},t=0;t<this._grid.getColumnsNum();t++)i["data"+t]=this._grid[this._grid_getter](n,t);return i},getInfo:function(){return{_size:0,_from:0}}};dhtmlx.ui.Canvas=function(n,t,i){this._canvas_labels=[];this._canvas_name=t;this._obj=n;var r=n.offsetWidth*(window.devicePixelRatio||1),u=n.offsetHeight*(window.devicePixelRatio||1),i=i||"";i+=";width:"+n.offsetWidth+"px;height:"+n.offsetHeight+"px;";this._prepareCanvas(t,i,r,u)};dhtmlx.ui.Canvas.prototype={_prepareCanvas:function(n,t,i,r){return this._canvas=dhtmlx.html.create("canvas",{width:i,height:r,canvas_id:n,style:t||""}),this._obj.appendChild(this._canvas),this._canvas.getContext||(dhtmlx._isIE?(dhtmlx.require("thirdparty/excanvas/excanvas.js"),G_vmlCanvasManager.init_(document),G_vmlCanvasManager.initElement(this._canvas)):dhtmlx.error("Canvas is not supported in the current browser")),this._canvas},getCanvas:function(n){var t=(this._canvas||this._prepareCanvas()).getContext(n||"2d");return this._dhtmlxDevicePixelRatio||(this._dhtmlxDevicePixelRatio=!0,t.scale(window.devicePixelRatio||1,window.devicePixelRatio||1)),t},_resizeCanvas:function(){if(this._canvas){var n=this._canvas.parentNode.offsetWidth,t=this._canvas.parentNode.offsetHeight;this._canvas.setAttribute("width",n*(window.devicePixelRatio||1));this._canvas.setAttribute("height",t*(window.devicePixelRatio||1));this._canvas.style.width=n+"px";this._canvas.style.height=t+"px";this._dhtmlxDevicePixelRatio=!1}},renderText:function(n,t,i,r,u){if(i){var f=dhtmlx.html.create("DIV",{"class":"dhx_canvas_text"+(r?" "+r:""),style:"left:"+n+"px; top:"+t+"px;"},i);return this._obj.appendChild(f),this._canvas_labels.push(f),u&&(f.style.width=u+"px"),f}},renderTextAt:function(n,t,i,r,u,f,e){var o=this.renderText.call(this,i,r,u,f,e);return o&&(n&&(o.style.top=n=="middle"?parseInt(r-o.offsetHeight/2,10)+"px":r-o.offsetHeight+"px"),t&&(o.style.left=t=="left"?i-o.offsetWidth+"px":parseInt(i-o.offsetWidth/2,10)+"px")),o},clearCanvas:function(n){for(var t=[],i=0;i<this._canvas_labels.length;i++)this._obj.removeChild(this._canvas_labels[i]);if(this._canvas_labels=[],!n&&this._obj._htmlmap){for(t=this._getMapAreas();t.length;)t[0].parentNode.removeChild(t[0]),t.splice(0,1);t=null;this._obj._htmlmap.getElementsByTagName("AREA").length||(this._obj._htmlmap.parentNode.removeChild(this._obj._htmlmap),this._obj._htmlmap=null)}this.getCanvas().clearRect(0,0,this._canvas.width,this._canvas.height)},toggleCanvas:function(){this._toggleCanvas(this._canvas.style.display=="none")},showCanvas:function(){this._toggleCanvas(!0)},hideCanvas:function(){this._toggleCanvas(!1)},_toggleCanvas:function(n){for(var i,t=0;t<this._canvas_labels.length;t++)this._canvas_labels[t].style.display=n?"":"none";if(this._obj._htmlmap)for(i=this._getMapAreas(),t=0;t<i.length;t++)n?i[t].removeAttribute("disabled"):i[t].setAttribute("disabled","true");this._canvas.style.display=n?"":"none"},_getMapAreas:function(){for(var i=[],t=this._obj._htmlmap.getElementsByTagName("AREA"),n=0;n<t.length;n++)t[n].getAttribute("userdata")==this._canvas_name&&i.push(t[n]);return i}};dhtmlXChart=function(n){this.name="Chart";dhtmlx.assert_enabled()&&this._assert();dhtmlx.extend(this,dhtmlx.Settings);this._parseContainer(n,"dhx_chart");dhtmlx.extend(this,dhtmlx.AtomDataLoader);dhtmlx.extend(this,dhtmlx.DataLoader);this.data.provideApi(this,!0);dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.MouseEvents);dhtmlx.destructors.push(this);dhtmlx.extend(this,dhtmlx.Group);dhtmlx.extend(this,dhtmlx.AutoTooltip);for(var t in dhtmlx.chart)dhtmlx.extend(this,dhtmlx.chart[t]);n.preset&&this.definePreset(n);this._parseSettings(n,this.defaults);this._series=[this._settings];this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render()},this));this.attachEvent("onLocateData",this._switchSerie)};dhtmlXChart.prototype={_id:"dhx_area_id",on_click:{dhx_chart_legend_item:function(n,t,i){var r=i.getAttribute("series_id");if(this.callEvent("onLegendClick",[n,r,i])){var f=this._settings,u=f.legend.values,e=u&&typeof u[r].toggle!="undefined"?u[r].toggle:f.legend.toggle;typeof r!="undefined"&&this._series.length>1&&e&&(i.className.indexOf("hidden")!=-1?this.showSeries(r):this.hideSeries(r))}}},on_dblclick:{},on_mouse_move:{},destructor:function(){if(dhtmlx.Destruction.destructor.apply(this,arguments),this.canvases){for(var n in this.canvases)this.canvases[n]._obj=null,this.canvases[n]=null;this.canvases=null}this.legendObj&&(this.legendObj.innerHTML="",this.legendObj=null);this.config.tooltip&&(this.config.tooltip._obj=null,this.config.tooltip._dataobj=null)},bind:function(){dhtmlx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhtmlx.BaseBind.legacySync.apply(this,arguments)},resize:function(){for(var n in this.canvases)this.canvases[n]._resizeCanvas();this.render()},view_setter:function(n){return dhtmlx.chart[n]||dhtmlx.error("Chart type extension is not loaded: "+n),typeof this._settings.offset=="undefined"&&(this._settings.offset=!(n=="area"||n=="stackedArea")),n!="radar"||this._settings.yAxis||this.define("yAxis",{}),n=="scatter"&&(this._settings.yAxis||this.define("yAxis",{}),this._settings.xAxis||this.define("xAxis",{})),n},clearCanvas:function(){if(this.canvases&&typeof this.canvases=="object")for(var n in this.canvases)this.canvases[n].clearCanvas()},render:function(){var t,n,r,i,u;if(this.callEvent("onBeforeRender",[this.data])){if(this.canvases&&typeof this.canvases=="object")for(n in this.canvases)this.canvases[n].clearCanvas();else this.canvases={};for(this._settings.legend&&(this.canvases.legend||(this.canvases.legend=new dhtmlx.ui.Canvas(this._obj,"legend")),this._drawLegend(this.data.getRange(),this._obj.offsetWidth)),t=this._getChartBounds(this._obj.offsetWidth,this._obj.offsetHeight),this._map=i=new dhtmlx.ui.Map(this._id),u=this._settings,r=this._getChartData(),n=0;n<this._series.length;n++)this._settings=this._series[n],this.canvases[n]||(this.canvases[n]=new dhtmlx.ui.Canvas(this._obj,n,"z-index:"+(2+n))),this["pvt_render_"+this._settings.view](this.canvases[n].getCanvas(),r,t.start,t.end,n,i);i.render(this._obj);this._obj.lastChild.style.zIndex=1e3;this._applyBounds(this._obj.lastChild,t);this.callEvent("onAfterRender",[]);this._settings=u}},_applyBounds:function(n,t){var i={},r;i.left=t.start.x;i.top=t.start.y;i.width=t.end.x-t.start.x;i.height=t.end.y-t.start.y;for(r in i)n.style[r]=i[r]+"px"},_getChartData:function(){var s,r,i,u,n,o,f,t,h,e;if(u=this.data.getRange(),s=this._settings.view.toLowerCase().indexOf("barh")!=-1?"yAxis":"xAxis",r=this._settings[s],r&&r.units&&typeof r.units=="object"){if(i=r.units,t=[],typeof i.start!="undefined"&&typeof i.end!="undefined"&&typeof i.next!="undefined")for(f=i.start;f<=i.end;)t.push(f),f=i.next.call(this,f);else Object.prototype.toString.call(i)==="[object Array]"&&(t=i);if(o=[],t.length){for(h=r.value,e={},n=0;n<u.length;n++)e[h(u[n])]=n;for(n=0;n<t.length;n++)typeof e[t[n]]!="undefined"?(u[e[t[n]]].$unit=t[n],o.push(u[e[t[n]]])):o.push({$unit:t[n]})}return o}return u},value_setter:dhtmlx.Template.obj_setter,xValue_setter:dhtmlx.Template.obj_setter,yValue_setter:function(n){this.define("value",n)},alpha_setter:dhtmlx.Template.obj_setter,label_setter:dhtmlx.Template.obj_setter,lineColor_setter:dhtmlx.Template.obj_setter,borderColor_setter:dhtmlx.Template.obj_setter,pieInnerText_setter:dhtmlx.Template.obj_setter,gradient_setter:function(n){return typeof n!="function"&&n&&n===!0&&(n="light"),n},colormap:{RAINBOW:function(n){var t=Math.floor(this.indexById(n.id)/this.dataCount()*1536);return t==1536&&(t-=1),this._rainbow[Math.floor(t/256)](t%256)}},color_setter:function(n){return this.colormap[n]||dhtmlx.Template.obj_setter(n)},fill_setter:function(n){return!n||n==0?!1:dhtmlx.Template.obj_setter(n)},definePreset:function(n){this.define("preset",n.preset);delete n.preset},preset_setter:function(n){var t,r,i;if(this.defaults=dhtmlx.extend({},this.defaults),typeof dhtmlx.presets.chart[n]=="object"){i=dhtmlx.presets.chart[n];for(t in i)if(typeof i[t]=="object")if(this.defaults[t]&&typeof this.defaults[t]=="object"){this.defaults[t]=dhtmlx.extend({},this.defaults[t]);for(r in i[t])this.defaults[t][r]=i[t][r]}else this.defaults[t]=dhtmlx.extend({},i[t]);else this.defaults[t]=i[t];return n}return!1},legend_setter:function(n){return n?(typeof n!="object"&&(n={template:n}),this._mergeSettings(n,{width:150,height:18,layout:"y",align:"left",valign:"bottom",template:"",toggle:this._settings.view.toLowerCase().indexOf("stacked")!=-1?"":"hide",marker:{type:"square",width:15,height:15,radius:3},margin:4,padding:3}),n.template=dhtmlx.Template.setter(n.template),n):(this.legendObj&&(this.legendObj.innerHTML="",this.legendObj=null),!1)},defaults:{color:"RAINBOW",alpha:"1",label:!1,value:"{obj.value}",padding:{},view:"pie",lineColor:"#ffffff",cant:.5,width:30,labelWidth:100,line:{width:2,color:"#1293f8"},seriesMargin:1,seriesPadding:4,item:{radius:3,borderColor:"#636363",borderWidth:1,color:"#ffffff",alpha:1,type:"r",shadow:!1},shadow:!0,gradient:!1,border:!0,labelOffset:20,origin:"auto"},item_setter:function(n){var i,t;for(typeof n!="object"&&(n={color:n,borderColor:n}),this._mergeSettings(n,dhtmlx.extend({},this.defaults.item)),i=["alpha","borderColor","color","radius"],t=0;t<i.length;t++)n[i[t]]=dhtmlx.Template.setter(n[i[t]]);return n},line_setter:function(n){return typeof n!="object"&&(n={color:n}),dhtmlx.extend(this.defaults.line,n),n=dhtmlx.extend({},this.defaults.line),n.color=dhtmlx.Template.setter(n.color),n},padding_setter:function(n){return typeof n!="object"&&(n={left:n,right:n,top:n,bottom:n}),this._mergeSettings(n,{left:50,right:20,top:35,bottom:40}),n},xAxis_setter:function(n){if(!n)return!1;typeof n!="object"&&(n={template:n});n.value||(n.value=n.template);this._mergeSettings(n,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",value:"{obj}",lines:!0});return this._converToTemplate(["lineColor","template","lines","value"],n),this._configXAxis=dhtmlx.extend({},n),n},yAxis_setter:function(n){if(!n)return!1;this._mergeSettings(n,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",lines:!0,bg:"#ffffff"});return this._converToTemplate(["lineColor","template","lines","bg"],n),this._configYAxis=dhtmlx.extend({},n),n},_converToTemplate:function(n,t){for(var i=0;i<n.length;i++)t[n[i]]=dhtmlx.Template.setter(t[n[i]])},_drawScales:function(n,t,i,r,u,f){var e=0;return this._settings.yAxis&&(this.canvases.y||(this.canvases.y=new dhtmlx.ui.Canvas(this._obj,"axis_y")),e=this._drawYAxis(this.canvases.y.getCanvas(),n,t,i,r,u)),this._settings.xAxis&&(this.canvases.x||(this.canvases.x=new dhtmlx.ui.Canvas(this._obj,"axis_x")),this._drawXAxis(this.canvases.x.getCanvas(),n,t,i,f,e)),e},_drawXAxis:function(n,t,i,r,u,f){for(var a,s=i.x-.5,h=parseInt(f?f:r.y,10)+.5,c=r.x,o,l=!0,v=this._settings.origin===0&&this._settings.view=="stackedBar"?r.y+.5:h,e=0;e<t.length;e++)this._settings.offset===!0?o=s+u/2+e*u:(o=e==t.length-1?r.x:s+e*u,l=!!e),o=Math.ceil(o)-.5,a=this._settings.origin!="auto"&&this._settings.view=="bar"&&parseFloat(this._settings.value(t[e]))<this._settings.origin,this._drawXAxisLabel(o,v,t[e],l,a),(this._settings.offset||e)&&this._settings.xAxis.lines.call(this,t[e])&&this._drawXAxisLine(n,o,r.y,i.y,t[e]);(this.canvases.x.renderTextAt(!0,!1,s,r.y+this._settings.padding.bottom-3,this._settings.xAxis.title,"dhx_axis_title_x",r.x-i.x),this._drawLine(n,s,h,c,h,this._settings.xAxis.color,1),this._settings.xAxis.lines.call(this,{})&&this._settings.offset)&&this._drawLine(n,c+.5,r.y,c+.5,i.y+.5,this._settings.xAxis.color,.2)},_drawYAxis:function(n,t,i,r,u,f){var o,s={},b,y,e,h,l,k,p;if(this._settings.yAxis){var a=i.x-.5,c=r.y,v=i.y,w=r.y;for(this._settings.yAxis.step&&(o=parseFloat(this._settings.yAxis.step)),(typeof this._configYAxis.step=="undefined"||typeof this._configYAxis.start=="undefined"||typeof this._configYAxis.end=="undefined")&&(s=this._calculateScale(u,f),u=s.start,f=s.end,o=s.step,this._settings.yAxis.end=f,this._settings.yAxis.start=u),this._setYAxisTitle(i,r),o===0&&(f=u,o=1),b=f==u?c-v:(c-v)*o/(f-u),y=0,e=u;e<=f;e+=o)s.fixNum&&(e=parseFloat(new Number(e).toFixed(s.fixNum))),h=Math.floor(c-y*b)+.5,e==u&&this._settings.origin=="auto"||!this._settings.yAxis.lines.call(this,e)||this._drawLine(n,a,h,r.x,h,this._settings.yAxis.lineColor.call(this,e),1),e==this._settings.origin&&(w=h),l=e,o<1&&(k=Math.min(this._log10(o),u<=0?0:this._log10(u)),p=Math.pow(10,-k),l=Math.round(e*p)/p,e=l),this.canvases.y.renderText(0,h-5,this._settings.yAxis.template(l.toString()),"dhx_axis_item_y",i.x-5),y++;return this._drawLine(n,a,c+1,a,v,this._settings.yAxis.color,1),w}},_setYAxisTitle:function(n,t){var r="dhx_axis_title_y"+(dhtmlx._isIE&&dhtmlx._isIE!=9?" dhx_ie_filter":""),i=this.canvases.y.renderTextAt("middle",!1,0,parseInt((t.y-n.y)/2+n.y,10),this._settings.yAxis.title,r);i&&(i.style.left=(dhtmlx.env.transform?(i.offsetHeight-i.offsetWidth)/2:0)+"px")},_calculateScale:function(n,t){var i,r,u;this._settings.origin!="auto"&&this._settings.origin<n&&(n=this._settings.origin);i=(t-n)/8||1;var f=Math.floor(this._log10(i)),s=Math.pow(10,f),e=i/s;if(e=e>5?10:5,i=parseInt(e,10)*s,i>Math.abs(n))r=n<0?-i:0;else{var o=Math.abs(n),h=Math.floor(this._log10(o)),c=o/Math.pow(10,h);for(r=Math.ceil(c*10)/10*Math.pow(10,h)-i,o>1&&i>.1&&(r=Math.ceil(r));n<0?r<=n:r>=n;)r-=i;n<0&&(r=-r-2*i)}for(u=r;u<t;)u+=i,u=parseFloat(new Number(u).toFixed(Math.abs(f)));return{start:r,end:u,step:i,fixNum:Math.abs(f)}},_getLimits:function(n,t){var r,u,i=arguments.length&&n=="h"?this._configXAxis:this._configYAxis,f,e,o;if(t=t||"value",i&&typeof i.end!="undefined"&&typeof i.start!="undefined"&&i.step)r=parseFloat(i.end),u=parseFloat(i.start);else if(r=this.max(this._series[0][t]),u=i&&typeof i.start!="undefined"?parseFloat(i.start):this.min(this._series[0][t]),this._series.length>1)for(f=1;f<this._series.length;f++)e=this.max(this._series[f][t]),o=this.min(this._series[f][t]),e>r&&(r=e),o<u&&(u=o);return{max:r,min:u}},_log10:function(n){return Math.floor(Math["log"](n)/Math.LN10)},_drawXAxisLabel:function(n,t,i,r,u){if(this._settings.xAxis){var f=this.canvases.x.renderTextAt(u,r,n,t-(u?2:0),this._settings.xAxis.template(i));f&&(f.className+=" dhx_axis_item_x")}},_drawXAxisLine:function(n,t,i,r,u){this._settings.xAxis&&this._settings.xAxis.lines&&this._drawLine(n,t,i,t,r,this._settings.xAxis.lineColor.call(this,u),1)},_drawLine:function(n,t,i,r,u,f,e){n.strokeStyle=f;n.lineWidth=e;n.beginPath();n.moveTo(t,i);n.lineTo(r,u);n.stroke();n.lineWidth=1},_getRelativeValue:function(n,t){var i;return i=t!=n?t-n:n,[i,1]},_rainbow:[function(n){return"#FF"+dhtmlx.math.toHex(n/2,2)+"00"},function(n){return"#FF"+dhtmlx.math.toHex(n/2+128,2)+"00"},function(n){return"#"+dhtmlx.math.toHex(255-n,2)+"FF00"},function(n){return"#00FF"+dhtmlx.math.toHex(n,2)},function(n){return"#00"+dhtmlx.math.toHex(255-n,2)+"FF"},function(n){return"#"+dhtmlx.math.toHex(n,2)+"00FF"}],addSeries:function(n){var t=this._settings;this._settings=dhtmlx.extend({},t);this._parseSettings(n,{});this._series.push(this._settings);this._settings=t},_switchSerie:function(n,t,i){var r,u;if(this._active_serie=this._series.length==1?t.getAttribute("userdata"):this._getActiveSeries(i),this._series[this._active_serie]){for(u=0;u<this._series.length;u++)r=this._series[u].tooltip,r&&r.disable();t.getAttribute("disabled")||(r=this._series[this._active_serie].tooltip,r&&r.enable())}},_getActiveSeries:function(n){var u,i,t,f,e,r,o,s;for(i=this._map._areas,f=dhtmlx.html.offset(this._obj._htmlmap),e=dhtmlx.html.pos(n),o=e.x-f.x,s=e.y-f.y,t=0;t<i.length;t++)u=i[t].points,o<=u[2]&&o>=u[0]&&s<=u[3]&&s>=u[1]&&(r?i[t].index>r.index&&(r=i[t]):r=i[t]);return r?r.index:0},hideSeries:function(n){this.canvases[n].hideCanvas();this._settings.legend.values&&this._settings.legend.values[n]&&(this._settings.legend.values[n].$hidden=!0);this._drawLegend()},showSeries:function(n){this.canvases[n].showCanvas();this._settings.legend.values&&this._settings.legend.values[n]&&delete this._settings.legend.values[n].$hidden;this._drawLegend()},_changeColorSV:function(n,t,i){var r,u;return u=dhtmlx.math.toRgb(n),r=dhtmlx.math.rgbToHsv(u[0],u[1],u[2]),r[1]*=t,r[2]*=i,"rgb("+dhtmlx.math.hsvToRgb(r[0],r[1],r[2])+")"},_setBorderStyles:function(n,t){var i,r;r=dhtmlx.math.toRgb(t);i=dhtmlx.math.rgbToHsv(r[0],r[1],r[2]);i[2]/=2;t="rgb("+dhtmlx.math.hsvToRgb(i[0],i[1],i[2])+")";n.strokeStyle=t;n.globalAlpha==1&&(n.globalAlpha=.9)},_drawLegend:function(n,t){var r,i,u,h,f,c,y,e=0,o=0,l,a,v,s,p;if(n=n||[],t=t||this._obj.offsetWidth,l=this.canvases.legend.getCanvas(),i=this._settings.legend,y=this._settings.legend.layout!="x"?"width:"+i.width+"px":"",this.legendObj&&(this.legendObj.innerHTML="",this.legendObj.parentNode.removeChild(this.legendObj)),this.canvases.legend.clearCanvas(!0),u=dhtmlx.html.create("DIV",{"class":"dhx_chart_legend",style:"left:"+e+"px; top:"+o+"px;"+y},""),i.padding&&(u.style.padding=i.padding+"px"),this.legendObj=u,this._obj.appendChild(u),f=[],i.values)for(r=0;r<i.values.length;r++)f.push(this._drawLegendText(u,i.values[r].text,typeof i.values[r].id!="undefined"?typeof i.values[r].id:r,i.values[r].$hidden));else for(r=0;r<n.length;r++)f.push(this._drawLegendText(u,i.template(n[r])));for(c=u.offsetWidth,h=u.offsetHeight,c<this._obj.offsetWidth&&(i.layout=="x"&&i.align=="center"&&(e=(this._obj.offsetWidth-c)/2),i.align=="right"&&(e=this._obj.offsetWidth-c),i.margin&&i.align!="center"&&(e+=(i.align=="left"?1:-1)*i.margin)),h<this._obj.offsetHeight&&(i.valign=="middle"&&i.align!="center"&&i.layout!="x"?o=(this._obj.offsetHeight-h)/2:i.valign=="bottom"&&(o=this._obj.offsetHeight-h),i.margin&&i.valign!="middle"&&(o+=(i.valign=="top"?1:-1)*i.margin)),u.style.left=e+"px",u.style.top=o+"px",l.save(),r=0;r<f.length;r++)s=f[r],i.values&&i.values[r].$hidden?(v=!0,a=i.values[r].disableColor?i.values[r].disableColor:"#d9d9d9"):(v=!1,a=i.values?i.values[r].color:this._settings.color.call(this,n[r])),p=i.marker.position=="right"?s.offsetWidth-i.marker.width:0,this._drawLegendMarker(l,s.offsetLeft+e+p,s.offsetTop+o,a,s.offsetHeight,v,r);l.restore();f=null},_drawLegendText:function(n,t,i,r){var o="",f=this._settings.legend,e,u;return f.layout=="x"&&(o="float:left;"),e=f.marker.position,u=dhtmlx.html.create("DIV",{style:o+"padding-"+(e&&e=="right"?"right":"left")+":"+(10+f.marker.width)+"px","class":"dhx_chart_legend_item"+(r?" hidden":"")},t),arguments.length>2&&u.setAttribute("series_id",i),n.appendChild(u),u},_drawLegendMarker:function(n,t,i,r,u,f,e){var p=[],o=this._settings.legend.marker,l=this._settings.legend.values,a=l&&l[e].markerType?l[e].markerType:o.type,v,y,c,s,h;if(r&&(n.fillStyle=r,n.strokeStyle=this._getDarkenColor(r,.75)),n.beginPath(),a!="round"&&o.radius)if(a=="item"){if(this._settings.line&&this._settings.view!="scatter"&&!this._settings.disableLines&&(n.beginPath(),n.lineWidth=this._series[e].line.width,n.strokeStyle=f?r:this._series[e].line.color.call(this,{}),v=t+5,y=i+u/2,n.moveTo(v,y),c=v+o.width,n.lineTo(c,y),n.stroke()),s=this._series[e].item,h=parseInt(s.radius.call(this,{}),10)||0,h){if(s.type=="image"&&s.src){this._drawImage(n,t+5,i+o.height/2-5,s.src,h*2,h*2);return}n.beginPath();f?(n.lineWidth=s.borderWidth,n.strokeStyle=r,n.fillStyle=r):(n.lineWidth=s.borderWidth,n.fillStyle=s.color.call(this,{}),n.strokeStyle=s.borderColor.call(this,{}),n.globalAlpha=s.alpha.call(this,{}));n.beginPath();t+=o.width/2+5;i+=u/2;this._strokeChartItem(n,t,i,h+1,s.type);n.fill();n.stroke()}n.globalAlpha=1}else n.lineWidth=1,t+=5,i+=parseInt(u/2-o.height/2,10),p=[[t+o.radius,i+o.radius,o.radius,Math.PI,3*Math.PI/2,!1],[t+o.width-o.radius,i],[t+o.width-o.radius,i+o.radius,o.radius,-Math.PI/2,0,!1],[t+o.width,i+o.height-o.radius],[t+o.width-o.radius,i+o.height-o.radius,o.radius,0,Math.PI/2,!1],[t+o.radius,i+o.height],[t+o.radius,i+o.height-o.radius,o.radius,Math.PI/2,Math.PI,!1],[t,i+o.radius]],this._path(n,p);else n.lineWidth=o.height,n.lineCap=a,t+=n.lineWidth/2+5,i+=u/2,n.moveTo(t,i),c=t+o.width-o.height+1,n.lineTo(c,i);n.stroke();n.fill()},_getDarkenColor:function(n,t){var i,r;return r=dhtmlx.math.toRgb(n),i=dhtmlx.math.rgbToHsv(r[0],r[1],r[2]),i[2]=i[2]*t,"rgb("+dhtmlx.math.hsvToRgb(i[0],i[1],i[2])+")"},_getChartBounds:function(n,t){var r,e,u,o;if(r=this._settings.padding.left,e=this._settings.padding.top,u=n-this._settings.padding.right,o=t-this._settings.padding.bottom,this._settings.legend){var i=this._settings.legend,f=this._settings.legend.width,s=this._settings.legend.height;i.layout=="x"?i.valign=="center"?i.align=="right"?u-=f:i.align=="left"&&(r+=f):i.valign=="bottom"?o-=s:e+=s:i.align=="right"?u-=f:i.align=="left"&&(r+=f)}return{start:{x:r,y:e},end:{x:u,y:o}}},_getStackedLimits:function(n){var t,r,u,i,f;if(this._settings.yAxis&&typeof this._settings.yAxis.end!="undefined"&&typeof this._settings.yAxis.start!="undefined"&&this._settings.yAxis.step)u=parseFloat(this._settings.yAxis.end),i=parseFloat(this._settings.yAxis.start);else{for(t=0;t<n.length;t++)for(n[t].$sum=0,n[t].$min=Infinity,r=0;r<this._series.length;r++)(f=parseFloat(this._series[r].value(n[t])||0),isNaN(f))||(this._series[r].view.toLowerCase().indexOf("stacked")!=-1&&(n[t].$sum+=f),f<n[t].$min&&(n[t].$min=f));for(u=-Infinity,i=Infinity,t=0;t<n.length;t++)n[t].$sum>u&&(u=n[t].$sum),n[t].$min<i&&(i=n[t].$min);i>0&&(i=0)}return{max:u,min:i}},_setBarGradient:function(n,t,i,r,u,f,e,o){var s,l,a,h,v,c;return f=="light"?(s=o=="x"?n.createLinearGradient(t,i,r,i):n.createLinearGradient(t,i,t,u),c=[[0,"#FFFFFF"],[.9,e],[1,e]],l=2):f=="falling"||f=="rising"?(s=o=="x"?n.createLinearGradient(t,i,r,i):n.createLinearGradient(t,i,t,u),a=dhtmlx.math.toRgb(e),h=dhtmlx.math.rgbToHsv(a[0],a[1],a[2]),h[1]*=1/2,v="rgb("+dhtmlx.math.hsvToRgb(h[0],h[1],h[2])+")",f=="falling"?c=[[0,v],[.7,e],[1,e]]:f=="rising"&&(c=[[0,e],[.3,e],[1,v]]),l=0):(n.globalAlpha=.37,l=0,s=o=="x"?n.createLinearGradient(t,u,t,i):n.createLinearGradient(t,i,r,i),c=[[0,"#9d9d9d"],[.3,"#e8e8e8"],[.45,"#ffffff"],[.55,"#ffffff"],[.7,"#e8e8e8"],[1,"#9d9d9d"]]),this._gradient(s,c),{gradient:s,offset:l}},_getPositionByAngle:function(n,t,i,r){return n*=-1,t=t+Math.cos(n)*r,i=i-Math.sin(n)*r,{x:t,y:i}},_gradient:function(n,t){for(var i=0;i<t.length;i++)n.addColorStop(t[i][0],t[i][1])},_path:function(n,t){for(var r,i=0;i<t.length;i++)r=i?"lineTo":"moveTo",t[i].length>2&&(r="arc"),n[r].apply(n,t[i])},_circle:function(n,t,i,r){n.arc(t,i,r,Math.PI*2,!0)},_addMapRect:function(n,t,i,r,u){n.addRect(t,[i[0].x-r.x,i[0].y-r.y,i[1].x-r.x,i[1].y-r.y],u)}};dhtmlx.compat("layout");typeof dhtmlXCellObject!="undefined"&&(dhtmlXCellObject.prototype.attachChart=function(n){this.callEvent("_onBeforeContentAttach",["chart"]);var t=document.createElement("DIV");return t.id="dhxChartObj_"+window.dhx4.newId(),t.style.width="100%",t.style.height="100%",document.body.appendChild(t),this._attachObject(t),n.container=t.id,this.dataType="chart",this.dataObj=new dhtmlXChart(n),this.dataObj.setSizes||(this.dataObj.setSizes=function(){this.resize?this.resize():this.render()}),this.dataObj});dhtmlx.ui.pager=function(n){this.name="Pager";dhtmlx.assert_enabled()&&this._assert();dhtmlx.extend(this,dhtmlx.Settings);this._parseContainer(n,"dhx_pager");dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.SingleRender);dhtmlx.extend(this,dhtmlx.MouseEvents);this._parseSettings(n,{size:10,page:-1,group:5,count:0,type:"default"});this.data=this._settings;this.refresh()};dhtmlx.ui.pager.prototype={_id:"dhx_p_id",on_click:{dhx_pager_item:function(n,t){this.select(t)}},select:function(n){switch(n){case"next":n=this._settings.page+1;break;case"prev":n=this._settings.page-1;break;case"first":n=0;break;case"last":n=this._settings.limit-1}n<0&&(n=0);n>=this.data.limit&&(n=this.data.limit-1);this.callEvent("onBeforePageChange",[this._settings.page,n])&&(this.data.page=n*1,this.refresh(),this.callEvent("onAfterPageChange",[n]))},types:{"default":{template:dhtmlx.Template.fromHTML("{common.pages()}"),pages:function(n){var i="",t;if(n.page==-1)return"";for(n.min=n.page-Math.round((n.group-1)/2),n.max=n.min+n.group-1,n.min<0&&(n.max+=n.min*-1,n.min=0),n.max>=n.limit&&(n.min-=Math.min(n.min,n.max-n.limit+1),n.max=n.limit-1),t=n.min||0;t<=n.max;t++)i+=this.button({id:t,index:t+1,selected:t==n.page?"_selected":""});return i},page:function(n){return n.page+1},first:function(){return this.button({id:"first",index:" &lt;&lt; ",selected:""})},last:function(){return this.button({id:"last",index:" &gt;&gt; ",selected:""})},prev:function(){return this.button({id:"prev",index:"&lt;",selected:""})},next:function(){return this.button({id:"next",index:"&gt;",selected:""})},button:dhtmlx.Template.fromHTML("<div dhx_p_id='{obj.id}' class='dhx_pager_item{obj.selected}'>{obj.index}<\/div>")}},refresh:function(){var n=this._settings,t;n.limit=Math.ceil(n.count/n.size);n.limit&&n.limit!=n.old_limit&&(n.page=Math.min(n.limit-1,n.page));t=n.page;(t!=-1&&t!=n.old_page||n.limit!=n.old_limit)&&(this.render(),this.callEvent("onRefresh",[]),n.old_limit=n.limit,n.old_page=n.page)},template_item_start:dhtmlx.Template.fromHTML("<div>"),template_item_end:dhtmlx.Template.fromHTML("<\/div>")};dhtmlx.DataProcessor={_dp_init:function(n){var t="_methods";n[t]=["setItemStyle","","changeId","remove"];this.attachEvent("onAfterAdd",function(t){n.setUpdated(t,!0,"inserted")});this.data.attachEvent("onStoreLoad",dhtmlx.bind(function(n,t){n.getUserData&&n.getUserData(t,this._userdata)},this));this.attachEvent("onBeforeDelete",function(t){if(n._silent_mode)return!0;var i=n.getState(t);return i=="inserted"?(n.setUpdated(t,!1),!0):i=="deleted"?!1:i=="true_deleted"?!0:(n.setUpdated(t,!0,"deleted"),!1)});this.attachEvent("onAfterEditStop",function(t){n.setUpdated(t,!0,"updated")});this.attachEvent("onBindUpdate",function(t){window.setTimeout(function(){n.setUpdated(t.id,!0,"updated")},1)});t="_getRowData";n[t]=function(n){var i=this.obj.data.get(n),r={};for(var t in i)t.indexOf("_")!==0&&(r[t]=i[t]);return r};t="_clearUpdateFlag";n[t]=function(){};this._userdata={};n.attachEvent("insertCallback",this._dp_callback);n.attachEvent("updateCallback",this._dp_callback);n.attachEvent("deleteCallback",function(n,t){this.obj.setUserData(t,this.action_param,"true_deleted");this.obj.remove(t)});dhtmlx.compat("dataProcessor",n)},_dp_callback:function(n,t){this.obj.data.set(t,dhtmlx.DataDriver.xml.getDetails(n.firstChild));this.obj.data.refresh(t)},setItemStyle:function(n,t){var i=this._locateHTML(n);i&&(i.style.cssText+=";"+t)},changeId:function(n,t){this.data.changeId(n,t);this.refresh()},setUserData:function(n,t,i){n?this.data.get(n)[t]=i:this._userdata[t]=i},getUserData:function(n,t){return n?this.data.get(n)[t]:this._userdata[t]}},function(){dhtmlx.DataProcessor["_dp_init"]=dhtmlx.DataProcessor._dp_init}();dhtmlx.compat.dnd=function(){var t,i,r,n,u,f,e,o;window.dhtmlDragAndDropObject&&(t="_dragged",i=dhtmlDragAndDropObject.prototype.checkLanding,dhtmlDragAndDropObject.prototype.checkLanding=function(n,t,r){if(i.apply(this,arguments),!r){var u=dhtmlx.DragControl._drag_context=dhtmlx.DragControl._drag_context||{};u.from||(u.from=this.dragStartObject);dhtmlx.DragControl._checkLand(n,t,!0)}},r=dhtmlDragAndDropObject.prototype.stopDrag,dhtmlDragAndDropObject.prototype.stopDrag=function(t,i,u){u||dhtmlx.DragControl._last&&(dhtmlx.DragControl._active=n.dragStartNode,dhtmlx.DragControl._stopDrag(t,!0));r.apply(this,arguments)},n=new dhtmlDragAndDropObject,u=dhtmlx.DragControl._startDrag,dhtmlx.DragControl._startDrag=function(){var i,e,f,r;if(u.apply(this,arguments),i=dhtmlx.DragControl._drag_context,i){for(e=[],f=[],r=0;r<i.source.length;r++)e[r]={idd:i.source[r]},f.push(i.source[r]);n.dragStartNode={parentNode:{},parentObject:{idd:e,id:f.length==1?f[0]:f,treeNod:{object:i.from}}};n.dragStartNode.parentObject.treeNod[t]=e;n.dragStartObject=i.from}},f=dhtmlx.DragControl._checkLand,dhtmlx.DragControl._checkLand=function(t,i,r){f.apply(this,arguments);this._last||r||(t=n.checkLanding(t,i,!0))},e=dhtmlx.DragControl._stopDrag,dhtmlx.DragControl._stopDrag=function(t,i){e.apply(this,arguments);n.lastLanding&&!i&&n.stopDrag(t,!1,!0)},o=dhtmlx.DragControl.getMaster,dhtmlx.DragControl.getMaster=function(i){var r=null,e,f,u;if(i&&(r=o.apply(this,arguments)),!r){for(r=n.dragStartObject,e=[],f=r[t],u=0;u<f.length;u++)e.push(f[u].idd||f[u].id);dhtmlx.DragControl._drag_context.source=e}return r})};dhtmlx.DataMove={_init:function(){dhtmlx.assert(this.data,"DataMove :: Component doesn't have DataStore")},copy:function(n,t,i,r){var u=this.get(n);if(!u){dhtmlx.log("Warning","Incorrect ID in DataMove::copy");return}return i&&(dhtmlx.assert(i.externalData,"DataMove :: External object doesn't support operation"),u=i.externalData(u)),i=i||this,i.add(i.externalData(u,r),t)},move:function(n,t,i,r){var u,f,e;if(n instanceof Array){for(u=0;u<n.length;u++)f=(i||this).indexById(this.move(n[u],t,i,n[u])),n[u+1]&&(t=f+(this.indexById(n[u+1])<f?0:1));return}if(nid=n,t<0){dhtmlx.log("Info","DataMove::move - moving outside of bounds is ignored");return}if(e=this.get(n),!e){dhtmlx.log("Warning","Incorrect ID in DataMove::move");return}return i&&i!=this?(dhtmlx.assert(i.externalData,"DataMove :: External object doesn't support operation"),nid=i.add(i.externalData(e,r),t),this.remove(n)):this.data.move(this.indexById(n),t),nid},moveUp:function(n,t){return this.move(n,this.indexById(n)-(t||1))},moveDown:function(n,t){return this.moveUp(n,(t||1)*-1)},moveTop:function(n){return this.move(n,0)},moveBottom:function(n){return this.move(n,this.data.dataCount()-1)},externalData:function(n,t){var i=dhtmlx.extend({},n);return i.id=t||dhtmlx.uid(),i.$selected=i.$template=null,i}};dhtmlx.DragControl={_drag_masters:dhtmlx.toArray(["dummy"]),addDrop:function(n,t,i){n=dhtmlx.toNode(n);n.dhx_drop=this._getCtrl(t);i&&(n.dhx_master=!0)},_getCtrl:function(n){n=n||dhtmlx.DragControl;var t=this._drag_masters.find(n);return t<0&&(t=this._drag_masters.length,this._drag_masters.push(n)),t},addDrag:function(n,t){n=dhtmlx.toNode(n);n.dhx_drag=this._getCtrl(t);dhtmlx.event(n,"mousedown",this._preStart,n)},_preStart:function(n){return dhtmlx.DragControl._active&&(dhtmlx.DragControl._preStartFalse(),dhtmlx.DragControl.destroyDrag()),dhtmlx.DragControl._active=this,dhtmlx.DragControl._start_pos={x:n.pageX,y:n.pageY},dhtmlx.DragControl._dhx_drag_mm=dhtmlx.event(document.body,"mousemove",dhtmlx.DragControl._startDrag),dhtmlx.DragControl._dhx_drag_mu=dhtmlx.event(document.body,"mouseup",dhtmlx.DragControl._preStartFalse),dhtmlx.DragControl._dhx_drag_sc=dhtmlx.event(this,"scroll",dhtmlx.DragControl._preStartFalse),n.cancelBubble=!0,!1},_preStartFalse:function(){dhtmlx.DragControl._dhx_drag_mm=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mm);dhtmlx.DragControl._dhx_drag_mu=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mu);dhtmlx.DragControl._dhx_drag_sc=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_sc)},_startDrag:function(n){var t={x:n.pageX,y:n.pageY};Math.abs(t.x-dhtmlx.DragControl._start_pos.x)<5&&Math.abs(t.y-dhtmlx.DragControl._start_pos.y)<5||(dhtmlx.DragControl._preStartFalse(),dhtmlx.DragControl.createDrag(n))&&(dhtmlx.DragControl.sendSignal("start"),dhtmlx.DragControl._dhx_drag_mm=dhtmlx.event(document.body,"mousemove",dhtmlx.DragControl._moveDrag),dhtmlx.DragControl._dhx_drag_mu=dhtmlx.event(document.body,"mouseup",dhtmlx.DragControl._stopDrag),dhtmlx.DragControl._moveDrag(n))},_stopDrag:function(n){if(dhtmlx.DragControl._dhx_drag_mm=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mm),dhtmlx.DragControl._dhx_drag_mu=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mu),dhtmlx.DragControl._last){dhtmlx.DragControl.onDrop(dhtmlx.DragControl._active,dhtmlx.DragControl._last,this._landing,n);dhtmlx.DragControl.onDragOut(dhtmlx.DragControl._active,dhtmlx.DragControl._last,null,n)}dhtmlx.DragControl.destroyDrag();dhtmlx.DragControl.sendSignal("stop")},_moveDrag:function(n){var t=dhtmlx.html.pos(n);return dhtmlx.DragControl._html.style.top=t.y+dhtmlx.DragControl.top+"px",dhtmlx.DragControl._html.style.left=t.x+dhtmlx.DragControl.left+"px",dhtmlx.DragControl._skip?dhtmlx.DragControl._skip=!1:dhtmlx.DragControl._checkLand(n.srcElement||n.target,n),n.cancelBubble=!0,!1},_checkLand:function(n,t){while(n&&n.tagName!="BODY"){if(n.dhx_drop){if(this._last&&(this._last!=n||n.dhx_master))this.onDragOut(this._active,this._last,n,t);if(!this._last||this._last!=n||n.dhx_master){this._last=null;this._landing=this.onDragIn(dhtmlx.DragControl._active,n,t);this._landing&&(this._last=n);return}return}n=n.parentNode}this._last&&(this._last=this._landing=this.onDragOut(this._active,this._last,null,t))},sendSignal:function(n){dhtmlx.DragControl.active=n=="start"},getMaster:function(n){return this._drag_masters[n.dhx_drag||n.dhx_drop]},getContext:function(){return this._drag_context},createDrag:function(n){var i=dhtmlx.DragControl._active,u=this._drag_masters[i.dhx_drag],r,t;if(u.onDragCreate)t=u.onDragCreate(i,n),t.style.position="absolute",t.style.zIndex=dhtmlx.zIndex.drag,t.onmousemove=dhtmlx.DragControl._skip_mark;else{if(r=dhtmlx.DragControl.onDrag(i,n),!r)return!1;t=document.createElement("DIV");t.innerHTML=r;t.className="dhx_drag_zone";t.onmousemove=dhtmlx.DragControl._skip_mark;document.body.appendChild(t)}return dhtmlx.DragControl._html=t,!0},_skip_mark:function(){dhtmlx.DragControl._skip=!0},destroyDrag:function(){var t=dhtmlx.DragControl._active,n=this._drag_masters[t.dhx_drag];if(n&&n.onDragDestroy)n.onDragDestroy(t,dhtmlx.DragControl._html);else dhtmlx.html.remove(dhtmlx.DragControl._html);dhtmlx.DragControl._landing=dhtmlx.DragControl._active=dhtmlx.DragControl._last=dhtmlx.DragControl._html=null},top:5,left:5,onDragIn:function(n,t,i){var r=this._drag_masters[t.dhx_drop];return r.onDragIn&&r!=this?r.onDragIn(n,t,i):(t.className=t.className+" dhx_drop_zone",t)},onDragOut:function(n,t,i,r){var u=this._drag_masters[t.dhx_drop];return u.onDragOut&&u!=this?u.onDragOut(n,t,i,r):(t.className=t.className.replace("dhx_drop_zone",""),null)},onDrop:function(n,t,i,r){var u=this._drag_masters[t.dhx_drop];if(dhtmlx.DragControl._drag_context.from=dhtmlx.DragControl.getMaster(n),u.onDrop&&u!=this)return u.onDrop(n,t,i,r);t.appendChild(n)},onDrag:function(n,t){var i=this._drag_masters[n.dhx_drag];return i.onDrag&&i!=this?i.onDrag(n,t):(dhtmlx.DragControl._drag_context={source:n,from:n},"<div style='"+n.style.cssText+"'>"+n.innerHTML+"<\/div>")}};dhtmlx.DragItem={_init:function(){dhtmlx.assert(this.move,"DragItem :: Component doesn't have DataMove interface");dhtmlx.assert(this.locate,"DragItem :: Component doesn't have RenderStack interface");dhtmlx.assert(dhtmlx.DragControl,"DragItem :: DragControl is not included");!this._settings||this._settings.drag?dhtmlx.DragItem._initHandlers(this):this._settings&&(this.drag_setter=function(n){return n&&(this._initHandlers(this),delete this.drag_setter),n});this.dragMarker&&(this.attachEvent("onBeforeDragIn",this.dragMarker),this.attachEvent("onDragOut",this.dragMarker))},_initHandlers:function(n){dhtmlx.DragControl.addDrop(n._obj,n,!0);dhtmlx.DragControl.addDrag(n._obj,n)},onDragIn:function(n,t,i){var f=this.locate(i)||null,r=dhtmlx.DragControl._drag_context,e=dhtmlx.DragControl.getMaster(n),u=this._locateHTML(f)||this._obj;return u==dhtmlx.DragControl._landing?u:(r.target=f,r.to=e,!this.callEvent("onBeforeDragIn",[r,i]))?(r.id=null,null):(dhtmlx.html.addCss(u,"dhx_drag_over"),u)},onDragOut:function(n,t,i,r){var f=this.locate(r)||null,e,u;return(i!=this._dataobj&&(f=null),e=this._locateHTML(f)||(i?dhtmlx.DragControl.getMaster(i)._obj:window.undefined),e==dhtmlx.DragControl._landing)?null:(u=dhtmlx.DragControl._drag_context,dhtmlx.html.removeCss(dhtmlx.DragControl._landing,"dhx_drag_over"),u.target=u.to=null,this.callEvent("onDragOut",[u,r]),null)},onDrop:function(n,t,i,r){var u=dhtmlx.DragControl._drag_context;(u.to=this,u.index=u.target?this.indexById(u.target):this.dataCount(),u.new_id=dhtmlx.uid(),this.callEvent("onBeforeDrop",[u,r]))&&(u.from==u.to?this.move(u.source,u.index):u.from?u.from.move(u.source,u.index,u.to,u.new_id):dhtmlx.error("Unsopported d-n-d combination"),this.callEvent("onAfterDrop",[u,r]))},onDrag:function(n,t){var i=this.locate(t),f=[i],u,r;return i&&(this.getSelected&&(u=this.getSelected(),dhtmlx.PowerArray.find.call(u,i)!=-1&&(f=u)),r=dhtmlx.DragControl._drag_context={source:f,start:i},r.from=this,this.callEvent("onBeforeDrag",[r,t]))?r.html||this._toHTML(this.get(i)):null}};dhtmlx.EditAbility={_init:function(){this._edit_id=null;this._edit_bind=null;dhtmlx.assert(this.data,"EditAbility :: Component doesn't have DataStore");dhtmlx.assert(this._locateHTML,"EditAbility :: Component doesn't have RenderStack");this.attachEvent("onEditKeyPress",function(n,t,i){n!=13||i?n==27&&this.stopEdit(!0):this.stopEdit()});this.attachEvent("onBeforeRender",function(){this.stopEdit()})},isEdit:function(){return this._edit_id},edit:function(n){if(this.stopEdit(!1,n)){if(!this.callEvent("onBeforeEditStart",[n]))return;var t=this.data.get(n);if(t.$template)return;t.$template="edit";this.data.refresh(n);this._edit_id=n;this._save_binding(n);this._edit_bind(!0,t);this.callEvent("onAfterEditStart",[n])}},stopEdit:function(n,t){var i,r,u;return this._edit_id?this._edit_id==t?!1:(i={},n?i=null:this._edit_bind(!1,i),!this.callEvent("onBeforeEditStop",[this._edit_id,i]))?!1:(r=this.data.get(this._edit_id),r.$template=null,n||this._edit_bind(!1,r),u=this._edit_id,this._edit_bind=this._edit_id=null,this.data.refresh(u),this.callEvent("onAfterEditStop",[u,i]),!0):!0},_save_binding:function(n){var o=this._locateHTML(n),u="",f="",t=[],i,e,r;if(o){for(i=o.getElementsByTagName("*"),e="",r=0;r<i.length;r++)i[r].nodeType==1&&(e=i[r].getAttribute("bind"))&&(u+="els["+t.length+"].value="+e+";",f+=e+"=els["+t.length+"].value;",t.push(i[r]),i[r].className+=" dhx_allow_selection",i[r].onselectstart=this._block_native);i=null}u=Function("obj","els",u);f=Function("obj","els",f);this._edit_bind=function(n,i){n?(u(i,t),t.length&&t[0].select&&t[0].select()):f(i,t)}},_block_native:function(n){return(n||event).cancelBubble=!0,!0}};dhtmlx.SelectionModel={_init:function(){this._selected=dhtmlx.toArray();dhtmlx.assert(this.data,"SelectionModel :: Component doesn't have DataStore");this.data.attachEvent("onStoreUpdated",dhtmlx.bind(this._data_updated,this));this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._data_loaded,this));this.data.attachEvent("onAfterFilter",dhtmlx.bind(this._data_filtered,this));this.data.attachEvent("onIdChange",dhtmlx.bind(this._id_changed,this))},_id_changed:function(n,t){for(var i=this._selected.length-1;i>=0;i--)this._selected[i]==n&&(this._selected[i]=t)},_data_filtered:function(){for(var t,i,n=this._selected.length-1;n>=0;n--)this.data.indexById(this._selected[n])<0&&(t=this._selected[n],i=this.item(t),i&&delete i.$selected,this._selected.splice(n,1),this.callEvent("onSelectChange",[t]))},_data_updated:function(n,t,i){i=="delete"?this._selected.remove(n):this.data.dataCount()||this.data._filter_order||(this._selected=dhtmlx.toArray())},_data_loaded:function(){this._settings.select&&this.data.each(function(n){n.$selected&&this.select(n.id)},this)},_select_mark:function(n,t,i){return!i&&!this.callEvent("onBeforeSelect",[n,t])?!1:(this.data.item(n).$selected=t,i?i.push(n):(t?this._selected.push(n):this._selected.remove(n),this._refresh_selection(n)),!0)},select:function(n,t,i){if(!n)return this.selectAll();if(n instanceof Array){for(var r=0;r<n.length;r++)this.select(n[r],t,i);return}if(!this.data.exists(n)){dhtmlx.error("Incorrect id in select command: "+n);return}if(i&&this._selected.length)return this.selectAll(this._selected[this._selected.length-1],n);if(t||this._selected.length==1&&this._selected[0]==n||(this._silent_selection=!0,this.unselectAll(),this._silent_selection=!1),this.isSelected(n)){t&&this.unselect(n);return}this._select_mark(n,!0)&&this.callEvent("onAfterSelect",[n])},unselect:function(n){if(!n)return this.unselectAll();this.isSelected(n)&&this._select_mark(n,!1)},selectAll:function(n,t){var i,r=[];i=n||t?this.data.getRange(n||null,t||null):this.data.getRange();i.each(function(n){var t=this.data.item(n.id);return t.$selected||(this._selected.push(n.id),this._select_mark(n.id,!0,r)),n.id},this);this._refresh_selection(r)},unselectAll:function(){var n=[];this._selected.each(function(t){this._select_mark(t,!1,n)},this);this._selected=dhtmlx.toArray();this._refresh_selection(n)},isSelected:function(n){return this._selected.find(n)!=-1},getSelected:function(n){switch(this._selected.length){case 0:return n?[]:"";case 1:return n?[this._selected[0]]:this._selected[0];default:return[].concat(this._selected)}},_is_mass_selection:function(n){return n.length>100||n.length>this.data.dataCount/2},_refresh_selection:function(n){if(typeof n!="object"&&(n=[n]),n.length){if(this._is_mass_selection(n))this.data.refresh();else for(var t=0;t<n.length;t++)this.render(n[t],this.data.item(n[t]),"update");this._silent_selection||this.callEvent("onSelectChange",[n])}}};dhtmlx.RenderStack={_init:function(){dhtmlx.assert(this.data,"RenderStack :: Component doesn't have DataStore");dhtmlx.assert(dhtmlx.Template,"dhtmlx.Template :: dhtmlx.Template is not accessible");this._html=document.createElement("DIV")},_toHTML:function(n){return dhtmlx.assert(!n.$template||this.type["template_"+n.$template],"RenderStack :: Unknown template: "+n.$template),this.callEvent("onItemRender",[n]),this.type._item_start(n,this.type)+(n.$template?this.type["template_"+n.$template]:this.type.template)(n,this.type)+this.type._item_end},_toHTMLObject:function(n){return this._html.innerHTML=this._toHTML(n),this._html.firstChild},_locateHTML:function(n){var i,t,r;if(this._htmlmap)return this._htmlmap[n];for(this._htmlmap={},i=this._dataobj.childNodes,t=0;t<i.length;t++)r=i[t].getAttribute(this._id),r&&(this._htmlmap[r]=i[t]);return this._locateHTML(n)},locate:function(n){return dhtmlx.html.locate(n,this._id)},show:function(n){var t=this._locateHTML(n);t&&(this._dataobj.scrollTop=t.offsetTop-this._dataobj.offsetTop)},render:function(n,t,i){var r,u;if(n){r=this._locateHTML(n);switch(i){case"update":if(!r)return;u=this._htmlmap[n]=this._toHTMLObject(t);dhtmlx.html.insertBefore(u,r);dhtmlx.html.remove(r);break;case"delete":if(!r)return;dhtmlx.html.remove(r);delete this._htmlmap[n];break;case"add":u=this._htmlmap[n]=this._toHTMLObject(t);dhtmlx.html.insertBefore(u,this._locateHTML(this.data.next(n)),this._dataobj);break;case"move":this.render(n,t,"delete");this.render(n,t,"add");break;default:dhtmlx.error("Unknown render command: "+i)}}else this.callEvent("onBeforeRender",[this.data])&&(this._dataobj.innerHTML=this.data.getRange().map(this._toHTML,this).join(""),this._htmlmap=null);this.callEvent("onAfterRender",[])},pager_setter:function(n){this.attachEvent("onBeforeRender",function(){var n=this._settings.pager._settings;return n.page==-1?!1:(this.data.min=n.page*n.size,this.data.max=(n.page+1)*n.size-1,!0)});var t=new dhtmlx.ui.pager(n),i=dhtmlx.bind(function(){this.data.refresh()},this);return t.attachEvent("onRefresh",i),this.data.attachEvent("onStoreUpdated",function(){var n=this.dataCount();n!=t._settings.count&&(t._settings.count=n,t._settings.page==-1&&(t._settings.page=0),t.refresh())}),t},height_setter:function(n){return n=="auto"&&(this.attachEvent("onAfterRender",this._correct_height),dhtmlx.event(window,"resize",dhtmlx.bind(this._correct_height,this))),n},_correct_height:function(){var n,t;this._dataobj.style.overflow="hidden";this._dataobj.style.height="1px";n=this._dataobj.scrollHeight;this._dataobj.style.height=n+"px";dhtmlx._isFF&&(t=this._dataobj.scrollHeight,t!=n&&(this._dataobj.style.height=t+"px"));this._obj.style.height=this._dataobj.style.height},_getDimension:function(){var n=this.type,t=(n.border||0)+(n.padding||0)*2+(n.margin||0)*2;return{x:n.width+t,y:n.height+t}},x_count_setter:function(n){var t=this._getDimension(),i=dhtmlx.$customScroll?0:18;return this._dataobj.style.width=t.x*n+(this._settings.height!="auto"?i:0)+"px",n},y_count_setter:function(n){var t=this._getDimension();return this._dataobj.style.height=t.y*n+"px",n}};dhtmlx.VirtualRenderStack={_init:function(){dhtmlx.assert(this.render,"VirtualRenderStack :: Object must use RenderStack first");this._htmlmap={};this._dataobj.style.overflowY="scroll";dhtmlx.event(this._dataobj,"scroll",dhtmlx.bind(this._render_visible_rows,this));dhtmlx.event(window,"resize",dhtmlx.bind(function(){this.render()},this));this.data._unrendered_area=[];this.data.getIndexRange=this._getIndexRange},_locateHTML:function(n){return this._htmlmap[n]},show:function(n){range=this._getVisibleRange();var t=this.data.indexById(n),i=Math.floor(t/range._dx)*range._y;this._dataobj.scrollTop=i},_getIndexRange:function(n,t){var u,i,r;for(t!==0&&(t=Math.min(t||Infinity,this.dataCount()-1)),u=dhtmlx.toArray(),i=n||0;i<=t;i++)r=this.item(this.order[i]),this.order.length>i&&(r?r.$template=="loading"&&this._unrendered_area.push(this.order[i]):(this.order[i]=dhtmlx.uid(),r={id:this.order[i],$template:"loading"},this._unrendered_area.push(this.order[i])),u.push(r));return u},render:function(n,t,i){var r,u;if(n){r=this._locateHTML(n);switch(i){case"update":if(!r)return;u=this._htmlmap[n]=this._toHTMLObject(t);dhtmlx.html.insertBefore(u,r);dhtmlx.html.remove(r);break;default:this._render_delayed()}}else this.callEvent("onBeforeRender",[this.data])&&(this._htmlmap={},this._render_visible_rows(null,!0),this._wait_for_render=!1,this.callEvent("onAfterRender",[]))},_render_delayed:function(){this._wait_for_render||(this._wait_for_render=!0,window.setTimeout(dhtmlx.bind(function(){this.render()},this),1))},_create_placeholder:function(n){var t=document.createElement("DIV");return t.className="dhxdataview_placeholder",t.style.cssText="height:"+n+"px; width:100%; overflow:hidden;",t},_render_visible_rows:function(n,t){var r,i,v,o,u,s,h,p,e,a,w;for(this.data._unrendered_area=[],r=this._getVisibleRange(),(!this._dataobj.firstChild||t)&&(this._dataobj.innerHTML="",this._dataobj.appendChild(this._create_placeholder(r._max)),this._htmlrows=[this._dataobj.firstChild]),i=Math.max(r._from,0),v=this.data.max||this.data.max===0?this.data.max:Infinity;i<=r._height;){while(this._htmlrows[i]&&this._htmlrows[i]._filled&&i<=r._height)i++;if(i>r._height)break;for(o=i;!this._htmlrows[o];)o--;if(u=this._htmlrows[o],s=i*r._dx+(this.data.min||0),s>v)break;var b=Math.min(s+r._dx-1,v),f=this._create_placeholder(r._y),y=this.data.getIndexRange(s,b);if(!y.length)break;for(f.innerHTML=y.map(this._toHTML,this).join(""),h=0;h<y.length;h++)this._htmlmap[this.data.idByIndex(s+h)]=f.childNodes[h];var k=parseInt(u.style.height,10),c=(i-o)*r._y,l=k-c-r._y;dhtmlx.html.insertBefore(f,c?u.nextSibling:u,this._dataobj);this._htmlrows[i]=f;f._filled=!0;c<=0&&l>0?(u.style.height=l+"px",this._htmlrows[i+1]=u):(c<0?dhtmlx.html.remove(u):u.style.height=c+"px",l>0&&(p=this._htmlrows[i+1]=this._create_placeholder(l),dhtmlx.html.insertBefore(p,f.nextSibling,this._dataobj)));i++}if(this.data._unrendered_area.length&&(e=this.indexById(this.data._unrendered_area[0]),a=this.indexById(this.data._unrendered_area.pop())+1,a>e)){if(!this.callEvent("onDataRequest",[e,a-e]))return!1;dhtmlx.assert(this.data.feed,"Data feed is missed");this.data.feed.call(this,e,a-e)}dhtmlx._isIE&&(w=this._getVisibleRange(),w._from!=r._from&&this._render_visible_rows())},_getVisibleRange:function(){var h=dhtmlx.$customScroll?0:18,t=this._dataobj.scrollTop,r=this._dataobj.scrollWidth,u=this._dataobj.offsetHeight,c=this.type,n=this._getDimension(),i=Math.floor(r/n.x)||1,f=Math.floor(t/n.y),e=Math.ceil((u+t)/n.y)-1,o=this.data.max?this.data.max-this.data.min:this.data.dataCount(),s=Math.ceil(o/i)*n.y;return{_from:f,_height:e,_top:t,_max:s,_y:n.y,_dx:i}}};dhtmlXDataView=function(n){this.name="DataView";dhtmlx.assert_enabled()&&this._assert();dhtmlx.extend(this,dhtmlx.Settings);this._parseContainer(n,"dhx_dataview");dhtmlx.extend(this,dhtmlx.AtomDataLoader);dhtmlx.extend(this,dhtmlx.DataLoader);dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.RenderStack);dhtmlx.extend(this,dhtmlx.SelectionModel);dhtmlx.extend(this,dhtmlx.MouseEvents);dhtmlx.extend(this,dhtmlx.KeyEvents);dhtmlx.extend(this,dhtmlx.EditAbility);dhtmlx.extend(this,dhtmlx.DataMove);dhtmlx.extend(this,dhtmlx.DragItem);dhtmlx.extend(this,dhtmlx.DataProcessor);dhtmlx.extend(this,dhtmlx.AutoTooltip);dhtmlx.extend(this,dhtmlx.Destruction);this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render.apply(this,arguments)},this));this._parseSettings(n,{drag:!1,edit:!1,select:"multiselect",type:"default"});this._settings.height=="auto"||this._settings.renderAll||dhtmlx.extend(this,dhtmlx.VirtualRenderStack);this.data.provideApi(this,!0);this.config.autowidth&&(this.attachEvent("onBeforeRender",function(){this.type.width=Math.floor(this._dataobj.scrollWidth/(this.config.autowidth*1||1))-this.type.padding*2-this.type.margin*2-this.type.border*2;this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type));this.type._item_end=this.template_item_end(this.type)}),dhtmlx.event(window,"resize",function(){this.refresh()},this));dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this)};dhtmlXDataView.prototype={bind:function(){dhtmlx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhtmlx.BaseBind.legacySync.apply(this,arguments)},dragMarker:function(n){var t=this._locateHTML(n.target);if(this.type.drag_marker&&(this._drag_marker&&(this._drag_marker.style.backgroundImage="",this._drag_marker.style.backgroundRepeat=""),t&&(t.style.backgroundImage="url("+(dhtmlx.image_path||"")+this.type.drag_marker+")",t.style.backgroundRepeat="no-repeat",this._drag_marker=t)),t&&this._settings.auto_scroll){var u=t.offsetTop,r=t.offsetHeight,i=this._obj.scrollTop,f=this._obj.offsetHeight;u-r>=0&&u-r*.75<i?i=Math.max(u-r,0):u+r/.75>i+f&&(i=i+r);this._obj.scrollTop=i}return!0},_id:"dhx_f_id",on_click:{dhx_dataview_item:function(n,t){this.stopEdit(!1,t)&&this._settings.select&&(this._settings.select=="multiselect"?this.select(t,n.ctrlKey||n.metaKey,n.shiftKey):this.select(t))}},on_dblclick:{dhx_dataview_item:function(n,t){this._settings.edit&&this.edit(t)}},on_mouse_move:{},types:{"default":{css:"default",template:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>{obj.text}<\/div>"),template_edit:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'><textarea style='width:100%; height:100%;' bind='obj.text'><\/textarea><\/div>"),template_loading:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>Loading...<\/div>"),width:210,height:115,margin:0,padding:10,border:1}},template_item_start:dhtmlx.Template.fromHTML("<div dhx_f_id='{-obj.id}' class='dhx_dataview_item dhx_dataview_{obj.css}_item{-obj.$selected?_selected:}' style='width:{obj.width}px; height:{obj.height}px; padding:{obj.padding}px; margin:{obj.margin}px; float:left; overflow:hidden;'>"),template_item_end:dhtmlx.Template.fromHTML("<\/div>")};dhtmlx.compat("layout");typeof dhtmlXCellObject!="undefined"&&(dhtmlXCellObject.prototype.attachDataView=function(n){this.callEvent("_onBeforeContentAttach",["dataview"]);var t=document.createElement("DIV");return t.style.width="100%",t.style.height="100%",t.style.position="relative",t.style.overflow="hidden",this._attachObject(t),typeof n=="undefined"&&(n={}),t.id="DataViewObject_"+(new Date).getTime(),n.container=t.id,n.skin=this.conf.skin,this.dataType="dataview",this.dataObj=new dhtmlXDataView(n),this.dataObj.setSizes=function(){this.render()},t=null,this.callEvent("_onContentAttach",[]),this.dataObj});dhtmlXList=function(n){this.name="List";dhtmlx.extend(this,dhtmlx.Settings);this._parseContainer(n,"dhx_list");dhtmlx.extend(this,dhtmlx.AtomDataLoader);dhtmlx.extend(this,dhtmlx.DataLoader);dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.RenderStack);dhtmlx.extend(this,dhtmlx.SelectionModel);dhtmlx.extend(this,dhtmlx.MouseEvents);dhtmlx.extend(this,dhtmlx.KeyEvents);dhtmlx.extend(this,dhtmlx.EditAbility);dhtmlx.extend(this,dhtmlx.DataMove);dhtmlx.extend(this,dhtmlx.DragItem);dhtmlx.extend(this,dhtmlx.DataProcessor);dhtmlx.extend(this,dhtmlx.AutoTooltip);dhtmlx.extend(this,dhtmlx.Destruction);this._getDimension=function(){var n=this.type,t=(n.margin||0)*2;return{x:n.width+t,y:n.height+t}};this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render.apply(this,arguments)},this));this._parseSettings(n,{drag:!1,edit:!1,select:"multiselect",type:"default"});this.data.provideApi(this,!0);dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this)};dhtmlXList.prototype={bind:function(){dhtmlx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhtmlx.BaseBind.legacySync.apply(this,arguments)},dragMarker:function(n){var u=this._locateHTML(n.target);if(u&&this._settings.auto_scroll){var r=u.offsetTop,i=u.offsetHeight,t=this._obj.scrollTop,f=this._obj.offsetHeight;r-i>=0&&r-i*.75<t?t=Math.max(r-i,0):r+i/.75>t+f&&(t=t+i);this._obj.scrollTop=t}return!0},_id:"dhx_f_id",on_click:{dhx_list_item:function(n,t){this.stopEdit(!1,t)&&this._settings.select&&(this._settings.select=="multiselect"?this.select(t,n.ctrlKey||n.metaKey,n.shiftKey):this.select(t))}},on_dblclick:{dhx_list_item:function(n,t){this._settings.edit&&this.edit(t)}},on_mouse_move:{},types:{"default":{css:"default",template:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>{obj.text}<\/div>"),template_edit:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'><textarea bind='obj.text'><\/textarea><\/div>"),template_loading:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>Loading...<\/div>"),height:50,margin:0,padding:10,border:1}},template_item_start:dhtmlx.Template.fromHTML("<div dhx_f_id='{-obj.id}' class='dhx_list_item dhx_list_{obj.css}_item{-obj.$selected?_selected:}' style='width:100%; height:{obj.height}px; padding:{obj.padding}px; margin:{obj.margin}px; overflow:hidden;'>"),template_item_end:dhtmlx.Template.fromHTML("<\/div>")};dhtmlx.compat("layout");typeof dhtmlXCellObject!="undefined"&&(dhtmlXCellObject.prototype.attachList=function(n){this.callEvent("_onBeforeContentAttach",["list"]);var t=document.createElement("DIV");return t.style.width="100%",t.style.height="100%",t.style.position="relative",t.style.overflowX="hidden",this._attachObject(t),typeof n=="undefined"&&(n={}),t.id="ListObject_"+(new Date).getTime(),n.container=t.id,n.skin=this.conf.skin,this.dataType="list",this.dataObj=new dhtmlXList(n),this.dataObj.setSizes=function(){this.render()},t=null,this.callEvent("_onContentAttach",[]),this.dataObj});xmlPointer.prototype={text:function(){if(!_isFF)return this.d.xml;var n=new XMLSerializer;return n.serializeToString(this.d)},get:function(n){return this.d.getAttribute(n)},exists:function(){return!!this.d},content:function(){return this.d.firstChild?this.d.firstChild.wholeText||this.d.firstChild.data:""},each:function(n,t,i,r){var u=this.d.childNodes,f=new xmlPointer;if(u.length)for(r=r||0;r<u.length;r++)if(u[r].tagName==n&&(f.d=u[r],t.apply(i,[f,r])==-1))return},get_all:function(){for(var i={},t=this.d.attributes,n=0;n<t.length;n++)i[t[n].name]=t[n].value;return i},sub:function(n){var i=this.d.childNodes,r=new xmlPointer,t;if(i.length)for(t=0;t<i.length;t++)if(i[t].tagName==n)return r.d=i[t],r},up:function(){return new xmlPointer(this.d.parentNode)},set:function(n,t){this.d.setAttribute(n,t)},clone:function(){return new xmlPointer(this.d)},sub_exists:function(n){var i=this.d.childNodes,t;if(i.length)for(t=0;t<i.length;t++)if(i[t].tagName==n)return!0;return!1},through:function(n,t,i,r,u){var e=this.d.childNodes,f,o,s;if(e.length)for(f=0;f<e.length;f++)e[f].tagName!=n||e[f].getAttribute(t)==null||e[f].getAttribute(t)==""||i&&e[f].getAttribute(t)!=i||(o=new xmlPointer(e[f]),r.apply(u,[o,f])),s=this.d,this.d=e[f],this.through(n,t,i,r,u),this.d=s}};dhtmlXTreeObject.prototype.setDataMode=function(n){this._datamode=n};dhtmlXTreeObject.prototype._doContClick=function(n,t){var i,r,u,f;if(!t&&n.button!=2)return this._acMenu&&(this._acMenu.hideContextMenu?this._acMenu.hideContextMenu():this.cMenu._contextEnd()),!0;for(i=_isIE?n.srcElement:n.target;i&&i.tagName!="BODY";){if(i.parentObject)break;i=i.parentNode}if(!i||!i.parentObject)return!0;if(r=i.parentObject,this.callEvent("onRightClick",[r.id,n])||((n.srcElement||n.target).oncontextmenu=function(n){return(n||event).cancelBubble=!0,!1}),this._acMenu=r.cMenu||this.cMenu,this._acMenu){if(!this.callEvent("onBeforeContextMenu",[r.id]))return!0;if(_isMacOS||((n.srcElement||n.target).oncontextmenu=function(n){return(n||event).cancelBubble=!0,!1}),this._acMenu.showContextMenu){var e=window.document.documentElement,o=window.document.body,s=[e.scrollLeft||o.scrollLeft,e.scrollTop||o.scrollTop];_isIE?(u=n.clientX+s[0],f=n.clientY+s[1]):(u=n.pageX,f=n.pageY);this._acMenu.showContextMenu(u-1,f-1);this.contextID=r.id;n.cancelBubble=!0;this._acMenu._skip_hide=!0}else i.contextMenuId=r.id,i.contextMenu=this._acMenu,i.a=this._acMenu._contextStart,i.a(i,n),i.a=null;return!1}return!0};dhtmlXTreeObject.prototype.enableIEImageFix=function(n){n?(this._getImg=function(){var n=document.createElement("DIV");return n.innerHTML="&nbsp;",n.className="dhx_bg_img_fix",n},this._setSrc=function(n,t){n.style.backgroundImage="url("+t+")"},this._getSrc=function(n){var t=n.style.backgroundImage;return t.substr(4,t.length-5).replace(/(^")|("$)/g,"")}):(this._getImg=function(n){return document.createElement(n==this.rootId?"div":"img")},this._setSrc=function(n,t){n.src=t},this._getSrc=function(n){return n.src})};dhtmlXTreeObject.prototype.destructor=function(){var n;for(var t in this._idpull)(n=this._idpull[t],n)&&(n.parentObject=null,n.treeNod=null,n.childNodes=null,n.span=null,n.tr.nodem=null,n.tr=null,n.htmlNode.objBelong=null,n.htmlNode=null,this._idpull[t]=null);this.parentObject.innerHTML="";this.allTree.onselectstart=null;this.allTree.oncontextmenu=null;this.allTree.onmousedown=null;for(t in this)this[t]=null};cObject.prototype={};cObject.prototype.clone=function(){function n(){}return n.prototype=this,new n};dhtmlXTreeObject.prototype._globalIdStorageAdd=function(n,t){return this._globalIdStorageFind(n,1,1)?(n=n+"_"+(new Date).valueOf(),this._globalIdStorageAdd(n,t)):(this._idpull[n]=t,this._pullSize++,n)};dhtmlXTreeObject.prototype._globalIdStorageSub=function(n){this._idpull[n]&&(this._unselectItem(this._idpull[n]),this._idpull[n]=null,this._pullSize--);this._locker&&this._locker[n]&&(this._locker[n]=!1)};dhtmlXTreeObject.prototype._globalIdStorageFind=function(n,t,i,r){var u=this._idpull[n],f;if(u){if(u.unParsed&&!i&&this.reParse(u,0),this._srnd&&!u.htmlNode&&this._buildSRND(u,i),r&&this._edsbpsA)for(f=0;f<this._edsbpsA.length;f++)if(this._edsbpsA[f][2]==n)return dhx4.callEvent("ongetItemError",["Requested item still in parsing process.",n]),null;return u}return this.slowParse&&n!=0&&!t?this.preParse(n):null};dhtmlXTreeObject.prototype._getSubItemsXML=function(n){var t=[];return n.each("item",function(n){t.push(n.get("id"))},this),t.join(this.dlmtr)};dhtmlXTreeObject.prototype.enableSmartXMLParsing=function(n){this.slowParse=dhx4.s2b(n)};dhtmlXTreeObject.prototype.findXML=function(){};dhtmlXTreeObject.prototype._getAllCheckedXML=function(n,t,i){var r=[];return(i==2&&n.through("item","checked",-1,function(n){r.push(n.get("id"))},this),i==1&&n.through("item","id",null,function(n){n.get("checked")&&n.get("checked")!=-1&&r.push(n.get("id"))},this),i==0&&n.through("item","id",null,function(n){n.get("checked")&&n.get("checked")!=0||r.push(n.get("id"))},this),r.length)?t+(t?this.dlmtr:"")+r.join(this.dlmtr):t?t:""};dhtmlXTreeObject.prototype._setSubCheckedXML=function(n,t){var i=n?"1":"";t.through("item","id",null,function(n){n.get("disabled")&&n.get("disabled")!=0||n.set("checked",i)},this)};dhtmlXTreeObject.prototype._getAllScraggyItemsXML=function(n){var t=[],i=function(n){n.sub_exists("item")?n.each("item",i,this):t.push(n.get("id"))};return i(n),t.join(",")};dhtmlXTreeObject.prototype._getAllFatItemsXML=function(n){var t=[],i=function(n){n.sub_exists("item")&&(t.push(n.get("id")),n.each("item",i,this))};return i(n),t.join(",")};dhtmlXTreeObject.prototype._getAllSubItemsXML=function(n,t,i){var t=[];return i.through("item","id",null,function(n){t.push(n.get("id"))},this),t.join(",")};dhtmlXTreeObject.prototype.reParse=function(n){var f=this,t,r,u,i;this.parsCount||f.callEvent("onXLS",[f,n.id]);this.xmlstate=1;t=n.unParsed;n.unParsed=0;this.XMLloadingWarning=1;var e=this.parsingOn,o=this.waitUpdateXML,s=this.parsedArray;for(this.parsedArray=[],this.waitUpdateXML=!1,this.parsingOn=n.id,this.parsedArray=[],this.setCheckList="",this._parse(t,n.id,2),r=this.setCheckList.split(this.dlmtr),u=0;u<this.parsedArray.length;u++)n.htmlNode.childNodes[0].appendChild(this.parsedArray[u]);for(t.get("order")&&t.get("order")!="none"&&this._reorderBranch(n,t.get("order"),!0),this.oldsmcheck=this.smcheck,this.smcheck=!1,i=0;i<r.length;i++)r[i]&&this.setCheck(r[i],1);return this.smcheck=this.oldsmcheck,this.parsingOn=e,this.waitUpdateXML=o,this.parsedArray=s,this.XMLloadingWarning=0,this._redrawFrom(this,n),this._srnd&&!n._sready&&this.prepareSR(n.id),this.xmlstate=0,!0};dhtmlXTreeObject.prototype.preParse=function(n){var t,i;return!n||!this._p?null:(t=!1,this._p.clone().through("item","id",n,function(n){return this._globalIdStorageFind(n.up().get("id")),t=!0},this),t&&(i=this._globalIdStorageFind(n,!0,!1),i||dhx4.callEvent("ongetItemError",["The item "+n+" not operable. Seems you have non-unique|incorrect IDs in tree's XML.",n])),i)};dhtmlXTreeObject.prototype._escape=function(n){switch(this.utfesc){case"none":return n;case"utf8":return encodeURIComponent(n);default:return escape(n)}};dhtmlXTreeObject.prototype._drawNewTr=function(n){var t=document.createElement("tr"),r=document.createElement("td"),i=document.createElement("td");return r.appendChild(document.createTextNode(" ")),i.colSpan=3,i.appendChild(n),t.appendChild(r),t.appendChild(i),t};dhtmlXTreeObject.prototype.parse=function(n,t,i){if(typeof t=="string"&&(i=t,t=null),i==="json")return this._loadJSONObject(n,t);if(i==="csv")return this._loadCSVString(n,t);if(i==="jsarray")return this._loadJSArray(n,t);var r=this;this.parsCount||this.callEvent("onXLS",[r,null]);this.xmlstate=1;this.XMLLoader({responseXML:dhx4.ajax.parse(n)},t)};dhtmlXTreeObject.prototype.loadXMLString=function(){return window.console&&window.console.info&&window.console.info("loadXMLString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this.parse.apply(this,arguments)};dhtmlXTreeObject.prototype.load=function(n,t,i){var u,r;return(typeof t=="string"&&(i=t,t=null),i=i||this._datamode,i==="json")?this._loadJSON(n,t):i==="csv"?this._loadCSV(n,t):i==="jsarray"?this._loadJSArrayFile(xmlString,t):(u=this,this.parsCount||this.callEvent("onXLS",[u,this._ld_id]),this._ld_id=null,this.xmlstate=1,this.XMLLoader=this._parseXMLTree,r=this,dhx4.ajax.get(n,function(n){r.XMLLoader(n.xmlDoc,t);r=null}))};dhtmlXTreeObject.prototype.loadXML=function(){return window.console&&window.console.info&&window.console.info("loadXML was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this.load.apply(this,arguments)};dhtmlXTreeObject.prototype._attachChildNode=function(n,t,i,r,u,f,e,o,s,h,c){var y,v,a,k,l,w,b,p,d;if(h&&h.parentObject&&(n=h.parentObject),n.XMLload==0&&this.XMLsource&&!this.XMLloadingWarning&&(n.XMLload=1,this._loadDynXML(n.id)),y=n.childsCount,v=n.childNodes,c&&c.tr.previousSibling&&(c.tr.previousSibling.previousSibling?h=c.tr.previousSibling.nodem:o=o.replace("TOP","")+",TOP"),h){for(a=0;a<y;a++)if(v[a]==h){for(k=y;k!=a;k--)v[1+k]=v[k];break}a++;y=a}if(o)for(b=o.split(","),p=0;p<b.length;p++)switch(b[p]){case"TOP":for(n.childsCount>0&&(h={},h.tr=n.childNodes[0].tr.previousSibling),n._has_top=!0,a=y;a>0;a--)v[a]=v[a-1];y=0}if((l=this._idpull[t])&&l.span==-1||(l=v[y]=new dhtmlXTreeItemObject(t,i,n,this,r,1),t=v[y].id,n.childsCount++),l.htmlNode||(l.label=i,l.htmlNode=this._createItem(this.checkBoxOff?1:0,l),l.htmlNode.objBelong=l),u&&(l.images[0]=u),f&&(l.images[1]=f),e&&(l.images[2]=e),w=this._drawNewTr(l.htmlNode),(this.XMLloadingWarning||this._hAdI)&&(l.htmlNode.parentNode.parentNode.style.display="none"),h&&h.tr&&h.tr.nextSibling?n.htmlNode.childNodes[0].insertBefore(w,h.tr.nextSibling):this.parsingOn==n.id?this.parsedArray[this.parsedArray.length]=w:n.htmlNode.childNodes[0].appendChild(w),h&&!h.span&&(h=null),this.XMLsource&&(l.XMLload=s&&s!=0?0:1),l.tr=w,w.nodem=l,n.itemId==0&&(w.childNodes[0].className="hiddenRow"),(n._r_logic||this._frbtr)&&this._setSrc(l.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.imPath+this.radioArray[0]),o)for(b=o.split(","),p=0;p<b.length;p++)switch(b[p]){case"SELECT":this.selectItem(t,!1);break;case"CALL":this.selectItem(t,!0);break;case"CHILD":l.XMLload=0;break;case"CHECKED":this.XMLloadingWarning?this.setCheckList+=this.dlmtr+t:this.setCheck(t,1);break;case"HCHECKED":this._setCheck(l,"unsure");break;case"OPEN":l.openMe=1}return this.XMLloadingWarning||(this._getOpenState(n)<0&&!this._hAdI&&this.openItem(n.id),h&&(this._correctPlus(h),this._correctLine(h)),this._correctPlus(n),this._correctLine(n),this._correctPlus(l),n.childsCount>=2&&(this._correctPlus(v[n.childsCount-2]),this._correctLine(v[n.childsCount-2])),n.childsCount!=2&&this._correctPlus(v[0]),this.tscheck&&this._correctCheckStates(n),this._onradh&&(this.xmlstate==1?(d=this.onXLE,this.onXLE=function(n){this._onradh(t);d&&d(n)}):this._onradh(t))),l};dhtmlXTreeObject.prototype.enableContextMenu=function(n){n&&(this.cMenu=n)};dhtmlXTreeObject.prototype.setItemContextMenu=function(n,t){for(var r,u=n.toString().split(this.dlmtr),i=0;i<u.length;i++)(r=this._globalIdStorageFind(u[i]),r)&&(r.cMenu=t)};dhtmlXTreeObject.prototype.insertNewItem=function(n,t,i,r,u,f,e,o,s){var h=this._globalIdStorageFind(n),c;return h?(c=this._attachChildNode(h,t,i,r,u,f,e,o,s),this._idpull[this.rootId].XMLload||(this._idpull[this.rootId].XMLload=1),!this.XMLloadingWarning&&this.childCalc&&this._fixChildCountLabel(h),c):-1};dhtmlXTreeObject.prototype.insertNewChild=function(n,t,i,r,u,f,e,o,s){return this.insertNewItem(n,t,i,r,u,f,e,o,s)};dhtmlXTreeObject.prototype._parseXMLTree=function(n,t){var i=new xmlPointer(dhx4.ajax.xmltop("tree",n));this._parse(i);this._p=i;t&&t.call(this,n)};dhtmlXTreeObject.prototype._parseItem=function(n,t,i,r){var s,u,e,f,h,o;if(this._srnd&&(!this._idpull[s=n.get("id")]||!this._idpull[s].span)){this._addItemSRND(t.id,s,n);return}if(u=n.get_all(),typeof this.waitUpdateXML=="object"&&!this.waitUpdateXML[u.id]){this._parse(n,u.id,1);return}(u.text===null||typeof u.text=="undefined")&&(u.text=n.sub("itemtext"),u.text&&(u.text=u.text.content()));e=[];u.select&&e.push("SELECT");u.top&&e.push("TOP");u.call&&(this.nodeAskingCall=u.id);u.checked==-1?e.push("HCHECKED"):u.checked&&e.push("CHECKED");u.open&&e.push("OPEN");this.waitUpdateXML?this._globalIdStorageFind(u.id)?f=this.updateItem(u.id,u.text,u.im0,u.im1,u.im2,u.checked,u.child):(this.npl==0?e.push("TOP"):i=t.childNodes[this.npl],f=this._attachChildNode(t,u.id,u.text,0,u.im0,u.im1,u.im2,e.join(","),u.child,0,i),u.id=f.id,i=null):f=this._attachChildNode(t,u.id,u.text,0,u.im0,u.im1,u.im2,e.join(","),u.child,r||0,i);u.tooltip&&(f.span.parentNode.parentNode.title=u.tooltip);u.style&&(f.span.style.cssText?f.span.style.cssText+=";"+u.style:f.span.setAttribute("style",f.span.getAttribute("style")+"; "+u.style));u.radio&&(f._r_logic=!0);u.nocheckbox&&(h=f.span.parentNode.previousSibling.previousSibling,h.style.display="none",f.nocheckbox=!0);u.disabled&&(u.checked!=null&&this._setCheck(f,u.checked),this.disableCheckbox(f,1));f._acc=u.child||0;this.parserExtension&&this.parserExtension._parseExtension.call(this,n,u,t?t.id:0);this.setItemColor(f,u.aCol,u.sCol);u.locked=="1"&&this.lockItem(f.id,!0,!0);(u.imwidth||u.imheight)&&this.setIconSize(u.imwidth,u.imheight,f);(u.closeable=="0"||u.closeable=="1")&&this.setItemCloseable(f,u.closeable);o="";u.topoffset&&this.setItemTopOffset(f,u.topoffset);this.slowParse&&typeof this.waitUpdateXML!="object"?(!f.childsCount&&n.sub_exists("item")&&(f.unParsed=n.clone()),n.each("userdata",function(n){this.setUserData(u.id,n.get("name"),n.content())},this)):n.sub_exists("item")&&(o=this._parse(n,u.id,1));o!=""&&(this.nodeAskingCall=o);n.each("userdata",function(t){this.setUserData(n.get("id"),t.get("name"),t.content())},this)};dhtmlXTreeObject.prototype._parse=function(n,t,i,r){var c,h,u,l,a,f,s,e,o;if(this._srnd&&!this.parentObject.offsetHeight)return c=this,window.setTimeout(function(){c._parse(n,t,i,r)},100);if(n.exists()){if(this.skipLock=!0,t||(t=n.get("id"),this._dynDeleteBranches[t]&&(this.deleteChildItems(t),this._dynDeleteBranches[t]--,this._dynDeleteBranches[t]||delete this._dynDeleteBranches[t]),h=n.get("dhx_security"),h&&(dhtmlx.security_key=h),n.get("radio")&&(this.htmlNode._r_logic=!0),this.parsingOn=t,this.parsedArray=[],this.setCheckList="",this.nodeAskingCall=""),u=this._globalIdStorageFind(t),!u)return dhx4.callEvent("onDataStructureError",["XML refers to not existing parent"]);if(this.parsCount=this.parsCount?this.parsCount+1:1,this.XMLloadingWarning=1,l=!u.childsCount||r||this._edsbps||u._has_top?0:0,this.npl=0,n.each("item",function(r,f){if(u.XMLload=1,this._parseItem(r,u,0,l),this._edsbps&&this.npl==this._edsbpsC)return this._distributedStart(n,f+1,t,i,u.childsCount),-1;this.npl++},this,r),!i){if(n.each("userdata",function(t){this.setUserData(n.get("id"),t.get("name"),t.content())},this),u.XMLload=1,this.waitUpdateXML)for(this.waitUpdateXML=!1,f=u.childsCount-1;f>=0;f--)u.childNodes[f]._dmark&&this.deleteItem(u.childNodes[f].id);for(a=this._globalIdStorageFind(this.parsingOn),f=0;f<this.parsedArray.length;f++)u.htmlNode.childNodes[0].appendChild(this.parsedArray[f]);for(this.parsedArray=[],this.lastLoadedXMLId=t,this.XMLloadingWarning=0,s=this.setCheckList.split(this.dlmtr),e=0;e<s.length;e++)s[e]&&this.setCheck(s[e],1);this.XMLsource&&this.tscheck&&this.smcheck&&u.id!=this.rootId&&(u.checkstate===0?this._setSubChecked(0,u):u.checkstate===1&&this._setSubChecked(1,u));this._redrawFrom(this,null,r);n.get("order")&&n.get("order")!="none"&&this._reorderBranch(u,n.get("order"),!0);this.nodeAskingCall!=""&&this.callEvent("onClick",[this.nodeAskingCall,this.getSelectedItemId()]);this._branchUpdate&&this._branchUpdateNext(n)}if(this.parsCount==1&&(this.parsingOn=null,this._srnd&&u.id!=this.rootId&&(this.prepareSR(u.id),this.XMLsource&&this.openItem(u.id)),n.through("item","open",null,function(n){this.openItem(n.get("id"))},this),this._edsbps&&this._edsbpsA.length||(o=this,window.setTimeout(function(){o.callEvent("onXLE",[o,t])},1),this.xmlstate=0),this.skipLock=!1),this.parsCount--,o=this,this._edsbps&&window.setTimeout(function(){o._distributedStep(t)},this._edsbpsD),!i&&this.onXLE)this.onXLE(this,t);return this.nodeAskingCall}};dhtmlXTreeObject.prototype._branchUpdateNext=function(n){n.each("item",function(n){var t=n.get("id");(!this._idpull[t]||this._idpull[t].XMLload)&&(this._branchUpdate++,this.smartRefreshItem(n.get("id"),n))},this);this._branchUpdate--};dhtmlXTreeObject.prototype.checkUserData=function(n,t){if(n.nodeType==1&&n.tagName=="userdata"){var i=n.getAttribute("name");i&&n.childNodes[0]&&this.setUserData(t,i,n.childNodes[0].data)}};dhtmlXTreeObject.prototype._redrawFrom=function(n,t,i,r){var u,o,f,e;if(t)u=t;else if(u=n._globalIdStorageFind(n.lastLoadedXMLId),n.lastLoadedXMLId=-1,!u)return 0;for(o=0,f=i?i-1:0;f<u.childsCount;f++)this._branchUpdate&&this._getOpenState(u)!=1||t&&r!=1||(u.childNodes[f].htmlNode.parentNode.parentNode.style.display=""),u.childNodes[f].openMe==1&&(this._openItem(u.childNodes[f]),u.childNodes[f].openMe=0),n._redrawFrom(n,u.childNodes[f]),this.childCalc!=null&&((u.childNodes[f].unParsed||!u.childNodes[f].XMLload&&this.XMLsource)&&(u.childNodes[f].span.innerHTML=u.childNodes[f]._acc?u.childNodes[f].label+this.htmlcA+u.childNodes[f]._acc+this.htmlcB:u.childNodes[f].label),u.childNodes[f].childNodes.length&&this.childCalc?(this.childCalc==1&&(u.childNodes[f].span.innerHTML=u.childNodes[f].label+this.htmlcA+u.childNodes[f].childsCount+this.htmlcB),this.childCalc==2&&(e=u.childNodes[f].childsCount-(u.childNodes[f].pureChilds||0),e&&(u.childNodes[f].span.innerHTML=u.childNodes[f].label+this.htmlcA+e+this.htmlcB),u.pureChilds?u.pureChilds++:u.pureChilds=1),this.childCalc==3&&(u.childNodes[f].span.innerHTML=u.childNodes[f].label+this.htmlcA+u.childNodes[f]._acc+this.htmlcB),this.childCalc==4&&(e=u.childNodes[f]._acc,e&&(u.childNodes[f].span.innerHTML=u.childNodes[f].label+this.htmlcA+e+this.htmlcB))):this.childCalc==4&&o++,o+=u.childNodes[f]._acc,this.childCalc==3&&o++);u.unParsed||!u.XMLload&&this.XMLsource||(u._acc=o);n._correctLine(u);n._correctPlus(u);this.childCalc&&!t&&n._fixChildCountLabel(u)};dhtmlXTreeObject.prototype._createSelf=function(){var n=document.createElement("div");return n.className="containerTableStyle",n.style.width=this.width,n.style.height=this.height,this.parentObject.appendChild(n),n};dhtmlXTreeObject.prototype._xcloseAll=function(n){var i,r,t;if(!n.unParsed){if(this.rootId!=n.id){if(!n.htmlNode)return;for(i=n.htmlNode.childNodes[0].childNodes,r=i.length,t=1;t<r;t++)i[t].style.display="none";this._correctPlus(n)}for(t=0;t<n.childsCount;t++)n.childNodes[t].childsCount&&this._xcloseAll(n.childNodes[t])}};dhtmlXTreeObject.prototype._xopenAll=function(n){this._HideShow(n,2);for(var t=0;t<n.childsCount;t++)this._xopenAll(n.childNodes[t])};dhtmlXTreeObject.prototype._correctPlus=function(n){var i,u;if(n.htmlNode){var t=n.htmlNode.childNodes[0].childNodes[0].childNodes[0].lastChild,r=n.htmlNode.childNodes[0].childNodes[0].childNodes[2].childNodes[0],i=this.lineArray;if(this.XMLsource&&!n.XMLload){if(i=this.plusArray,this._setSrc(r,this.iconURL+n.images[2]),this._txtimg)return t.innerHTML="[+]"}else if(n.childsCount||n.unParsed){if(n.htmlNode.childNodes[0].childNodes[1]&&n.htmlNode.childNodes[0].childNodes[1].style.display!="none"){if(n.wsign||(i=this.minusArray),this._setSrc(r,this.iconURL+n.images[1]),this._txtimg)return t.innerHTML="[-]"}else if(n.wsign||(i=this.plusArray),this._setSrc(r,this.iconURL+n.images[2]),this._txtimg)return t.innerHTML="[+]"}else this._setSrc(r,this.iconURL+n.images[0]);u=2;n.treeNod.treeLinesOn?(n.parentObject&&(u=this._getCountStatus(n.id,n.parentObject)),this._setSrc(t,this.imPath+i[u])):this._setSrc(t,this.imPath+i[3])}};dhtmlXTreeObject.prototype._correctLine=function(n){var i,t;if(n.htmlNode&&(i=n.parentObject,i))if(this._getLineStatus(n.id,i)!=0&&this.treeLinesOn)for(t=1;t<=n.childsCount;t++){if(!n.htmlNode.childNodes[0].childNodes[t])break;n.htmlNode.childNodes[0].childNodes[t].childNodes[0].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")";n.htmlNode.childNodes[0].childNodes[t].childNodes[0].style.backgroundRepeat="repeat-y"}else for(t=1;t<=n.childsCount;t++){if(!n.htmlNode.childNodes[0].childNodes[t])break;n.htmlNode.childNodes[0].childNodes[t].childNodes[0].style.backgroundImage="";n.htmlNode.childNodes[0].childNodes[t].childNodes[0].style.backgroundRepeat=""}};dhtmlXTreeObject.prototype._getCountStatus=function(n,t){return t.childsCount<=1?t.id==this.rootId?4:0:t.childNodes[0].id==n?t.id==this.rootId?2:1:t.childNodes[t.childsCount-1].id==n?0:1};dhtmlXTreeObject.prototype._getLineStatus=function(n,t){return t.childNodes[t.childsCount-1].id==n?0:1};dhtmlXTreeObject.prototype._HideShow=function(n,t){var i,u,r;if(!this._locker||this.skipLock||!this._locker[n.id]){if(this.XMLsource&&!n.XMLload){if(t==1)return;n.XMLload=1;this._loadDynXML(n.id);return}if(n.unParsed&&this.reParse(n),i=n.htmlNode.childNodes[0].childNodes,u=i.length,u>1)for((i[1].style.display!="none"||t==1)&&t!=2?(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0",nodestyle="none"):nodestyle="",r=1;r<u;r++)i[r].style.display=nodestyle;this._correctPlus(n)}};dhtmlXTreeObject.prototype._getOpenState=function(n){if(!n.htmlNode)return 0;var t=n.htmlNode.childNodes[0].childNodes;return t.length<=1?0:t[1].style.display!="none"?1:-1};dhtmlXTreeObject.prototype.onRowClick2=function(){var n=this.parentObject.treeNod;return n.callEvent("onDblClick",[this.parentObject.id,n])?(this.parentObject.closeble&&this.parentObject.closeble!="0"?n._HideShow(this.parentObject):n._HideShow(this.parentObject,2),n.checkEvent("onOpenEnd")&&(n.xmlstate?(n._oie_onXLE.push(n.onXLE),n.onXLE=n._epnFHe):n.callEvent("onOpenEnd",[this.parentObject.id,n._getOpenState(this.parentObject)])),!1):!1};dhtmlXTreeObject.prototype.onRowClick=function(){var n=this.parentObject.treeNod;if(!n.callEvent("onOpenStart",[this.parentObject.id,n._getOpenState(this.parentObject)]))return 0;this.parentObject.closeble&&this.parentObject.closeble!="0"?n._HideShow(this.parentObject):n._HideShow(this.parentObject,2);n.checkEvent("onOpenEnd")&&(n.xmlstate?(n._oie_onXLE.push(n.onXLE),n.onXLE=n._epnFHe):n.callEvent("onOpenEnd",[this.parentObject.id,n._getOpenState(this.parentObject)]))};dhtmlXTreeObject.prototype._epnFHe=function(n,t,i){if(t!=this.rootId&&this.callEvent("onOpenEnd",[t,n.getOpenState(t)]),n.onXLE=n._oie_onXLE.pop(),!i&&!n._oie_onXLE.length&&n.onXLE)n.onXLE(n,t)};dhtmlXTreeObject.prototype.onRowClickDown=function(n){n=n||window.event;var t=this.parentObject.treeNod;t._selectItem(this.parentObject,n)};dhtmlXTreeObject.prototype.getSelectedItemId=function(){for(var t=[],n=0;n<this._selected.length;n++)t[n]=this._selected[n].id;return t.join(this.dlmtr)};dhtmlXTreeObject.prototype._selectItem=function(n,t){var i,r,e,u,f;if(this.checkEvent("onSelect")&&(this._onSSCFold=this.getSelectedItemId()),this._amsel&&t&&(t.ctrlKey||t.metaKey||t.shiftKey)||this._unselectItems(),n.i_sel&&this._amsel&&t&&(t.ctrlKey||t.metaKey))this._unselectItem(n);else if(!n.i_sel&&(!this._amselS||this._selected.length==0||this._selected[0].parentObject==n.parentObject))if(this._amsel&&t&&t.shiftKey&&this._selected.length!=0&&this._selected[this._selected.length-1].parentObject==n.parentObject)for(i=this._getIndex(this._selected[this._selected.length-1]),r=this._getIndex(n),r<i&&(e=i,i=r,r=e),u=i;u<=r;u++)n.parentObject.childNodes[u].i_sel||this._markItem(n.parentObject.childNodes[u]);else this._markItem(n);this.checkEvent("onSelect")&&(f=this.getSelectedItemId(),f!=this._onSSCFold&&this.callEvent("onSelect",[f]))};dhtmlXTreeObject.prototype._markItem=function(n){n.scolor&&(n.span.style.color=n.scolor);n.span.className="selectedTreeRow";n.span.parentNode.parentNode.className="selectedTreeRowFull";n.i_sel=!0;this._selected[this._selected.length]=n};dhtmlXTreeObject.prototype.getIndexById=function(n){var t=this._globalIdStorageFind(n);return t?this._getIndex(t):null};dhtmlXTreeObject.prototype._getIndex=function(n){for(var i=n.parentObject,t=0;t<i.childsCount;t++)if(i.childNodes[t]==n)return t};dhtmlXTreeObject.prototype._unselectItem=function(n){if(n&&n.i_sel){n.span.className="standartTreeRow";n.span.parentNode.parentNode.className="";n.acolor&&(n.span.style.color=n.acolor);n.i_sel=!1;for(var t=0;t<this._selected.length;t++)if(!this._selected[t].i_sel){this._selected.splice(t,1);break}}};dhtmlXTreeObject.prototype._unselectItems=function(){for(var n,t=0;t<this._selected.length;t++)n=this._selected[t],n.span.className="standartTreeRow",n.span.parentNode.parentNode.className="",n.acolor&&(n.span.style.color=n.acolor),n.i_sel=!1;this._selected=[]};dhtmlXTreeObject.prototype.onRowSelect=function(n,t,i){var r,u,f;n=n||window.event;r=this.parentObject;t&&(r=t.parentObject);u=r.treeNod;f=u.getSelectedItemId();n&&n.skipUnSel||u._selectItem(r,n);i||(r.actionHandler?r.actionHandler(r.id,f):u.callEvent("onClick",[r.id,f]))};dhtmlXTreeObject.prototype._correctCheckStates=function(n){var t;if(this.tscheck&&n&&n.id!=this.rootId){var r=n.childNodes,i=0,u=0;if(n.childsCount!=0){for(t=0;t<n.childsCount;t++)if(!r[t].dscheck)if(r[t].checkstate==0)i=1;else if(r[t].checkstate==1)u=1;else{i=1;u=1;break}i&&u?this._setCheck(n,"unsure"):i?this._setCheck(n,!1):this._setCheck(n,!0);this._correctCheckStates(n.parentObject)}}};dhtmlXTreeObject.prototype.onCheckBoxClick=function(){if(this.treeNod.callEvent("onBeforeCheck",[this.parentObject.id,this.parentObject.checkstate]))return this.parentObject.dscheck?!0:(this.treeNod.tscheck?this.parentObject.checkstate==1?this.treeNod._setSubChecked(!1,this.parentObject):this.treeNod._setSubChecked(!0,this.parentObject):this.parentObject.checkstate==1?this.treeNod._setCheck(this.parentObject,!1):this.treeNod._setCheck(this.parentObject,!0),this.treeNod._correctCheckStates(this.parentObject.parentObject),this.treeNod.callEvent("onCheck",[this.parentObject.id,this.parentObject.checkstate]))};dhtmlXTreeObject.prototype._createItem=function(n,t,i){var o=document.createElement("table"),f,l,e,h,r,u;o.cellSpacing=0;o.cellPadding=0;o.border=0;this.hfMode&&(o.style.tableLayout="fixed");o.style.margin=0;o.style.padding=0;var a=document.createElement("tbody"),s=document.createElement("tr"),c=document.createElement("td");return c.className="standartTreeImage",this._txtimg?(f=document.createElement("div"),c.appendChild(f),f.className="dhx_tree_textSign"):(f=this._getImg(t.id),f.border="0",f.tagName=="IMG"&&(f.align="absmiddle"),c.appendChild(f),f.style.padding=0,f.style.margin=0,f.style.width=this.def_line_img_x),l=document.createElement("td"),e=this._getImg(this.cBROf?this.rootId:t.id),e.checked=0,this._setSrc(e,this.imPath+this.checkArray[0]),e.style.width="18px",e.style.height="18px",n||(l.style.display="none"),l.appendChild(e),this.cBROf||e.tagName!="IMG"||(e.align="absmiddle"),e.onclick=this.onCheckBoxClick,e.treeNod=this,e.parentObject=t,l.width=window._KHTMLrv?"16px":"20px",h=document.createElement("td"),h.className="standartTreeImage",r=this._getImg(this.timgen?t.id:this.rootId),r.onmousedown=this._preventNsDrag,r.ondragstart=this._preventNsDrag,r.border="0",this._aimgs&&(r.parentObject=t,r.tagName=="IMG"&&(r.align="absmiddle"),r.onclick=this.onRowSelect),i||this._setSrc(r,this.iconURL+this.imageArray[0]),h.appendChild(r),r.style.padding=0,r.style.margin=0,this.timgen?(h.style.width=r.style.width=this.def_img_x,r.style.height=this.def_img_y):(r.style.width="0px",r.style.height="0px",(_isOpera||window._KHTMLrv)&&(h.style.display="none")),u=document.createElement("td"),u.className="dhxTextCell standartTreeRow",t.span=document.createElement("span"),t.span.className="standartTreeRow",this.mlitems?(t.span.style.width=this.mlitems,t.span.style.display="block"):u.noWrap=!0,dhx4.isIE8?u.style.width="99999px":window._KHTMLrv||(u.style.width="100%"),t.span.innerHTML=t.label,u.appendChild(t.span),u.parentObject=t,c.parentObject=t,u.onclick=this.onRowSelect,c.onclick=this.onRowClick,u.ondblclick=this.onRowClick2,this.ettip&&(s.title=t.label),this.dragAndDropOff&&(this._aimgs&&(this.dragger.addDraggableItem(h,this),h.parentObject=t),this.dragger.addDraggableItem(u,this)),t.span.style.paddingLeft="5px",t.span.style.paddingRight="5px",u.style.verticalAlign="",u.style.fontSize="10pt",u.style.cursor=this.style_pointer,s.appendChild(c),s.appendChild(l),s.appendChild(h),s.appendChild(u),a.appendChild(s),o.appendChild(a),(this.ehlt||this.checkEvent("onMouseIn")||this.checkEvent("onMouseOut"))&&(s.onmousemove=this._itemMouseIn,s[_isIE?"onmouseleave":"onmouseout"]=this._itemMouseOut),o};dhtmlXTreeObject.prototype.setImagePath=function(n){this.imPath=n;this.iconURL=n};dhtmlXTreeObject.prototype.setIconPath=function(n){this.iconURL=n};dhtmlXTreeObject.prototype._getLeafCount=function(n){for(var i=0,t=0;t<n.childsCount;t++)n.childNodes[t].childsCount==0&&i++;return i};dhtmlXTreeObject.prototype._getChildCounterValue=function(n){var t=this._globalIdStorageFind(n);if(!t)return 0;if(t.unParsed||!t.XMLload&&this.XMLsource)return t._acc;switch(this.childCalc){case 1:return t.childsCount;case 2:return this._getLeafCount(t);case 3:return t._acc;case 4:return t._acc}};dhtmlXTreeObject.prototype._fixChildCountLabel=function(n){var r,i,t;if(this.childCalc!=null){if(n.unParsed||!n.XMLload&&this.XMLsource){n.span.innerHTML=n._acc?n.label+this.htmlcA+n._acc+this.htmlcB:n.label;return}switch(this.childCalc){case 1:n.span.innerHTML=n.childsCount!=0?n.label+this.htmlcA+n.childsCount+this.htmlcB:n.label;break;case 2:r=this._getLeafCount(n);n.span.innerHTML=r!=0?n.label+this.htmlcA+r+this.htmlcB:n.label;break;case 3:if(n.childsCount!=0){for(i=0,t=0;t<n.childsCount;t++)n.childNodes[t]._acc||(n.childNodes[t]._acc=0),i+=n.childNodes[t]._acc*1;i+=n.childsCount*1;n.span.innerHTML=n.label+this.htmlcA+i+this.htmlcB;n._acc=i}else n.span.innerHTML=n.label,n._acc=0;n.parentObject&&n.parentObject!=this.htmlNode&&this._fixChildCountLabel(n.parentObject);break;case 4:if(n.childsCount!=0){for(i=0,t=0;t<n.childsCount;t++)n.childNodes[t]._acc||(n.childNodes[t]._acc=1),i+=n.childNodes[t]._acc*1;n.span.innerHTML=n.label+this.htmlcA+i+this.htmlcB;n._acc=i}else n.span.innerHTML=n.label,n._acc=1;n.parentObject&&n.parentObject!=this.htmlNode&&this._fixChildCountLabel(n.parentObject)}}};dhtmlXTreeObject.prototype.setChildCalcMode=function(n){switch(n){case"child":this.childCalc=1;break;case"leafs":this.childCalc=2;break;case"childrec":this.childCalc=3;break;case"leafsrec":this.childCalc=4;break;case"disabled":this.childCalc=null;break;default:this.childCalc=4}};dhtmlXTreeObject.prototype.setChildCalcHTML=function(n,t){this.htmlcA=n;this.htmlcB=t};dhtmlXTreeObject.prototype.setOnRightClickHandler=function(n){this.attachEvent("onRightClick",n)};dhtmlXTreeObject.prototype.setOnClickHandler=function(n){this.attachEvent("onClick",n)};dhtmlXTreeObject.prototype.setOnSelectStateChange=function(n){this.attachEvent("onSelect",n)};dhtmlXTreeObject.prototype.setXMLAutoLoading=function(n){this.XMLsource=n};dhtmlXTreeObject.prototype.setOnCheckHandler=function(n){this.attachEvent("onCheck",n)};dhtmlXTreeObject.prototype.setOnOpenHandler=function(n){this.attachEvent("onOpenStart",n)};dhtmlXTreeObject.prototype.setOnOpenStartHandler=function(n){this.attachEvent("onOpenStart",n)};dhtmlXTreeObject.prototype.setOnOpenEndHandler=function(n){this.attachEvent("onOpenEnd",n)};dhtmlXTreeObject.prototype.setOnDblClickHandler=function(n){this.attachEvent("onDblClick",n)};dhtmlXTreeObject.prototype.openAllItems=function(n){var t=this._globalIdStorageFind(n);if(!t)return 0;this._xopenAll(t)};dhtmlXTreeObject.prototype.getOpenState=function(n){var t=this._globalIdStorageFind(n);return t?this._getOpenState(t):""};dhtmlXTreeObject.prototype.closeAllItems=function(n){n===window.undefined&&(n=this.rootId);var t=this._globalIdStorageFind(n);if(!t)return 0;this._xcloseAll(t);this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};dhtmlXTreeObject.prototype.setUserData=function(n,t,i){var r=this._globalIdStorageFind(n,0,!0);r&&(t=="hint"&&(r.htmlNode.childNodes[0].childNodes[0].title=i),typeof r.userData["t_"+t]=="undefined"&&(r._userdatalist?r._userdatalist+=","+t:r._userdatalist=t),r.userData["t_"+t]=i)};dhtmlXTreeObject.prototype.getUserData=function(n,t){var i=this._globalIdStorageFind(n,0,!0);if(i)return i.userData["t_"+t]};dhtmlXTreeObject.prototype.getItemColor=function(n){var t=this._globalIdStorageFind(n),i;return t?(i={},t.acolor&&(i.acolor=t.acolor),t.scolor&&(i.scolor=t.scolor),i):0};dhtmlXTreeObject.prototype.setItemColor=function(n,t,i){var r;if(r=n&&n.span?n:this._globalIdStorageFind(n),r)r.i_sel?(i||t)&&(r.span.style.color=i||t):t&&(r.span.style.color=t),i&&(r.scolor=i),t&&(r.acolor=t);else return 0};dhtmlXTreeObject.prototype.getItemText=function(n){var t=this._globalIdStorageFind(n);return t?t.htmlNode.childNodes[0].childNodes[0].childNodes[3].childNodes[0].innerHTML:0};dhtmlXTreeObject.prototype.getParentId=function(n){var t=this._globalIdStorageFind(n);return!t||!t.parentObject?"":t.parentObject.id};dhtmlXTreeObject.prototype.changeItemId=function(n,t){if(n!=t){var i=this._globalIdStorageFind(n);if(!i)return 0;i.id=t;i.span.contextMenuId=t;this._idpull[t]=this._idpull[n];delete this._idpull[n]}};dhtmlXTreeObject.prototype.doCut=function(){var t,n;for(this.nodeCut&&this.clearCut(),this.nodeCut=[].concat(this._selected),t=0;t<this.nodeCut.length;t++)n=this.nodeCut[t],n._cimgs=[],n._cimgs[0]=n.images[0],n._cimgs[1]=n.images[1],n._cimgs[2]=n.images[2],n.images[0]=n.images[1]=n.images[2]=this.cutImage,this._correctPlus(n)};dhtmlXTreeObject.prototype.doPaste=function(n){var i=this._globalIdStorageFind(n),t;if(!i)return 0;for(t=0;t<this.nodeCut.length;t++)this._checkPNodes(i,this.nodeCut[t])||this._moveNode(this.nodeCut[t],i);this.clearCut()};dhtmlXTreeObject.prototype.clearCut=function(){for(var n,t=0;t<this.nodeCut.length;t++)n=this.nodeCut[t],n.images[0]=n._cimgs[0],n.images[1]=n._cimgs[1],n.images[2]=n._cimgs[2],this._correctPlus(n);this.nodeCut=[]};dhtmlXTreeObject.prototype._moveNode=function(n,t){var f=this.dadmodec,i,r,u;if(f==1){if(i=t,this.dadmodefix<0){for(;;){if(i=this._getPrevNode(i),i==-1){i=this.htmlNode;break}if(i.tr==0||i.tr.style.display==""||!i.parentObject)break}u=i;r=t}else i.tr&&i.tr.nextSibling&&i.tr.nextSibling.nodem&&this._getOpenState(i)<1?i=i.tr.nextSibling.nodem:this._getOpenState(i)<1?i=this.htmlNode:(i=this._getNextNode(i),i==-1&&(i=this.htmlNode)),r=i,u=t;return this._getNodeLevel(u,0)>this._getNodeLevel(r,0)?this.dropLower?r.id!=this.rootId?this._moveNodeTo(n,r.parentObject,r):this._moveNodeTo(n,this.htmlNode,null):this._moveNodeTo(n,u.parentObject):this._moveNodeTo(n,r.parentObject,r)}return this._moveNodeTo(n,t)};dhtmlXTreeObject.prototype._fixNodesCollection=function(n,t){var f=0,r=n.childNodes,u=n.childsCount-1,i,e;if(t!=r[u]){for(i=0;i<u;i++)r[i]==r[u]&&(r[i]=r[i+1],r[i+1]=r[u]);for(i=0;i<u+1;i++)f?(e=r[i],r[i]=f,f=e):r[i]==t&&(f=r[i],r[i]=r[u])}};dhtmlXTreeObject.prototype._recreateBranch=function(n,t,i,r){var s="",e,u,o,f;if(i){for(f=0;f<t.childsCount;f++)if(t.childNodes[f]==i)break;f!=0?i=t.childNodes[f-1]:(s="TOP",i="")}if(e=this._onradh,this._onradh=null,u=this._attachChildNode(t,n.id,n.label,0,n.images[0],n.images[1],n.images[2],s,0,i),u._userdatalist=n._userdatalist,u.userData=n.userData.clone(),n._attrs){u._attrs={};for(o in n._attrs)u._attrs[o]=n._attrs[o]}for(u.XMLload=n.XMLload,e&&(this._onradh=e,this._onradh(u.id)),n.treeNod.dpcpy?n.treeNod._globalIdStorageFind(n.id):u.unParsed=n.unParsed,this._correctPlus(u),f=0;f<n.childsCount;f++)this._recreateBranch(n.childNodes[f],u,0,1);return!r&&this.childCalc&&this._redrawFrom(this,t),u};dhtmlXTreeObject.prototype._moveNodeTo=function(n,t,i){var s,a,h,f,e,l,o;if(n.treeNod._nonTrivialNode)return n.treeNod._nonTrivialNode(this,t,i,n);if(this._checkPNodes(t,n)||(s=t.mytype?n.treeNod.lWin!=t.lWin:n.treeNod.lWin!=t.treeNod.lWin,!this.callEvent("onDrag",[n.id,t.id,i?i.id:null,n.treeNod,t.treeNod])))return!1;t.XMLload==0&&this.XMLsource&&(t.XMLload=1,this._loadDynXML(t.id));this.openItem(t.id);var r=n.treeNod,c=n.parentObject.childsCount,u=n.parentObject;if(s||r.dpcpy?(a=n.id,n=this._recreateBranch(n,t,i),r.dpcpy||r.deleteItem(a)):(h=t.childsCount,f=t.childNodes,h==0&&(t._open=!0),r._unselectItem(n),f[h]=n,n.treeNod=t.treeNod,t.childsCount++,e=this._drawNewTr(f[h].htmlNode),i?(t.htmlNode.childNodes[0].insertBefore(e,i.tr),this._fixNodesCollection(t,i),f=t.childNodes):(t.htmlNode.childNodes[0].appendChild(e),this.dadmode==1&&this._fixNodesCollection(t,i))),!r.dpcpy&&!s){if(l=n.tr,document.all&&navigator.appVersion.search(/MSIE\ 5\.0/gi)!=-1?window.setTimeout(function(){l.parentNode.removeChild(l)},250):n.parentObject.htmlNode.childNodes[0].removeChild(n.tr),i&&t==n.parentObject)u.childNodes[u.childsCount-1]=0;else for(o=0;o<u.childsCount;o++)if(u.childNodes[o].id==n.id){u.childNodes[o]=0;break}r._compressChildList(u.childsCount,u.childNodes);u.childsCount--}if(!s&&!r.dpcpy){if(n.tr=e,e.nodem=n,n.parentObject=t,r!=t.treeNod){if(n.treeNod._registerBranch(n,r))return;this._clearStyles(n);this._redrawFrom(this,n.parentObject);this._onradh&&this._onradh(n.id)}this._correctPlus(t);this._correctLine(t);this._correctLine(n);this._correctPlus(n);i?this._correctPlus(i):t.childsCount>=2&&(this._correctPlus(f[t.childsCount-2]),this._correctLine(f[t.childsCount-2]));this._correctPlus(f[t.childsCount-1]);this.tscheck&&this._correctCheckStates(t);r.tscheck&&r._correctCheckStates(u)}return c>1&&(r._correctPlus(u.childNodes[c-2]),r._correctLine(u.childNodes[c-2])),r._correctPlus(u),r._correctLine(u),this._fixChildCountLabel(t),r._fixChildCountLabel(u),this.callEvent("onDrop",[n.id,t.id,i?i.id:null,r,t.treeNod]),n.id};dhtmlXTreeObject.prototype._clearStyles=function(n){var t,i,r;if(n.htmlNode)for(t=n.htmlNode.childNodes[0].childNodes[0].childNodes[1],i=t.nextSibling.nextSibling,n.span.innerHTML=n.label,n.i_sel=!1,n._aimgs&&this.dragger.removeDraggableItem(t.nextSibling),this.checkBoxOff?(t.childNodes[0].style.display="",t.childNodes[0].onclick=this.onCheckBoxClick,this._setSrc(t.childNodes[0],this.imPath+this.checkArray[n.checkstate])):t.style.display="none",t.childNodes[0].treeNod=this,this.dragger.removeDraggableItem(i),this.dragAndDropOff&&this.dragger.addDraggableItem(i,this),this._aimgs&&this.dragger.addDraggableItem(t.nextSibling,this),i.childNodes[0].className="standartTreeRow",i.parentNode.className="",i.onclick=this.onRowSelect,i.ondblclick=this.onRowClick2,t.previousSibling.onclick=this.onRowClick,this._correctLine(n),this._correctPlus(n),r=0;r<n.childsCount;r++)this._clearStyles(n.childNodes[r])};dhtmlXTreeObject.prototype._registerBranch=function(n,t){t&&t._globalIdStorageSub(n.id);n.id=this._globalIdStorageAdd(n.id,n);n.treeNod=this;for(var i=0;i<n.childsCount;i++)this._registerBranch(n.childNodes[i],t);return 0};dhtmlXTreeObject.prototype.enableThreeStateCheckboxes=function(n){this.tscheck=dhx4.s2b(n)};dhtmlXTreeObject.prototype.setOnMouseInHandler=function(n){this.ehlt=!0;this.attachEvent("onMouseIn",n)};dhtmlXTreeObject.prototype.setOnMouseOutHandler=function(n){this.ehlt=!0;this.attachEvent("onMouseOut",n)};dhtmlXTreeObject.prototype.enableMercyDrag=function(n){this.dpcpy=dhx4.s2b(n)};dhtmlXTreeObject.prototype.enableTreeImages=function(n){this.timgen=dhx4.s2b(n)};dhtmlXTreeObject.prototype.enableFixedMode=function(n){this.hfMode=dhx4.s2b(n)};dhtmlXTreeObject.prototype.enableCheckBoxes=function(n,t){this.checkBoxOff=dhx4.s2b(n);this.cBROf=!(this.checkBoxOff||dhx4.s2b(t))};dhtmlXTreeObject.prototype.setStdImages=function(n,t,i){this.imageArray[0]=n;this.imageArray[1]=t;this.imageArray[2]=i};dhtmlXTreeObject.prototype.enableTreeLines=function(n){this.treeLinesOn=dhx4.s2b(n)};dhtmlXTreeObject.prototype.setImageArrays=function(n,t,i,r,u,f){switch(n){case"plus":this.plusArray[0]=t;this.plusArray[1]=i;this.plusArray[2]=r;this.plusArray[3]=u;this.plusArray[4]=f;break;case"minus":this.minusArray[0]=t;this.minusArray[1]=i;this.minusArray[2]=r;this.minusArray[3]=u;this.minusArray[4]=f}};dhtmlXTreeObject.prototype.openItem=function(n){this.skipLock=!0;var t=this._globalIdStorageFind(n);return t?this._openItem(t):0};dhtmlXTreeObject.prototype._openItem=function(n){var t=this._getOpenState(n);if(t<0||this.XMLsource&&!n.XMLload){if(!this.callEvent("onOpenStart",[n.id,t]))return 0;this._HideShow(n,2);this.checkEvent("onOpenEnd")&&(this.onXLE==this._epnFHe&&this._epnFHe(this,n.id,!0),this.xmlstate&&this.XMLsource?(this._oie_onXLE.push(this.onXLE),this.onXLE=this._epnFHe):this.callEvent("onOpenEnd",[n.id,this._getOpenState(n)]))}else this._srnd&&this._HideShow(n,2);n.parentObject&&!this._skip_open_parent&&this._openItem(n.parentObject)};dhtmlXTreeObject.prototype.closeItem=function(n){if(this.rootId==n)return 0;this.skipLock=!0;var t=this._globalIdStorageFind(n);if(!t)return 0;t.closeble&&this._HideShow(t,1);this.skipLock=!1};dhtmlXTreeObject.prototype.getLevel=function(n){var t=this._globalIdStorageFind(n);return t?this._getNodeLevel(t,0):0};dhtmlXTreeObject.prototype.setItemCloseable=function(n,t){var i;if(t=dhx4.s2b(t),i=n&&n.span?n:this._globalIdStorageFind(n),!i)return 0;i.closeble=t};dhtmlXTreeObject.prototype._getNodeLevel=function(n,t){return n.parentObject?this._getNodeLevel(n.parentObject,t+1):t};dhtmlXTreeObject.prototype.hasChildren=function(n){var t=this._globalIdStorageFind(n);return t?this.XMLsource&&!t.XMLload?!0:t.childsCount:0};dhtmlXTreeObject.prototype._getLeafCount=function(n){for(var i=0,t=0;t<n.childsCount;t++)n.childNodes[t].childsCount==0&&i++;return i};dhtmlXTreeObject.prototype.setItemText=function(n,t,i){var r=this._globalIdStorageFind(n);if(!r)return 0;r.label=t;r.span.innerHTML=t;this.childCalc&&this._fixChildCountLabel(r);r.span.parentNode.parentNode.title=i||""};dhtmlXTreeObject.prototype.getItemTooltip=function(n){var t=this._globalIdStorageFind(n);return t?t.span.parentNode.parentNode._dhx_title||t.span.parentNode.parentNode.title||"":""};dhtmlXTreeObject.prototype.refreshItem=function(n){n||(n=this.rootId);var t=this._globalIdStorageFind(n);this._dynDeleteBranches[n]=(this._dynDeleteBranches[n]||0)+1;this._loadDynXML(n)};dhtmlXTreeObject.prototype.setItemImage2=function(n,t,i,r){var u=this._globalIdStorageFind(n);if(!u)return 0;u.images[1]=i;u.images[2]=r;u.images[0]=t;this._correctPlus(u)};dhtmlXTreeObject.prototype.setItemImage=function(n,t,i){var r=this._globalIdStorageFind(n);if(!r)return 0;i?(r.images[1]=t,r.images[2]=i):r.images[0]=t;this._correctPlus(r)};dhtmlXTreeObject.prototype.getSubItems=function(n){var t=this._globalIdStorageFind(n,0,1),r;if(!t)return 0;if(t.unParsed)return this._getSubItemsXML(t.unParsed);for(r="",i=0;i<t.childsCount;i++)r?r+=this.dlmtr+t.childNodes[i].id:r=""+t.childNodes[i].id;return r};dhtmlXTreeObject.prototype._getAllScraggyItems=function(n){for(var r,i="",t=0;t<n.childsCount;t++)n.childNodes[t].unParsed||n.childNodes[t].childsCount>0?(r=n.childNodes[t].unParsed?this._getAllScraggyItemsXML(n.childNodes[t].unParsed,1):this._getAllScraggyItems(n.childNodes[t]),r&&(i?i+=this.dlmtr+r:i=r)):i?i+=this.dlmtr+n.childNodes[t].id:i=""+n.childNodes[t].id;return i};dhtmlXTreeObject.prototype._getAllFatItems=function(n){for(var r,i="",t=0;t<n.childsCount;t++)(n.childNodes[t].unParsed||n.childNodes[t].childsCount>0)&&(i?i+=this.dlmtr+n.childNodes[t].id:i=""+n.childNodes[t].id,r=n.childNodes[t].unParsed?this._getAllFatItemsXML(n.childNodes[t].unParsed,1):this._getAllFatItems(n.childNodes[t]),r&&(i+=this.dlmtr+r));return i};dhtmlXTreeObject.prototype._getAllSubItems=function(n,t,i){var r,u,f;if(r=i?i:this._globalIdStorageFind(n),!r)return 0;for(t="",u=0;u<r.childsCount;u++)t?t+=this.dlmtr+r.childNodes[u].id:t=""+r.childNodes[u].id,f=this._getAllSubItems(0,t,r.childNodes[u]),f&&(t+=this.dlmtr+f);return r.unParsed&&(t=this._getAllSubItemsXML(n,t,r.unParsed)),t};dhtmlXTreeObject.prototype.selectItem=function(n,t,i){var r,u;if(t=dhx4.s2b(t),r=this._globalIdStorageFind(n),!r||!r.parentObject)return 0;if(this.XMLloadingWarning?r.parentObject.openMe=1:this._openItem(r.parentObject),u=null,i&&(u={},u.ctrlKey=!0,r.i_sel&&(u.skipUnSel=!0)),t)this.onRowSelect(u,r.htmlNode.childNodes[0].childNodes[0].childNodes[3],!1);else this.onRowSelect(u,r.htmlNode.childNodes[0].childNodes[0].childNodes[3],!0)};dhtmlXTreeObject.prototype.getSelectedItemText=function(){for(var t=[],n=0;n<this._selected.length;n++)t[n]=this._selected[n].span.innerHTML;return t.join(this.dlmtr)};dhtmlXTreeObject.prototype._compressChildList=function(n,t){n--;for(var i=0;i<n;i++)t[i]==0&&(t[i]=t[i+1],t[i+1]=0)};dhtmlXTreeObject.prototype._deleteNode=function(n,t,i){var u,f,r;if(!t||!t.parentObject)return 0;u=0;f=0;t.tr.nextSibling&&(u=t.tr.nextSibling.nodem);t.tr.previousSibling&&(f=t.tr.previousSibling.nodem);var e=t.parentObject,s=e.childsCount,o=e.childNodes;for(r=0;r<s;r++)if(o[r].id==n){i||e.htmlNode.childNodes[0].removeChild(o[r].tr);o[r]=0;break}this._compressChildList(s,o);i||e.childsCount--;u&&(this._correctPlus(u),this._correctLine(u));f&&(this._correctPlus(f),this._correctLine(f));this.tscheck&&this._correctCheckStates(e);i||this._globalIdStorageRecSub(t)};dhtmlXTreeObject.prototype.setCheck=function(n,t){var i=this._globalIdStorageFind(n,0,1);i&&(t==="unsure"?this._setCheck(i,t):(t=dhx4.s2b(t),this.tscheck&&this.smcheck?this._setSubChecked(t,i):this._setCheck(i,t)),this.smcheck&&this._correctCheckStates(i.parentObject))};dhtmlXTreeObject.prototype._setCheck=function(n,t){var i,r;if(n){if((n.parentObject._r_logic||this._frbtr)&&t)if(this._frbtrs)this._frbtrL&&this.setCheck(this._frbtrL.id,0),this._frbtrL=n;else for(i=0;i<n.parentObject.childsCount;i++)this._setCheck(n.parentObject.childNodes[i],0);r=n.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];n.checkstate=t=="unsure"?2:t?1:0;n.dscheck&&(n.checkstate=n.dscheck);this._setSrc(r,this.imPath+(n.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[n.checkstate])}};dhtmlXTreeObject.prototype.setSubChecked=function(n,t){var i=this._globalIdStorageFind(n);this._setSubChecked(t,i);this._correctCheckStates(i.parentObject)};dhtmlXTreeObject.prototype._setSubChecked=function(n,t){var i,r;if(n=dhx4.s2b(n),t){if((t.parentObject._r_logic||this._frbtr)&&n)for(i=0;i<t.parentObject.childsCount;i++)this._setSubChecked(0,t.parentObject.childNodes[i]);if(t.unParsed&&this._setSubCheckedXML(n,t.unParsed),t._r_logic||this._frbtr)this._setSubChecked(n,t.childNodes[0]);else for(i=0;i<t.childsCount;i++)this._setSubChecked(n,t.childNodes[i]);r=t.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];t.checkstate=n?1:0;t.dscheck&&(t.checkstate=t.dscheck);this._setSrc(r,this.imPath+(t.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[t.checkstate])}};dhtmlXTreeObject.prototype.isItemChecked=function(n){var t=this._globalIdStorageFind(n);if(t)return t.checkstate};dhtmlXTreeObject.prototype.deleteChildItems=function(n){var t=this._globalIdStorageFind(n),r,i;if(t)for(r=t.childsCount,i=0;i<r;i++)this._deleteNode(t.childNodes[0].id,t.childNodes[0])};dhtmlXTreeObject.prototype.deleteItem=function(n,t){if(!this._onrdlh||this._onrdlh(n)){var i=this._deleteItem(n,t);i&&this._fixChildCountLabel(i)}this.allTree.childNodes[0].border="1";this.allTree.childNodes[0].border="0"};dhtmlXTreeObject.prototype._deleteItem=function(n,t,i){var r,f,u;if(t=dhx4.s2b(t),r=this._globalIdStorageFind(n),r)return f=this.getParentId(n),u=r.parentObject,this._deleteNode(n,r,i),this._editCell&&this._editCell.id==n&&(this._editCell=null),this._correctPlus(u),this._correctLine(u),t&&f!=this.rootId&&this.selectItem(f,1),u};dhtmlXTreeObject.prototype._globalIdStorageRecSub=function(n){for(var i,t=0;t<n.childsCount;t++)this._globalIdStorageRecSub(n.childNodes[t]),this._globalIdStorageSub(n.childNodes[t].id);this._globalIdStorageSub(n.id);i=n;i.span=null;i.tr.nodem=null;i.tr=null;i.htmlNode=null};dhtmlXTreeObject.prototype.insertNewNext=function(n,t,i,r,u,f,e,o,s){var h=this._globalIdStorageFind(n),c;return!h||!h.parentObject?0:(c=this._attachChildNode(0,t,i,r,u,f,e,o,s,h),!this.XMLloadingWarning&&this.childCalc&&this._fixChildCountLabel(h.parentObject),c)};dhtmlXTreeObject.prototype.getItemIdByIndex=function(n,t){var i=this._globalIdStorageFind(n);return!i||t>=i.childsCount?null:i.childNodes[t].id};dhtmlXTreeObject.prototype.getChildItemIdByIndex=function(n,t){var i=this._globalIdStorageFind(n);return!i||t>=i.childsCount?null:i.childNodes[t].id};dhtmlXTreeObject.prototype.setDragHandler=function(n){this.attachEvent("onDrag",n)};dhtmlXTreeObject.prototype._clearMove=function(){this._lastMark&&(this._lastMark.className=this._lastMark.className.replace(/dragAndDropRow/g,""),this._lastMark=null);this.selectionBar.style.display="none";this.allTree.className=this.allTree.className.replace(" selectionBox","")};dhtmlXTreeObject.prototype.enableDragAndDrop=function(n,t){n=="temporary_disabled"?(this.dADTempOff=!1,n=!0):this.dADTempOff=!0;this.dragAndDropOff=dhx4.s2b(n);this.dragAndDropOff&&this.dragger.addDragLanding(this.allTree,this);arguments.length>1&&(this._ddronr=!dhx4.s2b(t))};dhtmlXTreeObject.prototype._setMove=function(n,t,i){var r,u,f,e;n.parentObject.span&&(r=dhx4.absTop(n),u=dhx4.absTop(this.allTree)-this.allTree.scrollTop,this.dadmodec=this.dadmode,this.dadmodefix=0,this.dadmode==2&&(f=i-r+(document.body.scrollTop||document.documentElement.scrollTop)-2-n.offsetHeight/2,Math.abs(f)-n.offsetHeight/6>0?(this.dadmodec=1,f<0&&(this.dadmodefix=0-n.offsetHeight)):this.dadmodec=0),this.dadmodec==0?(e=n.parentObject.span,e.className+=" dragAndDropRow",this._lastMark=e):(this._clearMove(),this.selectionBar.style.top=r-u+((parseInt(n.parentObject.span.parentNode.parentNode.offsetHeight)||18)-1)+this.dadmodefix+"px",this.selectionBar.style.left="5px",this.allTree.offsetWidth>20&&(this.selectionBar.style.width=this.allTree.offsetWidth-(_isFF?30:25)+"px"),this.selectionBar.style.display=""),this._autoScroll(null,r,u))};dhtmlXTreeObject.prototype._autoScroll=function(n,t,i){this.autoScroll&&(n&&(t=dhx4.absTop(n),i=dhx4.absTop(this.allTree)-this.allTree.scrollTop),t-i-parseInt(this.allTree.scrollTop)>parseInt(this.allTree.offsetHeight)-50&&(this.allTree.scrollTop=parseInt(this.allTree.scrollTop)+20),t-i<parseInt(this.allTree.scrollTop)+30&&(this.allTree.scrollTop=parseInt(this.allTree.scrollTop)-20))};dhtmlXTreeObject.prototype._createDragNode=function(n,t){var u,r,f,i;if(!this.dADTempOff||(u=n.parentObject,!this.callEvent("onBeforeDrag",[u.id,t])))return null;if(u.i_sel||this._selectItem(u,t),this._checkMSelectionLogic(),r=document.createElement("div"),f=[],this._itim_dg)for(i=0;i<this._selected.length;i++)f[i]="<table cellspacing='0' cellpadding='0'><tr><td><img width='18px' height='18px' src='"+this._getSrc(this._selected[i].span.parentNode.previousSibling.childNodes[0])+"'><\/td><td>"+this._selected[i].span.innerHTML+"<\/td><\/tr><\/table>";else f=this.getSelectedItemText().split(this.dlmtr);return r.innerHTML=f.join(""),r.style.position="absolute",r.className="dragSpanDiv",this._dragged=[].concat(this._selected),r};dhtmlXTreeObject.prototype._focusNode=function(n){var t=dhx4.absTop(n.htmlNode)-dhx4.absTop(this.allTree);(t>this.allTree.offsetHeight-30||t<0)&&(this.allTree.scrollTop=t+this.allTree.scrollTop)};dhtmlXTreeObject.prototype._preventNsDrag=function(n){return n&&n.preventDefault?(n.preventDefault(),!1):!1};dhtmlXTreeObject.prototype._drag=function(n,t,i){var r,e,o,f,u;if(this._autoOpenTimer&&clearTimeout(this._autoOpenTimer),i.parentObject||(i=this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.dadmodec=0),this._clearMove(),r=n.parentObject.treeNod,r&&r._clearMove&&r._clearMove(""),!this.dragMove||this.dragMove())for(e=r&&r._clearMove&&r._dragged?r._dragged:new Array(n.parentObject),o=i.parentObject,f=0;f<e.length;f++)u=this._moveNode(e[f],o),this.dadmodec&&u!==!1&&(o=this._globalIdStorageFind(u,!0,!0)),u&&!this._sADnD&&this.selectItem(u,0,1);r&&(r._dragged=[])};dhtmlXTreeObject.prototype._dragIn=function(n,t,i,r){var f,u,s,e,o;if(!this.dADTempOff)return 0;if(f=t.parentObject,u=n.parentObject,u||!this._ddronr){if(!this.callEvent("onDragIn",[f.id,u?u.id:null,f.treeNod,this]))return u&&this._autoScroll(n),0;if(u){if(f.childNodes==null)return this._setMove(n,i,r),n;for(s=f.treeNod,e=0;e<s._dragged.length;e++)if(this._checkPNodes(u,s._dragged[e]))return this._autoScroll(n),0;this.selectionBar.parentNode.removeChild(this.selectionBar);u.span.parentNode.appendChild(this.selectionBar);this._setMove(n,i,r);this._getOpenState(u)<=0&&(o=this,this._autoOpenId=u.id,this._autoOpenTimer=window.setTimeout(function(){o._autoOpenItem(null,o);o=null},1e3))}else this.allTree.className+=" selectionBox";return n}};dhtmlXTreeObject.prototype._autoOpenItem=function(n,t){t.openItem(t._autoOpenId)};dhtmlXTreeObject.prototype._dragOut=function(){this._clearMove();this._autoOpenTimer&&clearTimeout(this._autoOpenTimer)};dhtmlXTreeObject.prototype._getNextNode=function(n,t){return!t&&n.childsCount?n.childNodes[0]:n==this.htmlNode?-1:n.tr&&n.tr.nextSibling&&n.tr.nextSibling.nodem?n.tr.nextSibling.nodem:this._getNextNode(n.parentObject,!0)};dhtmlXTreeObject.prototype._lastChild=function(n){return n.childsCount?this._lastChild(n.childNodes[n.childsCount-1]):n};dhtmlXTreeObject.prototype._getPrevNode=function(n){return n.tr&&n.tr.previousSibling&&n.tr.previousSibling.nodem?this._lastChild(n.tr.previousSibling.nodem):n.parentObject?n.parentObject:-1};dhtmlXTreeObject.prototype.findItem=function(n,t,i){var r=this._findNodeByLabel(n,t,i?this.htmlNode:null);return r?(this.selectItem(r.id,!0),this._focusNode(r),r.id):null};dhtmlXTreeObject.prototype.findItemIdByLabel=function(n,t,i){var r=this._findNodeByLabel(n,t,i?this.htmlNode:null);return r?r.id:null};dhtmlXTreeObject.prototype.findStrInXML=function(n,t,i){var r,u;if(!n.childNodes&&n.item)return this.findStrInJSON(n,t,i);if(!n.childNodes)return!1;for(r=0;r<n.childNodes.length;r++)if(n.childNodes[r].nodeType==1&&((u=n.childNodes[r].getAttribute(t),u||n.childNodes[r].tagName!="itemtext"||(u=n.childNodes[r].firstChild.data),u&&u.toLowerCase().search(i)!=-1)||this.findStrInXML(n.childNodes[r],t,i)))return!0;return!1};dhtmlXTreeObject.prototype.findStrInJSON=function(n,t,i){for(var u,r=0;r<n.item.length;r++)if((u=n.item[r].text,u&&u.toLowerCase().search(i)!=-1)||n.item[r].item&&this.findStrInJSON(n.item[r],t,i))return!0;return!1};dhtmlXTreeObject.prototype._findNodeByLabel=function(n,t,i){var n=n.replace(new RegExp("^( )+"),"").replace(new RegExp("( )+$"),""),u,r;for(n=new RegExp(n.replace(/([\^\.\?\*\+\\\[\]\(\)]{1})/gi,"\\$1").replace(/ /gi,".*"),"gi"),i||(i=this._selected[0],i||(i=this.htmlNode)),u=i,t?(r=this._getPrevNode(u),r==-1&&(r=this._lastChild(this.htmlNode)),r.unParsed&&this.findStrInXML(r.unParsed.d,"text",n)?(this.reParse(r),i=this._getPrevNode(u)):i=r,i==-1&&(i=this._lastChild(this.htmlNode))):(i.unParsed&&this.findStrInXML(i.unParsed.d,"text",n)&&this.reParse(i),i=this._getNextNode(u),i==-1&&(i=this.htmlNode.childNodes[0]));i&&i!=u;){if(i.label&&i.label.search(n)!=-1)return i;if(t)r=this._getPrevNode(i),r==-1&&(r=this._lastChild(this.htmlNode)),r.unParsed&&this.findStrInXML(r.unParsed.d,"text",n)?(this.reParse(r),i=this._getPrevNode(i)):i=r,i==-1&&(i=this._lastChild(this.htmlNode));else{if(i==-1){if(u==this.htmlNode)break;i=this.htmlNode.childNodes[0]}i.unParsed&&this.findStrInXML(i.unParsed.d,"text",n)&&this.reParse(i);i=this._getNextNode(i);i==-1&&(i=this.htmlNode)}}return null};dhtmlXTreeObject.prototype.moveItem=function(n,t,i,r){var u=this._globalIdStorageFind(n),o,e,s,f;if(!u)return 0;o=null;switch(t){case"right":alert("Not supported yet");break;case"item_child":if(e=(r||this)._globalIdStorageFind(i),!e)return 0;o=(r||this)._moveNodeTo(u,e,0);break;case"item_sibling":if(e=(r||this)._globalIdStorageFind(i),!e)return 0;o=(r||this)._moveNodeTo(u,e.parentObject,e);break;case"item_sibling_next":if(e=(r||this)._globalIdStorageFind(i),!e)return 0;o=e.tr&&e.tr.nextSibling&&e.tr.nextSibling.nodem?(r||this)._moveNodeTo(u,e.parentObject,e.tr.nextSibling.nodem):(r||this)._moveNodeTo(u,e.parentObject);break;case"left":u.parentObject.parentObject&&(o=this._moveNodeTo(u,u.parentObject.parentObject,u.parentObject));break;case"up":if(f=this._getPrevNode(u),f==-1||!f.parentObject)return null;o=this._moveNodeTo(u,f.parentObject,f);break;case"up_strict":f=this._getIndex(u);f!=0&&(o=this._moveNodeTo(u,u.parentObject,u.parentObject.childNodes[f-1]));break;case"down_strict":f=this._getIndex(u);s=u.parentObject.childsCount-2;f==s?o=this._moveNodeTo(u,u.parentObject):f<s&&(o=this._moveNodeTo(u,u.parentObject,u.parentObject.childNodes[f+2]));break;case"down":if(f=this._getNextNode(this._lastChild(u)),f==-1||!f.parentObject)return;if(f.parentObject==u.parentObject&&(f=this._getNextNode(f)),f==-1)o=this._moveNodeTo(u,u.parentObject);else{if(f==-1||!f.parentObject)return;o=this._moveNodeTo(u,f.parentObject,f)}}return _isIE&&_isIE<8&&(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0"),o};dhtmlXTreeObject.prototype.setDragBehavior=function(n,t){this._sADnD=!dhx4.s2b(t);switch(n){case"child":this.dadmode=0;break;case"sibling":this.dadmode=1;break;case"complex":this.dadmode=2}};dhtmlXTreeObject.prototype._loadDynXML=function(n,t){t=t||this.XMLsource;var i=(new Date).valueOf();this._ld_id=n;this.xmlalb=="function"?t&&t(this._escape(n)):this.xmlalb=="name"?this.load(t+this._escape(n)):this.xmlalb=="xmlname"?this.load(t+this._escape(n)+".xml?uid="+i):this.load(t+dhtmlx.url(t)+"uid="+i+"&id="+this._escape(n))};dhtmlXTreeObject.prototype.enableMultiselection=function(n,t){this._amsel=dhx4.s2b(n);this._amselS=dhx4.s2b(t)};dhtmlXTreeObject.prototype._checkMSelectionLogic=function(){for(var t,i=[],n=0;n<this._selected.length;n++)for(t=0;t<this._selected.length;t++)n!=t&&this._checkPNodes(this._selected[t],this._selected[n])&&(i[i.length]=this._selected[t]);for(n=0;n<i.length;n++)this._unselectItem(i[n])};dhtmlXTreeObject.prototype._checkPNodes=function(n,t){return this._dcheckf?!1:t==n?1:n.parentObject?this._checkPNodes(n.parentObject,t):0};dhtmlXTreeObject.prototype.disableDropCheck=function(n){this._dcheckf=dhx4.s2b(n)};dhtmlXTreeObject.prototype.enableDistributedParsing=function(n,t,i){this._edsbps=dhx4.s2b(n);this._edsbpsA=[];this._edsbpsC=t||10;this._edsbpsD=i||250};dhtmlXTreeObject.prototype.getDistributedParsingState=function(){return!(!this._edsbpsA||!this._edsbpsA.length)};dhtmlXTreeObject.prototype.getItemParsingState=function(n){var i=this._globalIdStorageFind(n,!0,!0),t;if(!i)return 0;if(this._edsbpsA)for(t=0;t<this._edsbpsA.length;t++)if(this._edsbpsA[t][2]==n)return-1;return 1};dhtmlXTreeObject.prototype._distributedStart=function(n,t,i,r,u){this._edsbpsA||(this._edsbpsA=[]);this._edsbpsA[this._edsbpsA.length]=[n,t,i,r,u]};dhtmlXTreeObject.prototype._distributedStep=function(n){var t=this,i,f,u,r;if(!this._edsbpsA||!this._edsbpsA.length){t.XMLloadingWarning=0;return}for(i=this._edsbpsA[0],this.parsedArray=[],this._parse(i[0],i[2],i[3],i[1]),f=this._globalIdStorageFind(i[2]),this._redrawFrom(this,f,i[4],this._getOpenState(f)),u=this.setCheckList.split(this.dlmtr),r=0;r<u.length;r++)u[r]&&this.setCheck(u[r],1);this._edsbpsA=[].concat(this._edsbpsA.slice(1));this._edsbpsA.length||(window.setTimeout(function(){if(t.onXLE)t.onXLE(t,n);t.callEvent("onXLE",[t,n])},1),t.xmlstate=0)};dhtmlXTreeObject.prototype.enableTextSigns=function(n){this._txtimg=dhx4.s2b(n)};dhtmlXTreeObject.prototype.preventIECaching=function(n){dhx4.ajax.cache=!n};dhtmlXTreeObject.prototype.preventIECashing=dhtmlXTreeObject.prototype.preventIECaching;dhtmlXTreeObject.prototype.disableCheckbox=function(n,t){var i;(i=typeof n!="object"?this._globalIdStorageFind(n,0,1):n,i)&&(i.dscheck=dhx4.s2b(t)?(i.checkstate||0)%3+3:i.checkstate>2?i.checkstate-3:i.checkstate,this._setCheck(i),i.dscheck<3&&(i.dscheck=!1))};dhtmlXTreeObject.prototype.smartRefreshBranch=function(n,t){this._branchUpdate=1;this.smartRefreshItem(n,t)};dhtmlXTreeObject.prototype.smartRefreshItem=function(n,t){for(var r=this._globalIdStorageFind(n),i=0;i<r.childsCount;i++)r.childNodes[i]._dmark=!0;this.waitUpdateXML=!0;t&&t.exists?this._parse(t,n):this._loadDynXML(n,t)};dhtmlXTreeObject.prototype.refreshItems=function(n,t){var r=n.toString().split(this.dlmtr),i;for(this.waitUpdateXML=[],i=0;i<r.length;i++)this.waitUpdateXML[r[i]]=!0;this.load((t||this.XMLsource)+dhtmlx.url(t||this.XMLsource)+"ids="+this._escape(n))};dhtmlXTreeObject.prototype.updateItem=function(n,t,i,r,u,f,e){var o=this._globalIdStorageFind(n);return o.userData=new cObject,t&&(o.label=t),o.images=[i||this.imageArray[0],r||this.imageArray[1],u||this.imageArray[2]],this.setItemText(n,t),f&&this._setCheck(o,!0),e!="1"||this.hasChildren(n)||(o.XMLload=0),this._correctPlus(o),o._dmark=!1,o};dhtmlXTreeObject.prototype.setDropHandler=function(n){this.attachEvent("onDrop",n)};dhtmlXTreeObject.prototype.setOnLoadingStart=function(n){this.attachEvent("onXLS",n)};dhtmlXTreeObject.prototype.setOnLoadingEnd=function(n){this.attachEvent("onXLE",n)};dhtmlXTreeObject.prototype.setXMLAutoLoadingBehaviour=function(n){this.xmlalb=n};dhtmlXTreeObject.prototype.enableSmartCheckboxes=function(n){this.smcheck=dhx4.s2b(n)};dhtmlXTreeObject.prototype.getXMLState=function(){return this.xmlstate==1};dhtmlXTreeObject.prototype.setItemTopOffset=function(n,t){var u,r,i,f;for(u=typeof n!="object"?this._globalIdStorageFind(n):n,r=u.span.parentNode.parentNode,u.span.style.paddingBottom="1px",i=0;i<r.childNodes.length;i++)i!=0?_isIE?(r.childNodes[i].style.height="18px",r.childNodes[i].style.paddingTop=parseInt(t)+"px"):r.childNodes[i].style.height=18+parseInt(t)+"px":(f=r.childNodes[i].firstChild,r.childNodes[i].firstChild.tagName!="DIV"&&(f=document.createElement("DIV"),r.childNodes[i].insertBefore(f,r.childNodes[i].firstChild)),(u.parentObject.id!=this.rootId||u.parentObject.childNodes[0]!=u)&&this.treeLinesOn&&(r.childNodes[i].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")"),f.innerHTML="&nbsp;",f.style.overflow="hidden"),f.style.verticalAlign=r.childNodes[i].style.verticalAlign="bottom",_isIE&&(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0")};dhtmlXTreeObject.prototype.setIconSize=function(n,t,i){var u,r;if(i){if(u=i&&i.span?i:this._globalIdStorageFind(i),!u)return 0;r=u.span.parentNode.previousSibling.childNodes[0];n&&(r.style.width=n+"px",window._KHTMLrv&&(r.parentNode.style.width=n+"px"));t&&(r.style.height=t+"px",window._KHTMLrv&&(r.parentNode.style.height=t+"px"))}else this.def_img_x=n+"px",this.def_img_y=t+"px"};dhtmlXTreeObject.prototype.getItemImage=function(n,t,i){var u=this._globalIdStorageFind(n),r;return u?(r=u.images[t||0],i&&(r=this.iconURL+r),r):""};dhtmlXTreeObject.prototype.enableRadioButtons=function(n,t){var i,r;if(arguments.length==1){this._frbtr=dhx4.s2b(n);this.checkBoxOff=this.checkBoxOff||this._frbtr;return}if(i=this._globalIdStorageFind(n),!i)return"";if(t=dhx4.s2b(t),t&&!i._r_logic)for(i._r_logic=!0,r=0;r<i.childsCount;r++)this._setCheck(i.childNodes[r],i.childNodes[r].checkstate);if(!t&&i._r_logic)for(i._r_logic=!1,r=0;r<i.childsCount;r++)this._setCheck(i.childNodes[r],i.childNodes[r].checkstate)};dhtmlXTreeObject.prototype.enableSingleRadioMode=function(n){this._frbtrs=dhx4.s2b(n)};dhtmlXTreeObject.prototype.openOnItemAdded=function(n){this._hAdI=!dhx4.s2b(n)};dhtmlXTreeObject.prototype.openOnItemAdding=function(n){this._hAdI=!dhx4.s2b(n)};dhtmlXTreeObject.prototype.enableMultiLineItems=function(n){this.mlitems=n===!0?"100%":n};dhtmlXTreeObject.prototype.enableAutoTooltips=function(n){this.ettip=dhx4.s2b(n)};dhtmlXTreeObject.prototype.clearSelection=function(n){n?this._unselectItem(this._globalIdStorageFind(n)):this._unselectItems()};dhtmlXTreeObject.prototype.showItemSign=function(n,t){var i=this._globalIdStorageFind(n),r;if(!i)return 0;r=i.span.parentNode.previousSibling.previousSibling.previousSibling;dhx4.s2b(t)?(i.closeble=!0,i.wsign=!1):(this._openItem(i),i.closeble=!1,i.wsign=!0);this._correctPlus(i)};dhtmlXTreeObject.prototype.showItemCheckbox=function(n,t){var i,r;if(!n)for(i in this._idpull)this.showItemCheckbox(this._idpull[i],t);if(typeof n!="object"&&(n=this._globalIdStorageFind(n,0,0)),!n)return 0;n.nocheckbox=!dhx4.s2b(t);r=n.span.parentNode.previousSibling.previousSibling.childNodes[0];r.parentNode.style.display=n.nocheckbox?"none":""};dhtmlXTreeObject.prototype.setListDelimeter=function(n){this.dlmtr=n};dhtmlXTreeObject.prototype.setEscapingMode=function(n){this.utfesc=n};dhtmlXTreeObject.prototype.enableHighlighting=function(n){this.ehlt=!0;this.ehlta=dhx4.s2b(n)};dhtmlXTreeObject.prototype._itemMouseOut=function(){var n=this.childNodes[3].parentObject,t=n.treeNod;(t.callEvent("onMouseOut",[n.id]),n.id==t._l_onMSI&&(t._l_onMSI=null),t.ehlta)&&(n.span.className=n.span.className.replace("_lor",""))};dhtmlXTreeObject.prototype._itemMouseIn=function(){var n=this.childNodes[3].parentObject,t=n.treeNod;(t._l_onMSI!=n.id&&t.callEvent("onMouseIn",[n.id]),t._l_onMSI=n.id,t.ehlta)&&(n.span.className=n.span.className.replace("_lor",""),n.span.className=n.span.className.replace(/((standart|selected)TreeRow)/,"$1_lor"))};dhtmlXTreeObject.prototype.enableActiveImages=function(n){this._aimgs=dhx4.s2b(n)};dhtmlXTreeObject.prototype.focusItem=function(n){var t=this._globalIdStorageFind(n);if(!t)return 0;this._focusNode(t)};dhtmlXTreeObject.prototype.getAllSubItems=function(n){return this._getAllSubItems(n)};dhtmlXTreeObject.prototype.getAllChildless=function(){return this._getAllScraggyItems(this.htmlNode)};dhtmlXTreeObject.prototype.getAllLeafs=dhtmlXTreeObject.prototype.getAllChildless;dhtmlXTreeObject.prototype._getAllScraggyItems=function(n){for(var r,i="",t=0;t<n.childsCount;t++)n.childNodes[t].unParsed||n.childNodes[t].childsCount>0?(r=n.childNodes[t].unParsed?this._getAllScraggyItemsXML(n.childNodes[t].unParsed,1):this._getAllScraggyItems(n.childNodes[t]),r&&(i?i+=this.dlmtr+r:i=r)):i?i+=this.dlmtr+n.childNodes[t].id:i=""+n.childNodes[t].id;return i};dhtmlXTreeObject.prototype._getAllFatItems=function(n){for(var r,i="",t=0;t<n.childsCount;t++)(n.childNodes[t].unParsed||n.childNodes[t].childsCount>0)&&(i?i+=this.dlmtr+n.childNodes[t].id:i=""+n.childNodes[t].id,r=n.childNodes[t].unParsed?this._getAllFatItemsXML(n.childNodes[t].unParsed,1):this._getAllFatItems(n.childNodes[t]),r&&(i+=this.dlmtr+r));return i};dhtmlXTreeObject.prototype.getAllItemsWithKids=function(){return this._getAllFatItems(this.htmlNode)};dhtmlXTreeObject.prototype.getAllFatItems=dhtmlXTreeObject.prototype.getAllItemsWithKids;dhtmlXTreeObject.prototype.getAllChecked=function(){return this._getAllChecked("","",1)};dhtmlXTreeObject.prototype.getAllUnchecked=function(n){return n&&(n=this._globalIdStorageFind(n)),this._getAllChecked(n,"",0)};dhtmlXTreeObject.prototype.getAllPartiallyChecked=function(){return this._getAllChecked("","",2)};dhtmlXTreeObject.prototype.getAllCheckedBranches=function(){var n=[this._getAllChecked("","",1)],t=this._getAllChecked("","",2);return t&&n.push(t),n.join(this.dlmtr)};dhtmlXTreeObject.prototype._getAllChecked=function(n,t,i){var u,r;for(n||(n=this.htmlNode),n.checkstate==i&&(n.nocheckbox||(t?t+=this.dlmtr+n.id:t=""+n.id)),u=n.childsCount,r=0;r<u;r++)t=this._getAllChecked(n.childNodes[r],t,i);return n.unParsed&&(t=this._getAllCheckedXML(n.unParsed,t,i)),t?t:""};dhtmlXTreeObject.prototype.setItemStyle=function(n,t,i){var i=i||!1,r=this._globalIdStorageFind(n);if(!r)return 0;r.span.style.cssText?r.span.style.cssText=i?t:r.span.style.cssText+";"+t:r.span.setAttribute("style",r.span.getAttribute("style")+"; "+t)};dhtmlXTreeObject.prototype.enableImageDrag=function(n){this._itim_dg=dhx4.s2b(n)};dhtmlXTreeObject.prototype.setOnDragIn=function(n){this.attachEvent("onDragIn",n)};dhtmlXTreeObject.prototype.enableDragAndDropScrolling=function(n){this.autoScroll=dhx4.s2b(n)};dhtmlXTreeObject.prototype.setSkin=function(n){var t=this.parentObject.className.replace(/dhxtree_[^ ]*/gi,"");this.parentObject.className=t+" dhxtree_"+n;(n=="dhx_terrace"||n=="dhx_web"||n=="material")&&this.enableTreeLines(!1);n=="material"&&this.setIconSize("25","25")},function(){dhtmlx.extend_api("dhtmlXTreeObject",{_init:function(n){return[n.parent,n.width||"100%",n.height||"100%",n.root_id||0]},auto_save_selection:"enableAutoSavingSelected",auto_tooltip:"enableAutoTooltips",checkbox:"enableCheckBoxes",checkbox_3_state:"enableThreeStateCheckboxes",checkbox_smart:"enableSmartCheckboxes",context_menu:"enableContextMenu",distributed_parsing:"enableDistributedParsing",drag:"enableDragAndDrop",drag_copy:"enableMercyDrag",drag_image:"enableImageDrag",drag_scroll:"enableDragAndDropScrolling",editor:"enableItemEditor",hover:"enableHighlighting",images:"enableTreeImages",image_fix:"enableIEImageFix",image_path:"setImagePath",lines:"enableTreeLines",loading_item:"enableLoadingItem",multiline:"enableMultiLineItems",multiselect:"enableMultiselection",navigation:"enableKeyboardNavigation",radio:"enableRadioButtons",radio_single:"enableSingleRadioMode",rtl:"enableRTL",search:"enableKeySearch",smart_parsing:"enableSmartXMLParsing",smart_rendering:"enableSmartRendering",text_icons:"enableTextSigns",xml:"loadXML",skin:"setSkin"},{})}();dhtmlXTreeObject.prototype._dp_init=function(n){n.attachEvent("insertCallback",function(n,t,i){var r=dhx4.ajax.xpath(".//item",n),u=r[0].getAttribute("text");this.obj.insertNewItem(i,t,u,0,0,0,0,"CHILD")});n.attachEvent("updateCallback",function(n,t,i){var r=dhx4.ajax.xpath(".//item",n),u=r[0].getAttribute("text");this.obj.setItemText(t,u);this.obj.getParentId(t)!=i&&this.obj.moveItem(t,"item_child",i);this.setUpdated(t,!0,"updated")});n.attachEvent("deleteCallback",function(n,t){this.obj.setUserData(t,this.action_param,"true_deleted");this.obj.deleteItem(t,!1)});n._methods=["setItemStyle","","changeItemId","deleteItem"];this.attachEvent("onEdit",function(t,i){return t==3&&n.setUpdated(i,!0),!0});this.attachEvent("onDrop",function(t,i,r,u,f){u==f&&n.setUpdated(t,!0)});this._onrdlh=function(t){var i=n.getState(t);return i=="inserted"?(n.set_invalid(t,!1),n.setUpdated(t,!1),!0):i=="true_deleted"?(n.setUpdated(t,!1),!0):(n.setUpdated(t,!0,"deleted"),!1)};this._onradh=function(t){n.setUpdated(t,!0,"inserted")};n._getRowData=function(n){for(var r={},u=this.obj._globalIdStorageFind(n),i=u.parentObject,t=0,t=0;t<i.childsCount;t++)if(i.childNodes[t]==u)break;for(r.tr_id=u.id,r.tr_pid=i.id,r.tr_order=t,r.tr_text=u.span.innerHTML,i=(u._userdatalist||"").split(","),t=0;t<i.length;t++)r[i[t]]=u.userData["t_"+i[t]];return r}};typeof dhtmlXCellObject!="undefined"&&(dhtmlXCellObject.prototype.attachTree=function(n){this.callEvent("_onBeforeContentAttach",["tree"]);var t=document.createElement("DIV");return t.style.width="100%",t.style.height="100%",t.style.position="relative",t.style.overflow="hidden",this._attachObject(t),this.dataType="tree",this.dataObj=new dhtmlXTreeObject(t,"100%","100%",n||0),this.dataObj.setSkin(this.conf.skin),this.dataObj.allTree.childNodes[0].style.marginTop="2px",this.dataObj.allTree.childNodes[0].style.marginBottom="2px",t=null,this.callEvent("_onContentAttach",[]),this.dataObj});dhtmlXTreeObject.prototype.makeDraggable=function(n,t){typeof n!="object"&&(n=document.getElementById(n));dragger=new dhtmlDragAndDropObject;dropper=new dhx_dragSomethingInTree;dragger.addDraggableItem(n,dropper);n.dragLanding=null;n.ondragstart=dropper._preventNsDrag;n.onselectstart=new Function("return false;");n.parentObject={};n.parentObject.img=n;n.parentObject.treeNod=dropper;dropper._customDrop=t};dhtmlXTreeObject.prototype.makeDragable=dhtmlXTreeObject.prototype.makeDraggable;dhtmlXTreeObject.prototype.makeAllDraggable=function(n){for(var i=document.getElementsByTagName("div"),t=0;t<i.length;t++)i[t].getAttribute("dragInDhtmlXTree")&&this.makeDragable(i[t],n)};dhtmlXTreeObject.prototype.enableItemEditor=function(n){this._eItEd=dhx4.s2b(n);this._eItEdFlag||(this._edn_click_IE=!0,this._edn_dblclick=!0,this._ie_aFunc=this.aFunc,this._ie_dblclickFuncHandler=this.dblclickFuncHandler,this.setOnDblClickHandler(function(n,t){return this._edn_dblclick&&this._editItem(n,t),!0}),this.setOnClickHandler(function(n,t){return this._stopEditItem(n,t),this.ed_hist_clcik==n&&this._edn_click_IE&&this._editItem(n,t),this.ed_hist_clcik=n,!0}),this._eItEdFlag=!0)};dhtmlXTreeObject.prototype.setOnEditHandler=function(n){this.attachEvent("onEdit",n)};dhtmlXTreeObject.prototype.setEditStartAction=function(n,t){this._edn_click_IE=dhx4.s2b(n);this._edn_dblclick=dhx4.s2b(t)};dhtmlXTreeObject.prototype._stopEdit=function(n,t){var i,r,u,f;this._editCell&&(this.dADTempOff=this.dADTempOffEd,this._editCell.id!=n&&(i=!0,t?(i=!1,this.callEvent("onEditCancel",[this._editCell.id,this._editCell._oldValue])):i=this.callEvent("onEdit",[2,this._editCell.id,this,this._editCell.span.childNodes[0].value]),i===!0?i=this._editCell.span.childNodes[0].value:i===!1&&(i=this._editCell._oldValue),r=i!=this._editCell._oldValue,this._editCell.span.innerHTML=i,this._editCell.label=this._editCell.span.innerHTML,u=this._editCell.i_sel?"selectedTreeRow":"standartTreeRow",this._editCell.span.className=u,this._editCell.span.parentNode.className="standartTreeRow",this._editCell.span.style.paddingRight=this._editCell.span.style.paddingLeft="5px",this._editCell.span.onclick=this._editCell.span.ondblclick=function(){},f=this._editCell.id,this.childCalc&&this._fixChildCountLabel(this._editCell),this._editCell=null,t||this.callEvent("onEdit",[3,f,this,r]),this._enblkbrd&&(this.parentObject.lastChild.focus(),this.parentObject.lastChild.focus())))};dhtmlXTreeObject.prototype._stopEditItem=function(n){this._stopEdit(n)};dhtmlXTreeObject.prototype.stopEdit=function(n){this._editCell&&this._stopEdit(this._editCell.id+"_non",n)};dhtmlXTreeObject.prototype.editItem=function(n){this._editItem(n,this)};dhtmlXTreeObject.prototype._editItem=function(n){var t,i,r;if(this._eItEd){if(this._stopEdit(),t=this._globalIdStorageFind(n),!t)return;if(i=this.callEvent("onEdit",[0,n,this,t.span.innerHTML]),i===!0)i=typeof t.span.innerText!="undefined"?t.span.innerText:t.span.textContent;else if(i===!1)return;this.dADTempOffEd=this.dADTempOff;this.dADTempOff=!1;this._editCell=t;t._oldValue=i;t.span.innerHTML="<input type='text' class='intreeeditRow' />";t.span.style.paddingRight=t.span.style.paddingLeft="0px";t.span.onclick=t.span.ondblclick=function(n){(n||event).cancelBubble=!0};t.span.childNodes[0].value=i;t.span.childNodes[0].onselectstart=function(n){return(n||event).cancelBubble=!0,!0};t.span.childNodes[0].onmousedown=function(n){return(n||event).cancelBubble=!0,!0};t.span.childNodes[0].focus();t.span.childNodes[0].focus();t.span.onclick=function(n){return(n||event).cancelBubble=!0,!1};t.span.className="";t.span.parentNode.className="";r=this;t.span.childNodes[0].onkeydown=function(n){n||(n=window.event);n.keyCode==13?(n.cancelBubble=!0,r._stopEdit(window.undefined)):n.keyCode==27&&r._stopEdit(window.undefined,!0);(n||event).cancelBubble=!0};this.callEvent("onEdit",[1,n,this])}};jsonPointer.prototype={text:function(){var t=function(t){for(var r=[],i=0;i<t.length;i++)r.push("{"+n(t[i])+"}");return r.join(",")},n=function(i){var u=[];for(var r in i)typeof i[r]=="object"?r.length?u.push('"'+r+'":['+t(i[r])+"]"):u.push('"'+r+'":{'+n(i[r])+"}"):u.push('"'+r+'":"'+i[r]+'"');return u.join(",")};return"{"+n(this.d)+"}"},get:function(n){return this.d[n]},exists:function(){return!!this.d},content:function(){return this.d.content},each:function(n,t,i){var u=this.d[n],f=new jsonPointer,r;if(u)for(r=0;r<u.length;r++)f.d=u[r],t.apply(i,[f,r])},get_all:function(){return this.d},sub:function(n){return new jsonPointer(this.d[n],this.d)},sub_exists:function(n){return!!this.d[n]},each_x:function(n,t,i,r,u){var f=this.d[n],e=new jsonPointer(0,this.d);if(f)for(u=u||0;u<f.length;u++)if(f[u][t]&&(e.d=f[u],i.apply(r,[e,u])==-1))return},up:function(){return new jsonPointer(this.dp,this.d)},set:function(n,t){this.d[n]=t},clone:function(){return new jsonPointer(this.d,this.dp)},through:function(n,t,i,r,u){var e=this.d[n],f,o,s;if(e.length)for(f=0;f<e.length;f++)e[f][t]==null||e[f][t]==""||i&&e[f][t]!=i||(o=new jsonPointer(e[f],this.d),r.apply(u,[o,f])),s=this.d,this.d=e[f],this.sub_exists(n)&&this.through(n,t,i,r,u),this.d=s}};dhtmlXTreeObject.prototype.loadJSArrayFile=function(n,t){return window.console&&window.console.info&&window.console.info("loadJSArrayFile was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this._loadJSArrayFile(n,t)};dhtmlXTreeObject.prototype._loadJSArrayFile=function(n,t){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]);this._ld_id=null;this.xmlstate=1;var i=this;this.XMLLoader=function(n,t){eval("var z="+n.responseText);this._loadJSArray(z);t&&t.call(this,n)};dhx4.ajax.get(n,function(n){i.XMLLoader(n.xmlDoc,t)})};dhtmlXTreeObject.prototype.loadCSV=function(n,t){return window.console&&window.console.info&&window.console.info("loadCSV was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this._loadCSV(n,t)};dhtmlXTreeObject.prototype._loadCSV=function(n,t){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]);this._ld_id=null;this.xmlstate=1;var i=this;this.XMLLoader=function(n,t){this._loadCSVString(n.responseText);t&&t.call(this,n)};dhx4.ajax.get(n,function(n){i.XMLLoader(n.xmlDoc,t)})};dhtmlXTreeObject.prototype.loadJSArray=function(n,t){return window.console&&window.console.info&&window.console.info("loadJSArray was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this._loadJSArray(n,t)};dhtmlXTreeObject.prototype._loadJSArray=function(n,t){for(var u,f,r=[],i=0;i<n.length;i++)r[n[i][1]]||(r[n[i][1]]=[]),r[n[i][1]].push({id:n[i][0],text:n[i][2]});u={id:this.rootId};f=function(n,t){if(r[n.id]){n.item=r[n.id];for(var i=0;i<n.item.length;i++)t(n.item[i],t)}};f(u,f);this._loadJSONObject(u,t)};dhtmlXTreeObject.prototype.loadCSVString=function(n,t){return window.console&&window.console.info&&window.console.info("loadCSVString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this._loadCSVString(n,t)};dhtmlXTreeObject.prototype._loadCSVString=function(n,t){for(var i,f,e,r=[],o=n.split("\n"),u=0;u<o.length;u++)i=o[u].split(","),r[i[1]]||(r[i[1]]=[]),r[i[1]].push({id:i[0],text:i[2]});f={id:this.rootId};e=function(n,t){if(r[n.id]){n.item=r[n.id];for(var i=0;i<n.item.length;i++)t(n.item[i],t)}};e(f,e);this._loadJSONObject(f,t)};dhtmlXTreeObject.prototype.loadJSONObject=function(n,t){return window.console&&window.console.info&&window.console.info("loadJSONObject was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this._loadJSONObject(n,t)};dhtmlXTreeObject.prototype._loadJSONObject=function(n,t){this.parsCount||this.callEvent("onXLS",[this,null]);this.xmlstate=1;var i=new jsonPointer(n);this._parse(i);this._p=i;t&&t()};dhtmlXTreeObject.prototype.loadJSON=function(n,t){return window.console&&window.console.info&&window.console.info("loadJSON was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44"),this._loadJSON(n,t)};dhtmlXTreeObject.prototype._loadJSON=function(n,i){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]);this._ld_id=null;this.xmlstate=1;var r=this;this.XMLLoader=function(n,i){try{eval("var t="+n.responseText)}catch(u){dhx4.callEvent("onLoadXMLerror",["Incorrect JSON",n,this]);return}var r=new jsonPointer(t);this._parse(r);this._p=r;i&&i.call(this,n)};dhx4.ajax.get(n,function(n){r.XMLLoader(n.xmlDoc,i)})};dhtmlXTreeObject.prototype.serializeTreeToJSON=function(){for(var n=['{"id":"'+this.rootId+'", "item":['],i=[],t=0;t<this.htmlNode.childsCount;t++)i.push(this._serializeItemJSON(this.htmlNode.childNodes[t]));return n.push(i.join(",")),n.push("]}"),n.join("")};dhtmlXTreeObject.prototype._serializeItemJSON=function(n){var t=[],e,r,f,u,i;if(n.unParsed)return n.unParsed.text();if(e=this._selected.length?this._selected[0].id:"",r=n.span.innerHTML,r=r.replace(/\"/g,'\\"',r),this._xfullXML?t.push('{ "id":"'+n.id+'", '+(this._getOpenState(n)==1?' "open":"1", ':"")+(e==n.id?' "select":"1",':"")+' "text":"'+r+'", "im0":"'+n.images[0]+'", "im1":"'+n.images[1]+'", "im2":"'+n.images[2]+'" '+(n.acolor?', "aCol":"'+n.acolor+'" ':"")+(n.scolor?', "sCol":"'+n.scolor+'" ':"")+(n.checkstate==1?', "checked":"1" ':n.checkstate==2?', "checked":"-1"':"")+(n.closeable?', "closeable":"1" ':"")+(this.XMLsource&&n.XMLload==0?', "child":"1" ':"")):t.push('{ "id":"'+n.id+'", '+(this._getOpenState(n)==1?' "open":"1", ':"")+(e==n.id?' "select":"1",':"")+' "text":"'+r+'"'+(this.XMLsource&&n.XMLload==0?', "child":"1" ':"")),this._xuserData&&n._userdatalist){for(t.push(', "userdata":['),f=n._userdatalist.split(","),u=[],i=0;i<f.length;i++)u.push('{ "name":"'+f[i]+'" , "content":"'+n.userData["t_"+f[i]]+'" }');t.push(u.join(","));t.push("]")}if(n.childsCount){for(t.push(', "item":['),u=[],i=0;i<n.childsCount;i++)u.push(this._serializeItemJSON(n.childNodes[i]));t.push(u.join(","));t.push("]\n")}return t.push("}\n"),t.join("")};window.addEventListener?window.addEventListener("load",dhx_init_trees,!1):window.attachEvent&&window.attachEvent("onload",dhx_init_trees);dhtmlXTreeObject.prototype.parserExtension={_parseExtension:function(n,t){this._idpull[t.id]._attrs=t}};dhtmlXTreeObject.prototype.getAttribute=function(n,t){this._globalIdStorageFind(n);var i=this._idpull[n]._attrs;return i?i[t]:window.undefined};dhtmlXTreeObject.prototype.setAttribute=function(n,t,i){this._globalIdStorageFind(n);var r=this._idpull[n]._attrs||{};r[t]=i;this._idpull[n]._attrs=r};dhtmlXTreeObject.prototype.enableKeyboardNavigation=function(n){var i,t;this._enblkbrd=dhx4.s2b(n);this._enblkbrd?(_isFF&&(t=window.getComputedStyle(this.parentObject,null).position,t!="absolute"&&t!="relative"&&(this.parentObject.style.position="relative")),this._navKeys=[["up",38],["down",40],["open",39],["close",37],["call",13],["edit",113]],i=this,t=document.createElement("INPUT"),t.className="a_dhx_hidden_input",t.autocomplete="off",window._KHTMLrv&&(t.style.color="white"),this.parentObject.appendChild(t),this.parentObject[_isOpera?"onkeypress":"onkeydown"]=function(n){if(i.callEvent("onKeyPress",[(n||window.event).keyCode,n||window.event]))return i._onKeyDown(n||window.event)},this.parentObject.onclick=function(){(_isFF||_isIE)&&t.select();(window._KHTMLrv||_isOpera)&&t.focus()}):this.parentObject.onkeydown=null};dhtmlXTreeObject.prototype._onKeyDown=function(n){var i,t;if(window.globalActiveDHTMLGridObject&&globalActiveDHTMLGridObject.isActive)return!0;for(i=this,t=0;t<this._navKeys.length;t++)if(this._navKeys[t][1]==n.keyCode)return this["_onkey_"+this._navKeys[t][0]].apply(this,[this.getSelectedItemId()]),n.preventDefault&&n.preventDefault(),(n||event).cancelBubble=!0,!1;return this._textSearch?this._searchItemByKey(n):!0};dhtmlXTreeObject.prototype._onkey_up=function(n){var i=this._globalIdStorageFind(n),t;i&&(t=this._getPrevVisibleNode(i),t.id!=this.rootId)&&(this.focusItem(t.id),this.selectItem(t.id,!1))};dhtmlXTreeObject.prototype._onkey_down=function(n){var i=this._globalIdStorageFind(n),t;i&&(t=this._getNextVisibleNode(i),t.id!=this.rootId)&&(this.focusItem(t.id),this.selectItem(t.id,!1))};dhtmlXTreeObject.prototype._onkey_open=function(n){this.openItem(n)};dhtmlXTreeObject.prototype._onkey_close=function(n){this.closeItem(n)};dhtmlXTreeObject.prototype._onkey_call=function(n){this.stopEdit?(this.stopEdit(),this.parentObject.lastChild.focus(),this.parentObject.lastChild.focus(),this.selectItem(n,!0)):this.selectItem(this.getSelectedItemId(),!0)};dhtmlXTreeObject.prototype._onkey_edit=function(n){this.editItem&&this.editItem(n)};dhtmlXTreeObject.prototype._getNextVisibleNode=function(n,t){return!t&&this._getOpenState(n)>0?n.childNodes[0]:n.tr&&n.tr.nextSibling&&n.tr.nextSibling.nodem?n.tr.nextSibling.nodem:n.parentObject?this._getNextVisibleNode(n.parentObject,1):n};dhtmlXTreeObject.prototype._getPrevVisibleNode=function(n){return n.tr&&n.tr.previousSibling&&n.tr.previousSibling.nodem?this._lastVisibleChild(n.tr.previousSibling.nodem):n.parentObject?n.parentObject:n};dhtmlXTreeObject.prototype._lastVisibleChild=function(n){return this._getOpenState(n)>0?this._lastVisibleChild(n.childNodes[n.childsCount-1]):n};dhtmlXTreeObject.prototype._searchItemByKey=function(n){if(n.keyCode==8)return this._textSearchString="",!0;var t=String.fromCharCode(n.keyCode).toUpperCase();return t.match(/[A-Z,a-z,0-9\ ]/)?(this._textSearchString+=t,this._textSearchInProgress=!0,(this.getSelectedItemText()||"").match(RegExp("^"+this._textSearchString,"i"))||this.findItem(this._textSearchString,0),this._textSearchInProgress=!1,n.preventDefault&&n.preventDefault(),(n||event).cancelBubble=!0,!1):!0};dhtmlXTreeObject.prototype.assignKeys=function(n){this._navKeys=n};dhtmlXTreeObject.prototype.enableKeySearch=function(n){if(this._textSearch=dhx4.s2b(n),this._textSearch){this._textSearchString="";var t=this;this._markItem2=this._markItem;this._markItem=function(n){t._textSearchInProgress||(t._textSearchString="");t._markItem2(n)}}};dhtmlXTreeObject.prototype.enableLoadingItem=function(n){this.attachEvent("onXLS",this._showFakeItem);this.attachEvent("onXLE",this._hideFakeItem);this._tfi_text=n||"Loading..."};dhtmlXTreeObject.prototype._showFakeItem=function(n,t){if(t!==null&&!this._globalIdStorageFind("fake_load_xml_"+t)){var i=this.XMLsource;this.XMLsource=null;this.insertNewItem(t,"fake_load_xml_"+t,this._tfi_text);this.XMLsource=i}};dhtmlXTreeObject.prototype._hideFakeItem=function(n,t){t!==null&&this.deleteItem("fake_load_xml_"+t)};dhtmlXTreeObject.prototype.isLocked=function(n){return this._locker||this._init_lock(),this._locker[n]==!0};dhtmlXTreeObject.prototype._lockItem=function(n,t,i){var r,u;if(this._locker||this._init_lock(),t){if(this._locker[n.id]==!0)return;this._locker[n.id]=!0;n.bIm0=n.images[0];n.bIm1=n.images[1];n.bIm2=n.images[2];n.images[0]=this.lico0;n.images[1]=this.lico1;n.images[2]=this.lico2;r=n.span.parentNode;u=r.previousSibling;this.dragger.removeDraggableItem(r);this.dragger.removeDraggableItem(u)}else{if(this._locker[n.id]!=!0)return;this._locker[n.id]=!1;n.images[0]=n.bIm0;n.images[1]=n.bIm1;n.images[2]=n.bIm2;r=n.span.parentNode;u=r.previousSibling;this.dragger.addDraggableItem(r,this);this.dragger.addDraggableItem(u,this)}i||this._correctPlus(n)};dhtmlXTreeObject.prototype.lockItem=function(n,t){this._locker||this._init_lock();this._lockOn=!1;var i=this._globalIdStorageFind(n);this._lockOn=!0;this._lockItem(i,dhx4.s2b(t))};dhtmlXTreeObject.prototype.setLockedIcons=function(n,t,i){this._locker||this._init_lock();this.lico0=n;this.lico1=t;this.lico2=i};dhtmlXTreeObject.prototype._init_lock=function(){this._locker=[];this._locker_count="0";this._lockOn=!0;this._globalIdStorageFindA=this._globalIdStorageFind;this._globalIdStorageFind=this._lockIdFind;this._serializeItem&&(this._serializeItemA=this._serializeItem,this._serializeItem=this._serializeLockItem,this._serializeTreeA=this.serializeTree,this.serializeTree=this._serializeLockTree);this.setLockedIcons(this.imageArray[0],this.imageArray[1],this.imageArray[2])};dhtmlXTreeObject.prototype._lockIdFind=function(n,t,i){return!this.skipLock&&!i&&this._lockOn==!0&&this._locker[n]==!0?null:this._globalIdStorageFindA(n,t,i)};dhtmlXTreeObject.prototype._serializeLockItem=function(n){return this._locker[n.id]==!0?"":this._serializeItemA(n)};dhtmlXTreeObject.prototype._serializeLockTree=function(){var n=this._serializeTreeA();return n.replace(/<item[^>]+locked\=\"1\"[^>]+\/>/g,"")};dhtmlXTreeObject.prototype._moveNodeToA=dhtmlXTreeObject.prototype._moveNodeTo;dhtmlXTreeObject.prototype._moveNodeTo=function(n,t,i){return t.treeNod.isLocked&&t.treeNod.isLocked(t.id)?!1:this._moveNodeToA(n,t,i)};dhtmlXTreeObject.prototype.lockTree=function(n){dhx4.s2b(n)?this._initTreeLocker():this._TreeLocker&&(this._TreeLocker.parentNode.removeChild(this._TreeLocker),this._TreeLocker=null)};dhtmlXTreeObject.prototype._initTreeLocker=function(){if(!this._TreeLocker){this.parentObject.style.overflow="hidden";this.parentObject.style.position!="absolute"&&(this.parentObject.style.position="relative");var n=document.createElement("div");n.style.position="absolute";n.style.left="0px";n.style.top="0px";n.className="dhx_tree_opacity";n.style.width=this.allTree.offsetWidth+"px";n.style.backgroundColor="#FFFFFF";n.style.height=this.allTree.offsetHeight+"px";this._TreeLocker=n;this.parentObject.appendChild(this._TreeLocker)}};dhtmlXTreeObject.prototype.enableRTL=function(n){var t=dhx4.s2b(n);(t&&!this.rtlMode||!t&&this.rtlMode)&&(this.rtlMode=t,this._switchToRTL(this.rtlMode))};dhtmlXTreeObject.prototype._switchToRTL=function(n){n?(this.allTree.className=this._ltr_line=this.lineArray,this._ltr_min=this.minusArray,this._ltr_plus=this.plusArray,this.lineArray=["line2_rtl.gif","line3_rtl.gif","line4_rtl.gif","blank.gif","blank.gif","line1_rtl.gif"],this.minusArray=["minus2_rtl.gif","minus3_rtl.gif","minus4_rtl.gif","minus.gif","minus5_rtl.gif"],this.plusArray=["plus2_rtl.gif","plus3_rtl.gif","plus4_rtl.gif","plus.gif","plus5_rtl.gif"],this.allTree.className="containerTableStyleRTL"):(this.allTree.className="containerTableStyle",this.lineArray=this._ltr_line,this.minusArray=this._ltr_min,this.plusArray=this._ltr_plus);this.htmlNode.childsCount&&this._redrawFrom(this,this.htmlNode)};dhtmlXTreeObject.prototype.sortTree=function(n,t,i){var r=this._globalIdStorageFind(n);if(!r)return!1;this._reorderBranch(r,t.toString().toLowerCase()=="asc",dhx4.s2b(i))};dhtmlXTreeObject.prototype.setCustomSortFunction=function(n){this._csfunca=n};dhtmlXTreeObject.prototype._reorderBranch=function(n,t,i){var u=[],f=n.childsCount,e,o,r;if(f){for(e=n.childNodes[0].tr.parentNode,r=0;r<f;r++)u[r]=n.childNodes[r],e.removeChild(u[r].tr);for(o=this,t==1?this._csfunca?u.sort(function(n,t){return o._csfunca(n.id,t.id)}):u.sort(function(n,t){return n.span.innerHTML.toUpperCase()>t.span.innerHTML.toUpperCase()?1:n.span.innerHTML.toUpperCase()==t.span.innerHTML.toUpperCase()?0:-1}):this._csfunca?u.sort(function(n,t){return o._csfunca(t.id,n.id)}):u.sort(function(n,t){return n.span.innerHTML.toUpperCase()<t.span.innerHTML.toUpperCase()?1:n.span.innerHTML.toUpperCase()==t.span.innerHTML.toUpperCase()?0:-1}),r=0;r<f;r++)e.appendChild(u[r].tr),n.childNodes[r]=u[r],i&&u[r].unParsed?u[r].unParsed.set("order",t?1:-1):i&&u[r].childsCount&&this._reorderBranch(u[r],t,i);for(r=0;r<f;r++)this._correctPlus(u[r]),this._correctLine(u[r])}};dhtmlXTreeObject.prototype._reorderXMLBranch=function(n){var f=n.getAttribute("order"),e,r,i,u,t;if(f!="none"&&(e=f==1,r=n.childNodes.length,r)){for(i=[],u=0,t=0;t<r;t++)n.childNodes[t].nodeType==1&&(i[u]=n.childNodes[t],u++);for(t=r-1;t!=0;t--)n.removeChild(n.childNodes[t]);for(e?i.sort(function(n,t){return n.getAttribute("text")>t.getAttribute("text")?1:n.getAttribute("text")==t.getAttribute("text")?0:-1}):i.sort(function(n,t){return n.getAttribute("text")<t.getAttribute("text")?1:n.getAttribute("text")==t.getAttribute("text")?0:-1}),t=0;t<u;t++)i[t].setAttribute("order",f),n.appendChild(i[t]);n.setAttribute("order","none")}};dhtmlXTreeObject.prototype._serEnts=[["&","&amp;"],["<","&lt;"],[">","&gt;"]];dhtmlXTreeObject.prototype.registerXMLEntity=function(n,t){this._serEnts[this._serEnts.length]=[n,t,new RegExp(n,"g")]};dhtmlXTreeObject.prototype.setSerializationLevel=function(n,t,i,r,u){this._xuserData=dhx4.s2b(n);this._xfullXML=dhx4.s2b(t);this._dtd=u;this._xescapeEntities=dhx4.s2b(i);dhx4.s2b(r)&&(this._apreUC="<![CDATA[",this._apstUC="]\]>");for(var f=0;f<this._serEnts.length;f++)this._serEnts[f][2]=new RegExp(this._serEnts[f][0],"g")};dhtmlXTreeObject.prototype.serializeTree=function(){var t,i,n;if(this.stopEdit&&this.stopEdit(),this._apreUC=this._apreUC||"",this._apstUC=this._apstUC||"",t='<?xml version="1.0"?>',this._dtd&&(t+='<!DOCTYPE tree SYSTEM "'+this._dtd+'">'),t+='<tree id="'+this.rootId+'">',this._xuserData&&this._idpull[this.rootId]._userdatalist)for(i=this._idpull[this.rootId]._userdatalist.split(","),n=0;n<i.length;n++)t+='<userdata name="'+i[n]+'">'+this._apreUC+this._idpull[this.rootId].userData["t_"+i[n]]+this._apstUC+"<\/userdata>";for(n=0;n<this.htmlNode.childsCount;n++)t+=this._serializeItem(this.htmlNode.childNodes[n]);return t+"<\/tree>"};dhtmlXTreeObject.prototype._serializeItem=function(n){var e,i,f,r,u,t;if(n.unParsed)return dhx4.isIE?n.unParsed.d.xml:(e=new XMLSerializer,e.serializeToString(n.unParsed.d));if(i="",f=this._selected.length?this._selected[0].id:'"',r=n.span.innerHTML,this._xescapeEntities)for(t=0;t<this._serEnts.length;t++)r=r.replace(this._serEnts[t][2],this._serEnts[t][1]);if(i=this._xfullXML?'<item id="'+n.id+'" '+(this._getOpenState(n)==1?' open="1" ':"")+(f==n.id?' select="1"':"")+' text="'+r+'" im0="'+n.images[0]+'" im1="'+n.images[1]+'" im2="'+n.images[2]+'" '+(n.acolor?'aCol="'+n.acolor+'" ':"")+(n.scolor?'sCol="'+n.scolor+'" ':"")+(n.checkstate==1?'checked="1" ':n.checkstate==2?'checked="-1"':"")+(n.closeable?'closeable="1" ':"")+(this.XMLsource&&n.XMLload==0?' child="1" ':"")+">":'<item id="'+n.id+'" '+(this._getOpenState(n)==1?' open="1" ':"")+(f==n.id?' select="1"':"")+' text="'+r+'"'+(this.XMLsource&&n.XMLload==0?' child="1" ':"")+">",this._xuserData&&n._userdatalist)for(u=n._userdatalist.split(","),t=0;t<u.length;t++)i+='<userdata name="'+u[t]+'">'+this._apreUC+n.userData["t_"+u[t]]+this._apstUC+"<\/userdata>";for(t=0;t<n.childsCount;t++)i+=this._serializeItem(n.childNodes[t]);return i+"<\/item>"};dhtmlXTreeObject.prototype.saveSelectedItem=function(n,t){n=n||"";this.setCookie("treeStateSelected"+n,this.getSelectedItemId(),t)};dhtmlXTreeObject.prototype.restoreSelectedItem=function(n){n=n||"";var t=this.getCookie("treeStateSelected"+n);this.selectItem(t,!1)};dhtmlXTreeObject.prototype.enableAutoSavingSelected=function(n,t){this.assMode=dhx4.s2b(n);this.assMode&&!this.oldOnSelect&&(this.oldOnSelect=this.onRowSelect,this.onRowSelect=function(n,t,i){t||(t=this);t.parentObject.treeNod.oldOnSelect(n,t,i);t.parentObject.treeNod.assMode&&t.parentObject.treeNod.saveSelectedItem(t.parentObject.treeNod.assCookieName)});this.assCookieName=t};dhtmlXTreeObject.prototype.saveState=function(n,t){var i=this._escape(this.serializeTree()),r=4e3,u;if(i.length>r){if(navigator.appName.indexOf("Microsoft")!=-1)return!1;for(this.setCookie("treeStatex"+n,Math.ceil(i.length/r)),u=0;u<Math.ceil(i.length/r);u++)this.setCookie("treeStatex"+n+"x"+u,i.substr(u*r,r),t)}else this.setCookie("treeStatex"+n,i,t);return(i=this.getCookie("treeStatex"+n),!i)?(this.setCookie("treeStatex"+n,"",t),!1):!0};dhtmlXTreeObject.prototype.loadState=function(n){var t=this.getCookie("treeStatex"+n),r,i;if(!t)return!1;if(t.length){if(t.toString().length<4){for(r="",i=0;i<t;i++)r+=this.getCookie("treeStatex"+n+"x"+i);t=r}this.parse(this.utfesc=="utf8"?decodeURI(t):unescape(t))}return!0};dhtmlXTreeObject.prototype.setCookie=function(n,t,i){var r=n+"="+t+(i?"; "+i:"");document.cookie=r};dhtmlXTreeObject.prototype.getCookie=function(n){var r=n+"=",t,i;if(document.cookie.length>0&&(t=document.cookie.indexOf(r),t!=-1))return t+=r.length,i=document.cookie.indexOf(";",t),i==-1&&(i=document.cookie.length),document.cookie.substring(t,i)};dhtmlXTreeObject.prototype.saveOpenStates=function(n,t){for(var i=[],r=0;r<this.htmlNode.childsCount;r++)i=i.concat(this._collectOpenStates(this.htmlNode.childNodes[r]));i=i.join(this.dlmtr);this.setCookie("treeOpenStatex"+n,i,t)};dhtmlXTreeObject.prototype.loadOpenStates=function(n){for(var u,r,i,t=0;t<this.htmlNode.childsCount;t++)this._xcloseAll(this.htmlNode.childNodes[t]);if(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0",u=getCookie("treeOpenStatex"+n),u)for(r=u.split(this.dlmtr),t=0;t<r.length;t++)if(i=this._globalIdStorageFind(r[t]),i){if(this.XMLsource&&!i.XMLload&&i.id!=this.rootId){this._delayedLoad(i,"loadOpenStates('"+n+"')");return}this.openItem(r[t])}this.callEvent("onAllOpenDynamic",[])};dhtmlXTreeObject.prototype._delayedLoad=function(n,t){this.afterLoadMethod=t;this.onLoadReserve=this.onXLE;this.onXLE=this._delayedLoadStep2;this._loadDynXML(n.id)};dhtmlXTreeObject.prototype._delayedLoadStep2=function(n){if(n.onXLE=n.onLoadReserve,window.setTimeout(function(){dhtmlx.temp=n;eval("dhtmlx.temp."+n.afterLoadMethod)},100),n.onXLE)n.onXLE(n);n.callEvent("onXLE",[n])};dhtmlXTreeObject.prototype._collectOpenStates=function(n){var t=[],i;if(this._getOpenState(n)==1)for(t.push(n.id),i=0;i<n.childsCount;i++)t=t.concat(this._collectOpenStates(n.childNodes[i]));return t};dhtmlXTreeObject.prototype.openAllItemsDynamic=function(n){this.ClosedElem=[];this.G_node=null;var t=this._globalIdStorageFind(n||this.rootId);t.id!=this.rootId&&this.getOpenState(t.id)!=0&&this.openItem(n);this._openAllNodeChilds(t,0);this.ClosedElem.length>0&&(this.onLoadReserve=this.onXLE,this.onXLE=this._loadAndOpen,this._loadAndOpen(this))};dhtmlXTreeObject.prototype._openAllNodeChilds=function(n){(n.XMLload==0||n.unParsed)&&this.ClosedElem.push(n);for(var t=0;t<n.childsCount;t++)this._getOpenState(n.childNodes[t])<0&&this._HideShow(n.childNodes[t],2),n.childNodes[t].childsCount>0&&this._openAllNodeChilds(n.childNodes[t]),(n.childNodes[t].XMLload==0||n.childNodes[t].unParsed)&&this.ClosedElem.push(n.childNodes[t])};dhtmlXTreeObject.prototype._loadAndOpen=function(n){if(n.G_node&&(n._openItem(n.G_node),n._openAllNodeChilds(n.G_node),n.G_node=null),n.ClosedElem.length>0&&(n.G_node=n.ClosedElem.shift()),n.G_node)n.G_node.unParsed?n.reParse(n.G_node):window.setTimeout(function(){n._loadDynXML(n.G_node.id)},100);else{if(n.onXLE=n.onLoadReserve,n.onXLE)n.onXLE(n);n.callEvent("onAllOpenDynamic",[n])}};dhtmlXTreeObject.prototype.openItemsDynamic=function(n,t){this.onXLE!=this._stepOpen&&(this._opnItmsDnmcFlg=dhx4.s2b(t),this.onLoadReserve=this.onXLE,this.onXLE=this._stepOpen,this.ClosedElem=n.split(",").reverse(),this._stepOpen(this))};dhtmlXTreeObject.prototype._stepOpen=function(n){if(!n.ClosedElem.length){n.onXLE=n.onLoadReserve;n._opnItmsDnmcFlg&&n.selectItem(n.G_node,!0);n.onXLE&&arguments[1]&&n.onXLE.apply(n,arguments);n.callEvent("onOpenDynamicEnd",[]);return}n.G_node=n.ClosedElem.pop();n.skipLock=!0;var t=n._globalIdStorageFind(n.G_node);t&&(t.XMLload===0?n.openItem(n.G_node):(n.openItem(n.G_node),n._stepOpen(n)));n.skipLock=!1};dhtmlXTreeView.prototype.modules={};dhtmlXTreeView.prototype.setSkin=function(n){this.base.className=String(this.base.className).replace(new RegExp("s{0,}dhxtreeview_"+(this.conf.skin||"")),"")+" dhxtreeview_"+n;this.conf.skin=n;this.conf.icon_width=dhx4.readFromCss("dhxtreeview_"+this.conf.skin+" dhxtreeview_icon_width");this.conf.ofs=this.conf.skin=="dhx_skyblue"?{w:1,h:0}:{w:0,h:0}};dhtmlXTreeView.prototype.setItemText=function(n,t){this.items[n]!=null&&(this.items[n].text=t,this.items[n].item.firstChild.childNodes[this.conf.idx.text].innerHTML=t,this._callPublicEvent("onTextChange",[n,t]))};dhtmlXTreeView.prototype.getItemText=function(n){return this.items[n].text};dhtmlXTreeView.prototype.showItem=function(n){for(var i=0,r=!1,t;n;)if(t=this.items[n],t)i+=t.item.offsetTop+(r?t.item.firstChild.offsetHeight:0),n=t.pId,r=!0;else break;this.cont.scrollTop=i};dhtmlXTreeView.prototype.getParentId=function(n){return this.items[n].pId};dhtmlXTreeView.prototype.getSubItems=function(n){var t=[];for(var i in this.items)this.items[i].pId==n&&t.push(i);return t};dhtmlXTreeView.prototype._refreshItemHtml=function(n,t,i){this.items[n].item.firstChild.innerHTML=this._getItemHtml(n);t==!0&&this._signUpdate(n);i==!0&&this._iconUpdate(n)};dhtmlXTreeView.prototype._getItemHtml=function(n){var i=[],r=0,u,t;for(u in this.conf.idx)t=this["_itemHtml_"+u](n,r),t.nodeText!==!1&&(i.push(t.nodeText),r+=t.nodeIndex);return i.join("")};dhtmlXTreeView.prototype._getIconOfs=function(n,t){return(this.items[n].level-1+t)*this.conf.icon_width};dhtmlXTreeView.prototype._itemHtml_text=function(n,t){return{nodeIndex:1,nodeText:"<div class='dhxtreeview_item_label' style='left:"+this._getIconOfs(n,t)+"px;'>"+this.items[n].text+"<\/div>"}};dhtmlXTreeView.prototype.setUserData=function(n,t,i){var r=this.items[n];r&&(r.userdata[t]=i)};dhtmlXTreeView.prototype.getUserData=function(n,t){var i=this.items[n];return i&&!t?i.userdata:i?i.userdata[t]||null:null};dhtmlXTreeView.prototype.silent=function(n){this.conf.silent=!0;typeof n=="function"&&n.apply(window,[this]);this.conf.silent=!1};dhtmlXTreeView.prototype._callPublicEvent=function(){return this.conf.silent==!1?this.callEvent.apply(this,arguments):!0};dhtmlXTreeView.prototype.refreshItem=function(n){n=n||0;this.deleteChildItems(n);this._dynLoadRequest(n)};dhtmlXTreeView.prototype.getLevel=function(n){for(var t=this.items[n],i=0;t;)i++,t=this.items[t.pId];return i};typeof dhtmlXCellObject=="function"&&(dhtmlXCellObject.prototype.attachTreeView=function(n){var t,i,r;if(this.callEvent("_onBeforeContentAttach",["treeview"]),t=document.createElement("DIV"),t.style.position="relative",t.style.overflow="hidden",t.style.width="100%",t.style.height="100%",this._attachObject(t),i={parent:t,skin:this.conf.skin},n!=null&&typeof n=="object")for(r in n)typeof i[r]=="undefined"&&(i[r]=n[r]);return this.dataType="treeview",this.dataObj=new dhtmlXTreeView(i),typeof dhtmlXWindowsCell=="function"&&this instanceof window.dhtmlXWindowsCell&&(t.className+=" dhxtreeview_with_border",this.dataObj.conf.adjust_base=!0,this.dataObj.setSizes()),i.parent=null,i=t=n=null,this.callEvent("_onContentAttach",[]),this.dataObj});dhtmlXTreeView.prototype.modules.chbx={init:"_chbxInit"};dhtmlXTreeView.prototype.enableCheckboxes=function(n){if(n=n==!0,this.conf.enable_chbx!=n){this.conf.enable_chbx=n;this._chbxUpdIndex();for(var t in this.items)this._refreshItemHtml(t,!0,!0)}};dhtmlXTreeView.prototype.getAllChecked=function(n){return this._chbxGetCheckedBranch(n,!0)};dhtmlXTreeView.prototype.getAllUnchecked=function(n){return this._chbxGetCheckedBranch(n,!1)};dhtmlXTreeView.prototype.checkItem=function(n){this._chbxSetChecked(n,!0,!0)};dhtmlXTreeView.prototype.uncheckItem=function(n){this._chbxSetChecked(n,!1,!0)};dhtmlXTreeView.prototype.isItemChecked=function(n){return this.items[n]==null?null:this.items[n].checked==!0};dhtmlXTreeView.prototype.enableCheckbox=function(n){this._chbxSetEnabled(n,!0)};dhtmlXTreeView.prototype.disableCheckbox=function(n){this._chbxSetEnabled(n,!1)};dhtmlXTreeView.prototype.isCheckboxEnabled=function(n){return this.items[n].chbx_enabled==!0};dhtmlXTreeView.prototype.showCheckbox=function(n){this._chbxSetVisible(n,!0)};dhtmlXTreeView.prototype.hideCheckbox=function(n){this._chbxSetVisible(n,!1)};dhtmlXTreeView.prototype.isCheckboxVisible=function(n){return this.items[n].chbx_visible==!0};dhtmlXTreeView.prototype._chbxInit=function(n){this.enableCheckboxes(n.checkboxes);this.attachEvent("_onItemRendered",function(n,t){this.items[n].checked=window.dhx4.s2b(t.checked);var i=t.checkbox||"enabled,visible";this.items[n].chbx_enabled=i.match(/disabled/)==null;this.items[n].chbx_visible=i.match(/hidden/)==null});this.attachEvent("_onTreeClick",function(n,t){var i,r;this.conf.enable_chbx==!0&&(i=n.target||n.srcElement,i.tagName.toLowerCase()=="i"&&(i=i.parentNode),(i.parentNode.className||"").match(/dhxtreeview_item_text/)!=null&&i==i.parentNode.childNodes[this.conf.idx.chbx]&&(r=i.parentNode.parentNode._itemId,this.items[r].chbx_enabled==!0&&this._chbxSetChecked(r,!this.items[r].checked,!0),t.stop=!0))});n=null};dhtmlXTreeView.prototype._itemHtml_chbx=function(n,t){var i={nodeIndex:0,nodeText:!1};return this.conf.enable_chbx==!0&&(this.items[n].chbx_visible==!0&&(i.nodeIndex=1),i.nodeText="<div class='dhxtreeview_item_icon' style='left:"+this._getIconOfs(n,t)+"px;"+(i.nodeIndex>0?"":"display:none;")+"'>"+this._chbxGenIcon(n)+"<\/div>"),i};dhtmlXTreeView.prototype._chbxSetChecked=function(n,t){if(this.conf.enable_chbx==!0&&(t=t==!0,this.items[n].checked!=t)){if(this._callPublicEvent("onBeforeCheck",[n,this.items[n].checked==!0])!==!0)return;this.items[n].checked=t;this.items[n].item.childNodes[0].childNodes[this.conf.idx.chbx].innerHTML=this._chbxGenIcon(n);this._callPublicEvent("onCheck",[n,t])}};dhtmlXTreeView.prototype._chbxSetEnabled=function(n,t){this.items[n].chbx_enabled!=t&&(this.items[n].chbx_enabled=t,this.items[n].item.firstChild.childNodes[this.conf.idx.chbx].innerHTML=this._chbxGenIcon(n))};dhtmlXTreeView.prototype._chbxSetVisible=function(n,t){this.items[n].chbx_visible!=t&&(this.items[n].chbx_visible=t,this._refreshItemHtml(n,!0,!0))};dhtmlXTreeView.prototype._chbxGenIcon=function(n){var t=this.conf.icons["chbx_"+(this.items[n].chbx_enabled?"":"dis_")+(this.items[n].checked?"1":"0")];return'<i class="'+this.conf.icons.prefix+" "+t+'"><\/i>'};dhtmlXTreeView.prototype._chbxUpdIndex=function(){this.conf.idx=this.conf.enable_chbx==!0?{sign:0,chbx:1,icon:2,text:3}:{sign:0,icon:1,text:2}};dhtmlXTreeView.prototype._chbxGetCheckedBranch=function(n,t){var r=[];for(var i in this.items)this.items[i].pId==n&&(this.items[i].checked==t&&r.push(i),this.items[i].kids==!0&&(r=r.concat(this._chbxGetCheckedBranch(i,t))));return r};dhtmlXTreeView.prototype.modules.sign={init:"_signInit"};dhtmlXTreeView.prototype._signInit=function(){this.attachEvent("_onTreeClick",function(n,t){if(t.stop!=!0){var i=n.target||n.srcElement;i.tagName.toLowerCase()=="i"&&(i=i.parentNode);(i.parentNode.className||"").match(/dhxtreeview_item_text/)!=null&&i==i.parentNode.childNodes[this.conf.idx.sign]&&(this._openCloseItem(i.parentNode.parentNode._itemId,!0),t.stop=!0)}})};dhtmlXTreeView.prototype._signUpdate=function(n){var t=this.items[n],i=t.item.childNodes[0].childNodes[this.conf.idx.sign];i.innerHTML=t.kids==!0||t.kids_request==!0?'<i class="'+this.conf.icons.prefix+" "+this.conf.icons[t.opened||t.half_opened?"minus":"plus"]+'"><\/i>':"";t=i=null};dhtmlXTreeView.prototype._itemHtml_sign=function(n,t){return{nodeIndex:1,nodeText:"<div class='dhxtreeview_item_icon' style='left:"+this._getIconOfs(n,t)+"px;'><\/div>"}};dhtmlXTreeView.prototype.modules.selection={init:"_selectionInit"};dhtmlXTreeView.prototype.selectItem=function(n){var i,r,t;if(this.conf.msel==!0){for(i={},n instanceof Array||(n=[n]),r=0;r<n.length;r++)i[n[r]]=!0;for(t in this.conf.selected)i[t]==!0?delete i[t]:this._setSelected(t,!1);for(t in i)this._setSelected(t,!0)}else n==null||this.conf.selected[n]==!0||n instanceof Array||this._clearSelection(n)==!1&&this._setSelected(n,!0)};dhtmlXTreeView.prototype.unselectItem=function(n){if(this.conf.msel==!0){n instanceof Array||(n=[n]);for(var t=0;t<n.length;t++)this.conf.selected[n[t]]==!0&&this._setSelected(n[t],!1)}else n!=null&&this._setSelected(n,!1)};dhtmlXTreeView.prototype.getSelectedId=function(){var n=[];for(var t in this.conf.selected)n.push(t);return this.conf.msel?n:n[0]||null};dhtmlXTreeView.prototype.enableMultiselect=function(n){n=n==!0;this.conf.msel!=n&&(this._clearSelection(),this.conf.msel=n)};dhtmlXTreeView.prototype._selectionInit=function(n){this.conf.msel=window.dhx4.s2b(n.multiselect);this.attachEvent("_onTreeClick",function(n,t){var r,i,u;t.stop!=!0&&(r=n.target||n.srcElement,r.tagName.toLowerCase()=="i"&&(r=r.parentNode),i=null,r.className.match(/dhxtreeview_item_label/)!=null?i=r.parentNode.parentNode._itemId:r.className.match(/^dhxtreeview_item_text/)!=null?i=r.parentNode._itemId:r.className.match(/^dhxtreeview_item_icon/)!=null&&(i=r.parentNode.parentNode._itemId),i!=null&&(u=new Date,this._click_item!==i||u-(this._click_timer||0)>300?(this._callPublicEvent("onClick",[i]),this._click_timer=u,this._click_item=i):(this._callPublicEvent("onDblClick",[i]),this._click_item=null),this.conf.msel==!0?(n.ctrlKey==!0||this.conf.mac_cmd_key==!0)&&n.shiftKey==!1&&n.altKey==!1?this._setSelected(i,!this._isSelected(i)):n.ctrlKey==!1&&n.shiftKey==!1&&n.altKey==!1&&this.conf.mac_cmd_key==!1&&this._clearSelection(i)==!1&&this._setSelected(i,!0):this._clearSelection(i)==!1&&this._setSelected(i,!0)))})};dhtmlXTreeView.prototype._setSelected=function(n,t){t==!0?this.conf.selected[n]!=!0&&(this.items[n].item.childNodes[0].className+=" dhxtreeview_item_text_selected",this.conf.selected[n]=!0,this._callPublicEvent("onSelect",[n,!0])):this.conf.selected[n]==!0&&(this.items[n].item.childNodes[0].className=String(this.items[n].item.childNodes[0].className).replace(/\s*dhxtreeview_item_text_selected/gi,""),delete this.conf.selected[n],this._callPublicEvent("onSelect",[n,!1]))};dhtmlXTreeView.prototype._clearSelection=function(n){var t=!1;for(var i in this.conf.selected)n!=null&&i==n?t=!0:this._setSelected(i,!1);return t};dhtmlXTreeView.prototype._isSelected=function(n){return this.conf.selected[n]==!0};dhtmlXTreeView.prototype.modules.icons={init:"_iconModuleInit"};dhtmlXTreeView.prototype.setItemIcons=function(n,t){if(t==null&&this.items[n].icons!=null)delete this.items[n].icons;else if(t!=null){this.items[n].icons==null&&(this.items[n].icons={});for(var i in t)t[i]!=null?this.items[n].icons[i]=t[i]:t[i]==null&&this.items[n].icons[i]!=null&&delete this.items[n].icons[i]}this._iconUpdate(n)};dhtmlXTreeView.prototype.setIconColor=function(n,t){var i=this.items[n].item.firstChild.childNodes[this.conf.idx.icon].firstChild;t==null?this.items[n].icon_color!=null&&(delete this.items[n].icon_color,i.style.color="inherit"):this.items[n].icon_color!=t&&(this.items[n].icon_color=t,i.style.color=t);i=null};dhtmlXTreeView.prototype.setIconset=function(n){this.icons[n]!=null&&this.icons[n].r==!0&&(this.conf.icons=this.icons[n])};dhtmlXTreeView.prototype._iconModuleInit=function(){this.attachEvent("_onItemRendered",function(n,t){t.icons!=null&&(this.items[n].icons=t.icons);t.icon_color!=null&&(this.items[n].icon_color=t.icon_color)})};dhtmlXTreeView.prototype._iconConf=function(n){var t=this.items[n].icons||{};for(var i in{folder_opened:1,folder_closed:1,file:1})typeof t[i]=="undefined"&&(t[i]=this.conf.icons[i]);return t};dhtmlXTreeView.prototype._iconHtml=function(n,t){var i=['class="'+this.conf.icons.prefix+" "+t+'"'];return this.items[n].icon_color!=null&&i.push('style="color:'+this.items[n].icon_color+';"'),"<i "+i.join(" ")+"><\/i>"};dhtmlXTreeView.prototype._itemHtml_icon=function(n,t){return{nodeIndex:1,nodeText:"<div class='dhxtreeview_item_icon' style='left:"+this._getIconOfs(n,t)+"px;'>"+this._iconHtml(n,this._iconConf(n).file)+"<\/div>"}};dhtmlXTreeView.prototype._iconUpdate=function(n){var t=this.items[n],i=this._iconConf(n),r=t.kids==!0||t.kids_request==!0?i[t.opened?"folder_opened":"folder_closed"]:i.file;t.item.childNodes[0].childNodes[this.conf.idx.icon].innerHTML=this._iconHtml(n,r);t=null};dhtmlXTreeView.prototype.icons={tree_native:{r:!0,prefix:"dhxtreeview_icon",plus:"dhxtreeview_icon_plus",minus:"dhxtreeview_icon_minus",file:"dhxtreeview_icon_file",folder_opened:"dhxtreeview_icon_folder_opened",folder_closed:"dhxtreeview_icon_folder_closed",loading:"dhxtreeview_icon_loading",chbx_0:"dhxtreeview_icon_chbx_0",chbx_1:"dhxtreeview_icon_chbx_1",chbx_dis_0:"dhxtreeview_icon_chbx_dis_0",chbx_dis_1:"dhxtreeview_icon_chbx_dis_1"},font_awesome:{r:!(window.dhx4.isIE6==!0||window.dhx4.isIE7==!0),prefix:"fa",plus:"fa-caret-right",minus:"fa-caret-down",file:"fa-file-o",folder_opened:"fa-folder-open-o",folder_closed:"fa-folder-o",loading:"fa-refresh fa-spin",chbx_0:"fa-square-o",chbx_1:"fa-check-square-o",chbx_dis_0:"fa-square-o dhx-disabled",chbx_dis_1:"fa-check-square-o dhx-disabled"}};dhtmlXTreeView.prototype.modules.loading={init:"_loadingInit",unload:"_loadingUnload"};dhtmlXTreeView.prototype._loadingInit=function(n){window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","tree",{struct:!0});this.conf.root_id=typeof n.root_id=="undefined"||n.root_id==null?"0":n.root_id;this._dhxdataload.onBeforeXLS=function(n){return this.conf.autoload.url==null&&(this.conf.autoload.url=n),{url:n.replace(/\{id\}/gi,this.conf.root_id)}}};dhtmlXTreeView.prototype._loadingUnload=function(){window.dhx4._enableDataLoading(this,null,null,null,"clear")};dhtmlXTreeView.prototype._initObj=function(n,t,i,r){for(var f,u=0;u<n.length;u++)f=n[u].id,f==null&&(f="dhxtreeview_id_"+window.dhx4.newId()),this.items[f]==null&&this._addItem(f,i,n[u]),n[u].items!=null&&this._initObj(n[u].items,null,f,!0);r!=!0&&this._fixAreaWidth()};dhtmlXTreeView.prototype._xmlToObj=function(n,t){var s,o,i,u,t,r,f,e,h;for(t!=!0&&(n=n.getElementsByTagName("tree")[0]),s=[],o=0;o<n.childNodes.length;o++){if(i=n.childNodes[o],(i.tagName||"").toLowerCase()=="item"){for(u={},r=0;r<i.attributes.length;r++)u[i.attributes[r].name]=i.attributes[r].value;if(i.childNodes.length>0)for(t=this._xmlToObj(i,!0),t.length>0&&(u.items=t),r=0;r<i.childNodes.length;r++){if(f=(i.childNodes[r].tagName||"").toLowerCase(),{icons:1,userdata:1}[f]==1)for(u[f]==null&&(u[f]={}),e=0;e<i.childNodes[r].attributes.length;e++)h=i.childNodes[r].attributes[e].name,u[f][h]==null&&(u[f][h]=i.childNodes[r].attributes[e].value);n2=null}s.push(u)}i=null}return s};dhtmlXTreeView.prototype.modules.dnd={init:"_dndInit",unload:"_dndUnload"};dhtmlXTreeView.prototype.enableDragAndDrop=function(n){this.conf.enable_dnd=window.dhx4.s2b(n)};dhtmlXTreeView.prototype._dndInit=function(n){var t=this;this.enableDragAndDrop(n.dnd);this.conf.dnd=null;this._dndOnMouseDown=function(n){if(t.conf.enable_dnd==!0){if(n=n||event,typeof n.button!="undefined"&&n.button>=2)return!1;for(var r=null,u=null,i=n.target||n.srcElement,f=window.dhx4.absLeft(i)+(typeof n.offsetX=="undefined"?n.layerX:n.offsetX)-n.clientX,e=window.dhx4.absTop(i)+(typeof n.offsetY=="undefined"?n.layerY:n.offsetY)-n.clientY;i!=null&&i!=t.cont;)(i.className||"").match(/dhxtreeview_item/)!=null&&i._itemId!=null?(r=i._itemId,u=i._treeId,i=null):i=i.parentNode;(i=null,r!=null)&&(t.conf.dnd={inited:!1,id:r,treeId:u,selected:t.conf.selected[r]==!0,tid:null,drop:{},x:n.clientX,y:n.clientY,ofs_x:f,ofs_y:e,zi:window.dhx4.newId(),scroll:!1,scroll_ofs:5,scroll_time:30,scroll_tm:null,kids:{},idx:{}},t._dndInitEvents())}};this._dndOnMouseMove=function(n){var e,u,c,r,o,f;if(n=n||event,t.conf.dnd.inited!=!0)if(Math.abs(t.conf.dnd.x-n.clientX)>=15||Math.abs(t.conf.dnd.y-n.clientY)>=15){if(t._callPublicEvent("onBeforeDrag",[t.conf.dnd.id])!==!0)return;t.conf.dnd.inited=!0;t.cont.className+=" dhxtreeview_dnd_mode";t._dndInitDraggedObj();t._dndCollectKids(t.conf.dnd.id);t._dndCollectIndexes(t.area);t._clearSelection(t.conf.dnd.id)==!1&&t._setSelected(t.conf.dnd.id,!0);t.items[t.conf.dnd.id].item.className+=" dhxtreeview_item_dragged";document.body.className+=" dhxtreeview_dnd_mode";t.conf.dnd.cont={x1:window.dhx4.absLeft(t.base),y1:window.dhx4.absTop(t.base)};t.conf.dnd.cont.x2=t.conf.dnd.cont.x1+t.base.offsetWidth;t.conf.dnd.cont.y2=t.conf.dnd.cont.y1+t.base.offsetHeight}else return;if(t.conf.dnd.x=n.clientX,t.conf.dnd.y=n.clientY,t._dndAdjustDraggedObj(),e=!0,t.cont.scrollHeight>t.cont.clientHeight&&t.conf.dnd.x>=t.conf.dnd.cont.x1&&t.conf.dnd.x<=t.conf.dnd.cont.x2&&(t.cont.scrollTop>0&&t.conf.dnd.y>=t.conf.dnd.cont.y1&&t.conf.dnd.y<=t.conf.dnd.cont.y1+10?(t._dndScroll("up"),e=!1):t.cont.scrollTop+t.cont.clientHeight<t.cont.scrollHeight&&t.conf.dnd.y<=t.conf.dnd.cont.y2&&t.conf.dnd.y>=t.conf.dnd.cont.y2-10&&(t._dndScroll("down"),e=!1)),e==!0&&t.conf.dnd.scroll==!0&&t._dndScroll("stop"),u=n.target||n.srcElement,u.parentNode!=null&&(u.parentNode.className||"").match(/dhxtreeview_kids_cont/)!=null){u=null;return}var s=!1,i=null,h=null;(u.className!=null&&(u.className.match(/dhxtreeview_item_[li]/)!=null?(i=u.parentNode.parentNode._itemId,h=u.parentNode.parentNode._treeId):u.className.match(/dhxtreeview_item_[t]/)!=null&&(i=u.parentNode._itemId,h=u.parentNode._treeId)),i==null||h==t.conf.dnd.treeId)&&((t.conf.dnd.id==i||t.conf.dnd.kids[i]==!0)&&(i=null),i!=null&&(c=t.items[i].item.firstChild.offsetHeight,r=Math.max(Math.floor(Math.min(n.offsetY,c)*3/c),0),r==0?t.items[i].item.previousSibling==t.items[t.conf.dnd.id].item&&(r=null):r==1?t.items[t.conf.dnd.id].pId==i?r=null:t.items[i].kids==!0&&t.items[i].item.lastChild.firstChild.firstChild==t.items[t.conf.dnd.id].item?r=null:t.items[i].opened==!1:r==2&&(t.items[i].opened==!0?r=null:t.items[i].item.nextSibling==t.items[t.conf.dnd.id].item&&(r=null)),r!=t.conf.dnd.ofs&&(t.conf.dnd.ofs=r,s=!0)),i!=t.conf.dnd.tid&&(t.conf.dnd.tid!=null&&t._dndUpdateTargetCss(t.conf.dnd.tid,!1),i!=null&&(s=!0),t.conf.dnd.tid=i),s==!0&&(o=!1,r!=null&&(f={id:t.conf.dnd.id,pId:t.items[i].pId||null,index:null,idxOfs:t.items[t.conf.dnd.id].pId==t.items[i].pId&&t.conf.dnd.idx[t.conf.dnd.id]<t.conf.dnd.idx[i]?-1:0},r==0||r==2?f.index=t.conf.dnd.idx[i]+(r==2?1:0)+f.idxOfs:r==1&&(f.pId=i,f.index=t.items[i].item.lastChild.className.match(/dhxtreeview_kids_cont/)==null?0:t.items[i].item.lastChild.firstChild.childNodes.length),(t.conf.dnd.drop.id!=f.id||t.conf.dnd.drop.pId!=f.pId||t.conf.dnd.drop.index!=f.index)&&(t.conf.dnd.drop=f,t._callPublicEvent("onDragOver",[t.conf.dnd.drop.id,t.conf.dnd.drop.pId,t.conf.dnd.drop.index])===!0&&(o=!0))),o!=!0&&(t.conf.dnd.ofs=r=null),t._dndUpdateTargetCss(i,o)))};this._dndOnMouseUp=function(n){var o,e;if(n=n||event,typeof n.button=="undefined"||!(n.button>=2)){if(t._dndUnloadEvents(),t._dndUnloadDraggedObj(),t.conf.dnd.scroll==!0&&t._dndScroll("stop"),t.cont.className.match(/dhxtreeview_dnd_mode/gi)!=null&&(t.cont.className=String(t.cont.className).replace(/\s*dhxtreeview_dnd_mode/gi,"")),t.conf.dnd.tid!=null&&t._dndUpdateTargetCss(t.conf.dnd.tid,!1),t.conf.dnd.inited==!0&&(t.items[t.conf.dnd.id].item.className=String(t.items[t.conf.dnd.id].item.className).replace(/\s*dhxtreeview_item_dragged/gi,""),document.body.className=String(document.body.className).replace(/\s*dhxtreeview_dnd_mode/,""),t.conf.dnd.tid!=null&&t.conf.dnd.ofs!=null&&t._callPublicEvent("onBeforeDrop",[t.conf.dnd.drop.id,t.conf.dnd.drop.pId,t.conf.dnd.drop.index])===!0)){var r=t.items[t.conf.dnd.id],i=t.items[t.conf.dnd.tid],u=r.pId!=null?t.items[r.pId]:null,f;if(t.conf.dnd.ofs==1?(o=!1,i.kids==!1&&(t._initKidsNode(i.id),o=!0),i.item.lastChild.firstChild.appendChild(r.item),o==!0&&t._openCloseItem(i.id,!1),r.pId=i.id,f=i.level+1-r.level):(t.conf.dnd.ofs==0||t.conf.dnd.ofs==2)&&(t.conf.dnd.ofs==0?i.item.parentNode.insertBefore(r.item,i.item):i.item.nextSibling!=null?i.item.parentNode.insertBefore(r.item,i.item.nextSibling):i.item.parentNode.appendChild(r.item),r.pId=i.pId,f=i.level-r.level),f!=0){t.conf.dnd.kids[r.id]=!0;for(e in t.conf.dnd.kids)t.items[e].level+=f,t._refreshItemHtml(e,t.items[e].kids==!0,!0)}u!=null&&u.kids==!0&&u.item.lastChild.firstChild.childNodes.length==0&&(t._clearKidsNode(u.id),u.opened=!1);r=i=u=null;t._fixAreaWidth();t._callPublicEvent("onDrop",[t.conf.dnd.drop.id,t.conf.dnd.drop.pId,t.conf.dnd.drop.index])}window.dhx4.zim.clear(t.conf.dnd.zi);t.conf.dnd=null}};this._dndOnContextMenu=function(n){if(t.conf.dnd.inited==!0)return n=n||event,n.cancelBubble=!0,n.preventDefault&&n.preventDefault(),n.returnValue=!1,!1};this._dndInitEvents=function(){typeof addEventListener=="function"?(window.addEventListener("mousemove",this._dndOnMouseMove,!1),window.addEventListener("mouseup",this._dndOnMouseUp,!1),window.addEventListener("contextmenu",this._dndOnContextMenu,!1)):(document.body.attachEvent("onmousemove",this._dndOnMouseMove),document.body.attachEvent("onmouseup",this._dndOnMouseUp),document.body.attachEvent("oncontextmenu",this._dndOnContextMenu))};this._dndUnloadEvents=function(){typeof addEventListener=="function"?(window.removeEventListener("mousemove",this._dndOnMouseMove,!1),window.removeEventListener("mouseup",this._dndOnMouseUp,!1),window.removeEventListener("contextmenu",this._dndOnContextMenu,!1)):(document.body.detachEvent("onmousemove",this._dndOnMouseMove),document.body.detachEvent("onmouseup",this._dndOnMouseUp),document.body.detachEvent("oncontextmenu",this._dndOnContextMenu))};this._dndInitDraggedObj=function(){this.conf.dnd.dragged=document.createElement("DIV");this.conf.dnd.dragged.className="dhxtreeview_dragged_obj_"+this.conf.skin;this.conf.dnd.dragged.style.zIndex=window.dhx4.zim.reserve(this.conf.dnd.zi);document.body.appendChild(this.conf.dnd.dragged);this.conf.dnd.dragged.innerHTML=this.getItemText(this.conf.dnd.id)};this._dndAdjustDraggedObj=function(){this.conf.dnd.dragged.style.left=this.conf.dnd.x+this.conf.dnd.ofs_x+12+"px";this.conf.dnd.dragged.style.top=this.conf.dnd.y+this.conf.dnd.ofs_y+18+"px"};this._dndUnloadDraggedObj=function(){this.conf.dnd.dragged!=null&&(document.body.removeChild(this.conf.dnd.dragged),this.conf.dnd.dragged=null)};this._dndUpdateTargetCss=function(n,t){var i=this.items[n].item.childNodes[0],r;this.conf.dnd.ofs==null&&(t=!1);t==!0?(i.className=String(i.className).replace(/(\s*dhxtreeview_drop_\d)?$/i," dhxtreeview_drop_"+this.conf.dnd.ofs),(i.nextSibling==null||i.nextSibling.className.match(/dhxtreeview_drop_preview/)==null)&&(r=document.createElement("DIV"),r.className="dhxtreeview_drop_preview",r.style.left=i.lastChild.previousSibling.style.left,i.nextSibling==null?i.parentNode.appendChild(r):i.parentNode.insertBefore(r,i.nextSibling),r=null),i.nextSibling.className=String(i.nextSibling.className).replace(/(\s*dhxtreeview_drop_\d)?$/i," dhxtreeview_drop_"+this.conf.dnd.ofs)):i.className.match(/dhxtreeview_drop_\d/)!=null&&(i.className=String(i.className).replace(/\s*dhxtreeview_drop_\d/gi,""),i.nextSibling!=null&&i.nextSibling.className.match(/dhxtreeview_drop_preview/)!=null&&i.parentNode.removeChild(i.nextSibling));i=null};this._dndCollectKids=function(n){for(var t in this.items)this.items[t].pId==n&&(this.conf.dnd.kids[t]=!0,this.items[t].kids==!0&&this._dndCollectKids(t))};this._dndCollectIndexes=function(n){for(var t=0;t<n.childNodes.length;t++)this.conf.dnd.idx[n.childNodes[t]._itemId]=t,n.childNodes[t].lastChild.className.match(/dhxtreeview_kids_cont/)!=null&&this._dndCollectIndexes(n.childNodes[t].lastChild.firstChild)};this._dndScroll=function(n,i){if(n=="stop"){t.conf.dnd.scroll==!0&&(t.conf.dnd.scroll_tm&&window.clearTimeout(t.conf.dnd.scroll_tm),t.conf.dnd.scroll=!1);return}if(t.conf.dnd.scroll==!0){if(i!=!0)return}else t.conf.dnd.scroll=!0;var r=!1;n=="up"?(t.cont.scrollTop=Math.max(0,t.cont.scrollTop-t.conf.dnd.scroll_ofs),t.cont.scrollTop==0&&(r=!0)):(t.cont.scrollTop=Math.min(t.cont.scrollHeight-t.cont.clientHeight,t.cont.scrollTop+t.conf.dnd.scroll_ofs),t.cont.scrollTop+t.cont.clientHeight==t.cont.scrollHeight&&(r=!0));r!=!0&&(t.conf.dnd.scroll_tm=window.setTimeout(function(){t._dndScroll(n,!0)},t.conf.dnd.scroll_time))};typeof addEventListener=="function"?this.cont.addEventListener("mousedown",this._dndOnMouseDown,!1):this.cont.attachEvent("onmousedown",this._dndOnMouseDown);this._dndUnload=function(){typeof addEventListener=="function"?this.cont.removeEventListener("mousedown",this._dndOnMouseDown,!1):this.cont.detachEvent("onmousedown",this._dndOnMouseDown);t=null};n=null};dhtmlXTreeView.prototype.modules.ctx={init:"_ctxInit",unload:"_ctxUnload"};dhtmlXTreeView.prototype.enableContextMenu=function(n){this.conf.ctx=window.dhx4.s2b(n)};dhtmlXTreeView.prototype._ctxInit=function(n){var t=this;this._ctxCall=function(n){var i;if(t.conf.ctx==!0){n=n||event;i=n.target||n.srcElement;i.tagName.toLowerCase()=="i"&&(i=i.parentNode);var r=i.parentNode._itemId||i.parentNode.parentNode._itemId,u=window.dhx4.absLeft(i)+(typeof n.offsetX=="undefined"?n.layerX:n.offsetX),f=window.dhx4.absTop(i)+(typeof n.offsetY=="undefined"?n.layerY:n.offsetY);if(r!=null&&t._callPublicEvent("onContextMenu",[r,u,f,n])!==!0)return n.preventDefault&&n.preventDefault(),n.cancelBubble=!0,n.returnValue=!1,!1}};typeof addEventListener=="function"?this.cont.addEventListener("contextmenu",this._ctxCall,!1):this.cont.attachEvent("oncontextmenu",this._ctxCall);this._ctxUnload=function(){typeof addEventListener=="function"?this.cont.removeEventListener("contextmenu",this._ctxCall,!1):this.cont.detachEvent("oncontextmenu",this._ctxCall);t=null};this.enableContextMenu(n.context_menu)};dhtmlXTreeView.prototype.modules.dynload={init:"_dynLoadInit"};dhtmlXTreeView.prototype._dynLoadInit=function(){this.attachEvent("_onItemInited",function(n,t){if(this.items[n].kids_request=window.dhx4.s2b(t.kids),this.items[n].kids_request==!0&&this._initKidsNode(n),this.items[n].opened==!0&&this.items[n].kids_request==!0){var i=this;window.setTimeout(function(){i._dynLoadRequest(n);i=null},100)}});this.attachEvent("_onBeforeOpen",function(n){return this.items[n].opened!=!0&&this.items[n].kids_request==!0&&this._dynLoadRequest(n)!=!0?(this.items[n].half_opened=!0,this._signUpdate(n),!1):!0})};dhtmlXTreeView.prototype._dynLoadRequest=function(n){if(typeof this.conf.autoload.mode=="function")return this.conf.autoload.mode.apply(window,[n]),!0;if(this.conf.autoload.url!=null){this._dhxdataload.onBeforeXLS=function(t){return{url:t.replace(/\{id\}/gi,n)}};var t=this;return this.items[n].kids_loading_tm=window.setTimeout(function(){t._dynLoadUpdateIcon(n,!0);t=null},100),this.loadStruct(this.conf.autoload.url,function(){window.clearTimeout(this.items[n].kids_loading_tm);this._dynLoadUpdateIcon(n,!1);this.items[n].half_opened&&(this.items[n].half_opened=!1,this._openCloseItem(n,!0))}),this.items[n].kids_request=!1,!1}};dhtmlXTreeView.prototype._dynLoadUpdateIcon=function(n,t){this.items[n].loading=t==!0;this.items[n].loading==!0?this.items[n].item.childNodes[0].childNodes[this.conf.idx.icon].innerHTML="<i class='"+this.conf.icons.prefix+" "+this.conf.icons.loading+"'><\/i>":this._iconUpdate(n)};String.prototype._dhx_trim=function(){return this.replace(/&nbsp;/g," ").replace(/(^[ \t]*)|([ \t]*$)/g,"")};dhtmlxArray._master={_dhx_find:function(n){for(var t=0;t<this.length;t++)if(n==this[t])return t;return-1},_dhx_insertAt:function(n,t){this[this.length]=null;for(var i=this.length-1;i>=n;i--)this[i]=this[i-1];this[n]=t},_dhx_removeAt:function(n){this.splice(n,1)},_dhx_swapItems:function(n,t){var i=this[n];this[n]=this[t];this[t]=i}};dhtmlXGridObject.prototype={getRowAttribute:function(n,t){return this.getRowById(n)._attrs[t]},setRowAttribute:function(n,t,i){this.getRowById(n)._attrs[t]=i},isTreeGrid:function(){return this.cellType._dhx_find("tree")!=-1},setRowHidden:function(n,t){var f=dhx4.s2b(t),i=this.getRowById(n),u,r;if(i){if(i.expand===""&&this.collapseKids(i),t&&i.style.display!="none"){if(i.style.display="none",u=this.selectedRows._dhx_find(i),u!=-1){for(i.className=i.className.replace("rowselected",""),r=0;r<i.childNodes.length;r++)i.childNodes[r].className=i.childNodes[r].className.replace(/cellselected/g,"");this.selectedRows._dhx_removeAt(u)}this.callEvent("onGridReconstructed",[])}t||i.style.display!="none"||(i.style.display="",this.callEvent("onGridReconstructed",[]));this.callEvent("onRowHide",[n,t]);this.setSizes()}},setColumnHidden:function(n,t){if(!this.hdr.rows.length)return this._ivizcol||(this._ivizcol=[]),this._ivizcol[n]=t;this.fldSorted&&this.fldSorted.cellIndex==n&&t&&(this.sortImg.style.display="none");var i=dhx4.s2b(t);if(i){if(this._hrrar){if(this._hrrar[n])return}else this._hrrar=[];this._hrrar[n]="display:none;";this._hideShowColumn(n,"none")}else{if(!this._hrrar||!this._hrrar[n])return;this._hrrar[n]="";this._hideShowColumn(n,"")}this.fldSorted&&this.fldSorted.cellIndex==n&&!t&&(this.sortImg.style.display="inline");this.setSortImgPos();this.callEvent("onColumnHidden",[n,t])},isColumnHidden:function(n){return this._hrrar&&this._hrrar[n]?!0:!1},setColumnsVisibility:function(n){if(n&&(this._ivizcol=n.split(this.delim)),this.hdr.rows.length&&this._ivizcol)for(var t=0;t<this._ivizcol.length;t++)this.setColumnHidden(t,this._ivizcol[t])},_fixHiddenRowsAll:function(n,t,i,r,u){var s,o,f,e;for(u=u||"_cellIndex",s=n.rows.length,o=0;o<s;o++)if(f=n.rows[o].childNodes,f.length!=this._cCount){for(e=0;e<f.length;e++)if(f[e][u]==t){f[e].style[i]=r;break}}else f[t].style[i]=r},_hideShowColumn:function(n,t){var u=n,r,i;this.hdr.rows[1]&&this.hdr.rows[1]._childIndexes&&this.hdr.rows[1]._childIndexes[n]!=n&&(u=this.hdr.rows[1]._childIndexes[n]);t=="none"?(this.hdr.rows[0].cells[n]._oldWidth=this.hdr.rows[0].cells[n].style.width||this.initCellWidth[n]+"px",this.hdr.rows[0].cells[n]._oldWidthP=this.cellWidthPC[n],this.obj.rows[0].cells[n].style.width="0px",i={rows:[this.obj.rows[0]]},this.forEachRow(function(n){this.rowsAr[n].tagName=="TR"&&i.rows.push(this.rowsAr[n])}),this._fixHiddenRowsAll(i,n,"display","none"),this.isTreeGrid()&&this._fixHiddenRowsAllTG(n,"none"),(_isOpera&&_OperaRv<9||_isKHTML||_isFF)&&this._fixHiddenRowsAll(this.hdr,n,"display","none","_cellIndexS"),this.ftr&&this._fixHiddenRowsAll(this.ftr.childNodes[0],n,"display","none"),this._fixHiddenRowsAll(this.hdr,n,"whiteSpace","nowrap","_cellIndexS"),this.cellWidthPX.length||this.cellWidthPC.length||(this.cellWidthPX=[].concat(this.initCellWidth)),this.cellWidthPX[n]&&(this.cellWidthPX[n]=0),this.cellWidthPC[n]&&(this.cellWidthPC[n]=0)):this.hdr.rows[0].cells[n]._oldWidth&&(r=this.hdr.rows[0].cells[n],(_isOpera||_isKHTML||_isFF)&&this._fixHiddenRowsAll(this.hdr,n,"display","","_cellIndexS"),this.ftr&&this._fixHiddenRowsAll(this.ftr.childNodes[0],n,"display",""),i={rows:[this.obj.rows[0]]},this.forEachRow(function(n){this.rowsAr[n].tagName=="TR"&&i.rows.push(this.rowsAr[n])}),this._fixHiddenRowsAll(i,n,"display",""),this.isTreeGrid()&&this._fixHiddenRowsAllTG(n,""),this._fixHiddenRowsAll(this.hdr,n,"whiteSpace","normal","_cellIndexS"),r._oldWidthP&&(this.cellWidthPC[n]=r._oldWidthP),r._oldWidth&&(this.cellWidthPX[n]=parseInt(r._oldWidth)));!t&&this._realfake&&this.setColumnSizes(this.entBox.clientWidth);this.setSizes();_isIE||_isFF||(this.obj.border=1,this.obj.border=0)},enableColSpan:function(n){this._ecspn=dhx4.s2b(n)},enableRowsHover:function(n,t){this._unsetRowHover(!1,!0);this._hvrCss=t;dhx4.s2b(n)?this._elmnh||(this.obj._honmousemove=this.obj.onmousemove,this.obj.onmousemove=this._setRowHover,_isIE?this.obj.onmouseleave=this._unsetRowHover:this.obj.onmouseout=this._unsetRowHover,this._elmnh=!0):this._elmnh&&(this.obj.onmousemove=this.obj._honmousemove,_isIE?this.obj.onmouseleave=null:this.obj.onmouseout=null,this._elmnh=!1)},enableEditEvents:function(n,t,i){this._sclE=dhx4.s2b(n);this._dclE=dhx4.s2b(t);this._f2kE=dhx4.s2b(i)},enableLightMouseNavigation:function(n){dhx4.s2b(n)?this._elmn||(this.entBox._onclick=this.entBox.onclick,this.entBox.onclick=function(){return!0},this.obj._onclick=this.obj.onclick,this.obj.onclick=function(n){var t=this.grid.getFirstParentOfType(n?n.target:event.srcElement,"TD");t&&(this.grid.editStop(),this.grid.doClick(t),this.grid.editCell(),(n||event).cancelBubble=!0)},this.obj._onmousemove=this.obj.onmousemove,this.obj.onmousemove=this._autoMoveSelect,this._elmn=!0):this._elmn&&(this.entBox.onclick=this.entBox._onclick,this.obj.onclick=this.obj._onclick,this.obj.onmousemove=this.obj._onmousemove,this._elmn=!1)},_unsetRowHover:function(n,t){if(that=t?this:this.grid,that._lahRw&&that._lahRw!=t){for(var i=0;i<that._lahRw.childNodes.length;i++)that._lahRw.childNodes[i].className=that._lahRw.childNodes[i].className.replace(that._hvrCss,"");that._lahRw=null}},_setRowHover:function(n){var t=this.grid.getFirstParentOfType(n?n.target:event.srcElement,"TD"),i;if(t&&t.parentNode!=this.grid._lahRw){if(this.grid._unsetRowHover(0,t),t=t.parentNode,!t.idd||t.idd=="__filler__")return;for(i=0;i<t.childNodes.length;i++)t.childNodes[i].className+=" "+this.grid._hvrCss;this.grid._lahRw=t}this._honmousemove(n)},_autoMoveSelect:function(n){if(!this.grid.editor){var t=this.grid.getFirstParentOfType(n?n.target:event.srcElement,"TD");t.parentNode.idd&&this.grid.doClick(t,!0,0)}this._onmousemove(n)},enableDistributedParsing:function(n,t,i){dhx4.s2b(n)?(this._ads_count=t||10,this._ads_time=i||250):this._ads_count=0},destructor:function(){var t,n,i;if(this.editStop(!0),this._sizeTime&&(this._sizeTime=window.clearTimeout(this._sizeTime)),this.entBox.className=(this.entBox.className||"").replace(/gridbox.*/,""),this.formInputs)for(n=0;n<this.formInputs.length;n++)this.parentForm.removeChild(this.formInputs[n]);for(n=0;n<this.rowsCol.length;n++)this.rowsCol[n]&&(this.rowsCol[n].grid=null);for(n in this.rowsAr)this.rowsAr[n]&&(this.rowsAr[n]=null);this.rowsCol=new dhtmlxArray;this.rowsAr={};this.entBox.innerHTML="";i=function(){};this.entBox.onclick=this.entBox.onmousedown=this.entBox.onbeforeactivate=this.entBox.onbeforedeactivate=this.entBox.onbeforedeactivate=this.entBox.onselectstart=i;this.setSizes=this._update_srnd_view=this.callEvent=i;this.entBox.grid=this.objBox.grid=this.hdrBox.grid=this.obj.grid=this.hdr.grid=null;this._fake&&(this.globalBox.innerHTML="",this._fake.setSizes=this._fake._update_srnd_view=this._fake.callEvent=i,this.globalBox.onclick=this.globalBox.onmousedown=this.globalBox.onbeforeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onselectstart=i);for(t in this)this[t]&&this[t].m_obj&&(this[t].m_obj=null),this[t]=null;return this==globalActiveDHTMLGridObject&&(globalActiveDHTMLGridObject=null),null},getSortingState:function(){var n=[];return this.fldSorted&&(n[0]=this.fldSorted._cellIndex,n[1]=this.sortImg.className=="dhxgrid_sort_desc"?"des":"asc"),n},enableAutoHeight:function(n,t,i){this._ahgr=dhx4.s2b(n);this._ahgrF=dhx4.s2b(i);this._ahgrM=t||null;arguments.length==1&&(this.objBox.style.overflowY=n?"hidden":"auto");t=="auto"&&(this._ahgrM=null,this._ahgrMA=!0,this._setAutoResize())},enableStableSorting:function(n){this._sst=dhx4.s2b(n);this.rowsCol.stablesort=function(n){for(var t,u,i=this.length-1,r=0;r<this.length-1;r++){for(t=0;t<i;t++)n(this[t],this[t+1])>0&&(u=this[t],this[t]=this[t+1],this[t+1]=u);i--}}},enableKeyboardSupport:function(n){this._htkebl=!dhx4.s2b(n)},enableContextMenu:function(n){this._ctmndx=n},setScrollbarWidthCorrection:function(){},enableTooltips:function(n){this._enbTts=n.split(",");for(var t=0;t<this._enbTts.length;t++)this._enbTts[t]=dhx4.s2b(this._enbTts[t])},enableResizing:function(n){this._drsclmn=n.split(",");for(var t=0;t<this._drsclmn.length;t++)this._drsclmn[t]=dhx4.s2b(this._drsclmn[t])},setColumnMinWidth:function(n,t){arguments.length==2?(this._drsclmW||(this._drsclmW=[]),this._drsclmW[t]=n):this._drsclmW=n.split(",")},enableCellIds:function(n){this._enbCid=dhx4.s2b(n)},lockRow:function(n,t){var i=this.getRowById(n);i&&(i._locked=dhx4.s2b(t),this.cell&&this.cell.parentNode.idd==n&&this.editStop())},_getRowArray:function(n){for(var r,i=[],t=0;t<n.childNodes.length;t++)r=this.cells3(n,t),i[t]=r.getValue();return i},setDateFormat:function(n,t){this._dtmask=n;this._dtmask_inc=t},setNumberFormat:function(n,t,i,r){var u=n.replace(/[^0\,\.]*/g,""),f=u.indexOf("."),e,o,s;f>-1&&(f=u.length-f-1);e=u.indexOf(",");e>-1&&(e=u.length-f-2-e);typeof i!="string"&&(i=this.i18n.decimal_separator);typeof r!="string"&&(r=this.i18n.group_separator);o=n.split(u)[0];s=n.split(u)[1];this._maskArr[t]=[f,e,o,s,i,r]},_aplNFb:function(n,t){var r=this._maskArr[t],i;return r?(i=parseFloat(n.toString().replace(/[^0-9]*/g,"")),n.toString().substr(0,1)=="-"&&(i=i*-1),r[0]>0&&(i=i/Math.pow(10,r[0])),i):n},_aplNF:function(n,t){var i=this._maskArr[t],u,r;if(!i)return n;if(u=(parseFloat(n)<0?"-":"")+i[2],n=Math.abs(Math.round(parseFloat(n)*Math.pow(10,i[0]>0?i[0]:0))).toString(),n=(n.length<i[0]?Math.pow(10,i[0]+1-n.length).toString().substr(1,i[0]+1)+n.toString():n).split("").reverse(),n[i[0]]=(n[i[0]]||"0")+i[4],i[1]>0)for(r=(i[0]>0?0:1)+i[0]+i[1];r<n.length;r+=i[1])n[r]+=i[5];return u+n.reverse().join("")+i[3]},_launchCommands:function(n){for(var r,i,t=0;t<n.length;t++){for(r=[],i=0;i<n[t].childNodes.length;i++)n[t].childNodes[i].nodeType==1&&(r[r.length]=n[t].childNodes[i].firstChild.data);this[n[t].getAttribute("command")].apply(this,r)}},_parseHead:function(n){var h=dhx4.ajax.xpath("./head",n),u,t,r,c,k,y,s,i,p,l;if(h.length){var e=dhx4.ajax.xpath("./column",h[0]),o=dhx4.ajax.xpath("./settings",h[0]),w="setInitWidths",a=!1;if(o[0])for(u=0;u<o[0].childNodes.length;u++)switch(o[0].childNodes[u].tagName){case"colwidth":o[0].childNodes[u].firstChild&&o[0].childNodes[u].firstChild.data=="%"&&(w="setInitWidthsP");break;case"splitat":a=o[0].childNodes[u].firstChild?o[0].childNodes[u].firstChild.data:!1}if(this._launchCommands(dhx4.ajax.xpath("./beforeInit/call",h[0])),e.length>0){this.hdr.rows.length>0&&this.clearAll(!0);var f=[[],[],[],[],[],[],[],[],[]],b=["","width","type","align","sort","color","format","hidden","id"],v=["",w,"setColTypes","setColAlign","setColSorting","setColumnColor","","","setColumnIds"];for(t=0;t<e.length;t++){for(i=1;i<b.length;i++)f[i].push(e[t].getAttribute(b[i]));f[0].push((e[t].firstChild?e[t].firstChild.data:"").replace(/^\s*((\s\S)*.+)\s*$/gi,"$1"))}for(this.setHeader(f[0]),t=0;t<v.length;t++)v[t]&&this[v[t]](f[t].join(this.delim));for(t=0;t<e.length;t++)if(this.cellType[t].indexOf("co")==0||this.cellType[t]=="clist"){if(r=dhx4.ajax.xpath("./option",e[t]),r.length)if(c=[],this.cellType[t]=="clist"){for(i=0;i<r.length;i++)c[c.length]=r[i].firstChild?r[i].firstChild.data:"";this.registerCList(t,c)}else for(k=this.getCombo(t),i=0;i<r.length;i++)k.put(r[i].getAttribute("value"),r[i].firstChild?r[i].firstChild.data:"")}else f[6][t]&&(this.cellType[t].toLowerCase().indexOf("calendar")!=-1||this.fldSort[t]=="date"?this.setDateFormat(f[6][t]):this.setNumberFormat(f[6][t],t));this.init();y=f[7].join(this.delim);this.setColHidden&&y.replace(/,/g,"")!=""&&this.setColHidden(y);a&&this.splitAt&&this.splitAt(a)}this._launchCommands(dhx4.ajax.xpath("./afterInit/call",h[0]))}if(s=dhx4.ajax.xpath("//rows/userdata",n),s.length>0)for(this.UserData.gridglobaluserdata||(this.UserData.gridglobaluserdata=new Hashtable),i=0;i<s.length;i++){for(p="",l=0;l<s[i].childNodes.length;l++)p+=s[i].childNodes[l].nodeValue;this.UserData.gridglobaluserdata.put(s[i].getAttribute("name"),p)}},getCheckedRows:function(n){var t=[];return this.forEachRowA(function(i){var r=this.cells(i,n);r.changeState&&r.getValue()!=0&&t.push(i)},!0),t.join(",")},checkAll:function(){for(var t=arguments.length?arguments[0]:1,n=0;n<this.getColumnsNum();n++)this.getColType(n)=="ch"&&this.setCheckedRows(n,t)},uncheckAll:function(){this.checkAll(0)},setCheckedRows:function(n,t){this.forEachRowA(function(i){this.cells(i,n).isCheckbox()&&this.cells(i,n).setValue(t)})},_drawTooltip:function(n){var i=this.grid.getFirstParentOfType(n?n.target:event.srcElement,"TD"),r,u,t;return!i||this.grid.editor&&this.grid.editor.cell==i?!0:(r=i.parentNode,!r.idd||r.idd=="__filler__")?void 0:(u=n?n.target:event.srcElement,r.idd==window.unknown)?!0:this.grid.callEvent("onMouseOver",[r.idd,i._cellIndex,n||window.event])?this.grid._enbTts&&!this.grid._enbTts[i._cellIndex]?(u.title&&(u.title=""),!0):i._cellIndex>=this.grid._cCount?void 0:(t=this.grid.cells3(r,i._cellIndex),!t||!t.cell||!t.cell._attrs)?void 0:(u._title&&(t.cell.title=""),t.cell._attrs.title||(u._title=!0),t&&(u.title=t.cell._attrs.title||(t.getTitle?t.getTitle():(t.getValue()||"").toString().replace(/<[^>]*>/gi,""))),!0):!0},enableCellWidthCorrection:function(n){_isFF&&(this._wcorr=parseInt(n))},getAllRowIds:function(n){for(var i=[],t=0;t<this.rowsBuffer.length;t++)this.rowsBuffer[t]&&i.push(this.rowsBuffer[t].idd);return i.join(n||this.delim)},getAllItemIds:function(){return this.getAllRowIds()},setColspan:function(n,t,i){var r,f,o,e,c,u;if(this._ecspn){if(r=this.getRowById(n),r._childIndexes&&r.childNodes[r._childIndexes[t]]){var e=r._childIndexes[t],s=r.childNodes[e],h=s.colSpan;if(s.colSpan=1,h&&h!=1)for(f=1;f<h;f++)o=document.createElement("TD"),s.nextSibling?r.insertBefore(o,s.nextSibling):r.appendChild(o),r._childIndexes[t+f]=e+f,o._cellIndex=t+f,o.style.textAlign=this.cellAlign[f],o.style.verticalAlign=this.cellVAlign[f],s=o,this.cells3(r,t+f).setValue("");for(u=t*1+1*h;u<r._childIndexes.length;u++)r._childIndexes[u]+=(h-1)*1}if(i&&i>1){if(r._childIndexes)e=r._childIndexes[t];else for(e=t,r._childIndexes=[],u=0;u<r.childNodes.length;u++)r._childIndexes[u]=u;for(r.childNodes[e].colSpan=i,u=1;u<i;u++)r._childIndexes[r.childNodes[e+1]._cellIndex]=e,r.removeChild(r.childNodes[e+1]);for(c=r.childNodes[r._childIndexes[t]]._cellIndex,u=c*1+1*i;u<r._childIndexes.length;u++)r._childIndexes[u]-=i-1}}},preventIECaching:function(n){dhx4.ajax.cache=!n},enableColumnAutoSize:function(n){this._eCAS=dhx4.s2b(n)},_onHeaderDblClick:function(n){var t=this.grid,i=t.getFirstParentOfType(_isIE?event.srcElement:n.target,"TD");if(!t._eCAS)return!1;t.adjustColumnSize(i._cellIndexS)},adjustColumnSize:function(n,t){var u,o,i,h,r,e;if(!this._hrrar||!this._hrrar[n]){for(this._notresize=!0,u=0,this._setColumnSizeR(n,20),o=1;o<this.hdr.rows.length;o++)i=this.hdr.rows[o],i=i.childNodes[i._childIndexes?i._childIndexes[n]:n],i&&(!i.colSpan||i.colSpan<2)&&i._cellIndex==n&&(i.childNodes[0]&&i.childNodes[0].className=="hdrcell"&&(i=i.childNodes[0]),u=Math.max(u,i.scrollWidth));var c=this.obj.rows.length,s=0,l=this.cellType._dhx_find("tree"),f=document.createElement("DIV");for(f.className="dhx_grid_adjust",f.style.cssText="width:auto;height:auto;visibility:hidden; position:absolute; top:0px; left:0px; overflow:hidden; white-space:nowrap;",document.body.appendChild(f),h=1;h<c;h++)if(r=this.obj.rows[h],e=n,this.rowsAr[r.idd]){if(r._childIndexes){if(r._childIndexes[n]==r._childIndexes[n+1])continue;e=r._childIndexes[n]}r.childNodes[e]&&r.childNodes[e]._cellIndex==n&&(f.innerHTML=r.childNodes[e].innerText||r.childNodes[e].textContent||"",s=f.offsetWidth,this._h2&&n==l&&(s+=this._h2.get[r.idd].level*22),s>u&&(u=s))}document.body.removeChild(f);u+=20+(t||0);this._setColumnSizeR(n,u);this._notresize=!1;this.setSizes()}},detachHeader:function(n,t){t=t||this.hdr;var i=t.rows[n+1];i&&i.parentNode.removeChild(i);this.setSizes()},detachFooter:function(n){this.detachHeader(n,this.ftr)},attachHeader:function(n,t,i){if(typeof n=="string"&&(n=this._eSplit(n)),typeof t=="string"&&(t=t.split(this.delim)),i=i||"_aHead",this.hdr.rows.length){if(n)this._createHRow([n,t],this[i=="_aHead"?"hdr":"ftr"]);else if(this[i])for(var r=0;r<this[i].length;r++)this.attachHeader.apply(this,this[i][r])}else this[i]||(this[i]=[]),this[i][this[i].length]=[n,t,i]},_createHRow:function(n,t){var o,a,h,e,i,u,s,f,r,l,y;if(!t){for(this.entBox.style.position!="absolute"&&(this.entBox.style.position="relative"),e=document.createElement("DIV"),e.className="c_ftr".substr(2),this.entBox.appendChild(e),r=document.createElement("TABLE"),r.cellPadding=r.cellSpacing=0,_isIE&&_isIE!=8||(r.width="100%",r.style.paddingRight="20px"),r.style.marginRight="20px",r.style.tableLayout="fixed",e.appendChild(r),r.appendChild(document.createElement("TBODY")),this.ftr=t=r,o=r.insertRow(0),a=this.hdrLabels.length<=1?n[0].length:this.hdrLabels.length,i=0;i<a;i++)o.appendChild(document.createElement("TH")),o.childNodes[i]._cellIndex=i;_isIE&&_isIE<8?o.style.position="absolute":o.style.height="auto"}for(h=n[1],e=document.createElement("TR"),t.rows[0].parentNode.appendChild(e),i=0;i<n[0].length;i++){if(n[0][i]=="#cspan"){u=e.cells[e.cells.length-1];u.colSpan=(u.colSpan||1)+1;continue}if(n[0][i]=="#rspan"&&t.rows.length>1){for(var v=t.rows.length-2,c=!1,u=null;!c;){for(u=t.rows[v],s=0;s<u.cells.length;s++)if(u.cells[s]._cellIndex==i){c=s+1;break}v--}u=u.cells[c-1];u.rowSpan=(u.rowSpan||1)+1;continue}f=document.createElement("TD");f._cellIndex=f._cellIndexS=i;this._hrrar&&this._hrrar[i]&&!_isIE&&(f.style.display="none");typeof n[0][i]=="object"?f.appendChild(n[0][i]):(f.innerHTML=this.forceDivInHeader?"<div class='hdrcell'>"+(n[0][i]||"&nbsp;")+"<\/div>":n[0][i]||"&nbsp;",(n[0][i]||"").indexOf("#")!=-1&&(r=n[0][i].match(/(^|{)#([^}]+)(}|$)/),r&&(l="_in_header_"+r[2],this[l]&&this[l](this.forceDivInHeader?f.firstChild:f,i,n[0][i].split(r[0])))));h&&(f.style.cssText=h[i]);e.appendChild(f)}y=t;_isKHTML&&(t._kTimer&&window.clearTimeout(t._kTimer),t._kTimer=window.setTimeout(function(){t.rows[1].style.display="none";window.setTimeout(function(){t.rows[1].style.display=""},1)},500))},attachFooter:function(n,t){this.attachHeader(n,t,"_aFoot")},setCellExcellType:function(n,t,i){this.changeCellType(this.getRowById(n),t,i)},getCellExcellType:function(n,t){var i=this.getRowById(n),r=this.cells3(i,t);return r.cell._cellType||this.cellType[t]},changeCellType:function(n,t,i){var u,r;i=i||this.cellType[t];r=this.cells3(n,t);u=r.getValue();r.cell._cellType=i;r=this.cells3(n,t);r.setValue(u)},setRowExcellType:function(n,t){for(var r=this.rowsAr[n],i=0;i<r.childNodes.length;i++)this.changeCellType(r,i,t)},setColumnExcellType:function(n,t){for(var i=0;i<this.rowsBuffer.length;i++)this.rowsBuffer[i]&&this.rowsBuffer[i].tagName=="TR"&&this.changeCellType(this.rowsBuffer[i],n,t);this.cellType[n]=="math"?this._strangeParams[i]=t:this.cellType[n]=t},forEachRow:function(n){for(var t in this.rowsAr)this.rowsAr[t]&&this.rowsAr[t].idd&&n.apply(this,[this.rowsAr[t].idd])},forEachRowA:function(n){for(var t=0;t<this.rowsBuffer.length;t++)this.rowsBuffer[t]&&n.call(this,this.render_row(t).idd)},forEachCell:function(n,t){var r=this.getRowById(n),i;if(r)for(i=0;i<this._cCount;i++)t(this.cells3(r,i),i)},enableAutoWidth:function(n,t,i){this._awdth=[dhx4.s2b(n),parseInt(t||99999),parseInt(i||0)];arguments.length==1&&(this.objBox.style.overflowX=n?"hidden":"auto")},updateFromXML:function(n,t,i,r){typeof t=="undefined"&&(t=!0);this._refresh_mode=[!0,t,i];this.load(n,r)},_refreshFromXML:function(n){var o,u,i,t,e,s,f;this._f_rowsBuffer&&this.filterBy(0,"");reset=!1;window.eXcell_tree&&(eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue,eXcell_tree.prototype.setValue=function(n){var t=this.grid._h2.get[this.cell.parentNode.idd];t&&this.cell.parentNode.valTag?this.setLabel(n):this.setValueX(n)});var c=this.cellType._dhx_find("tree"),h=dhx4.ajax.xmltop("rows",n),e=h.getAttribute("parent")||0,r={};for(this._refresh_mode[2]&&(c!=-1?this._h2.forEachChild(e,function(n){r[n.id]=!0},this):this.forEachRow(function(n){r[n]=!0})),o=dhx4.ajax.xpath("//row",h),u=0;u<o.length;u++)i=o[u],t=i.getAttribute("id"),r[t]=!1,e=i.parentNode.getAttribute("id")||e,this.rowsAr[t]&&this.rowsAr[t].tagName!="TR"?(this._h2?this._h2.get[t].buff.data=i:this.rowsBuffer[this.getRowIndex(t)].data=i,this.rowsAr[t]=i):this.rowsAr[t]?(this._process_xml_row(this.rowsAr[t],i,-1),this._postRowProcessing(this.rowsAr[t],!0),this._fake&&this._fake.rowsAr[t]&&this._fake._process_xml_row(this._fake.rowsAr[t],i,-1)):this._refresh_mode[1]&&(s={idd:t,data:i,_parser:this._process_xml_row,_locator:this._get_xml_data},f=this.rowsBuffer.length,this._refresh_mode[1]=="top"?(this.rowsBuffer.unshift(s),f=0):this.rowsBuffer.push(s),this._h2?(reset=!0,this._h2.add(t,i.parentNode.getAttribute("id")||i.parentNode.getAttribute("parent")).buff=this.rowsBuffer[this.rowsBuffer.length-1]):this._srnd&&(reset=!0),this.rowsAr[t]=i,i=this.render_row(f),this._insertRowAt(i,f?-1:0));if(this._refresh_mode[2])for(t in r)r[t]&&this.rowsAr[t]&&this.deleteRow(t);this._refresh_mode=null;window.eXcell_tree&&(eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX);reset&&(this._h2?this._renderSort():this.render_dataset());this._f_rowsBuffer&&(this._f_rowsBuffer=null,this.filterByAll())},getCustomCombo:function(n,t){var i=this.cells(n,t).cell;return i._combo||(i._combo=new dhtmlXGridComboObject),i._combo},setTabOrder:function(n){var i=n.split(this.delim),r,t;for(this._tabOrder=[],r=this._cCount||n.length,t=0;t<r;t++)i[t]={c:parseInt(i[t]),ind:t};for(i.sort(function(n,t){return n.c>t.c?1:-1}),t=0;t<r;t++)this._tabOrder[i[t].ind]=i[t+1]&&typeof i[t].c!="undefined"?i[t+1].ind:(i[0].ind+1)*-1},i18n:{loading:"Loading",decimal_separator:".",group_separator:","},_key_events:{k13_1_0:function(){var n=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[n+1],this.cell._cellIndex,!0)},k13_0_1:function(){var n=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[n-1],this.cell._cellIndex,!0)},k13_0_0:function(){this.editStop();this.callEvent("onEnter",[this.row?this.row.idd:null,this.cell?this.cell._cellIndex:null]);this._still_active=!0},k9_0_0:function(){if(this.editStop(),!this.callEvent("onTab",[!0]))return!0;var n=this._getNextCell(null,1);n&&(this.selectCell(n.parentNode,n._cellIndex,this.row!=n.parentNode,!1,!0),this._still_active=!0)},k9_0_1:function(){if(this.editStop(),!this.callEvent("onTab",[!1]))return!1;var n=this._getNextCell(null,-1);n&&(this.selectCell(n.parentNode,n._cellIndex,this.row!=n.parentNode,!1,!0),this._still_active=!0)},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var n=this.cells4(this.cell);if(!n.changeState||n.changeState()===!1)return!1},k27_0_0:function(){this.editStop(!0)},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){if(!this.editor&&this.isTreeGrid())this.collapseKids(this.row);else return!1},k39_0_0:function(){if(!this.editor&&this.isTreeGrid())this.expandKids(this.row);else return!1},k40_0_0:function(){var n=this._realfake?this._fake:this,t,i;if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(!this.row.idd)return;if(t=Math.max(n._r_select||0,this.getRowIndex(this.row.idd)),i=this._nextRow(t,1),i)n._r_select=null,this.selectCell(i,this.cell._cellIndex,!0),n.pagingOn&&n.showRow(i.idd);else{if(!this.callEvent("onLastRow",[]))return!1;this._key_events.k34_0_0.apply(this,[]);this.pagingOn&&this.rowsCol[t+1]&&this.selectCell(t+1,0,!0)}}this._still_active=!0},k38_0_0:function(){var i=this._realfake?this._fake:this,n,t;if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(!this.row.idd)return;n=this.getRowIndex(this.row.idd)+1;n==-1||this.pagingOn&&n==1?this._key_events.k33_0_0.apply(this,[]):(t=this._nextRow(n-1,-1),this.selectCell(t,this.cell._cellIndex,!0),i.pagingOn&&t&&i.showRow(t.idd))}this._still_active=!0}},_build_master_row:function(){for(var t=document.createElement("DIV"),n=["<table><tr>"],i=0;i<this._cCount;i++)n.push("<td><\/td>");n.push("<\/tr><\/table>");t.innerHTML=n.join("");this._master_row=t.firstChild.rows[0]},_prepareRow:function(n){var t,i;for(this._master_row||this._build_master_row(),t=this._master_row.cloneNode(!0),i=0;i<t.childNodes.length;i++)t.childNodes[i]._cellIndex=i,this._enbCid&&(t.childNodes[i].id="c_"+n+"_"+i),this.dragAndDropOff&&this.dragger.addDraggableItem(t.childNodes[i],this);return t.idd=n,t.grid=this,t},_process_jsarray_row:function(n,t){n._attrs={};for(var i=0;i<n.childNodes.length;i++)n.childNodes[i]._attrs={};return this._fillRow(n,this._c_order?this._swapColumns(t):t),n},_get_jsarray_data:function(n,t){return n[t]},_process_json_row:function(n,t){return t=this._c_order?this._swapColumns(t.data):t.data,this._process_some_row(n,t)},_process_some_row:function(n,t){n._attrs={};for(var i=0;i<n.childNodes.length;i++)n.childNodes[i]._attrs={};return this._fillRow(n,t),n},_get_json_data:function(n,t){return n.data[t]},_process_js_row:function(n,t){for(var r=[],i=0;i<this.columnIds.length;i++)r[i]=t[this.columnIds[i]],r[i]||r[i]===0||(r[i]="");return this._process_some_row(n,r),n._attrs=t,n},_get_js_data:function(n,t){return n[this.columnIds[t]]},_process_csv_row:function(n,t){n._attrs={};for(var i=0;i<n.childNodes.length;i++)n.childNodes[i]._attrs={};return this._fillRow(n,this._c_order?this._swapColumns(t.split(this.csv.cell)):t.split(this.csv.cell)),n},_get_csv_data:function(n,t){return n.split(this.csv.cell)[t]},_process_store_row:function(n,t){for(var r,u=[],i=0;i<this.columnIds.length;i++)u[i]=t[this.columnIds[i]];for(r=0;r<n.childNodes.length;r++)n.childNodes[r]._attrs={};n._attrs=t;this._fillRow(n,u)},_process_xml_row:function(n,t){var o=dhx4.ajax.xpath(this.xml.cell,t),c=[],f,u,s,i,r,e,h;if(n._attrs=this._xml_attrs(t),this._ud_enabled)for(f=dhx4.ajax.xpath("./userdata",t),u=f.length-1;u>=0;u--){for(s="",i=0;i<f[u].childNodes.length;i++)s+=f[u].childNodes[i].nodeValue;this.setUserData(n.idd,f[u].getAttribute("name"),s)}for(i=0;i<o.length;i++)(r=o[this._c_order?this._c_order[i]:i],r)&&(e=n._childIndexes?n._childIndexes[i]:i,h=r.getAttribute("type"),n.childNodes[e]&&(h&&(n.childNodes[e]._cellType=h),n.childNodes[e]._attrs=this._xml_attrs(r)),r.getAttribute("xmlcontent")||(r=r.firstChild?r.firstChild.wholeText||r.firstChild.data:""),c.push(r));for(i<o.length;i<n.childNodes.length;i++)n.childNodes[i]._attrs={};return n.parentNode&&n.parentNode.tagName=="row"&&(n._attrs.parent=n.parentNode.getAttribute("idd")),this._fillRow(n,c),n},_get_xml_data:function(n,t){for(n=n.firstChild;;){if(!n)return"";if(n.tagName=="cell"&&t--,t<0)break;n=n.nextSibling}return n.firstChild?n.firstChild.data:""},_fillRow:function(n,t){var i;for(this.editor&&this.editor.parentNode&&this.editor.parentNode.idd==n.idd&&this.editStop(),i=0;i<n.childNodes.length;i++)if(i<t.length||this.defVal[i]){var u=n.childNodes[i]._cellIndex,r=t[u],f=this.cells4(n.childNodes[i]);this.defVal[u]&&(r==""||typeof r=="undefined")&&(r=this.defVal[u]);f&&f.setValue(r)}else n.childNodes[i].innerHTML="&nbsp;",n.childNodes[i]._clearCell=!0;return n},_postRowProcessing:function(n,t){var e,r,o;for(n._attrs["class"]&&(n._css=n.className=n._attrs["class"]),n._attrs.locked&&(n._locked=!0),n._attrs.bgColor&&(n.bgColor=n._attrs.bgColor),e=0,r=0;r<n.childNodes.length;r++){var i=n.childNodes[r],f=i._cellIndex,u=i._attrs.style||n._attrs.style;u&&(i.style.cssText+=";"+u);i._attrs["class"]&&(i.className=i._attrs["class"]);u=i._attrs.align||this.cellAlign[f];u&&(i.align=u);i.vAlign=i._attrs.valign||this.cellVAlign[f];o=i._attrs.bgColor||this.columnColor[f];o&&(i.bgColor=o);i._attrs.colspan&&!t&&(this.setColspan(n.idd,r+e,i._attrs.colspan),e+=i._attrs.colspan-1);this._hrrar&&this._hrrar[f]&&!t&&(i.style.display="none")}this.callEvent("onRowCreated",[n.idd,n,null])},load:function(n,t,i){this.callEvent("onXLS",[this]);arguments.length==2&&typeof t!="function"&&(i=t,t=null);this._last_load_type=i=i||this._last_load_type||"xml";this.xmlFileUrl||(this.xmlFileUrl=n);this._data_type=i;this.xmlLoader=this.doLoadDetails;var r=this;return this.xmlLoader=function(n){r.callEvent&&(r["_process_"+i](n.xmlDoc),r._contextCallTimer||r.callEvent("onXLE",[r,0,0,n.xmlDoc,i]),t&&(t(),t=null))},dhx4.ajax.get(n,this.xmlLoader)},loadXMLString:function(n,t){window.console&&window.console.info&&window.console.info("loadXMLString was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44");this.parse({responseXML:dhx4.ajax.parse(n)},t,"xml")},loadXML:function(n,t){window.console&&window.console.info&&window.console.info("loadXML was deprecated","http://docs.dhtmlx.com/migration__index.html#migrationfrom43to44");this.load(n,t,"xml")},parse:function(n,t,i){arguments.length==2&&typeof t!="function"&&(i=t,t=null);this._last_load_type=i=i||this._last_load_type||"xml";this._data_type=i;i=="xml"&&typeof n=="string"&&(n={responseXML:dhx4.ajax.parse(n)});this["_process_"+i](n);this._contextCallTimer||this.callEvent("onXLE",[this,0,0,n,i]);t&&t()},xml:{top:"rows",row:"./row",cell:"./cell",s_row:"row",s_cell:"cell",row_attrs:[],cell_attrs:[]},csv:{row:"\n",cell:","},_xml_attrs:function(n){var i={},t;if(n.attributes.length)for(t=0;t<n.attributes.length;t++)i[n.attributes[t].name]=n.attributes[t].value;return i},_process_xml:function(n){var r,e,t,f,i,s,h;if(this._refresh_mode)return this._refreshFromXML(n);if(this._parsing=!0,r=dhx4.ajax.xmltop(this.xml.top,n),r.tagName==this.xml.top){e=r.getAttribute("dhx_security");e&&(dhtmlx.security_key=e);this._parseHead(r);var u=dhx4.ajax.xpath(this.xml.row,r),o=parseInt(r.getAttribute("pos")||0),t=parseInt(r.getAttribute("total_count")||0);if(this.pagingOn||(t=Math.min(t,32e6/this._srdh)),f=!1,t&&t!=this.rowsBuffer.length&&(this.rowsBuffer[t-1]||(this.rowsBuffer.length&&(f=!0),this.rowsBuffer[t-1]=null),t<this.rowsBuffer.length&&(this.rowsBuffer.splice(t,this.rowsBuffer.length-t),f=!0)),this.isTreeGrid())return this._process_tree_xml(r);for(i=0;i<u.length;i++)this.rowsBuffer[i+o]||(s=u[i].getAttribute("id")||i+o+1,this.rowsBuffer[i+o]={idd:s,data:u[i],_parser:this._process_xml_row,_locator:this._get_xml_data},this.rowsAr[s]=u[i]);this.callEvent("onDataReady",[]);f&&this._srnd?(h=this.objBox.scrollTop,this._reset_view(),this.objBox.scrollTop=h):this.render_dataset();this._parsing=!1}},_process_jsarray:function(n){var t,i;for(this._parsing=!0,n=n.responseText||n,typeof n=="string"&&(eval("dhtmlx.temp="+n+";"),n=dhtmlx.temp),t=0;t<n.length;t++)i=t+1,this.rowsBuffer.push({idd:i,data:n[t],_parser:this._process_jsarray_row,_locator:this._get_jsarray_data}),this.rowsAr[i]=n[t];this.render_dataset();this._parsing=!1},_process_csv:function(n){var r,t,u,i;for(this._parsing=!0,n=n.responseText||n,n=n.replace(/\r/g,""),n=n.split(this.csv.row),this._csvHdr&&(this.clearAll(),r=n.splice(0,1)[0].split(this.csv.cell),this._csvAID||r.splice(0,1),this.setHeader(r.join(this.delim)),this.init()),t=0;t<n.length;t++)(n[t]||t!=n.length-1)&&(this._csvAID?(i=t+1,this.rowsBuffer.push({idd:i,data:n[t],_parser:this._process_csv_row,_locator:this._get_csv_data})):(u=n[t].split(this.csv.cell),i=u.splice(0,1)[0],this.rowsBuffer.push({idd:i,data:u,_parser:this._process_jsarray_row,_locator:this._get_jsarray_data})),this.rowsAr[i]=n[t]);this.render_dataset();this._parsing=!1},_process_js:function(n){return this._process_json(n,"js")},_process_json:function(n,t){var n,u,i,r;if(this._parsing=!0,n=n.responseText||n,typeof n=="string"&&(eval("dhtmlx.temp="+n+";"),n=dhtmlx.temp),t=="js")for(n.data&&(n=n.data),i=0;i<n.length;i++)u=n[i],r=u.id||i+1,this.rowsBuffer.push({idd:r,data:u,_parser:this._process_js_row,_locator:this._get_js_data}),this.rowsAr[r]=n[i];else if(n.rows)for(i=0;i<n.rows.length;i++)r=n.rows[i].id,this.rowsBuffer.push({idd:r,data:n.rows[i],_parser:this._process_json_row,_locator:this._get_json_data}),this.rowsAr[r]=n.rows[i];n.dhx_security&&(dhtmlx.security_key=n.dhx_security);this.callEvent("onDataReady",[]);this.render_dataset();this._parsing=!1},render_dataset:function(n,t){var i,r,u,f,s,e,o;if(this._srnd){if(this._fillers)return this._update_srnd_view();t=Math.min(this._get_view_size()+(this._srnd_pr||0),this.rowsBuffer.length)}for(this.pagingOn?(n=Math.max(n||0,(this.currentPage-1)*this.rowsBufferOutSize),t=Math.min(this.currentPage*this.rowsBufferOutSize,this.rowsBuffer.length)):(n=n||0,t=t||this.rowsBuffer.length),i=n;i<t;i++){if(r=this.render_row(i),r==-1){this.xmlFileUrl&&this.callEvent("onDynXLS",[i,this._dpref?this._dpref:t-i])&&this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+i+"&count="+(this._dpref?this._dpref:t-i),this._data_type);t=i;break}if(r.parentNode&&r.parentNode.tagName||(this._insertRowAt(r,i),(r._attrs.selected||r._attrs.select)&&(this.selectRow(r,r._attrs.call?!0:!1,!0),r._attrs.selected=r._attrs.select=null)),this._ads_count&&i-n==this._ads_count)return u=this,this._context_parsing=this._context_parsing||this._parsing,this._contextCallTimer=window.setTimeout(function(){u._contextCallTimer=null;u.render_dataset(i,t);u._contextCallTimer||(u._context_parsing?u.callEvent("onXLE",[]):u._fixAlterCss(),u._context_parsing=!1)},this._ads_time)}if(this._ads_count&&i==t&&this.callEvent("onDistributedEnd",[]),this._srnd&&!this._fillers)for(f=this.rowsBuffer.length-t,this._fillers=[],this._fake&&!this._realfake&&(this._fake._fillers=[]),s=Math.round(99e4/this._srdh);f>0;)e=_isIE||window._FFrv?Math.min(f,s):f,o=this._add_filler(t,e),o&&this._fillers.push(o),f-=e,t+=e;this.setSizes()},render_row:function(n){var t,i;return this.rowsBuffer[n]?this.rowsBuffer[n]._parser?(t=this.rowsBuffer[n],this.rowsAr[t.idd]&&this.rowsAr[t.idd].tagName=="TR")?this.rowsBuffer[n]=this.rowsAr[t.idd]:(i=this._prepareRow(t.idd),this.rowsBuffer[n]=i,this.rowsAr[t.idd]=i,t._parser.call(this,i,t.data),this._postRowProcessing(i),i):this.rowsBuffer[n]:-1},_get_cell_value:function(n,t,i){return n._locator?(this._c_order&&(t=this._c_order[t]),n._locator.call(this,n.data,t)):this.cells3(n,t)[i?i:"getValue"]()},sortRows:function(n,t,i){var u;if(this.editStop(),i=(i||"asc").toLowerCase(),t=t||this.fldSort[n],n=n||0,this.isTreeGrid())this.sortTreeRows(n,t,i);else{var e={},r=this.cellType[n],f="getValue";for(r=="link"&&(f="getContent"),(r=="dhxCalendar"||r=="dhxCalendarA")&&(f="getDate"),(r=="co"||r=="coro")&&(f="getText"),u=0;u<this.rowsBuffer.length;u++)e[this.rowsBuffer[u].idd]=this._get_cell_value(this.rowsBuffer[u],n,f);this._sortRows(n,t,i,e)}this.callEvent("onAfterSorting",[n,t,i])},_sortCore:function(n,t,i,r,u){var f="sort",e;this._sst&&(u.stablesort=this.rowsCol.stablesort,f="stablesort");t.length>4&&(t=window[t]);t=="cus"?(e=this._customSorts[n],u[f](function(n,t){return e(r[n.idd],r[t.idd],i,n.idd,t.idd)})):typeof t=="function"?u[f](function(n,u){return t(r[n.idd],r[u.idd],i,n.idd,u.idd)}):t=="str"?u[f](function(n,t){return i=="asc"?r[n.idd]>r[t.idd]?1:r[n.idd]<r[t.idd]?-1:0:r[n.idd]<r[t.idd]?1:r[n.idd]>r[t.idd]?-1:0}):t=="int"?u[f](function(n,t){var f=parseFloat(r[n.idd]),u;return f=isNaN(f)?-99999999999999:f,u=parseFloat(r[t.idd]),u=isNaN(u)?-99999999999999:u,i=="asc"?f-u:u-f}):t=="date"&&u[f](function(n,t){var u=Date.parse(r[n.idd])||Date.parse("01/01/1900"),f=Date.parse(r[t.idd])||Date.parse("01/01/1900");return i=="asc"?u-f:f-u})},_sortRows:function(n,t,i,r){this._sortCore(n,t,i,r,this.rowsBuffer);this._reset_view();this.callEvent("onGridReconstructed",[])},_reset_view:function(n){var t,r,i;if(this.obj.rows[0]){if(this._lahRw&&this._unsetRowHover(0,!0),this.callEvent("onResetView",[]),t=this.obj.rows[0].parentNode,r=t.removeChild(t.childNodes[0],!0),_isKHTML)for(i=t.parentNode.childNodes.length-1;i>=0;i--)t.parentNode.childNodes[i].tagName=="TR"&&t.parentNode.removeChild(t.parentNode.childNodes[i],!0);else if(_isIE)for(i=t.childNodes.length-1;i>=0;i--)t.childNodes[i].removeNode(!0);else t.innerHTML="";t.appendChild(r);this.rowsCol=dhtmlxArray();this._sst&&this.enableStableSorting(!0);this._fillers=this.undefined;n||(_isIE&&this._srnd?this.render_dataset():this.render_dataset())}},deleteRow:function(n,t){var f,r,i,u;if(t||(t=this.getRowById(n)),t){if(this.editStop(),!this._realfake&&this.callEvent("onBeforeRowDeleted",[n])==!1)return!1;if(f=0,this.cellType._dhx_find("tree")==-1||this._realfake){for(t.parentNode&&t.parentNode.removeChild(t),r=this.rowsCol._dhx_find(t),r!=-1&&this.rowsCol._dhx_removeAt(r),i=0;i<this.rowsBuffer.length;i++)if(this.rowsBuffer[i]&&this.rowsBuffer[i].idd==n){this.rowsBuffer._dhx_removeAt(i);r=i;break}}else f=this._h2.get[n].parent.id,this._removeTrGrRow(t);for(this.rowsAr[n]=null,i=0;i<this.selectedRows.length;i++)this.selectedRows[i].idd==n&&this.selectedRows._dhx_removeAt(i);if(this._srnd){for(i=0;i<this._fillers.length;i++)(u=this._fillers[i],u)&&(u[0]>=r?this._update_fillers(i,0,-1):u[0]+u[1]>r&&this._update_fillers(i,-1,0));this._update_srnd_view()}return this.pagingOn&&this.changePage(),this._realfake||this.callEvent("onAfterRowDeleted",[n,f]),this.callEvent("onGridReconstructed",[]),this._ahgr&&this.setSizes(),!0}},_addRow:function(n,t,i){var r,e,o,f,u,s;for((i==-1||typeof i=="undefined")&&(i=this.rowsBuffer.length),typeof t=="string"&&(t=t.split(this.delim)),r=this._prepareRow(n),r._attrs={},e=0;e<r.childNodes.length;e++)r.childNodes[e]._attrs={};if(this.rowsAr[r.idd]=r,this._h2&&(this._h2.get[r.idd].buff=r),this._fillRow(r,t),this._postRowProcessing(r),this._skipInsert)return this._skipInsert=!1,this.rowsAr[r.idd]=r;if(this.pagingOn)return this.rowsBuffer._dhx_insertAt(i,r),this.rowsAr[r.idd]=r,r;if(this._fillers){for(this.rowsCol._dhx_insertAt(i,null),this.rowsBuffer._dhx_insertAt(i,r),this._fake&&this._fake.rowsCol._dhx_insertAt(i,null),this.rowsAr[r.idd]=r,o=!1,f=0;f<this._fillers.length;f++)u=this._fillers[f],u&&u[0]<=i&&u[0]+u[1]>=i&&(u[1]=u[1]+1,s=u[2].firstChild.style.height=parseInt(u[2].firstChild.style.height)+this._srdh+"px",o=!0,this._fake&&(this._fake._fillers[f][1]++,this._fake._fillers[f][2].firstChild.style.height=s)),u&&u[0]>i&&(u[0]=u[0]+1,this._fake&&this._fake._fillers[f][0]++);return o||this._fillers.push(this._add_filler(i,1,i==0?{parentNode:this.obj.rows[0].parentNode,nextSibling:this.rowsCol[1]}:this.rowsCol[i-1])),r}return this.rowsBuffer._dhx_insertAt(i,r),this._insertRowAt(r,i)},addRow:function(n,t,i){var r=this._addRow(n,t,i);return this.dragContext||this.callEvent("onRowAdded",[n]),this.pagingOn&&this.changePage(this.currentPage),this._srnd&&this._update_srnd_view(),r._added=!0,this._srnd&&!this._fillers&&(this._fillers=[]),this._ahgr&&this.setSizes(),this.callEvent("onGridReconstructed",[]),r},_insertRowAt:function(n,t,i){if(this.rowsAr[n.idd]=n,this._skipInsert)return this._skipInsert=!1,n;if(t<0||!t&&parseInt(t)!==0?t=this.rowsCol.length:t>this.rowsCol.length&&(t=this.rowsCol.length),this._cssEven){var r=n.className.replace(this._cssUnEven,"");n.className=(this._cssSP?this.getLevel(n.idd):t)%2==1?r+" "+this._cssUnEven+(this._cssSU?" "+this._cssUnEven+"_"+this.getLevel(n.idd):""):r+" "+this._cssEven+(this._cssSU?" "+this._cssEven+"_"+this.getLevel(n.idd):"")}return i||(t!=this.obj.rows.length-1&&this.rowsCol[t]?this.rowsCol[t].parentNode.insertBefore(n,this.rowsCol[t]):_isKHTML?this.obj.appendChild(n):this.obj.firstChild.appendChild(n)),this.rowsCol._dhx_insertAt(t,n),this.callEvent("onRowInserted",[n,t]),n},getRowById:function(n){var i=this.rowsAr[n],t;if(i){if(i.tagName!="TR"){for(t=0;t<this.rowsBuffer.length;t++)if(this.rowsBuffer[t]&&this.rowsBuffer[t].idd==n)return this.render_row(t);if(this._h2)return this.render_row(null,i.idd)}return i}return null},cellById:function(n,t){return this.cells(n,t)},cells:function(n,t){var i,r;return arguments.length==0?this.cells4(this.cell):(i=this.getRowById(n),r=i._childIndexes?i.childNodes[i._childIndexes[t]]:i.childNodes[t],!r&&i._childIndexes&&(r=i.firstChild||{}),this.cells4(r))},cellByIndex:function(n,t){return this.cells2(n,t)},cells2:function(n,t){var i=this.render_row(n),r=i._childIndexes?i.childNodes[i._childIndexes[t]]:i.childNodes[t];return!r&&i._childIndexes&&(r=i.firstChild||{}),this.cells4(r)},cells3:function(n,t){var i=n._childIndexes?n.childNodes[n._childIndexes[t]]:n.childNodes[t];return this.cells4(i)},cells4:function(n){var t=window["eXcell_"+(n._cellType||this.cellType[n._cellIndex])];if(t)return new t(n)},cells5:function(n,t){var t=t||n._cellType||this.cellType[n._cellIndex],i;return this._ecache[t]||(i=window["eXcell_"+t]?window["eXcell_"+t]:eXcell_ro,this._ecache[t]=new i(n)),this._ecache[t].cell=n,this._ecache[t]},dma:function(n){this._ecache||(this._ecache={});n&&!this._dma?(this._dma=this.cells4,this.cells4=this.cells5):!n&&this._dma&&(this.cells4=this._dma,this._dma=null)},getRowsNum:function(){return this.rowsBuffer.length},enableEditTabOnly:function(n){this.smartTabOrder=arguments.length>0?dhx4.s2b(n):!0},setExternalTabOrder:function(n,t){var i=this,r,u;this.tabStart=typeof n=="object"?n:document.getElementById(n);r=this.tabStart.onkeydown;this.tabStart.onkeydown=function(n){r&&r.call(this,n);var t=n||window.event;if(t.keyCode==9&&!t.shiftKey)return t.cancelBubble=!0,i.selectCell(0,0,0,0,1),i.smartTabOrder&&i.cells2(0,0).isDisabled()&&i._key_events.k9_0_0.call(i),this.blur(),!1};_isOpera&&(this.tabStart.onkeypress=this.tabStart.onkeydown);this.tabEnd=typeof t=="object"?t:document.getElementById(t);u=this.tabEnd.onkeydown;this.tabEnd.onkeydown=this.tabEnd.onkeypress=function(n){u&&u.call(this,n);var t=n||window.event;if(t.keyCode==9&&t.shiftKey)return t.cancelBubble=!0,i.selectCell(i.getRowsNum()-1,i.getColumnCount()-1,0,0,1),i.smartTabOrder&&i.cells2(i.getRowsNum()-1,i.getColumnCount()-1).isDisabled()&&i._key_events.k9_0_1.call(i),this.blur(),!1};_isOpera&&(this.tabEnd.onkeypress=this.tabEnd.onkeydown)},uid:function(){return this._ui_seed||(this._ui_seed=(new Date).valueOf()),this._ui_seed++},setIconset:function(n){this.iconset=n},clearAndLoad:function(){var n,t;if(this._last_load_request&&(n=this._last_load_request.xmlDoc,n.readyState!=4))try{n.onreadystatechange=function(){};n.abort()}catch(i){}t=this._pgn_skin;this._pgn_skin=null;this.clearAll();this._pgn_skin=t;this._last_load_request=this.load.apply(this,arguments)},getStateOfView:function(){var r,n,t,i;if(this.pagingOn)return r=(this.currentPage-1)*this.rowsBufferOutSize,[this.currentPage,r,Math.min(r+this.rowsBufferOutSize,this.rowsBuffer.length),this.rowsBuffer.length];if(n=Math.floor(this.objBox.scrollTop/this._srdh),t=Math.ceil(parseInt(this.objBox.offsetHeight)/this._srdh),this.multiLine){for(i=this.objBox.scrollTop,n=0;i>=0;)i-=this.rowsCol[n]?this.rowsCol[n].offsetHeight:this._srdh,n++;for(n--,i+=this.objBox.offsetHeight,t=0;i>=0;)i-=this.rowsCol[n+t]?this.rowsCol[n+t].offsetHeight:this._srdh,t++}return[n,t,this.rowsBuffer.length]}},function(){function t(n,t){this[n]=t}function r(n,t){this[n].call(this,t)}function i(n,t){this[n].call(this,t.join(this.delim))}function u(n,t){for(var u,r,i=0;i<t.length;i++)if(typeof t[i]=="object"){u=this.getCombo(i);for(r in t[i])u.put(r,t[i][r])}}function f(n,t){function o(n,t,i){u[t]||(u[t]=[]);typeof i=="object"&&(i.toString=function(){return this.text});u[t][n]=i}for(var r,f,e,u=[],i=0;i<t.length;i++)if(typeof t[i]=="object"&&t[i].length)for(r=0;r<t[i].length;r++)o(i,r,t[i][r]);else o(i,0,t[i]);for(i=0;i<u.length;i++)for(r=0;r<u[0].length;r++){if(f=u[i][r],u[i][r]=(f||"").toString()||"&nbsp;",f&&f.colspan)for(e=1;e<f.colspan;e++)o(r+e,i,"#cspan");if(f&&f.rowspan)for(e=1;e<f.rowspan;e++)o(r,i+e,"#rspan")}for(this.setHeader(u[0]),i=1;i<u.length;i++)this.attachHeader(u[i])}var n=[{name:"label",def:"&nbsp;",operation:"setHeader",type:f},{name:"id",def:"",operation:"columnIds",type:t},{name:"width",def:"*",operation:"setInitWidths",type:i},{name:"align",def:"left",operation:"cellAlign",type:t},{name:"valign",def:"middle",operation:"cellVAlign",type:t},{name:"sort",def:"na",operation:"fldSort",type:t},{name:"type",def:"ro",operation:"setColTypes",type:i},{name:"options",def:"",operation:"",type:u}];dhtmlx.extend_api("dhtmlXGridObject",{_init:function(n){return[n.parent]},image_path:"setImagePath",columns:"columns",rows:"rows",headers:"headers",skin:"setSkin",smart_rendering:"enableSmartRendering",css:"enableAlterCss",auto_height:"enableAutoHeight",save_hidden:"enableAutoHiddenColumnsSaving",save_cookie:"enableAutoSaving",save_size:"enableAutoSizeSaving",auto_width:"enableAutoWidth",block_selection:"enableBlockSelection",csv_id:"enableCSVAutoID",csv_header:"enableCSVHeader",cell_ids:"enableCellIds",colspan:"enableColSpan",column_move:"enableColumnMove",context_menu:"enableContextMenu",distributed:"enableDistributedParsing",drag:"enableDragAndDrop",drag_order:"enableDragOrder",tabulation:"enableEditTabOnly",header_images:"enableHeaderImages",header_menu:"enableHeaderMenu",keymap:"enableKeyboardSupport",mouse_navigation:"enableLightMouseNavigation",markers:"enableMarkedCells",math_editing:"enableMathEditing",math_serialization:"enableMathSerialization",drag_copy:"enableMercyDrag",multiline:"enableMultiline",multiselect:"enableMultiselect",save_column_order:"enableOrderSaving",hover:"enableRowsHover",rowspan:"enableRowspan",smart:"enableSmartRendering",save_sorting:"enableSortingSaving",stable_sorting:"enableStableSorting",undo:"enableUndoRedo",csv_cell:"setCSVDelimiter",date_format:"setDateFormat",drag_behavior:"setDragBehavior",editable:"setEditable",without_header:"setNoHeader",submit_changed:"submitOnlyChanged",submit_serialization:"submitSerialization",submit_selected:"submitOnlySelected",submit_id:"submitOnlyRowID",xml:"load"},{columns:function(t){for(var f,u,e,i=0;i<n.length;i++){for(f=[],u=0;u<t.length;u++)f[u]=t[u][n[i].name]||n[i].def;e=n[i].type||r;e.call(this,n[i].operation,f,t)}this.init()},rows:function(){},headers:function(n){for(var t=0;t<n.length;t++)this.attachHeader(n[t])}})}();dhtmlXGridObject.prototype._dp_init=function(n){n.attachEvent("insertCallback",function(n,t){this.obj._h2?this.obj.addRow(t,i,null,parent):this.obj.addRow(t,[],0);var i=this.obj.getRowById(t);i&&(this.obj._process_xml_row(i,n.firstChild),this.obj._postRowProcessing(i))});n.attachEvent("updateCallback",function(n,t){var i=this.obj.getRowById(t);i&&(this.obj._process_xml_row(i,n.firstChild),this.obj._postRowProcessing(i))});n.attachEvent("deleteCallback",function(n,t){this.obj.setUserData(t,this.action_param,"true_deleted");this.obj.deleteRow(t)});n._methods=["setRowTextStyle","setCellTextStyle","changeRowId","deleteRow"];this.attachEvent("onEditCell",function(t,i,r){if(n._columns&&!n._columns[r])return!0;var u=this.cells(i,r);return t==1?u.isCheckbox()&&n.setUpdated(i,!0):t==2&&u.wasChanged()&&n.setUpdated(i,!0),!0});this.attachEvent("onRowPaste",function(t){n.setUpdated(t,!0)});this.attachEvent("onUndo",function(t){n.setUpdated(t,!0)});this.attachEvent("onRowIdChange",function(t,i){var r=n.findRow(t);r<n.updatedRows.length&&(n.updatedRows[r]=i)});this.attachEvent("onSelectStateChanged",function(){return n.updateMode=="row"&&n.sendData(),!0});this.attachEvent("onEnter",function(){return n.updateMode=="row"&&n.sendData(),!0});this.attachEvent("onBeforeRowDeleted",function(t){if(n._silent_mode||!this.rowsAr[t])return!0;if(this.dragContext&&n.dnd)return window.setTimeout(function(){n.setUpdated(t,!0)},1),!0;var i=n.getState(t);return(this._h2&&this._h2.forEachChild(t,function(t){n.setUpdated(t.id,!1);n.markRow(t.id,!0,"deleted")},this),i=="inserted")?(n.set_invalid(t,!1),n.setUpdated(t,!1),!0):i=="deleted"?!1:i=="true_deleted"?(n.setUpdated(t,!1),!0):(n.setUpdated(t,!0,"deleted"),!1)});this.attachEvent("onBindUpdate",function(t,i,r){n.setUpdated(r,!0)});this.attachEvent("onRowAdded",function(t){return this.dragContext&&n.dnd?!0:(n.setUpdated(t,!0,"inserted"),!0)});n._getRowData=function(n){var r={},e,u,o,f,t,i;for(r.gr_id=n,this.obj.isTreeGrid()&&(r.gr_pid=this.obj.getParentId(n)),e=this.obj.getRowById(n),u=0;u<this.obj._cCount;u++)(o=this.obj._c_order?this.obj._c_order[u]:u,f=this.obj.cells(e.idd,u),!this._changed||f.wasChanged())&&(this._endnm?r[this.obj.getColumnId(u)]=f.getValue():r["c"+o]=f.getValue());if(t=this.obj.UserData[n],t)for(i=0;i<t.keys.length;i++)t.keys[i]&&t.keys[i].indexOf("__")!=0&&(r[t.keys[i]]=t.values[i]);if(t=this.obj.UserData.gridglobaluserdata,t)for(i=0;i<t.keys.length;i++)r[t.keys[i]]=t.values[i];return r};n._clearUpdateFlag=function(n){var i=this.obj.getRowById(n),t;if(i)for(t=0;t<this.obj._cCount;t++)this.obj.cells(n,t).cell.wasChanged=!1};n.checkBeforeUpdate=function(n){for(var i,r=!0,u=[],t=0;t<this.obj._cCount;t++)this.mandatoryFields[t]&&(i=this.mandatoryFields[t].call(this.obj,this.obj.cells(n,t).getValue(),n,t),typeof i=="string"?(this.messages.push(i),r=!1):(r&=i,u[t]=!i));return r||(this.set_invalid(n,"invalid",u),this.setUpdated(n,!1)),r}};dhx4.attachEvent("onGridCreated",function(n){if(n._con_f_used=[].concat(n._con_f_used),dhtmlXGridObject.prototype._con_f_used=[],!n._was_created_once){n._was_created_once=!0;var i=function(n){return n=n.replace(/(\?|\&)connector[^\f]*/g,""),n+(n.indexOf("?")!=-1?"&":"?")+"connector=true"+(this.hdr.rows.length>0?"&dhx_no_header=1":"")},t=function(n){return i.call(this,n)+(this._connector_sorting||"")+(this._connector_filter||"")},r=function(n,i,r){return this._connector_sorting="&dhx_sort["+i+"]="+r,t.call(this,n)},u=function(n,i,r){for(var f=[],u=0;u<i.length;u++)f[u]="dhx_filter["+i[u]+"]="+encodeURIComponent(r[u]);return this._connector_filter="&"+f.join("&"),t.call(this,n)};n.attachEvent("onCollectValues",function(n){return this._con_f_used[n]?typeof this._con_f_used[n]=="object"?this._con_f_used[n]:!1:!0});n.attachEvent("onDynXLS",function(){return this.xmlFileUrl&&(this.xmlFileUrl=t.call(this,this.xmlFileUrl)),!0});n.attachEvent("onBeforeSorting",function(n,t,i){if(t=="connector"){var u=this;return this.clearAndLoad(r.call(this,this.xmlFileUrl,n,i),function(){u.setSortImgState(!0,n,i)}),!1}return!0});n.attachEvent("onFilterStart",function(n,t){if(this._con_f_used.length){var i=this.getSortingState(),r=this;return this.clearAndLoad(u.call(this,this.xmlFileUrl,n,t)),i.length&&r.setSortImgState(!0,i[0],i[1]),!1}return!0})}});dhtmlXGridObject.prototype._con_f_used=[];dhtmlXGridObject.prototype._in_header_connector_text_filter=function(n,t){return this._con_f_used[t]||(this._con_f_used[t]=1),this._in_header_text_filter(n,t)};dhtmlXGridObject.prototype._in_header_connector_select_filter=function(n,t){return this._con_f_used[t]||(this._con_f_used[t]=2),this._in_header_select_filter(n,t)};dhtmlXGridObject.prototype.load_connector||(dhtmlXGridObject.prototype.load_connector=dhtmlXGridObject.prototype.load,dhtmlXGridObject.prototype.load=function(){var t,n;if(!this._colls_loaded&&this.cellType){for(t=[],n=0;n<this.cellType.length;n++)(this.cellType[n].indexOf("co")==0||this.cellType[n].indexOf("clist")==0||this._con_f_used[n]==2)&&t.push(n);t.length&&(arguments[0]+=(arguments[0].indexOf("?")!=-1?"&":"?")+"connector=true&dhx_colls="+t.join(","))}return this.load_connector.apply(this,arguments)},dhtmlXGridObject.prototype._parseHead_connector=dhtmlXGridObject.prototype._parseHead,dhtmlXGridObject.prototype._parseHead=function(){var e,r,o,s,u,f,h;if(this._parseHead_connector.apply(this,arguments),!this._colls_loaded){for(e=dhx4.ajax.xpath("./coll_options",arguments[0]),r=0;r<e.length;r++){var t=e[r].getAttribute("for"),i=[],n=null;for(this.cellType[t]=="combo"?n=this.getColumnCombo(t):this.cellType[t].indexOf("co")==0&&(n=this.getCombo(t)),o=dhx4.ajax.xpath("./item",e[r]),s=[],u=0;u<o.length;u++)f=o[u].getAttribute("value"),n?(h=o[u].getAttribute("label")||f,n.addOption?s.push([f,h]):n.put(f,h),i[i.length]=h):i[i.length]=f;s.length?n&&n.addOption(s):i.length&&!n&&this.registerCList&&this.registerCList(t*1,i);this._con_f_used[t*1]&&(this._con_f_used[t*1]=i)}this._colls_loaded=!0}});dhtmlXGridObject.prototype.getRowData=function(n){for(var i,r={},u=this.getColumnsNum(),t=0;t<u;t++)i=this.getColumnId(t),i&&(r[i]=this.cells(n,t).getValue());return r};dhtmlXGridObject.prototype.setRowData=function(n,t){for(var r,u=this.getColumnsNum(),i=0;i<u;i++)r=this.getColumnId(i),r&&t.hasOwnProperty(r)&&this.cells(n,i).setValue(t[r])};dhtmlXGridCellObject.prototype={getAttribute:function(n){return this.cell._attrs[n]},setAttribute:function(n,t){this.cell._attrs[n]=t},getInput:function(){if(this.obj&&(this.obj.tagName=="INPUT"||this.obj.tagName=="TEXTAREA"))return this.obj;var n=(this.obj||this.cell).getElementsByTagName("TEXTAREA");return n.length||(n=(this.obj||this.cell).getElementsByTagName("INPUT")),n[0]}};dhtmlXGridCellObject.prototype.setValue=function(n){typeof n=="number"||n&&n.toString()._dhx_trim()!=""?this.cell._clearCell=!1:(n="&nbsp;",this.cell._clearCell=!0);this.setCValue(n)};dhtmlXGridCellObject.prototype.getTitle=function(){return _isIE?this.cell.innerText:this.cell.textContent};dhtmlXGridCellObject.prototype.setCValue=function(n,t){this.cell.innerHTML=n;this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,arguments.length>1?t:n])};dhtmlXGridCellObject.prototype.setCTxtValue=function(n){this.cell.innerHTML="";this.cell.appendChild(document.createTextNode(n));this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,n])};dhtmlXGridCellObject.prototype.setLabel=function(n){this.cell.innerHTML=n};dhtmlXGridCellObject.prototype.getMath=function(){return this._val?this.val:this.getValue()};eXcell.prototype=new dhtmlXGridCellObject;eXcell_ed.prototype=new eXcell;eXcell_edtxt.prototype=new eXcell_ed;eXcell_edn.prototype=new eXcell_ed;eXcell_edn.prototype.setValue=function(n){if(n&&n.toString()._dhx_trim()!="")this.cell._clearCell=!1,this.cell._orig_value=n;else return this.cell._clearCell=!0,this.setCValue("&nbsp;",0);this.setCValue(this.grid._aplNF(n,this.cell._cellIndex),n)};eXcell_ch.prototype=new eXcell;eXcell_ch.prototype.setValue=function(n){this.cell.style.verticalAlign="middle";n&&(n=n.toString()._dhx_trim(),(n=="false"||n=="0")&&(n=""));n?(n="1",this.cell.chstate="1"):(n="0",this.cell.chstate="0");var t=this;this.cell.setAttribute("excell","ch");this.setCValue("<img src='"+this.grid.imgURL+"item_chk"+n+".gif' onclick='new eXcell_ch(this.parentNode).changeState(true); (arguments[0]||event).cancelBubble=true; '>",this.cell.chstate)};eXcell_ra.prototype=new eXcell_ch;eXcell_ra.prototype.setValue=function(n){var i,t;this.cell.style.verticalAlign="middle";n&&(n=n.toString()._dhx_trim(),(n=="false"||n=="0")&&(n=""));n?(this.grid._RaSeCol||(this.grid._RaSeCol=[]),this.grid._RaSeCol[this.cell._cellIndex]&&(i=this.grid._RaSeCol[this.cell._cellIndex],this.grid.rowsAr[i]&&(t=this.grid.cells(i,this.cell._cellIndex),t.setValue("0"),this.grid.rowsAr[t.cell.parentNode.idd]&&this.grid.callEvent("onEditCell",[1,t.cell.parentNode.idd,t.cell._cellIndex]))),this.grid._RaSeCol[this.cell._cellIndex]=this.cell.parentNode.idd,n="1",this.cell.chstate="1"):(n="0",this.cell.chstate="0");this.cell.setAttribute("excell","ra");this.setCValue("<img src='"+this.grid.imgURL+"radio_chk"+n+".gif' onclick='new eXcell_ra(this.parentNode).changeState(false);'>",this.cell.chstate)};eXcell_txt.prototype=new eXcell;eXcell_txttxt.prototype=new eXcell_txt;eXcell_txt.prototype.setValue=function(n){this.cell._brval=n;n&&n.toString()._dhx_trim()!=""?this.cell._clearCell=!1:(n="&nbsp;",this.cell._clearCell=!0);!this.grid.multiLine||this.cell._clearCell?this.setCValue(n,this.cell._brval):this.setCValue(n.replace(/\n/g,"<br/>"),n)};eXcell_co.prototype=new eXcell;eXcell_co.prototype.getText=function(){return this.cell.innerHTML};eXcell_co.prototype.setValue=function(n){var t,i,r;if(typeof n=="object"){for(t=dhx4.ajax.xpath("./option",n),t.length&&(this.cell._combo=new dhtmlXGridComboObject),i=0;i<t.length;i++)this.cell._combo.put(t[i].getAttribute("value"),t[i].firstChild?t[i].firstChild.data:"");n=n.firstChild.data}(n||"").toString()._dhx_trim()==""&&(n=null);this.cell.combo_value=n;n!==null?(r=(this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(n),this.setCValue(r===null?n:r,n)):this.setCValue("&nbsp;",n)};eXcell_coro.prototype=new eXcell_co;eXcell_cotxt.prototype=new eXcell_co;eXcell_cotxt.prototype.getText=function(){return _isIE?this.cell.innerText:this.cell.textContent};eXcell_cotxt.prototype.setValue=function(n){var t,i;if(typeof n=="object"){for(t=dhx4.ajax.xpath("./option",n),t.length&&(this.cell._combo=new dhtmlXGridComboObject),i=0;i<t.length;i++)this.cell._combo.put(t[i].getAttribute("value"),t[i].firstChild?t[i].firstChild.data:"");n=n.firstChild.data}(n||"").toString()._dhx_trim()==""&&(n=null);n!==null?this.setCTxtValue((this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(n)||n,n):this.setCTxtValue(" ",n);this.cell.combo_value=n};eXcell_corotxt.prototype=new eXcell_cotxt;eXcell_cp.prototype=new eXcell;eXcell_cp.prototype.setValue=function(n){this.setCValue("<div style='width:100%;height:"+(this.grid.multiLine?"100%":23)+";background-color:"+(n||"")+";border:0px;'>&nbsp;<\/div>",n);this.cell.firstChild._bg=n};eXcell_img.prototype=new eXcell;eXcell_img.prototype.getTitle=function(){return this.cell._brval};eXcell_img.prototype.setValue=function(n){var i=n,t;(n||"").indexOf("^")!=-1&&(t=n.split("^"),n=t[0],i=this.cell._attrs.title||t[1],t.length>2&&(this.cell.lnk=t[2],t[3]&&(this.cell.trg=t[3])),this.cell.titFl="1");this.grid.multiLine?this.setCValue("<img src='"+this.grid.iconURL+(n||"")._dhx_trim()+"' border='0'>",n):this.setCValue("<img src='"+this.grid.iconURL+(n||"")._dhx_trim()+"' border='0' style='max-height:"+(this.grid._srdh-4)+"px'>",n);this.cell.lnk&&(this.cell.innerHTML="<a href='"+this.cell.lnk+"' target='"+this.cell.trg+"'>"+this.cell.innerHTML+"<\/a>");this.cell._brval=i};eXcell_icon.prototype=new eXcell_ed;eXcell_price.prototype=new eXcell_ed;eXcell_price.prototype.setValue=function(n){isNaN(parseFloat(n))&&(n=this.val||0);var t="green";n<0&&(t="red");this.setCValue("<span>$<\/span><span style='padding-right:2px;color:"+t+";'>"+n+"<\/span>",n)};eXcell_dyn.prototype=new eXcell_ed;eXcell_dyn.prototype.getValue=function(){var n=eXcell_ed.prototype.getValue.call(this);return};eXcell_dyn.prototype.setValue=function(n){var t,i;!n||isNaN(Number(n))?n!==""&&(n=0):(n>0?(t="green",i="dyn_up.gif"):n==0?(t="black",i="dyn_.gif"):(t="red",i="dyn_down.gif"),n=this.grid._aplNF(n,this.cell._cellIndex));this.setCValue("<div class='grid_cell_dyn'><img src='"+this.grid.imgURL+""+i+"'><span style='color:"+t+";'>"+n+"<\/span><\/div>",n)};eXcell_ro.prototype=new eXcell;window.eXcell_hidden=function(n){n&&(this.cell=n,this.grid=this.cell.parentNode.grid);this.edit=function(){};this.isDisabled=function(){return!0};this.getValue=function(){return this.cell.val}};eXcell_hidden.prototype=new eXcell;eXcell_hidden.prototype.setValue=function(n){this.cell.val=n};eXcell_ron.prototype=new eXcell;eXcell_ron.prototype.setValue=function(n){if(n!==0&&(!n||n.toString()._dhx_trim()==""))return this.setCValue("&nbsp;"),this.cell._clearCell=!0;this.cell._orig_value=n;this.cell._clearCell=!1;this.setCValue(n?this.grid._aplNF(n,this.cell._cellIndex):"0")};eXcell_rotxt.prototype=new eXcell;Hashtable.prototype=new dhtmlXGridComboObject;typeof dhtmlXCellObject!="undefined"&&(dhtmlXCellObject.prototype.attachGrid=function(n){this.callEvent("_onBeforeContentAttach",["grid"]);var t=document.createElement("DIV");return t.style.width="100%",t.style.height="100%",t.style.position="relative",t.style.overflow="hidden",this._attachObject(t),this.dataType="grid",n&&typeof n=="object"&&!n.tagName&&(n.parent=t,t=n),this.dataObj=new dhtmlXGridObject(t),this.dataObj.setSkin(this.conf.skin),typeof dhtmlXTabBarCell=="function"&&this instanceof window.dhtmlXTabBarCell&&navigator.userAgent.match(/7[\.\d]* mobile/gi)!=null&&navigator.userAgent.match(/AppleWebKit/gi)!=null&&(this.dataObj.objBox.style.webkitOverflowScrolling="auto"),this.conf.skin=="material"&&typeof dhtmlXLayoutCell=="function"&&this instanceof window.dhtmlXLayoutCell&&(this.cell.childNodes[this.conf.idx.cont].style.overflow="hidden"),this.conf.skin=="dhx_skyblue"&&typeof dhtmlXWindowsCell=="function"&&this instanceof window.dhtmlXWindowsCell?(this.dataObj.entBox.style.border="1px solid #a4bed4",this.dataObj._sizeFix=0):(this.dataObj.entBox.style.border="0px solid white",this.dataObj._sizeFix=2),t=null,this.callEvent("_onContentAttach",[]),this.dataObj});dhtmlXGridObject.prototype.enableDragAndDrop=function(n){n=="temporary_disabled"?(this.dADTempOff=!1,n=!0):this.dADTempOff=!0;this.dragAndDropOff=dhx4.s2b(n);this._drag_validate=!0;n&&(this.objBox.ondragstart=function(n){return(n||event).cancelBubble=!0,!1})};dhtmlXGridObject.prototype.setDragBehavior=function(n){this.dadmodec=this.dadmodefix=0;switch(n){case"child":this.dadmode=0;this._sbmod=!1;break;case"sibling":this.dadmode=1;this._sbmod=!1;break;case"sibling-next":this.dadmode=1;this._sbmod=!0;break;case"complex":this.dadmode=2;this._sbmod=!1;break;case"complex-next":this.dadmode=2;this._sbmod=!0}};dhtmlXGridObject.prototype.enableDragOrder=function(n){this._dndorder=dhx4.s2b(n)};dhtmlXGridObject.prototype._checkParent=function(n,t){var r=this._h2.get[n.idd].parent,i;if(r.parent){for(i=0;i<t.length;i++)if(t[i]==r.id)return!0;return this._checkParent(this.rowsAr[r.id],t)}};dhtmlXGridObject.prototype._createDragNode=function(n,t){var f,i,e,o,s,r,u;if((this.editStop(),window.dhtmlDragAndDrop.dragNode)||!this.dADTempOff||(n.parentObject={},n.parentObject.treeNod=this,f=this.callEvent("onBeforeDrag",[n.parentNode.idd,n._cellIndex,t]),!f))return null;for(i=[],i=this.getSelectedId(),i=i&&i!=""?i.split(this.delim):[],e=!1,r=0;r<i.length;r++)i[r]==n.parentNode.idd&&(e=!0);if(e||(this.selectRow(this.rowsAr[n.parentNode.idd],!1,t.ctrlKey,!1),t.ctrlKey||(i=[]),i[this.selMultiRows?i.length:0]=n.parentNode.idd),this.isTreeGrid())for(r=i.length-1;r>=0;r--)this._checkParent(this.rowsAr[i[r]],i)&&i.splice(r,1);for(o=this,i.length&&this._dndorder&&i.sort(function(n,t){return o.rowsAr[n].rowIndex>o.rowsAr[t].rowIndex?1:-1}),s=this.getFirstParentOfType(_isIE?t.srcElement:t.target,"TD"),s&&(this._dndExtra=s._cellIndex),this._dragged=[],r=0;r<i.length;r++)this.rowsAr[i[r]]&&(this._dragged[this._dragged.length]=this.rowsAr[i[r]],this.rowsAr[i[r]].treeNod=this);return n.parentObject.parentNode=n.parentNode,u=document.createElement("div"),u.innerHTML=f!==!0?f:this.rowToDragElement(n.parentNode.idd),u.style.position="absolute",u.className="dragSpanDiv",u};dhtmlXGridObject.prototype._createSdrgc=function(){this._sdrgc=document.createElement("DIV");this._sdrgc.innerHTML="&nbsp;";this._sdrgc.className="gridDragLine";this.objBox.appendChild(this._sdrgc)};dragContext.prototype.valid=function(){if(this.sobj!=this.tobj)return!0;if(this.sid==this.tid)return!1;if(this.target=="treeGrid")for(var n=this.tid;n=this.tobj.getParentId(n);)if(this.sid==n)return!1;return!0};dragContext.prototype.close=function(){this.sobj=null;this.tobj=null};dragContext.prototype.copy=function(){return new dragContext(this.source,this.target,this.mode,this.dropmode,this.sid,this.tid,this.sobj,this.tobj,this.sExtra,this.tExtra,this.before)};dragContext.prototype.set=function(n,t){return this[n]=t,this};dragContext.prototype.uid=function(){for(this.nid=this.sid;this.tobj.rowsAr[this.nid];)this.nid=this.nid+(new Date).valueOf();return this};dragContext.prototype.data=function(){return this.sobj==this.tobj?this.sobj._getRowArray(this.sobj.rowsAr[this.sid]):this.source=="tree"?this.tobj.treeToGridElement(this.sobj,this.sid,this.tid):this.tobj.gridToGrid(this.sid,this.sobj,this.tobj)};dragContext.prototype.attrs=function(){return this.source=="tree"?{}:this.sobj.rowsAr[this.sid]._attrs};dragContext.prototype.childs=function(){return this.source=="treeGrid"?this.sobj._h2.get[this.sid]._xml_await?this.sobj._h2.get[this.sid].has_kids:null:null};dragContext.prototype.pid=function(){var n,i,t;if(!this.tid||!this.tobj._h2)return 0;if(this.target=="treeGrid"){if(this.dropmode=="child")return this.tid;if(n=this.tobj.rowsAr[this.tid],i=this.tobj._h2.get[n.idd].parent.id,this.alfa&&this.tobj._sbmod&&n.nextSibling){if(t=this.tobj._h2.get[n.nextSibling.idd].parent.id,t==this.tid)return this.tid;if(t!=i)return t}return i}};dragContext.prototype.ind=function(){var n,t;return this.tid==window.unknown?this.tobj.rowsBuffer.length:(this.target=="treeGrid"&&(this.dropmode=="child"?this.tobj.openItem(this.tid):this.tobj.openItem(this.tobj.getParentId(this.tid))),n=this.tobj.rowsBuffer._dhx_find(this.tobj.rowsAr[this.tid]),this.alfa&&this.tobj._sbmod&&this.dropmode=="sibling"&&(t=this.tobj.rowsAr[this.tid],t.nextSibling&&this._h2.get[t.nextSibling.idd].parent.id==this.tid))?n+1:n+1+(this.target=="treeGrid"&&n>=0&&this.tobj._h2.get[this.tobj.rowsBuffer[n].idd].state=="minus"?this.tobj._getOpenLenght(this.tobj.rowsBuffer[n].idd,0):0)};dragContext.prototype.img=function(){return this.target!="grid"&&this.sobj._h2?this.sobj.getItemImage(this.sid):null};dragContext.prototype.slist=function(){for(var n=[],t=0;t<this.sid.length;t++)n[n.length]=this.sid[t][this.source=="tree"?"id":"idd"];return n.join(",")};dhtmlXGridObject.prototype._drag=function(n,t,i,r){var l,o,f,u,h,c,e,s;if(this._realfake)return this._fake._drag();if(l=this.lastLanding,this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer),o=i.parentNode,f=n.parentObject,o.idd||(o.grid=this,this.dadmodefix=0),u=new dragContext(0,0,0,o.grid.dadmode==1||o.grid.dadmodec?"sibling":"child"),f&&f.childNodes)u.set("source","tree").set("sobj",f.treeNod).set("sid",u.sobj._dragged);else{if(!f)return!0;f.treeNod.isTreeGrid&&f.treeNod.isTreeGrid()&&u.set("source","treeGrid");u.set("sobj",f.treeNod).set("sid",u.sobj._dragged)}if(o.grid.isTreeGrid()?u.set("target","treeGrid"):u.set("dropmode","sibling"),u.set("tobj",o.grid).set("tid",o.idd),u.tobj.dadmode==2&&u.tobj.dadmodec==1&&u.tobj.dadmodefix<0&&(u.tobj.obj.rows[1].idd!=u.tid?u.tid=o.previousSibling.idd:this._h2&&u.tid?u.before=!0:u.tid=0),h=this.getFirstParentOfType(r,"TD"),h&&u.set("tExtra",h._cellIndex),h&&u.set("sExtra",u.sobj._dndExtra),u.sobj.dpcpy&&u.set("mode","copy"),u.tobj._realfake&&(u.tobj=u.tobj._fake),u.sobj._realfake&&(u.sobj=u.sobj._fake),u.tobj._clearMove(),f&&f.treeNod&&f.treeNod._nonTrivialRow)f.treeNod._nonTrivialRow(this,u.tid,u.dropmode,f);else{if(u.tobj.dragContext=u,!u.tobj.callEvent("onDrag",[u.slist(),u.tid,u.sobj,u.tobj,u.sExtra,u.tExtra]))return u.tobj.dragContext=null;if(c=[],typeof u.sid=="object"){for(e=u.copy(),s=0;s<u.sid.length;s++)e.set("alfa",!s).set("sid",u.sid[s][u.source=="tree"?"id":"idd"]).valid()&&(e.tobj._dragRoutine(e),e.target=="treeGrid"&&e.dropmode=="child"&&e.tobj.openItem(e.tid),c[c.length]=e.nid,e.set("dropmode","sibling").set("tid",e.nid));e.close()}else u.tobj._dragRoutine(u);u.tobj.laterLink&&u.tobj.laterLink();u.tobj.callEvent("onDrop",[u.slist(),u.tid,c.join(","),u.sobj,u.tobj,u.sExtra,u.tExtra])}u.tobj.dragContext=null;u.close()};dhtmlXGridObject.prototype._dragRoutine=function(n){var u,h,s,f,e,r,t,o,i;if(n.sobj==n.tobj&&n.source=="grid"&&n.mode=="move"&&!this._fake){if(n.sobj._dndProblematic)return;u=n.sobj.rowsAr[n.sid];h=n.sobj.rowsCol._dhx_find(u);n.sobj.rowsCol._dhx_removeAt(n.sobj.rowsCol._dhx_find(u));n.sobj.rowsBuffer._dhx_removeAt(n.sobj.rowsBuffer._dhx_find(u));n.sobj.rowsBuffer._dhx_insertAt(n.ind(),u);n.tobj._fake&&(n.tobj._fake.rowsCol._dhx_removeAt(h),s=n.tobj._fake.rowsAr[n.sid],s.parentNode.removeChild(s));n.sobj._insertRowAt(u,n.ind()-(this.pagingOn?(this.currentPage-1)*this.rowsBufferOutSize:0));n.nid=n.sid;n.sobj.callEvent("onGridReconstructed",[]);return}if(this._h2&&typeof n.tid!="undefined"&&n.dropmode=="sibling"&&(this._sbmod||n.tid)?n.before?f=n.uid().tobj.addRowBefore(n.nid,n.data(),n.tid,n.img(),n.childs()):n.alfa&&this._sbmod&&this._h2.get[n.tid].childs.length?(this.openItem(n.tid),f=n.uid().tobj.addRowBefore(n.nid,n.data(),this._h2.get[n.tid].childs[0].id,n.img(),n.childs())):f=n.uid().tobj.addRowAfter(n.nid,n.data(),n.tid,n.img(),n.childs()):f=n.uid().tobj.addRow(n.nid,n.data(),n.ind(),n.pid(),n.img(),n.childs()),f._attrs=n.attrs(),n.source=="tree"){if(this.callEvent("onRowAdded",[n.nid]),e=n.sobj._globalIdStorageFind(n.sid),e.childsCount){for(t=n.copy().set("tid",n.nid).set("dropmode",n.target=="grid"?"sibling":"child"),i=0;i<e.childsCount;i++)n.tobj._dragRoutine(t.set("sid",e.childNodes[i].id)),n.mode=="move"&&i--;t.close()}}else if(n.tobj._copyUserData(n),this.callEvent("onRowAdded",[n.nid]),n.source=="treeGrid"&&(n.sobj==n.tobj&&(f._xml=n.sobj.rowsAr[n.sid]._xml),r=n.sobj._h2.get[n.sid],r&&r.childs.length)){if(t=n.copy().set("tid",n.nid),n.target=="grid"?t.set("dropmode","sibling"):(t.tobj.kidsXmlFile||t.tobj.openItem(n.tid),t.set("dropmode","child")),o=r.childs.length,!t.tobj.kidsXmlFile)for(i=0;i<o;i++)n.sobj.render_row_tree(null,r.childs[i].id),n.tobj._dragRoutine(t.set("sid",r.childs[i].id)),o!=r.childs.length&&(i--,o=r.childs.length);t.close()}n.mode=="move"&&(n.sobj[n.source=="tree"?"deleteItem":"deleteRow"](n.sid),n.sobj!=n.tobj||n.tobj.rowsAr[n.sid]||(n.tobj.changeRowId(n.nid,n.sid),n.nid=n.sid))};dhtmlXGridObject.prototype.gridToGrid=function(n,t){for(var r=[],i=0;i<t.hdr.rows[0].cells.length;i++)r[i]=t.cells(n,i).getValue();return r};dhtmlXGridObject.prototype.checkParentLine=function(n,t){return!this._h2||!t||!n?!1:n.id==t?!0:this.checkParentLine(n.parent,t)};dhtmlXGridObject.prototype._dragIn=function(n,t,i,r){var e,u,f;return this.dADTempOff?(e=this.isTreeGrid(),u=t.parentNode.idd?t.parentNode:t.parentObject,this._drag_validate&&(n.parentNode==t.parentNode||e&&this==u.grid&&this.checkParentLine(this._h2.get[n.parentNode.idd],t.parentNode.idd)))?0:this.callEvent("onDragIn",[u.idd||u.id,n.parentNode.idd,u.grid||u.treeNod,n.grid||n.parentNode.grid])?(this._setMove(n,i,r),e&&n.parentNode.expand!=""?(f=this,this._autoOpenTimer=window.setTimeout(function(){f._autoOpenItem(null,f);f=null},1e3),this._autoOpenId=n.parentNode.idd):this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer),n):this._setMove(n,i,r,!0):0};dhtmlXGridObject.prototype._autoOpenItem=function(n,t){t.openItem(t._autoOpenId)};dhtmlXGridObject.prototype._dragOut=function(n){this._clearMove();var t=n.parentNode.parentObject?n.parentObject.id:n.parentNode.idd;this.callEvent("onDragOut",[t]);this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer)};dhtmlXGridObject.prototype._setMove=function(n,t,i,r){var f,e,o,u;if(n.parentNode.idd){if(f=dhx4.absTop(n),e=dhx4.absTop(this.objBox),f-e>parseInt(this.objBox.offsetHeight)-50&&(this.objBox.scrollTop=parseInt(this.objBox.scrollTop)+20),f-e+parseInt(this.objBox.scrollTop)<parseInt(this.objBox.scrollTop)+30&&(this.objBox.scrollTop=parseInt(this.objBox.scrollTop)-20),r)return 0;if(this.dadmode==2?(u=i-f+(document.body.scrollTop||document.documentElement.scrollTop)-2-n.offsetHeight/2,Math.abs(u)-n.offsetHeight/6>0?(this.dadmodec=1,this.dadmodefix=u<0?-1:1):this.dadmodec=0):this.dadmodec=this.dadmode,this.dadmodec)this._sdrgc||this._createSdrgc(),this._sdrgc.style.display="block",this._sdrgc.style.top=f-e+parseInt(this.objBox.scrollTop)+(this.dadmodefix>=0?n.offsetHeight:0)+"px";else if(this._llSelD=n,n.parentNode.tagName=="TR")for(o=0;o<n.parentNode.childNodes.length;o++)u=n.parentNode.childNodes[o],u._bgCol=u.style.backgroundColor,u.style.backgroundColor="#FFCCCC"}};dhtmlXGridObject.prototype._clearMove=function(){var t,n;if(this._sdrgc&&(this._sdrgc.style.display="none"),this._llSelD&&this._llSelD.parentNode.tagName=="TR")for(t=this._llSelD.parentNode.childNodes,n=0;n<t.length;n++)t[n].style.backgroundColor=t[n]._bgCol;this._llSelD=null};dhtmlXGridObject.prototype.rowToDragElement=function(n){return this.cells(n,0).getValue()};dhtmlXGridObject.prototype._copyUserData=function(n){if(!n.tobj.UserData[n.nid]||n.tobj!=n.sobj){n.tobj.UserData[n.nid]=new Hashtable;var i=n.sobj.UserData[n.sid],t=n.tobj.UserData[n.nid];i&&(t.keys=t.keys.concat(i.keys),t.values=t.values.concat(i.values))}};dhtmlXGridObject.prototype.moveRow=function(n,t,i,r){switch(t){case"row_sibling":this.moveRowTo(n,i,"move","sibling",this,r);break;case"up":this.moveRowUp(n);break;case"down":this.moveRowDown(n)}};dhtmlXGridObject.prototype._nonTrivialNode=function(n,t,i,r,u){var e,o,s,c,h,f;if(n.callEvent&&!u&&!n.callEvent("onDrag",[r.idd,t.id,i?i.id:null,this,n]))return!1;for(e=r.idd,o=e;n._idpull[o];)o+=(new Date).getMilliseconds().toString();if(s=this.isTreeGrid()?this.getItemImage(e):"",i){for(f=0;f<t.childsCount;f++)if(t.childNodes[f]==i)break;f!=0?i=t.childNodes[f-1]:(st="TOP",i="")}if(c=n._attachChildNode(t,o,this.gridToTreeElement(n,o,e),"",s,s,s,"","",i),this._h2&&(h=this._h2.get[e],h.childs.length))for(f=0;f<h.childs.length;f++)this._nonTrivialNode(n,c,0,this.rowsAr[h.childs[f].id],1),this.dpcpy||f--;this.dpcpy||this.deleteRow(e);n.callEvent&&!u&&n.callEvent("onDrop",[o,t.id,i?i.id:null,this,n])};dhtmlXGridObject.prototype.gridToTreeElement=function(n,t,i){return this.cells(i,0).getValue()};dhtmlXGridObject.prototype.treeToGridElement=function(n,t){var r=[],u=this.cellType._dhx_find("tree"),i;for(u==-1&&(u=0),i=0;i<this.getColumnCount();i++)r[r.length]=i!=u?n.getUserData(t,this.getColumnId(i))||"":n.getItemText(t);return r};dhtmlXGridObject.prototype.moveRowTo=function(n,t,i,r,u,f){var e=new dragContext((u||this).isTreeGrid()?"treeGrid":"grid",(f||this).isTreeGrid()?"treeGrid":"grid",i,r||"sibling",n,t,u||this,f||this);return e.tobj._dragRoutine(e),e.close(),e.nid};dhtmlXGridObject.prototype.enableMercyDrag=function(n){this.dpcpy=dhx4.s2b(n)};dhtmlXGridObject.prototype.toPDF=function(n,t,i,r,u,f){function p(n){for(var a,f,t,o,y,s,h,c,l=[],u=1;u<e.hdr.rows.length;u++)for(l[u]=[],t=0;t<e._cCount;t++)a=e.hdr.rows[u].childNodes[t],l[u][t]||(l[u][t]=[0,0]),a&&(l[u][a._cellIndexS]=[a.colSpan,a.rowSpan]);for(f="<rows profile='"+n+"'",i&&(f+=" header='"+i+"'"),r&&(f+=" footer='"+r+"'"),f+="><head>"+e._serialiseExportConfig(l).replace(/^<head/,"<columns").replace(/head>$/,"columns>"),u=2;u<e.hdr.rows.length;u++){var v=0,w=e.hdr.rows[u],p="";for(t=0;t<e._cCount;t++){if(e._srClmn&&!e._srClmn[t]||e._hrrar[t]&&(!e._fake||t>=e._fake.hdrLabels.length)){v++;continue}for(o=l[u][t],y=o[0]&&o[0]>1?' colspan="'+o[0]+'" ':"",o[1]&&o[1]>1&&(y+=' rowspan="'+o[1]+'" ',v=-1),s="",h=w,e._fake&&t<e._fake._cCount&&(h=e._fake.hdr.rows[u]),c=0;c<h.cells.length;c++)if(h.cells[c]._cellIndexS==t){s=h.cells[c].getElementsByTagName("SELECT").length?"":_isIE?h.cells[c].innerText:h.cells[c].textContent;s=s.replace(/[ \n\r\t\xA0]+/," ");break}s&&s!=" "||v++;p+="<column"+y+"><![CDATA["+s+"]\]><\/column>"}v!=e._cCount&&(f+="\n<columns>"+p+"<\/columns>")}return f+="<\/head>\n",f+b()}function w(){var t=[],n;if(u)for(n=0;n<u.length;n++)t.push(y(e.getRowIndex(u[n])));else for(n=0;n<e.getRowsNum();n++)t.push(y(n));return t.join("\n")}function b(){var r=["<foot>"],f,t,i,n,u,o;if(!e.ftr)return"";for(f=1;f<e.ftr.rows.length;f++){for(r.push("<columns>"),t=e.ftr.rows[f],i=0;i<e._cCount;i++)if((!e._srClmn||e._srClmn[i])&&(!e._hrrar[i]||!(!e._fake||i>=e._fake.hdrLabels.length))){for(n=0;n<t.cells.length;n++)if(u="",o="",t.cells[n]._cellIndexS==i){u=_isIE?t.cells[n].innerText:t.cells[n].textContent;u=u.replace(/[ \n\r\t\xA0]+/," ");t.cells[n].colSpan&&t.cells[n].colSpan!=1&&(o=" colspan='"+t.cells[n].colSpan+"' ");t.cells[n].rowSpan&&t.cells[n].rowSpan!=1&&(o=" rowspan='"+t.cells[n].rowSpan+"' ");break}r.push("<column"+o+"><![CDATA["+u+"]\]><\/column>")}r.push("<\/columns>")}return r.push("<\/foot>"),r.join("\n")}function h(n,t){return(window.getComputedStyle?window.getComputedStyle(n,null)[t]:n.currentStyle?n.currentStyle[t]:null)||""}function y(n){var u,o,r,i,t;if(!e.rowsBuffer[n]||(u=e.render_row(n),u.style.display=="none"))return"";for(o=e.isTreeGrid()?' level="'+e.getLevel(u.idd)+'"':"",r="<row"+o+">",i=0;i<e._cCount;i++)if((!e._srClmn||e._srClmn[i])&&(!e._hrrar[i]||e._fake&&i<e._fake.hdrLabels.length)){if(t=e.cells(u.idd,i),v){var s=h(t.cell,"color"),f=h(t.cell,"backgroundColor"),c=h(t.cell,"font-weight")||h(t.cell,"fontWeight"),l=h(t.cell,"font-style")||h(t.cell,"fontStyle"),a=h(t.cell,"text-align")||h(t.cell,"textAlign"),y=h(t.cell,"font-family")||h(t.cell,"fontFamily");(f=="transparent"||f=="rgba(0, 0, 0, 0)")&&(f="rgb(255,255,255)");r+="<cell bgColor='"+f+"' textColor='"+s+"' bold='"+c+"' italic='"+l+"' align='"+a+"' font='"+y+"'>"}else r+="<cell>";r+="<![CDATA["+(t.getContent?t.getContent():t.getTitle())+"]\]><\/cell>"}return r+"<\/row>"}function k(){return"<\/rows>"}var o={row:(this.getSelectedRowId()||"").split(this.delim),col:this.getSelectedCellIndex()},c,v,e,l,a,s;if(o.row===null||o.col===-1)o=!1;else if(o.row)for(s=0;s<o.row.length;s++)o.row[s]&&(c=this.cells(o.row[s],o.col).cell,c.parentNode.className=c.parentNode.className.replace(" rowselected",""),c.className=c.className.replace(" cellselected",""),o.row[s]=c);else o=!1;if(t=t||"color",v=t=="full_color",e=this,e._asCDATA=!0,this.target=typeof f=="undefined"?' target="_blank"':f,eXcell_ch.prototype.getContent=function(){return this.getValue()},eXcell_ra.prototype.getContent=function(){return this.getValue()},l=document.createElement("div"),l.style.display="none",document.body.appendChild(l),a="form_"+e.uid(),l.innerHTML='<form id="'+a+'" method="post" action="'+n+'" accept-charset="utf-8"  enctype="application/x-www-form-urlencoded"'+this.target+'><input type="hidden" name="grid_xml" id="grid_xml"/> <\/form>',document.getElementById(a).firstChild.value=encodeURIComponent(p(t).replace("","-")+w()+k()),document.getElementById(a).submit(),l.parentNode.removeChild(l),e=null,o&&o.row.length)for(s=0;s<o.row.length;s++)o.row[s].parentNode.className+=" rowselected",o.row.length==1&&(o.row[s].className+=" cellselected");o=null};dhtmlXGridObject.prototype._serialiseExportConfig=function(n){function s(n){return typeof n!="string"?n:(n=n.replace(/&/g,"&amp;"),n=n.replace(/"/g,"&quot;"),n=n.replace(/'/g,"&apos;"),n=n.replace(/</g,"&lt;"),n.replace(/>/g,"&gt;"))}for(var r,i,o,f,e,u="<head>",t=0;t<this.hdr.rows[0].cells.length;t++)if((!this._srClmn||this._srClmn[t])&&(!this._hrrar[t]||!(!this._fake||t>=this._fake.hdrLabels.length))){if(r=this.fldSort[t],r=="cus"&&(r=this._customSorts[t].toString(),r=r.replace(/function[\ ]*/,"").replace(/\([^\f]*/,"")),i=n[1][t],o=(i[1]&&i[1]>1?' rowspan="'+i[1]+'" ':"")+(i[0]&&i[0]>1?' colspan="'+i[0]+'" ':""),u+="<column "+o+" width='"+this.getColWidth(t)+"' align='"+this.cellAlign[t]+"' type='"+this.cellType[t]+"' hidden='"+(this.isColumnHidden&&this.isColumnHidden(t)?"true":"false")+"' sort='"+(r||"na")+"' color='"+(this.columnColor[t]||"")+"'"+(this.columnIds[t]?" id='"+this.columnIds[t]+"'":"")+">",u+=this._asCDATA?"<![CDATA["+this.getColumnLabel(t)+"]\]>":this.getColumnLabel(t),f=this.combos[t]?this.getCombo(t):null,f)for(e=0;e<f.keys.length;e++)u+="<option value='"+s(f.keys[e])+"'><![CDATA["+f.values[e]+"]\]><\/option>";u+="<\/column>"}return u+"<\/head>"};window.eXcell_sub_row_grid&&(window.eXcell_sub_row_grid.prototype.getContent=function(){return""});dhtmlXGridObject.prototype.toExcel=function(n,t,i,r,u){var f,e;document.getElementById("ifr")||(f=document.createElement("iframe"),f.style.display="none",f.setAttribute("name","dhx_export_iframe"),f.setAttribute("src",""),f.setAttribute("id","dhx_export_iframe"),document.body.appendChild(f));e=' target="dhx_export_iframe"';this.toPDF(n,t,i,r,u,e)};dhtmlXGridObject.prototype.filterBy=function(n,t,i){var u,r;if(this.isTreeGrid())return this.filterTreeBy(n,t,i);if(this._f_rowsBuffer?i||(this.rowsBuffer=dhtmlxArray([].concat(this._f_rowsBuffer)),this._fake&&(this._fake.rowsBuffer=this.rowsBuffer)):this._f_rowsBuffer=[].concat(this.rowsBuffer),this.rowsBuffer.length){if(u=!0,this.dma(!0),typeof n=="object")for(r=0;r<t.length;r++)this._filterA(n[r],t[r]);else this._filterA(n,t);this.dma(!1);this.pagingOn&&this.rowsBuffer.length/this.rowsBufferOutSize<this.currentPage-1&&this.changePage(0);this._reset_view();this.callEvent("onGridReconstructed",[])}};dhtmlXGridObject.prototype._filterA=function(n,t){var r,i;if(t!=""&&(r=!0,typeof t=="function"?r=!1:t=(t||"").toString().toLowerCase(),this.rowsBuffer.length))for(i=this.rowsBuffer.length-1;i>=0;i--)(r?this._get_cell_value(this.rowsBuffer[i],n).toString().toLowerCase().indexOf(t)!=-1:t.call(this,this._get_cell_value(this.rowsBuffer[i],n),this.rowsBuffer[i].idd))||this.rowsBuffer.splice(i,1)};dhtmlXGridObject.prototype.getFilterElement=function(n){if(this.filters){for(var t=0;t<this.filters.length;t++)if(this.filters[t][1]==n)return this.filters[t][0].combo||this.filters[t][0];return null}};dhtmlXGridObject.prototype.collectValues=function(n){var e=this.dhxevs.data.oncollectvalues,u,l,o,r,h,i,t,c,v;if(e){u=!0;for(l in e)o=e[l].call(this,n),o!==!0&&(u=o||u);if(u!==!0)return u}if(this.isTreeGrid())return this.collectTreeValues(n);this.dma(!0);this._build_m_order();n=this._m_order?this._m_order[n]:n;var s={},a=[],f=this._f_rowsBuffer||this.rowsBuffer;for(r=0;r<f.length;r++)h=this._get_cell_value(f[r],n),h&&(!f[r]._childIndexes||f[r]._childIndexes[n]!=f[r]._childIndexes[n-1])&&(s[h]=!0);this.dma(!1);i=this.combos[n]||(this._col_combos&&this._col_combos[n]?this._col_combos[n]:this._sub_trees&&this._sub_trees[n]?this._sub_trees[n][0]:!1);for(t in s)s[t]===!0&&(i&&(i.get&&i.get(t)?t=i.get(t):i.getOption&&i.getOption(t)?t=i.getOption(t).text:i.getItemText&&(c=i.getItemText(t),v=this._sub_trees[n][1]=this._sub_trees[n][1]||{},v[c]=t,t=c)),a.push(t));return a.sort()};dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var n=0;n<this._c_order.length;n++)this._m_order[this._c_order[n]]=n}};dhtmlXGridObject.prototype.filterByAll=function(){var u=[],f=[],i,t,n,r;for(this._build_m_order(),i=0;i<this.filters.length;i++)(t=this._m_order?this._m_order[this.filters[i][1]]:this.filters[i][1],t>=this._cCount)||(f.push(t),n=this.filters[i][0].old_value=this.filters[i][0].value,this.filters[i][0]._filter&&(n=this.filters[i][0]._filter()),typeof n!="function"&&(r=this.combos[t]||(this._col_combos&&this._col_combos[t]?this._col_combos[t]:this._sub_trees&&this._sub_trees[t]?this._sub_trees[t][1]:!1))&&(r.values?(t=r.values._dhx_find(n),n=t==-1?n:r.keys[t]):n=r.getOptionByLabel?r.getOptionByLabel(n)?r.getOptionByLabel(n).value:n:r[n]),u.push(n));this.callEvent("onFilterStart",[f,u])&&(this.filterBy(f,u),this._cssEven&&this._fixAlterCss(),this.callEvent("onFilterEnd",[this.filters]),this._f_rowsBuffer&&this.rowsBuffer.length==this._f_rowsBuffer.length&&(this._f_rowsBuffer=null))};dhtmlXGridObject.prototype.makeFilter=function(n,t){var r,i;(this.filters||(this.filters=[]),typeof n!="object"&&(n=document.getElementById(n)),n)&&(r=this,n.style.width||(n.style.width="90%"),n.tagName=="SELECT"?(this.filters.push([n,t]),this._loadSelectOptins(n,t),n.onchange=function(){r.filterByAll()},_isIE&&(n.style.marginTop="1px"),this.attachEvent("onEditCell",function(i,r,u){return this._build_m_order(),i==2&&this.filters&&(this._m_order?u==this._m_order[t]:u==t)&&this._loadSelectOptins(n,t),!0})):n.tagName=="INPUT"?(this.filters.push([n,t]),n.old_value=n.value="",n.onkeydown=function(){this._timer&&window.clearTimeout(this._timer);this._timer=window.setTimeout(function(){n.value!=n.old_value&&(r.filterByAll(),n.old_value=n.value)},500)}):n.tagName=="DIV"&&(this.filters.push([n,t]),n.style.padding="0px",n.style.margin="0px",window.dhx_globalImgPath||(window.dhx_globalImgPath=this.imgURL),i=new dhtmlXCombo(n,"_filter","90%"),i.filterSelfA=i.filterSelf,i.filterSelf=function(){this.getSelectedIndex()==0&&this.setComboText("");this.filterSelfA.apply(this,arguments);this.optionsArr[0].hide(!1)},i.enableFilteringMode(!0),n.combo=i,n.value="",this._loadComboOptins(n,t),i.attachEvent("onChange",function(){n.value=i.getSelectedValue();n.value===null&&(n.value="");r.filterByAll()})),n.parentNode&&(n.parentNode.className+=" filter"),this._filters_ready())};dhtmlXGridObject.prototype.findCell=function(n,t,i,r){var r=r||function(n,t){return t.toString().toLowerCase().indexOf(n)!=-1},u,f,e;if(r===!0&&(r=function(n,t){return t.toString().toLowerCase()==n}),u=[],n=n.toString().toLowerCase(),typeof i!="number"&&(i=i?1:0),!this.rowsBuffer.length)return u;for(f=t||0;f<this._cCount;f++){if(this._h2)this._h2.forEachChild(0,function(t){if(i&&u.length==i)return u;r(n,this._get_cell_value(t.buff,f))&&u.push([t.id,f])},this);else for(e=0;e<this.rowsBuffer.length;e++)if(r(n,this._get_cell_value(this.rowsBuffer[e],f))&&(u.push([this.rowsBuffer[e].idd,f]),i&&u.length==i))return u;if(typeof t!="undefined")return u}return u};dhtmlXGridObject.prototype.makeSearch=function(n,t,i){if(typeof n!="object"&&(n=document.getElementById(n)),n){var r=this;n.tagName=="INPUT"&&(n.onkeypress=function(){this._timer&&window.clearTimeout(this._timer);this._timer=window.setTimeout(function(){if(n.value!=""){var u=r.findCell(n.value,t,!0,i);u.length&&(r._h2&&r.openItem(u[0][0]),r.selectCell(r.getRowIndex(u[0][0]),t||0))}},500)});n.parentNode&&(n.parentNode.className+=" filter")}};dhtmlXGridObject.prototype._loadSelectOptins=function(n,t){var r=this.collectValues(t),f=n.value,u,i;for(n.innerHTML="",n.options[0]=new Option("",""),u=this._filter_tr?this._filter_tr[t]:null,i=0;i<r.length;i++)n.options[n.options.length]=new Option(u?u(r[i]):r[i],r[i]);n.value=f};dhtmlXGridObject.prototype.setSelectFilterLabel=function(n,t){this._filter_tr||(this._filter_tr=[]);this._filter_tr[n]=t};dhtmlXGridObject.prototype._loadComboOptins=function(n,t){var r,u,i;if(n.combo){for(r=this.collectValues(t),n.combo.clearAll(),u=[["",""]],i=0;i<r.length;i++)u.push([r[i],r[i]]);n.combo.addOption(u)}};dhtmlXGridObject.prototype.refreshFilters=function(){if(this.filters)for(var n=0;n<this.filters.length;n++)switch(this.filters[n][0].tagName.toLowerCase()){case"select":this._loadSelectOptins.apply(this,this.filters[n]);break;case"div":this._loadComboOptins.apply(this,this.filters[n])}};dhtmlXGridObject.prototype._filters_ready=function(){this.attachEvent("onXLE",this.refreshFilters);this.attachEvent("onSyncApply",this.refreshFilters);this.attachEvent("onRowCreated",function(n,t){if(this._f_rowsBuffer)for(var i=0;i<this._f_rowsBuffer.length;i++)if(this._f_rowsBuffer[i].idd==n)return this._f_rowsBuffer[i]=t});this.attachEvent("onClearAll",function(){this._f_rowsBuffer=null;this.hdr.rows.length||(this.filters=[])});this.attachEvent("onSetSizes",this._filters_resize_combo);this.attachEvent("onResize",this._filters_resize_combo);this._filters_ready=function(){}};dhtmlXGridObject.prototype._filters_resize_combo=function(){if(this.filters){for(var n=0;n<this.filters.length;n++)this.filters[n][0].combo!=null&&this.filters[n][0].combo.setSize(Math.round(this.filters[n][0].offsetWidth*90/100));return!0}};dhtmlXGridObject.prototype._in_header_text_filter=function(n,t){n.innerHTML="<input type='text'>";n.onclick=n.onmousedown=function(n){return(n||event).cancelBubble=!0,!0};n.onselectstart=function(){return event.cancelBubble=!0};this.makeFilter(n.firstChild,t)};dhtmlXGridObject.prototype._in_header_text_filter_inc=function(n,t){n.innerHTML="<input type='text'>";n.onclick=n.onmousedown=function(n){return(n||event).cancelBubble=!0,!0};n.onselectstart=function(){return event.cancelBubble=!0};this.makeFilter(n.firstChild,t);n.firstChild._filter=function(){return n.firstChild.value==""?"":function(t){return t.toString().toLowerCase().indexOf(n.firstChild.value.toLowerCase())==0}};this._filters_ready()};dhtmlXGridObject.prototype._in_header_select_filter=function(n,t){n.innerHTML="<select><\/select>";n.onclick=function(n){return(n||event).cancelBubble=!0,!1};this.makeFilter(n.firstChild,t)};dhtmlXGridObject.prototype._in_header_select_filter_strict=function(n,t){n.innerHTML="<select style='width:90%; font-size:8pt; font-family:Tahoma;'><\/select>";n.onclick=function(n){return(n||event).cancelBubble=!0,!1};this.makeFilter(n.firstChild,t);var i=this.combos;n.firstChild._filter=function(){var r=n.firstChild.value;return r?(i[t]&&(r=i[t].keys[i[t].values._dhx_find(r)]),r=r.toLowerCase(),function(n){return n.toString().toLowerCase()==r}):""};this._filters_ready()};dhtmlXGridObject.prototype._in_header_combo_filter=function(n,t){n.innerHTML="<div style='width:100%; padding-left:2px; overflow:hidden; ' class='combo'><\/div>";n.onselectstart=function(){return event.cancelBubble=!0};n.onclick=n.onmousedown=function(n){return(n||event).cancelBubble=!0,!0};this.makeFilter(n.firstChild,t)};dhtmlXGridObject.prototype._search_common=function(n){n.innerHTML="<input type='text' style='width:90%; '>";n.onclick=n.onmousedown=function(n){return(n||event).cancelBubble=!0,!0};n.onselectstart=function(){return event.cancelBubble=!0}};dhtmlXGridObject.prototype._in_header_text_search=function(n,t){this._search_common(n,t);this.makeSearch(n.firstChild,t)};dhtmlXGridObject.prototype._in_header_text_search_strict=function(n,t){this._search_common(n,t);this.makeSearch(n.firstChild,t,!0)};dhtmlXGridObject.prototype._in_header_numeric_filter=function(n,t){this._in_header_text_filter.call(this,n,t);n.firstChild._filter=function(){var n=this.value,i,r="==",t=parseFloat(n.replace("=","")),u=null;return n?n.indexOf("..")!=-1?(n=n.split(".."),t=parseFloat(n[0]),u=parseFloat(n[1]),function(n){return n>=t&&n<=u?!0:!1}):(i=n.match(/>=|<=|>|</),i&&(r=i[0],t=parseFloat(n.replace(r,""))),Function("v"," if (v "+r+" "+t+" ) return true; return false;")):""}};dhtmlXGridObject.prototype._in_header_master_checkbox=function(n,t,i){n.innerHTML=i[0]+"<input type='checkbox' />"+i[1];var r=this;n.getElementsByTagName("input")[0].onclick=function(n){r._build_m_order();var i=r._m_order?r._m_order[t]:t,u=this.checked?1:0;r.forEachRowA(function(n){var t=this.cells(n,i);t.isCheckbox()&&!t.isDisabled()&&(t.setValue(u),t.cell.wasChanged=!0);this.callEvent("onEditCell",[1,n,i,u]);this.callEvent("onCheckbox",[n,i,u]);this.callEvent("onCheck",[n,i,u])});(n||event).cancelBubble=!0}};dhtmlXGridObject.prototype._in_header_stat_total=function(n,t,i){var r=function(){var r=0,n,i,u;for(this._build_m_order(),n=this._m_order?this._m_order[t]:t,i=0;i<this.rowsBuffer.length;i++)u=parseFloat(this._get_cell_value(this.rowsBuffer[i],n)),r+=isNaN(u)?0:u;return this._maskArr[n]?this._aplNF(r,n):Math.round(r*100)/100};this._stat_in_header(n,r,t,i,i)};dhtmlXGridObject.prototype._in_header_stat_multi_total=function(n,t,i){var r=i[1].split(":"),u,o,e,f;for(i[1]="",u=0;u<r.length;u++)r[u]=parseInt(r[u]);for(o=function(){for(var n,i,u=0,f=0;f<this.rowsBuffer.length;f++){for(n=1,i=0;i<r.length;i++)n*=parseFloat(this._get_cell_value(this.rowsBuffer[f],r[i]));u+=isNaN(n)?0:n}return this._maskArr[t]?this._aplNF(u,t):Math.round(u*100)/100},e=[],f=0;f<r.length;f++)e[r[f]]=!0;this._stat_in_header(n,o,e,i,i)};dhtmlXGridObject.prototype._in_header_stat_max=function(n,t,i){var r=function(){var r,n,i;if(this._build_m_order(),r=this._m_order?this._m_order[t]:t,n=-999999999,this.getRowsNum()==0)return"&nbsp;";for(i=0;i<this.rowsBuffer.length;i++)n=Math.max(n,parseFloat(this._get_cell_value(this.rowsBuffer[i],r)));return this._maskArr[t]?this._aplNF(n,t):n};this._stat_in_header(n,r,t,i)};dhtmlXGridObject.prototype._in_header_stat_min=function(n,t,i){var r=function(){var r,n,i;if(this._build_m_order(),r=this._m_order?this._m_order[t]:t,n=999999999,this.getRowsNum()==0)return"&nbsp;";for(i=0;i<this.rowsBuffer.length;i++)n=Math.min(n,parseFloat(this._get_cell_value(this.rowsBuffer[i],r)));return this._maskArr[t]?this._aplNF(n,t):n};this._stat_in_header(n,r,t,i)};dhtmlXGridObject.prototype._in_header_stat_average=function(n,t,i){var r=function(){var n,u;this._build_m_order();var f=this._m_order?this._m_order[t]:t,i=0,r=0;if(this.getRowsNum()==0)return"&nbsp;";for(n=0;n<this.rowsBuffer.length;n++)u=parseFloat(this._get_cell_value(this.rowsBuffer[n],f)),isNaN(u)||(i+=u,r++);return this._maskArr[t]?this._aplNF(i/r,t):Math.round(i/r*100)/100};this._stat_in_header(n,r,t,i)};dhtmlXGridObject.prototype._in_header_stat_count=function(n,t,i){var r=function(){return this.getRowsNum()};this._stat_in_header(n,r,t,i)};dhtmlXGridObject.prototype._stat_in_header=function(n,t,i,r){var f=this,u=function(){this.dma(!0);n.innerHTML=(r[0]?r[0]:"")+t.call(this)+(r[1]?r[1]:"");this.dma(!1);this.callEvent("onStatReady",[])};this._stat_events||(this._stat_events=[],this.attachEvent("onClearAll",function(){var n,t;if(!this.hdr.rows[1]){for(n=0;n<this._stat_events.length;n++)for(t=0;t<4;t++)this.detachEvent(this._stat_events[n][t]);this._stat_events=[]}}));this._stat_events.push([this.attachEvent("onGridReconstructed",u),this.attachEvent("onXLE",u),this.attachEvent("onFilterEnd",u),this.attachEvent("onEditCell",function(n,t,r){return n==2&&(r==i||i&&i[r])&&u.call(this),!0})]);n.innerHTML=""};dhtmlXGridObject.prototype.loadCSVFile=function(n,t){this.load(n,t,"csv")};dhtmlXGridObject.prototype.enableCSVAutoID=function(n){this._csvAID=dhx4.s2b(n)};dhtmlXGridObject.prototype.enableCSVHeader=function(n){this._csvHdr=dhx4.s2b(n)};dhtmlXGridObject.prototype.setCSVDelimiter=function(n){this.csv.cell=n};dhtmlXGridObject.prototype._csvAID=!0;dhtmlXGridObject.prototype.loadCSVString=function(n){this.parse(n,"csv")};dhtmlXGridObject.prototype.serializeToCSV=function(n){var i,r,u,t,e,f;if(this.editStop(),this._agetm=this._mathSerialization?"getMathValue":this._strictText||n?"getTitle":"getValue",i=[],this._csvHdr)for(r=1;r<this.hdr.rows.length;r++){for(u=[],t=0;t<this._cCount;t++)(!this._srClmn||this._srClmn[t])&&u.push(this.getColumnLabel(t,r-1));i.push(this.csvParser.str(u,this.csv.cell,this.csv.row))}for(t=0,e=this.rowsBuffer.length,t;t<e;t++)f=this._serializeRowToCVS(null,t),f!=""&&i.push(f);return this.csvParser.block(i,this.csv.row)};dhtmlXGridObject.prototype._serializeRowToCVS=function(n,t,i,r){var f=[],c,u,o,s,e,h,l;for(n||(n=this.render_row(t),this._fake&&!this._fake.rowsAr[n.idd]&&this._fake.render_row(t)),this._csvAID||(f[f.length]=n.idd),i=i||0,r=r||this._cCount,c=!1,u=i;n.childNodes[i]._cellIndex>u&&i;)i--;for(o=i;u<r;o++){if(!n.childNodes[o])break;if(s=n.childNodes[o]._cellIndex,this._srClmn&&!this._srClmn[s]||this._serialize_visible&&this._hrrar[s])u++;else{for(e=n.childNodes[o],h=this.cells(n.idd,s);u!=s;)if(u++,f.push(""),u>=r)break;if(u>=r)break;if(u++,zxVal=h.cell?h[this._agetm]():"",this._chAttr&&h.wasChanged()&&(c=!0),f[f.length]=zxVal===null?"":zxVal,this._ecspn&&e.colSpan&&e.colSpan>1)for(e=e.colSpan-1,l=0;l<e;l++)f[f.length]="",u++}}return this._onlChAttr&&!c?"":this.csvParser.str(f,this.csv.cell,this.csv.row)};dhtmlXGridObject.prototype.toClipBoard=function(n){window.clipboardData?window.clipboardData.setData("Text",n):(new Clipboard).copy(n)};dhtmlXGridObject.prototype.fromClipBoard=function(){return window.clipboardData?window.clipboardData.getData("Text"):(new Clipboard).paste()};dhtmlXGridObject.prototype.cellToClipboard=function(n,t){if(!n||!t&&t!==0){if(!this.selectedRows[0])return;n=this.selectedRows[0].idd;t=this.cell._cellIndex}var i=this.cells(n,t);this.toClipBoard(((i.getLabel?i.getLabel():i.getValue())||"").toString())};dhtmlXGridObject.prototype.updateCellFromClipboard=function(n,t){if(!n||!t){if(!this.selectedRows[0])return;n=this.selectedRows[0].idd;t=this.cell._cellIndex}var i=this.cells(n,t);i[i.setImage?"setLabel":"setValue"](this.fromClipBoard())};dhtmlXGridObject.prototype.rowToClipboard=function(n){var r="",t,i;if(this._agetm=this._mathSerialization?"getMathValue":this._strictText?"getTitle":"getValue",this._serialize_visible=!this._fake,n)r=this._serializeRowToCVS(this.getRowById(n));else for(t=[],i=0;i<this.selectedRows.length;i++)t[t.length]=this._serializeRowToCVS(this.selectedRows[i]),r=this.csvParser.block(t,this.csv.row);this._serialize_visible=!1;this.toClipBoard(r)};dhtmlXGridObject.prototype.updateRowFromClipboard=function(n){var t=this.fromClipBoard(),r,f,i,u;if(t&&(r=n?this.getRowById(n):this.selectedRows[0],r))for(f=this.csvParser,t=f.unblock(t,this.csv.cell,this.csv.row)[0],this._csvAID||t.splice(0,1),i=0;i<t.length;i++)u=this.cells3(r,i),u[u.setImage?"setLabel":"setValue"](t[i])};dhtmlXGridObject.prototype.csvParser={block:function(n,t){return n.join(t)},unblock:function(n,t,i){for(var f,r=(n||"").split(i),u=0;u<r.length;u++)r[u]=(r[u]||"").split(t);return f=r.length-1,r[f].length==1&&r[f][0]==""&&r.splice(f,1),r},str:function(n,t){return n.join(t)}};dhtmlXGridObject.prototype.csvExtParser={_quote:RegExp('"',"g"),_quote_esc:RegExp('""',"g"),block:function(n,t){return n.join(t)},unblock:function(n,t,i){var f=[[]],e=0,r,s,h,o;if(!n)return f;var c=/^[ ]*"/,l=/"[ ]*$/,a=new RegExp(".*"+i+".*$"),u=n.split(t);for(r=0;r<u.length;r++)if(u[r].match(c)){for(s=u[r].replace(c,"");!u[r].match(l);)r++,s+=u[r];f[e].push(s.replace(l,"").replace(this._quote_esc,'"'))}else u[r].match(a)?(h=u[r].indexOf(i),f[e].push(u[r].substr(0,h)),e++,f[e]=[],u[r]=u[r].substr(h+1),r--):(u[r]||r!=u.length-1)&&f[e].push(u[r]);return o=f.length-1,o>0&&!f[o].length&&f.splice(o,1),f},str:function(n,t){for(var i=0;i<n.length;i++)n[i]='"'+n[i].replace(this._quote,'""')+'"';return n.join(t)}};dhtmlXGridObject.prototype.addRowFromClipboard=function(){var n=this.fromClipBoard(),i,t;if(n)for(i=this.csvParser.unblock(n,this.csv.cell,this.csv.row),t=0;t<i.length;t++)if(i[t]){if(n=i[t],!n.length)continue;this._csvAID?this.addRow(this.getRowsNum()+2,n):(this.rowsAr[n[0]]&&(n[0]=this.uid()),this.addRow(n[0],n.slice(1)))}};dhtmlXGridObject.prototype.gridToClipboard=function(){this.toClipBoard(this.serializeToCSV())};dhtmlXGridObject.prototype.gridFromClipboard=function(){var n=this.fromClipBoard();n&&this.loadCSVString(n)};dhtmlXGridObject.prototype.getXLS=function(n){var i,r,f,t,e,u;for(this.xslform||(this.xslform=document.createElement("FORM"),this.xslform.action=(n||"")+"xls.php",this.xslform.method="post",this.xslform.target=_isIE?"_blank":"",document.body.appendChild(this.xslform),i=document.createElement("INPUT"),i.type="hidden",i.name="csv",this.xslform.appendChild(i),r=document.createElement("INPUT"),r.type="hidden",r.name="csv_header",this.xslform.appendChild(r)),f=this.serializeToCSV(),this.xslform.childNodes[0].value=f,t=[],e=this._cCount,u=0;u<e;u++)t.push(this.getHeaderCol(u));t=t.join(",");this.xslform.childNodes[1].value=t;this.xslform.submit()};dhtmlXGridObject.prototype.printView=function(n,t){var r="<style>TD { font-family:Arial; text-align:center; padding-left:2px;padding-right:2px; } \n td.filter input, td.filter select { display:none; }\t\n  <\/style>",w=null,a,b,s,e,u,f,h,p,i,l;if(this._fake)for(w=[].concat(this._hrrar),i=0;i<this._fake._cCount;i++)this._hrrar[i]=null;a=document.location.port;b=document.location.hostname;r+="<base  href='"+(document.location.protocol+"//"+b+(a?":"+a:"")+document.location.pathname)+"'><\/base>";this.parentGrid||(r+=n||"");r+='<table width="100%" border="2px" cellpadding="0" cellspacing="0">';var d=Math.max(this.rowsBuffer.length,this.rowsCol.length),o=this._cCount,v=this._printWidth();for(r+='<tr class="header_row_1">',i=0;i<o;i++)if(!this._hrrar||!this._hrrar[i]){var k=this.hdr.rows[1].cells[this.hdr.rows[1]._childIndexes?this.hdr.rows[1]._childIndexes[parseInt(i)]:i],y=k.colSpan||1,g=k.rowSpan||1;for(u=1;u<y;u++)v[i]+=v[u];r+='<td rowspan="'+g+'" width="'+v[i]+'%" style="background-color:lightgrey;" colspan="'+y+'">'+this.getHeaderCol(i)+"<\/td>";i+=y-1}for(r+="<\/tr>",i=2;i<this.hdr.rows.length;i++)if(_isIE){for(r+="<tr style='background-color:lightgrey' class='header_row_"+i+"'>",s=this.hdr.rows[i].childNodes,u=0;u<s.length;u++)this._hrrar&&this._hrrar[s[u]._cellIndex]||(r+=s[u].outerHTML);r+="<\/tr>"}else r+="<tr class='header_row_"+i+"' style='background-color:lightgrey'>"+(this._fake?this._fake.hdr.rows[i].innerHTML:"")+this.hdr.rows[i].innerHTML+"<\/tr>";for(i=0;i<d;i++){if(r+="<tr>",this.rowsCol[i]&&this.rowsCol[i]._cntr){r+=this.rowsCol[i].innerHTML.replace(/<img[^>]*>/gi,"")+"<\/tr>";continue}if(!this.rowsCol[i]||this.rowsCol[i].style.display!="none"){if(this.rowsCol[i])e=this.rowsCol[i].idd;else if(this.rowsBuffer[i])e=this.rowsBuffer[i].idd;else continue;for(u=0;u<o;u++)if(!this._hrrar||!this._hrrar[u]){this.rowsAr[e]&&this.rowsAr[e].tagName=="TR"?(f=this.cells(e,u),h=f._setState?"":f.getContent?f.getContent():f.getImage||f.combo?f.cell.innerHTML:f.getValue()):h=this._get_cell_value(this.rowsBuffer[i],u);var nt=this.columnColor[u]?"background-color:"+this.columnColor[u]+";":"",tt=this.cellAlign[u]?"text-align:"+this.cellAlign[u]+";":"",c=f.getAttribute("colspan");r+='<td style="'+nt+tt+'" '+(c?'colSpan="'+c+'"':"")+">"+(h===""?"&nbsp;":h)+"<\/td>";c&&(u+=c-1)}r+="<\/tr>";this.rowsCol[i]&&this.rowsCol[i]._expanded&&(p=this.cells4(this.rowsCol[i]._expanded.ctrl),r+=p.getSubGrid?'<tr><td colspan="'+o+'">'+p.getSubGrid().printView()+"<\/td><\/tr>":'<tr><td colspan="'+o+'">'+this.rowsCol[i]._expanded.innerHTML+"<\/td><\/tr>")}}if(this.ftr)for(i=1;i<this.ftr.childNodes[0].rows.length;i++)r+="<tr style='background-color:lightgrey'>"+(this._fake?this._fake.ftr.childNodes[0].rows[i].innerHTML:"")+this.ftr.childNodes[0].rows[i].innerHTML+"<\/tr>";if(r+="<\/table>",this.parentGrid)return r;r+=t||"";l=window.open("","_blank");l.document.write(r);l.document.write("<script>window.onerror=function(){return true;}<\/script>");l.document.close();this._fake&&(this._hrrar=w)};dhtmlXGridObject.prototype._printWidth=function(){for(var r,t,u,f,i=[],e=0,n=0;n<this._cCount;n++)r=this.getColWidth(n),i.push(r),e+=r;for(t=[],u=0,n=0;n<i.length;n++)f=Math.floor(i[n]/e*100),u+=f,t.push(f);return t[t.length-1]+=100-u,t};dhtmlXGridObject.prototype.enableBlockSelection=function(n){var t,i;if(typeof this._bs_mode=="undefined"&&(t=this,this.obj.onmousedown=function(n){return t._bs_mode&&t._OnSelectionStart(n||event,this),!0},this._CSVRowDelimiter=this.csv.row,this.attachEvent("onResize",function(){return t._HideSelection(),!0}),this.attachEvent("onGridReconstructed",function(){return t._HideSelection(),!0}),this.attachEvent("onFilterEnd",this._HideSelection)),n===!1)return this._bs_mode=!1,this._HideSelection();this._bs_mode=!0;window.dhx4.isIPad||(i=this._clip_area=document.createElement("textarea"),i.className="dhx_tab_ignore",i.style.cssText="position:absolute; width:1px; height:1px; overflow:hidden; color:transparent; background-color:transparent; bottom:1px; right:1px; border:none;",i.onkeydown=function(n){n=n||event;n.keyCode==86&&(n.ctrlKey||n.metaKey)&&t.pasteBlockFromClipboard()},document.body.insertBefore(this._clip_area,document.body.firstChild),dhtmlxEvent(this.entBox,"click",function(){!t.editor&&t._clip_area&&t._clip_area.select()}))};dhtmlXGridObject.prototype.forceLabelSelection=function(n){this._strictText=dhx4.s2b(n)};dhtmlXGridObject.prototype.selectBlock=function(n,t,i,r){t=this.getRowIndex(t);r=this.getRowIndex(r);this._CreateSelection(t,n);this._selectionArea=this._RedrawSelectionPos(this.cells2(t,n).cell,this.cells2(r,i).cell);this._ShowSelection()};dhtmlXGridObject.prototype._OnSelectionStart=function(n){var i=this,t;if(n.button!=2){if(t=n.srcElement||n.target,this.editor){if(t.tagName&&(t.tagName=="INPUT"||t.tagName=="TEXTAREA"))return;this.editStop()}i.setActive(!0);var r=this.getPosition(this.obj),u=n.clientX-r[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0)),f=n.clientY-r[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));if(this._CreateSelection(u-4,f-4),t==this._selectionObj)this._HideSelection(),this._startSelectionCell=null;else{while(t&&(!t.tagName||t.tagName.toLowerCase()!="td"))t=t.parentNode;this._startSelectionCell=t}if(this._startSelectionCell&&!this.callEvent("onBeforeBlockSelected",[this._startSelectionCell.parentNode.idd,this._startSelectionCell._cellIndex]))return this._startSelectionCell=null;this.obj.onmousedown=null;this.obj[_isIE?"onmouseleave":"onmouseout"]=function(){i._blsTimer&&window.clearTimeout(i._blsTimer)};this.obj.onmmold=this.obj.onmousemove;this._init_pos=[u,f];this._selectionObj.onmousemove=this.obj.onmousemove=function(t){t=t||n;t.preventDefault?t.preventDefault():t.returnValue=!1;i._OnSelectionMove(t)};this._oldDMP=document.body.onmouseup;document.body.onmouseup=function(t){return t=t||n,i._OnSelectionStop(t,this),!0};this.callEvent("onBeforeBlockSelection",[]);document.body.onselectstart=function(){return!1}}};dhtmlXGridObject.prototype._getCellByPos=function(n,t){var r,i;for(n=n,this._fake&&(n+=this._fake.objBox.scrollWidth),t=t,r=0,i=0;i<this.obj.rows.length;i++)if(t-=this.obj.rows[i].offsetHeight,t<=0){r=this.obj.rows[i];break}if(!r||!r.idd)return null;for(i=0;i<this._cCount;i++)if(n-=this.getColWidth(i),n<=0)for(;;)if(r._childIndexes&&r._childIndexes[i+1]==r._childIndexes[i])r=r.previousSibling;else return this.cells(r.idd,i).cell;return null};dhtmlXGridObject.prototype._OnSelectionMove=function(n){var h=this,e,u,o,s;this._ShowSelection();var f=this.getPosition(this.obj),i=n.clientX-f[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0)),r=n.clientY-f[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));if(Math.abs(this._init_pos[0]-i)<5&&Math.abs(this._init_pos[1]-r)<5)return this._HideSelection();e=this._endSelectionCell;this._startSelectionCell==null?this._endSelectionCell=this._startSelectionCell=this.getFirstParentOfType(n.srcElement||n.target,"TD"):(n.srcElement||n.target)&&((n.srcElement||n.target).className=="dhtmlxGrid_selection"?this._endSelectionCell=this._getCellByPos(i,r)||this._endSelectionCell:(u=this.getFirstParentOfType(n.srcElement||n.target,"TD"),u.parentNode.idd&&(this._endSelectionCell=u)));this._endSelectionCell&&(this.callEvent("onBeforeBlockSelected",[this._endSelectionCell.parentNode.idd,this._endSelectionCell._cellIndex])||(this._endSelectionCell=e));var c=this.objBox.scrollLeft+this.objBox.clientWidth,l=this.objBox.scrollTop+this.objBox.clientHeight,a=this.objBox.scrollLeft,v=this.objBox.scrollTop,t=!1;this._blsTimer&&window.clearTimeout(this._blsTimer);i+20>=c?(this.objBox.scrollLeft=this.objBox.scrollLeft+20,t=!0):i-20<a&&(this.objBox.scrollLeft=this.objBox.scrollLeft-20,t=!0);r+20>=l&&!this._realfake?(this.objBox.scrollTop=this.objBox.scrollTop+20,t=!0):r-20<v&&!this._realfake&&(this.objBox.scrollTop=this.objBox.scrollTop-20,t=!0);this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._endSelectionCell);t&&(o=n.clientX,s=n.clientY,this._blsTimer=window.setTimeout(function(){h._OnSelectionMove({clientX:o,clientY:s})},100))};dhtmlXGridObject.prototype._OnSelectionStop=function(n){var i=this,t;if(this._blsTimer&&window.clearTimeout(this._blsTimer),this.obj.onmousedown=function(t){return i._bs_mode&&i._OnSelectionStart(t||n,this),!0},this.obj.onmousemove=this.obj.onmmold||null,this._selectionObj.onmousemove=null,document.body.onmouseup=this._oldDMP||null,parseInt(this._selectionObj.style.width)<2&&parseInt(this._selectionObj.style.height)<2)this._HideSelection();else{for(t=this.getFirstParentOfType(n.srcElement||n.target,"TD"),t&&t.parentNode.idd||(t=this._endSelectionCell);t&&(!t.tagName||t.tagName.toLowerCase()!="td");)t=t.parentNode;if(!t)return this._HideSelection();this._stopSelectionCell=t;this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._stopSelectionCell);this.callEvent("onBlockSelected",[])}document.body.onselectstart=function(){}};dhtmlXGridObject.prototype._RedrawSelectionPos=function(n,t){var i,s,h,c,l,r,e,u,f,o,a,v;return n.parentNode.grid!=t.parentNode.grid?this._selectionArea:(i={},i.LeftTopCol=n._cellIndex,i.LeftTopRow=this.getRowIndex(n.parentNode.idd),i.RightBottomCol=t._cellIndex,i.RightBottomRow=this.getRowIndex(t.parentNode.idd),s=n.offsetWidth,h=n.offsetHeight,n=this.getPosition(n,this.obj),c=t.offsetWidth,l=t.offsetHeight,t=this.getPosition(t,this.obj),n[0]<t[0]?(r=n[0],e=t[0]+c):(u=i.RightBottomCol,i.RightBottomCol=i.LeftTopCol,i.LeftTopCol=u,r=t[0],e=n[0]+s),n[1]<t[1]?(f=n[1],o=t[1]+l):(u=i.RightBottomRow,i.RightBottomRow=i.LeftTopRow,i.LeftTopRow=u,f=t[1],o=n[1]+h),a=e-r,v=o-f,this._selectionObj.style.left=r+"px",this._selectionObj.style.top=f+"px",this._selectionObj.style.width=a+"px",this._selectionObj.style.height=v+"px",i)};dhtmlXGridObject.prototype._CreateSelection=function(n,t){if(this._selectionObj==null){var i=document.createElement("div");i.style.position="absolute";i.style.display="none";i.className="dhtmlxGrid_selection";this._selectionObj=i;this._selectionObj.onmousedown=function(n){return n=n||event,n.button==2||_isMacOS&&n.ctrlKey?this.parentNode.grid.callEvent("onBlockRightClick",["BLOCK",n]):void 0};this._selectionObj.oncontextmenu=function(n){return(n||event).cancelBubble=!0,!1};this.objBox.appendChild(this._selectionObj)}this._selectionObj.style.width="0px";this._selectionObj.style.height="0px";this._selectionObj.style.left=n+"px";this._selectionObj.style.top=t+"px";this._selectionObj.startX=n;this._selectionObj.startY=t};dhtmlXGridObject.prototype._ShowSelection=function(){this._selectionObj&&(this._selectionObj.style.display="")};dhtmlXGridObject.prototype._HideSelection=function(){this._selectionObj&&(this._selectionObj.style.display="none");this._selectionArea=null;this._clip_area&&(this._clip_area.value="",this._clip_area.blur())};dhtmlXGridObject.prototype.copyBlockToClipboard=function(){var n,t,i;if(this._clip_area&&this._selectionArea!=null){for(n=[],this._agetm=this._mathSerialization?"getMathValue":this._strictText?"getTitle":"getValue",this._serialize_visible=!0,t=this._selectionArea.LeftTopRow;t<=this._selectionArea.RightBottomRow;t++)i=this._serializeRowToCVS(this.rowsBuffer[t],null,this._selectionArea.LeftTopCol,this._selectionArea.RightBottomCol+1),n[n.length]=this._csvAID?i:i.substr(i.indexOf(this.csv.cell)+1);n=n.join(this._CSVRowDelimiter);this._clip_area.value=n;this._clip_area.select();this._serialize_visible=!1}};dhtmlXGridObject.prototype.pasteBlockFromClipboard=function(){if(this._clip_area){this._clip_area.select();var n=this;window.setTimeout(function(){n._pasteBlockFromClipboard();n=null},1)}};dhtmlXGridObject.prototype._pasteBlockFromClipboard=function(){var t=this._clip_area.value,h,c,a,r,u,l,e,i,f,n,o,s;if(t){if(this._selectionArea!=null)h=this._selectionArea.LeftTopRow,c=this._selectionArea.LeftTopCol;else{if(this.cell==null||this.editor)return!1;h=this.getRowIndex(this.cell.parentNode.idd);c=this.cell._cellIndex}for(t=this.csvParser.unblock(t,this.csv.cell,this.csv.row),a=h+t.length,r=c+t[0].length,r>this._cCount&&(r=this._cCount),u=0,l=h;l<a;l++)if(e=this.render_row(l),e!=-1){for(i=0,f=c;f<r;f++){if(this._hrrar[f]&&!this._fake){r=Math.min(r+1,this._cCount);continue}if(n=this.cells3(e,f),n.isDisabled()){i++;continue}if(this._onEditUndoRedo&&this._onEditUndoRedo(2,e.idd,f,t[u][i],n.getValue()),n.combo){for(o=n.combo.values,s=0;s<o.length;s++)if(t[u][i]==o[s]){n.setValue(n.combo.keys[s]);o=null;break}o!=null&&n.editable?n.setValue(t[u][i++]):i++}else n[n.setImage?"setLabel":"setValue"](t[u][i++]);n.cell.wasChanged=!0}this.callEvent("onRowPaste",[e.idd]);u++}}};dhtmlXGridObject.prototype.getSelectedBlock=function(){return this._selectionArea?this._selectionArea:this.getSelectedRowId()!==null?{LeftTopRow:this.getSelectedRowId(),LeftTopCol:this.getSelectedCellIndex(),RightBottomRow:this.getSelectedRowId(),RightBottomCol:this.getSelectedCellIndex()}:null};dhtmlXGridObject.prototype.enableSmartRendering=function(n,t,i){arguments.length>2&&(t&&!this.rowsBuffer[t-1]&&(this.rowsBuffer[t-1]=0),t=i);this._srnd=dhx4.s2b(n);this._srdh=this._srdh||20;this._dpref=t||0};dhtmlXGridObject.prototype.enablePreRendering=function(n){this._srnd_pr=parseInt(n||50)};dhtmlXGridObject.prototype.forceFullLoading=function(n,t){for(var r,u,i=0;i<this.rowsBuffer.length;i++)if(!this.rowsBuffer[i]){r=n||this.rowsBuffer.length-i;this.callEvent("onDynXLS",[i,r])&&(u=this,this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+i+"&count="+r,function(){window.setTimeout(function(){u.forceFullLoading(n,t)},100)},this._data_type));return}t&&t.call(this)};dhtmlXGridObject.prototype.setAwaitedRowHeight=function(n){this._srdh=parseInt(n)};dhtmlXGridObject.prototype._get_view_size=function(){return Math.floor(parseInt(this.entBox.offsetHeight)/this._srdh)+2};dhtmlXGridObject.prototype._add_filler=function(n,t,i,r){var e,u,f;if(!t)return null;for(e="__filler__",u=this._prepareRow(e),u.firstChild.style.width="1px",u.firstChild.style.borderWidth=u.firstChild.style.padding=u.firstChild.style.margin="0px",f=1;f<u.childNodes.length;f++)u.childNodes[f].style.display="none";return u.firstChild.style.height=t*this._srdh+"px",i=i||this.rowsCol[n],i&&i.nextSibling?i.parentNode.insertBefore(u,i.nextSibling):_isKHTML?this.obj.appendChild(u):this.obj.rows[0].parentNode.appendChild(u),this.callEvent("onAddFiller",[n,t,u,i,r]),[n,t,u]};dhtmlXGridObject.prototype._update_srnd_view=function(){var i=Math.floor(this.objBox.scrollTop/this._srdh),t=i+this._get_view_size(),r,n,f,e,u;if(this.multiLine){for(r=this.objBox.scrollTop,i=0;r>0;)r-=this.rowsCol[i]?this.rowsCol[i].offsetHeight:this._srdh,i++;t=i+this._get_view_size();i>0&&i--}for(t+=this._srnd_pr||0,t>this.rowsBuffer.length&&(t=this.rowsBuffer.length),n=i;n<t;n++)if(!this.rowsCol[n]){if(f=this._add_from_buffer(n),f==-1){this.xmlFileUrl&&(this._dpref&&this.rowsBuffer[t-1]?(e=this._dpref?this._dpref:t-n,u=Math.max(0,Math.min(n,t-this._dpref)),this._current_load=[u,t-u]):this._current_load=[n,this._dpref?this._dpref:t-n],this.callEvent("onDynXLS",this._current_load)&&this.load(this.xmlFileUrl+dhtmlx.url(this.xmlFileUrl)+"posStart="+this._current_load[0]+"&count="+this._current_load[1],this._data_type));return}this._tgle&&(this._updateLine(this._h2.get[this.rowsBuffer[n].idd],this.rowsBuffer[n]),this._updateParentLine(this._h2.get[this.rowsBuffer[n].idd],this.rowsBuffer[n]));n&&n==(this._realfake?this._fake:this)._r_select&&this.selectCell(n,this.cell?this.cell._cellIndex:0,!0)}this._fake&&!this._realfake&&this.multiLine&&(this._fake.objBox.scrollTop=this.objBox.scrollTop)};dhtmlXGridObject.prototype._add_from_buffer=function(n){var t=this.render_row(n),f,r,i,u;if(t==-1)return-1;for((t._attrs.selected||t._attrs.select)&&(this.selectRow(t,!1,!0),t._attrs.selected=t._attrs.select=null),this._cssSP?this._h2&&(f=this._h2.get[t.idd],t.className+=" "+(f.level%2?this._cssUnEven+" "+this._cssUnEven:this._cssEven+" "+this._cssEven)+"_"+f.level+(this.rowsAr[f.id]._css||"")):this._cssEven&&n%2==0?t.className=this._cssEven+(t.className.indexOf("rowselected")!=-1?" rowselected ":" ")+(t._css||""):this._cssUnEven&&n%2==1&&(t.className=this._cssUnEven+(t.className.indexOf("rowselected")!=-1?" rowselected ":" ")+(t._css||"")),r=0;r<this._fillers.length;r++)if(i=this._fillers[r],i&&i[0]<=n&&i[0]+i[1]>n){u=n-i[0];u==0?(this._insert_before(n,t,i[2]),this._update_fillers(r,-1,1)):u==i[1]-1?(this._insert_after(n,t,i[2]),this._update_fillers(r,-1,0)):(this._fillers.push(this._add_filler(n+1,i[1]-u-1,i[2],1)),this._insert_after(n,t,i[2]),this._update_fillers(r,-i[1]+u,0));return}};dhtmlXGridObject.prototype._update_fillers=function(n,t,i){var r=this._fillers[n];r[1]=r[1]+t;r[0]=r[0]+i;r[1]?(r[2].firstChild.style.height=parseFloat(r[2].firstChild.style.height)+t*this._srdh+"px",this.callEvent("onUpdateFiller",[r[2]])):(this.callEvent("onRemoveFiller",[r[2]]),r[2].parentNode.removeChild(r[2]),this._fillers.splice(n,1))};dhtmlXGridObject.prototype._insert_before=function(n,t,i){i.parentNode.insertBefore(t,i);this.rowsCol[n]=t;this.callEvent("onRowInserted",[t,null,i,"before"])};dhtmlXGridObject.prototype._insert_after=function(n,t,i){i.nextSibling?i.parentNode.insertBefore(t,i.nextSibling):i.parentNode.appendChild(t);this.rowsCol[n]=t;this.callEvent("onRowInserted",[t,null,i,"after"])};typeof dhtmlxValidation!="undefined"&&(dhtmlxValidation.trackInput=function(n,t,i,r){dhtmlxEvent(n,"keyup",function(){dhtmlxValidation._timer&&(window.clearTimeout(dhtmlxValidation._timer),dhtmlxValidation._timer=null);dhtmlxValidation._timer=window.setTimeout(function(){dhtmlxValidation.checkInput(n,t)?(n.className=n.className.replace(/[ ]*dhtmlx_live_validation_error/g,""),r&&r(n,n.value,t)):(!i||i(n,n.value,t))&&(n.className+=" dhtmlx_live_validation_error")},250)})},dhtmlxValidation.checkInput=function(n,t){return dhtmlxValidation.checkValue(n.value,t)},dhtmlxValidation.checkValue=function(n,t){var r,i;for(typeof t=="string"&&(t=t.split(",")),r=!0,i=0;i<t.length;i++)this["is"+t[i]]?r=r&&this["is"+t[i]](n):alert("Incorrect validation rule: "+t[i]);return r});dhtmlXGridObject.prototype.enableValidation=function(n,t){n=dhx4.s2b(n);this._validators=n?{data:[]}:!1;arguments.length>1&&(this._validators._live=t);this._validators._event||(this._validators._event=this.attachEvent("onEditCell",this.validationEvent))};dhtmlXGridObject.prototype.setColValidators=function(n){this._validators||this.enableValidation(!0);typeof n=="string"&&(n=n.split(this.delim));this._validators.data=n};dhtmlXGridObject.prototype.validationEvent=function(n,t,i,r){var e=this._validators,f,u,o;if(!e)return!0;if(f=e.data[i]||this.cells(t,i).getAttribute("validate")||"",n==1&&f){if(u=this.editor||(this._fake||{}).editor,!u)return!0;u.cell.className=u.cell.className.replace(/[ ]*dhtmlx_validation_error/g,"");e._live&&(o=this,dhtmlxValidation.trackInput(u.getInput(),f,function(n,r,u){return o.callEvent("onLiveValidationError",[t,i,r,n,u])},function(n,r,u){return o.callEvent("onLiveValidationCorrect",[t,i,r,n,u])}))}return n==2&&this.validateCell(t,i,f,r),!0};dhtmlXGridObject.prototype.validateCell=function(n,t,i,r){var f,e,u;if(i=i||this._validators.data[t]||this.cells(n,t).getAttribute("validate"),r=r||this.cells(n,t).getValue(),i){for(f=this.cells(n,t).cell,e=!0,typeof i=="string"&&(i=i.split(this.delim)),u=0;u<i.length;u++)dhtmlxValidation.checkValue(r,i[u])||(this.callEvent("onValidationError",[n,t,r,i[u]])&&(f.className+=" dhtmlx_validation_error"),e=!1);return e&&(this.callEvent("onValidationCorrect",[n,t,r,i]),f.className=f.className.replace(/[ ]*dhtmlx_validation_error/g,"")),e}};eXcell_stree.prototype=new eXcell;dhtmlXGridObject.prototype.setSubTree=function(n,t){this._sub_trees||(this._sub_trees=[]);this._sub_trees[t]=[n];n.parentObject.style.display="none";var i=this;n.parentObject.onclick=function(n){return(n||window.event).cancelBubble=!0,!1};n.ev_onDblClick=null;n.attachEvent("onDblClick",function(n){return i._sub_id=n,i.editStop(),!0});n._chRRS=!0};eXcell_link.prototype=new eXcell;eXcell_link.prototype.getTitle=function(){var n=this.cell.firstChild;return n&&n.tagName?n.getAttribute("href"):""};eXcell_link.prototype.getContent=function(){var n=this.cell.firstChild;return n&&n.tagName?n.innerHTML:""};eXcell_grid.prototype=new eXcell;dhtmlXGridObject.prototype.setSubGrid=function(n,t,i){this._sub_grids||(this._sub_grids=[]);this._sub_grids[t]=[n,i];n.entBox.style.display="none";var r=this;n.entBox.onclick=function(n){return(n||window.event).cancelBubble=!0,!1};n.attachEvent("onRowSelect",function(){return r.editStop(),!0});n._chRRS=!1};eXcell_dhxCalendar.prototype=new eXcell;eXcell_dhxCalendar.prototype.edit=function(){var n=this.grid.getPosition(this.cell),i,t,r;this.grid._grid_calendarA._show(!1,!1);i=0;i=!window.innerHeight||n[1]+this.grid._grid_calendarA.base.offsetHeight+this.cell.offsetHeight<window.innerHeight?n[1]+this.cell.offsetHeight:n[1]-this.grid._grid_calendarA.base.offsetHeight;t=n[0];window.innerWidth&&t+this.grid._grid_calendarA.base.clientWidth+this.cell.offsetWidth>window.innerWidth&&(t=window.innerWidth-this.grid._grid_calendarA.base.clientWidth);this.grid._grid_calendarA.setPosition(t,i);this.grid._grid_calendarA._last_operation_calendar=!1;this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]);this.cell._cediton=!0;this.val=this.cell.val;this._val=this.cell.innerHTML;r=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){};this.grid._grid_calendarA.setDateFormat(this.grid._dtmask||"%d/%m/%Y");this.grid._grid_calendarA.setDate(this.val||new Date);this.grid._grid_calendarA.draw=r};eXcell_dhxCalendar.prototype.getDate=function(){return this.cell.val?this.cell.val:null};eXcell_dhxCalendar.prototype.getValue=function(){return this.cell._clearCell?"":this.grid._dtmask_inc&&this.cell.val?this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString():this.cell.innerHTML.toString()._dhx_trim()};eXcell_dhxCalendar.prototype.detach=function(){var n,t,i;if(this.grid._grid_calendarA){if(this.grid._grid_calendarA.hide(),this.cell._cediton)this.cell._cediton=!1;else return;return this.grid._grid_calendarA._last_operation_calendar?(n=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y"),t=this.grid._grid_calendarA.getDate(),this.cell.val=new Date(t),this.setCValue(n,t),this.cell._clearCell=!n,i=this.val,this.val=this._val,this.cell.val.valueOf()!=(i||"").valueOf()):!1}};eXcell_dhxCalendar.prototype.setValue=function(n){if(n&&typeof n=="object"){this.cell.val=n;this.cell._clearCell=!1;this.setCValue(this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",n).toString(),this.cell.val);return}n&&n.toString()._dhx_trim()!=""?(this.cell._clearCell=!1,this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate(this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y",n.toString(),null,!0)),this.grid._dtmask_inc&&(n=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",this.cell.val))):(n="&nbsp",this.cell._clearCell=!0,this.cell.val="");this.cell.val=="NaN"||this.cell.val=="Invalid Date"?(this.cell._clearCell=!0,this.cell.val=new Date,this.setCValue("&nbsp;",0)):this.setCValue((n||"").toString(),this.cell.val)};eXcell_dhxCalendarA.prototype=new eXcell;eXcell_dhxCalendarA.prototype.edit=function(){var n=this.grid.getPosition(this.cell),t;this.grid._grid_calendarA._show(!1,!1);this.grid._grid_calendarA.setPosition(n[0]*1+this.cell.offsetWidth,n[1]*1);this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]);this.grid._grid_calendarA._last_operation_calendar=!1;this.cell._cediton=!0;this.val=this.cell.val;this._val=this.cell.innerHTML;t=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){};this.grid._grid_calendarA.setDateFormat(this.grid._dtmask||"%d/%m/%Y");this.grid._grid_calendarA.setDate(this.val);this.grid._grid_calendarA.draw=t;this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA";this.obj=document.createElement(this.cell.atag);this.obj.style.height=this.cell.offsetHeight-4+"px";this.obj.className="dhx_combo_edit";this.obj.wrap="soft";this.obj.style.textAlign=this.cell.align;this.obj.onclick=function(n){(n||event).cancelBubble=!0};this.obj.onmousedown=function(n){(n||event).cancelBubble=!0};this.obj.value=this.getValue();this.cell.innerHTML="";this.cell.appendChild(this.obj);window.dhx4.isIE&&(this.obj.style.overflow="visible",this.grid.multiLine&&this.obj.offsetHeight>=18&&this.obj.offsetHeight<40&&(this.obj.style.height="36px",this.obj.style.overflow="scroll"));this.obj.onselectstart=function(n){return n||(n=event),n.cancelBubble=!0,!0};this.obj.focus();this.obj.focus()};eXcell_dhxCalendarA.prototype.getDate=function(){return this.cell.val?this.cell.val:null};eXcell_dhxCalendarA.prototype.getValue=function(){return this.cell._clearCell?"":this.grid._dtmask_inc&&this.cell.val?this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString():this.cell.innerHTML.toString()._dhx_trim()};eXcell_dhxCalendarA.prototype.detach=function(){var t,i,n;if(this.grid._grid_calendarA){if(this.grid._grid_calendarA.hide(),this.cell._cediton)this.cell._cediton=!1;else return;return this.grid._grid_calendarA._last_operation_calendar?(this.grid._grid_calendarA._last_operation_calendar=!1,t=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y"),i=this.grid._grid_calendarA.getDate(),this.cell.val=new Date(i),this.setCValue(t,i),this.cell._clearCell=!t,n=this.val,this.val=this._val,this.cell.val.valueOf()!=(n||"").valueOf()):(this.setValue(this.obj.value),n=this.val,this.val=this._val,this.cell.val.valueOf()!=(n||"").valueOf())}};eXcell_dhxCalendarA.prototype.setValue=function(n){if(n&&typeof n=="object"){this.cell.val=n;this.cell._clearCell=!1;this.setCValue(this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",n).toString(),this.cell.val);return}n&&n.toString()._dhx_trim()!=""?(this.cell._clearCell=!1,this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate(this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y",n.toString(),null,!0)),this.grid._dtmask_inc&&(n=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",this.cell.val))):(n="&nbsp",this.cell._clearCell=!0,this.cell.val="");this.cell.val=="NaN"||this.cell.val=="Invalid Date"?(this.cell.val=new Date,this.cell._clearCell=!0,this.setCValue("&nbsp;",0)):this.setCValue((n||"").toString(),this.cell.val)};dhtmlXGridObject.prototype.resetCounter=function(n){this._fake&&!this._realfake&&n<this._fake._cCount&&this._fake.resetCounter(n,this.currentPage);var t=arguments[0]||0;for(this.currentPage&&(t=(this.currentPage-1)*this.rowsBufferOutSize),t=0;t<this.rowsBuffer.length;t++)this.rowsBuffer[t]&&this.rowsBuffer[t].tagName=="TR"&&this.rowsAr[this.rowsBuffer[t].idd]&&(this.rowsAr[this.rowsBuffer[t].idd].childNodes[n].innerHTML=t+1)};eXcell_cntr.prototype=new eXcell;eXcell_acheck.prototype=new eXcell;eXcell_acheck.prototype.setValue=function(n){n=(n||"").toString();n.indexOf("1")!=-1||n.indexOf("true")!=-1?(n="1",this.cell.chstate="1"):(n="0",this.cell.chstate="0");var t=this;this.setCValue(this.drawCurrentState(),this.cell.chstate)};eXcell_context.prototype=new eXcell;dhtmlXGridObject.prototype.setSubContext=function(n,t,i){var r=this;n.attachEvent("onClick",function(t){return r._sub_id=t,r.editStop(),n.hideContextMenu(),!0});this._sub_context||(this._sub_context=[]);this._sub_context[t]=[n,i];n.hideContextMenu()};dhtmlXGridObject.prototype._process_json_row=function(n,t){var r,u,i;for(n._attrs=t,r=0;r<n.childNodes.length;r++)n.childNodes[r]._attrs={};if(t.userdata)for(u in t.userdata)this.setUserData(n.idd,u,t.userdata[u]);for(t=this._c_order?this._swapColumns(t.data):t.data,i=0;i<t.length;i++)typeof t[i]=="object"&&t[i]!=null&&(n.childNodes[i]._attrs=t[i],t[i].type&&(n.childNodes[i]._cellType=t[i].type),t[i]=t[i].value);return this._fillRow(n,t),n};dhtmlXGridObject.prototype._process_js_row=function(n,t){var u,f,r,i;for(n._attrs=t,u=0;u<n.childNodes.length;u++)n.childNodes[u]._attrs={};if(t.userdata)for(f in t.userdata)this.setUserData(n.idd,f,t.userdata[f]);for(r=[],i=0;i<this.columnIds.length;i++)r[i]=t[this.columnIds[i]],typeof r[i]=="object"&&r[i]!=null&&(n.childNodes[i]._attrs=r[i],r[i].type&&(n.childNodes[i]._cellType=r[i].type),r[i]=r[i].value),r[i]||r[i]===0||(r[i]="");return this._fillRow(n,r),n};dhtmlXGridObject.prototype.updateFromJSON=function(n,t,i,r){typeof t=="undefined"&&(t=!0);this._refresh_mode=[!0,t,i];this.load(n,r,"json")};dhtmlXGridObject.prototype._refreshFromJSON=function(n){var e,u,i,t,o,f;this._f_rowsBuffer&&this.filterBy(0,"");reset=!1;window.eXcell_tree&&(eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue,eXcell_tree.prototype.setValue=function(n){var t=this.grid._h2.get[this.cell.parentNode.idd];t&&this.cell.parentNode.valTag?this.setLabel(n):this.setValueX(n)});var h=this.cellType._dhx_find("tree"),s=n.parent||0,r={};for(this._refresh_mode[2]&&(h!=-1?this._h2.forEachChild(s,function(n){r[n.id]=!0},this):this.forEachRow(function(n){r[n]=!0})),e=n.rows,u=0;u<e.length;u++)i=e[u],t=i.id,r[t]=!1,this.rowsAr[t]&&this.rowsAr[t].tagName!="TR"?(this._h2?this._h2.get[t].buff.data=i:this.rowsBuffer[this.getRowIndex(t)].data=i,this.rowsAr[t]=i):this.rowsAr[t]?(this._process_json_row(this.rowsAr[t],i,-1),this._postRowProcessing(this.rowsAr[t],!0)):this._refresh_mode[1]&&(o={idd:t,data:i,_parser:this._process_json_row,_locator:this._get_json_data},f=this.rowsBuffer.length,this._refresh_mode[1]=="top"?(this.rowsBuffer.unshift(o),f=0):this.rowsBuffer.push(o),this._h2&&(reset=!0,this._h2.add(t,s).buff=this.rowsBuffer[this.rowsBuffer.length-1]),this.rowsAr[t]=i,i=this.render_row(f),this._insertRowAt(i,f?-1:0));if(this._refresh_mode[2])for(t in r)r[t]&&this.rowsAr[t]&&this.deleteRow(t);this._refresh_mode=null;window.eXcell_tree&&(eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX);reset&&this._renderSort();this._f_rowsBuffer&&(this._f_rowsBuffer=null,this.filterByAll())};dhtmlXGridObject.prototype._process_js=function(n){return this._process_json(n,"js")};dhtmlXGridObject.prototype._parseOptionsJson=function(n){var f,t,i,u,r;if(n.coll_options){for(f in n.coll_options)if(t=n.coll_options[f],i=this.getColIndexById(f),this.cellType[i]=="combo")u=this.getColumnCombo(i),u.addOption(t);else if(this.cellType[i].indexOf("co")==0)for(u=this.getCombo(i),r=0;r<t.length;r++)u.put(t[r].value,t[r].label);this._colls_loaded=!0}};dhtmlXGridObject.prototype._parseHeadJson=function(n){var t,f,a,i,h;if(n.head&&n.head.length){var r=n.head,u=n.settings,c="setInitWidths",o=!1;u&&u.colwidth=="%"&&(c="setInitWidthsP");u&&u.splitat=="%"&&(o=u.splitat);this.hdr.rows.length>0&&this.clearAll(!0);var e=[[],[],[],[],[],[],[]],l=["value","width","type","align","sort","hidden","id"],s=["",c,"setColTypes","setColAlign","setColSorting","","setColumnIds"];for(t=0;t<r.length;t++)for(i=0;i<l.length;i++)e[i].push(r[t][l[i]]);for(this.setHeader(e[0]),t=0;t<s.length;t++)s[t]&&this[s[t]](e[t].join(this.delim));for(t=0;t<r.length;t++)if(f=r[t].options,r[t].options)if(this.cellType[t]=="clist")this.registerCList(t,f);else for(a=this.getCombo(t),i=0;i<f.length;i++)a.put(f[i].id,f[i].value);this.init();h=e[5].join(this.delim);this.setColHidden&&h.replace(/,/g,"")!=""&&this.setColHidden(h);o&&this.splitAt&&this.splitAt(o)}};dhtmlXGridObject.prototype._process_json=function(n,t){var n,l,h,a,o,f,y,r,v,i,e,p;this._parsing=!0;try{n=n.responseText||n;typeof n=="string"&&(eval("dhtmlx.temp="+n+";"),n=dhtmlx.temp)}catch(w){dhx4.callEvent("onLoadXMLError",["Incorrect JSON",n.xmlDoc||n,this]);n={rows:[]}}if(this._refresh_mode)return this._refreshFromJSON(n);n.head&&this._parseHeadJson(n);this._parseOptionsJson(n);var s=parseInt(n.pos||0),u=parseInt(n.total_count||0),c=!1;u&&(this.rowsBuffer[u-1]||(this.rowsBuffer.length&&(c=!0),this.rowsBuffer[u-1]=null),u<this.rowsBuffer.length&&(this.rowsBuffer.splice(u,this.rowsBuffer.length-u),c=!0));l=t==="js"?n.userdata:n;for(h in l)(t==="js"||h!="rows")&&this.setUserData("",h,l[h]);if(t=="js"&&n.collections)for(a in n.collections)if(o=this.getColIndexById(a),f=n.collections[a],o!==window.undefined)if(this.cellType[o]=="clist"){for(colplaindata=[],r=0;r<f.length;r++)colplaindata.push(f[r].label);this.registerCList(o,colplaindata)}else for(y=this.getCombo(o),r=0;r<f.length;r++)y.put(f[r].value,f[r].label);if(this.isTreeGrid())return this._process_tree_json(n,null,null,t);if(t=="js")for(n.data&&(n=n.data),i=0;i<n.length;i++)this.rowsBuffer[i+s]||(v=n[i],e=v.id||i+1,this.rowsBuffer[i+s]={idd:e,data:v,_parser:this._process_js_row,_locator:this._get_js_data},this.rowsAr[e]=n[i]);else for(i=0;i<n.rows.length;i++)this.rowsBuffer[i+s]||(e=n.rows[i].id,this.rowsBuffer[i+s]={idd:e,data:n.rows[i],_parser:this._process_json_row,_locator:this._get_json_data},this.rowsAr[e]=n.rows[i]);this.callEvent("onDataReady",[]);c&&this._srnd?(p=this.objBox.scrollTop,this._reset_view(),this.objBox.scrollTop=p):this.render_dataset();this._parsing=!1};dhtmlXGridObject.prototype._get_json_data=function(n,t){var i=n.data[t];return typeof i=="object"?i?i.value:"":i};dhtmlXGridObject.prototype._process_tree_json=function(n,t,i,r){var o,u,f,e;if(this._parsing=!0,o=!1,t||(this.render_row=this.render_row_tree,o=!0,t=n,i=t.parent||0,i=="0"&&(i=0),this._h2||(this._h2=this._createHierarchy()),this._fake&&(this._fake._h2=this._h2)),r=="js")for(t.data&&!i&&(n=t.data),t.rows&&(t=t.rows),u=0;u<t.length;u++)f=t[u].id,e=this._h2.add(f,i),e.buff={idd:f,data:t[u],_parser:this._process_js_row,_locator:this._get_js_data},t[u].open&&(e.state="minus"),this.rowsAr[f]=e.buff,this._process_tree_json(t[u],t[u],f,r);else if(t.rows)for(u=0;u<t.rows.length;u++)f=t.rows[u].id,e=this._h2.add(f,i),e.buff={idd:f,data:t.rows[u],_parser:this._process_json_row,_locator:this._get_json_data},t.rows[u].open&&(e.state="minus"),this.rowsAr[f]=e.buff,this._process_tree_json(t.rows[u],t.rows[u],f,r);o&&(i!=0&&this._h2.change(i,"state","minus"),this._updateTGRState(this._h2.get[i]),this._h2_to_buff(),this.callEvent("onDataReady",[]),i!=0&&(this._srnd||this.pagingOn)?this._renderSort():this.render_dataset(),this._slowParse===!1&&this.forEachRow(function(n){this.render_row_tree(0,n)}),this._parsing=!1,i==0||this._srnd||this.callEvent("onOpenEnd",[i,1]))};dhtmlXGridObject.prototype._process_html=function(n){var t,i;if(n.tagName&&n.tagName=="TABLE")return this._process_inner_html(n,0);t=document.createElement("DIV");t.innerHTML=n.xmlDoc.responseText;i=t.getElementsByTagName("TABLE")[0];this._process_inner_html(i,0)};dhtmlXGridObject.prototype._process_inner_html=function(n,t){for(var r,u=n.rows.length,i=t;i<u;i++)r=n.rows[i].getAttribute("id")||i,this.rowsBuffer.push({idd:r,data:n.rows[i],_parser:this._process_html_row,_locator:this._get_html_data});this.render_dataset();this.setSizes()};dhtmlXGridObject.prototype._process_html_row=function(n,t){var f=t.getElementsByTagName("TD"),u=[],i,r,e,o;for(n._attrs=this._xml_attrs(t),i=0;i<f.length;i++)if(r=f[i],e=r.getAttribute("type"),n.childNodes[i]&&(e&&(n.childNodes[i]._cellType=e),n.childNodes[i]._attrs=this._xml_attrs(f[i])),r.firstChild?u.push(r.innerHTML):u.push(""),r.colSpan>1)for(n.childNodes[i]._attrs.colspan=r.colSpan,o=1;o<r.colSpan;o++)u.push("");for(i<f.length;i<n.childNodes.length;i++)n.childNodes[i]._attrs={};return this._fillRow(n,this._c_order?this._swapColumns(u):u),n};dhtmlXGridObject.prototype._get_html_data=function(n,t){for(n=n.firstChild;;){if(!n)return"";if(n.tagName=="TD"&&t--,t<0)break;n=n.nextSibling}return n.firstChild?n.firstChild.data:""};dhtmlxEvent(window,"load",function(){for(var t=document.getElementsByTagName("table"),n=0;n<t.length;n++)t[n].className=="dhtmlxGrid"&&dhtmlXGridFromTable(t[n])});dhtmlXGridObject.prototype._process_xmlA=function(n){var i,t,f;this._parsing=!0;i=dhx4.ajax.xmltop(this.xml.top,n);this._parseHead(i);var r=dhx4.ajax.xpath(this.xml.row,i),e=parseInt(i.getAttribute("pos")||0),u=parseInt(i.getAttribute("total_count")||0);if(u&&!this.rowsBuffer[u-1]&&(this.rowsBuffer[u-1]=null),this.isTreeGrid())return this._get_xml_data=this._get_xml_dataA,this._process_xml_row=this._process_xml_rowA,this._process_tree_xml(n);for(t=0;t<r.length;t++)this.rowsBuffer[t+e]||(f=r[t].getAttribute("id")||this.uid(),this.rowsBuffer[t+e]={idd:f,data:r[t],_parser:this._process_xml_rowA,_locator:this._get_xml_dataA},this.rowsAr[f]=r[t]);this.render_dataset();this._parsing=!1};dhtmlXGridObject.prototype._process_xmlB=function(n){var i,t,f;this._parsing=!0;i=dhx4.ajax.xmltop(this.xml.top,n);this._parseHead(i);var r=dhx4.ajax.xpath(this.xml.row,i),e=parseInt(i.getAttribute("pos")||0),u=parseInt(i.getAttribute("total_count")||0);if(u&&!this.rowsBuffer[u-1]&&(this.rowsBuffer[u-1]=null),this.isTreeGrid())return this._get_xml_data=this._get_xml_dataB,this._process_xml_row=this._process_xml_rowB,this._process_tree_xml(n);for(t=0;t<r.length;t++)this.rowsBuffer[t+e]||(f=r[t].getAttribute("id")||this.uid(),this.rowsBuffer[t+e]={idd:f,data:r[t],_parser:this._process_xml_rowB,_locator:this._get_xml_dataB},this.rowsAr[f]=r[t]);this.render_dataset();this._parsing=!1};dhtmlXGridObject.prototype._process_xml_rowA=function(n,t){var r=[],i,u,f;for(n._attrs=this._xml_attrs(t),i=0;i<this.columnIds.length;i++)u=this.columnIds[i],f=n._attrs[u]||"",n.childNodes[i]&&(n.childNodes[i]._attrs={}),r.push(f);return this._fillRow(n,this._c_order?this._swapColumns(r):r),n};dhtmlXGridObject.prototype._get_xml_dataA=function(n,t){return n.getAttribute(this.getColumnId(t))};dhtmlXGridObject.prototype._process_xml_rowB=function(n,t){var s=[],u,e,r,f,o,i;if(n._attrs=this._xml_attrs(t),this._ud_enabled)for(u=dhx4.ajax.xpath("./userdata",t),i=u.length-1;i>=0;i--)this.setUserData(u[i].getAttribute("name"),u[i].firstChild?u[i].firstChild.data:"");for(e=0;e<t.childNodes.length;e++)(r=t.childNodes[e],r.tagName)&&((f=this.getColIndexById(r.tagName),isNaN(f))||(o=r.getAttribute("type"),o&&(n.childNodes[f]._cellType=o),n.childNodes[f]._attrs=this._xml_attrs(r),r.getAttribute("xmlcontent")||(r=r.firstChild?r.firstChild.data:""),s[f]=r));for(i=0;i<n.childNodes.length;i++)n.childNodes[i]._attrs||(n.childNodes[i]._attrs={});return this._fillRow(n,s),n};dhtmlXGridObject.prototype._get_xml_dataB=function(n,t){var i=this.getColumnId(t);for(n=n.firstChild;;){if(!n)return"";if(n.tagName==i)return n.firstChild?n.firstChild.data:"";n=n.nextSibling}return""};dhtmlXGridObject.prototype.startFastOperations=function(){this._disF=["setSizes","callEvent","_fixAlterCss","cells4","forEachRow","_correctMonolite"];this._disA=[];for(var n=this._disF.length-1;n>=0;n--)this._disA[n]=this[this._disF[n]],this[this._disF[n]]=function(){return!0};this._cellCache=[];this.cells4=function(n){var t=this._cellCache[n._cellIndex];return t||(t=this._cellCache[n._cellIndex]=this._disA[3].apply(this,[n]),t.destructor=function(){return!0},t.setCValue=function(n){t.cell.innerHTML=n}),t.cell=n,t.combo=n._combo||this.combos[n._cellIndex],t}};dhtmlXGridObject.prototype.stopFastOperations=function(){if(this._disF){for(var n=this._disF.length-1;n>=0;n--)this[this._disF[n]]=this._disA[n];this._correctMonolite&&this._correctMonolite();this.setSizes();this.callEvent("onGridReconstructed",[])}};dhtmlXGridObject.prototype._in_header_number_filter=function(n,t){this._in_header_text_filter.call(this,n,t);var i=this;n.firstChild._filter=function(){var n=i._get_filters(this.value,"num");return function(t){for(var i=n.length>0?!1:!0,r=0;r<n.length;r++)i=i||n[r](t);return i}}};dhtmlXGridObject.prototype._in_header_string_filter=function(n,t){this._in_header_text_filter.call(this,n,t);var i=this;n.firstChild._filter=function(){var n=i._get_filters(this.value,"str");return function(t){for(var i=n.length>0?!1:!0,r=0;r<n.length;r++)i=i||n[r](t);return i}}};dhtmlXGridObject.prototype._get_filters=function(n,t){for(var f,r=n.split(","),u=[],i=0;i<r.length;i++)r[i]!=""&&(f=this["_get_"+t+"_filter"](r[i]),u.push(f));return u};dhtmlXGridObject.prototype._get_str_filter=function(n){var t;return n=="null"||n=="empty"?new Function("value",'if (value == null || value == "") return true; return false;'):n=="!null"||n=="!empty"?new Function("value",'if (value == null || value == "") return false; return true;'):n.substr(0,1)==="!"?(t=n.substr(1),new Function("value",'if (value !== "'+t+'") return true; return false;')):n.substr(0,1)==="~"?(t=n.substr(1),new Function("value",'if (value.indexOf("'+t+'") !== -1) return true; return false;')):(n.substr(0,1)==="^"&&n.substr(n.length-1,1)==="&"&&(n="="+n.substr(1,n.length-2)),n.substr(0,1)==="^")?(t=n.substr(1),new Function("value","if (value.substr(0, "+t.length+') === "'+t+'") return true; return false;')):n.substr(n.length-1,1)==="&"?(t=n.substr(0,n.length-1),new Function("value","if (value.substr(value.length - "+t.length+') === "'+t+'") return true; return false;')):(t=n.substr(0,1)==="="?n.substr(1):n,new Function("value",'if (value === "'+t+'") return true; return false;'))};dhtmlXGridObject.prototype._get_num_filter=function(n){var i,f,e,r,u,t;return n=="null"||n=="empty"?new Function("value",'if (value == null || value == "") return true; return false;'):n=="!null"||n=="!empty"?new Function("value",'if (value == null || value == "") return false; return true;'):(i=n.split(".."),i.length==2)?(f=parseFloat(i[0]),e=parseFloat(i[1]),new Function("value","if (value >= "+f+" && value <= "+e+") return true; return false;")):(r=n.match(/<>|>=|<=|>|<|=/),r?(t=r[0],u=parseFloat(n.replace(t,""))):(t="==",u=parseFloat(n)),t=="<>"&&(t="!="),t=="="&&(t="=="),new Function("value"," if (value "+t+" "+u+" ) return true; return false;"))};dhtmlXGridObject.prototype.attachHeaderA=dhtmlXGridObject.prototype.attachHeader;dhtmlXGridObject.prototype.attachHeader=function(){if(this.attachHeaderA.apply(this,arguments),this._realfake)return!0;this.formAutoSubmit();typeof this.FormSubmitOnlyChanged=="undefined"&&this.submitOnlyChanged(!0);typeof this._submitAR=="undefined"&&this.submitAddedRows(!0);var n=this;this._added_rows=[];this._deleted_rows=[];this.attachEvent("onRowAdded",function(t){return n._added_rows.push(t),n.forEachCell(t,function(n){n.cell.wasChanged=!0}),!0});this.attachEvent("onBeforeRowDeleted",function(t){return n._deleted_rows.push(t),!0});this.attachHeader=this.attachHeaderA};dhtmlXGridObject.prototype.formAutoSubmit=function(){if(this.parentForm=this.detectParentFormPresent(),this.parentForm===!1)return!1;if(!this.formEventAttached){this.formInputs=[];var n=this;dhtmlxEvent(this.parentForm,"submit",function(){n.entBox&&n.parentFormOnSubmit()});this.formEventAttached=!0}};dhtmlXGridObject.prototype.parentFormOnSubmit=function(){return this.formCreateInputCollection(),this.callEvent("onBeforeFormSubmit",[])?void 0:!1};dhtmlXGridObject.prototype.submitOnlyChanged=function(n){this.FormSubmitOnlyChanged=dhx4.s2b(n)};dhtmlXGridObject.prototype.submitColumns=function(n){typeof n=="string"&&(n=n.split(this.delim));this._submit_cols=n};dhtmlXGridObject.prototype.setFieldName=function(n){n=n.replace(/\{GRID_ID\}/g,"'+a1+'");n=n.replace(/\{ROW_ID\}/g,"'+a2+'");n=n.replace(/\{ROW_INDEX\}/g,"'+this.getRowIndex(a2)+'");n=n.replace(/\{COLUMN_INDEX\}/g,"'+a3+'");n=n.replace(/\{COLUMN_ID\}/g,"'+this.getColumnId(a3)+'");this._input_mask=Function("a1","a2","a3","return '"+n+"';")};dhtmlXGridObject.prototype.submitSerialization=function(n){this.FormSubmitSerialization=dhx4.s2b(n)};dhtmlXGridObject.prototype.submitAddedRows=function(n){this._submitAR=dhx4.s2b(n)};dhtmlXGridObject.prototype.submitOnlySelected=function(n){this.FormSubmitOnlySelected=dhx4.s2b(n)};dhtmlXGridObject.prototype.submitOnlyRowID=function(n){this.FormSubmitOnlyRowID=dhx4.s2b(n)};dhtmlXGridObject.prototype.createFormInput=function(n,t){var i=document.createElement("input");i.type="hidden";i.name=this._input_mask&&typeof n!="string"?this._input_mask.apply(this,n):((this.globalBox||this.entBox).id||"dhtmlXGrid")+"_"+n;i.value=t;this.parentForm.appendChild(i);this.formInputs.push(i)};dhtmlXGridObject.prototype.createFormInputRow=function(n){for(var i,r=(this.globalBox||this.entBox).id,t=0;t<this._cCount;t++)i=this.cells3(n,t),(!this.FormSubmitOnlyChanged||i.wasChanged())&&(!this._submit_cols||this._submit_cols[t])&&this.createFormInput(this._input_mask?[r,n.idd,t]:n.idd+"_"+t,i.getValue())};dhtmlXGridObject.prototype.formCreateInputCollection=function(){var n;if(this.parentForm==!1)return!1;for(n=0;n<this.formInputs.length;n++)this.parentForm.removeChild(this.formInputs[n]);if(this.formInputs=[],this.FormSubmitSerialization)this.createFormInput("serialized",this.serialize());else if(this.FormSubmitOnlySelected)if(this.FormSubmitOnlyRowID)this.createFormInput("selected",this.getSelectedId());else for(n=0;n<this.selectedRows.length;n++)this.createFormInputRow(this.selectedRows[n]);else this._submitAR&&(this._added_rows.length&&this.createFormInput("rowsadded",this._added_rows.join(",")),this._deleted_rows.length&&this.createFormInput("rowsdeleted",this._deleted_rows.join(","))),this.forEachRow(function(n){this.getRowById(n)!==-1&&this.createFormInputRow(this.rowsAr[n])})};dhtmlXGridObject.prototype.detectParentFormPresent=function(){for(var t=!1,n=this.entBox;n&&n.tagName&&n!=document.body;)if(n.tagName.toLowerCase()=="form"){t=n;break}else n=n.parentNode;return t};dhtmlXGridObject.prototype.unGroup=function(){this._groups&&(this._dndProblematic=!1,delete this._groups,delete this._gIndex,this._fake&&this._mirror_rowsCol(),this.forEachRow(function(n){this.rowsAr[n].style.display=""}),this._reset_view(),this.callEvent("onGridReconstructed",[]),this.callEvent("onUnGroup",[]))};dhtmlXGridObject.prototype._mirror_rowsCol=function(){var n;for(this._fake._groups=this._groups,this._fake._gIndex=this._gIndex,this.rowsBuffer=dhtmlxArray(),n=0;n<this.rowsCol.length;n++)this.rowsCol[n]._cntr||this.rowsBuffer.push(this.rowsCol[n]);for(this._fake.rowsBuffer=dhtmlxArray(),n=0;n<this._fake.rowsCol.length;n++)this._fake.rowsCol[n]._cntr||this._fake.rowsBuffer.push(this._fake.rowsCol[n])};dhtmlXGridObject.prototype.groupBy=function(n,t){var r,u,f,i;if(this._groups&&this.unGroup(),this._dndProblematic=!0,this._groups={},!t)for(t=["#title"],i=1;i<this._cCount;i++)t.push("#cspan");for(this._gmask=document.createElement("TR"),this._gmask.origin=t,u=0,i=0;i<t.length;i++)t[i]=="#cspan"?r.colSpan=(parseInt(r.colSpan)||1)+1:(r=document.createElement("TD"),r._cellIndex=i,this._hrrar[i]&&(r.style.display="none"),r.className="group_row",r.innerHTML="&nbsp;",t[i]=="#title"?this._gmask._title=u:r.align=this.cellAlign[i]||"left",this._gmask.appendChild(r),t[i].indexOf("#stat")==0&&(this._gmask._math=!0,r._counter=[this["_g_"+t[i].replace("#","")],i,u]),u++);for(f in this._groups)this._groups[f]=this.undefined;if(this._gIndex=n,this._fake&&!this._realfake&&(this._fake._groups=[],this._fake._gIndex=this._gIndex),this._nextRow=function(n,t){var i=this.rowsCol[n+t];return i&&(i.style.display=="none"||i._cntr)?this._nextRow(n+t,t):i},this.__sortRowsBG||(this._key_events=dhtmlx.extend({},this._key_events),this._key_events.k38_0_0=function(){var n,t;if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(n=this.row.rowIndex,!n)return;t=this._nextRow(n-1,-1);t&&this.selectCell(t,this.cell._cellIndex,!0)}},this._key_events.k13_1_0=this._key_events.k13_0_1=function(){},this._key_events.k40_0_0=function(){var n,t;if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(n=this.row.rowIndex,!n)return;t=this._nextRow(n-1,1);t&&this.selectCell(t,this.cell._cellIndex,!0)}},this.attachEvent("onFilterStart",function(){return this._groups&&(this._groups=this.undefined),!0}),this.attachEvent("onFilterEnd",function(){typeof this._gIndex!="undefined"&&this.groupBy(this._gIndex,this._gmask.origin)}),this.sortRows_bg=this.sortRows,this.sortRows=function(n,t,i){if(typeof this._groups=="undefined")return this.sortRows_bg.apply(this,arguments);if(t=t||this.fldSort[n]||"str",i=i||"asc",this.callEvent("onBeforeSorting",[n,t,i])){if(typeof this._groups=="undefined")return!0;n==this._gIndex?this._sortByGroup(n,t,i):this._sortInGroup(n,t,i);this.setSortImgState(!0,n,i);this._fake&&(this._mirror_rowsCol(),this._fake._groups=[],this._fake._reset_view());this.setSortImgState(!0,n,i);this.callEvent("onAfterSorting",[n,t,i])}return!1},this.attachEvent("onClearAll",function(){this.unGroup()}),this.attachEvent("onBeforeRowDeleted",function(n){var t,i;return this._groups?this.rowsAr[n]?(t=this.cells(n,this._gIndex).getValue(),t===""&&(t=" "),i=this._groups[t],this._dec_group(i),!0):!0:!0}),this.attachEvent("onAfterRowDeleted",function(){this.updateGroups()}),this.attachEvent("onCheckbox",function(n,t,i){this.callEvent("onEditCell",[2,n,t,i?1:0,i?0:1])}),this.attachEvent("onXLE",this.updateGroups),this.attachEvent("onColumnHidden",this.hideGroupColumn),this.attachEvent("onEditCell",function(n,t,i,r,u){var o,c;if(!this._groups)return!0;if(n==2&&r!=u&&i==this._gIndex){u===""&&(u=" ");this._dec_group(this._groups[u]);var f=this.rowsAr[t],s=this.rowsCol._dhx_find(f),h=this._inc_group(r),e=this.rowsCol[h];f==e&&(e=e.nextSibling);o=f.parentNode;c=f.rowIndex;o.removeChild(f);e?o.insertBefore(f,e):o.appendChild(f);this.rowsCol._dhx_insertAt(h,f);h<s&&s++;this.rowsCol._dhx_removeAt(s,f);this._fixAlterCss()}else n==2&&r!=u&&(this.updateGroups(),this._updateGroupView(this._groups[this.cells(t,this._gIndex).getValue()||" "]));return!0}),this.__sortRowsBG=!0),this._groupExisting(),this._hrrar)for(i=0;i<this._hrrar.length;i++)this._hrrar[i]&&this.hideGroupColumn(i,!0);this.callEvent("onGroup",[]);(this._ahgr||this._awdth)&&this.setSizes()};dhtmlXGridObject.prototype._sortInGroup=function(n,t,i){var f=this._groups_get(),e,r,s,u,o;for(f.reverse(),e=0;e<f.length;e++){for(r=f[e]._cntr._childs,s={},u=0;u<r.length;u++)o=this.cells3(r[u],n),s[r[u].idd]=o.getDate?o.getDate():o.getValue();this._sortCore(n,t,i,s,r)}this._groups_put(f);this.setSizes();this.callEvent("onGridReconstructed",[])};dhtmlXGridObject.prototype._sortByGroup=function(n,t,i){for(var u=this._groups_get(),f=[],r=0;r<u.length;r++)u[r].idd="_sort_"+r,f["_sort_"+r]=u[r]._cntr.text;this._sortCore(n,t,i,f,u);this._groups_put(u);this.callEvent("onGridReconstructed",[]);this.setSizes()};dhtmlXGridObject.prototype._inc_group=function(n,t,i){var r,u;return n===""&&(n=" "),this._groups[n]||(this._groups[n]={text:n,row:this._addPseudoRow(),count:0,state:t?"plus":"minus"}),r=this._groups[n],r.row._cntr=r,u=this.rowsCol._dhx_find(r.row)+r.count+1,r.count++,i||(this._updateGroupView(r),this.updateGroups()),u};dhtmlXGridObject.prototype._dec_group=function(n){if(n)return n.count--,n.count==0?(n.row.parentNode.removeChild(n.row),this.rowsCol._dhx_removeAt(this.rowsCol._dhx_find(n.row)),delete this._groups[n.text]):this._updateGroupView(n),this._fake&&!this._realfake&&this._fake._dec_group(this._fake._groups[n.text]),this.updateGroups(),!0};dhtmlXGridObject.prototype._insertRowAt_gA=dhtmlXGridObject.prototype._insertRowAt;dhtmlXGridObject.prototype._insertRowAt=function(n,t,i){var r,u;return typeof this._groups!="undefined"&&(r=this._realfake?this._fake._bfs_cells(n.idd,this._gIndex).getValue():this._bfs_cells3?this._bfs_cells3(n,this._gIndex).getValue():this.cells3(n,this._gIndex).getValue(),r||(r=" "),t=this._inc_group(r,n.style.display=="none")),u=this._insertRowAt_gA(n,t,i),typeof this._groups!="undefined"&&(this.expandGroup(r),this._updateGroupView(this._groups[r]),this.updateGroups()),u};dhtmlXGridObject.prototype._updateGroupView=function(n){if(this._fake&&!this._realfake)return n.row.firstChild.innerHTML="&nbsp;";var i=this._gmask||this._fake._gmask,t="<img style='margin-bottom:-4px' src='"+this.imgURL+n.state+".gif'> ";t+=this.customGroupFormat?this.customGroupFormat(n.text,n.count):n.text+" ( "+n.count+" ) ";n.row.childNodes[i._title].innerHTML=t};dhtmlXGridObject.prototype._addPseudoRow=function(n){for(var i,u=this._gmask||this._fake._gmask,t=u.cloneNode(!0),r=0;r<t.childNodes.length;r++)t.childNodes[r]._cellIndex=u.childNodes[r]._cellIndex,this._realfake&&(t.childNodes[r].style.display="");return i=this,t.onclick=function(n){i.callEvent("onGroupClick",[this._cntr.text])&&(i._fake&&i._realfake?i._fake._switchGroupState(i._fake._groups[this._cntr.text].row):i._switchGroupState(this),(n||event).cancelBubble="true")},t.ondblclick=function(n){(n||event).cancelBubble="true"},n||(_isKHTML?this.obj.appendChild(t):this.obj.firstChild.appendChild(t),this.rowsCol.push(t)),t};dhtmlXGridObject.prototype._groups_get=function(){var i=[],t,n;for(this._temp_par=this.obj.parentNode,this._temp_par.removeChild(this.obj),t=[],n=this.rowsCol.length-1;n>=0;n--)this.rowsCol[n]._cntr?(this.rowsCol[n]._cntr._childs=t,t=[],i.push(this.rowsCol[n])):t.push(this.rowsCol[n]),this.rowsCol[n].parentNode.removeChild(this.rowsCol[n]);return i};dhtmlXGridObject.prototype._groups_put=function(n){var u=this.rowsCol.stablesort,r,t,i;for(this.rowsCol=new dhtmlxArray(0),this.rowsCol.stablesort=u,r=0;r<n.length;r++){for(t=n[r]._cntr,this.obj.firstChild.appendChild(t.row),this.rowsCol.push(t.row),t.row.idd=null,i=0;i<t._childs.length;i++)this.obj.firstChild.appendChild(t._childs[i]),this.rowsCol.push(t._childs[i]);delete t._childs}this._temp_par.appendChild(this.obj)};dhtmlXGridObject.prototype._groupExisting=function(n){var n,f,u,i,r,t;if(this.getRowsNum()){for(n=[],this._temp_par=this.obj.parentNode,this._temp_par.removeChild(this.obj),f=[],u=this.rowsCol.length,t=0;t<u;t++)i=this.cells4(this.rowsCol[t].childNodes[this._gIndex]).getValue(),this.rowsCol[t].style.display="",i||(i=" "),this._groups[i]||(this._groups[i]={text:i,row:this._addPseudoRow(!0),count:0,state:"minus"},r=this._groups[i],r.row._cntr=r,this._groups[i]._childs=[],n.push(r.row)),this._groups[i].count++,this._groups[i]._childs.push(this.rowsCol[t]),this.rowsCol[t].parentNode.removeChild(this.rowsCol[t]);for(t=0;t<n.length;t++)this._updateGroupView(n[t]._cntr);this._groups_put(n);this._fake&&!this._realfake&&(this._mirror_rowsCol(),this._fake._groups=[],this._fake._reset_view());this.callEvent("onGridReconstructed",[]);this.updateGroups()}};dhtmlXGridObject.prototype._switchGroupState=function(n){var t=n._cntr,i,r;for(this._fake&&!this._realfake&&(t.state=this._fake._groups[n._cntr.text].row._cntr.state,this._fake._switchGroupState(this._fake._groups[n._cntr.text].row)),i=this.rowsCol._dhx_find(t.row)+1,t.state=t.state=="minus"?"plus":"minus",r=t.state=="plus"?"none":"";this.rowsCol[i]&&!this.rowsCol[i]._cntr;)this.rowsCol[i].style.display=r,i++;this._updateGroupView(t);this.callEvent("onGroupStateChanged",[t.text,t.state=="minus"]);this.setSizes()};dhtmlXGridObject.prototype.expandGroup=function(n){this._groups[n].state=="plus"&&this._switchGroupState(this._groups[n].row)};dhtmlXGridObject.prototype.collapseGroup=function(n){this._groups[n].state=="minus"&&this._switchGroupState(this._groups[n].row)};dhtmlXGridObject.prototype.expandAllGroups=function(){for(var n in this._groups)this._groups[n]&&this._groups[n].state=="plus"&&this._switchGroupState(this._groups[n].row)};dhtmlXGridObject.prototype.collapseAllGroups=function(){for(var n in this._groups)this._groups[n]&&this._groups[n].state=="minus"&&this._switchGroupState(this._groups[n].row)};dhtmlXGridObject.prototype.hideGroupColumn=function(n,t){var r,u,i,f;if(!this._fake){for(r=-1,u=this._gmask.childNodes,i=0;i<u.length;i++)if(u[i]._cellIndex==n){r=i;break}if(r!=-1)for(f in this._groups)this._groups[f].row.childNodes[r].style.display=t?"none":""}};dhtmlXGridObject.prototype.groupStat=function(n,t,i){i=this["_g_"+(i||"stat_total")];var r=0,u=0;return this.forEachRowInGroup(n,function(n){r=i(r,this.cells(n,t).getValue()*1,u);u++}),r};dhtmlXGridObject.prototype.forEachRowInGroup=function(n,t){var i=this._groups[n].row.nextSibling,r,u;if(i)while(i&&!i._cntr)t.call(this,i.idd),i=i.nextSibling;else if(r=this._groups[n]._childs,r)for(u=0;u<r.length;u++)t.call(this,r[u].idd)};dhtmlXGridObject.prototype.updateGroups=function(){var t,n;if(this._gmask&&this._gmask._math&&!this._parsing)for(t=this._gmask.childNodes,n=0;n<t.length;n++)t[n]._counter&&this._b_processing.apply(this,t[n]._counter)};dhtmlXGridObject.prototype._b_processing=function(n,t,i){var u=0,f=0,r;for(this._ecache[this.cellType[t]]||this.cells5({parentNode:{grid:this}},this.cellType[t]),r=this.rowsCol.length-1;r>=0;r--)this.rowsCol[r]._cntr?(this.cells5(this.rowsCol[r].childNodes[i],this.cellType[t]).setValue(u),f=u=0):(u=n(u,this.cells3(this.rowsCol[r],t).getValue()*1,f),f++)};dhtmlXGridObject.prototype._g_stat_total=function(n,t){return n+t};dhtmlXGridObject.prototype._g_stat_min=function(n,t,i){return i||(n=Infinity),Math.min(n,t)};dhtmlXGridObject.prototype._g_stat_max=function(n,t,i){return i||(n=-Infinity),Math.max(n,t)};dhtmlXGridObject.prototype._g_stat_average=function(n,t,i){return(n*i+t)/(i+1)};dhtmlXGridObject.prototype._g_stat_count=function(n){return++n};dhtmlXGridObject.prototype._in_header_collapse=function(n,t,i){var r=n.tagName=="TD"?n:n.parentNode,u,e,f;t=r._cellIndexS;this._column_groups||(this._column_groups=[]);u=i[1].split(":");u=i[1].split(":");u=[u.shift(),u.join(":")];e=parseInt(u[0]);n.innerHTML=i[0]+"<img src='"+this.imgURL+"minus.gif' style='padding-right:10px;height:16px'/><span style='position:relative; top:-6px;'>"+(u[1]||"")+"<span>";n.style.paddingBottom="0px";f=this;this._column_groups[t]=n.getElementsByTagName("IMG")[0];this._column_groups[t].onclick=function(n){var u,o,s,i;for((n||event).cancelBubble=!0,this._cstate=!this._cstate,u=t+1;u<t+e;u++)f.setColumnHidden(u,this._cstate);if(this._cstate){if(r.colSpan&&r.colSpan>0){if(r._exp_colspan=r.colSpan,o=Math.max(1,r.colSpan-e),!_isFF)for(i=0;i<r.colSpan-o;i++)s=document.createElement("TD"),r.nextSibling?r.parentNode.insertBefore(s,r.nextSibling):r.parentNode.appendChild(s);r.colSpan=o}f.callEvent("onColumnCollapse",[t,this._cstate])}else if(r._exp_colspan){if(r.colSpan=r._exp_colspan,!_isFF)for(i=1;i<r._exp_colspan;i++)r.parentNode.removeChild(r.nextSibling);f.callEvent("onColumnCollapse",[t,this._cstate])}this.src=f.imgURL+(this._cstate?"plus.gif":"minus.gif");f.sortImg.style.display!="none"&&f.setSortImgPos()}};dhtmlXGridObject.prototype.collapseColumns=function(n){if(this._column_groups[n]&&!this._column_groups[n]._cstate)this._column_groups[n].onclick({})};dhtmlXGridObject.prototype.expandColumns=function(n){if(this._column_groups[n]&&this._column_groups[n]._cstate)this._column_groups[n].onclick({})};dhtmlXGridObject.prototype.enableHeaderMenu=function(n){var t,i;if(!window.dhtmlXMenuObject)return dhtmlx.message("You need to include DHTMLX Menu");this._header_menu||(t=this._header_menu=new dhtmlXMenuObject,t.renderAsContextMenu(),i=this,t.attachEvent("onBeforeContextMenu",function(){return i._showHContext(n),!0}),t.attachEvent("onClick",function(n){for(var u,e,t,o=this.getCheckboxState(n),f=i.hdr.rows[1],r=0;r<f.cells.length;r++)if(u=f.cells[r],u._cellIndexS==n)for(e=u.colSpan||1,t=0;t<e;t++)i.setColumnHidden(n*1+t,!o)}),this.attachEvent("onInit",function(){t.addContextZone(this.hdr)}),this.hdr.rows.length&&this.callEvent("onInit",[]))};dhtmlXGridObject.prototype.getHeaderMenu=function(){return this._header_menu};dhtmlXGridObject.prototype._hideHContext=function(){this._header_menu&&this._header_menu.hide()};dhtmlXGridObject.prototype._showHContext=function(n){var t,f,r,i,u,e;for(typeof n=="string"&&(n=n.split(this.delim)),t=0,f=0,this._header_menu.clearAll(),r=0;r<this.hdr.rows[1].cells.length;r++)i=this.hdr.rows[1].cells[r],(!n||n[t]&&n[t]!="false")&&(u=i.firstChild&&i.firstChild.tagName=="DIV"?i.firstChild.innerHTML:i.innerHTML,u=u.replace(/<[^>]*>/gi,""),e=!(this.isColumnHidden(t)||this.getColWidth(t)==0),this._header_menu.addCheckbox("child",this._header_menu.topId,f,t,u,e),f++),t+=i.colSpan||1};dhtmlXGridObject.prototype.enableMarkedCells=function(n){this.markedRowsArr=new dhtmlxArray(0);this.markedCellsArr=new Array(0);this.lastMarkedRow=null;this.lastMarkedColumn=null;this.markedCells=!0;this.lastMarkMethod=0;arguments.length>0&&(dhx4.s2b(n)||(this.markedCells=!1))};dhtmlXGridObject.prototype.doMark=function(n,t){var i=n.parentNode.idd,r,u,f,e;if(this.setActive(!0),i){if(this.editStop(),this.cell=n,this.row=n.parentNode,r=n._cellIndex,t||(t=0),t==0)this.unmarkAll();else if(t==1){if(this.lastMarkedRow){var o=Math.min(this.getRowIndex(i),this.getRowIndex(this.lastMarkedRow)),s=Math.max(this.getRowIndex(i),this.getRowIndex(this.lastMarkedRow)),h=Math.min(r,this.lastMarkedColumn),c=Math.max(r,this.lastMarkedColumn);for(u=o;u<s+1;u++)for(f=h;f<c+1;f++)this.mark(this.getRowId(u),f,!0)}}else if(t==2&&this.markedRowsArr._dhx_find(i)!=-1)for(e=0;e<this.markedCellsArr[i].length;e++)if(this.markedCellsArr[i][e]==r)return this.mark(i,r,!1),!0;this.markedCellsArr[i]||(this.markedCellsArr[i]=new dhtmlxArray(0));t!=1&&this.mark(i,r);this.moveToVisible(this.cells(i,r).cell);this.lastMarkedRow=i;this.lastMarkedColumn=r;this.lastMarkMethod=t}};dhtmlXGridObject.prototype.mark=function(n,t,i){if(arguments.length>2&&!dhx4.s2b(i)){if(this.cells(n,t).cell.className=this.cells(n,t).cell.className.replace(/cellselected/g,""),this.markedRowsArr._dhx_find(n)!=-1){var r=this.markedCellsArr[n]._dhx_find(t);r!=-1&&(this.markedCellsArr[n]._dhx_removeAt(r),this.markedCellsArr[n].length==0&&this.markedRowsArr._dhx_removeAt(this.markedRowsArr._dhx_find(n)),this.callEvent("onCellUnMarked",[n,t]))}return!0}this.cells(n,t).cell.className+=" cellselected";this.markedRowsArr._dhx_find(n)==-1&&(this.markedRowsArr[this.markedRowsArr.length]=n);this.markedCellsArr[n]||(this.markedCellsArr[n]=new dhtmlxArray(0));this.markedCellsArr[n]._dhx_find(t)==-1&&(this.markedCellsArr[n][this.markedCellsArr[n].length]=t,this.callEvent("onCellMarked",[n,t]))};dhtmlXGridObject.prototype.unmarkAll=function(){var i,n,t;if(this.markedRowsArr){for(i=0;i<this.markedRowsArr.length;i++)if(n=this.markedRowsArr[i],this.rowsAr[n])for(t=0;t<this.markedCellsArr[n].length;t++)this.callEvent("onCellUnMarked",[n,this.markedCellsArr[n][t]]),this.cells(n,this.markedCellsArr[n][t]).cell.className=this.cells(n,this.markedCellsArr[n][t]).cell.className.replace(/cellselected/g,"");this.markedRowsArr=new dhtmlxArray(0);this.markedCellsArr=new Array(0)}return!0};dhtmlXGridObject.prototype.getMarked=function(){var r=[],n,t,i;if(this.markedRowsArr)for(n=0;n<this.markedRowsArr.length;n++)for(t=this.markedRowsArr[n],i=0;i<this.markedCellsArr[t].length;i++)r[r.length]=[t,this.markedCellsArr[t][i]];return r};eXcell_math.prototype=new eXcell;dhx4.attachEvent("onGridCreated",function(n){(n._reset_math(),n._was_created_math)||(n._was_created_math=!0,n.attachEvent("onClearAll",n._reset_math),n.attachEvent("onCellChanged",function(n,t){var i,r,u,f;if(this._mat_links[n]&&(i=this._mat_links[n][t],i))for(r=0;r<i.length;r++)i[r].parentNode&&this.cells5(i[r]).setValue(this._calcSCL(i[r]));!this._parsing&&this._aggregators[t]&&(u=this._h2.get[n].parent.id,u!=0&&(f=this.cells(u,t),f.setValue(this._calcSCL(f.cell))))}),n.attachEvent("onAfterRowDeleted",function(n,t){var i,r;if(t!=0&&!this._parsing&&this._aggregators.length)for(i=0;i<this._aggregators.length;i++)this._aggregators[i]&&(r=this.cells(t,i),r.setValue(this._calcSCL(r.cell)));return!0}),n.attachEvent("onXLE",n._refresh_math))});dhtmlXGridObject.prototype._reset_math=function(){this._mat_links={};this._aggregators=[]};dhtmlXGridObject.prototype._refresh_math=function(){for(var n=0;n<this._aggregators.length;n++)this._aggregators[n]&&this._h2.forEachChild(0,function(t){if(t.childs.length!=0){var i=this.cells(t.id,n);i.setValue(this._calcSCL(i.cell))}},this)};dhtmlXGridObject.prototype.refreshMath=function(){this._mat_links={};for(var n=0;n<this.getColumnsNum();n++)this.getColType(n)=="math"&&this.forEachRow(function(t){var i=this.cells(t,n);i.setValue(i.cell.original||i.getValue())})};dhtmlXGridObject.prototype.enableMathSerialization=function(n){this._mathSerialization=dhx4.s2b(n)};dhtmlXGridObject.prototype.setMathRound=function(n){this._roundDl=n;this._roundD=Math.pow(10,n)};dhtmlXGridObject.prototype.enableMathEditing=function(n){this._mathEdit=dhx4.s2b(n)};dhtmlXGridObject.prototype._calcSCL=function(n){var t,r,i;if(!n._code)return this.cells5(n).getValue();try{dhtmlx.agrid=this;t=eval(n._code)}catch(u){return"#SCL"}return this._roundD?(r=Math.abs(t)<1?"0":"",t<0&&(r="-"+r),t=Math.round(Math.abs(t)*this._roundD).toString(),t==0)?0:this._roundDl>0?(i=t.length-this._roundDl,i<0&&(t=("000000000"+t).substring(9+i),i=0),r+t.substring(0,i)+"."+t.substring(i,t.length)):r+t:t};dhtmlXGridObject.prototype._countTotal=function(n,t){for(var f,i=0,u=this._h2.get[n],r=0;r<u.childs.length;r++){if(!u.childs[r].buff)return i;if(u.childs[r].buff._parser)return i=0,this._h2.forEachChild(n,function(n){if(n.childs.length==0){var r=parseFloat(this._get_cell_value(n.buff,t),10);r&&(i+=r)}},this),i;f=parseFloat(this._get_cell_value(u.childs[r].buff,t),10);f&&(i+=f)}return i};dhtmlXGridObject.prototype._compileSCL=function(n,t,i){var r,u,f;return n===null||n===window.undefined?n:(n=n.toString(),n.indexOf("=")!=0||!t.parentNode)?(this._reLink([],t),i&&(t._code=t.original=null),n):(t.original=n,r=null,n=n.replace("=",""),n.indexOf("sum")!=-1)?(n=n.replace("sum","(dhtmlx.agrid._countTotal('"+t.parentNode.idd+"',"+t._cellIndex+"))"),this._aggregators||(this._aggregators=[]),this._aggregators[t._cellIndex]="sum",t._code=n,this._parsing?"":this._calcSCL(t)):(n.indexOf("[[")!=-1&&(u=/(\[\[([^\,]*)\,([^\]]*)]\])/g,dhtmlx.agrid=this,r=r||[],n=n.replace(u,function(n,i,u,f){return u=="-"&&(u=t.parentNode.idd),u.indexOf("#")==0&&(u=dhtmlx.agrid.getRowId(u.replace("#",""))),r[r.length]=[u,f],'(parseFloat(dhtmlx.agrid.cells("'+u+'",'+f+").getValue(),10))"})),n.indexOf(":")!=-1?(u=/:(\w+)/g,dhtmlx.agrid=this,f=t.parentNode.idd,r=r||[],n=n.replace(u,function(n,t){return r[r.length]=[f,dhtmlx.agrid.getColIndexById(t)],'(parseFloat(dhtmlx.agrid.cells("'+f+'",dhtmlx.agrid.getColIndexById("'+t+'")).getValue(),10))'})):(u=/c([0-9]+)/g,dhtmlx.agrid=this,f=t.parentNode.idd,r=r||[],n=n.replace(u,function(n,t){return r[r.length]=[f,t],'(parseFloat(dhtmlx.agrid.cells("'+f+'",'+t+").getValue(),10))"})),this._reLink(r,t),t._code=n,this._calcSCL(t))};dhtmlXGridObject.prototype._reLink=function(n,t){var i,r;if(n.length)for(i=0;i<n.length;i++)this._mat_links[n[i][0]]||(this._mat_links[n[i][0]]={}),r=this._mat_links[n[i][0]],r[n[i][1]]||(r[n[i][1]]=[]),r[n[i][1]].push(t)};_isKHTML&&function(){var n=String.prototype.replace;String.prototype.replace=function(t,i){var r,o,u,c;if(typeof i!="function")return n.apply(this,arguments);if(r=""+this,o=i,!(t instanceof RegExp))return u=r.indexOf(t),u==-1?r:n.apply(r,[t,o(t,u,r)]);for(var f=t,s=[],e=f.lastIndex,h;(h=f.exec(r))!=null;)if(u=h.index,c=h.concat(u,r),s.push(r.slice(e,u),o.apply(null,c).toString()),f.global)e=f.lastIndex;else{e+=RegExp.lastMatch.length;break}return s.push(r.slice(e)),s.join("")}}();dhtmlXGridObject.prototype.insertColumn=function(n,t,i,r,u,f,e,o,s){var h,a,c;if(n=parseInt(n),n>this._cCount&&(n=this._cCount),this._cMod||(this._cMod=this._cCount),this._processAllArrays(this._cCount,n-1,[t||"&nbsp;",r||100,i||"ed",f||"left",e||"",u||"na",s||"","",this._cMod,r||100]),this._processAllRows("_addColInRow",n),typeof t=="object")for(h=1;h<this.hdr.rows.length;h++)if(t[h-1]=="#rspan"){for(var l=h-1,v=!1,a=null;!v;){for(a=this.hdr.rows[l],c=0;c<a.cells.length;c++)if(a.cells[c]._cellIndex==n){v=c;break}l--}this.hdr.rows[l+1].cells[c].rowSpan=(this.hdr.rows[l].cells[c].rowSpan||1)+1}else this.setHeaderCol(n,t[h-1]||"&nbsp;",h);else this.setHeaderCol(n,t||"&nbsp;");this.hdr.rows[0].cells[n];this._cCount++;this._cMod++;this._master_row=null;this.setSizes()};dhtmlXGridObject.prototype.deleteColumn=function(n){(n=parseInt(n),this._cCount!=0)&&((this._cMod||(this._cMod=this._cCount),n>=this._cCount)||(this._processAllArrays(n,this._cCount-1,[null,null,null,null,null,null,null,null,null,null,null]),this._processAllRows("_deleteColInRow",n),this._cCount--,this._master_row=null,this.setSizes()))};dhtmlXGridObject.prototype._processAllRows=function(n,t,i){var u,r;for(this[n](this.obj.rows[0],t,i,0),u=this.hdr.rows.length,r=0;r<u;r++)this[n](this.hdr.rows[r],t,i,r);if(this.ftr)for(u=this.ftr.firstChild.rows.length,r=0;r<u;r++)this[n](this.ftr.firstChild.rows[r],t,i,r);this.forEachRow(function(r){this.rowsAr[r]&&this.rowsAr[r].tagName=="TR"&&this[n](this.rowsAr[r],t,i,-1)})};dhtmlXGridObject.prototype._processAllArrays=function(n,t,i){var r=["hdrLabels","initCellWidth","cellType","cellAlign","cellVAlign","fldSort","columnColor","_hrrar","_c_order"],s,h,u,f,o,e;if(this.cellWidthPX.length&&r.push("cellWidthPX"),this.cellWidthPC.length&&r.push("cellWidthPC"),this._col_combos&&r.push("_col_combos"),this._mCols&&(r[r.length]="_mCols"),this.columnIds&&(r[r.length]="columnIds"),this._maskArr&&r.push("_maskArr"),this._drsclmW&&r.push("_drsclmW"),this._RaSeCol&&r.push("_RaSeCol"),this._hm_config&&r.push("_hm_config"),this._drsclmn&&r.push("_drsclmn"),this.clists&&r.push("clists"),this._validators&&this._validators.data&&r.push(this._validators.data),r.push("combos"),this._customSorts&&r.push("_customSorts"),this._aggregators&&r.push("_aggregators"),s=n<=t,!this._c_order)for(this._c_order=[],h=this._cCount,u=0;u<h;u++)this._c_order[u]=u;for(u=0;u<r.length;u++)if(f=this[r[u]]||r[u],f){if(s){for(o=f[n],e=n;e<t;e++)f[e]=f[e+1];f[t]=o}else{for(o=f[n],e=n;e>t+1;e--)f[e]=f[e-1];f[t+1]=o}i&&(f[t+(s?0:1)]=i[u])}};dhtmlXGridObject.prototype.moveColumn=function(n,t){var i;if(t--,n=parseInt(n),t=parseInt(t),i=t<n?t+1:t,!this.callEvent("onBeforeCMove",[n,i]))return!1;n!=i&&(this.editStop(),this._processAllRows("_moveColInRow",n,t),this._processAllArrays(n,t),this.fldSorted&&this.setSortImgPos(this.fldSorted._cellIndex),this.callEvent("onAfterCMove",[n,i]))};dhtmlXGridObject.prototype._swapColumns=function(n){for(var i,r=[],t=0;t<this._cCount;t++)i=n[this._c_order[t]],typeof i=="undefined"&&(i=""),r[t]=i;return r};dhtmlXGridObject.prototype._moveColInRow=function(n,t,i){var u=n.childNodes[t],f=n.childNodes[i+1],r;if(u)for(f?n.insertBefore(u,f):n.appendChild(u),r=0;r<n.childNodes.length;r++)n.childNodes[r]._cellIndex=n.childNodes[r]._cellIndexS=r};dhtmlXGridObject.prototype._addColInRow=function(n,t,i,r){var e=t,o,f,u;if(n._childIndexes){if(n._childIndexes[t-1]!=n._childIndexes[t]&&n.childNodes[n._childIndexes[t-1]])for(u=n._childIndexes.length;u>=t;u--)n._childIndexes[u]=u?n._childIndexes[u-1]+1:0;else{for(u=n._childIndexes.length;u>=t;u--)n._childIndexes[u]=u?n._childIndexes[u-1]+1:0;n._childIndexes[t]--}e=n._childIndexes[t]}for(o=n.childNodes[e],f=document.createElement(r?"TD":"TH"),r?f._attrs={}:f.style.width=(parseInt(this.cellWidthPX[t])||"100")+"px",o?n.insertBefore(f,o):n.appendChild(f),this.dragAndDropOff&&n.idd&&this.dragger.addDraggableItem(n.childNodes[e],this),u=e+1;u<n.childNodes.length;u++)n.childNodes[u]._cellIndex=n.childNodes[u]._cellIndexS=n.childNodes[u]._cellIndex+1;n.childNodes[e]&&(n.childNodes[e]._cellIndex=n.childNodes[e]._cellIndexS=t);n.idd||typeof n.idd!="undefined"?(this.cells3(n,t).setValue(""),f.align=this.cellAlign[t],f.style.verticalAlign=this.cellVAlign[t],f.bgColor=this.columnColor[t]):f.tagName=="TD"&&(f.innerHTML=!n.idd&&this.forceDivInHeader?"<div class='hdrcell'>&nbsp;<\/div>":"&nbsp;")};dhtmlXGridObject.prototype._deleteColInRow=function(n,t){var e=t,i,f,o,u,r;if(n._childIndexes&&(t=n._childIndexes[t]),i=n.childNodes[t],i){if(i.colSpan&&i.colSpan>1&&i.parentNode.idd){if(f=i.colSpan-1,o=this.cells4(i).getValue(),this.setColspan(i.parentNode.idd,i._cellIndex,1),f>1)for(u=i._cellIndex*1,this.setColspan(i.parentNode.idd,u+1,f),this.cells(i.parentNode.idd,i._cellIndex*1+1).setValue(o),n._childIndexes.splice(u,1),r=u;r<n._childIndexes.length;r++)n._childIndexes[r]-=1}else if(n._childIndexes)for(n._childIndexes.splice(e,1),r=e;r<n._childIndexes.length;r++)n._childIndexes[r]--;for(i&&n.removeChild(i),r=t;r<n.childNodes.length;r++)n.childNodes[r]._cellIndex=n.childNodes[r]._cellIndexS=n.childNodes[r]._cellIndex-1}};dhtmlXGridObject.prototype.enableColumnMove=function(n,t){this._mCol=dhx4.s2b(n);typeof t!="undefined"&&(this._mCols=t.split(","));this._mmevTrue||(dhtmlxEvent(this.hdr,"mousedown",this._startColumnMove),dhtmlxEvent(document.body,"mousemove",this._onColumnMove),dhtmlxEvent(document.body,"mouseup",this._stopColumnMove),this._mmevTrue=!0)};dhtmlXGridObject.prototype._startColumnMove=function(n){var i,r,t;for(n=n||event,i=n.target||n.srcElement,r=i;r.tagName!="TABLE";)r=r.parentNode;if(t=r.grid,t)return(t.setActive(),!t._mCol||n.button==2)?void 0:(i=t.getFirstParentOfType(i,"TD"),i.style.cursor!="default")?!0:(t&&!t._colInMove&&(t.resized=null,t._mCols&&t._mCols[i._cellIndex]!="true"||(t._colInMove=i._cellIndex+1)),t._colInMovePos={x:n.clientX,y:n.clientY},!0)};dhtmlXGridObject.prototype._onColumnMove=function(n){var t,e,f,u,r,i;if(n=n||event,t=window.globalActiveDHTMLGridObject,t&&t._colInMove){if(e=Math.max(Math.abs(n.clientX-t._colInMovePos.x),Math.abs(n.clientY-t._colInMovePos.y)),e<20)return;for(t._hideHContext&&t._hideHContext(),typeof t._colInMove!="object"&&(i=document.createElement("DIV"),i._aIndex=t._colInMove-1,i._bIndex=null,i.innerHTML=t.getHeaderCol(i._aIndex),i.className="dhx_dragColDiv",i.style.position="absolute",document.body.appendChild(i),t._colInMove=i),f=[],f[0]=document.body.scrollLeft||document.documentElement.scrollLeft,f[1]=document.body.scrollTop||document.documentElement.scrollTop,t._colInMove.style.left=n.clientX+f[0]+8+"px",t._colInMove.style.top=n.clientY+f[1]+8+"px",u=n.target||n.srcElement;u&&typeof u._cellIndexS=="undefined";)u=u.parentNode;return t._colInMove._oldHe&&(t._colInMove._oldHe.className=t._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,""),t._colInMove._oldHe=null,t._colInMove._bIndex=null),u&&(r=t.hdr.rows[1]._childIndexes?t.hdr.rows[1].cells[t.hdr.rows[1]._childIndexes[u._cellIndexS]]:t.hdr.rows[1].cells[u._cellIndexS],i=n.clientX-(dhx4.absLeft(r)-t.hdrBox.scrollLeft),i/r.offsetWidth>.5?(r.className+=" columnTargetR",t._colInMove._bIndex=u._cellIndexS):(r.className+=" columnTargetL",t._colInMove._bIndex=u._cellIndexS-1),r.offsetLeft<t.objBox.scrollLeft+20&&(t.objBox.scrollLeft=Math.max(0,r.offsetLeft-20)),r.offsetLeft+r.offsetWidth-t.objBox.scrollLeft>t.objBox.offsetWidth-20&&(t.objBox.scrollLeft=Math.min(t.objBox.scrollLeft+r.offsetWidth+20,t.objBox.scrollWidth-t.objBox.offsetWidth)),t._colInMove._oldHe=r),n.cancelBubble=!0,!1}return!0};dhtmlXGridObject.prototype._stopColumnMove=function(n){n=n||event;var t=window.globalActiveDHTMLGridObject;return t&&t._colInMove&&(typeof t._colInMove=="object"&&(t._colInMove.parentNode.removeChild(t._colInMove),t._colInMove._bIndex!=null&&t.moveColumn(t._colInMove._aIndex,t._colInMove._bIndex+1),t._colInMove._oldHe&&(t._colInMove._oldHe.className=t._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,"")),t._colInMove._oldHe=null,t._colInMove.grid=null,t.resized=!0),t._colInMove=0),!0};dhtmlXGridObject.prototype.mouseOverHeader=function(n){var t=this;dhtmlxEvent(this.hdr,"mousemove",function(i){i=i||window.event;var r=i.target||i.srcElement;r.tagName!="TD"&&(r=t.getFirstParentOfType(r,"TD"));r&&typeof r._cellIndex!="undefined"&&n(r.parentNode.rowIndex,r._cellIndex)})};dhtmlXGridObject.prototype.mouseOver=function(n){var t=this;dhtmlxEvent(this.obj,"mousemove",function(i){i=i||window.event;var r=i.target||i.srcElement;r.tagName!="TD"&&(r=t.getFirstParentOfType(r,"TD"));r&&typeof r._cellIndex!="undefined"&&n(r.parentNode.rowIndex,r._cellIndex)})};dhtmlXGridObject.prototype.enablePaging=function(n,t,i,r,u,f){this._pgn_parentObj=typeof r=="string"?document.getElementById(r):r;this._pgn_recInfoParentObj=typeof f=="string"?document.getElementById(f):f;this.pagingOn=n;this.showRecInfo=u;this.rowsBufferOutSize=parseInt(t);this.currentPage=1;this.pagesInGroup=parseInt(i);this._init_pgn_events();this.setPagingSkin("default")};dhtmlXGridObject.prototype.setXMLAutoLoading=function(n,t){this.xmlFileUrl=n;this._dpref=t};dhtmlXGridObject.prototype.changePageRelative=function(n){this.changePage(this.currentPage+n)};dhtmlXGridObject.prototype.changePage=function(n){(arguments.length==0&&(n=this.currentPage||0),n=parseInt(n),n=Math.max(1,Math.min(n,Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize))),this.callEvent("onBeforePageChanged",[this.currentPage,n]))&&(this.currentPage=parseInt(n),this._reset_view(),this._fixAlterCss(),this.callEvent("onPageChanged",this.getStateOfView()))};dhtmlXGridObject.prototype.setPagingSkin=function(n){this._pgn_skin=this["_pgn_"+n];n=="toolbar"&&(this._pgn_skin_tlb=arguments[1])};dhtmlXGridObject.prototype.setPagingTemplates=function(n,t){this._pgn_templateA=this._pgn_template_compile(n);this._pgn_templateB=this._pgn_template_compile(t);this._page_skin_update()};dhtmlXGridObject.prototype._page_skin_update=function(){this.pagesInGroup||(this.pagesInGroup=Math.ceil(Math.min(5,this.rowsBuffer.length/this.rowsBufferOutSize)));var n=Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize);if(n&&n<this.currentPage)return this.changePage(n);this.pagingOn&&this._pgn_skin&&this._pgn_skin.apply(this,this.getStateOfView())};dhtmlXGridObject.prototype._init_pgn_events=function(){this.attachEvent("onXLE",this._page_skin_update);this.attachEvent("onClearAll",this._page_skin_update);this.attachEvent("onPageChanged",this._page_skin_update);this.attachEvent("onGridReconstructed",this._page_skin_update);this._init_pgn_events=function(){}};dhtmlXGridObject.prototype._pgn_default=function(){if(!this.pagingBlock){if(this.pagingBlock=document.createElement("DIV"),this.pagingBlock.className="pagingBlock",this.recordInfoBlock=document.createElement("SPAN"),this.recordInfoBlock.className="recordsInfoBlock",!this._pgn_parentObj)return;this._pgn_parentObj.appendChild(this.pagingBlock);this._pgn_recInfoParentObj&&this.showRecInfo&&this._pgn_recInfoParentObj.appendChild(this.recordInfoBlock);this._pgn_templateA||(this._pgn_templateA=this._pgn_template_compile("[prevpages:&lt;:&nbsp;] [currentpages:,&nbsp;] [nextpages:&gt;:&nbsp;]"),this._pgn_templateB=this._pgn_template_compile("Results <b>[from]-[to]<\/b> of <b>[total]<\/b>"))}var n=this.getStateOfView();this.pagingBlock.innerHTML=this._pgn_templateA.apply(this,n);this.recordInfoBlock.innerHTML=this._pgn_templateB.apply(this,n);this._pgn_template_active(this.pagingBlock);this._pgn_template_active(this.recordInfoBlock);this.callEvent("onPaging",[])};dhtmlXGridObject.prototype._pgn_block=function(n){for(var r=Math.floor((this.currentPage-1)/this.pagesInGroup)*this.pagesInGroup,u=Math.min(Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize),r+this.pagesInGroup),i=[],t=r+1;t<=u;t++)t==this.currentPage?i.push("<a class='dhx_not_active'><b>"+t+"<\/b><\/a>"):i.push("<a onclick='this.grid.changePage("+t+"); return false;'>"+t+"<\/a>");return i.join(n)};dhtmlXGridObject.prototype._pgn_link=function(n,t,i){if(n=="prevpages"||n=="prev")return this.currentPage==1?i:"<a onclick='this.grid.changePageRelative(-1*"+(n=="prev"?"1":"this.grid.pagesInGroup")+"); return false;'>"+t+"<\/a>";if(n=="nextpages"||n=="next")return this.rowsBuffer.length/this.rowsBufferOutSize<=this.currentPage?i:this.rowsBuffer.length/(this.rowsBufferOutSize*(n=="next"?"1":this.pagesInGroup))<=1?i:"<a onclick='this.grid.changePageRelative("+(n=="next"?"1":"this.grid.pagesInGroup")+"); return false;'>"+t+"<\/a>";if(n=="current"){var r=this.currentPage+(t?parseInt(t):0);return r<1||Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)<r?i:"<a "+(r==this.currentPage?"class='dhx_active_page_link' ":"")+"onclick='this.grid.changePage("+r+"); return false;'>"+r+"<\/a>"}return t};dhtmlXGridObject.prototype._pgn_template_active=function(n){var i=n.getElementsByTagName("A"),t;if(i)for(t=0;t<i.length;t++)i[t].grid=this};dhtmlXGridObject.prototype._pgn_template_compile=function(n){return n=n.replace(/\[([^\]]*)\]/g,function(n,t){t=t.split(":");switch(t[0]){case"from":return'"+(arguments[1]*1+(arguments[2]*1?1:0))+"';case"total":return'"+arguments[3]+"';case"to":return'"+arguments[2]+"';case"current":case"prev":case"next":case"prevpages":case"nextpages":return"\"+this._pgn_link('"+t[0]+"','"+t[1]+"','"+t[2]+"')+\"";case"currentpages":return"\"+this._pgn_block('"+t[1]+"')+\""}}),new Function('return "'+n+'";')};dhtmlXGridObject.prototype.i18n.paging={results:"Results",records:"Records from ",to:" to ",page:"Page ",perpage:"rows per page",first:"To first Page",previous:"Previous Page",found:"Found records",next:"Next Page",last:"To last Page",of:" of ",notfound:"No Records Found"};dhtmlXGridObject.prototype.setPagingWTMode=function(n,t,i,r){this._WTDef=[n,t,i,r]};dhtmlXGridObject.prototype._pgn_bricks=function(n,t,i){var h=(this.skin_name||"").split("_")[1],f="",l,o,s,c,r,u,e;if((h=="light"||h=="modern"||h=="skyblue")&&(f="_"+h),this.pagerElAr=[],this.pagerElAr.pagerCont=document.createElement("DIV"),this.pagerElAr.pagerBord=document.createElement("DIV"),this.pagerElAr.pagerLine=document.createElement("DIV"),this.pagerElAr.pagerBox=document.createElement("DIV"),this.pagerElAr.pagerInfo=document.createElement("DIV"),this.pagerElAr.pagerInfoBox=document.createElement("DIV"),l=this.globalBox||this.objBox,this.pagerElAr.pagerCont.style.width=l.clientWidth+"px",this.pagerElAr.pagerCont.style.overflow="hidden",this.pagerElAr.pagerCont.style.clear="both",this.pagerElAr.pagerBord.className="dhx_pbox"+f,this.pagerElAr.pagerLine.className="dhx_pline"+f,this.pagerElAr.pagerBox.style.clear="both",this.pagerElAr.pagerInfo.className="dhx_pager_info"+f,this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerBord),this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerLine),this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerInfo),this.pagerElAr.pagerLine.appendChild(this.pagerElAr.pagerBox),this.pagerElAr.pagerInfo.appendChild(this.pagerElAr.pagerInfoBox),this._pgn_parentObj.innerHTML="",this._pgn_parentObj.appendChild(this.pagerElAr.pagerCont),this.rowsBuffer.length>0){for(o=20,s=22,n>this.pagesInGroup&&(r=document.createElement("DIV"),u=document.createElement("DIV"),r.className="dhx_page"+f,u.innerHTML="&larr;",r.appendChild(u),this.pagerElAr.pagerBox.appendChild(r),e=this,r.pgnum=(Math.ceil(n/this.pagesInGroup)-1)*this.pagesInGroup,r.onclick=function(){e.changePage(this.pgnum)},o+=s),c=1;c<=this.pagesInGroup;c++){if(r=document.createElement("DIV"),u=document.createElement("DIV"),r.className="dhx_page"+f,pageNumber=(Math.ceil(n/this.pagesInGroup)-1)*this.pagesInGroup+c,pageNumber>Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize))break;u.innerHTML=pageNumber;r.appendChild(u);n==pageNumber?(r.className+=" dhx_page_active"+f,u.className="dhx_page_active"+f):(e=this,r.pgnum=pageNumber,r.onclick=function(){e.changePage(this.pgnum)});o+=parseInt(s/3)*pageNumber.toString().length+15;u.style.width=parseInt(s/3)*pageNumber.toString().length+8+"px";this.pagerElAr.pagerBox.appendChild(r)}Math.ceil(n/this.pagesInGroup)*this.pagesInGroup<Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)&&(r=document.createElement("DIV"),u=document.createElement("DIV"),r.className="dhx_page"+f,u.innerHTML="&rarr;",r.appendChild(u),this.pagerElAr.pagerBox.appendChild(r),e=this,r.pgnum=Math.ceil(n/this.pagesInGroup)*this.pagesInGroup+1,r.onclick=function(){e.changePage(this.pgnum)},o+=s);this.pagerElAr.pagerLine.style.width=o+"px"}this.rowsBuffer.length>0&&this.showRecInfo?this.pagerElAr.pagerInfoBox.innerHTML=this.i18n.paging.records+(t+1)+this.i18n.paging.to+i+this.i18n.paging.of+this.rowsBuffer.length:this.rowsBuffer.length==0&&(this.pagerElAr.pagerLine.parentNode.removeChild(this.pagerElAr.pagerLine),this.pagerElAr.pagerInfoBox.innerHTML=this.i18n.paging.notfound);this.pagerElAr.pagerBox.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;";this.pagerElAr.pagerBord.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;";this.pagerElAr.pagerCont.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;";this.callEvent("onPaging",[])};dhtmlXGridObject.prototype._pgn_toolbar=function(n,t,i){var u,f,e,r;if(this.aToolBar||(this.aToolBar=this._pgn_createToolBar()),u=Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize),this._WTDef[0]&&(this.aToolBar.enableItem("right"),this.aToolBar.enableItem("rightabs"),this.aToolBar.enableItem("left"),this.aToolBar.enableItem("leftabs"),this.currentPage>=u&&(this.aToolBar.disableItem("right"),this.aToolBar.disableItem("rightabs")),this.currentPage==1&&(this.aToolBar.disableItem("left"),this.aToolBar.disableItem("leftabs"))),this._WTDef[2]){for(f=this,this.aToolBar.forEachListOption("pages",function(n){f.aToolBar.removeListOption("pages",n)}),e={dhx_skyblue:4,dhx_web:0,dhx_terrace:14}[this.aToolBar.conf.skin],r=0;r<u;r++)this.aToolBar.addListOption("pages","pages_"+(r+1),NaN,"button","<span style='padding: 0px "+e+"px 0px 0px;'>"+this.i18n.paging.page+(r+1)+"<\/span>","paging_page.gif");this.aToolBar.setItemText("pages",this.i18n.paging.page+n)}this._WTDef[1]&&(this.getRowsNum()?this.aToolBar.setItemText("results","<div style='width:100%; text-align:center'>"+this.i18n.paging.records+(t+1)+this.i18n.paging.to+i+"<\/div>"):this.aToolBar.setItemText("results",this.i18n.paging.notfound));this._WTDef[3]&&this.aToolBar.setItemText("perpagenum",this.rowsBufferOutSize.toString()+" "+this.i18n.paging.perpage);this.callEvent("onPaging",[])};dhtmlXGridObject.prototype._pgn_createToolBar=function(){var n,t,r,i;if(this.aToolBar=new dhtmlXToolbarObject({parent:this._pgn_parentObj,skin:this._pgn_skin_tlb||this.skin_name,icons_path:this.imgURL}),this._WTDef||this.setPagingWTMode(!0,!0,!0,!0),n=this,this.aToolBar.attachEvent("onClick",function(t){t=t.split("_");switch(t[0]){case"leftabs":n.changePage(1);break;case"left":n.changePage(n.currentPage-1);break;case"rightabs":n.changePage(99999);break;case"right":n.changePage(n.currentPage+1);break;case"perpagenum":if(t[1]===this.undefined)return;n.rowsBufferOutSize=parseInt(t[1]);n.changePage();n.aToolBar.setItemText("perpagenum",t[1]+" "+n.i18n.paging.perpage);break;case"pages":if(t[1]===this.undefined)return;n.changePage(t[1]);n.aToolBar.setItemText("pages",n.i18n.paging.page+t[1])}}),this._WTDef[0]&&(this.aToolBar.addButton("leftabs",NaN,null,"ar_left_abs.gif","ar_left_abs_dis.gif"),this.aToolBar.addButton("left",NaN,null,"ar_left.gif","ar_left_dis.gif")),this._WTDef[1]&&(this.aToolBar.addText("results",NaN,this.i18n.paging.results),this.aToolBar.setWidth("results","150"),this.aToolBar.disableItem("results")),this._WTDef[0]&&(this.aToolBar.addButton("right",NaN,null,"ar_right.gif","ar_right_dis.gif"),this.aToolBar.addButton("rightabs",NaN,null,"ar_right_abs.gif","ar_right_abs_dis.gif")),this._WTDef[2]&&(this.aToolBar.conf.skin=="dhx_terrace"&&this.aToolBar.addSeparator(),this.aToolBar.addButtonSelect("pages",NaN,"select page",[],"paging_pages.gif",null,!1,!0)),t=this._WTDef[3])for(this.aToolBar.conf.skin=="dhx_terrace"&&this.aToolBar.addSeparator(),this.aToolBar.addButtonSelect("perpagenum",NaN,"select size",[],"paging_rows.gif",null,!1,!0),typeof t!="object"&&(t=[5,10,15,20,25,30]),r={dhx_skyblue:4,dhx_web:0,dhx_terrace:18}[this.aToolBar.conf.skin],i=0;i<t.length;i++)this.aToolBar.addListOption("perpagenum","perpagenum_"+t[i],NaN,"button","<span style='padding: 0px "+r+"px 0px 0px;'>"+t[i]+" "+this.i18n.paging.perpage+"<\/span>","paging_page.gif");return this.aToolBar};dhtmlXGridObject.prototype.post=function(n,t,i,r){this.callEvent("onXLS",[this]);arguments.length==2&&typeof i!="function"&&(r=i,i=null);r=r||"xml";this.xmlFileUrl||(this.xmlFileUrl=n);this._data_type=r;this.xmlLoader=this.doLoadDetails;var u=this;this.xmlLoader=function(n){u.callEvent&&(u["_process_"+r](n.xmlDoc),u._contextCallTimer||u.callEvent("onXLE",[u,0,0,n.xmlDoc,r]),i&&(i(),i=null))};dhx4.ajax.post(n,t||"",this.xmlLoader)};dhtmlXGridObject.prototype.setRowspan=function(n,t,i){var u=this[this._bfs_cells?"_bfs_cells":"cells"](n,t).cell,r=this.rowsAr[n],f,h,o,c,e,s;if(u.rowSpan&&u.rowSpan!=1)for(f=r.nextSibling,e=1;e<u.rowSpan;e++)h=f.childNodes[f._childIndexes[u._cellIndex+1]],o=document.createElement("TD"),o.innerHTML="&nbsp;",o._cellIndex=u._cellIndex,o._clearCell=!0,h?h.parentNode.insertBefore(o,h):f.parentNode.appendChild(o),this._shiftIndexes(f,u._cellIndex,-1),f=f.nextSibling;for(u.rowSpan=i,r=this._h2?this.rowsAr[this._h2.get[r.idd].parent.childs[this._h2.get[r.idd].index+1].id]:r.nextSibling||this.rowsCol[this.rowsCol._dhx_find(r)+1],c=[],e=1;e<i;e++)s=null,s=this._fake&&!this._realfake?this._bfs_cells3(r,t).cell:this.cells3(r,t).cell,this._shiftIndexes(r,u._cellIndex,1),s&&s.parentNode.removeChild(s),c.push(r),this._h2?(r=this._h2.get[r.idd].parent.childs[this._h2.get[r.idd].index+1],r&&(r=this.rowsAr[r.id])):r=r.nextSibling||this.rowsCol[this.rowsCol._dhx_find(r)+1];this.rowsAr[n]._rowSpan=this.rowsAr[n]._rowSpan||{};this.rowsAr[n]._rowSpan[t]=c;this._fake&&!this._realfake&&t<this._fake._cCount&&this._fake.setRowspan(n,t,i)};dhtmlXGridObject.prototype._shiftIndexes=function(n,t,i){var r;if(!n._childIndexes)for(n._childIndexes=[],r=0;r<n.childNodes.length;r++)n._childIndexes[r]=r;for(r=0;r<n._childIndexes.length;r++)r>t&&(n._childIndexes[r]=n._childIndexes[r]-i)};dhtmlXGridObject.prototype.enableRowspan=function(){this._erspan=!0;this.enableRowspan=function(){};this.attachEvent("onAfterSorting",function(){var f,o,n,r,i,u,e,s,t;if(!this._dload){for(t=1;t<this.obj.rows.length;t++)if(this.obj.rows[t]._rowSpan){f=this.obj.rows[t];for(o in f._rowSpan)for(n=f,r=n._rowSpan[o],i=0;i<r.length;i++)n.nextSibling?n.parentNode.insertBefore(r[i],n.nextSibling):n.parentNode.appendChild(r[i]),this._fake&&(u=this._fake.rowsAr[n.idd],e=this._fake.rowsAr[r[i].idd],u.nextSibling?u.parentNode.insertBefore(e,u.nextSibling):u.parentNode.appendChild(e),this._correctRowHeight(n.idd)),n=n.nextSibling}for(s=this.rowsCol.stablesort,this.rowsCol=new dhtmlxArray,this.rowsCol.stablesort=s,t=1;t<this.obj.rows.length;t++)this.rowsCol.push(this.obj.rows[t])}});this.attachEvent("onXLE",function(){for(var r,t,n,i=0;i<this.rowsBuffer.length;i++)for(r=this.render_row(i),t=r.childNodes,n=0;n<t.length;n++)t[n]._attrs.rowspan&&this.setRowspan(r.idd,t[n]._cellIndex,t[n]._attrs.rowspan)})};dhx4.attachEvent("onGridCreated",function(n){n._split_later&&n.splitAt(n._split_later)});dhtmlXGridObject.prototype.splitAt=function(n){function y(n){var t=v.objBox,i;t.scrollHeight-t.offsetHeight>2&&(i=n.wheelDelta/-40,n.wheelDelta===window.undefined&&(i=n.detail),t.scrollTop+=i*40,n.preventDefault&&n.preventDefault())}function w(n,t){var i,r,u;t.style.whiteSpace="";i=t.nextSibling;r=t.parentNode;n.parentNode.insertBefore(t,n);i?r.insertBefore(n,i):r.appendChild(n);u=n.style.display;n.style.display=t.style.display;t.style.display=u}function p(t,i,r,u){var y=new Array(n).join(this.delim),s=[],o,c,h,f,l,e;if(t==2)for(e=0;e<n;e++)o=i[t-1].cells[i[t-1]._childIndexes?i[t-1]._childIndexes[e]:e],o.rowSpan&&o.rowSpan>1&&(s[o._cellIndex]=o.rowSpan-1,u[t-1].cells[u[t-1]._childIndexes?u[t-1]._childIndexes[e]:e].rowSpan=o.rowSpan,o.rowSpan=1);for(t;t<i.length;t++)for(this._fake.attachHeader(y,null,r),u=u||this._fake.ftr.childNodes[0].rows,c=n,h=0,f=0;f<c;f++){if(s[f]){s[f]=s[f]-1;(_isIE||_isOpera)&&(l=document.createElement("TD"),_isFF&&(l.style.display="none"),i[t].insertBefore(l,i[t].cells[0]));h++;continue}var p=u[t].cells[f-h],a=i[t].cells[f-(_isIE?0:h)],v=a.rowSpan;if(w(p,a),v>1&&(s[f]=v-1,a.rowSpan=v),u[t].cells[f].colSpan>1)for(i[t].cells[f].colSpan=u[t].cells[f].colSpan,c-=u[t].cells[f].colSpan-1,e=1;e<u[t].cells[f].colSpan;e++)u[t].removeChild(u[t].cells[f+1])}}function b(n,t,i,r){for(var o,e=r.shiftKey?-1:1,s=r.shiftKey?-1:i._cCount,f=!1,u=n+e;u!=s;u+=e)if(f=i.smartTabOrder?i.cells2(t,u).isDisabled()?!1:u:u,f!==!1)return o=!i._key_events.k_other,i.selectCell(t,f,!1,!1,o,!0),r.cancelBubble=!0,r.preventDefault&&r.preventDefault(),!0}var f,u,s,o,a,i,r,c,v,t;if(!this.obj.rows[0])return this._split_later=n;for(n=parseInt(n),f=document.createElement("DIV"),this.entBox.appendChild(f),u=document.createElement("DIV"),this.entBox.appendChild(u),i=this.entBox.childNodes.length-3;i>=0;i--)u.insertBefore(this.entBox.childNodes[i],u.firstChild);this.entBox.style.position="relative";this.globalBox=this.entBox;this.entBox=u;u.grid=this;f.style.cssText+="border:0px solid red !important;";u.style.cssText+="border:0px solid red !important;";u.style.top="0px";u.style.position="absolute";f.style.position="absolute";f.style.top="0px";f.style.left="0px";f.style.zIndex=11;u.style.height=f.style.height=this.globalBox.clientHeight;this._fake=new dhtmlXGridObject(f);this.globalBox=this._fake.globalBox=this.globalBox;this._fake._fake=this;this._fake._realfake=!0;this._treeC=this.cellType._dhx_find("tree");this._fake.delim=this.delim;this._fake.customGroupFormat=this.customGroupFormat;this._fake.setImagesPath(this._imgURL);this._fake.iconURL=this.iconURL;this._fake._customSorts=this._customSorts;this._fake.noHeader=this.noHeader;this._fake._enbTts=this._enbTts;this._fake._drsclmW=this._drsclmW;this._fake._htkebl=this._htkebl;this._fake.clists=this.clists;this._fake.fldSort=[];this._fake.selMultiRows=this.selMultiRows;this._fake.multiLine=this.multiLine;this._fake._key_events=this._key_events;this._fake.smartTabOrder=this.smartTabOrder;this._fake._RaSeCol=this._RaSeCol;(this.multiLine||this._erspan)&&(this.attachEvent("onCellChanged",this._correctRowHeight),this.attachEvent("onRowAdded",this._correctRowHeight),s=function(){this.forEachRow(function(n){this._correctRowHeight(n)})},this.attachEvent("onPageChanged",s),this.attachEvent("onXLE",s),this.attachEvent("onResizeEnd",s),this._ads_count||this.attachEvent("onAfterSorting",s),this.attachEvent("onFilterEnd",s),this.attachEvent("onDistributedEnd",s));this.attachEvent("onGridReconstructed",function(){this._fake.objBox.scrollTop=this.objBox.scrollTop});this._fake.loadedKidsHash=this.loadedKidsHash;this._h2&&(this._fake._h2=this._h2);this._fake._dInc=this._dInc;var e=[[],[],[],[],[],[],[]],h=["hdrLabels","initCellWidth","cellType","cellAlign","cellVAlign","fldSort","columnColor"],l=["setHeader","setInitWidths","setColTypes","setColAlign","setColVAlign","setColSorting","setColumnColor"];for(this._fake.callEvent=function(){var t=!0,n;return this._fake._split_event=!0,n=arguments[0]=="onScroll",(arguments[0]=="onGridReconstructed"||n)&&this._fake.callEvent.apply(this,arguments),n||(t=this._fake.callEvent.apply(this._fake,arguments)),this._fake._split_event=!1,t},this._elmn&&this._fake.enableLightMouseNavigation(!0),(this._cssEven||this._cssUnEven)&&this._fake.attachEvent("onGridReconstructed",function(){this._fixAlterCss()}),this._fake._cssSP=this._cssSP,this._fake.isEditable=this.isEditable,this._fake._edtc=this._edtc,this._sst&&this._fake.enableStableSorting(!0),this._fake._sclE=this._sclE,this._fake._dclE=this._dclE,this._fake._f2kE=this._f2kE,this._fake._maskArr=this._maskArr,this._fake._dtmask=this._dtmask,this._fake.combos=this.combos,o=0,a=this.globalBox.offsetWidth,i=0;i<n;i++){for(r=0;r<h.length;r++)this[h[r]]&&(e[r][i]=this[h[r]][i]),typeof e[r][i]=="string"&&(e[r][i]=e[r][i].replace(new RegExp("\\"+this.delim,"g"),"\\"+this.delim));_isFF&&(e[1][i]=e[1][i]*1);this.cellWidthType=="%"?(e[1][i]=Math.round(parseInt(this[h[1]][i])*a/100),o+=e[1][i]):o+=parseInt(this[h[1]][i]);this.setColumnHidden(i,!0)}for(r=0;r<h.length;r++)c=e[r].join(this.delim),l[r]!="setHeader"?c!=""&&this._fake[l[r]](c):this._fake[l[r]](c,null,this._hstyles);this._fake._strangeParams=this._strangeParams;this._fake._drsclmn=this._drsclmn;o=Math.min(this.globalBox.offsetWidth,o);u.style.left=o+"px";f.style.width=o+"px";u.style.width=Math.max(this.globalBox.offsetWidth-o,0);this._ecspn&&(this._fake._ecspn=!0);this._fake.init();this.dragAndDropOff&&this.dragger.addDragLanding(this._fake.entBox,this);this._fake.objBox.style.overflow="hidden";dhtmlx.$customScroll?this._fake.objBox._custom_scroll_mode="":this._fake.objBox.style.overflowX="scroll";this._fake._srdh=this._srdh||20;this._fake._srnd=this._srnd;this._fake._cssEven=this._cssEven;this._fake._cssUnEven=this._cssUnEven;this.skin_name!=this._fake.skin_name&&this._fake.setSkin(this.skin_name);v=this;dhtmlxEvent(this._fake.objBox,"mousewheel",y);dhtmlxEvent(this._fake.objBox,"DOMMouseScroll",y);this.hdr.rows.length>2&&p.call(this,2,this.hdr.rows,"_aHead",this._fake.hdr.rows);this.ftr&&(p.call(this,1,this.ftr.childNodes[0].rows,"_aFoot"),this._fake.ftr.parentNode.style.bottom=(_isFF?2:1)+"px");this.saveSizeToCookie&&(this.saveSizeToCookie=function(t,i){var f,u,r;if(this._realfake)return this._fake.saveSizeToCookie.apply(this._fake,arguments);for(t||(t=this.entBox.id),r=[],f="cellWidthPX",u=0;u<this[f].length;u++)r[u]=u<n?this._fake[f][u]:this[f][u];return r=r.join(","),this.setCookie(t,i,0,r),r=(this.initCellWidth||[]).join(","),this.setCookie(t,i,1,r),!0},this.loadSizeFromCookie=function(t){var i,f,u,r,e;if(t||(t=this.entBox.id),i=this._getCookie(t,1),i){if(this.initCellWidth=i.split(","),i=this._getCookie(t,0),f="cellWidthPX",this.cellWidthType="px",u=0,i&&i.length)for(i=i.split(","),r=0;r<i.length;r++)r<n?(this._fake[f][r]=i[r],u+=i[r]*1):this[f][r]=i[r];return this._fake.entBox.style.width=u+"px",this._fake.objBox.style.width=u+"px",e=this.globalBox.childNodes[1],e.style.left=u-(_isFF?0:0)+"px",this.ftr&&(this.ftr.style.left=u-(_isFF?0:0)+"px"),e.style.width=this.globalBox.offsetWidth-u+"px",this.setSizes(),!0}},this._fake.onRSE=this.onRSE);this.setCellTextStyleA=this.setCellTextStyle;this.setCellTextStyle=function(t,i,r){i<n&&this._fake.setCellTextStyle(t,i,r);this.setCellTextStyleA(t,i,r)};this.setRowTextBoldA=this.setRowTextBold;this.setRowTextBold=function(n){this.setRowTextBoldA(n);this._fake.setRowTextBold(n)};this.setRowColorA=this.setRowColor;this.setRowColor=function(n,t){this.setRowColorA(n,t);this._fake.setRowColor(n,t)};this.setRowHiddenA=this.setRowHidden;this.setRowHidden=function(n,t){this.setRowHiddenA(n,t);this._fake.setRowHidden(n,t)};this.setRowTextNormalA=this.setRowTextNormal;this.setRowTextNormal=function(n){this.setRowTextNormalA(n);this._fake.setRowTextNormal(n)};this.getChangedRows=function(n){function i(n){for(var i=0;i<n.childNodes.length;i++)if(n.childNodes[i].wasChanged)return t[t.length]=n.idd}var t=[];return this.forEachRow(function(r){var u=this.rowsAr[r],f=this._fake.rowsAr[r];u.tagName=="TR"&&f&&f.tagName=="TR"&&(n&&u._added?t[t.length]=u.idd:i(u)||i(f))}),t.join(this.delim)};this.setRowTextStyleA=this.setRowTextStyle;this.setRowTextStyle=function(n,t){this.setRowTextStyleA(n,t);this._fake.rowsAr[n]&&this._fake.setRowTextStyle(n,t)};this.lockRowA=this.lockRow;this.lockRow=function(n,t){this.lockRowA(n,t);this._fake.lockRow(n,t)};this.getColWidth=function(t){return t<n?parseInt(this._fake.cellWidthPX[t]):parseInt(this.cellWidthPX[t])};this.getColumnLabel=function(t){return this._fake.getColumnLabel.apply(t<n?this._fake:this,arguments)};this.setColWidthA=this._fake.setColWidthA=this.setColWidth;this.setColWidth=function(t,i){t=t*1;t<n?this._fake.setColWidthA(t,i):this.setColWidthA(t,i);t+1<=n&&this._fake._correctSplit(Math.min(this._fake.objBox.offsetWidth,this._fake.obj.offsetWidth))};this.adjustColumnSizeA=this.adjustColumnSize;this.setColumnLabelA=this.setColumnLabel;this.setColumnLabel=function(t,i,r,u){var f=this;return t<n&&(f=this._fake),this.setColumnLabelA.apply(f,[t,i,r,u])};this.adjustColumnSize=function(t,i){if(t<n)_isIE&&(this._fake.obj.style.tableLayout=""),this._fake.adjustColumnSize(t,i),_isIE&&(this._fake.obj.style.tableLayout="fixed"),this._fake._correctSplit();else return this.adjustColumnSizeA(t,i)};t="cells";this._bfs_cells=this[t];this[t]=function(){return arguments[1]<n?this._fake.cells.apply(this._fake,arguments):this._bfs_cells.apply(this,arguments)};this._bfs_isColumnHidden=this.isColumnHidden;this.isColumnHidden=function(){return parseInt(arguments[0])<n?this._fake.isColumnHidden.apply(this._fake,arguments):this._bfs_isColumnHidden.apply(this,arguments)};this._bfs_setColumnHidden=this.setColumnHidden;this.setColumnHidden=function(){return parseInt(arguments[0])<n?(this._fake.setColumnHidden.apply(this._fake,arguments),this._fake._correctSplit()):this._bfs_setColumnHidden.apply(this,arguments)};t="cells2";this._bfs_cells2=this[t];this[t]=function(){return arguments[1]<n?this._fake.cells2.apply(this._fake,arguments):this._bfs_cells2.apply(this,arguments)};t="cells3";this._bfs_cells3=this[t];this[t]=function(t){return arguments[1]<n&&this._fake.rowsAr[arguments[0].idd]?this._fake.rowsAr[t.idd]&&this._fake.rowsAr[t.idd].childNodes.length==0?this._bfs_cells3.apply(this,arguments):(arguments[0]=arguments[0].idd,this._fake.cells.apply(this._fake,arguments)):this._bfs_cells3.apply(this,arguments)};t="changeRowId";this._bfs_changeRowId=this[t];this[t]=function(){this._bfs_changeRowId.apply(this,arguments);this._fake.rowsAr[arguments[0]]&&this._fake.changeRowId.apply(this._fake,arguments)};this._fake.getRowById=function(n){var t=this.rowsAr[n],i;if(!t&&this._fake.rowsAr[n]&&(t=this._fake.getRowById(n)),t){if(t.tagName!="TR"){for(i=0;i<this.rowsBuffer.length;i++)if(this.rowsBuffer[i]&&this.rowsBuffer[i].idd==n)return this.render_row(i);if(this._h2)return this.render_row(null,t.idd)}return t}return null};this.collapseKids&&(this._fake._bfs_collapseKids=this.collapseKids,this._fake.collapseKids=function(){return this._fake.collapseKids.apply(this._fake,[this._fake.rowsAr[arguments[0].idd]])},this._bfs_collapseKids=this.collapseKids,this.collapseKids=function(){var n=this._bfs_collapseKids.apply(this,arguments);this._fake._h2syncModel();this._cssSP||this._fake._fixAlterCss()},this._fake._bfs_expandKids=this.expandKids,this._fake.expandKids=function(){this._fake.expandKids.apply(this._fake,[this._fake.rowsAr[arguments[0].idd]]);this._cssSP||this._fake._fixAlterCss()},this._bfs_expandAll=this.expandAll,this.expandAll=function(){this._bfs_expandAll();this._fake._h2syncModel();this._cssSP||this._fake._fixAlterCss()},this._bfs_collapseAll=this.collapseAll,this.collapseAll=function(){this._bfs_collapseAll();this._fake._h2syncModel();this._cssSP||this._fake._fixAlterCss()},this._bfs_expandKids=this.expandKids,this.expandKids=function(){var n=this._bfs_expandKids.apply(this,arguments);this._fake._h2syncModel();this._cssSP||this._fake._fixAlterCss()},this._fake._h2syncModel=function(){this._fake.pagingOn?this._fake._renderSort():this._renderSort()},this._updateTGRState=function(n){return this._fake._updateTGRState(n)});this._elmnh&&(this._setRowHoverA=this._fake._setRowHoverA=this._setRowHover,this._unsetRowHoverA=this._fake._unsetRowHoverA=this._unsetRowHover,this._setRowHover=this._fake._setRowHover=function(){var n=this.grid,t;n._setRowHoverA.apply(this,arguments);t=_isIE?event.srcElement:arguments[0].target;t=n._fake.rowsAr[n.getFirstParentOfType(t,"TD").parentNode.idd];t&&n._fake._setRowHoverA.apply(n._fake.obj,[{target:t.childNodes[0]},arguments[1]])},this._unsetRowHover=this._fake._unsetRowHover=function(){var n;n=arguments[1]?this:this.grid;n._unsetRowHoverA.apply(this,arguments);n._fake._unsetRowHoverA.apply(n._fake.obj,arguments)},this._fake.enableRowsHover(!0,this._hvrCss),this.enableRowsHover(!1),this.enableRowsHover(!0,this._fake._hvrCss));this._updateTGRState=function(n){n.update&&n.id!=0&&(this.rowsAr[n.id].imgTag&&(this.rowsAr[n.id].imgTag.src=this.iconTree+n.state+".gif"),this._fake.rowsAr[n.id]&&this._fake.rowsAr[n.id].imgTag&&(this._fake.rowsAr[n.id].imgTag.src=this.iconTree+n.state+".gif"),n.update=!1)};this.copy_row=function(t){var i=t.cloneNode(!0),u,e,r,f;if(i._skipInsert=t._skipInsert,i._locked=t._locked,u=n,i._attrs={},i._css=t._css,this._ecspn)for(u=0,r=0;u<i.childNodes.length&&r<n;r+=i.childNodes[u].colSpan||1)u++;while(i.childNodes.length>u)i.removeChild(i.childNodes[i.childNodes.length-1]);for(e=u,r=0;r<e;r++)this.dragAndDropOff&&this.dragger.addDraggableItem(i.childNodes[r],this),i.childNodes[r].style.display=this._fake._hrrar?this._fake._hrrar[r]?"none":"":"",i.childNodes[r]._cellIndex=r,i.childNodes[r].combo_value=arguments[0].childNodes[r].combo_value,i.childNodes[r]._clearCell=arguments[0].childNodes[r]._clearCell,i.childNodes[r]._cellType=arguments[0].childNodes[r]._cellType,i.childNodes[r]._brval=arguments[0].childNodes[r]._brval,i.childNodes[r].val=arguments[0].childNodes[r].val,i.childNodes[r]._combo=arguments[0].childNodes[r]._combo,i.childNodes[r]._attrs=arguments[0].childNodes[r]._attrs,i.childNodes[r].chstate=arguments[0].childNodes[r].chstate,t._attrs.style&&(i.childNodes[r].style.cssText=t._attrs.style+";"+i.childNodes[r].style.cssText),i.childNodes[r].colSpan>1&&(i._childIndexes=arguments[0]._childIndexes);return this._h2&&this._treeC<n&&(f=this._h2.get[arguments[0].idd],i.imgTag=i.childNodes[this._treeC].childNodes[0].childNodes[f.level],i.valTag=i.childNodes[this._treeC].childNodes[0].childNodes[f.level+2]),i.idd=t.idd,i.grid=this._fake,i};t="_insertRowAt";this._bfs_insertRowAt=this[t];this[t]=function(){var t=this._bfs_insertRowAt.apply(this,arguments),n;return arguments[0]=this.copy_row(arguments[0]),n=this._fake._insertRowAt.apply(this._fake,arguments),t._fhd&&(n.parentNode.removeChild(n),this._fake.rowsCol._dhx_removeAt(this._fake.rowsCol._dhx_find(n)),t._fhd=!1),t};this._bfs_setSizes=this.setSizes;this.setSizes=function(){if(!this._notresize){this._bfs_setSizes(this,arguments);this.sync_headers();this.sync_scroll()&&this._ahgr&&this.setSizes();var n=this.dontSetSizes?this.entBox.offsetHeight+"px":this.entBox.style.height;this._fake.entBox.style.height=n;this._fake.objBox.style.height=this.objBox.style.height;this._fake.hdrBox.style.height=this.hdrBox.style.height;this._fake.objBox.scrollTop=this.objBox.scrollTop;this._fake.setColumnSizes(this._fake.entBox.clientWidth);this.globalBox.style.width=parseInt(this.entBox.style.width)+parseInt(this._fake.entBox.style.width);this.dontSetSizes||(this.globalBox.style.height=n)}};this.sync_scroll=this._fake.sync_scroll=function(n){var t=this.objBox.style.overflowX;if(this.obj.offsetWidth<=this.objBox.offsetWidth){if(!n)return this._fake.sync_scroll(!0);this.objBox.style.overflowX="hidden";this._fake.objBox.style.overflowX="hidden"}else dhtmlx.$customScroll||(this.objBox.style.overflowX="scroll",this._fake.objBox.style.overflowX="scroll");return t!=this.objBox.style.overflowX};this.sync_headers=this._fake.sync_headers=function(){var t,i,r,u,f;if(!this.noHeader&&this._fake.hdr.scrollHeight!=this.hdr.offsetHeight&&!this.noHeaderResize){for(t=1;t<this.hdr.rows.length;t++){for(i=n;!this.hdr.rows[t].childNodes[i];)i--;if(r=Math.min(this.hdr.rows[t].childNodes[i].scrollHeight+2,this.hdr.rows[t].scrollHeight),u=this._fake.hdr.rows[t].scrollHeight,r!=u&&(this._fake.hdr.rows[t].style.height=this.hdr.rows[t].style.height=Math.max(r,u)+"px"),window._KHTMLrv){for(f=0;this._fake._hrrar[f];)f++;this._fake.hdr.rows[t].childNodes[f].style.height=this.hdr.rows[t].childNodes[i].style.height=Math.max(r,u)+"px"}}this._fake.sync_headers}};this._fake._bfs_setSizes=this._fake.setSizes;this._fake.setSizes=function(){this._fake._notresize||this._fake.setSizes()};t="_doOnScroll";this._bfs__doOnScroll=this[t];this[t]=function(){this._bfs__doOnScroll.apply(this,arguments);this._fake.objBox.scrollTop=this.objBox.scrollTop;this._fake._doOnScroll.apply(this._fake,arguments)};t="selectAll";this._bfs__selectAll=this[t];this[t]=function(){this._bfs__selectAll.apply(this,arguments);this._bfs__selectAll.apply(this._fake,arguments)};t="doClick";this._bfs_doClick=this[t];this[t]=function(){if(this._bfs_doClick.apply(this,arguments),arguments[0].tagName=="TD"){var t=arguments[0]._cellIndex>=n;if(!arguments[0].parentNode.idd)return;t||(arguments[0].className=arguments[0].className.replace(/cellselected/g,""));this._fake.rowsAr[arguments[0].parentNode.idd]||this._fake.render_row(this.getRowIndex(arguments[0].parentNode.idd));arguments[0]=this._fake.cells(arguments[0].parentNode.idd,t?0:arguments[0]._cellIndex).cell;t&&(this._fake.cell=null);this._fake._bfs_doClick.apply(this._fake,arguments);t?this._fake.cell=this.cell:this.cell=this._fake.cell;this._fake.onRowSelectTime&&clearTimeout(this._fake.onRowSelectTime);t?(arguments[0].className=arguments[0].className.replace(/cellselected/g,""),globalActiveDHTMLGridObject=this,this._fake.cell=this.cell):this.objBox.scrollTop=this._fake.objBox.scrollTop}};this._fake._bfs_doClick=this._fake[t];this._fake[t]=function(){if(this._bfs_doClick.apply(this,arguments),arguments[0].tagName=="TD"){var t=arguments[0]._cellIndex<n;if(!arguments[0].parentNode.idd)return;arguments[0]=this._fake._bfs_cells(arguments[0].parentNode.idd,t?n:arguments[0]._cellIndex).cell;this._fake.cell=null;this._fake._bfs_doClick.apply(this._fake,arguments);this._fake.cell=this.cell;this._fake.onRowSelectTime&&clearTimeout(this._fake.onRowSelectTime);t&&(arguments[0].className=arguments[0].className.replace(/cellselected/g,""),globalActiveDHTMLGridObject=this,this._fake.cell=this.cell,this._fake.objBox.scrollTop=this.objBox.scrollTop)}};this.clearSelectionA=this.clearSelection;this.clearSelection=function(n){n&&this._fake.clearSelection();this.clearSelectionA()};this.moveRowUpA=this.moveRowUp;this.moveRowUp=function(n){this._h2||this._fake.moveRowUp(n);this.moveRowUpA(n);this._h2&&this._fake._h2syncModel()};this.moveRowDownA=this.moveRowDown;this.moveRowDown=function(n){this._h2||this._fake.moveRowDown(n);this.moveRowDownA(n);this._h2&&this._fake._h2syncModel()};this._fake.getUserData=function(){return this._fake.getUserData.apply(this._fake,arguments)};this._fake.setUserData=function(){return this._fake.setUserData.apply(this._fake,arguments)};this.getSortingStateA=this.getSortingState;this.getSortingState=function(){var n=this.getSortingStateA();return n.length!=0?n:this._fake.getSortingState()};this.setSortImgStateA=this._fake.setSortImgStateA=this.setSortImgState;this.setSortImgState=function(t,i,r,u){this.setSortImgStateA(t,i,r,u);i*1<n?(this._fake.setSortImgStateA(t,i,r,u),this.setSortImgStateA(!1)):this._fake.setSortImgStateA(!1)};this._fake.doColResizeA=this._fake.doColResize;this._fake.doColResize=function(t,i,r,u){var e=-1,f=0;return arguments[1]._cellIndex==n-1?(e=this._initalSplR+(t.clientX-u),this._initalSplF||(this._initalSplF=arguments[3]+this.objBox.scrollWidth-this.objBox.offsetWidth),this.objBox.scrollWidth==this.objBox.offsetWidth&&(this._fake.alter_split_resize||t.clientX-u>0)?(arguments[3]=this._initalSplF||arguments[3],f=this.doColResizeA.apply(this,arguments)):f=this.doColResizeA.apply(this,arguments)):(this.obj.offsetWidth<this.entBox.offsetWidth&&(e=this.obj.offsetWidth),f=this.doColResizeA.apply(this,arguments)),f!==!1&&(this._correctSplit(e),this.resized=this._fake.resized=1),f};this._fake.changeCursorState=function(n){var t=n.target||n.srcElement,i,r;(t.tagName!="TD"&&(t=this.getFirstParentOfType(t,"TD")),t.tagName!="TD"||!this._drsclmn||this._drsclmn[t._cellIndex])&&(i=(n.layerX||0)+(!_isIE&&n.target.tagName=="DIV"?t.offsetLeft:0),r=parseInt(this.getPosition(t,this.hdrBox)),t.style.cursor=t.offsetWidth-(n.offsetX||(r-i)*-1)<(_isOpera?20:10)||this.entBox.offsetWidth-(n.offsetX?n.offsetX+t.offsetLeft:i)+this.objBox.scrollLeft-0<(_isOpera?20:10)?"E-resize":"default",_isOpera&&(this.hdrBox.scrollLeft=this.objBox.scrollLeft))};this._fake.startColResizeA=this._fake.startColResize;this._fake.startColResize=function(n){var i=this.startColResizeA(n),t;if(this._initalSplR=this.entBox.offsetWidth,this._initalSplF=null,this.entBox.onmousemove){if(t=this.entBox.parentNode,t._aggrid)return i;t._aggrid=t.grid;t.grid=this;this.entBox.parentNode.onmousemove=this.entBox.onmousemove;this.entBox.onmousemove=null}return i};this._fake.stopColResizeA=this._fake.stopColResize;this._fake.stopColResize=function(n){if(this.entBox.parentNode.onmousemove){var t=this.entBox.parentNode;t.grid=t._aggrid;t._aggrid=null;this.entBox.onmousemove=this.entBox.parentNode.onmousemove;this.entBox.parentNode.onmousemove=null;this.obj.offsetWidth<this.entBox.offsetWidth&&this._correctSplit(this.obj.offsetWidth)}return this.stopColResizeA(n)};this.doKeyA=this.doKey;this._fake.doKeyA=this._fake.doKey;this._fake.doKey=this.doKey=function(n){var r,t,u,i;if(!n||this._htkebl||(n.target||n.srcElement).value!==window.undefined&&(r=n.target||n.srcElement,!r.parentNode||r.parentNode.className.indexOf("editable")==-1))return!0;switch(n.keyCode){case 9:if(t=this._realfake?this._fake:this,!t.callEvent("onTab",[!0]))return!0;if(this.cell){for(u=this.cell._cellIndex,i=t.getRowIndex(this.cell.parentNode.idd);!b(u,i,t,n);){if(i+=n.shiftKey?-1:1,i<0||i>=t.rowsBuffer.length)return;u=n.shiftKey?t._cCount:-1}return}}return this.doKeyA(n)};this.editCellA=this.editCell;this.editCell=function(){return this.cell&&this.cell.parentNode.grid!=this?this._fake.editCell():this.editCellA()};this.deleteRowA=this.deleteRow;this.deleteRow=function(n,t){if(this.deleteRowA(n,t)===!1)return!1;this._fake.rowsAr[n]&&this._fake.deleteRow(n)};this.clearAllA=this.clearAll;this.clearAll=function(){this.clearAllA();this._fake.clearAll()};this.editStopA=this.editStop;this.editStop=function(n){this._fake.editor?this._fake.editStop(n):this.editStopA(n)};this.attachEvent("onAfterSorting",function(t){t>=n&&this._fake.setSortImgState(!1)});this._fake.sortField=function(n,t){if(this._fake.sortField.call(this._fake,n,t,this._fake.hdr.rows[0].cells[n]),this.fldSort[n]!="na"&&this._fake.fldSorted){var i=this._fake.getSortingState()[1];this._fake.setSortImgState(!1);this.setSortImgState(!0,arguments[0],i)}};this.sortTreeRowsA=this.sortTreeRows;this._fake.sortTreeRowsA=this._fake.sortTreeRows;this.sortTreeRows=this._fake.sortTreeRows=function(n,t,i,r){if(this._realfake)return this._fake.sortTreeRows(n,t,i,r);this.sortTreeRowsA(n,t,i,r);this._fake._h2syncModel();this._fake.setSortImgStateA(!1);this._fake.fldSorted=null};this._fake._fillers=[];this._fake.rowsBuffer=this.rowsBuffer;this.attachEvent("onClearAll",function(){this._fake.rowsBuffer=this.rowsBuffer});this._add_filler_s=this._add_filler;this._add_filler=function(n,t,i,r){if(this._fake._fillers||(this._fake._fillers=[]),this._realfake||!r){var u;i&&i.idd?u=this._fake.rowsAr[i.idd]:i&&i.nextSibling?(u={},u.nextSibling=this._fake.rowsAr[i.nextSibling.idd],u.parentNode=u.nextSibling.parentNode):this._fake._fillers.length&&(u=this._fake._fillers[this._fake._fillers.length-1][2]);this._fake._fillers.push(this._fake._add_filler(n,t,u))}return this._add_filler_s.apply(this,arguments)};this._add_from_buffer_s=this._add_from_buffer;this._add_from_buffer=function(){var n=this._add_from_buffer_s.apply(this,arguments);return n!=-1&&(this._fake._add_from_buffer.apply(this._fake,arguments),this.multiLine&&this._correctRowHeight(this.rowsBuffer[arguments[0]].idd)),n};this._fake.render_row=function(n){var t=this._fake.render_row(n);return t==-1?-1:t?this.rowsAr[t.idd]=this.rowsAr[t.idd]||this._fake.copy_row(t):null};this._reset_view_s=this._reset_view;this._reset_view=function(){this._fake._reset_view(!0);this._fake._fillers=[];this._reset_view_s()};this.moveColumn_s=this.moveColumn;this.moveColumn=function(t,i){if(i>=n)return this.moveColumn_s(t,i)};this.attachEvent("onCellChanged",function(t,i,r){var u,f;if(this._split_event&&i<n&&this.rowsAr[t]){if(u=this._fake.rowsAr[t],!u)return;u=u._childIndexes?u.childNodes[u._childIndexes[i]]:u.childNodes[i];f=this.rowsAr[t].childNodes[i];f._treeCell&&f.firstChild.lastChild?f.firstChild.lastChild.innerHTML=r:f.innerHTML=u.innerHTML;f._clearCell=!1;f.combo_value=r;f.chstate=u.chstate}});this._fake.combos=this.combos;this.setSizes();this.rowsBuffer[0]&&this._reset_view();this.attachEvent("onXLE",function(){this._fake._correctSplit()});this._fake._correctSplit()};dhtmlXGridObject.prototype._correctSplit=function(n){var i,t;n=n||this.obj.scrollWidth-this.objBox.scrollLeft;n=Math.min(this.globalBox.offsetWidth,n);n>-1&&(this.entBox.style.width=n+"px",this.objBox.style.width=n+"px",t=(this.globalBox.offsetWidth-this.globalBox.clientWidth)/2,this._fake.entBox.style.left=n+"px",this._fake.entBox.style.width=Math.max(0,this.globalBox.offsetWidth-n-(this.quirks?0:2)*t)+"px",this._fake.ftr&&(this._fake.ftr.parentNode.style.width=this._fake.entBox.style.width),_isIE&&(i=_isIE&&!window.xmlHttpRequest,t=this.globalBox.offsetWidth-this.globalBox.clientWidth,this._fake.hdrBox.style.width=this._fake.objBox.style.width=Math.max(0,this.globalBox.offsetWidth-(i?t:0)-n)+"px"))};dhtmlXGridObject.prototype._correctRowHeight=function(n){var t,i,u;if(this.rowsAr[n]&&this._fake.rowsAr[n]){var f=parseInt(this.rowsAr[n].style.height)||this.rowsAr[n].offsetHeight,e=parseInt(this._fake.rowsAr[n].style.height)||this._fake.rowsAr[n].offsetHeight,r=Math.max(f,e)-(this.rowsAr[n].delta_fix||0);if(r&&(this.rowsAr[n].style.height=this._fake.rowsAr[n].style.height=Math.round(r+1)+"px",this.rowsAr[n].delta_fix=1,window._KHTMLrv)){for(t=this._fake._cCount;!i&&t>=0;)i=this.rowsAr[n].childNodes[t],t-=1;u=this._fake.rowsAr[n].firstChild;i&&u&&(i.style.height=u.style.height=r+"px")}}};dhtmlXGridObject.prototype.enableAutoSizeSaving=function(n,t){this.attachEvent("onResizeEnd",function(){this.saveSizeToCookie(n,t)})};dhtmlXGridObject.prototype.saveOpenStates=function(n,t){var i,r;n||(n=this.entBox.id);i=[];this._h2.forEachChild(0,function(n){n.state=="minus"&&i.push(n.id)});r="gridOpen"+(n||"")+"="+i.join("|")+(t?"; "+t:"");document.cookie=r};dhtmlXGridObject.prototype.loadOpenStates=function(n){var t=this.getCookie(n,"gridOpen"),i,r;if(t)for(t=t.split("|"),i=0;i<t.length;i++)(r=this.getParentId(t[i]),this.getOpenState(r))&&this.openItem(t[i])};dhtmlXGridObject.prototype.enableAutoHiddenColumnsSaving=function(n,t){this.attachEvent("onColumnHidden",function(){this.saveHiddenColumnsToCookie(n,t)})};dhtmlXGridObject.prototype.enableSortingSaving=function(n,t){this.attachEvent("onBeforeSorting",function(){var i=this;return window.setTimeout(function(){i.saveSortingToCookie(n,t)},1),!0})};dhtmlXGridObject.prototype.enableOrderSaving=function(n,t){this.attachEvent("onAfterCMove",function(){this.saveOrderToCookie(n,t);this.saveSizeToCookie(n,t)})};dhtmlXGridObject.prototype.enableAutoSaving=function(n,t){this.enableOrderSaving(n,t);this.enableAutoSizeSaving(n,t);this.enableSortingSaving(n,t)};dhtmlXGridObject.prototype.saveSizeToCookie=function(n,t){var r,u,i;if(r=this.cellWidthType=="px"?this.cellWidthPX:this.cellWidthPC,u=(this.initCellWidth||[]).join(","),this._hrrar)for(i=0;i<this._hrrar.length;i++)this._hrrar[i]&&(r[i]="");this.setCookie(n,t,0,r.join(","));this.setCookie(n,t,1,u)};dhtmlXGridObject.prototype.saveHiddenColumnsToCookie=function(n,t){var r=[].concat(this._hrrar||[]),i;if(this._fake&&this._fake._hrrar)for(i=0;i<this._fake._cCount;i++)r[i]=this._fake._hrrar[i]?"1":"";this.setCookie(n,t,4,r.join(",").replace(/display:none;/g,"1"))};dhtmlXGridObject.prototype.loadHiddenColumnsFromCookie=function(n){for(var i=this._getCookie(n,4),r=(i||"").split(","),t=0;t<this._cCount;t++)this.setColumnHidden(t,r[t]?!0:!1)};dhtmlXGridObject.prototype.saveSortingToCookie=function(n,t){this.setCookie(n,t,2,(this.getSortingState()||[]).join(","))};dhtmlXGridObject.prototype.loadSortingFromCookie=function(n){var t=this._getCookie(n,2);t=(t||"").split(",");t.length>1&&t[0]<this._cCount&&(this.sortRows(t[0],null,t[1]),this.setSortImgState(!0,t[0],t[1]))};dhtmlXGridObject.prototype.saveOrderToCookie=function(n,t){var r,i;if(!this._c_order)for(this._c_order=[],r=this._cCount,i=0;i<r;i++)this._c_order[i]=i;this.setCookie(n,t,3,(this._c_order||[]).slice(0,this._cCount).join(","));this.saveSortingToCookie(n,t)};dhtmlXGridObject.prototype.loadOrderFromCookie=function(n){var i=this._getCookie(n,3),t,u,r;if(i=(i||"").split(","),i.length>1&&i.length<=this._cCount)for(t=0;t<i.length;t++)if(!this._c_order&&i[t]!=t||this._c_order&&i[t]!=this._c_order[t]){if(u=i[t],this._c_order)for(r=0;r<this._c_order.length;r++)if(this._c_order[r]==i[t]){u=r;break}this.moveColumn(u*1,t)}};dhtmlXGridObject.prototype.loadSizeFromCookie=function(n){var t=this._getCookie(n,1),i;if(t&&(this.initCellWidth=t.split(",")),t=this._getCookie(n,0),t&&t.length){if(t=t.split(","),!this._fake&&this._hrrar)for(i=0;i<t.length;i++)this._hrrar[i]&&(t[i]=0);this.cellWidthType=="px"?this.cellWidthPX=t:this.cellWidthPC=t}for(i=0;i<t.length;i++)t[i]===""&&(t[i]=this.initCellWidth[i],this.setColumnHidden(i,!0));return this.setSizes(),!0};dhtmlXGridObject.prototype.clearConfigCookie=function(n){n||(n=this.entBox.id);var t="gridSettings"+n+"=||||";document.cookie=t};dhtmlXGridObject.prototype.clearSizeCookie=dhtmlXGridObject.prototype.clearConfigCookie;dhtmlXGridObject.prototype.setCookie=function(n,t,i,r){var u,f;n||(n=this.entBox.id);u=this.getCookie(n);u=(u||"||||").split("|");u[i]=r;f="gridSettings"+n+"="+u.join("|").replace(/,/g,"-")+(t?"; "+t:"");document.cookie=f};dhtmlXGridObject.prototype.getCookie=function(n,t){var u,i,r;return n||(n=this.entBox.id),n=(t||"gridSettings")+n,u=n+"=",document.cookie.length>0&&(i=document.cookie.indexOf(u),i!=-1)?(i+=u.length,r=document.cookie.indexOf(";",i),r==-1&&(r=document.cookie.length),document.cookie.substring(i,r)):void 0};dhtmlXGridObject.prototype._getCookie=function(n,t){return(this.getCookie(n)||"||||").replace(/-/g,",").split("|")[t]};dhtmlXGridObject.prototype.enableUndoRedo=function(){var n=this,i=function(){return n._onEditUndoRedo.apply(n,arguments)},t;this.attachEvent("onEditCell",i);t=function(t,i,r){return n._onEditUndoRedo.apply(n,[2,t,i,r?1:0,r?0:1])};this.attachEvent("onCheckbox",t);this._IsUndoRedoEnabled=!0;this._UndoRedoData=[];this._UndoRedoPos=-1};dhtmlXGridObject.prototype.disableUndoRedo=function(){this._IsUndoRedoEnabled=!1;this._UndoRedoData=[];this._UndoRedoPos=-1};dhtmlXGridObject.prototype._onEditUndoRedo=function(n,t,i,r,u){if(this._IsUndoRedoEnabled&&n==2&&u!=r){this._UndoRedoPos!==-1&&this._UndoRedoPos!=this._UndoRedoData.length-1?this._UndoRedoData=this._UndoRedoData.slice(0,this._UndoRedoPos+1):this._UndoRedoPos===-1&&this._UndoRedoData.length>0&&(this._UndoRedoData=[]);var f={old_value:u,new_value:r,row_id:t,cell_index:i};this._UndoRedoData.push(f);this._UndoRedoPos++}return!0};dhtmlXGridObject.prototype.doUndo=function(){if(this._UndoRedoPos===-1)return!1;var n=this._UndoRedoData[this._UndoRedoPos--],t=this.cells(n.row_id,n.cell_index);this.getColType(n.cell_index)=="tree"?t.setLabel(n.old_value):t.setValue(n.old_value);this.callEvent("onUndo",[n.row_id])};dhtmlXGridObject.prototype.doRedo=function(){if(this._UndoRedoPos==this._UndoRedoData.length-1)return!1;var n=this._UndoRedoData[++this._UndoRedoPos];this.cells(n.row_id,n.cell_index).setValue(n.new_value);this.callEvent("onUndo",[n.row_id])};dhtmlXGridObject.prototype.getRedo=function(){return this._UndoRedoPos==this._UndoRedoData.length-1?[]:this._UndoRedoData.slice(this._UndoRedoPos+1)};dhtmlXGridObject.prototype.getUndo=function(){return this._UndoRedoPos==-1?[]:this._UndoRedoData.slice(0,this._UndoRedoPos+1)};dhtmlXGridObject.prototype.enableAccessKeyMap=function(){this._select_ifpossible=function(){this.editor&&this.editor.obj&&this.editor.obj.select&&this.editor.obj.select()};this._key_events={k13_1_0:function(){this.editStop()},k13_0_1:function(){this._key_events.k9_0_1.call(this)},k13_0_0:function(){this._key_events.k9_0_0.call(this)},k9_0_0:function(){if(this.editStop(),!this.callEvent("onTab",[!0]))return!0;var n=this._getNextCell(null,1);n&&(this.pagingOn&&this.showRow(n.parentNode.idd),this.selectCell(n.parentNode,n._cellIndex,this.row!=n.parentNode,!1,!0),this._still_active=!0);this._select_ifpossible()},k9_0_1:function(){if(this.editStop(),!this.callEvent("onTab",[!1]))return!0;var n=this._getNextCell(null,-1);n&&(this.selectCell(n.parentNode,n._cellIndex,this.row!=n.parentNode,!1,!0),this._still_active=!0);this._select_ifpossible()},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var n=this.cells4(this.cell);if(!n.changeState||n.changeState()===!1)return!1},k27_0_0:function(){this.editStop(!0)},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){if(this.editor)return!1;this.isTreeGrid()?this.collapseKids(this.row):this._key_events.k9_0_1.call(this)},k39_0_0:function(){if(this.editor)return!1;!this.editor&&this.isTreeGrid()?this.expandKids(this.row):this._key_events.k9_0_0.call(this)},k37_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,0,!1,!1,!0);this._select_ifpossible()},k39_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,this._cCount-1,!1,!1,!0);this._select_ifpossible()},k38_1_0:function(){this.selectCell(this.rowsCol[0],this.cell._cellIndex,!0,!1,!0);this._select_ifpossible()},k40_1_0:function(){this.selectCell(this.rowsCol[this.rowsCol.length-1],this.cell._cellIndex,!0,!1,!0);this._select_ifpossible()},k38_0_1:function(){var t=this.getRowIndex(this.row.idd),n=this._nextRow(t,-1);if(!n||n._sRow||n._rLoad)return!1;this.selectCell(n,this.cell._cellIndex,!0,!1,!0);this._select_ifpossible()},k40_0_1:function(){var t=this.getRowIndex(this.row.idd),n=this._nextRow(t,1);if(!n||n._sRow||n._rLoad)return!1;this.selectCell(n,this.cell._cellIndex,!0,!1,!0);this._select_ifpossible()},k38_1_1:function(){for(var t=this.getRowIndex(this.row.idd),n=t;n>=0;n--)this.selectCell(this.rowsCol[n],this.cell._cellIndex,!0,!1,!0)},k40_1_1:function(){for(var t=this.getRowIndex(this.row.idd),n=t+1;n<this.rowsCol.length;n++)this.selectCell(this.rowsCol[n],this.cell._cellIndex,!0,!1,!0)},k40_0_0:function(){var n,t;if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(!this.row.idd)return;if(n=n=this.getRowIndex(this.row.idd)+1,this.rowsBuffer[n])t=this._nextRow(n-1,1),this.pagingOn&&t&&this.showRow(t.idd),this._Opera_stop=0,this.selectCell(t,this.cell._cellIndex,!0,!1,!0);else{if(!this.callEvent("onLastRow",[]))return!1;this._key_events.k34_0_0.apply(this,[])}}this._still_active=!0},k36_0_0:function(){return this._key_events.k37_1_0.call(this)},k35_0_0:function(){return this._key_events.k39_1_0.call(this)},k36_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[0],0,!0,!1,!0);this._select_ifpossible()},k35_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[this.rowsCol.length-1],this._cCount-1,!0,!1,!0);this._select_ifpossible()},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k38_0_0:function(){var n,t;if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(!this.row.idd)return;n=n=this.getRowIndex(this.row.idd)+1;n!=-1?(t=this._nextRow(n-1,-1),this._Opera_stop=0,this.pagingOn&&t&&this.showRow(t.idd),this.selectCell(t,this.cell._cellIndex,!0,!1,!0)):this._key_events.k33_0_0.apply(this,[])}this._still_active=!0}}};dhtmlXGridObject.prototype.enableExcelKeyMap=function(){this._key_events={k13_1_0:function(){this.editStop()},k13_0_1:function(){this.editStop();this._key_events.k38_0_0.call(this)},k13_0_0:function(){this.editStop();this.callEvent("onEnter",[this.row?this.row.idd:null,this.cell?this.cell._cellIndex:null]);this._still_active=!0;this._key_events.k40_0_0.call(this)},k9_0_0:function(){if(this.editStop(),!this.callEvent("onTab",[!0]))return!0;if(!this.cell||!(this.cell._cellIndex+1>=this._cCount)){var n=this._getNextCell(null,1);n&&this.row==n.parentNode&&(this.selectCell(n.parentNode,n._cellIndex,!0),this._still_active=!0)}},k9_0_1:function(){if(this.editStop(),!this.callEvent("onTab",[!1]))return!0;if(!this.cell||this.cell._cellIndex!=0){var n=this._getNextCell(null,-1);n&&this.row==n.parentNode&&(this.selectCell(n.parentNode,n._cellIndex,!0),this._still_active=!0)}},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var n=this.cells4(this.cell);if(!n.changeState||n.changeState()===!1)return!1},k27_0_0:function(){this.editStop(!0);this._still_active=!0},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){if(this.editor)return!1;this.isTreeGrid()?this.collapseKids(this.row):this._key_events.k9_0_1.call(this)},k39_0_0:function(){if(this.editor)return!1;!this.editor&&this.isTreeGrid()?this.expandKids(this.row):this._key_events.k9_0_0.call(this)},k37_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,0,!0)},k39_1_0:function(){if(this.editor)return!1;this.selectCell(this.row,this._cCount-1,!0)},k38_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[0],this.cell._cellIndex,!0)},k40_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[this.rowsCol.length-1],this.cell._cellIndex,!0)},k38_0_1:function(){if(this.editor||!this.rowsCol.length)return!1;var t=this.row.rowIndex,n=this._nextRow(t-1,-1);if(!n||n._sRow||n._rLoad)return!1;this.selectCell(n,this.cell._cellIndex,!0,!0)},k40_0_1:function(){if(this.editor||!this.rowsCol.length)return!1;var t=this.row.rowIndex,n=this._nextRow(t-1,1);if(!n||n._sRow||n._rLoad)return!1;this.selectCell(n,this.cell._cellIndex,!0,!0)},k38_1_1:function(){var t,n;if(this.editor||!this.rowsCol.length)return!1;for(t=this.row.rowIndex,n=t-1;n>=0;n--)this.selectCell(this.rowsCol[n],this.cell._cellIndex,!0,!0)},k40_1_1:function(){var t,n;if(this.editor||!this.rowsCol.length)return!1;for(t=this.row.rowIndex,n=t;n<this.rowsCol.length;n++)this.selectCell(this.rowsCol[n],this.cell._cellIndex,!0,!0)},k40_0_0:function(){var n=this._realfake?this._fake:this,i,t;if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(this.editor)return!1;if(i=Math.max(n._r_select||0,this.getRowIndex(this.row.idd)),t=this._nextRow(i,1),t)n._r_select=null,this.selectCell(t,this.cell._cellIndex,!0),n.pagingOn&&n.showRow(t.idd);else{if(!this.callEvent("onLastRow",[]))return!1;this._key_events.k34_0_0.apply(this,[])}}},k36_0_0:function(){return this._key_events.k37_1_0.call(this)},k35_0_0:function(){return this._key_events.k39_1_0.call(this)},k36_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[0],0,!0)},k35_1_0:function(){if(this.editor||!this.rowsCol.length)return!1;this.selectCell(this.rowsCol[this.rowsCol.length-1],this._cCount-1,!0)},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k38_0_0:function(){var i=this._realfake?this._fake:this,n,t;if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(this.editor)return!1;if(!this.row.idd)return;n=this.getRowIndex(this.row.idd)+1;n==-1||this.pagingOn&&n==1?this._key_events.k33_0_0.apply(this,[]):(t=this._nextRow(n-1,-1),this.selectCell(t,this.cell._cellIndex,!0),i.pagingOn&&t&&i.showRow(t.idd))}},k_other:function(n){var t,i;if(this.editor)return!1;if(!n.ctrlKey&&n.keyCode>=40&&(n.keyCode<91||n.keyCode>95&&n.keyCode<111||n.keyCode>187)&&this.cell){if(t=this.cells4(this.cell),t.isDisabled())return!1;i=t.getValue();t.editable!==!1&&t.setValue("");this.editCell();this.editor?(this.editor.val=i,this.editor.obj&&this.editor.obj.select&&this.editor.obj.select()):t.setValue(i)}}}};eXcell_time.prototype=new eXcell_ed;eXcell_sub_row.prototype=new eXcell;eXcell_sub_row_ajax.prototype=new eXcell_sub_row;eXcell_sub_row_grid.prototype=new eXcell_sub_row;dhtmlXGridObject.prototype._expandMonolite=function(n,t,i){var f=this.parentNode,u=f.parentNode,r=u.grid,s,e,c,h,o;if((n||window.event)&&(i||u._expanded||r.editStop(),(n||event).cancelBubble=!0),s=r.getUserData(u.idd,"__sub_row"),r._sub_row_editor||(r._sub_row_editor=new eXcell_sub_row(f)),s){if(u._expanded&&!t){for(r._sub_row_editor._setState("plus.gif",f),f._previous_content=u._expanded,r.objBox.removeChild(u._expanded),u._expanded=!1,u.style.height=(u.oldHeight||20)+"px",f.style.height=(u.oldHeight||20)+"px",r._fake&&(r._fake.rowsAr[u.idd].style.height=(u.oldHeight||20)+"px",r._fake.rowsAr[u.idd].firstChild.style.height=(u.oldHeight||20)+"px"),o=0;o<u.cells.length;o++)u.cells[o].style.verticalAlign="middle";delete r._flow[u.idd];r._correctMonolite();u._expanded.ctrl=null}else if(!u._expanded&&!i){for(r._sub_row_editor._setState("minus.gif",f),u.oldHeight=f.offsetHeight-4,f._previous_content?(e=f._previous_content,e.ctrl=f,r.objBox.appendChild(e),r._detectHeight(e,f,parseInt(e.style.height))):(e=document.createElement("DIV"),e.ctrl=f,f._sub_row_type?r._sub_row_render[f._sub_row_type](r,e,f,s):e.innerHTML=s,e.style.cssText="position:absolute; left:0px; top:0px; overflow:auto; font-family:Tahoma; font-size:8pt; margin-top:2px; margin-left:4px;",e.className="dhx_sub_row",r.objBox.appendChild(e),r._detectHeight(e,f)),r._flow||(r.attachEvent("onGridReconstructed",function(){this.pagingOn&&!this.parentGrid||this._srnd?this._collapsMonolite():this._correctMonolite()}),r.attachEvent("onResizeEnd",function(){this._correctMonolite(!0)}),r.attachEvent("onAfterCMove",function(){this._correctMonolite(!0)}),r.attachEvent("onDrop",function(){this._correctMonolite(!0)}),r.attachEvent("onBeforePageChanged",function(){return this._collapsMonolite(),!0}),r.attachEvent("onGroupStateChanged",function(){return this._correctMonolite(),!0}),r.attachEvent("onFilterEnd",function(){this._collapsMonolite()}),r.attachEvent("onUnGroup",function(){this._collapsMonolite()}),r.attachEvent("onPageChanged",function(){this._collapsMonolite()}),r.attachEvent("onXLE",function(){this._collapsMonolite()}),r.attachEvent("onClearAll",function(){for(var n in this._flow)this._flow[n]&&this._flow[n].parentNode&&this._flow[n].parentNode.removeChild(this._flow[n]);this._flow=[]}),r.attachEvent("onEditCell",function(n,t,i){return n!==2&&this._flow[t]&&this.cellType[i]!="ch"&&this.cellType[i]!="ra"&&this._expandMonolite.apply(this._flow[t].ctrl.firstChild,[0,!1,!0]),!0}),r.attachEvent("onCellChanged",function(n,t){if(this._flow[n]){var i=this.cells(n,t).cell;i.style.verticalAlign="top"}}),r._flow=[]),r._flow[u.idd]=e,r._correctMonolite(),c=r._srdh>30?11:3,r.multiLine&&(c=0),o=0;o<u.cells.length;o++)u.cells[o].style.verticalAlign="top";if(r._fake)for(h=r._fake.rowsAr[u.idd],o=0;o<h.cells.length;o++)h.cells[o].style.verticalAlign="top";u._expanded=e}r._ahgr&&r.setSizes();r.parentGrid&&r.callEvent("onGridReconstructed",[]);r.callEvent("onSubRowOpen",[u.idd,!!u._expanded])}};dhtmlXGridObject.prototype._sub_row_render={ajax:function(n,t,i,r){t.innerHTML="Loading...";dhx4.ajax.get(r,function(r){var u,f;if(t.innerHTML=r.xmlDoc.responseText,u=r.xmlDoc.responseText.match(/<script[^>]*>([^\f]+?)<\/script>/g),u)for(f=0;f<u.length;f++)eval(u[f].replace(/<([\/]{0,1})s[^>]*>/g,""));n._detectHeight(t,i);n._correctMonolite();n.setUserData(i.parentNode.idd,"__sub_row",r.xmlDoc.responseText);i._sub_row_type=null;n._ahgr&&n.setSizes();n.callEvent("onSubAjaxLoad",[i.parentNode.idd,r.xmlDoc.responseText])})},grid:function(n,t,i,r){i._sub_grid=new dhtmlXGridObject(t);n.skin_name&&i._sub_grid.setSkin(n.skin_name);i._sub_grid.parentGrid=n;i._sub_grid.imgURL=n.imgURL;i._sub_grid.iconURL=n.iconURL;i._sub_grid.enableAutoHeight(!0);i._sub_grid._delta_x=i._sub_grid._delta_y=null;i._sub_grid.attachEvent("onGridReconstructed",function(){n._detectHeight(t,i,i._sub_grid.objBox.scrollHeight+i._sub_grid.hdr.offsetHeight+(this.ftr?this.ftr.offsetHeight:0));n._correctMonolite();this.setSizes();n.parentGrid&&n.callEvent("onGridReconstructed",[])});n.callEvent("onSubGridCreated",[i._sub_grid,i.parentNode.idd,i._cellIndex,r])?i._sub_grid.load(r,function(){(n._detectHeight(t,i,i._sub_grid.objBox.scrollHeight+i._sub_grid.hdr.offsetHeight+(i._sub_grid.ftr?i._sub_grid.ftr.offsetHeight:0)),i._sub_grid.objBox.style.overflow="hidden",n._correctMonolite(),i._sub_row_type=null,n.callEvent("onSubGridLoaded",[i._sub_grid,i.parentNode.idd,i._cellIndex,r]))&&(n._ahgr&&n.setSizes(),n.parentGrid&&n.callEvent("onGridReconstructed",[]))}):(i._sub_grid.objBox.style.overflow="hidden",i._sub_row_type=null)}};dhtmlXGridObject.prototype._detectHeight=function(n,t,i){var f=t.offsetLeft+t.offsetWidth,i,r,u;n.style.left=f+"px";n.style.width=Math.max(0,t.parentNode.offsetWidth-f-4)+"px";i=i||n.scrollHeight;n.style.overflow="hidden";n.style.height=i+"px";r=t.parentNode;t.parentNode.style.height=(r.oldHeight||20)+i*1+"px";t.style.height=(r.oldHeight||20)+i*1+"px";this._fake&&(u=this._fake.rowsAr[t.parentNode.idd],u.style.height=(r.oldHeight||20)+i*1+"px",u.firstChild.style.height=(r.oldHeight||20)+i*1+"px")};dhtmlXGridObject.prototype._correctMonolite=function(n){var t,i;if(!this._in_correction){this._in_correction=!0;for(t in this._flow)if(this._flow[t]&&this._flow[t].tagName=="DIV")if(this.rowsAr[t]){if(this.rowsAr[t].style.display=="none"){this.cells4(this._flow[t].ctrl).close();continue}this._flow[t].style.top=this.rowsAr[t].offsetTop+(this.rowsAr[t].oldHeight||20)+"px";n&&(i=this._flow[t].ctrl.offsetLeft+this._flow[t].ctrl.offsetWidth,this._flow[t].style.left=i+"px",this._flow[t].style.width=this.rowsAr[t].offsetWidth-i-4+"px")}else this._flow[t].ctrl=null,this.objBox.removeChild(this._flow[t]),delete this._flow[t];this._in_correction=!1}};dhtmlXGridObject.prototype._collapsMonolite=function(){for(var n in this._flow)this._flow[n]&&this._flow[n].tagName=="DIV"&&this.rowsAr[n]&&this.cells4(this._flow[n].ctrl).close()};eXcell_ra_str.prototype=new eXcell_ch;eXcell_ra_str.prototype.setValue=function(n){var t,i;if(this.cell.style.verticalAlign="middle",n&&(n=n.toString()._dhx_trim(),(n=="false"||n=="0")&&(n="")),n){if(this.grid.rowsAr[this.cell.parentNode.idd])for(t=0;t<this.grid._cCount;t++)if(t!==this.cell._cellIndex){if(i=this.grid.cells(this.cell.parentNode.idd,t),(i.cell._cellType||this.grid.cellType[i.cell._cellIndex])!="ra_str")continue;i.getValue()&&i.setValue("0")}n="1";this.cell.chstate="1"}else n="0",this.cell.chstate="0";this.setCValue("<img src='"+this.grid.imgURL+"radio_chk"+n+".gif' onclick='new eXcell_ra_str(this.parentNode).changeState()'>",this.cell.chstate)};dhx4.attachEvent("onGridCreated",function(n){window.dhx_globalImgPath||(window.dhx_globalImgPath=n.imgURL);n._col_combos=[];for(var t=0;t<n._cCount;t++)n.cellType[t].indexOf("combo")==0&&(n._col_combos[t]=eXcell_combo.prototype.initCombo.call({grid:n},t));n._loading_handler_set||(n._loading_handler_set=n.attachEvent("onXLE",function(n,t,i,r,u){u=="xml"&&(eXcell_combo.prototype.fillColumnCombos(this,r),this.detachEvent(this._loading_handler_set),this._loading_handler_set=null)}))});eXcell_combo.prototype=new eXcell;eXcell_combo_v=function(n){var t=new eXcell_combo(n);return t._combo_pre="<img src='"+(window.dhx_globalImgPath?window.dhx_globalImgPath:this.grid.imgURL)+"combo_select"+(dhtmlx.skin?"_"+dhtmlx.skin:"")+".gif' class='dhxgrid_combo_icon'/>",t};eXcell_combo.prototype.initCombo=function(n){var r=document.createElement("DIV"),u,t,i;return r.className="dhxcombo_in_grid_parent",u=this.grid.defVal[arguments.length?n:this.cell._cellIndex],t=new dhtmlXCombo(r,"combo",0,u),this.grid.defVal[arguments.length?n:this.cell._cellIndex]="",i=this.grid,t.DOMelem.onmousedown=t.DOMelem.onclick=function(n){n=n||event;n.cancelBubble=!0},t.DOMelem.onselectstart=function(n){return n=n||event,n.cancelBubble=!0,!0},this.grid.attachEvent("onScroll",function(){t._isListVisible()&&t._hideList()}),t.attachEvent("onKeyPressed",function(n){(n==13||n==27)&&(i.editStop(),i._fake&&i._fake.editStop())}),t};eXcell_combo.prototype.fillColumnCombos=function(n,t){var r,i;if(t&&(r=dhx4.ajax.xmltop("rows",t,-1),r&&r.tagName!=="DIV"))for(n.combo_columns=n.combo_columns||[],columns=dhx4.ajax.xpath("//column",r),i=0;i<columns.length;i++)(columns[i].getAttribute("type")||"").indexOf("combo")==0&&(n.combo_columns[n.combo_columns.length]=i,this.setComboOptions(n._col_combos[i],columns[i],n,i))};eXcell_combo.prototype.setComboCValue=function(n,t){if(this._combo_pre!=""){var i=this.cell.offsetHeight?this.cell.offsetHeight+"px":0;n="<div style='width:100%;position:relative;height:100%;overflow:hidden;'>"+this._combo_pre+"<span>"+n+"<\/span><\/div>"}arguments.length>1?this.setCValue(n,t):this.setCValue(n)};eXcell_combo.prototype.setComboOptions=function(n,t,i,r,u){var o,e,s,f,c,h;if(window.dhx4.s2b(t.getAttribute("xmlcontent"))&&!t.getAttribute("source")){for(options=t.childNodes,o=[],e=0;e<options.length;e++)options[e].tagName=="option"&&(s=options[e].firstChild?options[e].firstChild.data:"",o[o.length]=[options[e].getAttribute("value"),s,options[e].getAttribute("css")||""]);n.addOption(o);arguments.length==4?i.forEachRowA(function(t){var u=i.cells(t,r);u.cell._brval||u.cell._cellType||u.cell._cellIndex!=r||(u.cell.combo_value==""?u.setComboCValue("&nbsp;",""):n.getOption(u.cell.combo_value)?u.setComboCValue(n.getOption(u.cell.combo_value).text,u.cell.combo_value):u.setComboCValue(u.cell.combo_value))}):(f=this.cell?this:i.cells(u,r),t.getAttribute("text")?t.getAttribute("text")._dhx_trim()==""?f.setComboCValue("&nbsp;",""):f.setComboCValue(t.getAttribute("text")):f.cell.combo_value&&f.cell.combo_value._dhx_trim()!=""?n.getOption(f.cell.combo_value)?f.setComboCValue(n.getOption(f.cell.combo_value).text,f.cell.combo_value):f.setComboCValue(f.cell.combo_value):f.setComboCValue("&nbsp;",""))}t.getAttribute("source")&&(t.getAttribute("auto")&&window.dhx4.s2b(t.getAttribute("auto"))?(t.getAttribute("xmlcontent")?(f=this.cell?this:i.cells(u,r),t.getAttribute("text")&&f.setComboCValue(t.getAttribute("text"))):i.forEachRowA(function(n){var t=i.cells(n,r),u,f;t.cell._brval||t.cell._cellType||(u=t.cell.combo_value.toString(),u.indexOf("^")!=-1&&(f=u.split("^"),t.cell.combo_value=f[0],t.setComboCValue(f[1])))}),n.enableFilteringMode(!0,t.getAttribute("source"),window.dhx4.s2b(t.getAttribute("cache")||!0),window.dhx4.s2b(t.getAttribute("sub")||!1))):(c=this,h=arguments.length,n.load(t.getAttribute("source"),function(){if(h==4)i.forEachRow(function(t){var u=i.cells(t,r);u.cell._brval||u.cell._cellType||(n.getOption(u.cell.combo_value)?u.setComboCValue(n.getOption(u.cell.combo_value).text,u.cell.combo_value):(u.cell.combo_value||"").toString()._dhx_trim()==""?(u.setComboCValue("&nbsp;",""),u.cell._clearCell=!0):u.setComboCValue(u.cell.combo_value))});else{var t=i.cells(u,r);n.getOption(t.cell.combo_value)?t.setComboCValue(n.getOption(t.cell.combo_value).text,t.cell.combo_value):t.setComboCValue(t.cell.combo_value)}})));t.getAttribute("auto")&&window.dhx4.s2b(t.getAttribute("auto"))||(t.getAttribute("editable")&&!window.dhx4.s2b(t.getAttribute("editable"))&&n.readonly(!0),t.getAttribute("filter")&&window.dhx4.s2b(t.getAttribute("filter"))&&n.enableFilteringMode(!0))};eXcell_combo.prototype.getCellCombo=function(){return this.cell._brval?this.cell._brval:(this.cell._brval=this.initCombo(),this.cell._brval)};eXcell_combo.prototype.refreshCell=function(){this.setValue(this.getValue())};dhtmlXGridObject.prototype.getColumnCombo=function(n){return this._col_combos&&this._col_combos[n]?this._col_combos[n]:(this._col_combos||(this._col_combos=[]),this._col_combos[n]=eXcell_combo.prototype.initCombo.call({grid:this},n),this._col_combos[n])};dhtmlXGridObject.prototype.refreshComboColumn=function(n){this.forEachRow(function(t){this.cells(t,n).refreshCell&&this.cells(t,n).refreshCell()})};eXcell_clist.prototype=new eXcell;eXcell_clist.prototype.setValue=function(n){var t,i;if(typeof n=="object"){for(t=dhx4.ajax.xpath("./option",n),t.length&&(this.cell._combo=[]),i=0;i<t.length;i++)this.cell._combo.push(t[i].firstChild?t[i].firstChild.data:"");n=n.firstChild.data}n===""||n===this.undefined?(this.setCTxtValue(" ",n),this.cell._clearCell=!0):(n=n.replace(/,[ ]*/g,", "),this.setCTxtValue(n),this.cell._clearCell=!1)};dhtmlXGridObject.prototype.registerCList=function(n,t){this.clists||(this.clists=[]);typeof t!="object"&&(t=t.split(","));this.clists[n]=t};eXcell_calck.prototype=new eXcell;eXcell_calck.prototype.setValue=function(n){n&&n.toString()._dhx_trim()!=""||(n="0");this.setCValue(this.grid._aplNF(n,this.cell._cellIndex),n)};dhtmlXGridObject.prototype._updateTGRState=function(n){n.update&&n.id!=0&&(this.rowsAr[n.id].imgTag&&(this.rowsAr[n.id].imgTag.src=this.iconTree+n.state+".gif"),n.update=!1)};dhtmlXGridObject.prototype.doExpand=function(n){this.editStop();var t=n.parentNode.parentNode.parentNode,i=this._h2.get[t.idd];this.callEvent("onOpen",[t.idd,i.state=="plus"?-1:1])&&(i.state=="plus"?this.expandKids(t):i.state!="minus"||i._closeable||this.collapseKids(t))};dhtmlXGridObject.prototype._createHierarchy=function(){return this._emptyLineImg||(this._emptyLineImg="blank"),new dhtmlxHierarchy({_emptyLineImg:this._emptyLineImg})};dhtmlXGridObject.prototype._getOpenLenght=function(n,t){var r=this._h2.get[n].childs,i;for(t+=r.length,i=0;i<r.length;i++)r[i].childs.length&&r[i].state=="minus"&&(t+=this._getOpenLenght(r[i].id,0));return t};dhtmlXGridObject.prototype.collapseKids=function(n){var r=this._h2.get[n.idd],t,u,i;if(r.state=="minus"&&this.callEvent("onOpenStart",[n.idd,1])){if(t=n.rowIndex,t<0&&(t=this.rowsCol._dhx_find(n)+1),this._h2.change(r.id,"state","plus"),this._updateTGRState(r),this._srnd||this.pagingOn)this._h2_to_buff(),this._renderSort();else{for(u=this._getOpenLenght(this.rowsCol[t-1].idd,0),i=0;i<u;i++)this.rowsCol[t+i].parentNode.removeChild(this.rowsCol[t+i]);this.rowsCol.splice(t,u)}this.callEvent("onGridReconstructed",[]);this.setSizes();this._h2_to_buff();this.callEvent("onOpenEnd",[n.idd,-1])}};dhtmlXGridObject.prototype._massInsert=function(n,t,i){var f=[],o=_isKHTML?this.obj:this.obj.rows[0].parentNode,e,r,u;if(this._h2_to_buff(),this._srnd||this.pagingOn)return this._renderSort();for(e=this._getOpenLenght(n.id,0),r=0;r<e;r++)u=this.render_row(i+r),t?t.parentNode.insertBefore(u,t):o.appendChild(u),f.push(u);return this.rowsCol=dhtmlxArray(this.rowsCol.slice(0,i).concat(f).concat(this.rowsCol.slice(i))),n.childs.length+f.length};dhtmlXGridObject.prototype.expandKids=function(n,t){var i=this._h2.get[n.idd],r,u;(i.childs.length||i._xml_await)&&i.state=="plus"&&(i._loading||t||this.callEvent("onOpenStart",[i.id,-1]))&&(r=this.getRowIndex(i.id)+1,i.childs.length?(i._loading=!1,this._h2.change(i.id,"state","minus"),this._updateTGRState(i),u=this._massInsert(i,this.rowsCol[r],r),this.callEvent("onGridReconstructed",[])):i._xml_await&&(i._loading=!0,this.callEvent("onDynXLS",[i.id])&&this.load(this.kidsXmlFile+""+(this.kidsXmlFile.indexOf("?")!=-1?"&":"?")+"id="+encodeURIComponent(i.id),this._data_type)),this.setSizes(),i._loading||this.callEvent("onOpenEnd",[i.id,1]),this._fixAlterCss())};dhtmlXGridObject.prototype.kidsXmlFile="";dhtmlXGridObject.prototype.sortTreeRows=function(n,t,i){var e="getValue",r;this.cells5({parentNode:{grid:this}},this.getColType(n)).getDate&&(e="getDate",t="str");this.forEachRow(function(i){var r=this._h2.get[i],u;r&&(u=this._get_cell_value(r.buff,n,e),t=="int"?(r._sort=parseFloat(u),r._sort=isNaN(r._sort)?-99999999999999:r._sort):r._sort=u)});var o=this,u=1,f=-1;i=="des"&&(u=-1,f=1);r=null;typeof t=="function"?r=function(n,r){return t(n._sort,r._sort,i,n.id,r.id)}:(t=="cus"&&(r=function(t,r){return o._customSorts[n](t._sort,r._sort,i,t.id,r.id)}),t=="str"&&(r=function(n,t){return n._sort<t._sort?f:n._sort==t._sort?0:u}),t=="int"&&(r=function(n,t){return n._sort<t._sort?f:n._sort==t._sort?0:u}),t=="date"&&(r=function(n,t){return(Date.parse(new Date(n._sort||"01/01/1900"))-Date.parse(new Date(t._sort||"01/01/1900")))*u}));this._sortTreeRows(r,0);this._renderSort(0,!0);this.callEvent("onGridReconstructed",[])};dhtmlXGridObject.prototype._sortTreeRows=function(n,t){var r=this._h2.get[t].childs,i;for(this.rowsCol.stablesort?this.rowsCol.stablesort.call(r,n):r.sort(n),i=0;i<r.length;i++)r[i].childs.length&&this._sortTreeRows(n,r[i].id),r[i].index=i};dhtmlXGridObject.prototype._renderSort=function(){this._h2_to_buff();var n=this.objBox.scrollTop;this._reset_view();this.objBox.scrollTop=n};dhtmlXGridObject.prototype._fixAlterCssTGR=function(){this._realfake||this._h2.forEachChild(0,function(n){if(n.buff.tagName=="TR"){var t=(this._cssSP?n.level%2:n.index%2)?this._cssUnEven:this._cssEven;this.rowsAr[n.id].className=t+(this._cssSU?" "+t+"_"+n.level:"")+" "+(this.rowsAr[n.id]._css||"")+(this.rowsAr[n.id].className.indexOf("rowselected")!=-1?" rowselected":"")}},this)};dhtmlXGridObject.prototype.moveRowUDTG=function(n,t){var i=this._h2.get[n],r=i.parent.childs[i.index+t],f;if(r&&r.parent==i.parent){f=[i.state,r.state];this.collapseKids(this.rowsAr[i.id]);this.collapseKids(this.rowsAr[r.id]);var u=this.rowsCol._dhx_find(this.rowsAr[n]),o=this.rowsBuffer._dhx_find(this.rowsAr[n]),s=this.obj.rows[0].parentNode.removeChild(this.rowsCol[u]),e=this.rowsCol[u+(t==1?2:t)];e?e.parentNode.insertBefore(s,e):this.obj.rows[0].parentNode.appendChild(s);this.rowsCol._dhx_swapItems(u,u+t);this.rowsBuffer._dhx_swapItems(o,o+t);this._h2.swap(r,i);f[0]=="minus"&&this.expandKids(this.rowsAr[i.id]);f[1]=="minus"&&this.expandKids(this.rowsAr[r.id]);this._fixAlterCss(Math.min(u,u+t))}};eXcell_tree.prototype=new eXcell;eXcell_tree.prototype.setValueA=function(n){this.cell.parentNode.valTag.innerHTML=n;this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,n])};eXcell_tree.prototype.setValue=function(n){var t,r,u;if(this.cell.parentNode.imgTag)return this.setLabel(n);(this.grid._tgc.iconTree==null||this.grid._tgc.iconTree!=this.grid.iconTree)&&(t={},t.spacer="<img src='"+this.grid.iconTree+"blank.gif'  align='top' class='space'>",t.imst="<img class='grid_collapse_icon' src='"+this.grid.iconTree,t.imsti="<img style='padding-top:2px;'  src='"+(this.grid.iconURL||this.grid.iconTree),t.imact="' align='top' onclick='this."+(_isKHTML?"":"parentNode.")+"parentNode.parentNode.parentNode.parentNode.grid.doExpand(this);event.cancelBubble=true;'>",t.plus=t.imst+"plus.gif"+t.imact,t.minus=t.imst+"minus.gif"+t.imact,t.blank=t.imst+"blank.gif"+t.imact,t.start="<div class='treegrid_cell' style='overflow:hidden; white-space : nowrap; line-height:23px; height:"+(_isIE?21:23)+"px;'>",t.itemim="' align='top' "+(this.grid._img_height?' height="'+this.grid._img_height+'"':"")+(this.grid._img_width?' width="'+this.grid._img_width+'"':"")+" >",t.itemne="<span id='nodeval'>",t.close="<\/span><\/div>",this.grid._tgc=t);var e=this.grid._h2,t=this.grid._tgc,f=this.cell.parentNode.idd,i=this.grid._h2.get[f];for((this.grid.kidsXmlFile||this.grid._slowParse)&&(i.has_kids=i.has_kids||this.cell.parentNode._attrs.xmlkids&&i.state!="minus",i._xml_await=!!i.has_kids),i.image=i.image||this.cell._attrs.image||"leaf.gif",i.icon=i.icon||this.cell._attrs.icon||(this.grid.iconset?"file-o":""),i.label=n,r=[t.start],u=0;u<i.level;u++)r.push(t.spacer);i.has_kids?(r.push(t.plus),i.state="plus"):r.push(t.imst+i.state+".gif"+t.imact);i.icon?r.push("<i class='dhx_treegrid_icon fa fa-"+i.icon+"'><\/i>"):(r.push(t.imsti),r.push(i.image),r.push(t.itemim));r.push(t.itemne);r.push(i.label);r.push(t.close);this.cell.innerHTML=r.join("");this.cell._treeCell=!0;this.cell.parentNode.imgTag=this.cell.childNodes[0].childNodes[i.level];this.cell.parentNode.valTag=this.cell.childNodes[0].childNodes[i.level+2];_isKHTML&&(this.cell.vAlign="top");i.parent.id!=0&&i.parent.state=="plus"&&(this.grid._updateTGRState(i.parent,!1),this.cell.parentNode._skipInsert=!0);this.grid.callEvent("onCellChanged",[f,this.cell._cellIndex,n])};dhtmlXGridObject.prototype._process_tree_xml=function(n,t){var o,u,r,e,i,f;for(this._parsing=!0,o=!1,t||(this.render_row=this.render_row_tree,o=!0,t=n.getAttribute("parent")||0,t=="0"&&(t=0),this._h2||(this._h2=this._createHierarchy()),this._fake&&(this._fake._h2=this._h2)),u=dhx4.ajax.xpath(this.xml.row,n),this._open=this._open||[],i=0;i<u.length;i++)r=u[i].getAttribute("id"),r||(r=this.uid(),u[i].setAttribute("id",r)),e=this._h2.add(r,t),e.buff={idd:r,data:u[i],_parser:this._process_xml_row,_locator:this._get_xml_data},u[i].getAttribute("open")&&(e.state="minus",this._open.push(r)),this.rowsAr[r]=e.buff,this._process_tree_xml(u[i],r);if(o){for(u.length?t==0||this._srnd||this._h2.change(t,"state","minus"):this._h2.change(t,"state",this._emptyLineImg),i=0;i<this._open.length;i++)f=this._h2.get[this._open[i]],f.childs.length||(f.state=this._emptyLineImg);if(this._updateTGRState(this._h2.get[t]),this._h2_to_buff(),t!=0&&this._srnd?this.openItem(t):this.pagingOn?this._renderSort():this.render_dataset(),this.kidsXmlFile)for(i=0;i<this._open.length;i++)f=this._h2.get[this._open[i]],f._xml_await&&this.expandKids({idd:f.id});this._open=[];this._slowParse===!1&&this.forEachRow(function(n){this.render_row_tree(0,n)});this._parsing=!1;t==0||this._srnd||this.callEvent("onOpenEnd",[t,1])}};dhtmlXGridObject.prototype._h2_to_buff=function(n){n||(n=this._h2.get[0],this.rowsBuffer=new dhtmlxArray,this._fake&&!this._realfake&&(this._fake.rowsBuffer=this.rowsBuffer));for(var t=0;t<n.childs.length;t++)this.rowsBuffer.push(n.childs[t].buff),n.childs[t].state=="minus"&&this._h2_to_buff(n.childs[t])};dhtmlXGridObject.prototype.render_row_tree=function(n,t){var i,r;return(t?(i=this._h2.get[t],i=i?i.buff:i):i=this.rowsBuffer[n],!i)?-1:i._parser?this.rowsAr[i.idd]&&this.rowsAr[i.idd].tagName=="TR"?this._h2.get[i.idd].buff=this.rowsBuffer[n]=this.rowsAr[i.idd]:(r=this._prepareRow(i.idd),this.rowsAr[i.idd]=r,t||(this.rowsBuffer[n]=r),this._h2.get[i.idd].buff=r,i._parser.call(this,r,i.data),this._postRowProcessing(r),r):i};dhtmlXGridObject.prototype._removeTrGrRow=function(n,t){var i,t,u,r;if(t){this._h2.forEachChild(t.id,function(n){this._removeTrGrRow(null,n);delete this.rowsAr[n.id]},this);return}if(i=this.getRowIndex(n.idd),t=this._h2.get[n.idd],i!=-1&&i!==this.undefined){for(u=1,t&&t.state=="minus"&&(u+=this._getOpenLenght(t.id,0)),r=0;r<u;r++)this.rowsCol[r+i]&&this.rowsCol[r+i].parentNode.removeChild(this.rowsCol[r+i]);if(this._fake){for(r=0;r<u;r++)this._fake.rowsCol[r+i]&&this._fake.rowsCol[r+i].parentNode.removeChild(this._fake.rowsCol[r+i]);u>1&&this._fake.rowsCol.splice(i+1,u-1)}this.rowsCol.splice(i,u);this.rowsBuffer.splice(i,u)}t&&(this._removeTrGrRow(null,t),delete this.rowsAr[t.id],t.parent.childs.length==1&&(this._h2.change(t.parent.id,"state",this._emptyLineImg),this._updateTGRState(t.parent)),this._h2.remove(t.id))};dhtmlXGridObject.prototype.openItem=function(n){var t=this._h2.get[n||0],i=this.getRowById(n||0);i&&(t.parent&&t.parent.id!=0&&this.openItem(t.parent.id),this.expandKids(i))};dhtmlXGridObject.prototype._addRowClassic=dhtmlXGridObject.prototype.addRow;dhtmlXGridObject.prototype.addRow=function(n,t,i,r,u,f){var o,e;return this._h2?(r=r||0,o=this.cellType._dhx_find("tree"),typeof t=="string"&&(t=t.split(this.delim)),e=this._h2.get[n],e||(r==0?i=this.rowsBuffer.length:(i=this.getRowIndex(r)+1,this._h2.get[r].state=="minus"?i+=this._getOpenLenght(r,0):this._skipInsert=!0)),e=e||this._h2.add(n,r),e.image=u,e.has_kids=f,e.buff=this._addRowClassic(n,t,i)):this._addRowClassic(n,t,i)};dhtmlXGridObject.prototype.addRowBefore=function(n,t,i,r,u){var o=this.rowsAr[i],e,f;if(o)return this._h2?(e=this._h2.get[i].parent.id,f=this.getRowIndex(i),f==-1&&(this._skipInsert=!0),this._h2.addBefore(n,e,i),this.addRow(n,t,f,this._h2.get[i].parent.id,r,u)):this.addRow(n,t,this.getRowIndex(i))};dhtmlXGridObject.prototype.addRowAfter=function(n,t,i,r,u){var o=this.rowsAr[i],e,f;if(o)return this._h2?(e=this._h2.get[i].parent.id,f=this.getRowIndex(i),f==-1&&(this._skipInsert=!0),this._h2.get[i].state=="minus"?f+=this._getOpenLenght(i,0)+1:f++,this._h2.addAfter(n,e,i),this.addRow(n,t,f,e,r,u)):this.addRow(n,t,this.getRowIndex(i)+1)};dhtmlXGridObject.prototype.enableSmartXMLParsing=function(n){this._slowParse=dhx4.s2b(n)};dhtmlXGridObject.prototype._copyTreeGridRowContent=function(n,t,r){var u=this.cellType._dhx_find("tree");for(i=0;i<n.cells.length;i++)i!=u?this.cells(r,i).setValue(this.cells(t,i).getValue()):this.cells(r,i).setValueA(this.cells(t,i).getValue())};dhtmlXGridObject.prototype.closeItem=function(n){var t=this.getRowById(n);t&&this.collapseKids(t)};dhtmlXGridObject.prototype.deleteChildItems=function(n){var t=this._h2.get[n];if(t)while(t.childs.length)this.deleteRow(t.childs[0].id)};dhtmlXGridObject.prototype.getAllSubItems=function(n){var r=[],i=this._h2.get[n||0],t;if(i)for(t=0;t<i.childs.length;t++)r.push(i.childs[t].id),i.childs[t].childs.length&&(r=r.concat(this.getAllSubItems(i.childs[t].id).split(this.delim)));return r.join(this.delim)};dhtmlXGridObject.prototype.getChildItemIdByIndex=function(n,t){var i=this._h2.get[n||0];return i?i.childs[t]?i.childs[t].id:null:null};dhtmlXGridObject.prototype.getItemText=function(n){return this.cells(n,this.cellType._dhx_find("tree")).getLabel()};dhtmlXGridObject.prototype.getOpenState=function(n){var t=this._h2.get[n||0];if(t)return t.state=="minus"?!0:!1};dhtmlXGridObject.prototype.getParentId=function(n){var t=this._h2.get[n||0];return!t||!t.parent?null:t.parent.id};dhtmlXGridObject.prototype.getSubItems=function(n){var r=[],i=this._h2.get[n||0],t;if(i)for(t=0;t<i.childs.length;t++)r.push(i.childs[t].id);return r.join(this.delim)};dhtmlXGridObject.prototype.expandAll=function(n){this._renderAllExpand(n||0);this._h2_to_buff();this._reset_view();this.setSizes();this.callEvent("onGridReconstructed",[]);this._redrawLines&&this._redrawLines()};dhtmlXGridObject.prototype._renderAllExpand=function(n){for(var i=this._h2.get[n].childs,t=0;t<i.length;t++)i[t].childs.length&&(this._h2.change(i[t].id,"state","minus"),this._updateTGRState(i[t]),this._renderAllExpand(i[t].id))};dhtmlXGridObject.prototype.collapseAll=function(n){this._h2.forEachChild(n||0,function(n){n&&n.state=="minus"&&(n.state="plus",n.update=!0,this._updateTGRState(n))},this);this._h2_to_buff();this._reset_view();this.setSizes();this.callEvent("onGridReconstructed",[]);this._redrawLines&&this._redrawLines()};dhtmlXGridObject.prototype.hasChildren=function(n){var t=this._h2.get[n];return t&&t.childs.length?t.childs.length:t._xml_await?-1:0};dhtmlXGridObject.prototype.setItemCloseable=function(n,t){var i=this._h2.get[n];i&&(i._closeable=!dhx4.s2b(t))};dhtmlXGridObject.prototype.setItemText=function(n,t){return this.cells(n,this.cellType._dhx_find("tree")).setLabel(t)};dhtmlXGridObject.prototype.setItemImage=function(n,t){this._h2.get[n].image=t;this.rowsAr[n].imgTag.nextSibling.src=(this.iconURL||"")+t};dhtmlXGridObject.prototype.setItemIcon=function(n,t){this._h2.get[n].icon=t;this.rowsAr[n].imgTag.nextSibling.className="dhx_treegrid_icon fa fa-"+t};dhtmlXGridObject.prototype.getItemImage=function(n){return this.getRowById(n),this._h2.get[n].image};dhtmlXGridObject.prototype.getItemIcon=function(n){return this.getRowById(n),this._h2.get[n].icon};dhtmlXGridObject.prototype.setImageSize=function(n,t){this._img_width=n;this._img_height=t};dhtmlXGridObject.prototype._getRowImage=function(n){return this._h2.get[n.idd].image};dhtmlXGridObject.prototype.setOnOpenStartHandler=function(n){this.attachEvent("onOpenStart",n)};dhtmlXGridObject.prototype.setOnOpenEndHandler=function(n){this.attachEvent("onOpenEnd",n)};dhtmlXGridObject.prototype.enableTreeCellEdit=function(n){this._edtc=!dhx4.s2b(n)};dhtmlXGridObject.prototype.getLevel=function(n){var t=this._h2.get[n||0];return t?t.level:-1};dhtmlXGridObject.prototype._fixHiddenRowsAllTG=function(n,t){for(i in this.rowsAr)this.rowsAr[i]&&this.rowsAr[i].childNodes&&(this.rowsAr[i].childNodes[n].style.display=t)};dhtmlXGridObject.prototype._updateLine=function(n,t){var i,r;if((t=t||this.rowsAr[n.id],t)&&(i=t.imgTag,i)){if(n.state=="blank")return i.src=this.iconTree+"blank.gif";r=1;r=n.index==0?n.level==0?n.parent.childs.length-1>n.index?3:1:n.parent.childs.length-1>n.index?3:2:n.parent.childs.length-1>n.index?3:2;i.src=this.iconTree+n.state+r+".gif"}};dhtmlXGridObject.prototype._updateParentLine=function(n,t){var i,r;if((t=t||this.rowsAr[n.id],t)&&(i=t.imgTag,i))for(r=n.level;r>0;r--){if(n.id==0)break;i=i.previousSibling;n=n.parent;i.src=n.parent.childs.length-1>n.index?this.iconTree+"line1.gif":this.iconTree+"blank.gif"}};dhtmlXGridObject.prototype._renderSortA=dhtmlXGridObject.prototype._renderSort;dhtmlXGridObject.prototype._renderSort=function(){this._renderSortA.apply(this,arguments);this._redrawLines(0)};dhtmlXGridObject.prototype._redrawLines=function(n){this._tgle&&this._h2.forEachChild(n||0,function(n){this._updateLine(n);this._updateParentLine(n)},this)};dhtmlXGridObject.prototype.enableTreeGridLines=function(){this._emptyLineImg="line";this._updateTGRState=function(n,t){!t&&n.update&&n.id!=0&&(this._tgle&&this._updateLine(n,this.rowsAr[n.id]),n.update=!1)};this._tgle=!0;this.attachEvent("onXLE",function(n,t,i){this._redrawLines(i)});this.attachEvent("onOpenEnd",function(n){this._redrawLines(n)});this.attachEvent("onRowAdded",function(n){var t=this._h2.get[n];this._updateLine(t);this._updateParentLine(t);t.index<t.parent.childs.length-1?(t=t.parent.childs[t.index+1],this._updateLine(t),this._updateParentLine(t)):t.index!=0&&(t=t.parent.childs[t.index-1],this._updateLine(t),this._updateParentLine(t),t.childs.length&&this._h2.forEachChild(t.id,function(n){this._updateParentLine(n)},this))});this.attachEvent("onOpen",function(n,t){var r,i;if(t)for(r=this._h2.get[n],i=0;i<r.childs.length;i++)this._updateParentLine(r.childs[i]);return!0});this.attachEvent("onBeforeRowDeleted",function(n){var i=this,t=this._h2.get[n],r=null;return t.index!=0&&(r=t.parent.childs[t.index-1]),t=t.parent,window.setTimeout(function(){(t=i._h2.get[t.id],t)&&(i._updateLine(t),i._updateParentLine(t),r&&(i._updateLine(r),r.state=="minus"&&i._h2.forEachChild(r.id,function(n){i._updateParentLine(n)},i)))},1),!0})};dhtmlXGridObject.prototype.setFiltrationLevel=function(n,t,i){this._tr_strfltr=n;this._tr_fltr_c=t;this._tr_fltr_d=i;this.refreshFilters()};dhtmlXGridObject.prototype.filterTreeBy=function(n,t,i){var u=this._h2,f,r;if(typeof this._tr_strfltr=="undefined"&&(this._tr_strfltr=-1),this._f_rowsBuffer?i||(this._h2=this._f_rowsBuffer,this._fake&&(this._fake._h2=this._h2)):this._f_rowsBuffer=this._h2,f=!0,this.dma(!0),this._fbf={},typeof n=="object")for(r=0;r<t.length;r++)this._filterTreeA(n[r],t[r]);else this._filterTreeA(n,t);this._fbf=null;this.dma(!1);this._fix_filtered_images(this._h2,u);this._renderSort();this.callEvent("onGridReconstructed",[])};dhtmlXGridObject.prototype._filterTreeA=function(n,t){var f;if(t!=""){f=!0;typeof t=="function"?f=!1:t=(t||"").toString().toLowerCase();var r=function(n,t,u){var f=u.get[n.parent.id],u;return f||(f=r(n.parent,t,u)),u=i.get[n.id],u||(u={id:n.id,childs:[],level:n.level,parent:f,index:f.childs.length,image:n.image,state:n.state,buff:n.buff,has_kids:n.has_kids,_xml_await:n._xml_await},f.childs.push(u),i.get[u.id]=u),u},o=this._fbf,i=this._createHierarchy(),u,e=this._tr_strfltr,h=this,s=function(n){for(var t=0;t<n.childs.length;t++)h.temp(n.childs[t])};switch(e.toString()){case"-2":u=function(n){return o[n.id]?!1:(s(n),!0)};break;case"-1":u=function(n){return!n.childs.length};break;default:u=function(n){return e==n.level}}this.temp=function(h){if(h.id!=0&&u(h))return(f?this._get_cell_value(h.buff,n).toString().toLowerCase().indexOf(t)!=-1:t(this._get_cell_value(h.buff,n),h.id))?(r(h,this._h2,i),h.childs&&e!=-2&&this._h2.forEachChild(h.id,function(n){r(n,this._h2,i)},this),!0):(o[h.id]=!0,this._tr_fltr_c&&r(h.parent,this._h2,i),!1);this._tr_fltr_d&&this._tr_strfltr>h.level&&h.id!=0&&r(h,this._h2,i);s(h)};this.temp(this._h2.get[0]);this._h2=i;this._fake&&(this._fake._h2=this._h2)}};dhtmlXGridObject.prototype._fix_filtered_images=function(n,t){n.forEachChild(0,function(n){if(n.childs.length||n.has_kids){if(n.buff.tagName=="TR"){var i=t.get[n.id];i&&i.state!=this._emptyLineImg&&(n.state=i.state);n.update=!0;this._updateTGRState(n)}}else n.state!=this._emptyLineImg&&(n.state=this._emptyLineImg,n.update=!0,this._updateTGRState(n))},this)};dhtmlXGridObject.prototype.collectTreeValues=function(n){var r,t;typeof this._tr_strfltr=="undefined"&&(this._tr_strfltr=-1);this.dma(!0);this._build_m_order();n=this._m_order?this._m_order[n]:n;var i={},u=[],f=this._f_rowsBuffer||this._h2;f.forEachChild(0,function(t){if(this._tr_strfltr==-2||this._tr_strfltr==-1&&!t.childs.length||this._tr_strfltr==t.level){var r=this._get_cell_value(t.buff,n);r&&(i[r]=!0)}},this);this.dma(!1);r=this.combos[n];for(t in i)i[t]===!0&&u.push(r?r.get(t)||t:t);return u.sort()};dhtmlXGridObject.prototype._in_header_stat_tree_total=function(n,t,i){var r=function(){var n=0,i;return this._build_m_order(),i=this._m_order?this._m_order[t]:t,this._h2.forEachChild(0,function(t){var r=parseFloat(this._get_cell_value(t.buff||this.rowsAr[t.id],i));n+=isNaN(r)?0:r},this),this._maskArr[t]?this._aplNF(n,t):Math.round(n*100)/100};this._stat_in_header(n,r,t,i,i)};dhtmlXGridObject.prototype._in_header_stat_tree_total_leaf=function(n,t,i){var r=function(){var n=0,i;return this._build_m_order(),i=this._m_order?this._m_order[t]:t,this._h2.forEachChild(0,function(t){if(!t.childs.length){var r=parseFloat(this._get_cell_value(t.buff||this.rowsAr[t.id],i));n+=isNaN(r)?0:r}},this),this._maskArr[t]?this._aplNF(n,t):Math.round(n*100)/100};this._stat_in_header(n,r,t,i,i)};dhtmlXGridObject.prototype._in_header_stat_tree_multi_total=function(n,t,i){var r=i[1].split(":"),u;i[1]="";u=function(){var n=0;return this._h2.forEachChild(0,function(t){var i=parseFloat(this._get_cell_value(t.buff||this.rowsAr[t.id],r[0]))*parseFloat(this._get_cell_value(t.buff||this.rowsAr[t.id],r[1]));n+=isNaN(i)?0:i},this),this._maskArr[t]?this._aplNF(n,t):Math.round(n*100)/100};this._stat_in_header(n,u,t,i,i)};dhtmlXGridObject.prototype._in_header_stat_tree_multi_total_leaf=function(n,t,i){var r=i[1].split(":"),u;i[1]="";u=function(){var n=0;return this._h2.forEachChild(0,function(t){if(!t.childs.length){var i=parseFloat(this._get_cell_value(t.buff||this.rowsAr[t.id],r[0]))*parseFloat(this._get_cell_value(t.buff||this.rowsAr[t.id],r[1]));n+=isNaN(i)?0:i}},this),this._maskArr[t]?this._aplNF(n,t):Math.round(n*100)/100};this._stat_in_header(n,u,t,i,i)};dhtmlXGridObject.prototype._in_header_stat_tree_max=function(n,t,i){var r=function(){var n=-999999999,i;return(this._build_m_order(),i=this._m_order?this._m_order[t]:t,this.getRowsNum()==0)?"":(this._h2.forEachChild(0,function(t){var r=parseFloat(this._get_cell_value(t.buff||this.rowsAr[t.id],i));isNaN(r)||(n=Math.max(n,r))},this),this._maskArr[t]?this._aplNF(n,t):n)};this._stat_in_header(n,r,t,i)};dhtmlXGridObject.prototype._in_header_stat_tree_min=function(n,t,i){var r=function(){var n=999999999,i;return(this._build_m_order(),i=this._m_order?this._m_order[t]:t,this.getRowsNum()==0)?"":(this._h2.forEachChild(0,function(t){var r=parseFloat(this._get_cell_value(t.buff||this.rowsAr[t.id],i));isNaN(r)||(n=Math.min(n,r))},this),this._maskArr[t]?this._aplNF(n,t):n)};this._stat_in_header(n,r,t,i)};dhtmlXGridObject.prototype._in_header_stat_tree_average=function(n,t,i){var r=function(){var n=0,i=0,r;return this._build_m_order(),r=this._m_order?this._m_order[t]:t,this._h2.forEachChild(0,function(t){var u=parseFloat(this._get_cell_value(t.buff||this.rowsAr[t.id],r));n+=isNaN(u)?0:u;i++},this),this._maskArr[t]?this._aplNF(n,t):Math.round(n/i*100)/100};this._stat_in_header(n,r,t,i)};dhtmlXGridObject.prototype._in_header_stat_tree_max_leaf=function(n,t,i){var r=function(){var n=-999999999,i;return(this._build_m_order(),i=this._m_order?this._m_order[t]:t,this.getRowsNum()==0)?"":(this._h2.forEachChild(0,function(t){if(!t.childs.length){var r=parseFloat(this._get_cell_value(t.buff||this.rowsAr[t.id],i));isNaN(r)||(n=Math.max(n,r))}},this),this._maskArr[t]?this._aplNF(n,t):n)};this._stat_in_header(n,r,t,i)};dhtmlXGridObject.prototype._in_header_stat_tree_min_leaf=function(n,t,i){var r=function(){var n=999999999,i;return(this._build_m_order(),i=this._m_order?this._m_order[t]:t,this.getRowsNum()==0)?"":(this._h2.forEachChild(0,function(t){if(!t.childs.length){var r=parseFloat(this._get_cell_value(t.buff||this.rowsAr[t.id],i));isNaN(r)||(n=Math.min(n,r))}},this),this._maskArr[t]?this._aplNF(n,t):n)};this._stat_in_header(n,r,t,i)};dhtmlXGridObject.prototype._in_header_stat_tree_average_leaf=function(n,t,i){var r=function(){var n=0,i=0,r;return this._build_m_order(),r=this._m_order?this._m_order[t]:t,this._h2.forEachChild(0,function(t){if(!t.childs.length){var u=parseFloat(this._get_cell_value(t.buff||this.rowsAr[t.id],r));n+=isNaN(u)?0:u;i++}},this),this._maskArr[t]?this._aplNF(n,t):Math.round(n/i*100)/100};this._stat_in_header(n,r,t,i)};dhtmlXGridObject.prototype._in_header_stat_tree_count=function(n,t,i){var r=function(){var n=0;return this._h2.forEachChild(0,function(){n++},this),n};this._stat_in_header(n,r,t,i)};dhtmlXGridObject.prototype._in_header_stat_tree_count_leaf=function(n,t,i){var r=function(){var n=0;return this._h2.forEachChild(0,function(t){t.childs.length||n++},this),n};this._stat_in_header(n,r,t,i)};dhtmlXGridObject.prototype._stat_in_header=function(n,t,i,r){var f=this,u=function(){this.dma(!0);n.innerHTML=(r[0]?r[0]:"")+t.call(this)+(r[1]?r[1]:"");this.dma(!1);this.callEvent("onStatReady",[])};this._stat_events||(this._stat_events=[],this.attachEvent("onClearAll",function(){var n,t;if(!this.hdr.rows[1]){for(n=0;n<this._stat_events.length;n++)for(t=0;t<4;t++)this.detachEvent(this._stat_events[n][t]);this._stat_events=[]}}));this._stat_events.push([this.attachEvent("onGridReconstructed",u),this.attachEvent("onXLE",u),this.attachEvent("onFilterEnd",u),this.attachEvent("onEditCell",function(n,t,r){return n==2&&r==i&&u.call(this),!0})]);n.innerHTML=""};dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var n=0;n<this._c_order.length;n++)this._m_order[this._c_order[n]]=n}};dhtmlXForm.prototype.getInput=function(n){return this.doWithItem(n,"getInput")};dhtmlXForm.prototype.getSelect=function(n){return this.doWithItem(n,"getSelect")};dhtmlXForm.prototype.items={};dhtmlXForm.prototype.items.checkbox={getInput:function(n){return n.getElementsByTagName("INPUT")[0]},render:function(n,t){n._type="ch";n._enabled=!0;n._checked=!1;n._value=typeof t.value=="undefined"?null:String(t.value);n._ro=t.readonly==!0;t._autoInputWidth!==!1&&(t.inputWidth=14);this.doAddLabel(n,t);this.doAddInput(n,t,"INPUT","TEXT",!0,!0,"dhxform_textarea");n.childNodes[n._ll?1:0].className+=" dhxform_img_node";var i=document.createElement("DIV");return i.className="dhxform_img chbx0",n.appendChild(i),isNaN(t.inputLeft)||(n.childNodes[n._ll?1:0].style.left=parseInt(t.inputLeft)+"px"),isNaN(t.inputTop)||(n.childNodes[n._ll?1:0].style.top=parseInt(t.inputTop)+"px"),n.childNodes[n._ll?1:0].appendChild(i),n.childNodes[n._ll?1:0].firstChild.value=String(t.value),n._updateImgNode=function(n,t){var i=n.childNodes[n._ll?1:0].lastChild;i.className=(t?"dhxform_actv_c":"dhxform_img")+" "+(n._checked?"chbx1":"chbx0");n=i=null},n._doOnFocus=function(n){n.getForm().callEvent("onFocus",[n._idd])},n._doOnBlur=function(n){n.getForm().callEvent("onBlur",[n._idd])},n._doOnKeyUpDown=function(n,t){this.callEvent(n,[this.childNodes[this._ll?0:1].childNodes[0],t,this._idd])},t.checked==!0&&this.check(n),t.hidden==!0&&this.hide(n),t.disabled==!0&&this.userDisable(n),this.doAttachEvents(n),this},destruct:function(n){n._doOnFocus=n._doOnBlur=n._updateImgNode=null;this.doUnloadNestedLists(n);this.doDestruct(n)},doAddLabel:function(n,t){var i=document.createElement("DIV");i.className="dhxform_label "+t.labelAlign;t.wrap==!0&&(i.style.whiteSpace="normal");n._ll?n.insertBefore(i,n.firstChild):n.appendChild(i);typeof t.tooltip!="undefined"&&(i.title=t.tooltip);i.innerHTML="<div class='dhxform_label_nav_link' onfocus='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,true);this.parentNode.parentNode._doOnFocus(this.parentNode.parentNode);' onblur='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,false);this.parentNode.parentNode._doOnBlur(this.parentNode.parentNode);' onkeypress='var e=event||window.arguments[0];if(e.keyCode==32||e.charCode==32){e.cancelBubble=true;if(e.preventDefault)e.preventDefault();else e.returnValue=false;_dhxForm_doClick(this,\"mousedown\");return false;}' onkeyup='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyUp\",e);' onkeydown='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyDown\",e);' "+(window.dhx4.isIPad?"ontouchstart='var e=event;e.preventDefault();_dhxForm_doClick(this,\"mousedown\");' ":"")+"role='link' tabindex='0'>"+t.label+(t.info?"<span class='dhxform_info'>[?]<\/span>":"")+(n._required?"<span class='dhxform_item_required'>*<\/span>":"")+"<\/div>";isNaN(t.labelWidth)||(i.firstChild.style.width=parseInt(t.labelWidth)+"px");isNaN(t.labelHeight)||(i.firstChild.style.height=parseInt(t.labelHeight)+"px");isNaN(t.labelLeft)||(i.style.left=parseInt(t.labelLeft)+"px");isNaN(t.labelTop)||(i.style.top=parseInt(t.labelTop)+"px")},doAddInput:function(n,t,i,r,u,f,e){var s=document.createElement("DIV"),o,c,l,a,h;s.className="dhxform_control";n._ll?n.appendChild(s):n.insertBefore(s,n.firstChild);o=document.createElement(i);o.className=e;o.name=n._idd;o._idd=n._idd;o.id=t.uid;typeof r=="string"&&(o.type=r);(i=="INPUT"||i=="TEXTAREA")&&(o.onkeyup=function(t){t=t||event;n.callEvent("onKeyUp",[this,t,this._idd])},o.onkeydown=function(t){t=t||event;n.callEvent("onKeyDown",[this,t,this._idd])});i=="SELECT"&&t.type=="select"&&n.getForm().skin=="material"&&(window.dhx4.isOpera||window.dhx4.isChrome?o.className+=" dhxform_arrow_fix_webkit":window.dhx4.isEdge?o.className+=" dhxform_arrow_fix_edge":window.dhx4.isFF&&(o.className+=" dhxform_fix_ff"));s.appendChild(o);u&&(isNaN(t.inputLeft)||(s.style.left=parseInt(t.inputLeft)+"px"),isNaN(t.inputTop)||(s.style.top=parseInt(t.inputTop)+"px"));c="";l=!1;f&&(isNaN(t.inputWidth)||(c+="width:"+parseInt(t.inputWidth)+"px;",l=!0),isNaN(t.inputHeight)||(c+="height:"+parseInt(t.inputHeight)+"px;"));typeof t.style=="string"&&(c+=t.style);o.style.cssText=c;t.maxLength&&o.setAttribute("maxLength",t.maxLength);t.connector&&o.setAttribute("connector",t.connector);a=dhtmlXForm.prototype.items[this.t]!=null?dhtmlXForm.prototype.items[this.t]._dimFix==!0:!1;l&&({input:1,password:1,select:1,multiselect:1,calendar:1,colorpicker:1}[this.t]==1||a)&&(dhtmlXForm.prototype.items[this.t]._dim==null&&(dhtmlXForm.prototype.items[this.t]._dim=n.getForm()._checkDim(s,o)),o.style.width=parseInt(o.style.width)-dhtmlXForm.prototype.items[this.t]._dim+"px");typeof t.note=="object"&&(h=document.createElement("DIV"),h.className="dhxform_note",h.style.width=(isNaN(t.note.width)?o.offsetWidth:parseInt(t.note.width))+"px",h._w=t.note.width,h.innerHTML=t.note.text,s.appendChild(h),h=null);t.readonly&&this.setReadonly(n,!0);t.disabled==!0&&this.userDisable(n);t.hidden==!0&&this.t!="combo"&&this.hide(n)},doUnloadNestedLists:function(n){if(n._list){for(var t=0;t<n._list.length;t++)n._list[t].unload(),n._list[t]=null,n._listObj[t]=null,n._listBase[t].parentNode.removeChild(n._listBase[t]),n._listBase[t]=null;n._list=null;n._listObj=null;n._listBase=null}},doDestruct:function(n){for(n.callEvent=null,n.checkEvent=null,n.getForm=null,n._autoCheck=null,n._checked=null,n._enabled=null,n._idd=null,n._type=null,n._value=null,n._group=null,n.onselectstart=null,n.childNodes[n._ll?1:0].onmousedown=null,n.childNodes[n._ll?1:0].ontouchstart=null,n.childNodes[n._ll?0:1].onmousedown=null,n.childNodes[n._ll?0:1].ontouchstart=null,n.childNodes[n._ll?0:1].childNodes[0].onfocus=null,n.childNodes[n._ll?0:1].childNodes[0].onblur=null,n.childNodes[n._ll?0:1].childNodes[0].onkeypress=null,n.childNodes[n._ll?0:1].childNodes[0].onkeyup=null,n.childNodes[n._ll?0:1].childNodes[0].onkeydown=null,n.childNodes[n._ll?0:1].childNodes[0].onmousedown=null,n.childNodes[n._ll?0:1].childNodes[0].ontouchstart=null,n.childNodes[n._ll?0:1].removeChild(n.childNodes[n._ll?0:1].childNodes[0]);n.childNodes.length>0;)n.removeChild(n.childNodes[0]);n.parentNode.removeChild(n);n=null},doAttachEvents:function(n){var t=this;n.childNodes[n._ll?1:0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(n){n=n||event;n.preventDefault&&n.preventDefault();var i=n.target||n.srcElement;if(!this.parentNode._enabled||this.parentNode._ro||typeof i.className!="undefined"&&i.className=="dhxform_note")return n.cancelBubble=!0,n.preventDefault?n.preventDefault():n.returnValue=!1,!1;t.doClick(this.parentNode)};n.childNodes[n._ll?0:1].childNodes[0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(n){if(n=n||event,n.preventDefault&&n.preventDefault(),!this.parentNode.parentNode._enabled)return n.cancelBubble=!0,n.preventDefault?n.preventDefault():n.returnValue=!1,!1;var i=n.target||n.srcElement;if(typeof i.className!="undefined"&&i.className=="dhxform_info")return this.parentNode.parentNode.callEvent("onInfo",[this.parentNode.parentNode._idd,n]),n.cancelBubble=!0,n.preventDefault?n.preventDefault():n.returnValue=!1,!1;t.doClick(this.parentNode.parentNode)}},doClick:function(n){(n.childNodes[n._ll?0:1].childNodes[0].focus(),n._enabled&&!n._ro)&&(n.checkEvent("onBeforeChange")&&n.callEvent("onBeforeChange",[n._idd,n._value,n._checked])!==!0||(this.setChecked(n,!n._checked),n._autoCheck(),n.callEvent("onChange",[n._idd,n._value,n._checked])))},doCheckValue:function(n){n._checked&&n._enabled?(n.childNodes[n._ll?1:0].firstChild.name=String(n._idd),n.childNodes[n._ll?1:0].firstChild.value=this.getValue(n)):(n.childNodes[n._ll?1:0].firstChild.name="",n.childNodes[n._ll?1:0].firstChild.value="")},setChecked:function(n,t){n._checked=t===!0?!0:!1;n.childNodes[n._ll?1:0].lastChild.className=n.childNodes[n._ll?1:0].lastChild.className.replace(/chbx[0-1]{1}/gi,"")+(n._checked?" chbx1":" chbx0");this.doCheckValue(n)},check:function(n){this.setChecked(n,!0)},unCheck:function(n){this.setChecked(n,!1)},isChecked:function(n){return n._checked},enable:function(n){String(n.className).search("disabled")>=0&&(n.className=String(n.className).replace(/disabled/gi,""));n._enabled=!0;n.childNodes[n._ll?0:1].childNodes[0].tabIndex=0;n.childNodes[n._ll?0:1].childNodes[0].removeAttribute("disabled");this.doCheckValue(n)},disable:function(n){String(n.className).search("disabled")<0&&(n.className+=" disabled");n._enabled=!1;n._updateImgNode!=null&&n._updateImgNode(n,!1);n.childNodes[n._ll?0:1].childNodes[0].tabIndex=-1;n.childNodes[n._ll?0:1].childNodes[0].setAttribute("disabled","true");this.doCheckValue(n)},isEnabled:function(n){return n._enabled},setText:function(n,t){n.childNodes[n._ll?0:1].childNodes[0].innerHTML=t+(n._required?"<span class='dhxform_item_required'>*<\/span>":"")},getText:function(n){return n.childNodes[n._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},setValue:function(n,t){this.setChecked(n,t===!0||parseInt(t)==1||t=="true"||n._value===t)},getValue:function(n,t){return t=="realvalue"?n._value:typeof n._value=="undefined"||n._value==null?n._checked?1:0:n._value},setReadonly:function(n,t){n._ro=t===!0},isReadonly:function(n){return n._ro},setFocus:function(n){n.childNodes[n._ll?0:1].childNodes[0].focus()}};dhtmlXForm.prototype.items.radio={input:{},r:{},firstValue:{},render:function(n,t,i){var u,r;return n._type="ra",n._enabled=!0,n._checked=!1,n._group=t.name,n._value=t.value,n._uid=i,n._ro=t.readonly==!0,n._rName=n._rId+n._group,this.r[n._idd]=n,t.inputWidth=14,this.doAddLabel(n,t),this.doAddInput(n,t,"INPUT","TEXT",!0,!0,"dhxform_textarea"),n.childNodes[n._ll?1:0].className+=" dhxform_img_node",u=document.createElement("DIV"),u.className="dhxform_img rdbt0",n.appendChild(u),isNaN(t.inputLeft)||(n.childNodes[n._ll?1:0].style.left=parseInt(t.inputLeft)+"px"),isNaN(t.inputTop)||(n.childNodes[n._ll?1:0].style.top=parseInt(t.inputTop)+"px"),n.childNodes[n._ll?1:0].appendChild(u),n.childNodes[n._ll?1:0].firstChild.name="",n.childNodes[n._ll?1:0].firstChild.value="",n._updateImgNode=function(n,t){var i=n.childNodes[n._ll?1:0].lastChild;i.className=(t?"dhxform_actv_r":"dhxform_img")+" "+(n._checked?"rdbt1":"rdbt0");n=i=null},n._doOnFocus=function(n){n.getForm().callEvent("onFocus",[n._group,n._value])},n._doOnBlur=function(n){n.getForm().callEvent("onBlur",[n._group,n._value])},n._doOnKeyUpDown=function(n,t){this.callEvent(n,[this.childNodes[this._ll?0:1].childNodes[0],t,this._group,this._value])},this.input[n._rName]==null&&(r=document.createElement("INPUT"),r.type="HIDDEN",r.name=t.name,r.firstValue=n._value,n.appendChild(r),this.input[n._rName]=r),this.firstValue[n._rName]||(this.firstValue[n._rName]=t.value),t.checked==!0&&this.check(n),t.hidden==!0&&this.hide(n),t.disabled==!0&&this.userDisable(n),this.doAttachEvents(n),this},destruct:function(n){var t,i,r;if(n.lastChild==this.input[n._rName]){t=!1;for(i in this.r)t||this.r[i]._group!=n._group||this.r[i]._idd==n._idd||(this.r[i].appendChild(this.input[n._rName]),t=!0);t||(this.input[n._rName].parentNode.removeChild(this.input[n._rName]),this.input[n._rName]=null,this.firstValue[n._rName]=null)}return this.r[n._idd]=null,delete this.r[n._idd],n._doOnFocus=n._doOnBlur=n._updateImgNode=null,this.doUnloadNestedLists(n),this.doDestruct(n),r=n._idd,n=null,r},doClick:function(n){if((n.childNodes[n._ll?0:1].childNodes[0].focus(),n._enabled&&!n._checked)&&!n._ro){var t=[n._group,n._value,!0];n.checkEvent("onBeforeChange")&&n.callEvent("onBeforeChange",t)!==!0||(this.setChecked(n,!0),n.getForm()._autoCheck(),n.callEvent("onChange",t))}},doCheckValue:function(n){var i=null;for(var t in this.r)this.r[t]._checked&&this.r[t]._group==n._group&&this.r[t]._rId==n._rId&&(i=this.r[t]._value);i!=null&&this.r[t]._enabled?(this.input[n._rName].name=String(n._group),this.input[n._rName].value=i):(this.input[n._rName].name="",this.input[n._rName].value="");this.input[n._rName]._value=i},setChecked:function(n,t){var i,r,u;t=t===!0;for(i in this.r)this.r[i]._group==n._group&&this.r[i]._rId==n._rId&&(r=!1,this.r[i]._idd==n._idd?this.r[i]._checked!=t&&(this.r[i]._checked=t,r=!0):this.r[i]._checked&&(this.r[i]._checked=!1,r=!0),r&&(u=this.r[i].childNodes[this.r[i]._ll?1:0].childNodes[1],u.className=u.className.replace(/rdbt[0-1]{1}/gi,"")+(this.r[i]._checked?" rdbt1":" rdbt0"),u=null));this.doCheckValue(n)},getChecked:function(n){return this.input[n._rName]._value},_getFirstValue:function(n){return this.firstValue[n._rName]},_getId:function(n){return n._idd},setValue:function(){}},function(){for(var n in{doAddLabel:1,doAddInput:1,doDestruct:1,doUnloadNestedLists:1,doAttachEvents:1,check:1,unCheck:1,isChecked:1,enable:1,disable:1,isEnabled:1,setText:1,getText:1,getValue:1,setReadonly:1,isReadonly:1,setFocus:1})dhtmlXForm.prototype.items.radio[n]=dhtmlXForm.prototype.items.checkbox[n]}();dhtmlXForm.prototype.items.select={render:function(n,t){return n._type="se",n._enabled=!0,n._value=null,n._newValue=null,this.doAddLabel(n,t),this.doAddInput(n,t,"SELECT",null,!0,!0,"dhxform_select"),this.doAttachEvents(n),this.doLoadOpts(n,t),t.connector!=null&&this.doLoadOptsConnector(n,t.connector),typeof t.value!="undefined"&&t.value!=null&&this.setValue(n,t.value),this},destruct:function(n){for(this.doUnloadNestedLists(n),n.callEvent=null,n.checkEvent=null,n.getForm=null,n._autoCheck=null,n._enabled=null,n._idd=null,n._type=null,n._value=null,n._newValue=null,n.onselectstart=null,n.childNodes[n._ll?1:0].childNodes[0].onclick=null,n.childNodes[n._ll?1:0].childNodes[0].onkeydown=null,n.childNodes[n._ll?1:0].childNodes[0].onchange=null,n.childNodes[n._ll?1:0].childNodes[0].onfocus=null,n.childNodes[n._ll?1:0].childNodes[0].onblur=null,n.childNodes[n._ll?1:0].childNodes[0].onkeyup=null,n.childNodes[n._ll?1:0].removeChild(n.childNodes[n._ll?1:0].childNodes[0]);n.childNodes.length>0;)n.removeChild(n.childNodes[0]);n.parentNode.removeChild(n);n=null},doAddLabel:function(n,t){var i=document.createElement("DIV");i.className="dhxform_label "+t.labelAlign;i.innerHTML="<label for='"+t.uid+"'>"+t.label+(t.info?"<span class='dhxform_info'>[?]<\/span>":"")+(n._required?"<span class='dhxform_item_required'>*<\/span>":"")+"<\/label>";t.wrap==!0&&(i.style.whiteSpace="normal");typeof t.tooltip!="undefined"&&(i.title=t.tooltip);n.appendChild(i);(typeof t.label=="undefined"||t.label==null||t.label.length==0)&&(i.style.display="none");isNaN(t.labelWidth)||(i.style.width=parseInt(t.labelWidth)+"px");isNaN(t.labelHeight)||(i.style.height=parseInt(t.labelHeight)+"px");isNaN(t.labelLeft)||(i.style.left=parseInt(t.labelLeft)+"px");isNaN(t.labelTop)||(i.style.top=parseInt(t.labelTop)+"px");t.info&&(i.onclick=function(n){n=n||event;var t=n.target||n.srcElement;if(typeof t.className!="undefined"&&t.className=="dhxform_info")return this.parentNode.callEvent("onInfo",[this.parentNode._idd,n]),n.cancelBubble=!0,n.preventDefault?n.preventDefault():n.returnValue=!1,!1})},doAttachEvents:function(n){var t=n.childNodes[n._ll?1:0].childNodes[0],i=this;t.onclick=function(){i.doOnChange(this)};t.onkeydown=function(n){n=n||event;i.doOnChange(this);this.parentNode.parentNode.callEvent("onKeyDown",[this,n,this.parentNode.parentNode._idd])};t.onchange=function(){i.doOnChange(this)};t.onkeyup=function(n){n=n||event;this.parentNode.parentNode.callEvent("onKeyUp",[this,n,this.parentNode.parentNode._idd])};t=null;this.doAttachChangeLS(n)},doAttachChangeLS:function(n){var t=n.childNodes[n._ll?1:0].childNodes[0];t.onfocus=function(){var n=this.parentNode.parentNode;n.getForm()._ccActivate(n._idd,this,n.getForm().getItemValue(n._idd,!0));n.getForm().callEvent("onFocus",[n._idd]);n=null};t.onblur=function(){var n=this.parentNode.parentNode;n.getForm()._ccDeactivate(n._idd);n.getForm().callEvent("onBlur",[n._idd]);n=null};t=null},doValidate:function(n){n.getForm().live_validate&&this._validate(n)},doLoadOpts:function(n,t,i){for(var e,f,o=n.childNodes[n._ll?1:0].childNodes[0],u=t.options,s=!1,r=0;r<u.length;r++)e=u[r].text||u[r].label,e&&typeof e!="undefined"||(e=""),f=new Option(e,u[r].value),typeof u[r].img_src=="string"&&f.setAttribute("img_src",u[r].img_src),o.options.add(f),typeof u[r].selected!="undefined"&&window.dhx4.s2b(u[r].selected)==!0&&(f.selected=!0,n._value=u[r].value,s=!0),typeof u[r].checked!="undefined"&&window.dhx4.s2b(u[r].checked)==!0&&f.setAttribute("checked","1"),typeof u[r].img!="undefined"&&f.setAttribute("img",u[r].img),typeof u[r].img_dis!="undefined"&&f.setAttribute("img_dis",u[r].img_dis),typeof u[r].css!="undefined"&&f.setAttribute("css",u[r].css);!s&&o.selectedIndex>=0&&(n._value=o.options[o.selectedIndex].value);i===!0&&n.callEvent("onOptionsLoaded",[n._idd]);this._checkNoteWidth(n)},doLoadOptsConnector:function(n,t){var i=this;n._connector_working=!0;window.dhx4.ajax.get(t,function(t){var o=t.xmlDoc.responseText,s,r,e,u,f;if(o.indexOf("{")===0)s=JSON.parse(o),i.doLoadOpts(n,s,!0);else{if(t=t.xmlDoc.responseXML,t==null)return;if(r=t.getElementsByTagName("data"),r==null||r[0]==null)return;for(r=r[0],e=[],u=0;u<r.childNodes.length;u++)typeof r.childNodes[u].tagName!="undefined"&&String(r.childNodes[u].tagName).toLowerCase()=="item"&&(f=r.childNodes[u],e.push({label:f.getAttribute("label"),value:f.getAttribute("value"),selected:f.getAttribute("selected")!=null}),f=null);i.doLoadOpts(n,{options:e},!0)}n._connector_working=!1;n._connector_value!=null&&(i.setValue(n,n._connector_value),n._connector_value=null);i=n=null})},doOnChange:function(n){var t=n.parentNode.parentNode,i;if(t._newValue=n.selectedIndex>=0?n.options[n.selectedIndex].value:null,t._newValue!=t._value){if(t.checkEvent("onBeforeChange")&&t.callEvent("onBeforeChange",[t._idd,t._value,t._newValue])!==!0){for(i=0;i<n.options.length;i++)n.options[i].value==t._value&&(n.options[i].selected=!0);return}t._value=t._newValue;t.callEvent("onChange",[t._idd,t._value]);t._type=="se"&&t.getForm().live_validate&&this._validate(t)}t._autoCheck()},setText:function(n,t){t||(t="");n.childNodes[n._ll?0:1].childNodes[0].innerHTML=t+(n._required?"<span class='dhxform_item_required'>*<\/span>":"");n.childNodes[n._ll?0:1].style.display=t.length==0||t==null?"none":""},getText:function(n){return n.childNodes[n._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},enable:function(n){String(n.className).search("disabled")>=0&&(n.className=String(n.className).replace(/disabled/gi,""));n._enabled=!0;n.childNodes[n._ll?1:0].childNodes[0].removeAttribute("disabled")},disable:function(n){String(n.className).search("disabled")<0&&(n.className+=" disabled");n._enabled=!1;n.childNodes[n._ll?1:0].childNodes[0].setAttribute("disabled",!0)},getOptions:function(n){return n.childNodes[n._ll?1:0].childNodes[0].options},setValue:function(n,t){var r,i;if(n._connector_working){n._connector_value=t;return}for(r=this.getOptions(n),i=0;i<r.length;i++)r[i].value==t&&(r[i].selected=!0,n._value=r[i].value);n._list!=null&&n._list.length>0&&n.getForm()._autoCheck();n.getForm()._ccReload(n._idd,n._value)},getValue:function(n){for(var r=-1,i=this.getOptions(n),t=0;t<i.length;t++)i[t].selected&&(r=i[t].value);return r},setWidth:function(n,t){n.childNodes[n._ll?1:0].childNodes[0].style.width=t+"px"},getSelect:function(n){return n.childNodes[n._ll?1:0].childNodes[0]},setFocus:function(n){n.childNodes[n._ll?1:0].childNodes[0].focus()},_checkNoteWidth:function(n){var t;n.childNodes[n._ll?1:0].childNodes[1]!=null&&(t=n.childNodes[n._ll?1:0].childNodes[1],t.className!=null&&t.className.search(/dhxform_note/gi)>=0&&t._w=="auto"&&(t.style.width=n.childNodes[n._ll?1:0].childNodes[0].offsetWidth+"px"));t=null}},function(){for(var n in{doAddInput:1,doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.select[n]=dhtmlXForm.prototype.items.checkbox[n]}();dhtmlXForm.prototype.items.multiselect={doLoadOpts:function(n,t,i){var f=n.childNodes[n._ll?1:0].childNodes[0],u,r,e;for(f.multiple=!0,isNaN(t.size)||(f.size=Number(t.size)),n._value=[],n._newValue=[],u=t.options,r=0;r<u.length;r++)e=new Option(u[r].text||u[r].label,u[r].value),f.options.add(e),(u[r].selected==!0||u[r].selected=="true")&&(e.selected=!0,n._value.push(u[r].value));i===!0&&n.callEvent("onOptionsLoaded",[n._idd]);this._checkNoteWidth(n)},doAttachEvents:function(n){var t=n.childNodes[n._ll?1:0].childNodes[0],i=this;t.onfocus=function(){i.doOnChange(this);var n=this.parentNode.parentNode;n.getForm().callEvent("onFocus",[n._idd]);n=null};t.onblur=function(){i.doOnChange(this);var n=this.parentNode.parentNode;n.getForm().callEvent("onBlur",[n._idd]);n=null};t.onclick=function(){i.doOnChange(this);var n=this.parentNode.parentNode;n._autoCheck();n=null}},doOnChange:function(n){var t=n.parentNode.parentNode,r,i;for(t._newValue=[],i=0;i<n.options.length;i++)n.options[i].selected&&t._newValue.push(n.options[i].value);if(t._value.sort().toString()!=t._newValue.sort().toString()){if(t.checkEvent("onBeforeChange")&&t.callEvent("onBeforeChange",[t._idd,t._value,t._newValue])!==!0){for(r={},i=0;i<t._value.length;i++)r[t._value[i]]=!0;for(i=0;i<n.options.length;i++)n.options[i].selected=r[n.options[i].value]==!0;r=null;return}for(t._value=[],i=0;i<t._newValue.length;i++)t._value.push(t._newValue[i]);t.callEvent("onChange",[t._idd,t._value])}t._autoCheck()},setValue:function(n,t){var u={},r,i;for(typeof t=="string"&&(t=t.split(",")),typeof t!="object"&&(t=[t]),i=0;i<t.length;i++)u[t[i]]=!0;for(r=this.getOptions(n),i=0;i<r.length;i++)r[i].selected=u[r[i].value]==!0;n._autoCheck()},getValue:function(n){for(var r=[],i=this.getOptions(n),t=0;t<i.length;t++)i[t].selected&&r.push(i[t].value);return r}},function(){for(var n in dhtmlXForm.prototype.items.select)dhtmlXForm.prototype.items.multiselect[n]||(dhtmlXForm.prototype.items.multiselect[n]=dhtmlXForm.prototype.items.select[n])}();dhtmlXForm.prototype.items.input={render:function(n,t){var u=!isNaN(t.rows),f,i,r;return n._type="ta",n._enabled=!0,this.doAddLabel(n,t),this.doAddInput(n,t,u?"TEXTAREA":"INPUT",u?null:"TEXT",!0,!0,"dhxform_textarea"),this.doAttachEvents(n),u&&(n.childNodes[n._ll?1:0].childNodes[0].rows=Number(t.rows)+(window.dhx4.isIE6?1:0)),typeof t.numberFormat!="undefined"&&(i=null,r=null,typeof t.numberFormat!="string"?(f=t.numberFormat[0],i=t.numberFormat[1]||null,r=t.numberFormat[2]||null):(f=t.numberFormat,typeof t.groupSep=="string"&&(i=t.groupSep),typeof t.decSep=="string"&&(r=t.decSep)),this.setNumberFormat(n,f,i,r,!1)),this.setValue(n,t.value),this},doAttachEvents:function(n){var t=n.childNodes[n._ll?1:0].childNodes[0],i;typeof t.tagName!="undefined"&&{input:1,textarea:1,select:1}[t.tagName.toLowerCase()]==1&&(i=this,t.onfocus=function(){var n=this.parentNode.parentNode;n._df!=null&&(this.value=n._value||"");n.getForm()._ccActivate(n._idd,this,this.value);n.getForm().callEvent("onFocus",[n._idd]);n=null},t.onblur=function(){var n=this.parentNode.parentNode;n.getForm()._ccDeactivate(n._idd);i.updateValue(n,!0);n.getForm().live_validate&&i._validate(n);n.getForm().callEvent("onBlur",[n._idd]);n=null});t=null},updateValue:function(n,t){var i=n.childNodes[n._ll?1:0].childNodes[0].value,r=n.getForm(),f=r._ccActive==!0&&r._formLS!=null&&r._formLS[n._idd]!=null,u;if((r=null,f||n._df==null||i!=window.dhx4.template._getFmtValue(n._value,n._df))&&(t||n._df==null||n._value!=i||i!=window.dhx4.template._getFmtValue(i,n._df))){if(u=this,n._value!=i){if(n.checkEvent("onBeforeChange")&&n.callEvent("onBeforeChange",[n._idd,n._value,i])!==!0){n._df!=null?u.setValue(n,n._value):n.childNodes[n._ll?1:0].childNodes[0].value=n._value;return}n._df!=null&&t?u.setValue(n,i):n._value=i;n.callEvent("onChange",[n._idd,i]);return}n._df!=null&&t&&this.setValue(n,n._value)}},setValue:function(n,t){n._value=typeof t!="undefined"&&t!=null?t:"";var i=String(n._value)||"",r=n.childNodes[n._ll?1:0].childNodes[0];n._df!=null&&(i=window.dhx4.template._getFmtValue(i,n._df));r.value!=i&&(r.value=i,n.getForm()._ccReload(n._idd,i));r=null},getValue:function(n){var t=n.getForm();return t._formLS&&t._formLS[n._idd]!=null&&this.updateValue(n),t=null,typeof n._value!="undefined"&&n._value!=null?n._value:""},setReadonly:function(n,t){n._ro=t===!0;n._ro?n.childNodes[n._ll?1:0].childNodes[0].setAttribute("readOnly","true"):n.childNodes[n._ll?1:0].childNodes[0].removeAttribute("readOnly")},isReadonly:function(n){return n._ro||(n._ro=!1),n._ro},getInput:function(n){return n.childNodes[n._ll?1:0].childNodes[0]},setNumberFormat:function(n,t,i,r,u){if(typeof u!="boolean"&&(u=!0),t=="")return n._df=null,u&&this.setValue(n,n._value),!0;if(typeof t=="string"){var f=window.dhx4.template._parseFmt(t,i,r);return f==!1?!1:(n._df=f,u&&this.setValue(n,n._value),!0)}}},function(){for(var n in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setFocus:1})dhtmlXForm.prototype.items.input[n]=dhtmlXForm.prototype.items.select[n]}();dhtmlXForm.prototype.items.password={render:function(n,t){return n._type="pw",n._enabled=!0,this.doAddLabel(n,t),this.doAddInput(n,t,"INPUT","PASSWORD",!0,!0,"dhxform_textarea"),this.doAttachEvents(n),this.setValue(n,t.value),this}},function(){for(var n in{doAddLabel:1,doAddInput:1,doAttachEvents:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,setValue:1,getValue:1,updateValue:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1})dhtmlXForm.prototype.items.password[n]=dhtmlXForm.prototype.items.input[n]}();dhtmlXForm.prototype.items.file={render:function(n,t){n._type="fl";n._enabled=!0;this.doAddLabel(n,t);this.doAddInput(n,t,"INPUT","FILE",!0,!1,"dhxform_textarea");var i=n.childNodes[n._ll?1:0].childNodes[0],r=this;return i.onfocus=function(){var n=this.parentNode.parentNode;n.getForm().callEvent("onFocus",[n._idd]);n=null},i.onblur=function(){var n=this.parentNode.parentNode;n.getForm().live_validate&&r._validate(n);n.getForm().callEvent("onBlur",[n._idd]);n=null},i=null,n.childNodes[n._ll?1:0].childNodes[0].onchange=function(){n.callEvent("onChange",[n._idd,this.value])},this},setValue:function(){},getValue:function(n){return n.childNodes[n._ll?1:0].childNodes[0].value}},function(){for(var n in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,getInput:1,enable:1,disable:1,isEnabled:1,setWidth:1})dhtmlXForm.prototype.items.file[n]=dhtmlXForm.prototype.items.input[n]}();dhtmlXForm.prototype.items.label={_index:!1,render:function(n,t){n._type="lb";n._enabled=!0;n._checked=!0;var i=document.createElement("DIV");return i.className="dhxform_txt_label2"+(t._isTopmost?" topmost":""),i.innerHTML=t.label,n.appendChild(i),t.hidden==!0&&this.hide(n),t.disabled==!0&&this.userDisable(n),isNaN(t.labelWidth)||(i.style.width=parseInt(t.labelWidth)+"px"),isNaN(t.labelHeight)||(i.style.height=parseInt(t.labelHeight)+"px"),isNaN(t.labelLeft)||(i.style.left=parseInt(t.labelLeft)+"px"),isNaN(t.labelTop)||(i.style.top=parseInt(t.labelTop)+"px"),this},destruct:function(n){this.doUnloadNestedLists(n);n._autoCheck=null;n._enabled=null;n._type=null;n.callEvent=null;n.checkEvent=null;n.getForm=null;n.onselectstart=null;n.parentNode.removeChild(n);n=null},enable:function(n){String(n.className).search("disabled")>=0&&(n.className=String(n.className).replace(/disabled/gi,""));n._enabled=!0},disable:function(n){String(n.className).search("disabled")<0&&(n.className+=" disabled");n._enabled=!1},setText:function(n,t){n.firstChild.innerHTML=t},getText:function(n){return n.firstChild.innerHTML}},function(){for(var n in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.label[n]=dhtmlXForm.prototype.items.checkbox[n]}();dhtmlXForm.prototype.items.button={render:function(n,t){if(n._type="bt",n._enabled=!0,n._name=t.name,n.className=String(n.className).replace("item_label_top","item_label_left").replace("item_label_right","item_label_left"),n._doOnKeyUpDown=function(n,t){this.callEvent(n,[this.childNodes[0].childNodes[0],t,this._idd])},n.innerHTML='<div class="dhxform_btn" role="link" tabindex="0" dir="ltr"><div class="dhxform_btn_txt">'+t.value+'<\/div><div class="dhxform_btn_filler" disabled="true"><\/div><\/div>',!isNaN(t.width)){var i=Math.max(t.width,10);dhtmlXForm.prototype.items[this.t]._dim==null&&(n.firstChild.style.width=i+"px",dhtmlXForm.prototype.items[this.t]._dim=n.getForm()._checkDim(n,n.firstChild));n.firstChild.style.width=i-dhtmlXForm.prototype.items[this.t]._dim+"px";n.firstChild.firstChild.className+=" dhxform_btn_txt_autowidth"}return isNaN(t.inputLeft)||(n.childNodes[0].style.left=parseInt(t.inputLeft)+"px"),isNaN(t.inputTop)||(n.childNodes[0].style.top=parseInt(t.inputTop)+"px"),t.hidden==!0&&this.hide(n),t.disabled==!0&&this.userDisable(n),typeof t.tooltip!="undefined"&&(n.firstChild.title=t.tooltip),n.onselectstart=function(n){return n=n||event,n.cancelBubble=!0,n.preventDefault?n.preventDefault():n.returnValue=!1,!1},n.firstChild.onselectstart=function(n){return n=n||event,n.cancelBubble=!0,n.preventDefault?n.preventDefault():n.returnValue=!1,!1},n.firstChild.onkeypress=function(n){return n=n||event,(n.keyCode==32||n.charCode==32||n.keyCode==13||n.charCode==13)&&!this.parentNode._busy?(this.parentNode._busy=!0,n.cancelBubble=!0,n.preventDefault?n.preventDefault():n.returnValue=!1,_dhxForm_doClick(this.childNodes[0],["mousedown","mouseup"]),!1):void 0},n.firstChild.onfocus=function(){this.parentNode._doOnFocus(this.parentNode)},n.firstChild.onblur=function(){_dhxForm_doClick(this.childNodes[0],"mouseout");this.parentNode._doOnBlur(this.parentNode)},n.firstChild.onkeyup=function(n){this.parentNode._doOnKeyUpDown("onKeyUp",n||event)},n.firstChild.onkeydown=function(n){this.parentNode._doOnKeyUpDown("onKeyDown",n||event)},n.firstChild.onmouseover=function(){var n=this.parentNode;n._enabled&&(this._isOver=!0,this.className="dhxform_btn dhxform_btn_over",n=null)},n.firstChild.onmouseout=function(){var n=this.parentNode;n._enabled&&(this.className="dhxform_btn",this._allowClick=!1,this._pressed=!1,this._isOver=!1,n=null)},n.firstChild.ontouchstart=n.firstChild.onmousedown=function(n){if((n=n||event,n.type=="touchstart"&&n.preventDefault&&n.preventDefault(),!(n.button>=2))&&!this._pressed){var t=this.parentNode;t._enabled&&(this.className="dhxform_btn dhxform_btn_pressed",this._allowClick=!0,this._pressed=!0,t=null)}},n.firstChild.ontouchend=n.firstChild.onmouseup=function(n){if((n=n||event,!(n.button>=2))&&this._pressed){var t=this.parentNode;t._enabled&&(t._busy=!1,this.className="dhxform_btn"+(this._isOver?" dhxform_btn_over":""),this._pressed&&this._allowClick&&t.callEvent("_onButtonClick",[t._name,t._cmd]),this._allowClick=!1,this._pressed=!1,t=null)}},n._doOnFocus=function(n){n.getForm().callEvent("onFocus",[n._idd])},n._doOnBlur=function(n){n.getForm().callEvent("onBlur",[n._idd])},this},destruct:function(n){for(this.doUnloadNestedLists(n),n.callEvent=null,n.checkEvent=null,n.getForm=null,n._autoCheck=null,n._type=null,n._enabled=null,n._cmd=null,n._name=null,n._doOnFocus=null,n._doOnBlur=null,n._doOnKeyUpDown=null,n.onselectstart=null,n.firstChild.onselectstart=null,n.firstChild.onkeypress=null,n.firstChild.ontouchstart=null,n.firstChild.ontouchend=null,n.firstChild.onfocus=null,n.firstChild.onblur=null,n.firstChild.onkeyup=null,n.firstChild.onkeydown=null,n.firstChild.onmouseover=null,n.firstChild.onmouseout=null,n.firstChild.onmousedown=null,n.firstChild.onmouseup=null;n.childNodes.length>0;)n.removeChild(n.childNodes[0]);n.parentNode.removeChild(n);n=null},enable:function(n){String(n.className).search("disabled")>=0&&(n.className=String(n.className).replace(/disabled/gi,""));n._enabled=!0;n.childNodes[0].removeAttribute("disabled");n.childNodes[0].setAttribute("role","link");n.childNodes[0].setAttribute("tabIndex","0")},disable:function(n){String(n.className).search("disabled")<0&&(n.className+=" disabled");n._enabled=!1;n.childNodes[0].setAttribute("disabled","true");n.childNodes[0].removeAttribute("role");n.childNodes[0].removeAttribute("tabIndex")},setText:function(n,t){n.childNodes[0].childNodes[0].innerHTML=t},getText:function(n){return n.childNodes[0].childNodes[0].innerHTML},setFocus:function(n){n.childNodes[0].focus()}},function(){for(var n in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.button[n]=dhtmlXForm.prototype.items.checkbox[n]}();dhtmlXForm.prototype.items.hidden={_index:!1,render:function(n,t){n.style.display="none";n._name=t.name;n._type="hd";n._enabled=!0;var i=document.createElement("INPUT");return i.type="HIDDEN",i.name=t.name,i.value=t.value||"",n.appendChild(i),this},destruct:function(n){for(this.doUnloadNestedLists(n);n.childNodes.length>0;)n.removeChild(n.childNodes[0]);n._autoCheck=null;n._name=null;n._type=null;n._enabled=null;n.onselectstart=null;n.callEvent=null;n.checkEvent=null;n.getForm=null;n.parentNode.removeChild(n);n=null},enable:function(n){n._enabled=!0;n.childNodes[0].setAttribute("name",n._name)},disable:function(n){n._enabled=!1;n.childNodes[0].removeAttribute("name")},show:function(){},hide:function(){},isHidden:function(){return!0},setValue:function(n,t){n.childNodes[0].value=t},getValue:function(n){return n.childNodes[0].value},getInput:function(n){return n.childNodes[0]}},function(){for(var n in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.hidden[n]=dhtmlXForm.prototype.items.checkbox[n]}();dhtmlXForm.prototype.items.list={_index:!1,render:function(n,t){return n._type="list",n._enabled=!0,n._isNestedForm=!0,n.style.paddingLeft=n._ofsNested+"px",n.className="dhxform_base_nested"+(n._custom_css||""),[this,new dhtmlXForm(n,null,t)]},destruct:function(){}};dhtmlXForm.prototype.items.fieldset={_index:!1,render:function(n,t){var i,u,r;return n._type="fs",typeof parseInt(t.inputWidth)=="number",n._width=t.width,n._enabled=!0,n._checked=!0,n.className="fs_"+t.position+(typeof t.className=="string"?" "+t.className:""),i=document.createElement("FIELDSET"),i.className="dhxform_fs",u=String(t.labelAlign).replace("align_",""),i.innerHTML="<legend class='fs_legend' align='"+u+"' style='text-align:"+u+"'>"+t.label+"<\/legend>",n.appendChild(i),isNaN(t.inputLeft)||(i.style.left=parseInt(t.inputLeft)+"px"),isNaN(t.inputTop)||(i.style.top=parseInt(t.inputTop)+"px"),t.inputWidth!="auto"&&(isNaN(t.inputWidth)||(i.style.width=parseInt(t.inputWidth)+"px",r=parseInt(i.style.width),i.offsetWidth>r&&(i.style.width=r+(r-i.offsetWidth)+"px"))),n._addSubListNode=function(){var n=document.createElement("DIV");return n._custom_css=" dhxform_fs_nested",this.childNodes[0].appendChild(n),n},t.hidden==!0&&this.hide(n),t.disabled==!0&&this.userDisable(n),this},destruct:function(n){for(this.doUnloadNestedLists(n),n._checked=null,n._enabled=null,n._idd=null,n._type=null,n._width=null,n.onselectstart=null,n._addSubListNode=null,n._autoCheck=null,n.callEvent=null,n.checkEvent=null,n.getForm=null;n.childNodes.length>0;)n.removeChild(n.childNodes[0]);n.parentNode.removeChild(n);n=null},setText:function(n,t){n.childNodes[0].childNodes[0].innerHTML=t},getText:function(n){return n.childNodes[0].childNodes[0].innerHTML},enable:function(n){n._enabled=!0;String(n.className).search("disabled")>=0&&(n.className=String(n.className).replace(/disabled/gi,""))},disable:function(n){n._enabled=!1;String(n.className).search("disabled")<0&&(n.className+=" disabled")},setWidth:function(n,t){n.childNodes[0].style.width=t+"px";n._width=t},getWidth:function(n){return n._width}},function(){for(var n in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.fieldset[n]=dhtmlXForm.prototype.items.checkbox[n]}();dhtmlXForm.prototype.items.block={_index:!1,render:function(n,t){n._type="bl";n._width=t.width;n._enabled=!0;n._checked=!0;n.className="block_"+t.position+(typeof t.className=="string"?" "+t.className:"");var i=document.createElement("DIV");return i.className="dhxform_obj_"+n.getForm().skin+" dhxform_block",i.style.fontSize=n.getForm().cont.style.fontSize,t.style&&(i.style.cssText=t.style),typeof t.id!="undefined"&&(i.id=t.id),n.appendChild(i),isNaN(t.inputLeft)||(i.style.left=parseInt(t.inputLeft)+"px"),isNaN(t.inputTop)||(i.style.top=parseInt(t.inputTop)+"px"),t.inputWidth!="auto"&&(isNaN(t.inputWidth)||(i.style.width=parseInt(t.inputWidth)+"px")),isNaN(t.blockOffset)||(n._ofsNested=t.blockOffset),n._addSubListNode=function(){var n=document.createElement("DIV");return n._inBlcok=!0,typeof this._ofsNested!="undefined"&&(n._ofsNested=this._ofsNested),this.childNodes[0].appendChild(n),n},t.hidden==!0&&this.hide(n),t.disabled==!0&&this.userDisable(n),this},_setCss:function(n,t,i){n.firstChild.className="dhxform_obj_"+t+" dhxform_block";n.firstChild.style.fontSize=i}},function(){for(var n in{enable:1,disable:1,isEnabled:1,setWidth:1,getWidth:1,doUnloadNestedLists:1,destruct:1})dhtmlXForm.prototype.items.block[n]=dhtmlXForm.prototype.items.fieldset[n]}();dhtmlXForm.prototype.items.newcolumn={_index:!1};dhtmlXForm.prototype.items.template={render:function(n,t){var i=!isNaN(t.rows);return n._type="tp",n._enabled=!0,t.format!=null&&(typeof t.format=="function"?n.format=t.format:typeof t.format=="string"&&typeof window[t.format]=="function"&&(n.format=window[t.format])),n.format==null&&(n.format=function(n,t){return t}),this.doAddLabel(n,t),this.doAddInput(n,t,"DIV",null,!0,!0,"dhxform_item_template"),this.setValue(n,t.value||""),this},destruct:function(n){n.format=null;this.d2(n);n=null},setValue:function(n,t){n._value=t;n.childNodes[n._ll?1:0].childNodes[0].innerHTML=n.format(n._idd,n._value)},getValue:function(n){return n._value},enable:function(n){String(n.className).search("disabled")>=0&&(n.className=String(n.className).replace(/disabled/gi,""));n._enabled=!0},disable:function(n){String(n.className).search("disabled")<0&&(n.className+=" disabled");n._enabled=!1}},function(){dhtmlXForm.prototype.items.template.d2=dhtmlXForm.prototype.items.input.destruct;for(var n in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,setWidth:1})dhtmlXForm.prototype.items.template[n]=dhtmlXForm.prototype.items.select[n]}();dhtmlXForm.prototype._ulToObject=function(n,t){for(var u,o,r,i,e=[],f=0;f<n.childNodes.length;f++){if(String(n.childNodes[f].tagName||"").toLowerCase()=="li"){for(i={},u=n.childNodes[f],r=0;r<t.length;r++)u.getAttribute(t[r])!=null&&(i[String(t[r]).replace("ftype","type")]=u.getAttribute(t[r]));if(!i.label)try{i.label=u.firstChild.nodeValue}catch(s){}for(o=u.getElementsByTagName("UL"),o[0]!=null&&(i[i.type=="select"?"options":"list"]=dhtmlXForm.prototype._ulToObject(o[0],t)),r=0;r<u.childNodes.length;r++)String(u.childNodes[r].tagName||"").toLowerCase()=="userdata"&&(i.userdata||(i.userdata={}),i.userdata[u.childNodes[r].getAttribute("name")]=u.childNodes[r].firstChild.nodeValue);e[e.length]=i}if(String(n.childNodes[f].tagName||"").toLowerCase()=="div"){i={};i.type="label";try{i.label=n.childNodes[f].firstChild.nodeValue}catch(s){}e[e.length]=i}}return e};dhtmlXForm.prototype.setUserData=function(n,t,i,r){if(typeof r!="undefined"){var u=this.doWithItem([n,t],"_getId");u!=null&&(n=u,t=i,i=r)}this._userdata||(this._userdata={});this._userdata[n]=this._userdata[n]||{};this._userdata[n][t]=i};dhtmlXForm.prototype.getUserData=function(n,t,i){if(typeof i!="undefined"){var r=this.doWithItem([n,t],"_getId");r!=null&&(n=r,t=i)}return this._userdata!=null&&typeof this._userdata[n]!="undefined"&&typeof this._userdata[n][t]!="undefined"?this._userdata[n][t]:""};dhtmlXForm.prototype.setRTL=function(n){this._rtl=n===!0?!0:!1;this._rtl?String(this.cont).search(/dhxform_rtl/gi)<0&&(this.cont.className+=" dhxform_rtl"):String(this.cont).search(/dhxform_rtl/gi)>=0&&(this.cont.className=String(this.cont.className).replace(/dhxform_rtl/gi,""))};_dhxForm_doClick=function(n,t){var r,i;typeof t=="object"&&(r=t[1],t=t[0]);document.createEvent?(i=document.createEvent("MouseEvents"),i.initEvent(t,!0,!1),n.dispatchEvent(i)):document.createEventObject&&(i=document.createEventObject(),i.button=1,n.fireEvent("on"+t,i));r&&window.setTimeout(function(){_dhxForm_doClick(n,r)},100)};dhtmlXForm.prototype.setFormData=function(n){var t,i;for(t in n){i=this.getItemType(t);switch(i){case"checkbox":this[n[t]==!0||parseInt(n[t])==1||n[t]=="true"||n[t]==this.getItemValue(t,"realvalue")?"checkItem":"uncheckItem"](t);break;case"radio":this.checkItem(t,n[t]);break;case"input":case"textarea":case"password":case"select":case"multiselect":case"hidden":case"template":case"combo":case"calendar":case"colorpicker":case"editor":this.setItemValue(t,n[t]);break;default:this["setFormData_"+i]?this["setFormData_"+i](t,n[t]):(this.hId||(this.hId=this._genStr(12)),this.setUserData(this.hId,t,n[t]))}}};dhtmlXForm.prototype.getFormData=function(n,t){var r={},l=this,u,f,o,s,e,h,c;for(var i in this.itemPull){if(u=this.itemPull[i]._idd,f=this.itemPull[i]._type,f=="ch"&&(r[u]=this.isItemChecked(u)?this.getItemValue(u):0),f!="ra"||r[this.itemPull[i]._group]||(r[this.itemPull[i]._group]=this.getCheckedValue(this.itemPull[i]._group)),f in{se:1,ta:1,pw:1,hd:1,tp:1,fl:1,calendar:1,combo:1,editor:1,colorpicker:1}&&(r[u]=this.getItemValue(u,n)),this["getFormData_"+f]&&(r[u]=this["getFormData_"+f](u)),f=="up"){o=this.getItemValue(u);for(s in o)r[s]=o[s]}if(this.itemPull[i]._list)for(e=0;e<this.itemPull[i]._list.length;e++){h=this.itemPull[i]._list[e].getFormData(n,t);for(c in h)r[c]=h[c]}}if(!t&&this.hId&&this._userdata[this.hId])for(i in this._userdata[this.hId])r[i]||(r[i]=this._userdata[this.hId][i]);return r};dhtmlXForm.prototype.adjustParentSize=function(){for(var r,n,f,e,u=0,t=-1,i=0;i<this.base.length;i++)u+=this.base[i].firstChild.offsetWidth,this.base[i].offsetHeight>t&&(t=this.base[i].offsetHeight);r=!1;try{r=this.cont.parentNode.parentNode.parentNode.parentNode._isCell==!0;r&&(n=this.cont.parentNode.parentNode.parentNode.parentNode)}catch(o){}if(r&&typeof n!="undefined"){u>0&&n.setWidth(u+10);t>0&&n.setHeight(t+n.firstChild.firstChild.offsetHeight+5);r=n=null;return}f=!1;try{f=this.cont.parentNode.parentNode.parentNode._isWindow==!0;f&&(e=this.cont.parentNode.parentNode,typeof e.callEvent=="function"&&(this.cont.style.display="none",e.callEvent("_setCellSize",[u+15,t+15]),this.cont.style.display=""))}catch(o){}};dhtmlXForm.prototype.reset=function(){this.callEvent("onBeforeReset",[this.formId,this.getFormData()])&&(this._last_load_data&&this.setFormData(this._last_load_data),this.callEvent("onAfterReset",[this.formId]))};dhtmlXForm.prototype.send=function(n,t,i,r){var f,u,e,o;if(typeof t=="function"?(i=t,t="post"):t=t=="get"?"get":"post",r===!0||this.validate()){f=this.getFormData(!0);u=[];for(e in f)u.push(e+"="+encodeURIComponent(f[e]));o=function(n){i&&i.call(this,n,n.xmlDoc.responseText)};t=="get"?window.dhx4.ajax.get(n+(n.indexOf("?")==-1?"?":"&")+u.join("&"),o):window.dhx4.ajax.post(n,u.join("&"),o)}};dhtmlXForm.prototype.save=function(){};dhtmlXForm.prototype.dummy=function(){};dhtmlXForm.prototype._changeFormId=function(n,t){this.formId=t};dhtmlXForm.prototype._dp_init=function(n){n._methods=["dummy","dummy","_changeFormId","dummy"];n._getRowData=function(n){var t=this.obj.getFormData(!0);return t[this.action_param]=this.obj.getUserData(n,this.action_param),t};n._clearUpdateFlag=function(){};n.attachEvent("onAfterUpdate",function(n,t,i,r){return(t=="inserted"||t=="updated"||t=="error"||t=="invalid")&&this.obj.resetDataProcessor("updated"),(t=="inserted"||t=="updated")&&(this.obj._last_load_data=this.obj.getFormData(!0)),this.obj.callEvent("onAfterSave",[this.obj.formId,r]),!0});n.autoUpdate=!1;n.setTransactionMode("POST",!0);this.dp=n;this.formId=(new Date).valueOf();this.resetDataProcessor("inserted");this.save=function(){this.callEvent("onBeforeSave",[this.formId,this.getFormData()])&&this.validate()&&n.sendData()}};dhtmlXForm.prototype.resetDataProcessor=function(n){this.dp&&(this.dp.updatedRows=[],this.dp._in_progress=[],this.dp.setUpdated(this.formId,!0,n))};dhtmlXForm.prototype._ccActivate=function(n,t,i){this._formLS||(this._formLS={});this._formLS[n]||(this._formLS[n]={input:t,value:i});this._ccActive||(this._ccActive=!0,this._ccDo());t=null};dhtmlXForm.prototype._ccDeactivate=function(n){this._ccTm&&window.clearTimeout(this._ccTm);this._ccActive=!1;this._formLS!=null&&this._formLS[n]!=null&&(this._formLS[n].input=null,this._formLS[n]=null,delete this._formLS[n])};dhtmlXForm.prototype._ccDo=function(){var i,n,t,r;this._ccTm&&window.clearTimeout(this._ccTm);for(i in this._formLS)n=this._formLS[i].input,String(n.tagName).toLowerCase()=="select"?(t="",n.selectedIndex>=0&&n.selectedIndex<n.options.length&&(t=n.options[n.selectedIndex].value)):t=n.value,t!=this._formLS[i].value&&(this._formLS[i].value=t,this.callEvent("onInputChange",[n._idd,t,this])),n=null;this._ccActive&&(r=this,this._ccTm=window.setTimeout(function(){r._ccDo();r=null},100))};dhtmlXForm.prototype._ccReload=function(n,t){this._formLS&&this._formLS[n]&&(this._formLS[n].value=t)};dhtmlXForm.prototype._checkDim=function(n,t){var i=document.createElement("DIV"),r,u;i.className="dhxform_obj_"+this.skin;i.style.cssText+=dhx4.isIE6==!0?"visibility:hidden;":"position:absolute;left:-2000px;top:-1000px;";document.body.appendChild(i);r=n.parentNode;u=n.nextSibling;i.appendChild(n);var f=parseInt(t.style.width),e=dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?t.offsetWidth:t.clientWidth,o=e-f;return u!=null?r.insertBefore(n,u):r.appendChild(n),i.parentNode.removeChild(i),r=u=i=n=t=null,o},function(){var n=["ftype","name","value","label","check","checked","disabled","text","rows","select","selected","width","style","className","labelWidth","labelHeight","labelLeft","labelTop","inputWidth","inputHeight","inputLeft","inputTop","position","size"];dhtmlXForm.prototype.loadStructHTML=function(t){var t=typeof t=="string"?document.getElementById(t):t;this.loadStruct(this._ulToObject(t,n))};dhtmlXForm.prototype._autoload=function(){for(var f,e,r,u=document.getElementsByTagName("UL"),i=[],t=0;t<u.length;t++)u[t].className=="dhtmlxForm"&&(f=document.createElement("DIV"),i[i.length]={nodeUL:u[t],nodeForm:f,data:dhtmlXForm.prototype._ulToObject(u[t],n),name:u[t].getAttribute("name")||null});for(t=0;t<i.length;t++)i[t].nodeUL.parentNode.insertBefore(i[t].nodeForm,i[t].nodeUL),e=new dhtmlXForm(i[t].nodeForm,i[t].data),i[t].name!==null&&(window[i[t].name]=e),r=i[t].nodeUL.getAttribute("oninit")||null,i[t].nodeUL.parentNode.removeChild(i[t].nodeUL),i[t].nodeUL=null,i[t].nodeForm=null,i[t].data=null,i[t]=null,r&&(typeof r=="function"?r():typeof window[r]=="function"&&window[r]());typeof addEventListener=="function"?window.removeEventListener("load",dhtmlXForm.prototype._autoload,!1):window.detachEvent("onload",dhtmlXForm.prototype._autoload)};typeof addEventListener=="function"?window.addEventListener("load",dhtmlXForm.prototype._autoload,!1):window.attachEvent("onload",dhtmlXForm.prototype._autoload)}();typeof dhtmlXCellObject!="undefined"&&(dhtmlXCellObject.prototype.attachForm=function(n){this.callEvent("_onBeforeContentAttach",["form"]);var t=document.createElement("DIV");return t.style.width="100%",t.style.height="100%",t.style.position="relative",window.dhtmlx&&dhtmlx.$customScroll?dhtmlx.CustomScroll.enable(t):t.style.overflow="auto",this._attachObject(t),this.dataType="form",this.dataObj=new dhtmlXForm(t,n,this.conf.skin),t=null,this.callEvent("_onContentAttach",[]),this.dataObj});dhtmlXForm.prototype.items.combo={render:function(n,t){var i,r;return n._type="combo",n._enabled=!0,n._value=null,n._newValue=null,i=n.getForm().skin,typeof t.inputWidth!="undefined"&&i=="material"&&String(t.inputWidth).match(/^\d*$/)!=null&&(t.inputWidth=parseInt(t.inputWidth)+2),this.doAddLabel(n,t),this.doAddInput(n,t,"SELECT",null,!0,!0,"dhxform_select"),this.doAttachEvents(n),this.doLoadOpts(n,t),n.onselectstart=function(){return!0},n.childNodes[n._ll?1:0].childNodes[0].setAttribute("mode",t.comboType||""),t.comboImagePath&&n.childNodes[n._ll?1:0].childNodes[0].setAttribute("imagePath",t.comboImagePath),t.comboDefaultImage&&n.childNodes[n._ll?1:0].childNodes[0].setAttribute("defaultImage",t.comboDefaultImage),t.comboDefaultImageDis&&n.childNodes[n._ll?1:0].childNodes[0].setAttribute("defaultImageDis",t.comboDefaultImageDis),n._combo=new dhtmlXComboFromSelect(n.childNodes[n._ll?1:0].childNodes[0]),n._combo.setSkin(i),n._combo._currentComboValue=n._combo.getSelectedValue(),n._combo.getInput().id=t.uid,i=="material"&&(n._combo.list.className+=" dhxform_obj_"+i),r=this,n._combo.attachEvent("onChange",function(){r.doOnChange(this)}),t.connector&&this.doLoadOptsConnector(n,t.connector),t.filtering?n._combo.enableFilteringMode(!0):t.serverFiltering&&n._combo.enableFilteringMode(!0,t.serverFiltering,t.filterCache,t.filterSubLoad),t.readonly==!0&&this.setReadonly(n,!0),t.hidden==!0&&this.hide(n),t.style&&(n._combo.DOMelem_input.style.cssText+=t.style),n._combo.attachEvent("onFocus",function(){var t=this.cont.parentNode.parentNode,n=t.getForm();(n.skin=="dhx_terrace"||n.skin=="material")&&this.cont.className.search(/combo_in_focus/)<0&&(this.cont.className+=" combo_in_focus");n.callEvent("onFocus",[t._idd]);n=t=null}),n._combo.attachEvent("onBlur",function(){var t=this.cont.parentNode.parentNode,n=t.getForm();(n.skin=="dhx_terrace"||n.skin=="material")&&this.cont.className.search(/combo_in_focus/)>=0&&(this.cont.className=this.cont.className.replace(/\s{0,}combo_in_focus/gi,""));n.callEvent("onBlur",[t._idd]);n=t=null}),this},destruct:function(n){n.childNodes[n._ll?1:0].childNodes[0].onchange=null;n._combo._currentComboValue=null;n._combo.unload();n._combo=null;n._apiChange=null;this.d2(n);n=null},doAttachEvents:function(n){var t=this;n.childNodes[n._ll?1:0].childNodes[0].onchange=function(){t.doOnChange(this);t.doValidate(this.DOMParent.parentNode.parentNode)}},doValidate:function(n){n.getForm().hot_validate&&this._validate(n)},doOnChange:function(n){var t=n.base.parentNode.parentNode.parentNode;if(!t._apiChange){if(n._newComboValue=n.getSelectedValue(),n._newComboValue!=n._currentComboValue){if(t.checkEvent("onBeforeChange")&&t.callEvent("onBeforeChange",[t._idd,n._currentComboValue,n._newComboValue])!==!0)return window.setTimeout(function(){n.setComboValue(n._currentComboValue)},1),!1;n._currentComboValue=n._newComboValue;t.callEvent("onChange",[t._idd,n._currentComboValue])}t._autoCheck()}},doLoadOptsConnector:function(n,t){var r=this,i=n;n._connector_working=!0;n._apiChange=!0;n._combo.load(t,function(){i.callEvent("onOptionsLoaded",[i._idd]);i._connector_working=!1;i._connector_value!=null&&(r.setValue(i,i._connector_value),i._connector_value=null);i._apiChange=!1;r=i=null})},enable:function(n){String(n.className).search("disabled")>=0&&(n.className=String(n.className).replace(/disabled/gi,""));n._enabled=!0;n._combo.enable()},disable:function(n){String(n.className).search("disabled")<0&&(n.className+=" disabled");n._enabled=!1;n._combo.disable()},getCombo:function(n){return n._combo},setValue:function(n,t){if(n._connector_working){n._connector_value=t;return}n._apiChange=!0;n._combo.setComboValue(t);n._combo._currentComboValue=n._combo.getActualValue();n._apiChange=!1},getValue:function(n){return n._combo.getActualValue()},setWidth:function(n,t){n.childNodes[n._ll?1:0].childNodes[0].style.width=t+"px"},setReadonly:function(n,t){n._combo&&(n._combo_ro=t,n._combo.readonly(n._combo_ro))},isReadonly:function(n){return n._combo_ro||!1},setFocus:function(n){n._enabled&&n._combo.setFocus()},_setCss:function(n,t,i){n._combo.setFontSize(i,i)}},function(){for(var n in{doAddLabel:1,doAddInput:1,doLoadOpts:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,_checkNoteWidth:1})dhtmlXForm.prototype.items.combo[n]=dhtmlXForm.prototype.items.select[n]}();dhtmlXForm.prototype.items.combo.d2=dhtmlXForm.prototype.items.select.destruct;dhtmlXForm.prototype.getCombo=function(n){return this.doWithItem(n,"getCombo")};dhtmlXForm.prototype.items.calendar={render:function(n,t){var r=this,i,u,f;return n._type="calendar",n._enabled=!0,i=navigator.userAgent,u=i.indexOf("MSIE 6.0")>=0||i.indexOf("MSIE 7.0")>=0||i.indexOf("MSIE 8.0")>=0,this.doAddLabel(n,t),this.doAddInput(n,t,"INPUT","TEXT",!0,!0,"dhxform_textarea calendar"),this.doAttachChangeLS(n),u&&(n.childNodes[n._ll?1:0].childNodes[0].onfocus2=n.childNodes[n._ll?1:0].childNodes[0].onfocus,n.childNodes[n._ll?1:0].childNodes[0].onfocus=function(){if(this._skipOnFocus==!0){this._skipOnFocus=!1;return}this.onfocus2.apply(this,arguments)}),n.childNodes[n._ll?1:0].childNodes[0]._idd=n._idd,n.childNodes[n._ll?1:0].childNodes[0].onblur=function(){var n=this.parentNode.parentNode,t;if(n._c.base._formMouseDown)return n._c.base._formMouseDown=!1,this._skipOnFocus=!0,this.focus(),this.value=this.value,n=null,!0;t=n.getForm();t._ccDeactivate(n._idd);r.checkEnteredValue(this.parentNode.parentNode);t.live_validate&&r._validate(n);t.callEvent("onBlur",[n._idd]);n._c.isVisible()||(n._tempValue=null);t=n=null},n._f=t.dateFormat||null,n._f0=t.serverDateFormat||n._f,f=n.getForm(),n._c=new dhtmlXCalendarObject(n.childNodes[n._ll?1:0].childNodes[0],t.skin||f.skin||"dhx_skyblue"),n._c._nullInInput=!0,n._c.enableListener(n.childNodes[n._ll?1:0].childNodes[0]),n._f!=null&&n._c.setDateFormat(n._f),window.dhx4.s2b(t.enableTime)||n._c.hideTime(),window.dhx4.s2b(t.enableTodayButton)&&n._c.showToday(),window.dhx4.s2b(t.showWeekNumbers)&&n._c.showWeekNumbers(),isNaN(t.weekStart)||n._c.setWeekStartDay(t.weekStart),typeof t.calendarPosition!="undefined"&&n._c.setPosition(t.calendarPosition),t.minutesInterval!=null&&n._c.setMinutesInterval(t.minutesInterval),n._c._itemIdd=n._idd,n._c.attachEvent("onBeforeChange",function(t){if(n._value!=t){if(n.checkEvent("onBeforeChange")&&n.callEvent("onBeforeChange",[n._idd,n._value,t])!==!0)return!1;n._tempValue=n._value=t;r.setValue(n,t,!1);n.callEvent("onChange",[this._itemIdd,n._value])}return!0}),n._c.attachEvent("onClick",function(){n._tempValue=null}),n._c.attachEvent("onHide",function(){n._tempValue=null}),u&&(n._c.base.onmousedown=function(){return this._formMouseDown=!0,!1}),this.setValue(n,t.value),f=null,this},getCalendar:function(n){return n._c},setSkin:function(n,t){n._c.setSkin(t)},setValue:function(n,t,i){t&&t!=null&&typeof t!="undefined"&&t!=""?(n._value=t instanceof Date?t:n._c._strToDate(t,n._f0||n._c._dateFormat),n.childNodes[n._ll?1:0].childNodes[0].value=n._c._dateToStr(n._value,n._f||n._c._dateFormat)):(n._value=null,n.childNodes[n._ll?1:0].childNodes[0].value="");i!==!1&&n._c.setDate(n._value)},getValue:function(n,t){var i=n._tempValue||n._c.getDate();return t===!0&&i==null?"":t===!0?n._c._dateToStr(i,n._f0||n._c._dateFormat):i},setDateFormat:function(n,t,i){n._f=t;n._f0=i||n._f;n._c.setDateFormat(n._f);this.setValue(n,this.getValue(n))},destruct:function(n){n._c.disableListener(n.childNodes[n._ll?1:0].childNodes[0]);n._c.unload();n._c=null;try{delete n._c}catch(t){}n._f=null;try{delete n._f}catch(t){}n._f0=null;try{delete n._f0}catch(t){}n.childNodes[n._ll?1:0].childNodes[0]._idd=null;n.childNodes[n._ll?1:0].childNodes[0].onblur=null;this.d2(n);n=null},checkEnteredValue:function(n){this.setValue(n,n._c.getDate())}},function(){for(var n in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1})dhtmlXForm.prototype.items.calendar[n]=dhtmlXForm.prototype.items.input[n]}();dhtmlXForm.prototype.items.calendar.doAttachChangeLS=dhtmlXForm.prototype.items.select.doAttachChangeLS;dhtmlXForm.prototype.items.calendar.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.getCalendar=function(n){return this.doWithItem(n,"getCalendar")};dhtmlXForm.prototype.setCalendarDateFormat=function(n,t,i){this.doWithItem(n,"setDateFormat",t,i)};dhtmlXForm.prototype.items.btn2state={setChecked:function(n,t){n._checked=t===!0?!0:!1;n.childNodes[n._ll?1:0].lastChild.className="dhxform_img "+n._cssName+"_"+(n._checked?"1":"0");this.doCheckValue(n)}},function(){for(var n in dhtmlXForm.prototype.items.checkbox)dhtmlXForm.prototype.items.btn2state[n]||(dhtmlXForm.prototype.items.btn2state[n]=dhtmlXForm.prototype.items.checkbox[n])}();dhtmlXForm.prototype.items.btn2state.render2=dhtmlXForm.prototype.items.btn2state.render;dhtmlXForm.prototype.items.btn2state.render=function(n,t){return t._autoInputWidth=!1,this.render2(n,t),n._type="btn2state",n._cssName=typeof t.cssName=="undefined"?"btn2state":t.cssName,n._updateImgNode=function(){},n._doOnFocus=function(){n.getForm().callEvent("onFocus",[n._idd])},n._doOnBlur=function(){n.getForm().callEvent("onBlur",[n._idd])},n._doOnKeyUpDown=function(n,t){this.callEvent(n,[this.childNodes[this._ll?0:1].childNodes[0],t,this._idd])},this.setChecked(n,n._checked),this};dhtmlXForm.prototype.setFormData_btn2state=function(n,t){this[t==!0||parseInt(t)==1||t=="true"||t==this.getItemValue(n)?"checkItem":"uncheckItem"](n)};dhtmlXForm.prototype.getFormData_btn2state=function(n){return this.isItemChecked(n)?this.getItemValue(n):0};dhtmlXForm.prototype.items.colorpicker={colorpicker:{},render:function(n,t){var r=this,i;return n._type="colorpicker",n._enabled=!0,this.doAddLabel(n,t),this.doAddInput(n,t,"INPUT","TEXT",!0,!0,"dhxform_textarea"),n._value=t.value||"",n.childNodes[n._ll?1:0].childNodes[0].value=n._value,i={input:n.childNodes[n._ll?1:0].childNodes[0],custom_colors:window.dhx4.s2b(t.enableCustomColors)==!0,skin:n.getForm().skin},this.colorpicker[n._idd]=new dhtmlXColorPicker(i),this.colorpicker[n._idd]._nodes[0].valueColor=null,this.colorpicker[n._idd].base.className+=" dhtmlxcp_in_form",typeof t.customColors!="undefined"&&this.colorpicker[n._idd].setCustomColors(t.customColors),typeof t.cpPosition=="string"&&this.colorpicker[n._idd].setPosition(t.cpPosition),this.colorpicker[n._idd].attachEvent("onSelect",function(t){if(n._value!=t){if(n.checkEvent("onBeforeChange")&&n.callEvent("onBeforeChange",[n._idd,n._value,t])!==!0){n.childNodes[n._ll?1:0].childNodes[0].value=n._value;return}n._value=t;r.setValue(n,t);n.callEvent("onChange",[n._idd,n._value])}}),this.colorpicker[n._idd].attachEvent("onHide",function(){var t=n.childNodes[n._ll?1:0].childNodes[0];t.value!=n._value&&(t.value=n._value);t=null}),n.childNodes[n._ll?1:0].childNodes[0]._idd=n._idd,this},getColorPicker:function(n){return this.colorpicker[n._idd]},destruct:function(n){this.colorpicker[n._idd].unload&&this.colorpicker[n._idd].unload();this.colorpicker[n._idd]=null;try{delete this.colorpicker[n._idd]}catch(t){}n.childNodes[n._ll?1:0].childNodes[0]._idd=null;this.d2(n);n=null},setSkin:function(n,t){this.colorpicker[n._idd].setSkin(t)}},function(){for(var n in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setValue:1,getValue:1,updateValue:1,setFocus:1,getInput:1})dhtmlXForm.prototype.items.colorpicker[n]=dhtmlXForm.prototype.items.input[n]}();dhtmlXForm.prototype.items.colorpicker.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.getColorPicker=function(n){return this.doWithItem(n,"getColorPicker")};dhtmlXForm.prototype.items.container={render:function(n,t){return n._type="container",n._enabled=!0,this.doAddLabel(n,t),this.doAddInput(n,t,"DIV",null,!0,!0,"dhxform_container"),this},getContainer:function(n){return n.childNodes[n._ll?1:0].childNodes[0]},enable:function(n){n._enabled=!0;String(n.className).search("disabled")>=0&&(n.className=String(n.className).replace(/disabled/gi,""));n.callEvent("onEnable",[n._idd])},disable:function(n){n._enabled=!1;String(n.className).search("disabled")<0&&(n.className+=" disabled");n.callEvent("onDisable",[n._idd])},doAttachEvents:function(){},setValue:function(){},getValue:function(){return null}};dhtmlXForm.prototype.getContainer=function(n){return this.doWithItem(n,"getContainer")},function(){for(var n in dhtmlXForm.prototype.items.input)dhtmlXForm.prototype.items.container[n]||(dhtmlXForm.prototype.items.container[n]=dhtmlXForm.prototype.items.input[n])}();dhtmlXForm.prototype.items.editor={editor:{},render:function(n,t){var r=!isNaN(t.rows),i;return n._type="editor",n._enabled=!0,n._editor_id=n.getForm().idPrefix+n._idd,this.doAddLabel(n,t),this.doAddInput(n,t,"DIV",null,!0,!0,"dhxform_item_template"),n._value=t.value||"",i=this,this.editor[n._editor_id]=new dhtmlXEditor({parent:n.childNodes[n._ll?1:0].childNodes[0],content:n._value,iconsPath:t.iconsPath,toolbar:t.toolbar,skin:n.getForm().skin}),this.editor[n._editor_id].attachEvent("onAccess",function(t,r){var u;n.callEvent("_onBeforeEditorAccess",[]);_dhxForm_doClick(document.body,"click");t=="blur"?(i.doOnBlur(n,this),n.callEvent("onBlur",[n._idd]),{dhx_terrace:1,material:1}[n.getForm().skin]==1&&(u=n.childNodes[n._ll?1:0].className,u.indexOf("dhxeditor_focus")>=0&&(n.childNodes[n._ll?1:0].className=u.replace(/\s{0,}dhxeditor_focus/gi,"")))):(n.callEvent("onEditorAccess",[n._idd,t,r,this,n.getForm()]),n.callEvent("onFocus",[n._idd]),{dhx_terrace:1,material:1}[n.getForm().skin]==1&&(u=n.childNodes[n._ll?1:0].className,u.indexOf("dhxeditor_focus")==-1&&(n.childNodes[n._ll?1:0].className+=" dhxeditor_focus")))}),this.editor[n._editor_id].attachEvent("onToolbarClick",function(t){n.callEvent("onEditorToolbarClick",[n._idd,t,this,n.getForm()])}),t.readonly&&this.setReadonly(n,!0),n.childNodes[n._ll?0:1].childNodes[0].removeAttribute("for"),n.childNodes[n._ll?0:1].childNodes[0].onclick=function(){i.editor[n._editor_id]._focus()},this},doOnBlur:function(n,t){var i=t.getContent();if(n._value!=i){if(n.checkEvent("onBeforeChange")&&n.callEvent("onBeforeChange",[n._idd,n._value,i])!==!0){t.setContent(n._value);return}n._value=i;n.callEvent("onChange",[n._idd,i])}},setValue:function(n,t){n._value!=t&&(n._value=t,this.editor[n._editor_id].setContent(n._value))},getValue:function(n){return n._value=this.editor[n._editor_id].getContent(),n._value},enable:function(n){this.isEnabled(n)!=!0&&(this.editor[n._editor_id].setReadonly(!1),this.doEn(n))},disable:function(n){this.isEnabled(n)==!0&&(this.editor[n._editor_id].setReadonly(!0),this.doDis(n))},setReadonly:function(n,t){this.editor[n._editor_id].setReadonly(t)},getEditor:function(n){return this.editor[n._editor_id]||null},destruct:function(n){n.childNodes[n._ll?0:1].childNodes[0].onclick=null;this.editor[n._editor_id].unload();this.editor[n._editor_id]=null;this.d2(n);n=null},setFocus:function(n){this.editor[n._editor_id]._focus()}},function(){for(var n in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,setWidth:1,isEnabled:1})dhtmlXForm.prototype.items.editor[n]=dhtmlXForm.prototype.items.template[n]}();dhtmlXForm.prototype.items.editor.d2=dhtmlXForm.prototype.items.select.destruct;dhtmlXForm.prototype.items.editor.doEn=dhtmlXForm.prototype.items.select.enable;dhtmlXForm.prototype.items.editor.doDis=dhtmlXForm.prototype.items.select.disable;dhtmlXForm.prototype.getEditor=function(n){return this.doWithItem(n,"getEditor")};dhtmlXForm.prototype.items.image={_dimFix:!0,render:function(n,t){var i,f,r,u;return n._type="image",n._enabled=!0,n._fr_name="dhxform_image_"+window.dhx4.newId(),n._url=typeof t.url=="undefined"||t.url==null?"":t.url,t.inputWidth=="auto"&&(t.inputWidth=120),t.inputHeight=="auto"&&(t.inputHeight=t.inputWidth),this.doAddLabel(n,t),this.doAddInput(n,t,"DIV",null,!0,!0,"dhxform_image"),i=n.childNodes[n._ll?1:0].childNodes[0],i.style.height=parseInt(i.style.height)-dhtmlXForm.prototype.items[this.t]._dim+"px",f=typeof t.imageWidth!="undefined"?parseInt(t.imageWidth):t.inputWidth,r=typeof t.imageHeight!="undefined"?parseInt(t.imageHeight):t.inputHeight,r=="auto"&&(r=f),n._dim={mw:t.inputWidth-this._dim,mh:t.inputHeight-this._dim,w:f,h:r},i.innerHTML="<img class='dhxform_image_img' border='0' style='visibility:hidden;'><iframe name='"+n._fr_name+"' style='position: absolute; width:0px; height:0px; top:-10px; left:-10px;' frameBorder='0' border='0'><\/iframe><div class='dhxform_image_wrap'><form action='"+n._url+"' method='POST' enctype='multipart/form-data' target='"+n._fr_name+"' class='dhxform_image_form'><input type='hidden' name='action' value='uploadImage'><input type='hidden' name='itemId' value='"+n._idd+"'><input type='file' name='file' class='dhxform_image_input'><\/form>",this.adjustImage(n),i.childNodes[2].firstChild.lastChild.onchange=function(){n._is_uploading=!0;this.parentNode.submit();this.parentNode.parentNode.className="dhxform_image_wrap dhxform_image_in_progress";this.value=""},u=this,window.navigator.userAgent.indexOf("MSIE")>=0?i.childNodes[1].onreadystatechange=function(){this.readyState=="complete"&&u.doOnUpload(n)}:i.childNodes[1].onload=function(){u.doOnUpload(n)},this._moreClear=function(){u=null},this.setValue(n,t.value||""),i=null,this},destruct:function(n){var t=n.childNodes[n._ll?1:0].childNodes[0];t.childNodes[2].firstChild.lastChild.onchange=null;t.childNodes[1].onreadystatechange=null;t.childNodes[1].onload=null;this._moreClear();this.d2(n);n=null},doAttachEvents:function(){},setValue:function(n,t){var u,r,i;n._value=t==null?"":t;u=n._url+(n._url.indexOf("?")>=0?"&":"?")+"action=loadImage&itemId="+encodeURIComponent(n._idd)+"&itemValue="+encodeURIComponent(n._value)+window.dhx4.ajax._dhxr("&");r=n.childNodes[n._ll?1:0].childNodes[0].firstChild;r.nextSibling.tagName.toLowerCase()=="img"?r.nextSibling.src=u:(i=document.createElement("IMG"),i.className="dhxform_image_img",i.style.visibility="hidden",i.onload=function(){this.style.visibility="visible";this.parentNode.removeChild(this.nextSibling);this.onload=this.onerror=null},i.onerror=function(){this.onload.apply(this,arguments);this.style.visibility="hidden"},r.parentNode.insertBefore(i,r),i.src=u,i=null,this.adjustImage(n));r=null},getValue:function(n){return n._value},doOnUpload:function(n){if(n._is_uploading==!0){var i=n.childNodes[n._ll?1:0].childNodes[0].lastChild.previousSibling,t=dhx4.s2j(i.contentWindow.document.body.innerHTML);typeof t=="object"&&t!=null&&t.state==!0&&t.itemId==n._idd?(this.setValue(n,t.itemValue,!0),n.getForm().callEvent("onImageUploadSuccess",[t.itemId,t.itemValue,t.extra])):n.getForm().callEvent("onImageUploadFail",[n._idd,t?t.extra:null]);t=i=null;window.setTimeout(function(){n.childNodes[n._ll?1:0].childNodes[0].lastChild.className="dhxform_image_wrap";n._is_uploading=!1},50)}},adjustImage:function(n){var t=n.childNodes[n._ll?1:0].childNodes[0].firstChild,i=Math.min(n._dim.mw,n._dim.w),r=Math.min(n._dim.mh,n._dim.h);t.style.width=i+"px";t.style.height=r+"px";t.style.marginLeft=Math.max(0,Math.round(n._dim.mw/2-i/2))+"px";t.style.marginTop=Math.max(0,Math.round(n._dim.mh/2-r/2))+"px";t=n=null}},function(){for(var n in dhtmlXForm.prototype.items.input)dhtmlXForm.prototype.items.image[n]||(dhtmlXForm.prototype.items.image[n]=dhtmlXForm.prototype.items.input[n])}();dhtmlXForm.prototype.items.image.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.setFormData_image=function(n,t){this.setItemValue(n,t)};dhtmlXForm.prototype.getFormData_image=function(n){return this.getItemValue(n)};dhtmlXForm.prototype.items.upload={render:function(n,t){n._type="up";n._enabled=!0;n._checked=!0;n.className=t.position+(typeof t.className=="string"?" "+t.className:"");var i=document.createElement("DIV");return n.appendChild(i),isNaN(t.inputLeft)||(n.style.left=parseInt(t.inputLeft)+"px"),isNaN(t.inputTop)||(n.style.top=parseInt(t.inputTop)+"px"),t.inputWidth!="auto"&&(isNaN(t.inputWidth)||(i.style.width=parseInt(t.inputWidth)+"px")),n._uploader=new dhtmlXFileUploader(i,t.swfPath||"",t.swfUrl||"",t.mode||null,t.swfLogs,t.slXap||"",t.slUrl||"",t.slLogs||"",t.multiple),n._uploader.setURL(t.url||""),n._uploader.callEvent=n.callEvent,typeof t.autoStart!="undefined"&&n._uploader.setAutoStart(t.autoStart),typeof t.autoRemove!="undefined"&&n._uploader.setAutoRemove(t.autoRemove),typeof t.titleScreen!="undefined"&&n._uploader.enableTitleScreen(t.titleScreen),typeof t.titleText!="undefined"&&n._uploader.setTitleText(t.titleText),t.hidden==!0&&this.hide(n),t.disabled==!0&&this.userDisable(n),t.inputHeight=="auto"||parseInt(t.inputHeight)==NaN||(n._uploader.p_files.style.height=parseInt(t.inputHeight)+"px"),this},destruct:function(n){for(this.doUnloadNestedLists(n),n._uploader.callEvent=function(){return!0},n._uploader.unload(),n._uploader.callEvent=null,n._uploader=null,n._checked=null,n._enabled=null,n._idd=null,n._type=null,n.onselectstart=null,n._autoCheck=null,n.callEvent=null,n.checkEvent=null,n.getForm=null;n.childNodes.length>0;)n.removeChild(n.childNodes[0]);n.parentNode.removeChild(n);n=null},setText:function(){},getText:function(){},enable:function(n){n._enabled=!0;String(n.className).search("disabled")>=0&&(n.className=String(n.className).replace(/disabled/gi,""));n._uploader.enable()},disable:function(n){n._enabled=!1;String(n.className).search("disabled")<0&&(n.className+=" disabled");n._uploader.disable()},setWidth:function(n,t){n.childNodes[0].style.width=t+"px";n._width=t},getWidth:function(n){return n._width||parseInt(n.childNodes[0].style.width)},setValue:function(n){n._uploader.clear()},getValue:function(n){var r=n._uploader.getData(),t={},i=0;for(var u in r)t[n._idd+"_r_"+i]=r[u].realName,t[n._idd+"_s_"+i]=r[u].serverName,i++;return t[n._idd+"_count"]=i,t},getUploader:function(n){return n._uploader},getStatus:function(n){return n._uploader.getStatus()}},function(){for(var n in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.upload[n]=dhtmlXForm.prototype.items.checkbox[n]}();dhtmlXForm.prototype.setFormData_upload=function(n){this.doWithItem(n,"setValue")};dhtmlXForm.prototype.getUploader=function(n){return this.doWithItem(n,"getUploader")};dhtmlXForm.prototype.getUploaderStatus=function(n){return this.doWithItem(n,"getStatus")};dhtmlXFileUploader.prototype.html5=function(){};dhtmlXFileUploader.prototype.html5.prototype={_initEngine:function(){var t=this,n;this.buttons.browse.onclick=function(){t._enabled&&t.f.click()};this._progress_type="percentage";n=window.navigator.userAgent;n.match(/Windows/gi)!=null&&n.match(/AppleWebKit/gi)!=null&&n.match(/Safari/gi)!=null&&(n.match(/Version\/5\.1\.5/gi)&&(this._upload_mp=!1),n.match(/Version\/5\.1[^\.\d{1,}]/gi)&&(this._upload_dnd=!1),n.match(/Version\/5\.1\.1/gi)&&(this._upload_mp=!1,this._upload_dnd=!1),n.match(/Version\/5\.1\.2/gi)&&(this._upload_dnd=!1),n.match(/Version\/5\.1\.7/gi)&&(this._upload_mp=!1));this._addFileInput();this._upload_dnd?(this.p.ondragenter=function(n){n.dataTransfer&&(n.stopPropagation(),n.preventDefault())},this.p.ondragover=function(n){n.dataTransfer&&(n.stopPropagation(),n.preventDefault())},this.p.ondrop=function(n){n.dataTransfer&&(n.stopPropagation(),n.preventDefault(),t._enabled&&t._parseFilesInInput(n.dataTransfer.files))},this._titleText="Drag-n-Drop files here or<br>click to select files for upload."):this._titleText="Click to select files for upload."},_addFileInput:function(){this.f!=null&&(this.f.onchange=null,this.f.parentNode.removeChild(this.f),this.f=null);var n=this;this.f=document.createElement("INPUT");this.f.type="file";this._upload_mp&&(this.f.multiple="1");this.f.className="dhx_uploader_input";this.p_controls.appendChild(this.f);this.f.onchange=function(){n._parseFilesInInput(this.files);window.dhx4.isOpera?n._addFileInput():this.value=""}},_doUploadFile:function(n){var t=this,i;this._loader||(this._loader=new XMLHttpRequest,this._loader.upload.onprogress=function(n){t._files[this._idd].state=="uploading"&&t._updateFileInList(this._idd,"uploading",Math.round(n.loaded*100/n.total))},this._loader.onload=function(){var n=dhx4.s2j(this.responseText);typeof n=="object"&&n!=null&&typeof n.state!="undefined"&&n.state==!0?(t._onUploadSuccess(this.upload._idd,n.name,null,n.extra),n=null):t._onUploadFail(this.upload._idd,n!=null&&n.extra!=null?n.extra:null)},this._loader.onerror=function(){t._onUploadFail(this.upload._idd)},this._loader.onabort=function(){t._onUploadAbort(this.upload._idd)});this._loader.upload._idd=n;i=new FormData;i.append("file",this._files[n].file);this.callEvent("onBeforeFileUpload",["html5",this.loader,i])&&(this._loader.open("POST",this._url+(String(this._url).indexOf("?")<0?"?":"&")+"mode=html5"+window.dhx4.ajax._dhxr("&"),!0),this._loader.setRequestHeader("X-Requested-With","XMLHttpRequest"),this._loader.send(i))},_uploadStop:function(){this._uploading&&this._loader&&this._loader.abort()},_parseFilesInInput:function(n){for(var t=0;t<n.length;t++)this._addFileToQueue(n[t])},_addFileToQueue:function(n){if(this._beforeAddFileToList(n.name,n.size)){var t=n._idd||window.dhx4.newId();this._files[t]={file:n,name:n.name,size:n.size,state:"added"};this._addFileToList(t,n.name,n.size,"added",0);this._autoStart&&!this._uploading&&this._uploadStart(!0)}},_removeFileFromQueue:function(n){var t,i,r;this._files[n]&&(t=this._files[n].name,i=this._data!=null&&this._data[n]!=null?this._data[n].serverName:null,this.callEvent("onBeforeFileRemove",[t,i])===!0)&&(r=!1,this._uploading&&n==this._loader.upload._idd&&this._files[n].state=="uploading"&&(this._uploadStop(),r=!0),this._files[n].file=null,this._files[n].name=null,this._files[n].size=null,this._files[n].state=null,this._files[n]=null,delete this._files[n],this._removeFileFromList(n),this.callEvent("onFileRemove",[t,i]),r&&this._uploadStart())},_unloadEngine:function(){this.buttons.browse.onclick=null;this.f.onchange=null;this.f.parentNode.removeChild(this.f);this.f=null;this.p.ondragenter=null;this.p.ondragover=null;this.p.ondrop=null;this._loader&&(this._loader.upload.onprogress=null,this._loader.onload=null,this._loader.onerror=null,this._loader.onabort=null,this._loader.upload._idd=null,this._loader=null);this._initEngine=null;this._doUploadFile=null;this._uploadStop=null;this._parseFilesInInput=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.html4=function(){};dhtmlXFileUploader.prototype.html4.prototype={_initEngine:function(){this._addForm();this._progress_type="loader";this._titleText="Click button<br>to select files for upload."},_addForm:function(){var t=this,i=window.dhx4.newId(),n;this.k||(this.k=document.createElement("DIV"),this.k.className="dhx_file_form_cont",this.buttons.browse.appendChild(this.k),this.fr_name="dhx_file_"+window.dhx4.newId(),this.k.innerHTML='<iframe name="'+this.fr_name+'" style="height:0px;width:0px;" frameBorder="0"><\/iframe>',this.fr=this.k.firstChild,window.navigator.userAgent.indexOf("MSIE")>=0?this.fr.onreadystatechange=function(){this.readyState=="complete"&&t._onLoad()}:this.fr.onload=function(){t._onLoad()});n=document.createElement("DIV");n.innerHTML="<form method='POST' enctype='multipart/form-data' target='"+this.fr_name+"' class='dhx_file_form' name='dhx_file_form_"+window.dhx4.newId()+"'><input type='hidden' name='mode' value='html4'><input type='hidden' name='uid' value='"+i+"'><input type='file' name='file' class='dhx_file_input'><\/form>";this.k.appendChild(n);n.firstChild.lastChild._idd=i;n.firstChild.lastChild.onchange=function(){t._beforeAddFileToList(this.value,null)&&(t._addFileToQueue(this),this.onchange=null,this.parentNode.parentNode.style.display="none",t._addForm())};n=null},_onLoad:function(){if(this._uploading){var n=dhx4.s2j(this.fr.contentWindow.document.body.innerHTML);if(typeof n=="object"&&n!=null&&typeof n.state!="undefined"){if(n.state=="cancelled"){this._onUploadAbort(this.fr._idd);n=null;return}if(n.state==!0){typeof n.size=="undefined"||isNaN(n.size)||(this._files[this.fr._idd].size=n.size);this._onUploadSuccess(this.fr._idd,n.name,null,n.extra);n=null;return}}this._onUploadFail(this.fr._idd,n!=null&&n.extra!=null?n.extra:null)}},_addFileToQueue:function(n){var t=n.value.match(/[^\\\/]*$/g);t=t[0]!=null?t[0]:n.value;this._files[n._idd]={name:t,form:n.parentNode,node:n.parentNode.parentNode,input:n,state:"added"};this._addFileToList(n._idd,n.value,!1,"added",0);this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(n){var t=this._files[n].name,i=this._data!=null&&this._data[n]!=null?this._data[n].serverName:null;this.callEvent("onBeforeFileRemove",[t,i])===!0&&(this._files[n].input.onchange=null,this._files[n].form.removeChild(this._files[n].input),this._files[n].node.removeChild(this._files[n].form),this._files[n].node.parentNode.removeChild(this._files[n].node),this._files[n].input=null,this._files[n].name=null,this._files[n].form=null,this._files[n].node=null,this._files[n].size=null,this._files[n].state=null,this._files[n]=null,delete this._files[n],this._removeFileFromList(n),this.callEvent("onFileRemove",[t,i]))},_doUploadFile:function(n){this.fr._idd=n;this._files[n].form.action=this._url;this._files[n].form.submit()},_uploadStop:function(){this._uploading&&(this.fr.contentWindow.location.href=this._url+(this._url.indexOf("?")<0?"?":"&")+"mode=html4&action=cancel"+window.dhx4.ajax._dhxr("&"))},_unloadEngine:function(){this.k&&(this.fr_name=null,this.fr.onreadystatechange=null,this.fr.onload=null,this.fr.parentNode.removeChild(this.fr),this.fr=null,this.k.firstChild.firstChild.lastChild.onchange=null,this.k.parentNode.removeChild(this.k),this.k=null);this._initEngine=null;this._addForm=null;this._onLoad=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.flash=function(){};dhtmlXFileUploader.prototype.flash.prototype={_initEngine:function(){var t,n;window.dhtmlXSWFObjectsPull==null&&(window.dhtmlXSWFObjectsPull={items:{},callEvent:function(n,t,i){return window.dhtmlXSWFObjectsPull.items[n].uploader[t].apply(window.dhtmlXSWFObjectsPull.items[n].uploader,i)}});t=this;this._swf_obj_id="dhtmlXFileUploaderSWFObject_"+window.dhx4.newId();this._swf_file_url=this._swf_file_url+window.dhx4.ajax._dhxr(this._swf_file_url);this.buttons.browse.innerHTML="<div id='"+this._swf_obj_id+"' style='width:100%;height:100%;'><\/div>";swfobject.embedSWF(this._swf_file_url,this._swf_obj_id,"100%","100%","9",null,{ID:this._swf_obj_id,enableLogs:this._swf_logs},{wmode:"transparent"});n=swfobject.getFlashPlayerVersion();this._titleText="Engine successfuly inited<br>Flash Player: "+n.major+"."+n.minor+"."+n.release;this._progress_type="percentage";window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]={id:this._swf_obj_id,uploader:this}},_beforeAddFileToQueue:function(n,t){return this.callEvent("onBeforeFileAdd",[n,t])===!0},_addFileToQueue:function(n,t,i){if(window.dhx4.isIE){var r=document.createElement("INPUT");r.type="TEXT";r.style.position="absolute";r.style.left="0px";r.style.top=window.dhx4.absTop(this.buttons.browse)+"px";r.style.width="10px";document.body.appendChild(r);r.focus();document.body.removeChild(r);r=null}this._files[n]={name:t,size:i,state:"added"};this._addFileToList(n,t,i,"added",0);this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(n){var t,i,r;this._files[n]&&(t=this._files[n].name,i=this._data!=null&&this._data[n]!=null?this._data[n].serverName:null,this.callEvent("onBeforeFileRemove",[t,i])===!0)&&(r=!1,this._uploading&&this._files[n].state=="uploading"&&(this._uploadStop(),r=!0),swfobject.getObjectById(this._swf_obj_id).removeFileById(n),this._files[n].name=null,this._files[n].size=null,this._files[n].state=null,this._files[n]=null,delete this._files[n],this._removeFileFromList(n),this.callEvent("onFileRemove",[t,i]),r&&this._uploadStart())},_doUploadFile:function(n){swfobject.getObjectById(this._swf_obj_id).upload(n,this._swf_upolad_url)},_uploadStop:function(){for(var n in this._files)this._files[n].state=="uploading"&&swfobject.getObjectById(this._swf_obj_id).uploadStop(n)},_unloadEngine:function(){window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]&&(window.dhtmlXSWFObjectsPull.items[this._swf_obj_id].id=null,window.dhtmlXSWFObjectsPull.items[this._swf_obj_id].uploader=null,window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]=null,delete window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]);this._swf_obj_id=null;this._initEngine=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.sl=function(){};dhtmlXFileUploader.prototype.sl.prototype={_initEngine:function(){typeof this._sl_v=="undefined"&&(this._sl_v=this.getSLVersion());window.dhtmlXFileUploaderSLObjects||(window.dhtmlXFileUploaderSLObjects={items:{},callEvent:function(n,t,i){window.dhtmlXFileUploaderSLObjects.items[n].uploader[t].apply(window.dhtmlXFileUploaderSLObjects.items[n].uploader,i)}});this._sl_obj_id="dhtmlXFileUploaderSLObject_"+window.dhx4.newId();this._sl_v!=!1?(this._titleText="Engine successfuly inited<br>Silverlight version: "+this._sl_v[0]+"."+this._sl_v[1],this.buttons.browse.innerHTML='<div style="width:100%;height:100%;"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%" id="'+this._sl_obj_id+'"><param name="source" value="'+this._sl_xap+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="initParams" value="SLID='+this._sl_obj_id+",LOGS="+this._sl_logs+'"/><param name="minRuntimeVersion" value="5.0"/><\/object><\/div>'):(this._titleText="Silverlight plugin not found<br>or version less than 4.0",this.buttons.browse.style.cursor="wait",this.buttons.browse.title="");this._progress_type="percentage";window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]={id:this._sl_obj_id,uploader:this}},_addFileToQueue:function(n,t,i){this._files[n]={name:t,size:i,state:"added"};this._addFileToList(n,t,i,"added",0);this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(n){if(this._files[n]){var t=!1;this._uploading&&this._files[n].state=="uploading"&&(this._uploadStop(),t=!0);document.getElementById([this._sl_obj_id]).Content.a.removeFileById(n);this._files[n].name=null;this._files[n].size=null;this._files[n].state=null;this._files[n]=null;delete this._files[n];this._removeFileFromList(n);t&&this._uploadStart()}},_doUploadFile:function(n){var t=this._sl_upload_url.split("?");t=t[1]!=null?"&"+t[1]:"";document.getElementById(this._sl_obj_id).Content.a.upload(n,this._sl_upload_url,t+"&mode=sl"+window.dhx4.ajax._dhxr("&"))},_uploadStop:function(){this._uploading=!1;for(var n in this._files)this._files[n].state=="uploading"&&document.getElementById(this._sl_obj_id).Content.a.uploadStop(n)},_unloadEngine:function(){window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]&&(window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].id=null,window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].uploader=null,window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]=null,delete window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]);this._sl_obj_id=null;this._initEngine=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.setSLURL=function(n){this._sl_upload_url=n};dhtmlXFileUploader.prototype.getSLVersion=function(){var r=!1,t,i,n;if(window.dhx4.isIE)try{if(t=new ActiveXObject("AgControl.AgControl"),t!=null)for(i=4,n=0;t.isVersionSupported([i,n].join("."));)r=[i,n],++n>9&&(i++,n=0);t=null}catch(u){}else navigator.plugins["Silverlight Plug-In"]!=null&&(r=navigator.plugins["Silverlight Plug-In"].description.split("."));return r};dhtmlXForm.prototype.saveBackup=function(){return this._backup||(this._backup={},this._backupId=(new Date).getTime()),this._backup[++this._backupId]=this.getFormData(),this._backupId};dhtmlXForm.prototype.restoreBackup=function(n){this._backup!=null&&this._backup[n]!=null&&this.setFormData(this._backup[n])};dhtmlXForm.prototype.clearBackup=function(n){this._backup!=null&&this._backup[n]!=null&&(this._backup[n]=null,delete this._backup[n])};dhtmlXForm.prototype.addItem=function(n,t,i,r){var f=null,u;if(n instanceof Array&&(f=n[1],n=n[0]),u=null,n!=null&&(u=this._getParentForm(n,f),u!=null)){u.item._list==null?(t.listParent||(t.listParent=u.item._idd),u.form._addItem("list",u.item._idd,[t],null,u.item._idd,i,r)):u.item._list[0].addItem(null,t,i,r);u.form=u.item=null;u=null;this._autoCheck();return}this._prepareItem(t,i,r);this._autoCheck()};dhtmlXForm.prototype.removeItem=function(n,t){this._removeItem(n,t)};dhtmlXForm.prototype.removeColumn=function(n,t,i,r){var s=null,u,f,o,e;if(n instanceof Array&&(s=n[1],n=n[0]),n!=null){u=this._getParentForm(n,s);u!=null&&(u.item._list!=null&&u.item._list[0]!=null&&u.item._list[0].removeColumn(null,t,i,r),u.form=u.item=null,u=null);return}if(t=Math.min(Math.max(t,0),this.cont.childNodes.length-1),this.cont.childNodes.length==1)i==!0&&this._removeItemsInColumn(this.cont.childNodes[t]);else{if(i==!0)this._removeItemsInColumn(this.cont.childNodes[t]);else for(r?(f=t+1,f>this.cont.childNodes.length-1&&(f=t-1)):(f=t-1,f<0&&(f=t+1));this.cont.childNodes[t].childNodes.length>0;)this.cont.childNodes[f].appendChild(this.cont.childNodes[t].childNodes[0]);for(o=[],e=0;e<this.base.length;e++)this.cont.childNodes[t]!=this.base[e]&&o.push(this.base[e]);this.base=o;this.cont.removeChild(this.cont.childNodes[t]);this.b_index--;o=null}};dhtmlXForm.prototype.getColumnNode=function(n,t){var r=null,u=null,i;return(n instanceof Array&&(u=n[1],n=n[0]),n!=null)?(i=this._getParentForm(n,u),i!=null&&(i.item._list!=null&&i.item._list[0]!=null&&r==null&&(r=i.item._list[0].getColumnNode(null,t)),i.form=i.item=null,i=null),r):t<0||t>this.cont.childNodes.length-1?null:this.cont.childNodes[t]};dhtmlXForm.prototype._removeItemsInColumn=function(n){for(var i,r=[],t=0;t<n.childNodes.length;t++)i=n.childNodes[t],i._idd!=null&&i._type!=null&&r.push([i._idd,i._type=="ra"?i._value:null]),i=null;for(t=0;t<r.length;t++)this.removeItem(r[t][0],r[t][1])};dhtmlXForm.prototype._getParentForm=function(n,t){var r,i,u;if(this.itemPull[this.idPrefix+n]!=null)return{form:this,item:this.itemPull[this.idPrefix+n]};for(i in this.itemPull)if(this.itemPull[i]._type=="ra"&&this.itemPull[i]._group==n&&this.itemPull[i]._value==t)return{form:this,item:this.itemPull[i]};r=null;for(i in this.itemPull)if(!r&&this.itemPull[i]._list!=null)for(u=0;u<this.itemPull[i]._list.length;u++)r||(r=this.itemPull[i]._list[u]._getParentForm(n,t));return r},function(){for(var n in dhtmlXForm.prototype.items)dhtmlXForm.prototype.items[n]._getItemNode||(dhtmlXForm.prototype.items[n]._getItemNode=function(n){return n})}();dhtmlXForm.prototype._getItemNode=function(n,t){return t!=null&&(n=[n,t]),this.doWithItem(n,"_getItemNode")};dhtmlXForm.prototype.setRequired=function(n,t,i){var r,o,e,f,u;if(typeof i=="undefined"?i=t:n=[n,t],r=this._getItemNode(n),r){if(i=window.dhx4.s2b(i),r._required=i==!0,r._required){for(r._validate||(r._validate=[]),e=!1,f=0;f<r._validate.length;f++)e=r._validate[f]=="NotEmpty"||e;e||r._validate.push("NotEmpty");u=r.childNodes[r._ll?0:1].childNodes[0];u.lastChild&&u.lastChild.className&&u.lastChild.className.search(/required/)>=0||(o=document.createElement("SPAN"),o.className="dhxform_item_required",o.innerHTML="*",u.appendChild(o),o=u=null)}else{if(r._validate!=null){for(e=r._validate,r._validate=[],f=0;f<e.length;f++)e[f]!="NotEmpty"&&r._validate.push(e[f]);r._validate.length==0&&(r._validate=null)}u=r.childNodes[r._ll?0:1].childNodes[0];u.lastChild&&u.lastChild.className&&u.lastChild.className.search(/required/)>=0&&(u.removeChild(u.lastChild),u=null)}this._resetValidateCss(r);r=null}};dhtmlXForm.prototype.setNote=function(n,t,i){var r,u;(typeof i=="undefined"?i=t:n=[n,t],r=this._getItemNode(n),r)&&(u=this._getNoteNode(r),u||(i.width||(i.width=r.childNodes[r._ll?1:0].childNodes[0].offsetWidth),u=document.createElement("DIV"),u.className="dhxform_note",{ch:1,ra:1}[r._type]?r.childNodes[r._ll?1:0].insertBefore(u,r.childNodes[r._ll?1:0].lastChild):r.childNodes[r._ll?1:0].appendChild(u)),u.innerHTML=i.text,i.width!=null&&(u.style.width=i.width+"px",u._w=i.width),u=null)};dhtmlXForm.prototype.clearNote=function(n,t){var r,i;(typeof t!="undefined"&&(n=[n,t]),r=this._getItemNode(n),r)&&(i=this._getNoteNode(r),i!=null&&(i.parentNode.removeChild(i),i=null))};dhtmlXForm.prototype._getNoteNode=function(n){for(var i=null,t=0;t<n.childNodes[n._ll?1:0].childNodes.length;t++)String(n.childNodes[n._ll?1:0].childNodes[t].className).search(/dhxform_note/)>=0&&(i=n.childNodes[n._ll?1:0].childNodes[t]);return n=null,i};dhtmlXForm.prototype.setValidation=function(n,t,i){var r,f,u;if(typeof note=="undefined"?i=t:n=[n,t],r=this._getItemNode(n),r){if(r._validate!=null)for(u=0;u<r._validate.length;u++)r._validate[u]=null;if(r._validate=[],r._validate=typeof i=="function"||typeof window[i]=="function"?[i]:String(i).split(this.separator),r._required){for(f=!1,u=0;u<r._validate.length;u++)f=r._validate[u]=="NotEmpty"||f;f||r._validate.push("NotEmpty")}r=null}};dhtmlXForm.prototype.clearValidation=function(n,t){var i,r;if(typeof t!="undefined"&&(n=[n,t]),i=this._getItemNode(n),i){if(i._validate!=null)for(r=0;r<i._validate.length;r++)i._validate[r]=null;i._validate=i._required?["NotEmpty"]:null;i=null}};dhtmlXForm.prototype.reloadOptions=function(n,t){var f=this.getItemType(n),i,r,e,u;if({select:1,multiselect:1,combo:1}[f]){if(f=="select"||f=="multiselect"){for(i=this.getOptions(n);i.length>0;)i.remove(0);i.length=0;i=null;typeof t=="string"?this.doWithItem(n,"doLoadOptsConnector",t):t instanceof Array&&this.doWithItem(n,"doLoadOpts",{options:t})}if(f=="combo")if(r=this.getCombo(n),r.clearAll(),r.setComboValue(""),typeof t=="string")this.doWithItem(n,"doLoadOptsConnector",t);else if(t instanceof Array){for(e=null,u=0;u<t.length;u++)window.dhx4.s2b(t[u].selected)&&(e=t[u].value);r.addOption(t);e!=null&&this.setItemValue(n,e);r=null}}};dhtmlXForm.prototype.setTooltip=function(n,t,i){var r,u,f;if(typeof i=="undefined"?i=t:n=[n,t],r=this._getItemNode(n),r){if(u=null,r.childNodes.length==1)u=r.childNodes[0];else for(f=0;f<r.childNodes.length;f++)r.childNodes[f].className!=null&&r.childNodes[f].className.search("dhxform_label")>=0&&(u=r.childNodes[f]);u!=null&&(i==null||i.length==0?u.removeAttribute("title"):u.title=i);u=null}};dhtmlXAccordion.prototype=new dhtmlXCellTop;dhtmlXAccordion.prototype.setIconset=function(n){this.conf.icons_css=n=="awesome"};dhtmlXAccordionCell.prototype=new dhtmlXCellObject;dhtmlXAccordionCell.prototype._initHeader=function(){var n=document.createElement("DIV");n.className="dhx_cell_hdr";n.innerHTML="<div class='dhx_cell_hdr_text'><\/div><div class='dhx_cell_hdr_arrow'><\/div>";this.cell.insertBefore(n,this.cell.childNodes[this.conf.idx.cont]);n=null;this.conf.ofs_nodes.t._getHdrHeight="func";this.conf.hdr={visible:!0};this.conf.idx_data.hdr="dhx_cell_hdr";this._updateIdx()};dhtmlXAccordionCell.prototype._getHdrHeight=function(){var n=this.cell.childNodes[this.conf.idx.hdr],t=n.offsetHeight||n.offsetHeight;return n=null,t};dhtmlXAccordionCell.prototype.showHeader=function(){this.conf.hdr.visible!=!0&&(this.conf.hdr.visible=!0,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr",this._adjustCont(this._idd))};dhtmlXAccordionCell.prototype.hideHeader=function(){this.conf.hdr.visible==!0&&(this.conf.hdr.visible=!1,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden",this._adjustCont(this._idd))};dhtmlXAccordionCell.prototype.isHeaderVisible=function(){return this.conf.hdr.visible==!0};dhtmlXAccordionCell.prototype.setText=function(n){this.conf.text=n;var t=this.cell.childNodes[this.conf.idx.hdr];t.childNodes[t.firstChild.className=="dhx_cell_hdr_icon"?1:0].innerHTML="<span>"+n+"<\/span>";t=null};dhtmlXAccordionCell.prototype.getText=function(){return this.conf.text};dhtmlXAccordionCell.prototype.setIcon=function(n){var t=this.cell.childNodes[this.conf.idx.hdr],r,i;this.acc.conf.icons_css==!0?((t.firstChild.tagName||"").toLowerCase()!="i"&&(t.firstChild.className+=" dhx_cell_hdr_icon",r=document.createElement("I"),t.insertBefore(r,t.firstChild),r=null),t.firstChild.className=n):(t.firstChild.className!="dhx_cell_hdr_icon"&&(t.firstChild.className+=" dhx_cell_hdr_icon",i=document.createElement("IMG"),i.className="dhx_cell_hdr_icon",t.insertBefore(i,t.firstChild),i=null),t.firstChild.src=this.acc.conf.icons_path+n);t=null};dhtmlXAccordionCell.prototype.clearIcon=function(){var n=this.cell.childNodes[this.conf.idx.hdr];(n.firstChild.className=="dhx_cell_hdr_icon"||(n.firstChild.tagName||"").toLowerCase()=="i")&&(n.removeChild(n.firstChild),n.firstChild.className=String(n.firstChild.className).replace(/\s{1,}dhx_cell_hdr_icon/gi,""));n=null};dhtmlXAccordionCell.prototype._open=function(n){var i={},u,r,t;this.acc.conf.multi_mode?(u={},u[this._idd]=!0,i=this.acc._getDynData(u),this.acc._openId=this._idd,this.acc._openCache={},this.acc._openMode="open"):i[this._idd]=this.conf.size.h;for(r in i)this.acc._openCache!=null&&(this.acc._openCache[r]=!0),t=this.acc.t[r].cell,t.cell.className=String(t.cell.className).replace(/\s{1,}dhx_cell_closed/gi,""),t.conf.opened=!0,t._trInitEv("open",n),t.conf.size.h=i[r],t.cell.style.height=t.conf.size.h+"px",t=null;this.conf.tr.prop==!1&&(this.acc._openId=this.acc._openCache=this.acc._openMode=null,this._onActiveCall(!0))};dhtmlXAccordionCell.prototype._close=function(n){var r={},u,i,t;this.acc.conf.multi_mode?(u={},u[this._idd]=!0,r=this.acc._getDynData(null,u),this.acc._openId=this._idd,this.acc._openCache={},this.acc._openMode="close"):r[this._idd]=this._getHdrHeight();for(i in r)t=this.acc.t[i].cell,this.acc._openCache!=null&&(this.acc._openCache[i]=!0),i==this._idd?(t.cell.className+=" dhx_cell_closed",t.conf.opened=!1,t._trInitEv("close",n)):(t.conf.size.h=r[i],t._adjustCell(),t._trInitEv("open",n)),t.cell.style.height=r[i]+"px",t=null;this.conf.tr.prop==!1&&(this.acc._openId=this.acc._openCache=this.acc._openMode=null,this._onActiveCall(!1))};dhtmlXAccordionCell.prototype.isOpened=function(){return this.conf.opened==!0};dhtmlXAccordionCell.prototype._trInitEv=function(n,t){this.conf.tr.prop!=!1&&(this._trAttachEv(),this.cell._accObj||(this.cell._accObj=this.acc),t&&(this.cell.style[this.conf.tr.prop]=this.conf.tr["height_"+n]),this._cellSetOpacity(n,t))};dhtmlXAccordionCell.prototype._trAttachEv=function(){this.conf.tr.ev_attached||(this.cell._trProp=this.conf.tr.prop,this.cell.addEventListener(this.conf.tr.ev,this._trOnEnd,!1),this.conf.tr.ev_attached=!0)};dhtmlXAccordionCell.prototype._trDetachEv=function(){this.conf.tr.ev_attached&&(this.cell.addEventListener(this.conf.tr.ev,this._trOnEnd,!1),this.conf.tr.ev_attached=!1)};dhtmlXAccordionCell.prototype._trOnEnd=function(n){n.stopPropagation&&n.stopPropagation();n.propertyName=="height"&&this._accObj!=null&&(this.style[this._trProp]="",this._accObj.conf.multi_mode&&(this._accObj._openCache!=null&&(this._accObj._openCache[this._accId]=!1),this._accObj._adjustOpened()),this._accObj.conf.on_active_click==!0&&(this._accObj.conf.multi_mode?(this._accObj._callMainEvent("onActive",[this._accId,this._accObj.t[this._accId].cell.conf.opened]),this._accObj.conf.on_active_click=!1):(this._accObj.conf.on_active_id!=null&&this._accObj._callMainEvent("onActive",[this._accObj.conf.on_active_id,!0]),this._accObj.conf.on_active_id=null,this._accObj.conf.on_active_click=!1)),this._accObj=null)};dhtmlXAccordionCell.prototype._cellSetOpacity=function(n,t){for(var i in this.conf.idx)({hdr:!0,pr1:!0,pr2:!0,cover:!0})[i]!=!0&&(t&&(this.cell.childNodes[this.conf.idx[i]].style[this.conf.tr.prop]=this.conf.tr["op_"+n]),this.cell.childNodes[this.conf.idx[i]].style.opacity=this.conf.tr["op_v_"+n])};dhtmlXAccordionCell.prototype._onActiveCall=function(n){this.acc.conf.on_active_click!=!1&&(this.acc.conf.multi_mode==!0?(this.acc._callMainEvent("onActive",[this._idd,this.conf.opened]),this.acc.conf.on_active_click=!1):n==!0&&(this.acc._callMainEvent("onActive",[this._idd,!0]),this.acc.conf.on_active_click=!1))};dhtmlXAccordionCell.prototype.show=function(){if(!this.conf.visible){if(this.conf.docked==!1){this.dock();return}this.cell.style.display="";this.conf.visible=!0;this.acc.conf.multi_mode||(this.acc.conf.hiden_count--,this.acc._updateCellsHeight(),this.acc._updateCellsMargin());this.acc.conf.size_changed?(this.acc.setSizes(),this.acc.conf.size_changed=!1):this.acc._adjustOpened()}};dhtmlXAccordionCell.prototype.hide=function(){this.conf.visible&&(!this.acc.conf.multi_mode&&this.conf.opened&&(this._close(!1),this.acc.conf.last_opened=null),this.cell.style.display="none",this.conf.visible=!1,this.acc.conf.multi_mode||(this.acc.conf.hiden_count++,this.acc._updateCellsHeight(),this.acc._updateCellsMargin()),this.acc._adjustOpened())};dhtmlXAccordionCell.prototype.isVisible=function(){return this.conf.visible==!0};dhtmlXAccordionCell.prototype.setHeight=function(n){this.acc.conf.multi_mode&&(n=="*"?this.conf.h_auto=!0:(this.conf.h_auto=!1,this.conf.size.h=n),this.conf.opened&&(n!="*"&&(this.cell.style.height=n+"px"),this.acc._adjustOpened()))};dhtmlXAccordionCell.prototype.moveOnTop=function(){this.cell.parentNode.firstChild!=this.cell&&(this.cell.parentNode.insertBefore(this.cell,this.cell.parentNode.firstChild),this.acc._updateCellsMargin())};dhtmlXAccordionCell.prototype._initDocking=function(){var n=this;this.dock=function(){if(this.acc.dhxWins!=null&&this.conf.docked!=!0){var n=this.acc.dhxWins.window(this._idd);n.close();this._attachFromCell(n);this.conf.docked=!0;this.show();this.conf.dock_opened&&this.open();n=null;this.acc._callMainEvent("onDock",[this._idd])}};this.undock=function(n,t,i,r){var u;this.acc.dhxWins!=null&&this.conf.docked!=!1&&(this.conf.dock_opened=this.conf.opened,this.acc.dhxWins.window(this._idd)!=null?(u=this.acc.dhxWins.window(this._idd),u.show()):(n==null&&(n=20),t==null&&(t=20),i==null&&(i=320),r==null&&(r=200),u=this.acc.dhxWins.createWindow(this._idd,n,t,i,r),u.button("close").hide(),u.addUserButton("dock",99,"Dock"),u.button("dock").show(),u.button("dock").attachEvent("onClick",this._doOnDockClick),u.setText(this.getText()),u.attachEvent("onClose",this._doOnDockWinClose)),this.conf.docked=!1,this.hide(),u._attachFromCell(this),u=null,this.acc._callMainEvent("onUnDock",[this._idd]))};this._doOnDockClick=function(){n.dock()};this._doOnDockWinClose=function(n){return n.hide(),!1};this._unloadDocking=function(){n=null}};dhtmlXCellObject.prototype.attachAccordion=function(n){this.callEvent("_onBeforeContentAttach",["acc"]);var t=document.createElement("DIV");return t.style.width="100%",t.style.height="100%",t.style.position="relative",this._attachObject(t),typeof n=="undefined"&&(n={}),typeof n.skin=="undefined"&&(n.skin=this.conf.skin),n.parent=t,typeof dhtmlXAccordionCell=="function"&&this instanceof window.dhtmlXAccordionCell&&(t._ofs=this.conf.skin=="material"?{t:-1,r:-1,b:-1,l:-1}:{s:{first:-1},m:{first:4}}),typeof dhtmlXTabBarCell=="function"&&this instanceof window.dhtmlXTabBarCell&&(this.conf.skin=="dhx_skyblue"||this.conf.skin=="material")&&(t._ofs={t:-1,r:-1,b:-1,l:-1}),typeof dhtmlXSideBarCell=="function"&&this instanceof window.dhtmlXSideBarCell&&(this.conf.skin=="dhx_web"?(t._ofs={},this.sidebar.conf.autohide!=!0&&(t._ofs.l=2),this.sidebar.conf.header==!0&&(t._ofs.t=3)):(t._ofs={l:-1},this.conf.skin=="dhx_terrace"&&(this.sidebar.conf.autohide==!0&&(t._ofs.l=0),this.sidebar.conf.header==!0&&(t._ofs.t=-1)))),typeof dhtmlXCarouselCell=="function"&&this instanceof window.dhtmlXCarouselCell&&this._hideBorders(),this.dataType="acc",this.dataObj=new dhtmlXAccordion(n),n.parent=null,t=n=null,this.callEvent("_onContentAttach",[]),this.dataObj};dhtmlXAccordion.prototype.enableDND=function(){var n,t;if(this.conf.multi_mode!=!1&&this._dnd==null){n=this;this._dnd={tr_count:0,tr_items:{}};this._dndAttachEvent=function(n){var t=this.t[n].cell;t.conf.dnd_inited!=!0&&(typeof addEventListener=="function"?t.cell.childNodes[t.conf.idx.hdr].addEventListener("mousedown",this._dndOnMouseDown,!1):t.cell.childNodes[t.conf.idx.hdr].attachEvent("onmousedown",this._dndOnMouseDown),t.conf.dnd_inited=!0);t=null};this._dndDetachEvent=function(n){var t=this.t[n].cell;t.conf.dnd_inited==!0&&(typeof addEventListener=="function"?t.cell.childNodes[t.conf.idx.hdr].removeEventListener("mousedown",this._dndOnMouseDown,!1):t.cell.childNodes[t.conf.idx.hdr].detachEvent("onmousedown",this._dndOnMouseDown),t.conf.dnd_inited=!1);t=null};this._dndOnMouseDown=function(t){t=t||event;t.preventDefault&&t.preventDefault();for(var i=t.target||t.srcElement;i!=null&&i.parentNode!=n.cont;)i=i.parentNode;i!=null&&n._dndDragStart(t,i);i=null};this._dndDragStart=function(n,t){var u,r,i;if(this._dnd.tr_waiting!=!0){for(u=-1,i=0;i<t.parentNode.childNodes.length;i++)t.parentNode.childNodes[i]==t&&(u=i);if(this.callEvent("onBeforeDrag",[t._accId,u])===!0){for(typeof addEventListener=="function"?(document.body.addEventListener("mousemove",this._dndOnMouseMove,!1),document.body.addEventListener("mouseup",this._dndOnMouseUp,!1)):(document.body.attachEvent("onmousemove",this._dndOnMouseMove,!1),document.body.attachEvent("onmouseup",this._dndOnMouseUp,!1)),this._dnd.dragObj=t,this._dnd.dy=n.clientY,r=0,i=0;i<this._dnd.dragObj.parentNode.childNodes.length;i++)this._dnd.dragObj.parentNode.childNodes[i]._ind=i,this._dnd.dragObj.parentNode.childNodes[i]==this._dnd.dragObj?(this._dnd.dragObj._k0=r,i>0&&(this._dnd.dragObj._k0+=this.ofs.m.between-this.ofs.m.first),r=0):r+=this._dnd.dragObj.parentNode.childNodes[i].offsetHeight+parseInt(this._dnd.dragObj.parentNode.childNodes[i].style.marginTop);this._dnd.dragObj._k1=r;this._dnd.h=this._dnd.dragObj.offsetHeight;this._dnd.ofs=!1}}};this._dndDoDrag=function(n){var r,u,t,i;if(this._dnd.dragObj&&this._dnd.tr_waiting!=!0){r=n.clientY-this._dnd.dy;this._dnd.ofs==!1&&Math.abs(r)>5&&(this._dnd.dragObj.className+=" acc_cell_dragged",this._dnd.ofs=!0);r<0?r<-this._dnd.dragObj._k0&&(r=-this._dnd.dragObj._k0):r>this._dnd.dragObj._k1&&(r=this._dnd.dragObj._k1);this._dnd.dragObj.style.top=r+"px";var o=n.clientY-this._dnd.dy,f=0,e=0;for(i=this._dnd.dragObj._ind+1;i<=this._dnd.dragObj.parentNode.lastChild._ind;i++)u=this._dnd.dragObj.parentNode.childNodes[i].offsetHeight,o>f+u*2/3&&e++,f+=u;for(t=this._dnd.dragObj.nextSibling,i=0;t!=null;)++i<=e&&t!=null?t._ontop||(t._tm&&window.clearTimeout(t._tm),this._dndAnim(t,!1,parseInt(t.style.top||0),-this._dnd.h-this.ofs.m.between),t._ontop=!0):t._ontop&&(t._tm&&window.clearTimeout(t._tm),this._dndAnim(t,!0,parseInt(t.style.top||0),0),t._ontop=!1),t=t.nextSibling;var o=this._dnd.dy-n.clientY,f=0,e=0;for(i=this._dnd.dragObj._ind-1;i>=this._dnd.dragObj.parentNode.firstChild._ind;i--)u=this._dnd.dragObj.parentNode.childNodes[i].offsetHeight,o>f+u*2/3&&e++,f+=u;for(t=this._dnd.dragObj.previousSibling,i=0;t!=null;)++i<=e&&t!=null?t._onbottom||(t._tm&&window.clearTimeout(t._tm),this._dndAnim(t,!0,parseInt(t.style.top||0),this._dnd.h+this.ofs.m.between),t._onbottom=!0):t._onbottom&&(t._tm&&window.clearTimeout(t._tm),this._dndAnim(t,!1,parseInt(t.style.top),0),t._onbottom=!1),t=t.previousSibling}};this._dndDragStop=function(n,t){var u,i,r;if(!t&&this._dnd.tr_count>0){this._dnd.tr_waiting=!0;return}if(this._dnd.dragObj){for(this._dnd.dragObj.className=String(this._dnd.dragObj.className).replace(/\s{0,}acc_cell_dragged/gi,""),this._dnd.dragObj.style.top="0px",u=!1,r=0;r<this._dnd.dragObj.parentNode.childNodes.length;r++)i=this._dnd.dragObj.parentNode.childNodes[r],i!=this._dnd.dragObj&&(i._tm&&window.clearTimeout(i._tm),i.style.top="0px",i._ontop&&(i.nextSibling!=null&&i.nextSibling._ontop!=!0||!i.nextSibling)&&(u=i.nextSibling||null),i._onbottom&&(i.previousSibling!=null&&i.previousSibling._onbottom!=!0||!i.previousSibling)&&(u=i)),i=null;for(r=0;r<this._dnd.dragObj.parentNode.childNodes.length;r++)this._dnd.dragObj.parentNode.childNodes[r]._ontop=null,this._dnd.dragObj.parentNode.childNodes[r]._onbottom=null;u!==!1&&(u==null?this._dnd.dragObj.parentNode.appendChild(this._dnd.dragObj):this._dnd.dragObj.parentNode.insertBefore(this._dnd.dragObj,u));var o=this._dnd.dragObj._accId,f=this._dnd.dragObj._ind,e=f;for(r=0;r<this._dnd.dragObj.parentNode.childNodes.length;r++)this._dnd.dragObj.parentNode.childNodes[r]==this._dnd.dragObj&&(e=r);this._dnd.dragObj=null;this._dnd.tr_waiting=!1;this._updateCellsMargin();f!=e?(this.setSizes(),this.callEvent("onDrop",[o,f,e])):this.callEvent("_onDropCancel",[o]);typeof addEventListener=="function"?(document.body.removeEventListener("mousemove",this._dndOnMouseMove,!1),document.body.removeEventListener("mouseup",this._dndOnMouseUp,!1)):(document.body.detachEvent("onmousemove",this._dndOnMouseMove,!1),document.body.detachEvent("onmouseup",this._dndOnMouseUp,!1))}};this._dndAnim=function(t,i,r,u){if(this.conf.tr.prop!=!1){t._dnd_ev||(t._dnd_ev=!0,t._dnd_tr_prop=this.conf.tr.prop,t.addEventListener(this.conf.tr.ev,this._dndOnTrEnd,!1));this._dnd.tr_items[t._accId]!=!0&&(this._dnd.tr_items[t._accId]=!0,this._dnd.tr_count++);t.style[this.conf.tr.prop]=this.conf.tr.dnd_top;t.style.top=u+"px";return}var f=!1;i?(r+=5,r>=u&&(r=u,f=!0)):(r-=5,r<=u&&(r=u,f=!0));t.style.top=r+"px";t._tm&&window.clearTimeout(t._tm);t._tm=f?null:window.setTimeout(function(){n._dndAnim(t,i,r,u)},5)};this._dndOnTrEnd=function(t){t.stopPropagation&&t.stopPropagation();t.propertyName=="top"&&(n._dnd.tr_items[this._accId]==!0&&(n._dnd.tr_count--,n._dnd.tr_items[this._accId]=!1),this.style[this._dnd_tr_prop]="",n._dnd.tr_count==0&&n._dnd.tr_waiting==!0&&n._dndDragStop(null,!0))};this._dndOnMouseMove=function(t){n._dndDoDrag(t||event)};this._dndOnMouseUp=function(t){n._dndDragStop(t||event)};this._dndClearCell=function(n){this.t[n].cell.cell._dnd_ev&&this.t[n].cell.cell.addEventListener(this.conf.tr.ev,this._dndOnTrEnd,!1);this._dndDetachEvent(n)};this._unloadDND=function(){for(var t in this)String(t).indexOf("_dnd")==0&&typeof this[t]=="function"&&(this[t]=null);this._dnd=null;n=null};for(t in this.t)this._dndAttachEvent(t)}};dhtmlXLayoutObject.prototype=new dhtmlXCellTop;dhtmlXLayoutObject.prototype.cells=function(n){var t,i;for(t in this.cdata){if(this.cdata[t].conf.name==n)return this.cdata[t];if(this.cdata[t].dataType=="layout"&&this.cdata[t].dataNested==!0&&this.cdata[t].dataObj!=null&&(i=this.cdata[t].dataObj.cells(n),i!=null))return i}return null};dhtmlXLayoutObject.prototype.forEachItem=function(n,t){if(typeof n=="function"){typeof t=="undefined"&&(t=this);for(var i in this.cdata)typeof this.cdata[i].conf.name!="undefined"&&n.apply(t,[this.cdata[i]]),this.cdata[i].dataType=="layout"&&this.cdata[i].dataNested==!0&&this.cdata[i].dataObj!=null&&this.cdata[i].dataObj.forEachItem(n,t);t=null}};dhtmlXLayoutObject.prototype._forEachSep=function(n,t){if(typeof n=="function"){typeof t=="undefined"&&(t=this);this.sep!=null&&n.apply(t,[this.sep]);for(var i in this.cdata)this.cdata[i].dataType=="layout"&&this.cdata[i].dataNested==!0&&this.cdata[i].dataObj!=null&&this.cdata[i].dataObj._forEachSep(n,t);t=null}};dhtmlXLayoutObject.prototype._detectSW=function(){return this._confGlob.sw==null&&(this._confGlob.sw={}),this._confGlob.sw[this.conf.skin]==null&&(this._confGlob.sw[this.conf.skin]=window.dhx4.readFromCss("dhxlayout_sep_sw_"+this.conf.skin)),this._confGlob.sw[this.conf.skin]};dhtmlXLayoutObject.prototype._confGlob={};dhtmlXLayoutObject.prototype.listPatterns=function(){var n=[];for(var t in this.tplData)n.push(t);return n};dhtmlXLayoutObject.prototype.listAutoSizes=function(){var n=this.conf.as_cells!=null?this.conf.as_cells.h.join(";"):"",t=this.conf.as_cells!=null?this.conf.as_cells.v.join(";"):"",i=this._availAutoSize[this.conf.pattern].h,r=this._availAutoSize[this.conf.pattern].v;return[n,t,i,r]};dhtmlXLayoutObject.prototype._getCellsNames=function(n){var i={},r,u,t;if(this.cdata[n].conf.name!=null&&(i[this.cdata[n].conf.name]=!0),this.cdata[n].dataType=="layout"&&this.cdata[n].dataObj!=null&&this.cdata[n].dataObj.mainInst==this){r=this.cdata[n].dataObj._getCellsNames("a");u=this.cdata[n].dataObj._getCellsNames("b");for(t in r)i[t]=r[t];for(t in u)i[t]=u[t]}return i};dhtmlXLayoutObject.prototype.setAutoSize=function(n,t,i){var u,e,o,h,f,c,s,r;if(i!==!0){if(u=this.listAutoSizes(),u[0]==n&&u[1]==t)return;for(e=!1,o=!1,r=0;r<u[2].length;r++)e=e||u[2][r]==n;for(r=0;r<u[3].length;r++)o=o||u[3][r]==t;if(!e||!o)return}this.conf.as_cells={h:n.split(";"),v:t.split(";")};h=this.conf.mode=="v"?"h":"v";for(f in this.cdata){for(c=this._getCellsNames(f),s=!1,r=0;r<this.conf.as_cells[h].length;r++)s=s||c[this.conf.as_cells[h][r]];s&&(this.conf.autosize=f);this.cdata[f].dataType=="layout"&&this.cdata[f].dataObj!=null&&this.cdata[f].dataObj.setAutoSize(n,t,!0)}};dhtmlXLayoutObject.prototype.tplData={"1C":{mode:"c",cells:{a:{name:"a"}}},"2E":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{name:"b",fsize:{v:1}}}},"2U":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{name:"b",fsize:{h:1}}}},"3E":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{v:[1,2]}},b:{name:"c",fsize:{v:2}}}}}}},"3W":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{name:"c",fsize:{h:2}}}}}}},"3J":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"c",fsize:{h:1,v:2}}}}},b:{name:"b",fsize:{h:1}}}},"3L":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:2}},b:{name:"c",fsize:{h:1,v:2}}}}}}},"3T":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:2,v:1}},b:{name:"c",fsize:{h:2,v:1}}}}}}},"3U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2,v:1}},b:{name:"b",fsize:{h:2,v:1}}}}},b:{name:"c",fsize:{v:1}}}},"4H":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:[1,2],v:3}},b:{name:"c",fsize:{h:[1,2],v:3}}}}},b:{name:"d",fsize:{h:2}}}}}}},"4I":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:3,v:[1,2]}},b:{name:"c",fsize:{h:3,v:[1,2]}}}}},b:{name:"d",fsize:{v:2}}}}}}},"4T":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[2,3],v:1}},b:{name:"d",fsize:{h:3,v:1}}}}}}}}}},"4U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[2,3],v:1}},b:{name:"c",fsize:{h:3,v:1}}}}}}}},b:{name:"d",fsize:{v:1}}}},"4E":{mode:"h",cells:{a:{name:"a",height:1/4,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{v:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{v:[2,3]}},b:{name:"d",fsize:{v:3}}}}}}}}}},"4W":{mode:"v",cells:{a:{name:"a",width:1/4,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[2,3]}},b:{name:"d",fsize:{h:3}}}}}}}}}},"4A":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"b",fsize:{h:1,v:2}}}}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[1,3]}},b:{name:"d",fsize:{h:3}}}}}}},"4L":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:2,v:3}},b:{name:"d",fsize:{h:2,v:3}}}}}}}}}},"4J":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:3,v:2}},b:{name:"d",fsize:{h:3,v:2}}}}}}}}}},"4F":{mode:"h",cells:{a:{height:1/3,layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2,v:1}},b:{name:"b",fsize:{h:2,v:1}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{v:[1,3]}},b:{name:"d",fsize:{v:3}}}}}}},"4G":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{name:"d",fsize:{h:1}}}},"4C":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:1,v:[2,3]}},b:{name:"d",fsize:{h:1,v:3}}}}}}}}}},"5H":{mode:"v",cells:{a:{width:1/3,name:"a",fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:[1,2],v:[3,4]}},b:{name:"d",fsize:{h:[1,2],v:4}}}}}}}},b:{name:"e",fsize:{h:2}}}}}}},"5I":{mode:"h",cells:{a:{height:1/3,name:"a",fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[3,4],v:[1,2]}},b:{name:"d",fsize:{h:4,v:[1,2]}}}}}}}},b:{name:"e",fsize:{v:2}}}}}}},"5U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",width:1/4,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:[2,3],v:1}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[3,4],v:1}},b:{name:"d",fsize:{h:4,v:1}}}}}}}}}}},b:{name:"e",fsize:{v:1}}}},"5E":{mode:"h",cells:{a:{name:"a",height:1/5,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/4,fsize:{v:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{v:[3,4]}},b:{name:"e",fsize:{v:4}}}}}}}}}}}}},"5W":{mode:"v",cells:{a:{name:"a",width:1/5,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/4,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/3,fsize:{h:[2,3]}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[3,4]}},b:{name:"e",fsize:{h:4}}}}}}}}}}}}},"5K":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:4}},b:{name:"e",fsize:{h:1,v:4}}}}}}},"5S":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"b",fsize:{h:1,v:2}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[3,2]}},b:{name:"e",fsize:{h:1,v:4}}}}}}}}}},"5G":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[1,4]}},b:{name:"e",fsize:{h:4}}}}}}},"5C":{mode:"v",cells:{a:{width:2/3,layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2}},b:{name:"b",fsize:{h:[2,1]}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[3,4]}},b:{name:"e",fsize:{h:1,v:4}}}}}}}}}},"6H":{mode:"v",cells:{a:{width:1/3,name:"a",fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:1/4,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:[1,2],v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:[1,2],v:[4,5]}},b:{name:"e",fsize:{h:[1,2],v:5}}}}}}}}}}},b:{name:"f",fsize:{h:2}}}}}}},"6I":{mode:"h",cells:{a:{height:1/3,name:"a",fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:1/4,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/3,fsize:{h:[3,4],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[4,5],v:[1,2]}},b:{name:"e",fsize:{h:5,v:[1,2]}}}}}}}}}}},b:{name:"f",fsize:{v:2}}}}}}},"6A":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:1/5,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/4,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[4,5]}},b:{name:"e",fsize:{h:1,v:5}}}}}}}}}}}}}},b:{name:"f",fsize:{h:1}}}},"6C":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/5,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/4,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:1,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:1,v:[4,5]}},b:{name:"f",fsize:{h:1,v:5}}}}}}}}}}}}}}}},"6J":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",height:1/4,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:1,v:[3,4]}},b:{name:"d",fsize:{h:1,v:4}}}}}}}}}}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[1,5]}},b:{name:"f",fsize:{h:5}}}}}}},"6E":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/4,fsize:{h:2,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:2,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:2,v:[4,5]}},b:{name:"f",fsize:{h:2,v:5}}}}}}}}}}}}}}}},"6W":{mode:"v",cells:{a:{name:"a",width:1/6,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/5,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/4,fsize:{h:[2,3]}},b:{layout:{mode:"v",cells:{a:{name:"d",width:1/3,fsize:{h:[3,4]}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[4,5]}},b:{name:"f",fsize:{h:5}}}}}}}}}}}}}}}},"7H":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:1/5,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/4,fsize:{h:[1,2],v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:[1,2],v:[4,5]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:[1,2],v:[5,6]}},b:{name:"f",fsize:{h:[1,2],v:6}}}}}}}}}}}}}},b:{name:"g",fsize:{h:2}}}}}}},"7I":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:1/5,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/4,fsize:{h:[3,4],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"d",width:1/3,fsize:{h:[4,5],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[5,6],v:[1,2]}},b:{name:"f",fsize:{h:6,v:[1,2]}}}}}}}}}}}}}},b:{name:"g",fsize:{v:2}}}}}}}};dhtmlXLayoutObject.prototype._availAutoSize={"1C":{h:["a"],v:["a"]},"2E":{h:["a;b"],v:["a","b"]},"2U":{h:["a","b"],v:["a;b"]},"3E":{h:["a;b;c"],v:["a","b","c"]},"3W":{h:["a","b","c"],v:["a;b;c"]},"3J":{h:["a;c","b"],v:["a;b","b;c"]},"3L":{h:["a","b;c"],v:["a;b","a;c"]},"3T":{h:["a;b","a;c"],v:["a","b;c"]},"3U":{h:["a;c","b;c"],v:["a;b","c"]},"4H":{h:["a","b;c","d"],v:["a;b;d","a;c;d"]},"4I":{h:["a;b;d","a;c;d"],v:["a","b;c","d"]},"4T":{h:["a;b","a;c","a;d"],v:["a","b;c;d"]},"4U":{h:["a;d","b;d","c;d"],v:["a;b;c","d"]},"4E":{h:["a;b;c;d"],v:["a","b","c","d"]},"4W":{h:["a","b","c","d"],v:["a;b;c;d"]},"4A":{h:["a;b","c","d"],v:["a;c;d","b;c;d"]},"4L":{h:["a","b","c;d"],v:["a;b;c","a;b;d"]},"4J":{h:["a;b;c","a;b;d"],v:["a","b","c;d"]},"4F":{h:["a;c;d","b;c;d"],v:["a;b","c","d"]},"4G":{h:["a;b;c","d"],v:["a;d","b;d","c;d"]},"4C":{h:["a","b;c;d"],v:["a;b","a;c","a;d"]},"5H":{h:["a","b;c;d","e"],v:["a;b;e","a;c;e","a;d;e"]},"5I":{h:["a;b;e","a;c;e","a;d;e"],v:["a","b;c;d","e"]},"5U":{h:["a;e","b;e","c;e","d;e"],v:["a;b;c;d","e"]},"5E":{h:["a;b;c;d;e"],v:["a","b","c","d","e"]},"5W":{h:["a","b","c","d","e"],v:["a;b;c;d;e"]},"5K":{h:["a;b;c","d;e"],v:["a;d","b;d","c;d","a;e","b;e","c;e"]},"5S":{h:["a;b","c;d;e"],v:["a;c","a;d","a;e","b;c","b;d","b;e"]},"5G":{h:["a;b;c","d","e"],v:["a;d;e","b;d;e","c;d;e"]},"5C":{h:["a","b","c;d;e"],v:["a;b;c","a;b;d","a;b;e"]},"6H":{h:["a","b;c;d;e","f"],v:["a;b;f","a;c;f","a;d;f","a;e;f"]},"6I":{h:["a;b;f","a;c;f","a;d;f","a;e;f"],v:["a","b;c;d;e","f"]},"6A":{h:["a;b;c;d;e","f"],v:["a;f","b;f","c;f","d;f","e;f"]},"6C":{h:["a","b;c;d;e;f"],v:["a;b","a;c","a;d","a;e","a;f"]},"6J":{h:["a;b;c;d","e","f"],v:["a;e;f","b;e;f","c;e;f","d;e;f"]},"6E":{h:["a","b","c;d;e;f"],v:["a;b;c","a;b;d","a;b;e","a;b;f"]},"6W":{h:["a","b","c","d","e","f"],v:["a;b;c;d;e;f"]},"7H":{h:["a","b;c;d;e;f","g"],v:["a;b;g","a;c;g","a;d;g","a;e;g","a;f;g"]},"7I":{h:["a;b;g","a;c;g","a;d;g","a;e;g","a;f;g"],v:["a","b;c;d;e;f","g"]}};dhtmlXLayoutObject.prototype.setSeparatorSize=function(n,t){var r,i;if(typeof n=="number"){r=this.setSeparatorSize({index:n,current:-1},t);r.sep!=null&&r.sep._setWH(t);return}for(i in this.cdata){if(this.cdata[i].dataType=="layout"&&this.cdata[i].dataNested==!0&&this.cdata[i].dataObj!=null&&(n=this.cdata[i].dataObj.setSeparatorSize(n,t),n.sep!=null))return n;if(i=="a"&&this.sep!=null&&(n.current++,n.index==n.current))return{sep:this.sep}}return n};window.dhtmlXLayoutCell=function(n,t){var i,r;return dhtmlXCellObject.apply(this,[n,"_layout"]),i=this,this.layout=t,this.conf.skin=this.layout.conf.skin,this.conf.mode=this.layout.conf.mode,this.conf.collapsed=!1,this.conf.fixed={w:!1,h:!1},this.conf.docked=!0,this.conf.skin=="material"?(this.conf.min_width=42,this.conf.min_height=26):(this.conf.min_width=26,this.conf.min_height=26),this.attachEvent("_onCellUnload",function(){this.cell.childNodes[this.conf.idx.hdr].ondblclick=null;this.conf.mode!="c"&&(this.cell.childNodes[this.conf.idx.hdr].lastChild.onclick=null);this._unloadDocking();this.layout=null;i=null}),this._hdrInit(),this.cell.childNodes[this.conf.idx.hdr].ondblclick=function(){var n=i.layout._getMainInst();n._callMainEvent("onDblClick",[i.conf.name]);n=null},this.attachEvent("_onContentLoaded",function(){var n=this.layout._getMainInst();n._callMainEvent("onContentLoaded",[this.conf.name]);n=null}),this.conf.mode!="c"&&(r=document.createElement("DIV"),r.title=this.i18n.expand,r.className="dhxlayout_arrow dhxlayout_arrow_"+this.conf.mode+this._idd,this.cell.childNodes[this.conf.idx.hdr].appendChild(r),r.onclick=function(){i.conf.collapsed?i.expand():i.collapse()},r=null),this.attachEvent("_onBeforeContentAttach",function(n){(n=="tabbar"||n=="layout"||n=="acc")&&this._hideBorders();n=="sidebar"&&this.conf.skin!="dhx_skyblue"&&this.conf.skin!="dhx_terrace"&&(this._hideBorders(),this.showHeader())}),this._initDocking(),this};dhtmlXLayoutCell.prototype=new dhtmlXCellObject;dhtmlXLayoutCell.prototype.i18n={expand:"Expand / Collapse"};dhtmlXLayoutCell.prototype.getId=function(){return this.conf.name};dhtmlXLayoutCell.prototype._initDocking=function(){var n=this;this.dock=function(){var n=this.layout._getMainInst(),t;if(n.dhxWins==null||this.conf.docked){n=null;return}t=n.dhxWins.window(this.conf.name);t.close();this._attachFromCell(t);this.conf.docked=!0;this.conf.dock_collapsed||this.expand();n._callMainEvent("onDock",[this.conf.name]);n=t=null};this.undock=function(n,t,i,r){var f=this.layout._getMainInst(),u;if(f.dhxWins==null||this.conf.docked==!1){f=null;return}this.conf.dock_collapsed=this.conf.collapsed;this.conf.collapsed||this.collapse();f.dhxWins.window(this.conf.name)!=null?(u=f.dhxWins.window(this.conf.name),u.show()):(n==null&&(n=20),t==null&&(t=20),i==null&&(i=320),r==null&&(r=200),u=f.dhxWins.createWindow(this.conf.name,n,t,i,r),u.button("close").hide(),u.addUserButton("dock",99,"Dock"),u.button("dock").show(),u.button("dock").attachEvent("onClick",this._doOnDockClick),u.setText(this.getText()),u.attachEvent("onClose",this._doOnDockWinClose));this.conf.docked=!1;u._attachFromCell(this);f._callMainEvent("onUnDock",[this.conf.name]);f=u=null};this._doOnDockClick=function(){n.dock()};this._doOnDockWinClose=function(n){return n.hide(),!1};this._unloadDocking=function(){n=null}};dhtmlXLayoutCell.prototype._hdrInit=function(){var n="",t;window.dhx4.isIE?navigator.userAgent.indexOf("MSIE 9.0")!=-1?n=" dhx_cell_hdr_text_ie9":window.dhx4.isIE8?n=" dhx_cell_hdr_text_ie8":window.dhx4.isIE7?n=" dhx_cell_hdr_text_ie7":window.dhx4.isIE6&&(n=" dhx_cell_hdr_text_ie6"):(window.dhx4.isChrome||window.dhx4.isKHTML)&&(n=" dhx_cell_hdr_text_chrome");t=document.createElement("DIV");t.className="dhx_cell_hdr";t.innerHTML="<div class='dhx_cell_hdr_text"+n+"'><\/div>";this.cell.insertBefore(t,this.cell.childNodes[this.conf.idx.cont]);t=null;this.conf.ofs_nodes.t._getHdrHeight="func";this.conf.hdr={visible:!0};this.conf.idx_data.hdr="dhx_cell_hdr";this._updateIdx();this.attachEvent("_onSetSize",this._hdrOnSetSize);this.attachEvent("_onBorderChange",this._hdrOnBorderChange);this.attachEvent("_onViewSave",this._hdrOnViewSave);this.attachEvent("_onViewRestore",this._hdrOnViewRestore)};dhtmlXLayoutCell.prototype.showHeader=function(n){this.conf.hdr.visible||this.conf.collapsed||this.conf.hdr.w_saved>this._getAvailWidth()||this.conf.hdr.h_saved>this._getAvailHeight()||(this.conf.hdr.w_saved=this.conf.hdr.h_saved=null,this.conf.hdr.visible=!0,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr",n!==!0&&this._adjustCont(this._idd))};dhtmlXLayoutCell.prototype.hideHeader=function(n){this.conf.hdr.visible&&!this.conf.collapsed&&(this.conf.hdr.w_saved=this._getMinWidth(this._idd),this.conf.hdr.h_saved=this._getMinHeight(this._idd),this.conf.hdr.visible=!1,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden",this._hdrUpdBorder(),this._mtbUpdBorder(),n!==!0&&this._adjustCont(this._idd))};dhtmlXLayoutCell.prototype.isHeaderVisible=function(){return this.conf.hdr.visible==!0};dhtmlXLayoutCell.prototype.showArrow=function(){this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display=""};dhtmlXLayoutCell.prototype.hideArrow=function(){this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display="none"};dhtmlXLayoutCell.prototype.isArrowVisible=function(){return this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display==""};dhtmlXLayoutCell.prototype.setText=function(n){this.conf.hdr.text=n;this._hdrUpdText()};dhtmlXLayoutCell.prototype.getText=function(){return this.conf.hdr.text};dhtmlXLayoutCell.prototype.setCollapsedText=function(n){this.conf.hdr.text_collapsed=n;this._hdrUpdText()};dhtmlXLayoutCell.prototype.getCollapsedText=function(){return this.conf.hdr.text_collapsed!=null?this.conf.hdr.text_collapsed:this.conf.hdr.text};dhtmlXLayoutCell.prototype._hdrUpdText=function(){var n=this.conf.collapsed==!0&&this.conf.hdr.text_collapsed!=null?this.conf.hdr.text_collapsed:this.conf.hdr.text;this.cell.childNodes[this.conf.idx.hdr].firstChild.innerHTML="<span>"+n+"<\/span>"};dhtmlXLayoutCell.prototype._hdrUpdBorder=function(){this.conf.borders==!0?this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr"+(this.conf.hdr.visible?"":" dhx_cell_hdr_hidden"):this.conf.hdr.visible||(this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden_no_borders")};dhtmlXLayoutCell.prototype._hdrOnSetSize=function(){this.conf.collapsed&&this.conf.mode=="v"&&this._fitHdr()};dhtmlXLayoutCell.prototype._hdrOnBorderChange=function(){this.hideHeader(!0);this._hdrUpdBorder()};dhtmlXLayoutCell.prototype._hdrOnViewSave=function(n){this.views[n].hdr_vis=this.conf.hdr.visible};dhtmlXLayoutCell.prototype._hdrOnViewRestore=function(n){this.conf.hdr.visible!=this.views[n].hdr_vis&&this[this.views[n].hdr_vis?"showHeader":"hideHeader"](!0);this.views[n].hdr_vis=null;delete this.views[n].hdr_vis};dhtmlXLayoutCell.prototype._getHdrHeight=function(n){return this.conf.collapsed&&this.conf.mode=="v"&&n!==!0?27:this.cell.childNodes[this.conf.idx.hdr].offsetHeight};dhtmlXLayoutCell.prototype._fitHdr=function(){var n=this.cell.childNodes[this.conf.idx.hdr],t;this.conf.collapsed==!0?(typeof dhtmlXLayoutObject.prototype._confGlob.hdrColH=="undefined"&&(n.style.height=this.cell.offsetHeight+"px",dhtmlXLayoutObject.prototype._confGlob.hdrColH=parseInt(n.style.height)-this._getHdrHeight(!0)),t=this.cell.offsetHeight+dhtmlXLayoutObject.prototype._confGlob.hdrColH,n.style.height=t+"px",n.firstChild.style.width=t-39+"px"):n.firstChild.style.width=n.style.height=null;n=null};dhtmlXLayoutCell.prototype.expand=function(n){var t,i,r,u,f,e;if(!this.conf.collapsed)return!0;if(t=this.layout,this.conf.mode=="v"){if(i=n?t.conf.hh:t.cdata[t.conf.nextCell[this._idd]]._getMinWidth(this._idd),r=t.cont.offsetWidth-t.conf.sw,i+this.conf.size.w_avl>r)return t=null,!1}else if(u=n?t.conf.hh:t.cdata[t.conf.nextCell[this._idd]]._getMinHeight(this._idd)+t.cdata[t.conf.nextCell[this._idd]]._getHdrHeight(),f=t.cont.offsetHeight-t.conf.sw,u+this.conf.size.h_avl>f)return t=null,!1;if(this.conf.docked==!1){this.dock();return}return this.conf.hdr.visible==!1&&(this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden",this._hdrUpdBorder()),this.cell.className=String(this.cell.className).replace(/\s{0,}dhxlayout_collapsed_[hv]/gi,""),this.conf.collapsed=!1,this.conf.mode=="v"?(this.conf.size.w=Math.min(r-i,this.conf.size.w_saved),this.conf.size.w_saved=this.conf.size.w_avl=null):(this.conf.size.h=Math.min(f-u,this.conf.size.h_saved),this.conf.size.h_saved=this.conf.size.h_avl=null),this.conf.mode=="v"&&this._fitHdr(),t.setSizes(t.conf.nextCell[this._idd],t.conf.nextCell[this._idd],n==!0,"expand"),t.sep._blockSep(),t=null,this._hdrUpdText(),e=this.layout._getMainInst(),e._callMainEvent("onExpand",[this.conf.name]),e=null,!0};dhtmlXLayoutCell.prototype.collapse=function(){var n,t;return this.conf.collapsed?!1:(n=this.layout,n.cdata[n.conf.nextCell[this._idd]].expand(!0)==!1)?!1:(this.conf.mode=="v"?(this.conf.size.w_saved=this.conf.size.w,this.conf.size.w_avl=this._getMinWidth(this._idd)):(this.conf.size.h_saved=this.conf.size.h,this.conf.size.h_avl=this._getMinHeight(this._idd)+this._getHdrHeight()),this.conf.hdr.visible==!1&&(this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr"),this.cell.className+=" dhxlayout_collapsed_"+this.conf.mode,this.conf.collapsed=!0,this.conf.mode=="v"?this.conf.size.w=n.conf.hh:this.conf.size.h=this._getHdrHeight(),n.setSizes(n.conf.nextCell[this._idd],n.conf.nextCell[this._idd],!1,"collapse"),n.sep._blockSep(),n=null,this._hdrUpdText(),t=this.layout._getMainInst(),t._callMainEvent("onCollapse",[this.conf.name]),t=null,!0)};dhtmlXLayoutCell.prototype.isCollapsed=function(){return this.conf.collapsed==!0};dhtmlXLayoutCell.prototype.setMinWidth=function(n){this.conf.min_width=parseInt(n)||0};dhtmlXLayoutCell.prototype.setMinHeight=function(n){this.conf.min_height=parseInt(n)||0};dhtmlXLayoutCell.prototype._getMinWidth=function(n){if(this.dataType=="layout"&&this.dataObj!=null){if(this.layout._getMainInst()!=this.dataObj._getMainInst())return this.dataObj._getAvailWidth();if(this.dataObj.conf.pattern=="1C")return Math.max(this.conf.min_width,this.dataObj.cdata.a._getMinWidth(n));if(this.dataObj.conf.mode=="v"){var t=n||this._idd;return this.dataObj.cdata[t].conf.collapsed&&(t=this.dataObj.conf.nextCell[t]),Math.max(this.conf.min_width,this.dataObj.cdata[t]._getMinWidth(n)+this.dataObj.cdata[this.dataObj.conf.nextCell[t]]._getWidth()+this.dataObj.conf.sw)}return Math.max(this.conf.min_width,this.dataObj.cdata.a._getMinWidth(n),this.dataObj.cdata.b._getMinWidth(n))}return Math.max(this.conf.min_width,1)};dhtmlXLayoutCell.prototype._getMinHeight=function(n){var i=0,t;return(this.conf.idx.menu!=null&&(i+=this.cell.childNodes[this.conf.idx.menu].offsetHeight),this.dataType=="layout"&&this.dataObj!=null)?this.layout._getMainInst()!=this.dataObj._getMainInst()?this.dataObj._getAvailHeight():this.dataObj.conf.pattern=="1C"?Math.max(this.conf.min_height,this.dataObj.cdata.a._getMinHeight(n)):this.dataObj.conf.mode=="h"?(t=n,this.dataObj.cdata[t].conf.collapsed&&(t=this.dataObj.conf.nextCell[t]),Math.max(this.conf.min_height,this.dataObj.cdata[t]._getMinHeight(n)+this.dataObj.cdata[t]._getHdrHeight()+this.dataObj.cdata[this.dataObj.conf.nextCell[t]]._getHeight()+this.dataObj.conf.sw)):Math.max(this.conf.min_height,this.dataObj.cdata.a._getMinHeight(n)+this.dataObj.cdata.a._getHdrHeight(),this.dataObj.cdata.b._getMinHeight(n)+this.dataObj.cdata.b._getHdrHeight()):Math.max(this.conf.min_height,i)};dhtmlXLayoutCell.prototype._getAvailWidth=function(n){if(this.dataType=="layout"&&this.dataObj!=null){if(this.dataObj.conf.pattern=="1C")return this.dataObj.cdata.a._getAvailWidth(n);if(this.dataObj.conf.mode=="v"){var t=this.dataObj.cdata.a.conf.collapsed==!0,i=this.dataObj.cdata.b.conf.collapsed==!0;return n=="a"?this.dataObj.cdata[i?"a":"b"]._getAvailWidth(n):this.dataObj.cdata[t?"b":"a"]._getAvailWidth(n)}return Math.min(this.dataObj.cdata.a._getAvailWidth(n),this.dataObj.cdata.b._getAvailWidth(n))}return this.cell.offsetWidth-this._getMinWidth()};dhtmlXLayoutCell.prototype._getAvailHeight=function(n){var i,r,t;return this.dataType=="layout"&&this.dataObj!=null?this.dataObj.conf.pattern=="1C"?this.dataObj.cdata.a._getAvailHeight(n):this.dataObj.conf.mode=="h"?(i=this.dataObj.cdata.a.conf.collapsed==!0,r=this.dataObj.cdata.b.conf.collapsed==!0,n=="a"?this.dataObj.cdata[r?"a":"b"]._getAvailHeight(n):this.dataObj.cdata[i?"b":"a"]._getAvailHeight(n)):Math.min(this.dataObj.cdata.a._getAvailHeight(n),this.dataObj.cdata.b._getAvailHeight(n)):(t=this._getHdrHeight(),this.conf.mode=="v"&&this.conf.collapsed&&(t=this.conf.hh),this.cell.offsetHeight-t-this._getMinHeight())};dhtmlXLayoutCell.prototype.setWidth=function(n){var t,i,f,e,u;if(this.conf.mode=="v"){if(this.conf.collapsed)return;if(t=this.layout,i=t.cdata[t.conf.nextCell[this._idd]],i.conf.collapsed){n=n+t.conf.sw+i._getWidth();r=t=i=null;return}f=this._getMinWidth(this._idd);e=t.cont.offsetWidth-i._getMinWidth(this._idd)-t.conf.sw;n=Math.max(f,Math.min(n,e));this.conf.size.w=n;t.setSizes(i._idd,i._idd);t=i=null}else{if(this.layout==null||this.layout.parentLayout==null)return;var r=this.layout.parentLayout,t=this.layout,i=t.cdata[t.conf.nextCell[this._idd]];for(u in r.cdata)r.cdata[u].dataObj==t&&r.cdata[u].setWidth(n);r=t=null}};dhtmlXLayoutCell.prototype.setHeight=function(n){var t,r,i,f,e,u;if(this.conf.mode=="h"){if(this.conf.collapsed)return;if(t=this.layout,r=t.cdata[t.conf.nextCell[this._idd]],r.conf.collapsed){if(n=n+t.conf.sw+r._getHeight(),i=this.layout!=null&&this.layout.parentLayout!=null?this.layout.parentLayout:null,i!=null)for(u in i.cdata)i.cdata[u].dataObj==t&&i.cdata[u].setHeight(n);i=t=r=null;return}f=this._getMinHeight(this._idd)+this._getHdrHeight();e=t.cont.offsetHeight-r._getMinHeight(this._idd)-r._getHdrHeight()-t.conf.sw;n=Math.max(f,Math.min(n,e));this.conf.size.h=n;t.setSizes(r._idd,r._idd);t=r=null}else{if(this.layout==null||this.layout.parentLayout==null)return;var i=this.layout.parentLayout,t=this.layout,r=t.cdata[t.conf.nextCell[this._idd]];for(u in i.cdata)i.cdata[u].dataObj==t&&i.cdata[u].setHeight(n);i=t=null}};dhtmlXLayoutCell.prototype.getWidth=function(){return this.conf.size.w};dhtmlXLayoutCell.prototype.getHeight=function(){return this.conf.size.h};dhtmlXLayoutCell.prototype.fixSize=function(n,t){this.conf.fixed.w=window.dhx4.s2b(n);this.conf.fixed.h=window.dhx4.s2b(t);var i=this.layout._getMainInst(),r={};i.forEachItem(function(n){var f,u,t,i;if(n.conf.fsize!=null){f=n.getId();u={h:n.conf.fixed.w==!0,v:n.conf.fixed.h==!0};for(t in u)if(u[t]==!0&&n.conf.fsize[t]!=null)for(n.conf.fsize[t]instanceof Array||(n.conf.fsize[t]=[n.conf.fsize[t]]),i=0;i<n.conf.fsize[t].length;i++)r[n.conf.fsize[t][i]]=!0}n=null});i._forEachSep(function(n){n._lockSep(r[n.conf.idx]==!0);n=null});i=null};dhtmlXCellObject.prototype.attachLayout=function(n){this.callEvent("_onBeforeContentAttach",["layout"]);var t=document.createElement("DIV");return t.style.width="100%",t.style.height="100%",t.style.position="relative",t.style.overflow="hidden",this._attachObject(t),typeof this._layoutMainInst!="undefined"&&(t._layoutMainInst=this._layoutMainInst),typeof dhtmlXLayoutCell=="function"&&this instanceof window.dhtmlXLayoutCell&&(t._isParentCell=!0,this.conf.skin=="material"&&String(this.cell.className).match(/dhx_cell_nested_layout/)==null&&(this.cell.className+=" dhx_cell_nested_layout")),typeof dhtmlXAccordionCell=="function"&&this instanceof window.dhtmlXAccordionCell&&(t._ofs=this.conf.skin=="material"?{t:14,r:14,b:14,l:14}:{t:-1,r:-1,l:-1,b:-1}),typeof dhtmlXTabBarCell=="function"&&this instanceof window.dhtmlXTabBarCell&&(this.conf.skin=="dhx_skyblue"&&(t._ofs={t:-1,r:-1,b:-1,l:-1}),this.conf.skin=="material"&&(t._ofs={t:8,r:8,b:8,l:8})),typeof dhtmlXSideBarCell=="function"&&this instanceof window.dhtmlXSideBarCell&&(this.conf.skin=="dhx_web"?(t._ofs={l:8},this.sidebar.conf.autohide==!0&&(t._ofs.l=0),this.sidebar.conf.header==!0&&(t._ofs.t=9)):this.conf.skin=="dhx_terrace"?(t._ofs={l:11},this.sidebar.conf.autohide==!0&&(t._ofs.l=0),this.sidebar.conf.header==!0&&(t._ofs.t=10)):t._ofs={l:-1}),typeof dhtmlXCarouselCell=="function"&&this instanceof window.dhtmlXCarouselCell&&this._hideBorders(),typeof dhtmlXWindowsCell=="function"&&this instanceof window.dhtmlXWindowsCell&&this.conf.skin=="material"&&(t._ofs={t:14,r:14,b:14,l:14}),typeof n=="string"&&(n={pattern:n}),typeof n.skin=="undefined"&&(n.skin=this.conf.skin),n.parent=t,this.dataType="layout",this.dataObj=new dhtmlXLayoutObject(n),this instanceof window.dhtmlXLayoutCell&&(this.dataObj.parentLayout=this.layout),t._layoutMainInst=null,n.parent=null,t=n=null,this.callEvent("_onContentAttach",[]),this.dataObj};dhtmlXTabBar.prototype=new dhtmlXCellTop;dhtmlXTabBar.prototype._fixTabsOfs=function(){this.conf.tabsOfs={dhx_skyblue:1,dhx_web:0,dhx_terrace:1,material:0}[this.conf.skin]};dhtmlXTabBar.prototype.cells=dhtmlXTabBar.prototype.tabs=function(n){return this.t[n]?this.t[n].cell:null};dhtmlXTabBar.prototype.getAllTabs=function(){var n=[];for(var t in this.t)n.push(t);return n};dhtmlXTabBar.prototype._setTabActive=function(n,t){this.t[n]&&!this.t[n].conf.active&&(typeof t=="undefined"&&(t=!0),t!=!0||this.callEvent("onSelect",[n,this.conf.lastActive])===!0)&&(this.setTabInActive(),this.t[n].conf.active=!0,this.conf.contZone&&(this.t[n].cell.cell.style.visibility="visible",this.t[n].cell.cell.style.top="0px",this.t[n].cell.cell.style.zIndex=1),this.t[n].tab.className=this._tabCss(n),this.conf.lastActive=n,this.setSizes(),this.conf.url_demand==!0&&this._loadURLOnDemand(n))};dhtmlXTabBar.prototype.setTabInActive=function(){this.conf.lastActive!=null&&this.t[this.conf.lastActive]&&(this.t[this.conf.lastActive].conf.active=!1,this.conf.contZone&&(this.t[this.conf.lastActive].cell.cell.style.visibility="hidden",this.t[this.conf.lastActive].cell.cell.style.top="-5000px",this.t[this.conf.lastActive].cell.cell.style.zIndex=0),this.t[this.conf.lastActive].tab.className=this._tabCss(this.conf.lastActive),this.conf.lastActive=null)};dhtmlXTabBar.prototype._isTabActive=function(n){return n==this.conf.lastActive&&this.conf.lastActive!=null};dhtmlXTabBar.prototype.getActiveTab=function(){return this.conf.lastActive};dhtmlXTabBar.prototype.goToNextTab=function(){var n=this._getNextVisible(this.conf.lastActive,!0);n!=null&&this._setTabActive(n)};dhtmlXTabBar.prototype.goToPrevTab=function(){var n=this._getPrevVisible(this.conf.lastActive,!0);n!=null&&this._setTabActive(n)};dhtmlXTabBar.prototype._enableTab=function(n,t){this.t[n]&&!this.t[n].conf.enabled&&(this.t[n].conf.enabled=!0,this.t[n].tab.className=this._tabCss(n),t==!0&&this._setTabActive(n))};dhtmlXTabBar.prototype._disableTab=function(n,t){this.t[n]&&this.t[n].conf.enabled&&(this.t[n].conf.enabled=!1,this.t[n].tab.className=this._tabCss(n),t!==!1&&this.conf.lastActive==n&&(t==!0&&(t=this._getNextVisible(n)||this._getPrevVisible(n)),this._setTabActive(t)))};dhtmlXTabBar.prototype._isTabEnabled=function(n){return this.t[n]!=null&&this.t[n].conf.enabled==!0};dhtmlXTabBar.prototype._setTabText=function(n,t,i){if(this.t[n]){var r=!1;(typeof i=="undefined"||i==null)&&(i=this._getLabelWidth(t,this.t[n].conf.close),r=!0);this.t[n].tab.style.width=i+"px";this.t[n].tab.childNodes[0].innerHTML=t;this.t[n].conf.text=t;this.t[n].conf.width=i;this.t[n].conf.autowidth=r}};dhtmlXTabBar.prototype._getTabText=function(n){return this.t[n]?this.t[n].conf.text:null};dhtmlXTabBar.prototype._removeTab=function(n,t,i){var u,f,e,r;if(this.t[n]){if(i!=!0&&this.t[n].conf.remove!=!0){this.t[n].conf.remove=!0;this._hideTab(n,t);return}typeof t=="undefined"&&(t=!0);u=this._getNextVisible(n);f=this._getPrevVisible(n);this.t[n].conf.transEv==!0&&(this.t[n].tab.removeEventListener(this.conf.transEv,this._doOnTrEnd,!1),this.t[n].conf.transEv=!1);for(e in this.t[n].conf)this.t[n].conf[e]=null;this.t[n].conf=null;delete this.t[n].conf;this.t[n].cell._unload();this.t[n].cell=null;this.t[n].tab.parentNode.removeChild(this.t[n].tab);this.t[n].tab=null;this.t[n]=null;delete this.t[n];this.conf.urls[n]=null;delete this.conf.urls[n];this.conf.lastActive==n?(this.conf.lastActive=null,t!=!1&&(r=t==!0?u||f||this._getFirstVisible():t,r!=null&&this._setTabActive(r))):i!=!0&&this._adjustTabs()}};dhtmlXTabBar.prototype.clearAll=function(){for(var n in this.t)this._removeTab(n,!1,!0);this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px"};dhtmlXTabBar.prototype.moveTab=function(n,t){if(this.t[n]&&!(t<0)){t+=1;var i=this.tabsArea.childNodes[1].firstChild;i.childNodes[t]!=this.t[n].tab&&(i.removeChild(this.t[n].tab),t>=i.childNodes.length?i.appendChild(this.t[n].tab):i.insertBefore(this.t[n].tab,i.childNodes[t]));i=null}};dhtmlXTabBar.prototype._getIndex=function(n){for(var r=-1,i=this.tabsArea.childNodes[1].firstChild,t=1;t<i.childNodes.length;t++)i.childNodes[t]._tabId==n&&(r=t-1);return i=null,r};dhtmlXTabBar.prototype.getNumberOfTabs=function(n){var t=0;for(var i in this.t)t+=n!=!0?1:this.t[i].conf.visible==!0?1:0;return t};dhtmlXTabBar.prototype.forEachCell=dhtmlXTabBar.prototype.forEachTab=function(n){for(var t in this.t)n.apply(window,[this.t[t].cell])};dhtmlXTabBar.prototype.enableAutoReSize=function(){this._initFSResize()};dhtmlXTabBar.prototype.setArrowsMode=function(n){(n={auto:"auto",always:"always"}[String(n)],n!=null&&n!=this.conf.mode)&&(this.conf.arwMode=n,n=="always"&&(this.tabsArea.childNodes[0].className="dhxtabbar_tabs_ar_left",this.tabsArea.childNodes[2].className="dhxtabbar_tabs_ar_right"),this.setSizes())};dhtmlXTabBar.prototype._checkArrows=function(){var i=!1,r,u,n,t;if(this.conf.arwMode=="auto"){r=0;for(u in this.t)r+=this.t[u].tab.offsetWidth;n=this.tabsArea.childNodes[0];t=this.tabsArea.childNodes[2];r>this.cont.offsetWidth?n.className.search(/dhxtabbar_tabs_ar_hidden/)>=0&&(n.className=n.className.replace(/\s{0,}dhxtabbar_tabs_ar_hidden/,""),t.className=t.className.replace(/\s{0,}dhxtabbar_tabs_ar_hidden/,""),i=!0):n.className.search(/dhxtabbar_tabs_ar_hidden/)<1&&(n.className+=" dhxtabbar_tabs_ar_hidden",t.className+=" dhxtabbar_tabs_ar_hidden",i=!0);n=t=null}return i};dhtmlXTabBar.prototype._loadURLOnDemand=function(n){n!=null&&this.conf.urls[n]!=null&&(this.cells(n).attachURL(this.conf.urls[n].href,this.conf.urls[n].ajax),this.conf.urls[n]=null)};window.dhtmlXTabBarCell=function(n,t){dhtmlXCellObject.apply(this,[n,"_tabbar"]);this.tabbar=t;this.conf.skin=this.tabbar.conf.skin;this.conf.tabbar_funcs={show:"_showTab",hide:"_hideTab",isVisible:"_isTabVisible",enable:"_enableTab",disable:"_disableTab",isEnabled:"_isTabEnabled",getIndex:"_getIndex",getText:"_getTabText",setText:"_setTabText",setActive:"_setTabActive",isActive:"_isTabActive",close:"_removeTab"};this._tabbarCall=function(n){return function(){for(var i=[this._idd],t=0;t<arguments.length;t++)i.push(arguments[t]);return this.tabbar[n].apply(this.tabbar,i)}};for(var i in this.conf.tabbar_funcs)typeof this[i]!="function"&&(this[i]=this._tabbarCall(this.conf.tabbar_funcs[i]));this.attachEvent("_onCellUnload",function(){this.tabbar=null;for(var n in this.conf.tabbar_funcs)this[n]=null,this.conf.tabbar_funcs[n]=null;this.conf.tabbar_funcs=null});this.attachEvent("_onContentLoaded",function(){this.tabbar._callMainEvent("onContentLoaded",arguments);this.tabbar._callMainEvent("onTabContentLoaded",arguments)});this.attachEvent("_onContentAttach",function(){this.tabbar._adjustCell(this.tabbar.conf.lastActive)});this.attachEvent("_onBeforeContentAttach",function(n){n=="sidebar"&&this.conf.skin!="dhx_skyblue"&&this._hideBorders()})};window.dhtmlXTabBarCell.prototype=new dhtmlXCellObject;dhtmlXCellObject.prototype.attachTabbar=function(n){this.callEvent("_onBeforeContentAttach",["tabbar"]);typeof n=="string"?n={mode:n}:(typeof n!="object"||n==null)&&(n={});var t=document.createElement("DIV");return t.style.width="100%",t.style.height="100%",t.style.position="relative",t.style.overflow="hidden",typeof dhtmlXAccordionCell=="function"&&this instanceof window.dhtmlXAccordionCell&&(t._ofs=this.conf.skin=="material"?{t:-1,r:-1,b:-1,l:-1}:{t:-1}),typeof dhtmlXTabBarCell=="function"&&this instanceof window.dhtmlXTabBarCell&&(this.conf.skin=="dhx_skyblue"&&(t._ofs={t:-1,r:-1,b:-1,l:-1}),this.conf.skin=="material"&&(t._ofs={t:8,r:8,b:8,l:8})),typeof dhtmlXSideBarCell=="function"&&this instanceof window.dhtmlXSideBarCell&&(t._ofs={l:-1},this.conf.skin=="dhx_web"&&this.sidebar.conf.autohide==!0&&(t._ofs.l=0),this.conf.skin=="dhx_terrace"&&(this.sidebar.conf.autohide==!0&&(t._ofs.l=0),this.sidebar.conf.header==!0&&(t._ofs.t=-1))),typeof dhtmlXCarouselCell=="function"&&this instanceof window.dhtmlXCarouselCell&&this._hideBorders(),this._attachObject(t),n.skin=this.conf.skin,n.parent=t,this.dataType="tabbar",this.dataObj=new dhtmlXTabBar(n),n.parent=t=null,n=null,this.callEvent("_onContentAttach",[]),this.dataObj};typeof addEventListener=="function"?window.addEventListener("load",dhtmlXTabBarInitFromHTML,!1):window.attachEvent("onload",dhtmlXTabBarInitFromHTML);dhtmlXSideBar.prototype=new dhtmlXCellTop;dhtmlXSideBar.prototype._addItem=function(n){var i=typeof n.id!="undefined"?n.id:window.dhx4.newId(),t,r;if(n.type=="separator"){t=document.createElement("DIV");t.className="dhxsidebar_sep";this.side.firstChild.appendChild(t);this.s[i]={sep:t};t=null;return}n.icons_path=this.conf.icons_path;t=document.createElement("DIV");t.className="dhxsidebar_item";t.innerHTML=window.dhx4.template(this.conf.tpl_str,n);t._idd=i;this.side.firstChild.appendChild(t);t.ondragstart=function(){return!1};this.conf.single_cell==!0?r=this.conf.cell:(r=new dhtmlXSideBarCell(i,this),this.cont.appendChild(r.cell));this.t[i]={item:t,cell:r,init:n,conf:{selected:!1,visible:!0,close:close}};typeof n.bubble!="undefined"&&this._setItemBubble(i,n.bubble);this.conf.header==!0&&r.setHeaderText(window.dhx4.template(this.tpl_header,n));r=t=null;window.dhx4.s2b(n.selected)==!0?this._setItemActive(i):this._adjustCell(i);this._checkHeight()};dhtmlXSideBar.prototype.addItem=function(n){n instanceof Array||(n=[n]);for(var t=0;t<n.length;t++)this._addItem(n[t])};dhtmlXSideBar.prototype.items=dhtmlXSideBar.prototype.cells=function(n){return this.conf.single_cell==!0?this.conf.cell:this.t[n]!=null?this.t[n].cell:null};dhtmlXSideBar.prototype.forEachCell=dhtmlXSideBar.prototype.forEachItem=function(n){if(this.conf.single_cell==!0){typeof n=="function"?n.apply(window,[this.conf.cell]):typeof n=="string"&&typeof window[n]=="function"&&window[n].apply(window,[this.conf.cell]);return}for(var t in this.t)typeof n=="function"?n.apply(window,[this.t[t].cell]):typeof n=="string"&&typeof window[n]=="function"&&window[n].apply(window,[this.t[t].cell])};dhtmlXSideBar.prototype.getAllItems=function(){var n=[];for(var t in this.t)n.push(t);return n};dhtmlXSideBar.prototype.getNumberOfItems=function(){return this.getAllItems().length};dhtmlXSideBar.prototype.clearAll=function(){for(var n in this.t)this._removeItem(n,!1,!0);for(n in this.s)this.removeSep(n)};dhtmlXSideBar.prototype.setSizes=function(){this._adjustCont();this._adjustSide();this._checkHeight();this._adjustCell(this.conf.selected,!0);this.callEvent("_onSetSizes",[])};dhtmlXSideBar.prototype.setSideWidth=function(n){this.conf.width=n;this.setSizes()};dhtmlXSideBar.prototype._adjustSide=function(){this.conf.side_ofs==null&&(this.conf.side_ofs={},this.side.style.width=this.conf.width+"px",this.side.style.height=this.side.parentNode.offsetHeight+"px",this.conf.side_ofs.w=this.side.offsetWidth-parseInt(this.side.style.width),this.conf.side_ofs.h=this.side.offsetHeight-parseInt(this.side.style.height));this.side.style.width=this.conf.width-this.conf.side_ofs.w+"px";this.side.style.height=this.side.parentNode.offsetHeight-this.arw.offsetHeight-this.conf.side_ofs.h+"px";this.arw.style.width=this.side.style.width;this._scrollSide(0)};dhtmlXSideBar.prototype._checkHeight=function(){var n=this.arw.className.match(/dhxsidebar_arrows_hidden/)!=null;this.conf.side_hfix==null&&(this.conf.side_hfix=this.side.offsetHeight-this.side.clientHeight);this.side.firstChild.offsetHeight>this.side.parentNode.clientHeight-this.conf.side_hfix?n==!0&&(this.arw.className="dhxsidebar_arrows",this._adjustSide()):n==!1&&(this.arw.className="dhxsidebar_arrows dhxsidebar_arrows_hidden",this.side.firstChild.style.top="0px",this._adjustSide())};dhtmlXSideBar.prototype.removeSep=function(n){if(this.s[n]!=null){this.side.firstChild.removeChild(this.s[n].sep);this.s[n].sep=null;this.s[n]=null;try{delete this.s[n]}catch(t){}}};dhtmlXSideBar.prototype.showSide=function(){var i,r,t,n;if(this.conf.autohide==!0){if(this.sideCover==null&&this._sideCoverAttach(),this.conf.animate_items==!0&&(i=function(n,t,i){window.setTimeout(function(){n.style[i]="transform 0.3s";n.style.transform="translate(0px,0px)";n=null},t)},this.conf.transProp!==!1)){r=100;for(t in this.t)this.t[t].item.style[this.conf.transProp]="",this.t[t].item.style.transform="translate(-"+(this.conf.width+20)+"px,0px)",i(this.t[t].item,r+=50,this.conf.transProp)}n=this;window.setTimeout(function(){n.arw.style.left=n.side.style.left="0px";n.sideCover.className="dhxsidebar_side_cover dhxsidebar_side_cover_actv";n=null},50)}};dhtmlXSideBar.prototype.hideSide=function(){this.conf.autohide==!0&&(this.arw.style.left=this.side.style.left=-this.conf.width-10+"px",this.sideCover!=null&&(this.conf.transProp!==!1?this.sideCover.className="dhxsidebar_side_cover":this._sideCoverDetach()))};dhtmlXSideBar.prototype._sideCoverAttach=function(){var n=this;this.sideCover=document.createElement("DIV");this.sideCover.className="dhxsidebar_side_cover";this.arw.nextSibling!=null?this.cont.insertBefore(this.sideCover,this.arw.nextSibling):this.cont.appendChild(this.sideCover);this._sideCoverOnTrEnd=function(){this.className.match(/dhxsidebar_side_cover_actv/)==null&&n._sideCoverDetach()};this._sideCoverDetach=function(){this.sideCover!=null&&(this.conf.transProp!==!1&&this.sideCover.removeEventListener(this.conf.transEv,this._sideCoverOnTrEnd,!1),this.sideCover.parentNode.removeChild(this.sideCover),this.sideCover=null,n=null)};this.conf.transProp!==!1&&this.sideCover.addEventListener(this.conf.transEv,this._sideCoverOnTrEnd,!1)};dhtmlXSideBar.prototype._setItemActive=function(n,t){if(this.conf.selected==n){this.conf.autohide==!0&&this.hideSide();return}if(typeof t=="undefined"&&(t=!1),t!=!0||this.callEvent("onBeforeSelect",[n,this.conf.selected])===!0){var i=null;this.conf.selected!=null&&(i=this.conf.selected,this._setItemInactive(this.conf.selected));this.t[n]!=null?(this.conf.selected=n,this.t[n].selected=!0,this.t[n].item.className+=" dhxsidebar_item_selected",this.conf.single_cell!=!0&&(this.t[n].cell.cell.style.visibility="visible",this.t[n].cell.cell.style.top="0px",this.t[n].cell.cell.style.zIndex=1)):this.conf.selected=null;this._adjustCell(n);t==!0&&this.callEvent("onSelect",[n,i]);this.conf.autohide==!0&&this.hideSide()}};dhtmlXSideBar.prototype._setItemInactive=function(n){this.t[n]!=null&&(this.t[n].selected=!1,this.t[n].item.className=this.t[n].item.className.replace(/\s{0,}dhxsidebar_item_selected/gi,""),this.conf.single_cell!=!0&&(this.t[n].cell.cell.style.visibility="hidden",this.t[n].cell.cell.style.top="-5000px",this.t[n].cell.cell.style.zIndex=0))};dhtmlXSideBar.prototype._isItemActive=function(n){return this.conf.selected==n};dhtmlXSideBar.prototype._getNextVisible=function(n,t){return this._getNearVisible(n,t,"next")};dhtmlXSideBar.prototype._getPrevVisible=function(n,t){return this._getNearVisible(n,t,"previous")};dhtmlXSideBar.prototype._getFirstVisible=function(){return this._getNearVisible(null,!1,"first")};dhtmlXSideBar.prototype._getNearVisible=function(n,t,i){var r,u,f;if(i=="first")r=this.side.firstChild.firstChild,i="next";else{if(n==null||this.t[n]==null)return t?this._getFirstVisible():null;r=this.t[n].item[i+"Sibling"]}for(u=null;r!=null&&u==null;)f=r._idd,f!=null&&u==null&&this.t[f].conf.visible?u=f:r=r[i+"Sibling"];return r=null,u};dhtmlXSideBar.prototype.goToNextItem=function(n){var t=this._getNextVisible(this.conf.selected,!0);t!=null&&this._setItemActive(t,n)};dhtmlXSideBar.prototype.goToPrevItem=function(n){var t=this._getPrevVisible(this.conf.selected,!0);t!=null&&this._setItemActive(t,n)};dhtmlXSideBar.prototype.getActiveItem=function(){return this.conf.selected};dhtmlXSideBar.prototype.setTemplate=function(n,t){this.conf.tpl_name=n!=null&&this.templates[n]!=null?n:"details";this.conf.tpl_str=this.templates[this.conf.tpl_name];t!=null&&(this.conf.icons_path=t);for(var i in this.t)this.t[i].init.icons_path=this.conf.icons_path,this.t[i].item.innerHTML=window.dhx4.template(this.conf.tpl_str,this.t[i].init);this.side!=null&&(this.side.className="dhxsidebar_side dhxsidebar_tpl_"+this.conf.tpl_name);this._scrollSide!=null&&(this._scrollSide(0),this._checkHeight())};dhtmlXSideBar.prototype.templates={details:"<img class='dhxsidebar_item_icon' src='#icons_path##icon#' border='0'><div class='dhxsidebar_item_text'>#text#<\/div>",tiles:"<img class='dhxsidebar_item_icon' src='#icons_path##icon#' border='0'><div class='dhxsidebar_item_text'>#text#<\/div>",icons:"<img class='dhxsidebar_item_icon' src='#icons_path##icon#' border='0'>",icons_text:"<div class='dhxsidebar_item_icon'><img class='dhxsidebar_item_icon' src='#icons_path##icon#' border='0'><\/div><div class='dhxsidebar_item_text'>#text#<\/div>",text:"<div class='dhxsidebar_item_text'>#text#<\/div>"};dhtmlXSideBar.prototype.tpl_bubble="<div class='dhxsidebar_bubble'>#value#<\/div>";dhtmlXSideBar.prototype.tpl_header="#text#";window.dhtmlXSideBarCell=function(n,t){var i,r;dhtmlXCellObject.apply(this,[n,"_sidebar"]);i=this;this.sidebar=t;this.conf.skin=this.sidebar.conf.skin;this.conf.sidebar_funcs={show:"_showItem",hide:"_hideItem",isVisible:"_isItemVisible",setActive:"_setItemActive",isActive:"_isItemActive",setText:"_setItemText",getText:"_getItemText",remove:"_removeItem",setBubble:"_setItemBubble",getBubble:"_getItemBubble",clearBubble:"_clearItemBubble"};this._sidebarCall=function(n){return function(){for(var i=[this._idd],t=0;t<arguments.length;t++)i.push(arguments[t]);return this.sidebar[n].apply(this.sidebar,i)}};for(r in this.conf.sidebar_funcs)typeof this[r]!="function"&&(this[r]=this._sidebarCall(this.conf.sidebar_funcs[r]));this.sidebar.conf.header==!0&&(this._initHeader(),this.cell.childNodes[this.conf.idx.hdr].onclick=function(n){n=n||event;var t=n.target||n.srcElement;t.className.match(/dhx_cell_sidebar_hdr_icon/gi)!=null&&(i.sidebar.conf.clear_click=!0,i.sidebar.showSide());t=null});this.attachEvent("_onCellUnload",function(){this.conf.idx.hdr!=null&&(this.cell.childNodes[this.conf.idx.hdr].onclick=null);this.sidebar=null;for(var n in this.conf.sidebar_funcs)this[n]=this.conf.sidebar_funcs[n]=null;this.conf.sidebar_funcs=null;i=null});this.attachEvent("_onContentLoaded",function(){this.sidebar.callEvent("onContentLoaded",arguments)});this.attachEvent("_onBeforeContentAttach",function(n){(n=="tabbar"||n=="layout"||n=="acc")&&this._hideBorders();n=="sidebar"&&this.conf.skin!="dhx_skyblue"&&this._hideBorders();(this.conf.skin=="dhx_web"||this.conf.skin=="dhx_terrace")&&(n=="menu"||n=="toolbar"||n=="ribbon")&&this.cell.className.match(/dhx_cell_cont_no_top/gi)==null&&(this.cell.className+=" dhx_cell_cont_no_top")})};dhtmlXSideBarCell.prototype=new dhtmlXCellObject;dhtmlXSideBar.prototype._setItemText=function(n,t){if(this.t[n]!=null){for(var i in t)this.t[n].init[i]=t[i];this.t[n].init.icons_path=this.conf.icons_path;this.t[n].item.innerHTML=window.dhx4.template(this.conf.tpl_str,this.t[n].init);this.t[n].conf.bubble!=null&&(this.t[n].item.innerHTML+=window.dhx4.template(this.tpl_bubble,{value:this.t[n].conf.bubble}));this.conf.header==!0&&this.t[n].cell.setHeaderText(window.dhx4.template(this.tpl_header,this.t[n].init))}};dhtmlXSideBar.prototype._getItemText=function(n){var i={},t;if(this.t[n]!=null)for(t in this.t[n].init)i[t]=this.t[n].init[t];return i};dhtmlXSideBar.prototype._removeItem=function(n,t,i){var r,u,f,t;if(this.t[n]!=null){if(i!=!0&&this.t[n].conf.remove!=!0){this.t[n].conf.remove=!0;this._hideItem(n,t);return}typeof t=="undefined"&&(t=!0);r=this._getNextVisible(n);u=this._getPrevVisible(n);this.t[n].conf.transEv==!0&&(this.t[n].item.removeEventListener(this.conf.transEv,this._doOnTrEnd),this.t[n].conf.transEv=!1);this.conf.single_cell!=!0&&(this.t[n].cell._unload(),this.t[n].cell=null);this.t[n].item.ondragstart=null;this.t[n].item.parentNode.removeChild(this.t[n].item);this.t[n].item=null;for(f in this.t[n])this.t[n][f]=null;this.t[n]=null;try{delete this.t[n]}catch(e){}this.conf.selected==n&&t!=!1?(this.conf.selected=null,t=t==!0?r||u||this._getFirstVisible():t,t!=null&&this._setItemActive(t)):i!=!0&&this._checkHeight()}};dhtmlXSideBar.prototype._showItem=function(n,t){this.t[n]!=null&&this.t[n].conf.visible!=!0&&this.t[n].conf.transActv!=!0&&(this.conf.transProp!==!1?(this.t[n].conf.transActv=!0,this.t[n].conf.transMode="show",this.t[n].conf.transProp=this.conf.transProp,this.t[n].conf.transActvId=t?n:null,this.t[n].conf.transEv!=!0&&(this.t[n].item.addEventListener(this.conf.transEv,this._doOnTrEnd),this.t[n].conf.transEv=!0),this.t[n].conf.visible=!0,this.t[n].item.style[this.conf.transProp]=this.conf.transValue,this.t[n].item.className="dhxsidebar_item"):(this.t[n].conf.visible=!0,this.t[n].item.style.display="",t==!0?this._setItemActive(n):this._checkHeight()))};dhtmlXSideBar.prototype._hideItem=function(n,t){var i;if(this.t[n]!=null&&this.t[n].conf.visible==!0&&this.t[n].conf.transActv!=!0){i=!1;this.conf.selected==n&&(this.conf.selected=null,this.t[n].conf.active=!1,this.t[n].item.className="dhxsidebar_item",i=!0);var r=this._getPrevVisible(n),u=this._getNextVisible(n),t=i&&t!==!1?(t==!0?null:t)||u||r:null;this.conf.transProp!==!1?(this.t[n].conf.transActv=!0,this.t[n].conf.transMode="hide",this.t[n].conf.transProp=this.conf.transProp,this.t[n].conf.transActvId=t,this.t[n].conf.visible=!1,this.t[n].conf.transEv!=!0&&(this.t[n].item.addEventListener(this.conf.transEv,this._doOnTrEnd),this.t[n].conf.transEv=!0),this.t[n].item.style[this.conf.transProp]=this.conf.transValue,this.t[n].item.className="dhxsidebar_item dhxsidebar_item_hidden"):(this.t[n].item.style.display="none",this.t[n].conf.visible=!1,this.conf.single_cell!=!0&&(this.t[n].cell.cell.style.visibility="hidden",this.t[n].cell.cell.style.top="-5000px"),t!=null&&this._setItemActive(t),this._checkHeight(),this.t[n].conf.remove==!0&&this._removeItem(n))}};dhtmlXSideBar.prototype._isItemVisible=function(n){return this.t[n].conf.visible==!0};dhtmlXSideBar.prototype._setItemBubble=function(n,t){this.t[n]!=null&&(this.t[n].item.innerHTML=window.dhx4.template(this.conf.tpl_str,this.t[n].init)+window.dhx4.template(this.tpl_bubble,{value:String(t)}),this.t[n].conf.bubble=t)};dhtmlXSideBar.prototype._getItemBubble=function(n){return this.t[n]==null?null:typeof this.t[n].conf.bubble=="undefuned"?null:this.t[n].conf.bubble};dhtmlXSideBar.prototype._clearItemBubble=function(n){this.t[n]!=null&&(this.t[n].item.innerHTML=window.dhx4.template(this.conf.tpl_str,this.t[n].init),this.t[n].conf.bubble=null)};dhtmlXCellObject.prototype.attachSidebar=function(n){this.callEvent("_onBeforeContentAttach",["sidebar"]);n==null&&(n={});var t=document.createElement("DIV");return t.style.width="100%",t.style.height="100%",t.style.position="relative",t.style.overflow="hidden",typeof dhtmlXWindowsCell=="function"&&this instanceof window.dhtmlXWindowsCell||(this.conf.skin=="dhx_skyblue"&&(t._ofs={t:-1,r:-1,b:-1,l:-1}),this.conf.skin=="dhx_web"&&(typeof dhtmlXSideBarCell=="function"&&this instanceof window.dhtmlXSideBarCell&&(t._ofs={l:8}),typeof dhtmlXLayoutCell=="function"&&this instanceof window.dhtmlXLayoutCell&&(t._ofs={t:2}),typeof dhtmlXTabBarCell=="function"&&this instanceof window.dhtmlXTabBarCell&&(t._ofs={t:8}),typeof dhtmlXAccordionCell=="function"&&this instanceof window.dhtmlXAccordionCell&&(t._ofs={t:2})),this.conf.skin=="dhx_terrace"&&(typeof dhtmlXSideBarCell=="function"&&this instanceof window.dhtmlXSideBarCell&&(t._ofs={l:-1}),typeof dhtmlXLayoutCell=="function"&&this instanceof window.dhtmlXLayoutCell&&(t._ofs={t:-1,r:-1,b:-1,l:-1}),typeof dhtmlXTabBarCell=="function"&&this instanceof window.dhtmlXTabBarCell&&(t._ofs={t:-1}),typeof dhtmlXAccordionCell=="function"&&this instanceof window.dhtmlXAccordionCell&&(t._ofs={t:-1,r:-1,b:-1,l:-1})),this.conf.skin=="material"&&(typeof dhtmlXAccordionCell=="function"&&this instanceof window.dhtmlXAccordionCell&&(t._ofs={t:-1,r:-1,b:-1,l:-1}),typeof dhtmlXTabBarCell=="function"&&this instanceof window.dhtmlXTabBarCell&&(t._ofs={t:-1,r:-1,b:-1,l:-1}),typeof dhtmlXSideBarCell=="function"&&this instanceof window.dhtmlXSideBarCell&&(t._ofs={l:-1}))),this._attachObject(t),n.skin=this.conf.skin,n.parent=t,this.dataType="sidebar",this.dataObj=new dhtmlXSideBar(n),n.parent=t=null,n=null,this.callEvent("_onContentAttach",[]),this.dataObj};dhtmlXSideBarCell.prototype._initHeader=function(){var n=document.createElement("DIV");n.className="dhx_cell_sidebar_hdr";n.innerHTML=(this.sidebar.conf.autohide==!0?"<div class='dhx_cell_sidebar_hdr_icon'><\/div>":"")+"<div class='dhx_cell_sidebar_hdr_text"+(this.sidebar.conf.autohide==!0?" dhx_cell_sidebar_hdr_text_icon":"")+"'><\/div>";this.cell.insertBefore(n,this.cell.childNodes[this.conf.idx.cont]);n=null;this.conf.ofs_nodes.t._getHdrHeight="func";this.conf.hdr={visible:!0};this.conf.idx_data.hdr="dhx_cell_sidebar_hdr";this._updateIdx()};dhtmlXSideBarCell.prototype._getHdrHeight=function(){return this.cell.childNodes[this.conf.idx.hdr].offsetHeight};dhtmlXSideBarCell.prototype.showHeader=function(){this.conf.hdr.visible!=!0&&(this.conf.hdr.visible=!0,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_sidebar_hdr",this._adjustCont(this._idd))};dhtmlXSideBarCell.prototype.hideHeader=function(){this.conf.hdr.visible==!0&&(this.conf.hdr.visible=!1,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_sidebar_hdr dhx_cell_sidebar_hdr_hidden",this._adjustCont(this._idd))};dhtmlXSideBarCell.prototype.isHeaderVisible=function(){return this.conf.hdr.visible==!0};dhtmlXSideBarCell.prototype.setHeaderText=function(n){this.conf.text=n;var t=this.cell.childNodes[this.conf.idx.hdr];t.childNodes[t.firstChild.className=="dhx_cell_sidebar_hdr_icon"?1:0].innerHTML="<span>"+n+"<\/span>";t=null};dhtmlXSideBarCell.prototype.getHeaderText=function(){return this.conf.text};dhtmlXCarousel.prototype=new dhtmlXCellTop;dhtmlXCarousel.prototype.ef={};dhtmlXCarousel.prototype.cells=function(n){return this.cdata[n].cell};dhtmlXCarousel.prototype.forEachCell=function(n){for(var t in this.cdata)typeof n=="function"?n.apply(window,[this.cdata[t].cell]):typeof n=="string"&&typeof window[n]=="function"&&window[n].apply(window,[this.cdata[t].cell])};dhtmlXCarousel.prototype._initControls=function(){var n=this,t=this.conf.skin=="material"?["",""]:this.conf.arw;this.controls=document.createElement("DIV");this.controls.className="dhx_carousel_controls";this.controls.innerHTML="<div class='dhx_carousel_bars'><\/div><div class='dhx_carousel_btn dhx_carousel_btn_prev'>"+t[0]+"<\/div><div class='dhx_carousel_btn dhx_carousel_btn_next'>"+t[1]+"<\/div>";this.cont.appendChild(this.controls);this._doOnControlClick=function(t){var i,r,u;if(n.conf.clear_click==!0){n.conf.clear_click=!1;return}if(t=t||event,window.dhx4.dnd.evs.start!=null&&t.type!="click"&&n.conf.clear_click!=!0){if(window.dhx4.dnd._mTouch(t)==!0)return;n.conf.clear_click=!0}if(i=t.target||t.srcElement,r=null,i.className!=null)if(i.className.match(/btn_prev/)!=null)r=-1;else if(i.className.match(/btn_next/)!=null)r=1;else if(i.className.match(/dhx_carousel_onebar/)!=null&&i.className.match(/dhx_carousel_baractv/)==null)for(u=0;u<i.parentNode.childNodes.length;u++)i.parentNode.childNodes[u]==i&&(r=u-n.conf.selected);r!=null&&n._animateStart(r);i=null};typeof addEventListener=="function"?(this.controls.addEventListener("click",this._doOnControlClick,!1),window.dhx4.dnd.evs.start!=null&&this.controls.addEventListener(window.dhx4.dnd.evs.start,this._doOnControlClick,!1)):(this.controls.attachEvent("onclick",this._doOnControlClick),(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&(this.controls.onselectstart=function(n){return n=n||event,n.preventDefault&&n.preventDefault(),n.returnValue=!1,!1}));this.showControls=function(){this.controls.style.display="";this.setSizes()};this.hideControls=function(){this.controls.style.display="none";this.setSizes()};this._checkControls=function(){this.controls.childNodes[1].className="dhx_carousel_btn dhx_carousel_btn_prev"+(this.conf.selected<=0?"_dis":"");this.controls.childNodes[2].className="dhx_carousel_btn dhx_carousel_btn_next"+(this.conf.selected>=this.conf.items_count-1||this.conf.items_count==0?"_dis":"")};this._adjustControls=function(){this.controls.firstChild.style.left=Math.round(this.cont.offsetWidth/2-this.controls.firstChild.offsetWidth/2)+"px"};this._addBar=function(){var n=document.createElement("DIV");n.className="dhx_carousel_onebar";n.innerHTML="<div class='dhx_carousel_barcore'>&nbsp;<\/div>";this.controls.firstChild.appendChild(n);n=null;this._adjustControls()};this._removeBar=function(n){var t=this.controls.firstChild.lastChild;t!=null&&(t.parentNode.removeChild(t),t=null,n!==!1&&this._adjustControls())};this._setBarIndex=function(n){for(var t=0;t<this.controls.firstChild.childNodes.length;t++)this.controls.firstChild.childNodes[t].className="dhx_carousel_onebar"+(t==n?" dhx_carousel_baractv":"")};this._unloadControls=function(){for(typeof addEventListener=="function"?(this.controls.removeEventListener("click",this._doOnControlClick,!1),window.dhx4.dnd.evs.start!=null&&this.controls.removeEventListener(window.dhx4.dnd.evs.start,this._doOnControlClick,!1)):(this.controls.detachEvent("onclick",this._doOnControlClick),(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&(this.controls.onselectstart=null));this.controls.firstChild.childNodes.length>0;)this._removeBar(!1);this.cont.removeChild(this.controls);this.controls=null;n=null};this.conf.buttons!=!0&&this.hideControls();this._checkControls()};window.dhtmlXCarouselCell=function(n,t){dhtmlXCellObject.apply(this,[n,"_carousel"]);var i=this;return this.carousel=t,this.conf.skin=this.carousel.conf.skin,this.attachEvent("_onCellUnload",function(){this.carousel=null;i=null}),this.attachEvent("_onContentLoaded",function(){this.carousel._callMainEvent("onContentLoaded",[this._idd])}),this._showCover=function(){if(this.conf.cover!=!0){this._showCellCover();var n=this.cell.childNodes[this.conf.idx.cover];n.onclick=function(){i.carousel._callMainEvent("_cellCoverClick",[i._idd])};n=null}},this._hideCover=function(){this.conf.cover==!0&&(this.cell.childNodes[this.conf.idx.cover].onclick=null,this._hideCellCover())},this};dhtmlXCarouselCell.prototype=new dhtmlXCellObject;dhtmlXCarouselCell.prototype.getId=function(){return this._idd};dhtmlXCarouselCell.prototype.getIndex=function(){return this.carousel.cdata[this._idd].index};dhtmlXCarouselCell.prototype.setActive=function(){var n=this.getIndex()-this.carousel.conf.selected;n!=0&&this.carousel._animateStart(n)};dhtmlXCarouselCell.prototype.remove=function(){this.carousel._removeCell(this._idd)};dhtmlXCellObject.prototype.attachCarousel=function(n){this.callEvent("_onBeforeContentAttach",["carousel"]);var t=document.createElement("DIV");return t.style.width="100%",t.style.height="100%",t.style.position="relative",t.style.overflow="hidden",this._attachObject(t),typeof dhtmlXSideBarCell=="function"&&this instanceof window.dhtmlXSideBarCell&&this.conf.skin=="dhx_terrace"&&(t._ofs={t:-1,r:-1,b:-1,l:-1}),(typeof n=="undefined"||n==null)&&(n={}),typeof n.skin=="undefined"&&(n.skin=this.conf.skin),n.parent=t,this.dataType="carousel",this.dataObj=new dhtmlXCarousel(n),n.parent=null,t=n=null,this.callEvent("_onContentAttach",[]),this.dataObj};dhtmlXCarousel.prototype.ef.slide=!0;dhtmlXCarousel.prototype.ef.slide_conf={anim_step:25,anim_timeout:10,anim_slide:"left 0.3s"};dhtmlXCarousel.prototype.ef.slide_f={prepare:"_slide_prepare",start:"_slide_start",end:"_slide_end",update_selected:"_slide_update_selected",detect_x:"_slide_detect_x",detect_aw:"_slide_detect_area_width",cell_added:"_slide_cell_added"};dhtmlXCarousel.prototype._slide_init=function(){return this.ef.slide_conf};dhtmlXCarousel.prototype._slide_f=function(){return this.ef.slide_f};dhtmlXCarousel.prototype._slide_prepare=function(n,t){var r=this.conf.anim_step,i=this.conf.width+this.conf.ofs_item,u;t==!1&&(r=i+1);this.area._init=parseInt(this.area.style.left);u=this.ind[this.conf.selected+n];this._slide_update_selected(u);this.conf.transProp!==!1&&t!=!1?(this.conf.transEvInit!=!0&&(this.area.addEventListener(this.conf.transEv,this._animateTransEnd,!1),this.conf.transEvInit=!0),this.conf.current_dir=n,this.area.style[this.conf.transProp]=this.conf.anim_slide,this.area.style.left=this.area._init+i*-n+"px"):this._slide_start(r,0,i,n)};dhtmlXCarousel.prototype._slide_start=function(n,t,i,r){var f=!1,u;t+=n;t>=i&&(t=i,f=!0);this.area.style.left=this.area._init+t*-r+"px";f!=!0?(u=this,window.setTimeout(function(){u._slide_start(n,t,i,r);u=null},this.conf.anim_timeout)):(this.cdata[this.ind[this.conf.selected]].cell._showCover(),this._animateEnd(r))};dhtmlXCarousel.prototype._slide_end=function(n,t){n.type==this.conf.transEv&&t==this.area&&(this.area.style[this.conf.transProp]="",this.conf.transEvInit==!0&&(this.area.removeEventListener(this.conf.transEv,this._animateTransEnd,!1),this.conf.transEvInit=!1),this.cdata[this.ind[this.conf.selected]].cell._showCover(),this._animateEnd(this.conf.current_dir))};dhtmlXCarousel.prototype._slide_update_selected=function(n){this.cdata[n].cell._hideCover()};dhtmlXCarousel.prototype._slide_detect_x=function(n){var t=this.cdata[n].index;return t*(this.conf.width+this.conf.ofs_item)+this.conf.ofs_item};dhtmlXCarousel.prototype._slide_cell_added=function(n){this.conf.selected!=this.cdata[n].index&&this.cdata[n].cell._showCover();this.cdata[n].index<=this.conf.selected&&this.conf.items_count>1&&this._animateStart(1,!1)};dhtmlXCarousel.prototype._slide_detect_area_width=function(){return this.conf.items_count};dhtmlXCarousel.prototype.ef.flip=!0;dhtmlXCarousel.prototype.ef.flip_conf={anim_flip:"transform 0.3s ease-out",anim_flip_ang:-87,anim_flip_trstyle:"transform"};dhtmlXCarousel.prototype.ef.flip_f={prepare:"_flip_prepare",start:"_flip_start",end:"_flip_end",update_selected:"_flip_update_selected",detect_x:"_flip_detect_x",detect_aw:"_flip_detect_area_width",cell_added:"_flip_cell_added"};dhtmlXCarousel.prototype._flip_init=function(){var n=this.conf.transProp==!1?!1:this.ef.flip_conf;return n!==!1&&window.dhx4.isKHTML==!0&&n.anim_flip.match("webkit")==null&&(n.anim_flip=n.anim_flip.replace(/transform/,"-webkit-transform"),n.anim_flip_trstyle="webkitTransform"),n};dhtmlXCarousel.prototype._flip_f=function(){return this.ef.flip_f};dhtmlXCarousel.prototype._flip_prepare=function(n){this.conf.flip_data={fromIndex:this.conf.selected,toIndex:this.conf.selected+n,mode:0,dir:n};this._flip_start()};dhtmlXCarousel.prototype._flip_start=function(){var n=this.cdata[this.ind[this.conf.flip_data.mode==0?this.conf.flip_data.fromIndex:this.conf.flip_data.toIndex]].cell;this.area.className.match(/dhxcarousel_area_flip/)==null&&(this.area.className+=" dhxcarousel_area_flip");n.conf.tr_ev!=!0&&(n.cell.addEventListener(this.conf.transEv,this._animateTransEnd,!1),n.conf.tr_ev=!0);this.conf.flip_data.mode==0?n.cell.style[this.conf.anim_flip_trstyle]="rotateY("+String(this.conf.flip_data.dir>0?this.conf.anim_flip_ang:-this.conf.anim_flip_ang)+"deg)":(n.cell.style.visibility="visible",n.cell.style[this.conf.anim_flip_trstyle]="rotateY(0deg)");n.cell.style[this.conf.transProp]=this.conf.anim_flip;n=null};dhtmlXCarousel.prototype._flip_end=function(n,t){var i,r;if(n.type==this.conf.transEv){if(i=this.cdata[this.ind[this.conf.flip_data.mode==0?this.conf.flip_data.fromIndex:this.conf.flip_data.toIndex]].cell,t==i.cell)if(i.cell.removeEventListener(this.conf.transEv,this._animateTransEnd,!1),i.conf.tr_ev=!1,this.conf.flip_data.mode==0)i.cell.style[this.conf.transProp]="",i.cell.style.visibility="hidden",this.conf.flip_data.mode=1,this._flip_start();else{var u=this.conf.flip_data.dir,f=Math.min(this.conf.flip_data.fromIndex,this.conf.flip_data.toIndex)+1,e=Math.max(this.conf.flip_data.fromIndex,this.conf.flip_data.toIndex)-1;for(r=f;r<=e;r++)this.cdata[this.ind[r]].cell.cell.style[this.conf.anim_flip_trstyle]="rotateY("+String(this.conf.anim_flip_ang*u/Math.abs(u))+"deg)";this.area.className.match(/dhxcarousel_area_flip/)!=null&&(this.area.className=String(this.area.className).replace(/\s{0,}dhxcarousel_area_flip/gi,""));this.conf.flip_data=null;i.cell.style[this.conf.transProp]="";this._animateEnd(u)}i=null}};dhtmlXCarousel.prototype._flip_update_selected=function(){};dhtmlXCarousel.prototype._flip_detect_x=function(){return 0*(this.conf.width+this.conf.ofs_item)+this.conf.ofs_item};dhtmlXCarousel.prototype._flip_cell_added=function(n){this.conf.selected!=this.cdata[n].index?(this.cdata[n].cell.cell.style[this.conf.anim_flip_trstyle]="rotateY("+String(this.cdata[n].index<this.conf.selected?this.conf.anim_flip_ang:-this.conf.anim_flip_ang)+"deg)",this.cdata[n].cell.cell.style.visibility="hidden"):this.cdata[n].cell.cell.style[this.conf.anim_flip_trstyle]="rotateY(0deg)"};dhtmlXCarousel.prototype._flip_detect_area_width=function(){return 1};dhtmlXCarousel.prototype.ef.cards=!0;dhtmlXCarousel.prototype.ef.cards_conf={anim_cards:"left 0.3s"};dhtmlXCarousel.prototype.ef.cards_f={prepare:"_cards_prepare",start:"_cards_start",end:"_cards_end",update_selected:"_cards_update_selected",detect_x:"_cards_detect_x",detect_aw:"_cards_detect_area_width",cell_added:"_cards_cell_added"};dhtmlXCarousel.prototype._cards_init=function(){return this.conf.transProp==!1?!1:this.ef.cards_conf};dhtmlXCarousel.prototype._cards_f=function(){return this.ef.cards_f};dhtmlXCarousel.prototype._cards_prepare=function(n){var i,t;n>0?(i=this.ind[this.conf.selected+n],t=this.cdata[i].cell,this._cards_update_selected(i),t.conf.transEvInit!=!0&&(t.cell.addEventListener(this.conf.transEv,this._animateTransEnd,!1),t.conf.transEvInit=!0),this.conf.current_id=i,this.conf.current_dir=n,t.cell.style[this.conf.transProp]=this.conf.anim_cards,t.cell.style.left=this._cards_detect_x(i,0)+"px",t=null):(this._cards_adjust_middle(this.conf.selected+n+1,this.conf.selected-1,1),i=this.ind[this.conf.selected],t=this.cdata[i].cell,t._hideCover(),t.conf.transEvInit!=!0&&(t.cell.addEventListener(this.conf.transEv,this._animateTransEnd,!1),t.conf.transEvInit=!0),this.conf.current_id=i,this.conf.current_dir=n,this.cdata[this.ind[this.conf.selected+n]].cell._hideCover(),t.cell.style[this.conf.transProp]=this.conf.anim_cards,t.cell.style.left=this._cards_detect_x(i,1)+"px",t=null)};dhtmlXCarousel.prototype._cards_start=function(){};dhtmlXCarousel.prototype._cards_end=function(n,t){if(n.type==this.conf.transEv&&this.conf.current_id!=null&&t==this.cdata[this.conf.current_id].cell.cell){var i=this.cdata[this.conf.current_id].cell;i.cell.style[this.conf.transProp]="";i.conf.transEvInit!=!0&&(i.cell.removeEventListener(this.conf.transEv,this._animateTransEnd,!1),i.conf.transEvInit=!1);this.conf.current_id=null;this.conf.current_dir>0&&this._cards_adjust_middle(this.conf.selected+1,this.conf.selected+this.conf.current_dir-1,0);this.cdata[this.ind[this.conf.selected]].cell._showCover();this._animateEnd(this.conf.current_dir)}};dhtmlXCarousel.prototype._cards_update_selected=function(n){this.cdata[n].cell._hideCover()};dhtmlXCarousel.prototype._cards_adjust_middle=function(n,t,i){for(var f,r,u=n;u<=t;u++)f=this.ind[u],r=this.cdata[f].cell,r.conf.size.x=this._cards_detect_x(f,i),r.cell.style.left=r.conf.size.x+"px",r=null};dhtmlXCarousel.prototype._cards_detect_x=function(n,t){(typeof t=="undefined"||t==null)&&(t=this.cdata[n].index<=this.conf.selected?0:1);return t*(this.conf.width+this.conf.ofs_left+this.conf.ofs_item)+this.conf.ofs_item};dhtmlXCarousel.prototype._cards_cell_added=function(n){this.cdata[n].cell.conf.size.x=this._cards_detect_x(n);this.cdata[n].cell.cell.style.left=this.cdata[n].cell.conf.size.x+"px";this.conf.selected!=this.cdata[n].index&&this.cdata[n].cell._showCover()};dhtmlXCarousel.prototype._cards_detect_area_width=function(){return 2};dhtmlXWindows.prototype.forEachWindow=function(n){for(var t in this.w)n.apply(window,[this.w[t].cell])};dhtmlXWindows.prototype.window=function(n){return this.w[n]!=null?this.w[n].cell:null};dhtmlXWindows.prototype.isWindow=function(n){return this.w[n]!=null};dhtmlXWindows.prototype.findByText=function(n){var t=[];for(var i in this.w)this.w[i].cell.getText().indexOf(String(n))>=0&&t.push(this.w[i]);return t};dhtmlXWindows.prototype.setSkin=function(n){if(n!=this.conf.skin){this.vp!=null&&(this.vp.className=String(this.vp.className).replace("dhxwins_vp_"+this.conf.skin," dhxwins_vp_"+n));for(var t in this.w)this.w[t].cell._resetSizeState(),this._winAdjustCell(t),this._winAdjustTitle(t);this.conf.skin=n}};dhtmlXWindows.prototype.getBottommostWindow=function(){return this._getTopBottomWin(!1)};dhtmlXWindows.prototype.getTopmostWindow=function(){return this._getTopBottomWin(!0)};dhtmlXWindows.prototype._getTopBottomWin=function(n){var t=null,i,r;for(i in this.w)this.w[i].conf.visible&&(r=!1,t!=null&&(r=t.z>this.w[i].win.style.zIndex,n&&(r=!r)),(t==null||r)&&(t={win:this.w[i].cell,z:this.w[i].win.style.zIndex}));return t?t.win:null};dhtmlXWindows.prototype._winMakeActive=function(n,t){var f,e,c,u,r,i,l;if(n==null||t===!0||this.w[n].conf.actv!=!0){for(f=[],e={},u=0;u<this._zOrder.length;u++){var s=this._zOrder[u].name,h=this._zOrder[u].value,o=[];for(r in this.w)i=this.w[r],e[r]==null&&i.conf[s]===h&&i.conf.visible==!0&&n!=r&&(window.dhx4.zim.clear(i.conf.z_id),o.push([r,Number(i.win.style.zIndex)]),e[r]=!0),i=null;o.sort(function(n,t){return n[1]<t[1]?1:-1});n!=null&&this.w[n].conf[s]===h&&e[n]==null&&(window.dhx4.zim.clear(this.w[n].conf.z_id),c=[[n,Number(this.w[n].win.style.zIndex)]],o=c.concat(o),e[n]=!0);f=f.concat(o)}for(u=f.length-1;u>=0;u--){if(r=f[u][0],i=this.w[r],i.win.style.zIndex=window.dhx4.zim.reserve(i.conf.z_id),i.conf.modal&&this.mcover!=null)for(l in this.mcover)this.mcover[l].style.zIndex=i.win.style.zIndex;this._winAdjustFRMZIndex(r);n==null&&u==0&&(n=r);i.conf.actv=n==r;i.win.className=i.conf.actv?"dhxwin_active":"dhxwin_inactive";i=null}n!=null&&this.conf.last_active!=n&&this._callMainEvent("onFocus",n);this.conf.last_active=n}};dhtmlXWindows.prototype._zOrder=[{name:"modal",value:!0},{name:"sticked",value:!0},{name:"sticked",value:!1}];dhtmlXWindows.prototype._vpPull={};dhtmlXWindows.prototype._vpOf={};dhtmlXWindows.prototype._vpPullAdd=function(){var t,n;if(this.vp!=null){t=null;for(n in this._vpPull)this._vpPull[n].vp==this.vp&&(this._vpPull[n].count++,t=n);t==null&&(this._vpPull[window.dhx4.newId()]={vp:this.vp,count:1});this.vp==document.body&&this.conf.vp_of_auto==!0&&this._vpOfInit();this._vpOfUpd()}};dhtmlXWindows.prototype._vpPullRemove=function(){var t,n;if(this.vp==null)return 0;t=0;for(n in this._vpPull)this._vpPull[n].vp==this.vp&&(t=--this._vpPull[n].count,t==0&&(this._vpPull[n].vp=null,this._vpPull[n].count=null,delete this._vpPull[n]));return this._vpOfClear(),t};dhtmlXWindows.prototype._vpOfInit=function(){this._vpOf[this.conf.vp_of_id]=!0};dhtmlXWindows.prototype._vpOfClear=function(){this._vpOf[this.conf.vp_of_id]=!1;delete this._vpOf[this.conf.vp_of_id];this._vpOfUpd()};dhtmlXWindows.prototype._vpOfUpd=function(){var n=!1;for(var t in this._vpOf)n=n||this._vpOf[t];n==!0?document.body.className.match(/dhxwins_vp_auto/)==null&&(document.body.className+=" dhxwins_vp_auto"):document.body.className.match(/dhxwins_vp_auto/)!=null&&(document.body.className=String(document.body.className).replace(/\s{0,}dhxwins_vp_auto/gi,""))};dhtmlXWindows.prototype.attachViewportTo=function(n){var r=this._vpPullRemove(),t,i;if(this.conf.vp_custom){while(this.vp.childNodes.length>0)this.vp.removeChild(this.vp.lastChild);this.vp.parentNode.removeChild(this.vp);this.vp=null}else this.vp!=null&&r==0&&(this.vp.className=String(this.vp.className).replace(new RegExp("\\s{1,}dhxwins_vp_"+this.conf.skin),""));if(n==null)this.vp=null;else{this.vp=typeof n=="string"?document.getElementById(n):n;t="dhxwins_vp_"+this.conf.skin;this.vp.className.indexOf(t)<0&&(this.vp.className+=" "+t);n=null;for(i in this.w)this.vp.appendChild(this.w[i].win);this.conf.vp_custom=!1}this.vp==document.body&&(document.body.style.position="static");this._vpPullAdd()};dhtmlXWindows.prototype.setViewport=function(n,t,i,r,u){var f=document.createElement("DIV");f.style.position="absolute";f.style.left=n+"px";f.style.top=t+"px";f.style.width=i+"px";f.style.height=r+"px";typeof u=="undefined"||u==null?u=document.body:typeof u=="string"&&(u=document.getElementById(u));u.appendChild(f);this.attachViewportTo(f);this.conf.vp_custom=!0;u=f=null};dhtmlXWindows.prototype._winSetPosition=function(n,t,i){var r=this.w[n];r.conf.maxed&&(r.conf.lastMX+=t-r.conf.x,r.conf.lastMY+=i-r.conf.y);r.conf.x=t;r.conf.y=i;r.win.style.left=r.conf.x+"px";r.win.style.top=r.conf.y+"px";this._winAdjustFRMPosition(n);r=null};dhtmlXWindows.prototype._winAdjustPosition=function(n,t,i){var r=this.w[n],u,f,e;typeof t=="undefined"&&(t=r.conf.x);typeof i=="undefined"&&(i=r.conf.y);u=r.conf.keep_in_vp?0:-r.conf.w+this.conf.vp_pos_ofs;f=r.conf.keep_in_vp?this.vp.clientWidth-r.conf.w:this.vp.clientWidth-this.conf.vp_pos_ofs;t<u?t=u:t>f&&(t=f);e=r.conf.keep_in_vp?this.vp.clientHeight-r.conf.h:this.vp.clientHeight-this.conf.vp_pos_ofs;i<0?i=0:i>e&&(i=e);(t!=r.conf.x||i!=r.conf.y)&&this._winSetPosition(n,t,i);r=null};dhtmlXWindows.prototype._winSetSize=function(n,t,i,r,u){var f=this.w[n],e=t!=null?t:f.conf.w,o=i!=null?i:f.conf.h;this.conf.ofs_w==null&&(f.win.style.width=e+"px",f.win.style.height=o+"px",this.conf.ofs_w=f.win.offsetWidth-e,this.conf.ofs_h=f.win.offsetHeight-o);f.conf.min_w!=null&&e<f.conf.min_w&&(e=f.conf.min_w);f.conf.max_w!=null&&e>f.conf.max_w&&(e=f.conf.max_w);!f.conf.parked&&f.conf.min_h!=null&&o<f.conf.min_h&&(o=f.conf.min_h);f.conf.max_h!=null&&o>f.conf.max_h&&(o=f.conf.max_h);f.conf.keep_in_vp&&(e>this.vp.clientWidth&&(e=this.vp.clientWidth),o>this.vp.clientHeight&&(o=this.vp.clientHeight));f.win.style.width=e-this.conf.ofs_w+"px";f.win.style.height=o-this.conf.ofs_h+"px";f.conf.w=e;f.conf.h=o;this._winAdjustFRMSize(n);u&&this._winAdjustPosition(n,f.conf.x,f.conf.y);f.conf.parked||r==!0||this._winAdjustCell(n);f=null};dhtmlXWindows.prototype._winMinmax=function(n,t){var i,r,u;(typeof t=="undefined"||this.w[n].conf.maxed!=t)&&this.w[n].conf.allow_resize!=!1&&(i=this.w[n],i.conf.parked&&this._winPark(n,!1),i.conf.maxed?(this._winSetSize(n,i.conf.lastMW,i.conf.lastMH),this._winAdjustPosition(n,i.conf.lastMX,i.conf.lastMY),i.conf.maxed=!1):(r=0,u=0,i.conf.max_w!=null&&(r=i.conf.x+Math.round(i.conf.w-i.conf.max_w)/2),i.conf.max_h!=null&&(u=Math.max(i.conf.y+Math.round(i.conf.h-i.conf.max_h)/2,0)),i.conf.lastMX=i.conf.x,i.conf.lastMY=i.conf.y,i.conf.lastMW=i.conf.w,i.conf.lastMH=i.conf.h,this._winSetSize(n,this.vp.clientWidth,this.vp.clientHeight),this._winAdjustPosition(n,r,u),i.conf.maxed=!0),i.b.minmax.setCss(i.conf.maxed?"minmaxed":"minmax"),i.conf.maxed?this._callMainEvent("onMaximize",n):this._callMainEvent("onMinimize",n),this._callMainEvent("onResizeFinish",n),i=null)};dhtmlXWindows.prototype._winShow=function(n,t){this.w[n].conf.visible!=!0&&(this.w[n].win.style.display="",this.w[n].conf.visible=!0,(t==!0||this.conf.last_active==null)&&this._winMakeActive(n,!0),this._callMainEvent("onShow",n))};dhtmlXWindows.prototype._winHide=function(n){this.w[n].conf.visible!=!1&&(this.w[n].win.style.display="none",this.w[n].conf.visible=!1,this.w[n].conf.actv&&(this.w[n].conf.actv=!1,this.w[n].win.className="dhxwin_inactive",this._winMakeActive(null,!0)),this._callMainEvent("onHide",n))};dhtmlXWindows.prototype._winPark=function(n,t){if(this.w[n].conf.allow_park!=!1&&this.w[n].conf.header!=!1){var i=this.w[n];t==!0&&this.conf.tr.prop!==!1&&(i.win.style[this.conf.tr.prop]=this.conf.tr[i.conf.parked?"height_open":"height_close"],i.conf.tr_ev||(i.win.addEventListener(this.conf.tr.ev,this._winOnParkTrans,!1),i.conf.tr_ev=!0));i.conf.parked?(i.hdr.className=String(i.hdr.className).replace(/\s{1,}dhxwin_hdr_parked/gi,""),i.hdr.style.zIndex=0,i.conf.parked=!1,i.conf.tr_mode="park",this._winCellSetOpacity(n,"open",t),this._winSetSize(n,i.conf.w,i.conf.lastPH,t==!0&&this.conf.tr.prop!==!1),t==!0&&this.conf.tr.prop!==!1||(this._callMainEvent("onParkDown",n),i.conf.keep_in_vp&&this._winAdjustPosition(n,i.conf.x,i.conf.y)),window.dhx4.isIE8==!0&&this.conf.tr.prop==!1&&i.cell.cell.className.match(/dhxwin_parked/)!=null&&(i.cell.cell.className=i.cell.cell.className.replace(/\s{0,}dhxwin_parked/gi,""))):(i.conf.lastPH=i.conf.h,i.hdr.className+=" dhxwin_hdr_parked",(t==!1||this.conf.tr.prop==!1)&&(i.hdr.style.zIndex=3),i.conf.parked=!0,i.conf.tr_mode="park",this._winCellSetOpacity(n,"close",t),this._winSetSize(n,i.conf.w,i.hdr.offsetHeight+this.conf.ofs_h,t==!0&&this.conf.tr.prop!==!1),t==!0&&this.conf.tr.prop!==!1||this._callMainEvent("onParkUp",n),window.dhx4.isIE8==!0&&this.conf.tr.prop==!1&&i.cell.cell.className.match(/dhxwin_parked/)==null&&(i.cell.cell.className+=" dhxwin_parked"));i=null}};dhtmlXWindows.prototype._winCellSetOpacity=function(n,t,i){var r=this.w[n].cell;for(var u in r.conf.idx)({pr1:!0,pr2:!0})[u]!=!0&&(i==!0&&this.conf.tr.prop!=!1&&(r.cell.childNodes[r.conf.idx[u]].style[this.conf.tr.prop]=this.conf.tr["op_"+t]),r.cell.childNodes[r.conf.idx[u]].style.opacity=this.conf.tr["op_v_"+t]);r=null};dhtmlXWindows.prototype._winCellClearOpacity=function(n){var t=this.w[n].cell;for(var i in t.conf.idx)({pr1:!0,pr2:!0})[i]!=!0&&this.conf.tr.prop!=!1&&(t.cell.childNodes[t.conf.idx[i]].style[this.conf.tr.prop]="");t=null};dhtmlXWindows.prototype._winStick=function(n,t){(typeof t=="undefined"||this.w[n].conf.sticked!=t)&&(this.w[n].conf.sticked=!this.w[n].conf.sticked,this.w[n].b.stick.setCss(this.w[n].conf.sticked?"sticked":"stick"),this._winMakeActive(this.conf.last_active,!0),this.w[n].conf.sticked?this._callMainEvent("onStick",n):this._callMainEvent("onUnStick",n))};dhtmlXWindows.prototype._winClose=function(n){var t,i;if(this._callMainEvent("onClose",n)===!0||this.conf.unloading==!0){t=this.w[n];t.conf.fs_mode&&t.cell.setToFullScreen(!1);t.conf.modal&&this._winSetModal(n,!1);window.dhx4.zim.clear(t.conf.z_id);this.cm!=null&&this.cm.icon[n]!=null&&this._detachContextMenu("icon",n,null);typeof addEventListener=="function"?(t.win.removeEventListener("mousedown",this._winOnMouseDown,!1),t.win.removeEventListener("mouseup",this._winOnMouseDown,!1),this.conf.dblclick_ev&&t.win.removeEventListener("dblclick",this._winOnMouseDown,!1),this.conf.dnd_enabled==!0&&window.dhx4.dnd.evs.start!=null&&(t.win.removeEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,!1),window.dhx4.dnd.p_en!=!0&&(t.win.removeEventListener(window.dhx4.dnd.evs.start,this._winOnMouseDown,!1),t.win.removeEventListener(window.dhx4.dnd.evs.end,this._winOnMouseDown,!1)))):(t.win.detachEvent("onmousedown",this._winOnMouseDown),t.win.detachEvent("onmouseup",this._winOnMouseDown),this.conf.dblclick_ev&&t.win.attachEvent("ondblclick",this._winOnMouseDown));for(i in t.b)this._winRemoveButton(n,i,!0);t.b=null;t.cell._unload();t.cell=null;t.brd.parentNode.removeChild(t.brd);t.brd=null;t.fr_cover!=null&&(t.fr_cover.parentNode.removeChild(t.fr_cover),t.fr_cover=null);t.fr_m_cover!=null&&(t.fr_m_cover.parentNode.removeChild(t.fr_m_cover),t.fr_m_cover=null);t.hdr._isWinHdr=!0;t.hdr.firstChild._isWinIcon=!0;t.hdr.onselectstart=null;t.hdr.parentNode.removeChild(t.hdr);t.hdr=null;for(i in t.conf)t.conf[i]=null,delete t.conf[i];t.conf=null;t.win._idd=null;t.win._isWindow=null;t.win.parentNode.removeChild(t.win);t.win=null;t=null;this.w[n]=null;delete this.w[n];this.conf.unloading||this._winMakeActive(null,!0)}};dhtmlXWindows.prototype._winSetModal=function(n,t,i){var r,u,f;if(this.w[n].conf.modal!=t){if(typeof i=="undefined"&&(i=!0),r=this.w[n],t==!0&&r.conf.modal==!1)this.conf.last_modal!=null&&this._winSetModal(this.conf.last_modal,!1,!1),this.mcover==null?(u=document.createElement("DIV"),u.className="dhxwins_mcover",this.vp.insertBefore(u,r.fr_m_cover||r.win),this.mcover={d:u},this.conf.fr_cover&&(this.mcover.f=document.createElement("IFRAME"),this.mcover.f.className="dhxwins_mcover",this.mcover.f.border=0,this.mcover.f.frameBorder=0,this.vp.insertBefore(this.mcover.f,u)),u=null):this.mcover.d.nextSibling!=(r.fr_m_cover||r.win)&&(this.vp.insertBefore(this.mcover.d,r.fr_m_cover||r.win),this.mcover.f!=null&&this.vp.insertBefore(this.mcover.f,this.mcover.d)),r.conf.modal=!0,this.conf.last_modal=n,this._winMakeActive(n,!0);else if(t==!1&&r.conf.modal==!0&&(r.conf.modal=!1,this.conf.last_modal=null,i&&this.mcover!=null)){for(f in this.mcover)this.vp.removeChild(this.mcover[f]),this.mcover[f]=null;this.mcover=null}r=null}};dhtmlXWindows.prototype._winMouseDownHandler=function(n,t){var i=n.target||n.srcElement;if(!(n.button>=2)){if(t.mode=="button")if(t.press_type=="mousedown")this.conf.button_last=t.button_name;else if((t.press_type=="mouseup"&&t.button_name==this.conf.button_last||t.press_type=="MSPointerDown"||t.press_type=="pointerdown")&&(this.conf.button_last=null,this._winButtonClick(t.id,t.button_name,n)!==!0))return;if((t.press_type=="pointerdown"||t.press_type=="mousedown"||t.press_type=="dblclick")&&t.mode=="hdr"&&(this.conf.dblclick_active=!1,this.conf.dblclick_ev==!0?t.press_type=="dblclick"&&(this.conf.dblclick_active=!0):this.conf.dblclick_last==null?(this.conf.dblclick_last=(new Date).getTime(),this.dblclick_id=t.id):(i=(new Date).getTime(),this.conf.dblclick_last+this.conf.dblclick_tm>i&&this.dblclick_id==t.id?(this.conf.dblclick_active=!0,this.conf.dblclick_last=null,this.dblclick_id=null):(this.conf.dblclick_last=i,this.dblclick_id=t.id)),this.conf.dblclick_active)){this._winDoHeaderDblClick(t.id);return}(t.press_type=="mousedown"||t.press_type==window.dhx4.dnd.evs.start)&&this._winMakeActive(t.id);t.press_type=="touchend"}};dhtmlXWindows.prototype._winDoHeaderDblClick=function(n){if(this.conf.dblclick_mode=="minmax"){this._winMinmax(n);return}if(this.conf.dblclick_mode=="park"){this._winPark(n,!0);return}if(typeof this.conf.dblclick_mode=="function"){this.conf.dblclick_mode.apply(window,[n]);return}if(typeof window[this.conf.dblclick_mode]=="function"){window[this.conf.dblclick_mode].apply(window,[n]);return}};dhtmlXWindows.prototype._winAdjustCell=function(n){var t=this.w[n],r;if(this.conf.skin=="material")var c=0,i=t.conf.header?t.hdr.offsetHeight:1,u=t.win.clientWidth,f=t.win.clientHeight-i;else var c=1,i=t.conf.header?t.hdr.offsetHeight:1,u=t.win.clientWidth-2,f=t.win.clientHeight-i-1;t.brd.style.left=c+"px";t.brd.style.top=i+"px";t.conf.brd==null&&(t.brd.style.width=u+"px",t.brd.style.height=f+"px",t.conf.brd={w:u-t.brd.offsetWidth,h:f-t.brd.offsetHeight});t.brd.style.width=u+t.conf.brd.w+"px";t.brd.style.height=f+t.conf.brd.h+"px";r=5;this.conf.skin=="material"&&(r=1);var e=1+r,o=t.conf.header?i:i+r,s=t.brd.clientWidth,h=t.brd.clientHeight;t.cell._setSize(e,o,s,h);t.fr_cover.style.left=e+"px";t.fr_cover.style.top=o+"px";t.fr_cover.style.width=s+"px";t.fr_cover.style.height=h+"px";t=null};dhtmlXWindows.prototype._winAdjustTitle=function(n){var i=this.w[n].hdr.childNodes[0],t=this.w[n].hdr.childNodes[1],r=this.w[n].hdr.childNodes[2],u=this.conf.skin=="material"?7:0;t.style.paddingLeft=i.offsetWidth+12+u+"px";t.style.paddingRight=r.offsetWidth+10+u+"px";t=r=i=null};dhtmlXWindows.prototype._callMainEvent=function(n,t){var i=this.w[t],r;return r=i.cell.checkEvent(n)?i.cell._callMainEvent(n,[i.cell]):this.callEvent(n,[i.cell]),i=null,r};dhtmlXWindows.prototype._winInitFRM=function(n){if(this.conf.fr_cover==!0){var i=this.w[n],t=document.createElement("IFRAME");t.className="dhxwin_main_fr_cover";t.border=0;t.frameBorder=0;t.style.zIndex=i.win.style.zIndex;i.win.parentNode.insertBefore(t,i.win);i.fr_m_cover=t;t=null}};dhtmlXWindows.prototype._winAdjustFRMSize=function(n){var t=this.w[n];t.fr_m_cover!=null&&(t.fr_m_cover.style.width=t.conf.w+"px",t.fr_m_cover.style.height=t.conf.h+"px");t=null};dhtmlXWindows.prototype._winAdjustFRMPosition=function(n){var t=this.w[n];t.fr_m_cover!=null&&(t.fr_m_cover.style.left=t.win.style.left,t.fr_m_cover.style.top=t.win.style.top);t=null};dhtmlXWindows.prototype._winAdjustFRMZIndex=function(n){var t=this.w[n];t.fr_m_cover!=null&&(t.fr_m_cover.style.zIndex=t.win.style.zIndex);t=null};dhtmlXWindowsCell.prototype=new dhtmlXCellObject;dhtmlXWindowsCell.prototype.setText=function(n){this.wins.w[this._idd].conf.text=n;this.wins.w[this._idd].hdr.childNodes[1].firstChild.innerHTML=n};dhtmlXWindowsCell.prototype.getText=function(){return this.wins.w[this._idd].conf.text};dhtmlXWindowsCell.prototype.allowMove=function(){this.wins.w[this._idd].conf.allow_move=!0};dhtmlXWindowsCell.prototype.denyMove=function(){this.wins.w[this._idd].conf.allow_move=!1};dhtmlXWindowsCell.prototype.isMovable=function(){return this.wins.w[this._idd].conf.allow_move==!0};dhtmlXWindowsCell.prototype.allowResize=function(){this.wins.w[this._idd].conf.allow_resize=!0;this.wins.w[this._idd].b.minmax.enable()};dhtmlXWindowsCell.prototype.denyResize=function(){this.wins.w[this._idd].conf.allow_resize=!1;this.wins.w[this._idd].b.minmax.disable()};dhtmlXWindowsCell.prototype.isResizable=function(){return this.wins.w[this._idd].conf.allow_resize==!0};dhtmlXWindowsCell.prototype.maximize=function(){this.wins._winMinmax(this._idd,!0)};dhtmlXWindowsCell.prototype.minimize=function(){this.wins._winMinmax(this._idd,!1)};dhtmlXWindowsCell.prototype.isMaximized=function(){return this.wins.w[this._idd].conf.maxed==!0};dhtmlXWindowsCell.prototype.setPosition=function(n,t){this.wins._winSetPosition(this._idd,n,t)};dhtmlXWindowsCell.prototype.getPosition=function(){var n=this.wins.w[this._idd],t=[n.conf.x,n.conf.y];return n=null,t};dhtmlXWindowsCell.prototype.adjustPosition=function(){this.wins._winAdjustPosition(this._idd)};dhtmlXWindowsCell.prototype.park=function(){this.wins._winPark(this._idd,!0)};dhtmlXWindowsCell.prototype.isParked=function(){return this.wins.w[this._idd].conf.parked==!0};dhtmlXWindowsCell.prototype.allowPark=function(){this.wins.w[this._idd].conf.allow_park=!0;this.wins.w[this._idd].b.park.enable()};dhtmlXWindowsCell.prototype.denyPark=function(){this.wins.w[this._idd].conf.allow_park=!1;this.wins.w[this._idd].b.park.disable()};dhtmlXWindowsCell.prototype.isParkable=function(){return this.wins.w[this._idd].conf.allow_park==!0};dhtmlXWindowsCell.prototype.show=function(n){this.wins._winShow(this._idd,window.dhx4.s2b(n))};dhtmlXWindowsCell.prototype.hide=function(){this.wins._winHide(this._idd)};dhtmlXWindowsCell.prototype.isHidden=function(){return this.wins.w[this._idd].conf.visible!=!0};dhtmlXWindowsCell.prototype.stick=function(){this.wins._winStick(this._idd,!0)};dhtmlXWindowsCell.prototype.unstick=function(){this.wins._winStick(this._idd,!1)};dhtmlXWindowsCell.prototype.isSticked=function(){return this.wins.w[this._idd].conf.sticked==!0};dhtmlXWindowsCell.prototype.setDimension=function(n,t){var i=this.wins.w[this._idd];i.conf.parked&&this.wins._winPark(this._idd,!1);i.conf.maxed?(n!=null&&(i.conf.lastMW=n),t!=null&&(i.conf.lastMH=t),this.wins._winMinmax(this._idd)):this.wins._winSetSize(this._idd,n,t,!1,!0);i=null};dhtmlXWindowsCell.prototype.getDimension=function(){var n=this.wins.w[this._idd],t=[n.conf.w,n.conf.h];return n=null,t};dhtmlXWindowsCell.prototype.setMinDimension=function(n,t){var i=this.wins.w[this._idd];i.conf.min_w=n;i.conf.min_h=t;this.wins._winSetSize(this._idd,i.conf.w,i.conf.h);i=null};dhtmlXWindowsCell.prototype.getMinDimension=function(){var n=this.wins.w[this._idd],t=[n.conf.min_w,n.conf.min_h];return n=null,t};dhtmlXWindowsCell.prototype.setMaxDimension=function(n,t){var i=this.wins.w[this._idd];i.conf.max_w=n;i.conf.max_h=t;this.wins._winSetSize(this._idd,i.conf.w,i.conf.h);i=null};dhtmlXWindowsCell.prototype.getMaxDimension=function(){var n=this.wins.w[this._idd],t=[n.conf.max_w,n.conf.max_h];return n=null,t};dhtmlXWindowsCell.prototype.keepInViewport=function(n){this.wins.w[this._idd].conf.keep_in_vp=window.dhx4.s2b(n)};dhtmlXWindowsCell.prototype.center=function(){var n=this.wins.vp,t=this.wins.w[this._idd],i=Math.round((n.clientWidth-t.conf.w)/2),r=Math.round((n.clientHeight-t.conf.h)/2);this.wins._winSetPosition(this._idd,i,r);n=t=null};dhtmlXWindowsCell.prototype.centerOnScreen=function(){for(var i=this.wins.w[this._idd],t=window.dhx4.screenDim(),r=window.dhx4.absLeft(this.wins.vp),u=window.dhx4.absTop(this.wins.vp),n=this.wins.vp.parentNode,f,e;n!=null;)n.scrollLeft&&(r=r-n.scrollLeft),n.scrollTop&&(u=u-n.scrollTop),n=n.parentNode;f=Math.round((t.right-t.left-i.conf.w)/2);e=Math.round((t.bottom-t.top-i.conf.h)/2);this.wins._winAdjustPosition(this._idd,f-r,e-u);d=i=null};dhtmlXWindowsCell.prototype.bringToTop=function(){this.wins._winMakeActive(this._idd,!0)};dhtmlXWindowsCell.prototype.bringToBottom=function(){var n=this.wins.w[this._idd].conf.actv?null:this.wins.conf.last_active;window.dhx4.zim.clear(this.wins.w[this._idd].conf.z_id);this.wins.w[this._idd].win.style.zIndex=0;this.wins._winMakeActive(n,!0)};dhtmlXWindowsCell.prototype.isOnTop=function(){return this.wins.w[this._idd].conf.actv==!0};dhtmlXWindowsCell.prototype.isOnBottom=function(){var n={id:null,z:+Infinity};for(var t in this.wins.w)this.wins.w[t].conf.visible&&this.wins.w[t].win.style.zIndex<n.z&&(n.id=t,n.z=this.wins.w[t].win.style.zIndex);return n.id==this._idd};dhtmlXWindowsCell.prototype.showHeader=function(){var n=this.wins.w[this._idd];n.conf.header==!1&&(n.hdr.className=String(n.hdr.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,""),n.brd.className=String(n.brd.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,""),this.conf.cells_cont=null,n.conf.brd=null,n.conf.header=!0,this.wins._winAdjustCell(this._idd));n=null};dhtmlXWindowsCell.prototype.hideHeader=function(){var n=this.wins.w[this._idd];n.conf.header==!0&&(n.conf.parked&&this.wins._winPark(this._idd,!1),n.hdr.className+=" dhxwin_hdr_hidden",n.brd.className+=" dhxwin_hdr_hidden",this.conf.cells_cont=null,n.conf.brd=null,n.conf.header=!1,this.wins._winAdjustCell(this._idd));n=null};dhtmlXWindowsCell.prototype.setModal=function(n){this.wins._winSetModal(this._idd,window.dhx4.s2b(n))};dhtmlXWindowsCell.prototype.isModal=function(){return this.wins.w[this._idd].conf.modal==!0};dhtmlXWindowsCell.prototype._adjustByCont=function(n,t){n+=this.wins.w[this._idd].conf.w-this.conf.size.w;t+=this.wins.w[this._idd].conf.h-this.conf.size.h;this.wins._winSetSize(this._idd,n,t)};dhtmlXWindowsCell.prototype.close=function(){this.wins._winClose(this._idd)};dhtmlXWindowsCell.prototype.setIconCss=function(n){this.wins.w[this._idd].hdr.firstChild.className="dhxwin_icon "+n;this.wins._winAdjustTitle(this._idd)};dhtmlXWindowsCell.prototype.setToFullScreen=function(n){n=window.dhx4.s2b(n);var t=this.wins.w[this._idd];if(t.conf.fs_mode==n){t=null;return}this.wins.fsn==null&&(this.wins.fsn=document.createElement("DIV"),this.wins.fsn.className=this.wins.vp.className+" dhxwins_vp_fs",document.body.appendChild(this.wins.fsn));n?(this.wins.fsn.appendChild(t.win),this.maximize(),this.hideHeader()):(this.wins.vp.appendChild(t.win),this.minimize(),this.showHeader(),this.wins.fsn.childNodes.length==0&&(this.wins.fsn.parentNode.removeChild(this.wins.fsn),this.wins.fsn=null));t.conf.fs_mode=n;t=null};dhtmlXWindowsCell.prototype.button=function(n){return(n=="minmax1"||n=="minmax2")&&(n="minmax"),this.wins.w[this._idd].b[n]};dhtmlXWindowsCell.prototype.addUserButton=function(n,t,i){var u=new dhtmlXWindowsButton(this.wins,this._idd,n,i,!0),f=null,r=this.wins.w[this._idd].hdr.lastChild;isNaN(t)?t=0:t<0&&(t=0);r.childNodes[t]!=null&&(f=r.childNodes[t]);f!=null?r.insertBefore(u.button,f):r.appendChild(u.button);this.wins.w[this._idd].b[n]=u;u=f=r=null;this.wins._winAdjustTitle(this._idd)};dhtmlXWindowsCell.prototype.removeUserButton=function(n){this.wins.w[this._idd].b[n]!=null&&this.wins.w[this._idd].b[n].conf.custom==!0&&this.wins._winRemoveButton(this._idd,n)};window.dhtmlXWindowsButton=function(n,t,i,r){return this.conf={wins:n,winId:t,name:i,enabled:!0,visible:!0,custom:!0},this.button=document.createElement("DIV"),this.button._buttonName=i,this.button.title=r,this.enable=function(){this.conf.enabled=!0;this.setCss(this.conf.css)},this.disable=function(){this.conf.enabled=!1;this.setCss(this.conf.css)},this.isEnabled=function(){return this.conf.enabled==!0},this.show=function(){this.button.style.display="";this.conf.visible=!0;this.conf.wins._winAdjustTitle(this.conf.winId)},this.hide=function(){this.button.style.display="none";this.conf.visible=!1;this.conf.wins._winAdjustTitle(this.conf.winId)},this.isHidden=function(){return this.conf.visible==!1},this.setCss=function(n){this.conf.css=n;var t=this.conf.enabled?"":"_dis";this.button.className="dhxwin_button"+t+" dhxwin_button_"+this.conf.css+t},this._doOnClick=function(){return this.callEvent("onClick",[this.conf.wins.w[this.conf.winId].cell,this])},this.unload=function(n){dhx4._eventable(this,"clear");this.button._buttonName=null;this.button.parentNode.removeChild(this.button);this.conf.wins.cm!=null&&this.conf.wins.cm.button[this.conf.winId]!=null&&this.conf.wins.cm.button[this.conf.winId][this.conf.name]!=null&&this.conf.wins._detachContextMenu("button",this.conf.winId,this.conf.name);this.button=null;this.enable=null;this.disable=null;this.isEnabled=null;this.show=null;this.hide=null;this.isHidden=null;this.setCss=null;this.unload=null;n!=!0&&this.conf.wins._winAdjustTitle(this.conf.winId);this.conf.wins=null;this.conf.winId=null;this.conf=null},this.setCss(i),dhx4._eventable(this),this};dhtmlXWindows.prototype._winButtonClick=function(n,t){return this.w[n].b[t].isEnabled()?this.w[n].b[t]._doOnClick()!==!0?void 0:(t=="help"&&this._callMainEvent("onHelp",n),t=="park"&&this._winPark(n,!0),t=="minmax"&&this._winMinmax(n),t=="stick")?(this._winStick(n),!1):t=="close"?(this._winClose(n),!1):!0:!0};dhtmlXWindows.prototype._winRemoveButton=function(n,t,i){this.w[n].b[t].unload(i);this.w[n].b[t]=null;delete this.w[n].b[t]};dhtmlXWindows.prototype._dndInitModule=function(){var n=this;this.conf.dnd_enabled=!0;this.conf.dnd_tm=null;this.conf.dnd_time=0;this._dndOnMouseDown=function(t,i){var u,r;if(!n.conf.dblclick_active&&(t.preventDefault?t.preventDefault():t.returnValue=!1,n._callMainEvent("onBeforeMoveStart",i)===!0)){for(n.conf.dnd={id:i,x:n._dndPos(t,"X"),y:n._dndPos(t,"Y"),ready:!0,css:!1,css_touch:!1,css_vp:!1,tr:null,mode:"def",moved:!1,prevent:!1},n.w[i].conf.keep_in_vp?(n.conf.dnd.minX=0,n.conf.dnd.maxX=n.vp.clientWidth-n.w[i].conf.w,n.conf.dnd.minY=0,n.conf.dnd.maxY=n.vp.clientHeight-n.w[i].conf.h):(n.conf.dnd.minX=-n.w[i].conf.w+n.conf.vp_pos_ofs,n.conf.dnd.maxX=n.vp.clientWidth-n.conf.vp_pos_ofs,n.conf.dnd.minY=0,n.conf.dnd.maxY=n.vp.clientHeight-n.conf.vp_pos_ofs),u=["MozTransform","WebkitTransform","OTransform","msTransform","transform"],r=0;r<u.length;r++)document.documentElement.style[u[r]]!=null&&n.conf.dnd.tr==null&&(n.conf.dnd.tr=u[r],n.conf.dnd.mode="tr");n.conf.dnd.mode=="tr"&&(n.w[i].win.style[n.conf.dnd.tr]="translate(0px,0px)",n.w[i].fr_m_cover!=null&&(n.w[i].fr_m_cover.style[n.conf.dnd.tr]=n.w[i].win.style[n.conf.dnd.tr]));window.dhx4.dnd._mTouch(t)==!1&&t.type==window.dhx4.dnd.evs.start?(n.conf.dnd.css_touch==!1&&(n.w[i].win.className+=" dhxwin_dnd_touch",n.conf.dnd.css_touch=!0),n.conf.dnd.css_vp==!1&&(n.vp.className+=" dhxwins_vp_dnd",n.conf.dnd.css_vp=!0)):n._dndInitEvents()}};this._dndOnMouseMove=function(t){var r;t=t||event;var i=n.conf.dnd,u=n._dndPos(t,"X")-i.x,f=n._dndPos(t,"Y")-i.y;if(t.type==window.dhx4.dnd.evs.move&&i.moved!=!0&&(Math.abs(u)>20||Math.abs(f)>20)){n.conf.dnd_tm!=null&&(window.clearTimeout(n.conf.dnd_tm),n.conf.dnd_tm=null);window.removeEventListener(window.dhx4.dnd.evs.start,n._dndOnMouseMove,!1);return}i.ready==!0&&(r=n.w[i.id],t.preventDefault?t.preventDefault():t.returnValue=!1,i.css!=!0&&(i.css_touch==!1&&(r.win.className+=" dhxwin_dnd"),r.fr_cover.className+=" dhxwin_fr_cover_dnd",i.css=!0),i.css_vp!=!0&&(n.vp.className+=" dhxwins_vp_dnd",i.css_vp=!0),i.newX=r.conf.x+u,i.newY=r.conf.y+f,i.mode=="tr"?(i.newX=Math.min(Math.max(i.newX,i.minX),i.maxX),u=i.newX-r.conf.x,i.newY=Math.min(Math.max(i.newY,i.minY),i.maxY),f=i.newY-r.conf.y,r.win.style[i.tr]="translate("+u+"px,"+f+"px)",r.fr_m_cover!=null&&(r.fr_m_cover.style[i.tr]=r.win.style[i.tr])):(i.newX<i.minX||i.newX>i.maxX?i.newX=Math.min(Math.max(i.newX,i.minX),i.maxX):i.x=n._dndPos(t,"X"),i.newY<i.minY||i.newY>i.maxY?i.newY=Math.min(Math.max(i.newY,i.minY),i.maxY):i.y=n._dndPos(t,"Y"),n._winSetPosition(i.id,i.newX,i.newY)),i.moved=!0,r=i=null)};this._dndOnMouseUp=function(t){if(t=t||event,n._dndUnloadEvents(),n.conf.dnd!=null&&n.conf.dnd.id!=null){var i=n.conf.dnd,r=n.w[i.id];i.newX!=null&&i.mode=="tr"&&(n._winSetPosition(i.id,i.newX,i.newY),r.win.style[i.tr]="translate(0px,0px)",r.fr_m_cover!=null&&(r.fr_m_cover.style[i.tr]=r.win.style[i.tr]));i.css==!0&&(i.css_touch==!1&&(r.win.className=String(r.win.className).replace(/\s{0,}dhxwin_dnd/gi,"")),r.fr_cover.className=String(r.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_dnd/gi,""));i.css_touch==!0&&(r.win.className=String(r.win.className).replace(/\s{0,}dhxwin_dnd_touch/gi,""));i.css_vp==!0&&(n.vp.className=String(n.vp.className).replace(/\s{0,}dhxwins_vp_dnd/gi,""));i.moved==!0?n._callMainEvent("onMoveFinish",i.id):n._callMainEvent("onMoveCancel",i.id);r=i=n.conf.dnd=null}window.dhx4.dnd.p_en==!0&&t.type==window.dhx4.dnd.evs.end&&(window.dhx4.dnd._touchOn(),window.removeEventListener(window.dhx4.dnd.evs.end,n._dndOnMouseUp,!1),window.removeEventListener(window.dhx4.dnd.evs.move,n._dndOnMouseMove,!1),n.conf.dnd_tm!=null&&window.clearTimeout(n.conf.dnd_tm),n.conf.dnd_tm=null)};this._dndOnSelectStart=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1};this._dndInitEvents=function(){typeof addEventListener=="function"?(window.addEventListener("mousemove",this._dndOnMouseMove,!1),window.addEventListener("mouseup",this._dndOnMouseUp,!1),window.addEventListener("selectstart",this._dndOnSelectStart,!1)):(document.body.attachEvent("onmousemove",this._dndOnMouseMove),document.body.attachEvent("onmouseup",this._dndOnMouseUp),document.body.attachEvent("onselectstart",this._dndOnSelectStart))};this._dndUnloadEvents=function(){typeof addEventListener=="function"?(window.removeEventListener("mousemove",this._dndOnMouseMove,!1),window.removeEventListener("mouseup",this._dndOnMouseUp,!1),window.removeEventListener("selectstart",this._dndOnSelectStart,!1)):(document.body.detachEvent("onmousemove",this._dndOnMouseMove),document.body.detachEvent("onmouseup",this._dndOnMouseUp),document.body.detachEvent("onselectstart",this._dndOnSelectStart))};this._dndUnloadModule=function(){this.detachEvent(this.conf.dnd_evid);this.conf.dnd_evid=null;this._dndOnMouseDown=null;this._dndOnMouseMove=null;this._dndOnMouseUp=null;this._dndOnSelectStart=null;this._dndInitEvents=null;this._dndUnloadEvents=null;this._dndInitModule=null;this._dndUnloadModule=null;n=null};this._dndPos=function(n,t){var i=n[this.conf.dnd_ev_prefix+t];return(i==null||i==0)&&n.touches!=null&&(i=n.touches[0][this.conf.dnd_ev_prefix+t]),i};this.conf.dnd_evid=this.attachEvent("_winMouseDown",function(t,i){if(this.w[i.id]!=null&&this.w[i.id].conf.allow_move==!0&&(typeof t.button=="undefined"||!(t.button>=2))){if(t.type==window.dhx4.dnd.evs.start){if(i.mode=="hdr"){if(this.w[i.id].conf.maxed&&this.w[i.id].conf.max_w==null&&this.w[i.id].conf.max_h==null)return;this.conf.dnd_ev_prefix="page";this.conf.dnd={x:this._dndPos(t,"X"),y:this._dndPos(t,"Y")};this.conf.dnd_time<1?this._dndOnMouseDown(t,i.id):(this.conf.dnd_tm!=null&&window.clearTimeout(this.conf.dnd_tm),this.conf.dnd_tm=window.setTimeout(function(){n._dndOnMouseDown(t,i.id)},this.conf.dnd_time));window.dhx4.dnd.p_en==!0&&(window.dhx4.dnd._touchOff(),window.addEventListener(window.dhx4.dnd.evs.end,this._dndOnMouseUp,!1));window.addEventListener(window.dhx4.dnd.evs.move,this._dndOnMouseMove,!1)}return!1}return t.type==window.dhx4.dnd.evs.end?(this.conf.dnd_tm!=null&&(window.clearTimeout(this.conf.dnd_tm),this.conf.dnd_tm=null),this._dndOnMouseUp(t),window.removeEventListener(window.dhx4.dnd.evs.move,this._dndOnMouseMove,!1),!1):(this.conf.dnd_ev_prefix="client",!(i.mode=="hdr"&&t.type=="mousedown"))?void 0:this.w[i.id].conf.maxed&&this.w[i.id].conf.max_w==null&&this.w[i.id].conf.max_h==null?void 0:(t.preventDefault?t.preventDefault():t.returnValue=!1,this._dndOnMouseDown(t,i.id),!1)}})};dhtmlXWindowsCell.prototype._initResize=function(){var n=this,t=navigator.userAgent;this.conf.resize={b_width:6,c_type:t.indexOf("MSIE 10.0")>0||t.indexOf("MSIE 9.0")>0||t.indexOf("MSIE 8.0")>0||t.indexOf("MSIE 7.0")>0||t.indexOf("MSIE 6.0")>0,btn_left:(window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&typeof addEventListener=="undefined"?1:0};this._rOnCellMouseMove=function(t){var f;if(n.wins.conf.resize_actv==!0||n.wins.w[n._idd].conf.allow_resize==!1||n.conf.progress==!0||n.wins.w[n._idd].conf.maxed==!0||n.wins.w[n._idd].conf.fs_mode==!0){f=n.wins.w[n._idd].brd;f.style.cursor!="default"&&(f.style.cursor="default");f=null;return}t=t||event;var u=n.wins.w[n._idd].brd,r=n.conf.resize,c=n.wins.w[n._idd].conf.header==!1,e=t.clientX,o=t.clientY;e+=document.documentElement.scrollLeft||document.body.scrollLeft||0;o+=document.documentElement.scrollTop||document.body.scrollTop||0;var s=window.dhx4.absLeft(u),h=window.dhx4.absTop(u),i="";e<=s+r.b_width?i="w":e>=s+u.offsetWidth-r.b_width&&(i="e");o>=h+u.offsetHeight-r.b_width?i="s"+i:c&&o<=h+r.b_width&&(i="n"+i);i==""&&(i=!1);r.mode!=i&&(r.mode=i,u.style.cursor=i==!1?"default":i+"-resize");u=r=null};this._rOnCellMouseDown=function(t){var r,i,u;(t=t||event,typeof t.button=="undefined"||t.button==n.conf.resize.btn_left)&&n.conf.resize.mode!=!1&&n.conf.progress!=!0&&n.wins.w[n._idd].conf.allow_resize!=!1&&n.wins.w[n._idd].conf.fs_mode!=!0&&(t.preventDefault?t.preventDefault():t.returnValue=!1,n.wins._callMainEvent("onBeforeResizeStart",n._idd)===!0)&&(r=n.wins.w[n._idd],i=n.conf.resize,n.wins.conf.resize_actv=!0,i.min_w=r.conf.min_w,i.min_h=r.conf.min_h,i.max_w=r.conf.max_w||+Infinity,i.max_h=r.conf.max_h||+Infinity,r.cell.dataType=="layout"&&r.cell.dataObj!=null&&typeof r.cell.dataObj._getWindowMinDimension=="function"&&(u=r.cell.dataObj._getWindowMinDimension(r.cell),i.min_w=Math.max(u.w,i.min_w),i.min_h=Math.max(u.h,i.min_h)),i.vp_l=n.wins.conf.vp_pos_ofs,i.vp_r=n.wins.vp.clientWidth-n.wins.conf.vp_pos_ofs,i.vp_b=n.wins.vp.clientHeight-n.wins.conf.vp_pos_ofs,i.x=t.clientX,i.y=t.clientY,typeof addEventListener=="function"?(window.addEventListener("mousemove",n._rOnWinMouseMove,!1),window.addEventListener("mouseup",n._rOnWinMouseUp,!1),window.addEventListener("selectstart",n._rOnSelectStart,!1)):(document.body.attachEvent("onmousemove",n._rOnWinMouseMove),document.body.attachEvent("onmouseup",n._rOnWinMouseUp),document.body.attachEvent("onselectstart",n._rOnSelectStart)),i.resized=!1,i.vp_cursor=n.wins.vp.style.cursor,n.wins.vp.style.cursor=i.mode+"-resize",r=i=null)};this._rOnCellContextMenu=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1};this._rOnWinMouseMove=function(t){var r,i,u,f;t=t||event;r=n.wins.w[n._idd];i=n.conf.resize;i.resized||(r.fr_cover.className+=" dhxwin_fr_cover_resize",i.resized=!0);u=t.clientX-i.x;f=t.clientY-i.y;i.mode.indexOf("e")>=0?(i.rw=Math.min(Math.max(r.conf.w+u,i.min_w),i.max_w),i.rx=null,r.conf.x+i.rw<i.vp_l?i.rw=i.vp_l-r.conf.x:r.conf.x+i.rw>n.wins.vp.clientWidth&&(i.rw=n.wins.vp.clientWidth-r.conf.x)):i.mode.indexOf("w")>=0&&(i.rw=Math.min(Math.max(r.conf.w-u,i.min_w),i.max_w),i.rx=r.conf.x+r.conf.w-i.rw,i.rx<0?(i.rw=i.rw+i.rx,i.rx=0):i.rx>i.vp_r&&(i.rw=i.rw-i.vp_r,i.rx=i.vp_r));i.mode.indexOf("s")>=0?(i.rh=Math.min(Math.max(r.conf.h+f,i.min_h),i.max_h),i.ry=null,r.conf.y+i.rh>n.wins.vp.clientHeight&&(i.rh=n.wins.vp.clientHeight-r.conf.y)):i.mode.indexOf("n")>=0&&(i.rh=Math.min(Math.max(r.conf.h-f,i.min_h),i.max_h),i.ry=r.conf.y+r.conf.h-i.rh,i.ry<0?(i.rh=i.rh+i.ry,i.ry=0):i.ry>i.vp_b&&(i.rh=i.rh-i.vp_b,i.ry=i.vp_b));n._rAdjustSizer();r=i=null};this._rOnWinMouseUp=function(){var t=n.conf.resize,i=n.wins.w[n._idd];n.wins.conf.resize_actv=!1;n.wins.vp.style.cursor=t.vp_cursor;i.fr_cover.className=String(i.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_resize/gi,"");t.resized&&(n.wins._winSetSize(n._idd,t.rw,t.rh),t.rx==null&&(t.rx=i.conf.x),t.ry==null&&(t.ry=i.conf.y),(t.rx!=i.conf.x||t.ry!=i.conf.y)&&n.wins._winSetPosition(n._idd,t.rx,t.ry));t.obj!=null&&(t.obj.parentNode.removeChild(t.obj),t.obj=null);t.objFR!=null&&(t.objFR.parentNode.removeChild(t.objFR),t.objFR=null);typeof addEventListener=="function"?(window.removeEventListener("mousemove",n._rOnWinMouseMove,!1),window.removeEventListener("mouseup",n._rOnWinMouseUp,!1),window.removeEventListener("selectstart",n._rOnSelectStart,!1)):(document.body.detachEvent("onmousemove",n._rOnWinMouseMove),document.body.detachEvent("onmouseup",n._rOnWinMouseUp),document.body.detachEvent("onselectstart",n._rOnSelectStart));t.resized==!0?(n.dataType=="layout"&&n.dataObj!=null&&n.dataObj.callEvent("onResize",[]),n.wins._callMainEvent("onResizeFinish",n._idd)):n.wins._callMainEvent("onResizeCancel",n._idd);t.mode="";i=t=null};this._rOnSelectStart=function(n){return n=n||event,n.preventDefault?n.preventDefault():n.returnValue=!1,!1};this._rInitSizer=function(){var t=n.conf.resize,i=n.wins.w[n._idd];t.obj=document.createElement("DIV");t.obj.className="dhxwin_resize";t.obj.style.zIndex=i.win.style.zIndex;t.obj.style.cursor=t.mode+"-resize";n.wins.vp.appendChild(t.obj);n.wins.conf.fr_cover==!0&&(t.objFR=document.createElement("IFRAME"),t.objFR.className="dhxwin_resize_fr_cover",t.objFR.style.zIndex=t.obj.style.zIndex,n.wins.vp.insertBefore(t.objFR,t.obj));t.rx=i.conf.x;t.ry=i.conf.y;t.rw=i.conf.w;t.rh=i.conf.h;t=null};this._rAdjustSizer=function(){var t=n.conf.resize;t.obj||this._rInitSizer();t.obj.style.width=t.rw+"px";t.obj.style.height=t.rh+"px";t.rx!=null&&(t.obj.style.left=t.rx+"px");t.ry!=null&&(t.obj.style.top=t.ry+"px");t.objFR!=null&&(t.objFR.style.width=t.obj.style.width,t.objFR.style.height=t.obj.style.height,t.rx!=null&&(t.objFR.style.left=t.obj.style.left),t.ry!=null&&(t.objFR.style.top=t.obj.style.top));t=null};typeof addEventListener=="function"?(this.wins.w[this._idd].brd.addEventListener("mousemove",this._rOnCellMouseMove,!1),this.wins.w[this._idd].brd.addEventListener("mousedown",this._rOnCellMouseDown,!1),this.wins.w[this._idd].brd.addEventListener("contextmenu",this._rOnCellContextMenu,!1)):(this.wins.w[this._idd].brd.attachEvent("onmousemove",this._rOnCellMouseMove),this.wins.w[this._idd].brd.attachEvent("onmousedown",this._rOnCellMouseDown),this.wins.w[this._idd].brd.attachEvent("oncontextmenu",this._rOnCellContextMenu));this._unloadResize=function(){typeof addEventListener=="function"?(this.wins.w[this._idd].brd.removeEventListener("mousemove",this._rOnCellMouseMove,!1),this.wins.w[this._idd].brd.removeEventListener("mousedown",this._rOnCellMouseDown,!1),this.wins.w[this._idd].brd.removeEventListener("contextmenu",this._rOnCellContextMenu,!1)):(this.wins.w[this._idd].brd.detachEvent("onmousemove",this._rOnCellMouseMove),this.wins.w[this._idd].brd.detachEvent("onmousedown",this._rOnCellMouseDown),this.wins.w[this._idd].brd.detachEvent("oncontextmenu",this._rOnCellContextMenu));this._initResize=null;this._rOnCellMouseMove=null;this._rOnCellMouseDown=null;this._rOnWinMouseMove=null;this._rOnWinMouseUp=null;this._rOnSelectStart=null;this._rInitSizer=null;this._rAdjustSizer=null;this._unloadResize=null;this.conf.resize=null;n=null}};dhtmlXWindows.prototype.attachContextMenu=function(n){return this._renderContextMenu("icon",null,null,n)};dhtmlXWindows.prototype.getContextMenu=function(){return this.cm!=null&&this.cm.global!=null?this.cm.global:null};dhtmlXWindows.prototype.detachContextMenu=function(){this._detachContextMenu("icon",null,null)};dhtmlXWindowsCell.prototype.attachContextMenu=function(n){return this.wins._renderContextMenu("icon",this._idd,null,n)};dhtmlXWindowsCell.prototype.getContextMenu=function(){return this.wins.cm!=null&&this.wins.cm.icon[this._idd]!=null?this.wins.cm.icon[this._idd]:null};dhtmlXWindowsCell.prototype.detachContextMenu=function(){this.wins._detachContextMenu("icon",this._idd,null)};dhtmlXWindowsButton.prototype.attachContextMenu=function(n){return this.conf.wins._renderContextMenu("button",this.conf.winId,this.conf.name,n)};dhtmlXWindowsButton.prototype.getContextMenu=function(){return this.conf.wins.cm==null||this.conf.wins.cm.button[this.conf.winId]==null?null:this.conf.wins.cm.button[this.conf.winId][this.conf.name]!=null?this.conf.wins.cm.button[this.conf.winId][this.conf.name]:null};dhtmlXWindowsButton.prototype.detachContextMenu=function(){this.conf.wins._detachContextMenu("button",this.conf.winId,this.conf.name)};dhtmlXWindows.prototype._renderContextMenu=function(n,t,i,r){var u=this,e=!1,f;if(this.cm==null&&(this.cm={global:null,icon:{},button:{}},e=!0),t==null){if(this.cm.global!=null)return}else if(n=="icon"){if(this.cm.icon[t]!=null)return}else if(n=="button"&&this.cm.button[t]!=null&&this.cm.button[t][i]!=null)return;return r==null&&(r={}),r.parent=null,r.context=!0,f=new dhtmlXMenuObject(r),f.setAutoHideMode(!1),f.attachEvent("onShow",function(){this.conf.wins_menu_open=!0}),f.attachEvent("onHide",function(){this.conf.wins_menu_open=!1;u.conf.opened_menu=null}),t==null?this.cm.global=f:n=="icon"?this.cm.icon[t]=f:n=="button"&&(this.cm.button[t]==null&&(this.cm.button[t]={}),this.cm.button[t][i]=f),e&&(this._showContextMenu=function(n,t){var r,i,u;if(!(n.button>=2)){if(t.mode=="icon"&&t.id!=null&&t.press_type=="mousedown"){if(i=this.cm.icon[t.id]||this.cm.global,i==null)return;n.cancelBubble=!0;r=this.w[t.id].hdr.firstChild;i.conf.wins_menu_open&&this.conf.opened_menu==t.id?i.hideContextMenu():(this._hideContextMenu(),i.showContextMenu(window.dhx4.absLeft(r),window.dhx4.absTop(r)+r.offsetHeight),this.conf.opened_menu=t.id);i=r=null}if(t.mode=="button"&&t.id!=null&&t.press_type=="mousedown"){if(this.cm.button[t.id]==null||this.cm.button[t.id][t.button_name]==null)return;n.cancelBubble=!0;this.conf.button_last=null;i=this.cm.button[t.id][t.button_name];u=this.w[t.id].b[t.button_name].button;i.conf.wins_menu_open&&this.conf.opened_menu==t.id?i.hideContextMenu():(this._hideContextMenu(),i.showContextMenu(window.dhx4.absLeft(u),window.dhx4.absTop(u)+u.offsetHeight),this.conf.opened_menu=t.id);i=u=null}}},this._hideContextMenu=function(n){var i,r,t,f;if(n!=null){if(n=n||event,n.type=="keydown"&&n.keyCode!=27)return;for(i=n.target||n.srcElement,r=!0;i!=null&&r==!0;)i.className!=null&&i.className.search(/SubLevelArea_Polygon/)>=0?r=!1:i=i.parentNode}if(r||n==null){u.cm.global!=null&&u.cm.global.hideContextMenu();for(t in u.cm.icon)u.cm.icon[t]!=null&&u.cm.icon[t].hideContextMenu();for(t in u.cm.button)for(f in u.cm.button[t])u.cm.button[t][f]!=null&&u.cm.button[t][f].hideContextMenu()}},this._detachContextMenu=function(n,t,i){this.cm!=null&&(t==null?this.cm.global!=null&&(this.cm.global.unload(),this.cm.global=null):n=="icon"?this.cm.icon[t]!=null&&(this.cm.icon[t].unload(),this.cm.icon[t]=null):n=="button"&&this.cm.button[t]!=null&&this.cm.button[t][i]!=null&&(this.cm.button[t][i].unload(),this.cm.button[t][i]=null))},this.attachEvent("_winMouseDown",this._showContextMenu),typeof addEventListener=="function"?(window.addEventListener("mousedown",this._hideContextMenu,!1),window.addEventListener("keydown",this._hideContextMenu,!1)):(document.body.attachEvent("onmousedown",this._hideContextMenu),document.body.attachEvent("onkeydown",this._hideContextMenu)),this._unloadContextMenu=function(){this._detachContextMenu("icon",null,null);this.cm=null;typeof addEventListener=="function"?(window.removeEventListener("mousedown",this._hideContextMenu,!1),window.removeEventListener("keydown",this._hideContextMenu,!1)):(document.body.detachEvent("onmousedown",this._hideContextMenu),document.body.detachEvent("onkeydown",this._hideContextMenu));u=null}),f};window.dhtmlx||(window.dhtmlx={}),function(){function u(n,r){var u=n.callback;t(!1);n.box.parentNode.removeChild(n.box);i=n.box=null;u&&u(r)}function r(n){if(i){n=n||event;var t=n.which||event.keyCode;return dhtmlx.message.keyboard&&((t==13||t==32)&&u(i,!0),t==27&&u(i,!1)),n.preventDefault&&n.preventDefault(),!(n.cancelBubble=!0)}}function t(n){t.cover||(t.cover=document.createElement("DIV"),t.cover.onkeydown=r,t.cover.className="dhx_modal_cover",document.body.appendChild(t.cover));var i=document.body.scrollHeight;t.cover.style.display=n?"inline-block":"none"}function f(n,t){return"<div class='dhtmlx_popup_button' result='"+t+"' ><div>"+n+"<\/div><\/div>"}function l(t){n.area||(n.area=document.createElement("DIV"),n.area.className="dhtmlx_message_area",n.area.style[n.position]="15px",document.body.appendChild(n.area));n.hide(t.id);var i=document.createElement("DIV");return i.innerHTML="<div>"+t.text+"<\/div>",i.className="dhtmlx-info dhtmlx-"+t.type,i.onclick=function(){t&&n.hide(t.id);t=null},n.position=="bottom"&&n.area.firstChild?n.area.insertBefore(i,n.area.firstChild):n.area.appendChild(i),t.expire>0&&(n.timers[t.id]=window.setTimeout(function(){n.hide(t.id)},t.expire)),n.pull[t.id]=i,i=null,t.id}function a(n,t,r){var e=document.createElement("DIV"),o,h,s;if(e.className=" dhtmlx_modal_box dhtmlx-"+n.type,e.setAttribute("dhxbox",1),o="",n.width&&(e.style.width=n.width),n.height&&(e.style.height=n.height),n.title&&(o+='<div class="dhtmlx_popup_title">'+n.title+"<\/div>"),o+='<div class="dhtmlx_popup_text"><span>'+(n.content?"":n.text)+'<\/span><\/div><div  class="dhtmlx_popup_controls">',t&&(o+=f(n.ok||"OK",!0)),r&&(o+=f(n.cancel||"Cancel",!1)),n.buttons)for(h=0;h<n.buttons.length;h++)o+=f(n.buttons[h],h);return o+="<\/div>",e.innerHTML=o,n.content&&(s=n.content,typeof s=="string"&&(s=document.getElementById(s)),s.style.display=="none"&&(s.style.display=""),e.childNodes[n.title?1:0].appendChild(s)),e.onclick=function(t){var i,r;t=t||event;i=t.target||t.srcElement;i.className||(i=i.parentNode);i.className=="dhtmlx_popup_button"&&(r=i.getAttribute("result"),r=r=="true"||(r=="false"?!1:r),u(n,r))},n.box=e,(t||r)&&(i=n),e}function e(n,i,u){var f=n.tagName?n:a(n,i,u),e,o;return n.hidden||t(!0),document.body.appendChild(f),e=n.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-f.offsetWidth)/2)),o=n.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-f.offsetHeight)/2)),f.style.top=n.position=="top"?"-3px":o+"px",f.style.left=e+"px",f.onkeydown=r,f.focus(),n.hidden&&dhtmlx.modalbox.hide(f),f}function s(n){return e(n,!0,!1)}function h(n){return e(n,!0,!0)}function c(n){return e(n)}function o(n,t,i){return typeof n!="object"&&(typeof t=="function"&&(i=t,t=""),n={text:n,type:t,callback:i}),n}function v(t,i,r,u){return typeof t=="object"&&t||(t={text:t,type:i,expire:r,id:u}),t.id=t.id||n.uid(),t.expire=t.expire||n.expire,t}var i=null,n;document.attachEvent?document.attachEvent("onkeydown",r):document.addEventListener("keydown",r,!0);dhtmlx.alert=function(){var n=o.apply(this,arguments);return n.type=n.type||"confirm",s(n)};dhtmlx.confirm=function(){var n=o.apply(this,arguments);return n.type=n.type||"alert",h(n)};dhtmlx.modalbox=function(){var n=o.apply(this,arguments);return n.type=n.type||"alert",c(n)};dhtmlx.modalbox.hide=function(n){while(n&&n.getAttribute&&!n.getAttribute("dhxbox"))n=n.parentNode;n&&(n.parentNode.removeChild(n),t(!1),i=null)};n=dhtmlx.message=function(n){n=v.apply(this,arguments);n.type=n.type||"info";var t=n.type.split("-")[0];switch(t){case"alert":return s(n);case"confirm":return h(n);case"modalbox":return c(n);default:return l(n)}};n.seed=(new Date).valueOf();n.uid=function(){return n.seed++};n.expire=4e3;n.keyboard=!0;n.position="top";n.pull={};n.timers={};n.hideAll=function(){for(var t in n.pull)n.hide(t)};n.hide=function(t){var i=n.pull[t];i&&i.parentNode&&(window.setTimeout(function(){i.parentNode.removeChild(i);i=null},2e3),i.className+=" hidden",n.timers[t]&&window.clearTimeout(n.timers[t]),delete n.pull[t])}}(),function(){var n={};n.assert=function(t,i){t||n.assert_error(i)};n.assert_error=function(t){n.log("error",t);n.message&&typeof t=="string"&&n.message({type:"debug",text:t,expire:-1});n.debug!==!1&&eval("debugger;")};n.assert_core_ready=function(){window.dhx_on_core_ready&&dhx_on_core_ready()};n.codebase="./";n.name="Core";n.clone=function(t){var i=n.clone._function;return i.prototype=t,new i};n.clone._function=function(){};n.extend=function(t,i,r){if(n.assert(t,"Invalid mixing target"),n.assert(i,"Invalid mixing source"),t._dhx_proto_wait)return n.PowerArray.insertAt.call(t._dhx_proto_wait,i,1),t;for(var u in i)(!t[u]||r)&&(t[u]=i[u]);return i.defaults&&n.extend(t.defaults,i.defaults),i.$init&&i.$init.call(t),t};n.copy=function(t){var r,i;n.assert(t,"Invalid mixing target");arguments.length>1?(r=arguments[0],t=arguments[1]):r=n.isArray(t)?[]:{};for(i in t)t[i]&&typeof t[i]=="object"&&!n.isDate(t[i])?(r[i]=n.isArray(t[i])?[]:{},n.copy(r[i],t[i])):r[i]=t[i];return r};n.single=function(n){var t=null;return function(){return t||(t=new n({})),t._reinit&&t._reinit.apply(t,arguments),t}};n.protoUI=function(){n.debug_proto&&n.log("UI registered: "+arguments[0].name);var r=arguments,i=r[0].name,t=function(r){var e,f,u;if(!t)return n.ui[i].prototype;if(e=t._dhx_proto_wait,e){for(f=[e[0]],u=1;u<e.length;u++)f[u]=e[u],f[u]._dhx_proto_wait&&(f[u]=f[u].call(n,f[u].name)),f[u].prototype&&f[u].prototype.name&&(n.ui[f[u].prototype.name]=f[u]);if(n.ui[i]=n.proto.apply(n,f),t._dhx_type_wait)for(u=0;u<t._dhx_type_wait.length;u++)n.Type(n.ui[i],t._dhx_type_wait[u]);t=e=null}return this!=n?new n.ui[i](r):n.ui[i]};return t._dhx_proto_wait=Array.prototype.slice.call(arguments,0),n.ui[i]=t};n.proto=function(){var i,o,u,e,s;n.debug_proto&&n.log("Proto chain:"+arguments[0].name+"["+arguments.length+"]");var t=arguments,r=t[0],h=!!r.$init,f=[];for(n.assert(r,"Invalid mixing target"),i=t.length-1;i>0;i--){if(n.assert(t[i],"Invalid mixing source"),typeof t[i]=="function"&&(t[i]=t[i].prototype),t[i].$init&&f.push(t[i].$init),t[i].defaults){o=t[i].defaults;r.defaults||(r.defaults={});for(u in o)n.isUndefined(r.defaults[u])&&(r.defaults[u]=o[u])}if(t[i].type&&r.type)for(u in t[i].type)r.type[u]||(r.type[u]=t[i].type[u]);for(e in t[i])r[e]||(r[e]=t[i][e])}return h&&f.push(r.$init),r.$init=function(){for(var n=0;n<f.length;n++)f[n].apply(this,arguments)},s=function(t){this.$ready=[];n.assert(this.$init,"object without init method");this.$init(t);this._parseSettings&&this._parseSettings(t,this.defaults);for(var i=0;i<this.$ready.length;i++)this.$ready[i].call(this)},s.prototype=r,r=t=null,s};n.bind=function(n,t){return function(){return n.apply(t,arguments)}};n.require=function(t,i,r){var u,f,e,o,s;if(typeof t!="string"){if(u=t.length||0,f=i,u)i=function(){if(u)u--,n.require(t[t.length-u-1],i,r);else return f.apply(this,arguments)},i();else{for(e in t)u++;i=function(){u--;u===0&&f.apply(this,arguments)};for(e in t)n.require(e,i,r)}return}if(n._modules[t]!==!0){if(t.substr(-4)==".css"){o=n.html.create("LINK",{type:"text/css",rel:"stylesheet",href:n.codebase+t});document.head.appendChild(o);i&&i.call(r||window);return}s=arguments[4];i?n._modules[t]?n._modules[t].push([i,r]):(n._modules[t]=[[i,r]],n.ajax(n.codebase+t,function(i){var u,r;for(n.exec(i),u=n._modules[t],n._modules[t]=!0,r=0;r<u.length;r++)u[r][0].call(u[r][1]||window,!r)})):(n.exec(n.ajax().sync().get(n.codebase+t).responseText),n._modules[t]=!0)}};n._modules={};n.exec=function(n){window.execScript?window.execScript(n):window.eval(n)};n.wrap=function(n,t){return n?function(){var i=n.apply(this,arguments);return t.apply(this,arguments),i}:t};n.isUndefined=function(n){return typeof n=="undefined"};n.delay=function(n,t,i,r){return window.setTimeout(function(){var r=n.apply(t,i||[]);return n=t=i=null,r},r||1)};n.uid=function(){return this._seed||(this._seed=(new Date).valueOf()),this._seed++,this._seed};n.toNode=function(n){return typeof n=="string"?document.getElementById(n):n};n.toArray=function(t){return n.extend(t||[],n.PowerArray,!0)};n.toFunctor=function(n){return typeof n=="string"?eval(n):n};n.isArray=function(n){return Array.isArray?Array.isArray(n):Object.prototype.toString.call(n)==="[object Array]"};n.isDate=function(n){return n instanceof Date};n._events={};n.event=function(t,i,r,u){t=n.toNode(t);var f=n.uid();return u&&(r=n.bind(r,u)),n._events[f]=[t,i,r],t.addEventListener?t.addEventListener(i,r,!1):t.attachEvent&&t.attachEvent("on"+i,r),f};n.eventRemove=function(t){if(t){n.assert(this._events[t],"Removing non-existing event");var i=n._events[t];i[0].removeEventListener?i[0].removeEventListener(i[1],i[2],!1):i[0].detachEvent&&i[0].detachEvent("on"+i[1],i[2]);delete this._events[t]}};n.log=function(n,t,i){arguments.length==1&&(t=n,n="log");window.console&&console.log&&(n=n.toLowerCase(),window.console[n]?window.console[n](t||"unknown error"):window.console.log(n+": "+t),i&&window.console.log(i))};n.log_full_time=function(t){n._start_time_log=new Date;n.log("Timing start ["+t+"]");window.setTimeout(function(){var i=new Date;n.log("Timing end ["+t+"]:"+(i.valueOf()-n._start_time_log.valueOf())/1e3+"s")},1)};n.log_time=function(t){var i="_start_time_log"+t,r;n[i]?(r=new Date,n.log("Info","Timing end ["+t+"]:"+(r.valueOf()-n[i].valueOf())/1e3+"s"),n[i]=null):(n[i]=new Date,n.log("Info","Timing start ["+t+"]"))};n.debug_code=function(t){t.call(n)};n.EventSystem={$init:function(){this._evs_events||(this._evs_events={},this._evs_handlers={},this._evs_map={})},blockEvent:function(){this._evs_events._block=!0},unblockEvent:function(){this._evs_events._block=!1},mapEvent:function(t){n.extend(this._evs_map,t,!0)},on_setter:function(n){if(n)for(var t in n)typeof n[t]=="function"&&this.attachEvent(t,n[t])},callEvent:function(t,i){var r,u,f;if(this._evs_events._block)return!0;if(t=t.toLowerCase(),r=this._evs_events[t.toLowerCase()],u=!0,n.debug&&n.log("info","["+this.name+"] event:"+t,i),r)for(f=0;f<r.length;f++)r[f].apply(this,i||[])===!1&&(u=!1);return this._evs_map[t]&&!this._evs_map[t].callEvent(t,i)&&(u=!1),u},attachEvent:function(t,i,r){n.assert(i,"Invalid event handler for "+t);t=t.toLowerCase();r=r||n.uid();i=n.toFunctor(i);var u=this._evs_events[t]||n.toArray();return u.push(i),this._evs_events[t]=u,this._evs_handlers[r]={f:i,t:t},r},detachEvent:function(n){if(this._evs_handlers[n]){var t=this._evs_handlers[n].t,i=this._evs_handlers[n].f,r=this._evs_events[t];r.remove(i);delete this._evs_handlers[n]}},hasEvent:function(n){return n=n.toLowerCase(),this._evs_events[n]?!0:!1}};n.extend(n,n.EventSystem);n.PowerArray={removeAt:function(n,t){n>=0&&this.splice(n,t||1)},remove:function(n){this.removeAt(this.find(n))},insertAt:function(n,t){if(t||t===0){var i=this.splice(t,this.length-t);this[t]=n;this.push.apply(this,i)}else this.push(n)},find:function(n){for(var t=0;t<this.length;t++)if(n==this[t])return t;return-1},each:function(n,t){for(var i=0;i<this.length;i++)n.call(t||this,this[i])},map:function(n,t){for(var i=0;i<this.length;i++)this[i]=n.call(t||this,this[i]);return this},filter:function(n,t){for(var i=0;i<this.length;i++)n.call(t||this,this[i])||(this.splice(i,1),i--);return this}};n.env={},function(){var t,f,r,e,u,i,o;for(navigator.userAgent.indexOf("Mobile")!=-1&&(n.env.mobile=!0),(n.env.mobile||navigator.userAgent.indexOf("iPad")!=-1||navigator.userAgent.indexOf("Android")!=-1)&&(n.env.touch=!0),navigator.userAgent.indexOf("Opera")!=-1?n.env.isOpera=!0:(n.env.isIE=!!document.all,n.env.isFF=!document.all,n.env.isWebKit=navigator.userAgent.indexOf("KHTML")!=-1,n.env.isSafari=n.env.isWebKit&&navigator.userAgent.indexOf("Mac")!=-1),navigator.userAgent.toLowerCase().indexOf("android")!=-1&&(n.env.isAndroid=!0),n.env.transform=!1,n.env.transition=!1,t={},t.names=["transform","transition"],t.transform=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],t.transition=["transition","WebkitTransition","MozTransition","OTransition","msTransition"],f=document.createElement("DIV"),r=0;r<t.names.length;r++)for(e=t[t.names[r]],u=0;u<e.length;u++)if(typeof f.style[e[u]]!="undefined"){n.env[t.names[r]]=e[u];break}f.style[n.env.transform]="translate3d(0,0,0)";n.env.translate=f.style[n.env.transform]?"translate3d":"translate";i="";o=!1;n.env.isOpera&&(i="-o-",o="O");n.env.isFF&&(i="-Moz-");n.env.isWebKit&&(i="-webkit-");n.env.isIE&&(i="-ms-");n.env.transformCSSPrefix=i;n.env.transformPrefix=o||n.env.transformCSSPrefix.replace(/-/gi,"");n.env.transitionEnd=n.env.transformCSSPrefix=="-Moz-"?"transitionend":n.env.transformPrefix+"TransitionEnd"}();n.env.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}();n.html={_native_on_selectstart:0,denySelect:function(){n._native_on_selectstart||(n._native_on_selectstart=document.onselectstart);document.onselectstart=n.html.stopEvent},allowSelect:function(){n._native_on_selectstart!==0&&(document.onselectstart=n._native_on_selectstart||null);n._native_on_selectstart=0},index:function(n){for(var t=0;n=n.previousSibling;)t++;return t},_style_cache:{},createCss:function(t){var r="",u,i;for(u in t)r+=u+":"+t[u]+";";return i=this._style_cache[r],i||(i="s"+n.uid(),this.addStyle("."+i+"{"+r+"}"),this._style_cache[r]=i),i},addStyle:function(n){var t=document.createElement("style");t.setAttribute("type","text/css");t.setAttribute("media","screen");t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n));document.getElementsByTagName("head")[0].appendChild(t)},create:function(n,t,i){var r,u;t=t||{};r=document.createElement(n);for(u in t)r.setAttribute(u,t[u]);return t.style&&(r.style.cssText=t.style),t["class"]&&(r.className=t["class"]),i&&(r.innerHTML=i),r},getValue:function(t){return(t=n.toNode(t),!t)?"":n.isUndefined(t.value)?t.innerHTML:t.value},remove:function(n){if(n instanceof Array)for(var t=0;t<n.length;t++)this.remove(n[t]);else n&&n.parentNode&&n.parentNode.removeChild(n)},insertBefore:function(n,t,i){n&&(t&&t.parentNode?t.parentNode.insertBefore(n,t):i.appendChild(n))},locate:function(n,t){var i,r;for(n.tagName?i=n:(n=n||event,i=n.target||n.srcElement);i;){if(i.getAttribute&&(r=i.getAttribute(t),r))return r;i=i.parentNode}return null},offset:function(n){var t,i;if(n.getBoundingClientRect){var f=n.getBoundingClientRect(),r=document.body,u=document.documentElement,e=window.pageYOffset||u.scrollTop||r.scrollTop,o=window.pageXOffset||u.scrollLeft||r.scrollLeft,s=u.clientTop||r.clientTop||0,h=u.clientLeft||r.clientLeft||0,t=f.top+e-s,i=f.left+o-h;return{y:Math.round(t),x:Math.round(i)}}for(t=0,i=0;n;)t=t+parseInt(n.offsetTop,10),i=i+parseInt(n.offsetLeft,10),n=n.offsetParent;return{y:t,x:i}},posRelative:function(t){return t=t||event,n.isUndefined(t.offsetX)?{x:t.layerX,y:t.layerY}:{x:t.offsetX,y:t.offsetY}},pos:function(t){if(t=t||event,t.pageX||t.pageY)return{x:t.pageX,y:t.pageY};var i=n.env.isIE&&document.compatMode!="BackCompat"?document.documentElement:document.body;return{x:t.clientX+i.scrollLeft-i.clientLeft,y:t.clientY+i.scrollTop-i.clientTop}},preventEvent:function(t){return t&&t.preventDefault&&t.preventDefault(),n.html.stopEvent(t)},stopEvent:function(n){return(n||event).cancelBubble=!0,!1},addCss:function(n,t){n.className+=" "+t},removeCss:function(n,t){n.className=n.className.replace(RegExp(" "+t,"g"),"")}};n.ready=function(n){this._ready?n.call():this._ready_code.push(n)};n._ready_code=[],function(){var t=document.getElementsByTagName("SCRIPT");n.assert(t.length,"Can't locate codebase");t.length&&(t=(t[t.length-1].getAttribute("src")||"").split("/"),t.splice(t.length-1,1),n.codebase=t.slice(0,t.length).join("/")+"/");n.event(window,"load",function(){dhx4.callEvent("onReady",[]);n.delay(function(){n._ready=!0;for(var t=0;t<n._ready_code.length;t++)n._ready_code[t].call();n._ready_code=[]})})}();n.locale=n.locale||{};n.assert_core_ready();n.ready(function(){n.event(document.body,"click",function(n){dhx4.callEvent("onClick",[n||event])})}),function(){var t={},i=new RegExp("(\\r\\n|\\n)","g"),r=new RegExp('(\\")',"g");n.Template=function(u){if(typeof u=="function")return u;if(t[u])return t[u];if(u=(u||"").toString(),u.indexOf("->")!=-1){u=u.split("->");switch(u[0]){case"html":u=n.html.getValue(u[1])}}u=(u||"").toString();u=u.replace(i,"\\n");u=u.replace(r,'\\"');u=u.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"');u=u.replace(/\{common\.([^}\(]*)\}/g,"\"+(common.$1||'')+\"");u=u.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1.apply(this, arguments):"")+"');u=u.replace(/\{obj\.([^}]*)\}/g,'"+(obj.$1)+"');u=u.replace("{obj}",'"+obj+"');u=u.replace(/#([^#'";, ]+)#/gi,'"+(obj.$1)+"');try{t[u]=Function("obj","common",'return "'+u+'";')}catch(f){n.assert_error("Invalid template:"+u)}return t[u]};n.Template.empty=function(){return""};n.Template.bind=function(t){return n.bind(n.Template(t),this)};n.Type=function(t,i){var u,f,r;if(t._dhx_proto_wait){t._dhx_type_wait||(t._dhx_type_wait=[]);t._dhx_type_wait.push(i);return}typeof t=="function"&&(t=t.prototype);t.types||(t.types={"default":t.type},t.type.name="default");u=i.name;f=t.type;u&&(f=t.types[u]=n.clone(i.baseType?t.types[i.baseType]:t.type));for(r in i)f[r]=r.indexOf("template")===0?n.Template(i[r]):i[r];return u}}();n.Settings={$init:function(){this._settings=this.config={}},define:function(n,t){return typeof n=="object"?this._parseSeetingColl(n):this._define(n,t)},_define:function(n,t){var i=this[n+"_setter"];return this._settings[n]=i?i.call(this,t,n):t},_parseSeetingColl:function(n){if(n)for(var t in n)this._define(t,n[t])},_parseSettings:function(t,i){var r={};i&&(r=n.extend(r,i));typeof t!="object"||t.tagName||n.extend(r,t,!0);this._parseSeetingColl(r)},_mergeSettings:function(n,t){for(var i in t)switch(typeof n[i]){case"object":n[i]=this._mergeSettings(n[i]||{},t[i]);break;case"undefined":n[i]=t[i]}return n},debug_freid_c_id:!0,debug_freid_a_name:!0};n.ajax=function(t,i,r){if(arguments.length!==0){var u=new n.ajax;return r&&(u.master=r),u.get(t,null,i)}return this.getXHR?this:new n.ajax};n.ajax.count=0;n.ajax.prototype={master:null,getXHR:function(){return n.env.isIE?new ActiveXObject("Microsoft.xmlHTTP"):new XMLHttpRequest},send:function(t,i,r){var u=this.getXHR(),o,s,e,f;if(n.isArray(r)||(r=[r]),typeof i=="object"){o=[];for(s in i)e=i[s],(e===null||e===n.undefined)&&(e=""),o.push(s+"="+encodeURIComponent(e));i=o.join("&")}return i&&this.request==="GET"&&(t=t+(t.indexOf("?")!=-1?"&":"?")+i,i=null),u.open(this.request,t,!this._sync),this.request==="POST"&&u.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f=this,u.onreadystatechange=function(){var t,i;if(!u.readyState||u.readyState==4){if(n.debug_time&&n.log_full_time("data_loading"),n.ajax.count++,r&&f)for(t=0;t<r.length;t++)r[t]&&(i=r[t].success||r[t],(u.status>=400||!u.status&&!u.responseText)&&(i=r[t].error),i&&i.call(f.master||f,u.responseText,u.responseXML,u));f&&(f.master=null);r=f=null}},u.send(i||null),u},get:function(n,t,i){return arguments.length==2&&(i=t,t=null),this.request="GET",this.send(n,t,i)},post:function(n,t,i){return this.request="POST",this.send(n,t,i)},put:function(n,t,i){return this.request="PUT",this.send(n,t,i)},del:function(n,t,i){return this.request="DELETE",this.send(n,t,i)},sync:function(){return this._sync=!0,this},bind:function(n){return this.master=n,this}};n.send=function(t,i,r,u){var f=n.html.create("FORM",{target:u||"_self",action:t,method:r||"POST"},""),e,o;for(e in i)o=n.html.create("INPUT",{type:"hidden",name:e,value:i[e]},""),f.appendChild(o);f.style.display="none";document.body.appendChild(f);f.submit();document.body.removeChild(f)};n.AtomDataLoader={$init:function(n){this.data={};n&&(this._settings.datatype=n.datatype||"json",this.$ready.push(this._load_when_ready))},_load_when_ready:function(){this._ready_for_data=!0;this._settings.url&&this.url_setter(this._settings.url);this._settings.data&&this.data_setter(this._settings.data)},url_setter:function(n){return this._ready_for_data?(this.load(n,this._settings.datatype),n):n},data_setter:function(n){return this._ready_for_data?(this.parse(n,this._settings.datatype),!0):n},debug_freid_c_datatype:!0,debug_freid_c_dataFeed:!0,load:function(t,i){if(t.$proxy){t.load(this,typeof i=="string"?i:"json");return}this.callEvent("onXLS",[]);typeof i=="string"?(this.data.driver=n.DataDriver[i],i=arguments[2]):this.data.driver||(this.data.driver=n.DataDriver.json);var r=[{success:this._onLoad,error:this._onLoadError}];return i&&(n.isArray(i)?r.push.apply(r,i):r.push(i)),n.ajax(t,r,this)},parse:function(t,i){this.callEvent("onXLS",[]);this.data.driver=n.DataDriver[i||"json"];this._onLoad(t,null)},_onLoad:function(n,t,i){var r=this.data.driver,u=r.toObject(n,t),f;u?(f=r.getRecords(u)[0],this.data=r?r.getDetails(f):n):this._onLoadError(n,t,i);this.callEvent("onXLE",[])},_onLoadError:function(n,t,i){this.callEvent("onXLE",[]);this.callEvent("onLoadError",arguments);dhx4.callEvent("onLoadError",[n,t,i,this])},_check_data_feed:function(t){if(!this._settings.dataFeed||this._ignore_feed||!t)return!0;var i=this._settings.dataFeed;return typeof i=="function"?i.call(this,t.id||t,t):(i=i+(i.indexOf("?")==-1?"?":"&")+"action=get&id="+encodeURIComponent(t.id||t),this.callEvent("onXLS",[]),n.ajax(i,function(t,i,r){this._ignore_feed=!0;var u=n.DataDriver.toObject(t,i);u?this.setValues(u.getDetails(u.getRecords()[0])):this._onLoadError(t,i,r);this._ignore_feed=!1;this.callEvent("onXLE",[])},this),!1)}};n.DataDriver={};n.DataDriver.json={toObject:function(t){var r,i;if(t||(t="[]"),typeof t=="string"){try{eval("dhx.temp="+t)}catch(u){return n.assert_error(u),null}t=n.temp}if(t.data){r=t.data.config={};for(i in t)i!="data"&&(r[i]=t[i]);t=t.data}return t},getRecords:function(t){return t&&!n.isArray(t)?[t]:t},getDetails:function(t){return typeof t=="string"?{id:n.uid(),value:t}:t},getInfo:function(n){var t=n.config;return t?{_size:t.total_count||0,_from:t.pos||0,_parent:t.parent||0,_config:t.config,_key:t.dhx_security}:{}},child:"data"};n.DataDriver.html={toObject:function(t){if(typeof t=="string"){var i=null;return t.indexOf("<")==-1&&(i=n.toNode(t)),i||(i=document.createElement("DIV"),i.innerHTML=t),i.getElementsByTagName(this.tag)}return t},getRecords:function(n){for(var i,r=[],t=0;t<n.childNodes.length;t++)i=n.childNodes[t],i.nodeType==1&&r.push(i);return r},getDetails:function(t){return n.DataDriver.xml.tagToObject(t)},getInfo:function(){return{_size:0,_from:0}},tag:"LI"};n.DataDriver.jsarray={toObject:function(t){return typeof t=="string"?(eval("dhx.temp="+t),n.temp):t},getRecords:function(n){return n},getDetails:function(n){for(var i={},t=0;t<n.length;t++)i["data"+t]=n[t];return i},getInfo:function(){return{_size:0,_from:0}}};n.DataDriver.csv={toObject:function(n){return n},getRecords:function(n){return n.split(this.row)},getDetails:function(n){var i,t;for(n=this.stringToArray(n),i={},t=0;t<n.length;t++)i["data"+t]=n[t];return i},getInfo:function(){return{_size:0,_from:0}},stringToArray:function(n){n=n.split(this.cell);for(var t=0;t<n.length;t++)n[t]=n[t].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return n},row:"\n",cell:","};n.DataDriver.xml={_isValidXML:function(n){return!n||!n.documentElement?null:n.getElementsByTagName("parsererror").length?null:n},toObject:function(n){if(this._isValidXML(t))return t;if(typeof n=="string")var t=this.fromString(n.replace(/^[\s]+/,""));else t=n;return this._isValidXML(t)?t:null},getRecords:function(n){return this.xpath(n,this.records)},records:"/*/item",child:"item",config:"/*/config",getDetails:function(n){return this.tagToObject(n,{})},getInfo:function(n){var t=this.xpath(n,this.config);return t=t.length?this.assignTypes(this.tagToObject(t[0],{})):null,{_size:n.documentElement.getAttribute("total_count")||0,_from:n.documentElement.getAttribute("pos")||0,_parent:n.documentElement.getAttribute("parent")||0,_config:t,_key:n.documentElement.getAttribute("dhx_security")||null}},xpath:function(n,t){var u,r,o;if(window.XPathResult){u=n;n.nodeName.indexOf("document")==-1&&(n=n.ownerDocument);for(var f=[],e=n.evaluate(t,u,null,XPathResult.ANY_TYPE,null),i=e.iterateNext();i;)f.push(i),i=e.iterateNext();return f}r=!0;try{typeof n.selectNodes=="undefined"&&(r=!1)}catch(s){}return r?n.selectNodes(t):(o=t.split("/").pop(),n.getElementsByTagName(o))},assignTypes:function(n){var i,t;for(i in n)if(t=n[i],typeof t=="object")this.assignTypes(t);else if(typeof t=="string"){if(t==="")continue;t=="true"?n[i]=!0:t=="false"?n[i]=!1:t==t*1&&(n[i]=n[i]*1)}return n},tagToObject:function(t,i){var o,f,u,s,r,e;if(i=i||{},o=!1,f=t.attributes,f&&f.length){for(r=0;r<f.length;r++)i[f[r].name]=f[r].value;o=!0}for(u=t.childNodes,s={},r=0;r<u.length;r++)u[r].nodeType==1&&(e=u[r].tagName,typeof i[e]!="undefined"?(n.isArray(i[e])||(i[e]=[i[e]]),i[e].push(this.tagToObject(u[r],{}))):i[u[r].tagName]=this.tagToObject(u[r],{}),o=!0);return o?(i.value=i.value||this.nodeValue(t),i):this.nodeValue(t)},nodeValue:function(n){return n.firstChild?n.firstChild.data:""},fromString:function(t){try{if(window.DOMParser)return(new DOMParser).parseFromString(t,"text/xml");if(window.ActiveXObject){var i=new ActiveXObject("Microsoft.xmlDOM");return i.loadXML(t),i}}catch(r){return n.assert_error(r),null}n.assert_error("Load from xml string is not supported")}};n.DataLoader=n.proto({$init:function(t){t=t||"";this._ajax_queue=n.toArray();this.data=new n.DataStore;this.data.attachEvent("onClearAll",n.bind(this._call_onclearall,this));this.data.attachEvent("onServerConfig",n.bind(this._call_on_config,this));this.data.feed=this._feed},_feed:function(n,t,i){if(this._load_count)return this._load_count=[n,t,i];this._load_count=!0;this._feed_last=[n,t];this._feed_common.call(this,n,t,i)},_feed_common:function(n,t,i){var r=this.data.url;n<0&&(n=0);this.load(r+(r.indexOf("?")==-1?"?":"&")+(this.dataCount()?"continue=true&":"")+"start="+n+"&count="+t,[this._feed_callback,i])},_feed_callback:function(){var n=this._load_count,t=this._feed_last;this._load_count=!1;typeof n=="object"&&(n[0]!=t[0]||n[1]!=t[1])&&this.data.feed.apply(this,n)},load:function(t){var i=n.AtomDataLoader.load.apply(this,arguments);this._ajax_queue.push(i);this.data.url||(this.data.url=t)},loadNext:function(t,i,r,u,f){if(this._settings.datathrottle&&!f){this._throttle_request&&window.clearTimeout(this._throttle_request);this._throttle_request=n.delay(function(){this.loadNext(t,i,r,u,!0)},this,0,this._settings.datathrottle);return}i||i===0||(i=this.dataCount());this.data.url=this.data.url||u;this.callEvent("onDataRequest",[i,t,r,u])&&this.data.url&&this.data.feed.call(this,i,t,r)},_maybe_loading_already:function(n,t){var i=this._feed_last;return this._load_count&&i&&i[0]<=t&&i[1]+i[0]>=n+t?!0:!1},_onLoad:function(n,t,i){this._ajax_queue.remove(i);var r=this.data.driver.toObject(n,t);if(r)this.data._parse(r);else return this._onLoadError(n,t,i);this._call_onready();this.callEvent("onXLE",[])},removeMissed_setter:function(n){return this.data._removeMissed=n},scheme_setter:function(n){this.data.scheme(n)},dataFeed_setter:function(t){return this.data.attachEvent("onBeforeFilter",n.bind(function(n,t){var i,r,u,f;if(this._settings.dataFeed){if(i={},!n&&!t)return;if(typeof n=="function"){if(!t)return;n(t,i)}else i={text:t};if(this.clearAll(),r=this._settings.dataFeed,u=[],typeof r=="function")return r.call(this,t,i);for(f in i)u.push("dhx_filter["+f+"]="+encodeURIComponent(i[f]));return this.load(r+(r.indexOf("?")<0?"?":"&")+u.join("&"),this._settings.datatype),!1}},this)),t},debug_freid_c_ready:!0,debug_freid_c_datathrottle:!0,_call_onready:function(){if(this._settings.ready&&!this._ready_was_used){var t=n.toFunctor(this._settings.ready);t&&n.delay(t,this,arguments);this._ready_was_used=!0}},_call_onclearall:function(){for(var t=0;t<this._ajax_queue.length;t++)this._ajax_queue[t].abort();this._ajax_queue=n.toArray()},_call_on_config:function(n){this._parseSeetingColl(n)}},n.AtomDataLoader);n.DataStore=function(){this.name="DataStore";n.extend(this,n.EventSystem);this.setDriver("json");this.pull={};this.order=n.toArray();this._marks={}};n.DataStore.prototype={setDriver:function(t){n.assert(n.DataDriver[t],"incorrect DataDriver");this.driver=n.DataDriver[t]},_parse:function(t){var i,r;this.callEvent("onParse",[this.driver,t]);this._filter_order&&this.filter();i=this.driver.getInfo(t);i._key&&(n.securityKey=i._key);i._config&&this.callEvent("onServerConfig",[i._config]);r=this.driver.getRecords(t);this._inner_parse(i,r);this._scheme_group&&this._group_processing&&this._group_processing(this._scheme_group);this._scheme_sort&&(this.blockEvent(),this.sort(this._scheme_sort),this.unblockEvent());this.callEvent("onStoreLoad",[this.driver,t]);this.refresh()},_inner_parse:function(t,i){var s=(t._from||0)*1,h=!0,f=!1,e,r,o,u,c;if(s===0&&this.order[0]){if(this._removeMissed)for(f={},r=0;r<this.order.length;r++)f[this.order[r]]=!0;h=!1;s=this.order.length}for(e=0,r=0;r<i.length;r++)o=this.driver.getDetails(i[r]),u=this.id(o),this.pull[u]?h&&this.order[e+s]&&e++:(this.order[e+s]=u,e++),this.pull[u]?(n.extend(this.pull[u],o,!0),this._scheme_update&&this._scheme_update(this.pull[u]),f&&delete f[u]):(this.pull[u]=o,this._scheme_init&&this._scheme_init(o));if(f){this.blockEvent();for(c in f)this.remove(c);this.unblockEvent()}this.order[t._size-1]||(this.order[t._size-1]=n.undefined)},id:function(t){return t.id||(t.id=n.uid())},changeId:function(n,t){this.pull[n]&&(this.pull[t]=this.pull[n]);this.pull[t].id=t;this.order[this.order.find(n)]=t;this._filter_order&&(this._filter_order[this._filter_order.find(n)]=t);this._marks[n]&&(this._marks[t]=this._marks[n],delete this._marks[n]);this.callEvent("onIdChange",[n,t]);this._render_change_id&&this._render_change_id(n,t);delete this.pull[n]},item:function(n){return this.pull[n]},update:function(t,i){if(n.isUndefined(i)&&(i=this.item(t)),this._scheme_update&&this._scheme_update(i),this.callEvent("onBeforeUpdate",[t,i])===!1)return!1;this.pull[t]=i;this.callEvent("onStoreUpdated",[t,i,"update"])},refresh:function(n){this._skip_refresh||(n?this.callEvent("onStoreUpdated",[n,this.pull[n],"paint"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(n,t){this._skip_refresh=!0;n.call(t||this);this._skip_refresh=!1},getRange:function(n,t){if(n=n?this.indexById(n):this.$min||this.startOffset||0,t?t=this.indexById(t):(t=Math.min(this.$max||this.endOffset||Infinity,this.dataCount()-1),t<0&&(t=0)),n>t){var i=t;t=n;n=i}return this.getIndexRange(n,t)},getIndexRange:function(t,i){var u,r;for(i=Math.min(i||Infinity,this.dataCount()-1),u=n.toArray(),r=t||0;r<=i;r++)u.push(this.item(this.order[r]));return u},dataCount:function(){return this.order.length},exists:function(n){return!!this.pull[n]},move:function(t,i){n.assert(t>=0&&i>=0,"DataStore::move","Incorrect indexes");var r=this.idByIndex(t),u=this.item(r);this.order.removeAt(t);this.order.insertAt(r,Math.min(this.order.length,i));this.callEvent("onStoreUpdated",[r,u,"move"])},scheme:function(n){this._scheme={};this._scheme_init=n.$init;this._scheme_update=n.$update;this._scheme_serialize=n.$serialize;this._scheme_group=n.$group;this._scheme_sort=n.$sort;for(var t in n)t.substr(0,1)!="$"&&(this._scheme[t]=n[t])},sync:function(t,i,r){typeof t=="string"&&(t=$$("source"));typeof i!="function"&&(r=i,i=null);n.debug_bind&&(this.debug_sync_master=t,n.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id));this._backbone_source=!1;t.name!="DataStore"&&(t.data&&t.data.name=="DataStore"?t=t.data:this._backbone_source=!0);var u=n.bind(function(u,f,e){var o,s;if(this._backbone_source){if(!u)return;if(u.indexOf("change")===0){if(u=="change"){this.pull[f.id]=f.attributes;this.refresh(f.id);return}return}for(u=="reset"&&(e=f),this.order=[],this.pull={},this._filter_order=null,o=0;o<e.models.length;o++)s=e.models[o].id,this.order.push(s),this.pull[s]=e.models[o].attributes}else this._filter_order=null,this.order=n.toArray([].concat(t.order)),this.pull=t.pull;i&&this.silent(i);this._on_sync&&this._on_sync();n.debug_bind&&n.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id);this.callEvent("onSyncApply",[]);r?r=!1:this.refresh()},this);this._backbone_source?t.bind("all",u):this._sync_events=[t.attachEvent("onStoreUpdated",u),t.attachEvent("onIdChange",n.bind(function(n,t){this.changeId(n,t)},this))];u()},add:function(t,i){var u,e;if(this._scheme)for(u in this._scheme)n.isUndefined(t[u])&&(t[u]=this._scheme[u]);this._scheme_init&&this._scheme_init(t);var r=this.id(t),f=arguments[2]||this.order,o=f.length;return((n.isUndefined(i)||i<0)&&(i=o),i>o&&(n.log("Warning","DataStore:add","Index of out of bounds"),i=Math.min(f.length,i)),this.callEvent("onBeforeAdd",[r,t,i])===!1)?!1:(n.assert(!this.exists(r),"Not unique ID"),this.pull[r]=t,f.insertAt(r,i),this._filter_order&&(e=this._filter_order.length,!i&&this.order.length&&(e=0),this._filter_order.insertAt(r,e)),this.callEvent("onAfterAdd",[r,i]),this.callEvent("onStoreUpdated",[r,t,"add"]),r)},remove:function(t){var i,r;if(n.isArray(t)){for(i=0;i<t.length;i++)this.remove(t[i]);return}if(this.callEvent("onBeforeDelete",[t])===!1)return!1;n.assert(this.exists(t),"Not existing ID in remove command"+t);r=this.item(t);this.order.remove(t);this._filter_order&&this._filter_order.remove(t);delete this.pull[t];this._marks[t]&&delete this._marks[t];this.callEvent("onAfterDelete",[t]);this.callEvent("onStoreUpdated",[t,r,"delete"])},clearAll:function(){this.pull={};this.order=n.toArray();this._filter_order=this.url=null;this.callEvent("onClearAll",[]);this.refresh()},idByIndex:function(t){return(t>=this.order.length||t<0)&&n.log("Warning","DataStore::idByIndex Incorrect index"),this.order[t]},indexById:function(t){var i=this.order.find(t);return this.pull[t]||n.log("Warning","DataStore::indexById Non-existing ID: "+t),i},next:function(n,t){return this.order[this.indexById(n)+(t||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(n,t){return this.order[this.indexById(n)-(t||1)]},sort:function(n,t,i){var r=n,u;(typeof n=="function"?r={as:n,dir:t}:typeof n=="string"&&(r={by:n.replace(/#/g,""),dir:t,as:i}),u=[r.by,r.dir,r.as],this.callEvent("onBeforeSort",u))&&(this._sort_core(r),this.refresh(),this.callEvent("onAfterSort",u))},_sort_core:function(t){if(this.order.length){var r=this._sort._create(t),i=this.getRange(this.first(),this.last());i.sort(r);this.order=i.map(function(t){return n.assert(t,"Client sorting can't be used with dynamic loading"),this.id(t)},this)}},_filter_reset:function(n){this._filter_order&&!n&&(this.order=this._filter_order,delete this._filter_order)},_filter_core:function(t,i,r){for(var f,e=n.toArray(),u=0;u<this.order.length;u++)f=this.order[u],t(this.item(f),i)&&e.push(f);r&&this._filter_order||(this._filter_order=this.order);this.order=e},filter:function(t,i,r){if(this.callEvent("onBeforeFilter",[t,i])&&(this._filter_reset(r),this.order.length)){if(t){var u=t;i=i||"";typeof t=="string"&&(t=t.replace(/#/g,""),typeof i=="function"?u=function(n){return i(n[t])}:(i=i.toString().toLowerCase(),u=function(i,r){return n.assert(i,"Client side filtering can't be used with dynamic loading"),(i[t]||"").toString().toLowerCase().indexOf(r)!=-1}));this._filter_core(u,i,r,this._filterMode)}this.refresh();this.callEvent("onAfterFilter",[])}},each:function(n,t){for(var i=0;i<this.order.length;i++)n.call(t||this,this.item(this.order[i]))},_methodPush:function(n,t){return function(){return n[t].apply(n,arguments)}},addMark:function(n,t,i,r){var u=this._marks[n]||{};return this._marks[n]=u,u[t]||(u[t]=r||!0,i&&(this.item(n).$css=(this.item(n).$css||"")+" "+t,this.refresh(n))),u[t]},removeMark:function(n,t,i){var r=this._marks[n],u;r&&r[t]&&delete r[t];i&&(u=this.item(n).$css,u&&(this.item(n).$css=u.replace(t,""),this.refresh(n)))},hasMark:function(n,t){var i=this._marks[n];return i&&i[t]},provideApi:function(n,t){var r,i;for(this.debug_bind_master=n,t&&this.mapEvent({onbeforesort:n,onaftersort:n,onbeforeadd:n,onafteradd:n,onbeforedelete:n,onafterdelete:n,onbeforeupdate:n}),r=["sort","add","remove","exists","idByIndex","indexById","item","update","refresh","dataCount","filter","next","previous","clearAll","first","last","serialize","sync","addMark","removeMark","hasMark"],i=0;i<r.length;i++)n[r[i]]=this._methodPush(this,r[i])},serialize:function(){for(var n,i=this.order,r=[],t=0;t<i.length;t++)(n=this.pull[i[t]],this._scheme_serialize&&(n=this._scheme_serialize(n),n===!1))||r.push(n);return r},_sort:{_create:function(n){return this._dir(n.dir,this._by(n.by,n.as))},_as:{date:function(n,t){return n=+n,t=+t,n>t?1:n<t?-1:0},int:function(n,t){return n=n*1,t=t*1,n>t?1:n<t?-1:0},string_strict:function(n,t){return n=n.toString(),t=t.toString(),n>t?1:n<t?-1:0},string:function(n,t){return t?n?(n=n.toString().toLowerCase(),t=t.toString().toLowerCase(),n>t?1:n<t?-1:0):-1:1}},_by:function(t,i){return t?(typeof i!="function"&&(i=this._as[i||"string"]),n.assert(i,"Invalid sorting method"),function(n,r){return i(n[t],r[t])}):i},_dir:function(n,t){return n=="asc"||!n?t:function(n,i){return t(n,i)*-1}}}};n.BaseBind={debug_freid_ignore:{id:!0},bind:function(t,i,r){var f,e,u;typeof t=="string"&&(t=n.ui.get(t));t._initBindSource&&t._initBindSource();this._initBindSource&&this._initBindSource();t.getBindData||n.extend(t,n.BindSource);this._bind_ready||(f=this.render,this.filter&&(e=this._settings.id,this.data._on_sync=function(){t._bind_updated[e]=!1}),this.render=function(){if(!this._in_bind_processing){this._in_bind_processing=!0;var n=this.callEvent("onBindRequest");return this._in_bind_processing=!1,f.apply(this,n===!1?arguments:[])}},(this.getValue||this.getValues)&&(this.save=function(){(!this.validate||this.validate())&&t.setBindData(this.getValue?this.getValue:this.getValues(),this._settings.id)}),this._bind_ready=!0);t.addBind(this._settings.id,i,r);n.debug_bind&&n.log("[bind] "+this.name+"@"+this._settings.id+" <= "+t.name+"@"+t._settings.id);u=this._settings.id;this.attachEvent(this.touchable?"onAfterRender":"onBindRequest",function(){return t.getBindData(u)});!this._settings.dataFeed&&this.loadNext&&this.data.attachEvent("onStoreLoad",function(){t._bind_updated[u]=!1});this.isVisible(this._settings.id)&&this.refresh()},unbind:function(n){return this._unbind(n)},_unbind:function(n){var t,i;if(n.removeBind(this._settings.id),t=this._sync_events||(this.data?this.data._sync_events:0),t&&n.data)for(i=0;i<t.length;i++)n.data.detachEvent(t[i])}};n.BindSource={$init:function(){this._bind_hash={};this._bind_updated={};this._ignore_binds={};this._bind_specific_rules(this)},saveBatch:function(n){this._do_not_update_binds=!0;n.call(this);this._do_not_update_binds=!1;this._update_binds()},setBindData:function(t,i){if(i&&(this._ignore_binds[i]=!0),n.debug_bind&&n.log("[bind:save] "+this.name+"@"+this._settings.id+" <= @"+i),this.setValue)this.setValue(t);else if(this.setValues)this.setValues(t);else{var r=this.getCursor();r&&(t=n.extend(this.item(r),t,!0),this.update(r,t))}this.callEvent("onBindUpdate",[t,i,r]);this.save&&this.save();i&&(this._ignore_binds[i]=!1)},getBindData:function(t,i){if(this._bind_updated[t])return!1;var r=n.ui.get(t);r.isVisible(r._settings.id)&&(this._bind_updated[t]=!0,n.debug_bind&&n.log("[bind:request] "+this.name+"@"+this._settings.id+" => "+r.name+"@"+r._settings.id),this._bind_update(r,this._bind_hash[t][0],this._bind_hash[t][1]),i&&r.filter&&r.refresh())},addBind:function(n,t,i){this._bind_hash[n]=[t,i]},removeBind:function(n){delete this._bind_hash[n];delete this._bind_updated[n];delete this._ignore_binds[n]},_bind_specific_rules:function(t){t.filter?n.extend(this,n.CollectionBind):t.setValue?n.extend(this,n.ValueBind):n.extend(this,n.RecordBind)},_update_binds:function(){if(!this._do_not_update_binds)for(var n in this._bind_hash)this._ignore_binds[n]||(this._bind_updated[n]=!1,this.getBindData(n,!0))},_bind_update_common:function(t,i,r){t.setValue?t.setValue(r?r[i]:r):t.filter?t.data.silent(function(){this.filter(i,r)}):!r&&t.clear?t.clear():t._check_data_feed(r)&&t.setValues(n.clone(r));t.callEvent("onBindApply",[r,i,this])}};n.DataValue=n.proto({name:"DataValue",isVisible:function(){return!0},$init:function(t){this.data=""||t;var i=t&&t.id?t.id:n.uid();this._settings={id:i};n.ui.views[i]=this},setValue:function(n){this.data=n;this.callEvent("onChange",[n])},getValue:function(){return this.data},refresh:function(){this.callEvent("onBindRequest")}},n.EventSystem,n.BaseBind);n.DataRecord=n.proto({name:"DataRecord",isVisible:function(){return!0},$init:function(t){this.data=t||{};var i=t&&t.id?t.id:n.uid();this._settings={id:i};n.ui.views[i]=this},getValues:function(){return this.data},setValues:function(n){this.data=n;this.callEvent("onChange",[n])},refresh:function(){this.callEvent("onBindRequest")}},n.EventSystem,n.BaseBind,n.AtomDataLoader,n.Settings);n.DataCollection=n.proto({name:"DataCollection",isVisible:function(){return!this.data.order.length&&!this.data._filter_order&&!this._settings.dataFeed?!1:!0},$init:function(t){this.data.provideApi(this,!0);var i=t&&t.id?t.id:n.uid();this._settings.id=i;n.ui.views[i]=this;this.data.attachEvent("onStoreLoad",n.bind(function(){this.callEvent("onBindRequest",[])},this))},refresh:function(){this.callEvent("onBindRequest",[])}},n.DataLoader,n.EventSystem,n.BaseBind,n.Settings);n.ValueBind={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(n,t,i){var r=this.getValue()||"",u;i&&(r=i(r));n.setValue?n.setValue(r):n.filter?n.data.silent(function(){this.filter(t,r)}):(u={},u[t]=r,n._check_data_feed(r)&&n.setValues(u));n.callEvent("onBindApply",[r,t,this])}};n.RecordBind={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(n,t){var i=this.getValues()||null;this._bind_update_common(n,t,i)}};n.CollectionBind={$init:function(){this._cursor=null;this.attachEvent("onSelectChange",function(){var n=this.getSelected();this.setCursor(n?n.id||n:null)});this.attachEvent("onAfterCursorChange",this._update_binds);this.data.attachEvent("onStoreUpdated",n.bind(function(n,t,i){n&&n==this.getCursor()&&i!="paint"&&this._update_binds()},this));this.data.attachEvent("onClearAll",n.bind(function(){this._cursor=null},this));this.data.attachEvent("onIdChange",n.bind(function(n,t){this._cursor==n&&(this._cursor=t)},this))},setCursor:function(n){n!=this._cursor&&(n===null||this.item(n))&&(this.callEvent("onBeforeCursorChange",[this._cursor]),this._cursor=n,this.callEvent("onAfterCursorChange",[n]))},getCursor:function(){return this._cursor},_bind_update:function(n,t){var i=this.item(this.getCursor())||this._settings.defaultData||null;this._bind_update_common(n,t,i)}};n.ui||(n.ui={});n.ui.views||(n.ui.views={},n.ui.get=function(t){return t._settings?t:n.ui.views[t]});window.dhtmlx&&(dhtmlx.BaseBind=n.BaseBind);dhtmlXDataStore=function(t){var i=new n.DataCollection(t);return i["_dp_init"]=function(n){var t="_methods";n[t]=["dummy","dummy","changeId","dummy"];this.data._old_names={add:"inserted",update:"updated","delete":"deleted"};this.data.attachEvent("onStoreUpdated",function(t,i,r){t&&!n._silent&&n.setUpdated(t,!0,this._old_names[r])});t="_getRowData";n[t]=function(n){var t=this.obj.data.item(n),i={id:n},r;if(i[this.action_param]=this.obj.getUserData(n),t)for(r in t)i[r]=t[r];return i};this.changeId=function(t,i){this.data.changeId(t,i);n._silent=!0;this.data.callEvent("onStoreUpdated",[i,this.item(i),"update"]);n._silent=!1};t="_clearUpdateFlag";n[t]=function(){};this._userdata={}},i.dummy=function(){},i.setUserData=function(n,t,i){this._userdata[n]=i},i.getUserData=function(n){return this._userdata[n]},i.dataFeed=function(n){this.define("dataFeed",n)},n.extend(i,n.BindSource),i};window.dhtmlXDataView&&(dhtmlXDataView.prototype._initBindSource=function(){this.isVisible=function(){return!this.data.order.length&&!this.data._filter_order&&!this._settings.dataFeed?!1:!0};this._settings=this._settings||this["_settings"];this._settings.id||(this._settings.id=n.uid());this.unbind=n.BaseBind.unbind;this.unsync=n.BaseBind.unsync;n.ui.views[this._settings.id]=this});window.dhtmlXChart&&(dhtmlXChart.prototype._initBindSource=function(){this.isVisible=function(){return!this.data.order.length&&!this.data._filtered_state&&!this._settings.dataFeed?!1:!0};this._settings=this._settings||this["_settings"];this._settings.id||(this._settings.id=n.uid());this.unbind=n.BaseBind.unbind;this.unsync=n.BaseBind.unsync;n.ui.views[this._settings.id]=this});n.BaseBind.unsync=function(t){return n.BaseBind._unbind.call(this,t)};n.BaseBind.unbind=function(t){return n.BaseBind._unbind.call(this,t)};n.BaseBind.legacyBind=function(){return n.BaseBind.bind.apply(this,arguments)};n.BaseBind.legacySync=function(n){return this._initBindSource&&this._initBindSource(),n._initBindSource&&n._initBindSource(),this.attachEvent("onAfterEditStop",function(n){return this.save(n),!0}),this.attachEvent("onDataRequest",function(t,i){for(var r=t;r<t+i;r++)if(!n.data.order[r])return n.loadNext(i,t),!1}),this.save=function(t){var r,u,i;t||(t=this.getCursor());r=this.item(t);u=n.item(t);for(i in r)i.indexOf("$")!==0&&(u[i]=r[i]);n.refresh(t)},n&&n.name=="DataCollection"?n.data.sync.apply(this.data,arguments):this.data.sync.apply(this.data,arguments)};window.dhtmlXForm&&(dhtmlXForm.prototype.bind=function(t){n.BaseBind.bind.apply(this,arguments);t.getBindData(this._settings.id)},dhtmlXForm.prototype.unbind=function(t){n.BaseBind._unbind.call(this,t)},dhtmlXForm.prototype._initBindSource=function(){n.isUndefined(this._settings)&&(this._settings={id:n.uid(),dataFeed:this._server_feed},n.ui.views[this._settings.id]=this)},dhtmlXForm.prototype._check_data_feed=function(n){if(!this._settings.dataFeed||this._ignore_feed||!n)return!0;var t=this._settings.dataFeed;return typeof t=="function"?t.call(this,n.id||n,n):(t=t+(t.indexOf("?")==-1?"?":"&")+"action=get&id="+encodeURIComponent(n.id||n),this.load(t),!1)},dhtmlXForm.prototype.setValues=dhtmlXForm.prototype.setFormData,dhtmlXForm.prototype.getValues=function(){return this.getFormData(!1,!0)},dhtmlXForm.prototype.dataFeed=function(n){this._settings?this._settings.dataFeed=n:this._server_feed=n},dhtmlXForm.prototype.refresh=dhtmlXForm.prototype.isVisible=function(){return!0});window.scheduler&&(window.Scheduler||(window.Scheduler={}),Scheduler.$syncFactory=function(t){t.sync=function(i,r){this._initBindSource&&this._initBindSource();i._initBindSource&&i._initBindSource();var f="_process_loading",u=function(){var u;t.clearAll();var e=i.data.order,o=i.data.pull,s=[];for(u=0;u<e.length;u++)s[u]=r&&r.copy?n.clone(o[e[u]]):o[e[u]];t[f](s);t.callEvent("onSyncApply",[])};this.save=function(t){t||(t=this.getCursor());var r=this.item(t),u=i.item(t);this.callEvent("onStoreSave",[t,r,u])&&(n.extend(i.item(t),r,!0),i.update(t))};this.item=function(n){return this.getEvent(n)};this._sync_events=[i.data.attachEvent("onStoreUpdated",function(){u.call(this)}),i.data.attachEvent("onIdChange",function(n,i){t.changeEventId(n,i)})];this.attachEvent("onEventChanged",function(n){this.save(n)});this.attachEvent("onEventAdded",function(n,t){i.data.pull[n]||i.add(t)});this.attachEvent("onEventDeleted",function(n){i.data.pull[n]&&i.remove(n)});u()};t.unsync=function(t){n.BaseBind._unbind.call(this,t)};t._initBindSource=function(){this._settings||(this._settings={id:n.uid()})}},Scheduler.$syncFactory(window.scheduler));window.dhtmlXCombo&&(dhtmlXCombo.prototype.bind=function(){n.BaseBind.bind.apply(this,arguments)},dhtmlXCombo.prototype.unbind=function(t){n.BaseBind._unbind.call(this,t)},dhtmlXCombo.prototype.unsync=function(t){n.BaseBind._unbind.call(this,t)},dhtmlXCombo.prototype.dataFeed=function(n){this._settings?this._settings.dataFeed=n:this._server_feed=n},dhtmlXCombo.prototype.sync=function(n){this._initBindSource&&this._initBindSource();n._initBindSource&&n._initBindSource();var t=this,i=function(){t.clearAll();t.addOption(this.serialize());t.callEvent("onSyncApply",[])};this._sync_events=[n.data.attachEvent("onStoreUpdated",function(){i.call(this)}),n.data.attachEvent("onIdChange",function(n,i){t.changeOptionId(n,i)})];i.call(n)},dhtmlXCombo.prototype._initBindSource=function(){n.isUndefined(this._settings)&&(this._settings={id:n.uid(),dataFeed:this._server_feed},n.ui.views[this._settings.id]=this,this.data={silent:n.bind(function(n){n.call(this)},this)},dhx4._eventable(this.data),this.attachEvent("onChange",function(){this.callEvent("onSelectChange",[this.getSelectedValue()])}),this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])}))},dhtmlXCombo.prototype.item=function(n){return this.getOption(n)},dhtmlXCombo.prototype.getSelected=function(){return this.getSelectedValue()},dhtmlXCombo.prototype.isVisible=function(){return!this.optionsArr.length&&!this._settings.dataFeed?!1:!0},dhtmlXCombo.prototype.refresh=function(){this.render(!0)});window.dhtmlXGridObject&&(dhtmlXGridObject.prototype.bind=function(){n.BaseBind.bind.apply(this,arguments)},dhtmlXGridObject.prototype.unbind=function(t){n.BaseBind._unbind.call(this,t)},dhtmlXGridObject.prototype.unsync=function(t){n.BaseBind._unbind.call(this,t)},dhtmlXGridObject.prototype.dataFeed=function(n){this._settings?this._settings.dataFeed=n:this._server_feed=n},dhtmlXGridObject.prototype.sync=function(t,i){var u;this._initBindSource&&this._initBindSource();t._initBindSource&&t._initBindSource();var r=this,f="_parsing",e="_parser",o="_locator",s="_process_store_row",h="_get_store_data";i&&i.filter&&(r.attachEvent("onFilterStart",function(n,i){var u="_con_f_used";return r[u]&&r[u].length?!1:(t.data.silent(function(){var u,f;for(t.filter(),u=0;u<n.length;u++)i[u]!=""&&(f=r.getColumnId(n[u]),t.filter("#"+f+"#",i[u],u!=0))}),t.refresh(),!1)}),r.collectValues=function(n){var i=this.getColumnId(n);return function(n){var t=[],i={};return this.data.each(function(r){var u=r[n];i[u]||(i[u]=!0,t.push(u))}),t.sort(),t}.call(t,i)});this.save=function(i){i||(i=this.getCursor());n.extend(t.item(i),this.item(i),!0);t.update(i)};u=function(){var u=r.getCursor?r.getCursor():null,c=0,i,n,t;if(r._legacy_ignore_next?(c=r._legacy_ignore_next,r._legacy_ignore_next=!1):r.clearAll(),i=this.dataCount(),i){for(r[f]=!0,n=c;n<i;n++)(t=this.order[n],t)&&(c&&r.rowsBuffer[n]||(r.rowsBuffer[n]={idd:t,data:this.pull[t]},r.rowsBuffer[n][e]=r[s],r.rowsBuffer[n][o]=r[h],r.rowsAr[t]=this.pull[t]));r.rowsBuffer[i-1]||(r.rowsBuffer[i-1]=dhtmlx.undefined,r.xmlFileUrl=r.xmlFileUrl||this.url);r.pagingOn?r.changePage():r._srnd&&r._fillers?r._update_srnd_view():(r.render_dataset(),r.callEvent("onXLE",[]));r[f]=!1}u&&r.setCursor&&r.setCursor(r.rowsAr[u]?u:null);r.callEvent("onSyncApply",[])};this._sync_events=[t.data.attachEvent("onStoreUpdated",function(n,t,i){i=="delete"?(r.deleteRow(n),r.data.callEvent("onStoreUpdated",[n,t,i])):i=="update"?(r.callEvent("onSyncUpdate",[t,i]),r.update(n,t),r.data.callEvent("onStoreUpdated",[n,t,i])):i=="add"?(r.callEvent("onSyncUpdate",[t,i]),r.add(n,t,this.indexById(n)),r.data.callEvent("onStoreUpdated",[n,t,i])):u.call(this)}),t.data.attachEvent("onStoreLoad",function(n,i){r.xmlFileUrl=t.data.url;r._legacy_ignore_next=n.getInfo(i)._from}),t.data.attachEvent("onIdChange",function(n,t){r.changeRowId(n,t)})];r.attachEvent("onDynXLS",function(n,i){for(var f=n;f<n+i;f++)if(!t.data.order[f])return t.loadNext(i,n),!1;r._legacy_ignore_next=n;u.call(t.data)});u.call(t.data);r.attachEvent("onEditCell",function(n,t,i,r,u){return n==2&&r!=u&&this.save(t),!0});r.attachEvent("onClearAll",function(){this["_f_rowsBuffer"]=null});i&&i.sort&&r.attachEvent("onBeforeSorting",function(n,i,u){if(i=="connector")return!1;var f=this.getColumnId(n);return t.sort("#"+f+"#",u=="asc"?"asc":"desc",i=="int"?i:"string"),r.setSortImgState(!0,n,u),!1});i&&i.select&&r.attachEvent("onRowSelect",function(n){t.setCursor(n)});r.clearAndLoad=function(n){t.clearAll();t.load(n)}},dhtmlXGridObject.prototype._initBindSource=function(){var i,t;if(n.isUndefined(this._settings)){for(this._settings={id:n.uid(),dataFeed:this._server_feed},n.ui.views[this._settings.id]=this,this.data={silent:n.bind(function(n){n.call(this)},this)},dhx4._eventable(this.data),i="_cCount",t=0;t<this[i];t++)this.columnIds[t]||(this.columnIds[t]="cell"+t);this.attachEvent("onSelectStateChanged",function(n){this.callEvent("onSelectChange",[n])});this.attachEvent("onSelectionCleared",function(){this.callEvent("onSelectChange",[null])});this.attachEvent("onEditCell",function(n,t){return n===2&&this.getCursor&&t&&t==this.getCursor()&&this._update_binds(),!0});this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])})}},dhtmlXGridObject.prototype.item=function(t){var u,f,r,e,i;if(t===null||(u=this.getRowById(t),!u))return null;for(f="_attrs",r=n.copy(u[f]),r.id=t,e=this.getColumnsNum(),i=0;i<e;i++)r[this.columnIds[i]]=this.cells(t,i).getValue();return r},dhtmlXGridObject.prototype.update=function(t,i){for(var f,e,r,u=0;u<this.columnIds.length;u++)r=this.columnIds[u],n.isUndefined(i[r])||this.cells(t,u).setValue(i[r]);f="_attrs";e=this.getRowById(t)[f];for(r in i)e[r]=i[r];this.callEvent("onBindUpdate",[i,null,t])},dhtmlXGridObject.prototype.add=function(t,i,r){for(var f,o,e=[],u=0;u<this.columnIds.length;u++)f=this.columnIds[u],e[u]=n.isUndefined(i[f])?"":i[f];this.addRow(t,e,r);o="_attrs";this.getRowById(t)[o]=n.copy(i)},dhtmlXGridObject.prototype.getSelected=function(){return this.getSelectedRowId()},dhtmlXGridObject.prototype.isVisible=function(){return!this.rowsBuffer.length&&!this["_f_rowsBuffer"]&&!this._settings.dataFeed?!1:!0},dhtmlXGridObject.prototype.refresh=function(){this.render_dataset()},dhtmlXGridObject.prototype.filter=function(t,i){var r,u,f,e;if(this._settings.dataFeed){if(r={},!t&&!i)return;if(typeof t=="function"){if(!i)return;t(i,r)}else n.isUndefined(t)?r=i:r[t]=i;if(this.clearAll(),u=this._settings.dataFeed,typeof u=="function")return u.call(this,i,r);f=[];for(e in r)f.push("dhx_filter["+e+"]="+encodeURIComponent(r[e]));return this.load(u+(u.indexOf("?")<0?"?":"&")+f.join("&")),!1}if(i===null)return this.filterBy(0,function(){return!1});this.filterBy(0,function(n,r){return t.call(this,r,i)})});window.dhtmlXTreeObject&&(dhtmlXTreeObject.prototype.bind=function(){n.BaseBind.bind.apply(this,arguments)},dhtmlXTreeObject.prototype.unbind=function(t){n.BaseBind._unbind.call(this,t)},dhtmlXTreeObject.prototype.dataFeed=function(n){this._settings?this._settings.dataFeed=n:this._server_feed=n},dhtmlXTreeObject.prototype._initBindSource=function(){n.isUndefined(this._settings)&&(this._settings={id:n.uid(),dataFeed:this._server_feed},n.ui.views[this._settings.id]=this,this.data={silent:n.bind(function(n){n.call(this)},this)},dhx4._eventable(this.data),this.attachEvent("onSelect",function(n){this.callEvent("onSelectChange",[n])}),this.attachEvent("onEdit",function(n,t){return n===2&&t&&t==this.getCursor()&&this._update_binds(),!0}))},dhtmlXTreeObject.prototype.item=function(n){return n===null?null:{id:n,text:this.getItemText(n)}},dhtmlXTreeObject.prototype.getSelected=function(){return this.getSelectedItemId()},dhtmlXTreeObject.prototype.isVisible=function(){return!0},dhtmlXTreeObject.prototype.refresh=function(){},dhtmlXTreeObject.prototype.filter=function(t,i){var r,u,f,e;if(this._settings.dataFeed){if(r={},!t&&!i)return;if(typeof t=="function"){if(!i)return;t(i,r)}else n.isUndefined(t)?r=i:r[t]=i;if(this.deleteChildItems(0),u=this._settings.dataFeed,typeof u=="function")return u.call(this,[data.id||data,data]);f=[];for(e in r)f.push("dhx_filter["+e+"]="+encodeURIComponent(r[e]));return this.loadXML(u+(u.indexOf("?")<0?"?":"&")+f.join("&")),!1}},dhtmlXTreeObject.prototype.update=function(t,i){n.isUndefined(i.text)||this.setItemText(t,i.text)})}();dataProcessor.prototype={url:function(n){return n.indexOf("?")!=-1?"&":"?"},setTransactionMode:function(n,t){typeof n=="object"?(this._tMode=n.mode||this._tMode,this._headers=this._headers||n.headers,this._payload=this._payload||n.payload):(this._tMode=n,this._tSend=t);this._tMode=="REST"&&(this._tSend=!1,this._endnm=!0);this._tMode=="JSON"&&(this._tSend=!1,this._endnm=!0,this._headers=this._headers||{},this._headers["Content-type"]="application/json")},escape:function(n){return this._utf?encodeURIComponent(n):escape(n)},enableUTFencoding:function(n){this._utf=dhx4.s2b(n)},setDataColumns:function(n){this._columns=typeof n=="string"?n.split(","):n},getSyncState:function(){return!this.updatedRows.length},enableDataNames:function(n){this._endnm=dhx4.s2b(n)},enablePartialDataSend:function(n){this._changed=dhx4.s2b(n)},setUpdateMode:function(n,t){this.autoUpdate=n=="cell";this.updateMode=n;this.dnd=t},ignore:function(n,t){this._silent_mode=!0;n.call(t||window);this._silent_mode=!1},setUpdated:function(n,t,i){var r,u;(this._log("item "+n+" "+(t?"marked":"unmarked")+" ["+(i||"updated")+"]"),this._silent_mode)||(r=this.findRow(n),i=i||"updated",u=this.obj.getUserData(n,this.action_param),u&&i=="updated"&&(i=u),t?(this.set_invalid(n,!1),this.updatedRows[r]=n,this.obj.setUserData(n,this.action_param,i),this._in_progress[n]&&(this._in_progress[n]="wait")):this.is_invalid(n)||(this.updatedRows.splice(r,1),this.obj.setUserData(n,this.action_param,"")),t||this._clearUpdateFlag(n),this.markRow(n,t,i),t&&this.autoUpdate&&this.sendData(n))},_clearUpdateFlag:function(){},markRow:function(n,t,i){var u="",r=this.is_invalid(n),f;if(r&&(u=this.styles[r],t=!0),this.callEvent("onRowMark",[n,t,i,r])&&(u=this.styles[t?i:"clear"]+u,this.obj[this._methods[0]](n,u),r&&r.details))for(u+=this.styles[r+"_cell"],f=0;f<r.details.length;f++)r.details[f]&&this.obj[this._methods[1]](n,f,u)},getState:function(n){return this.obj.getUserData(n,this.action_param)},is_invalid:function(n){return this._invalid[n]},set_invalid:function(n,t,i){i&&(t={value:t,details:i,toString:function(){return this.value.toString()}});this._invalid[n]=t},checkBeforeUpdate:function(){return!0},sendData:function(n){if(n&&this._log("Sending: "+n),!this._waitMode||this.obj.mytype!="tree"&&!this.obj._h2){if(this.obj.editStop&&this.obj.editStop(),typeof n=="undefined"||this._tSend)return this.sendAllData();if(this._in_progress[n]||(this.messages=[],this.getState(n)!=="deleted"&&!this.checkBeforeUpdate(n)&&this.callEvent("onValidationError",[n,this.messages])))return!1;this._beforeSendData(this._getRowData(n),n)}},_beforeSendData:function(n,t){if(!this.callEvent("onBeforeUpdate",[t,this.getState(t),n]))return!1;this._sendData(n,t)},serialize:function(n,t){var i,u,r;if(typeof n=="string")return n;if(typeof t!="undefined")return this.serialize_one(n,"");i=[];u=[];for(r in n)n.hasOwnProperty(r)&&(i.push(this.serialize_one(n[r],r+this.post_delim)),u.push(r));return i.push("ids="+this.escape(u.join(","))),window.dhtmlx&&dhtmlx.security_key&&i.push("dhx_security="+dhtmlx.security_key),i.join("&")},serialize_one:function(n,t){var r,i;if(typeof n=="string")return n;r=[];for(i in n)if(n.hasOwnProperty(i)){if((i=="id"||i==this.action_param)&&this._tMode=="REST")continue;r.push(this.escape((t||"")+i)+"="+this.escape(n[i]))}return r.join("&")},_applyPayload:function(n){if(this._payload)for(var t in this._payload)n=n+(n.indexOf("?")===-1?"?":"&")+this.escape(t)+"="+this.escape(this._payload[t]);return n},_sendData:function(n,t){var l,s,i,o;if(this._log("url: "+this.serverProcessor),this._log(n),n){if(!this.callEvent("onBeforeDataSending",t?[t,this.getState(t),n]:[null,null,n]))return!1;t&&(this._in_progress[t]=(new Date).valueOf());var h=this,f=function(i){var r=[],u;if(t)r.push(t);else if(n)for(u in n)r.push(u);return h.afterUpdate(h,i,r)},c=this.serverProcessor+(this._user?this.url(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.obj.getUserData(0,"version")].join("&"):""),e=this._applyPayload(c);if(this._tMode=="GET")dhx4.ajax.query({url:e+(e.indexOf("?")!=-1?"&":"?")+this.serialize(n,t),method:"GET",headers:this._headers,callback:f});else if(this._tMode=="POST")dhx4.ajax.query({url:e,method:"POST",headers:this._headers,callback:f,data:this.serialize(n,t)});else if(this._tMode=="JSON"){l=n[this.action_param];i={};for(s in n)i[s]=n[s];delete i[this.action_param];delete i.id;delete i.gr_id;dhx4.ajax.query({url:e,method:"POST",headers:this._headers,callback:f,data:JSON.stringify({id:t,action:l,data:i})})}else if(this._tMode=="REST"){var a=this.getState(t),u=c.replace(/(\&|\?)editing\=true/,""),r=u.split("?");r[1]&&(r[1]="?"+r[1]);i="";o="post";a=="inserted"?i=this.serialize(n,t):a=="deleted"?(o="DELETE",u=r[0]+t+(r[1]||"")):(o="PUT",i=this.serialize(n,t),u=r[0]+t+(r[1]||""));this._applyPayload(u);dhx4.ajax.query({url:u,method:o,headers:this._headers,data:i,callback:f})}this._waitMode++}},sendAllData:function(){var t,n;if(this._log("Sending all updated items"),this.updatedRows.length){for(this.messages=[],t=!0,n=0;n<this.updatedRows.length;n++)this.getState(this.updatedRows[n])!=="deleted"&&(t&=this.checkBeforeUpdate(this.updatedRows[n]));if(!t&&!this.callEvent("onValidationError",["",this.messages]))return!1;if(this._tSend)this._sendData(this._getAllData());else for(n=0;n<this.updatedRows.length;n++)if(!this._in_progress[this.updatedRows[n]]){if(this.is_invalid(this.updatedRows[n]))continue;if(this._beforeSendData(this._getRowData(this.updatedRows[n]),this.updatedRows[n]),this._waitMode&&(this.obj.mytype=="tree"||this.obj._h2))return}}},_getAllData:function(){for(var n,i={},r=!1,t=0;t<this.updatedRows.length;t++)(n=this.updatedRows[t],this._in_progress[n]||this.is_invalid(n))||this.callEvent("onBeforeUpdate",[n,this.getState(n),this._getRowData(n)])&&(i[n]=this._getRowData(n,n+this.post_delim),r=!0,this._in_progress[n]=(new Date).valueOf());return r?i:null},setVerificator:function(n,t){this.mandatoryFields[n]=t||function(n){return n!==""}},clearVerificator:function(n){this.mandatoryFields[n]=!1},findRow:function(n){for(var t=0,t=0;t<this.updatedRows.length;t++)if(n==this.updatedRows[t])break;return t},defineAction:function(n,t){this._uActions||(this._uActions=[]);this._uActions[n]=t},afterUpdateCallback:function(n,t,i,r){var u,f,e;if(this._log("Action: "+i+" SID:"+n+" TID:"+t,r),u=n,f=i!="error"&&i!="invalid",f||this.set_invalid(n,i),this._uActions&&this._uActions[i]&&!this._uActions[i](r))return delete this._in_progress[u];this._in_progress[u]!="wait"&&this.setUpdated(n,!1);e=n;switch(i){case"inserted":case"insert":t!=n&&(this.obj[this._methods[2]](n,t),n=t);break;case"delete":case"deleted":return this.obj.setUserData(n,this.action_param,"true_deleted"),this.obj[this._methods[3]](n),delete this._in_progress[u],this.callEvent("onAfterUpdate",[n,i,t,r])}this._in_progress[u]!="wait"?(f&&this.obj.setUserData(n,this.action_param,""),delete this._in_progress[u]):(delete this._in_progress[u],this.setUpdated(t,!0,this.obj.getUserData(n,this.action_param)));this.callEvent("onAfterUpdate",[e,i,t,r])},enableDebug:function(){this._debug=!0},_log:function(){this._debug&&window.console&&window.console.info&&window.console.info.apply(window.console,arguments)},afterUpdate:function(n,t,i){var u,f,e;if(this._log("Server response received"),window.JSON)try{var r=JSON.parse(t.xmlDoc.responseText),s=r.action||this.getState(i)||"updated",h=r.sid||i[0],c=r.tid||i[0];n.afterUpdateCallback(h,c,s,r);n.finalizeUpdate();return}catch(l){}if((u=dhx4.ajax.xmltop("data",t.xmlDoc),!u||u.tagName=="DIV")||(f=dhx4.ajax.xpath("//data/action",u),!f.length))return this.cleanUpdate(i);for(e=0;e<f.length;e++){var o=f[e],s=o.getAttribute("type"),h=o.getAttribute("sid"),c=o.getAttribute("tid");n.afterUpdateCallback(h,c,s,o)}n.finalizeUpdate()},cleanUpdate:function(n){if(n)for(var t=0;t<n.length;t++)delete this._in_progress[n[t]]},finalizeUpdate:function(){this._waitMode&&this._waitMode--;(this.obj.mytype=="tree"||this.obj._h2)&&this.updatedRows.length&&this.sendData();this.callEvent("onAfterUpdateFinish",[]);this.updatedRows.length||this.callEvent("onFullSync",[])},init:function(n){this.obj=n;n._dp_init&&n._dp_init(this);this.connector_init&&(n._dataprocessor=this)},setOnAfterUpdate:function(n){this.attachEvent("onAfterUpdate",n)},setOnBeforeUpdateHandler:function(n){this.attachEvent("onBeforeDataSending",n)},setAutoUpdate:function(n,t){n=n||2e3;this._user=t||(new Date).valueOf();this._need_update=!1;this._update_busy=!1;this.attachEvent("onAfterUpdate",function(n,t,i,r){this.afterAutoUpdate(n,t,i,r)});this.attachEvent("onFullSync",function(){this.fullSync()});var i=this;window.setInterval(function(){i.loadUpdate()},n)},afterAutoUpdate:function(n,t){return t=="collision"?(this._need_update=!0,!1):!0},fullSync:function(){return this._need_update==!0&&(this._need_update=!1,this.loadUpdate()),!0},getUpdates:function(n,t){if(this._update_busy)return!1;this._update_busy=!0;dhx4.ajax.get(n,t)},_v:function(n){return n.firstChild?n.firstChild.nodeValue:""},_a:function(n){for(var i=[],t=0;t<n.length;t++)i[t]=this._v(n[t]);return i},loadUpdate:function(){var n=this,i=this.obj.getUserData(0,"version"),t=this.serverProcessor+this.url(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+i].join("&");t=t.replace("editing=true&","");this.getUpdates(t,function(t){var e=dhx4.ajax.xmltop("updates",t.xmlDoc),o=dhx4.ajax.xpath("//userdata",e),i,r;if(n.obj.setUserData(0,"version",n._v(o[0])),i=dhx4.ajax.xpath("//update",e),i.length){for(n._silent_mode=!0,r=0;r<i.length;r++){var s=i[r].getAttribute("status"),u=i[r].getAttribute("id"),f=i[r].getAttribute("parent");switch(s){case"inserted":n.callEvent("insertCallback",[i[r],u,f]);break;case"updated":n.callEvent("updateCallback",[i[r],u,f]);break;case"deleted":n.callEvent("deleteCallback",[i[r],u,f])}}n._silent_mode=!1}n._update_busy=!1;n=null})}};window.dataProcessor&&!dataProcessor.prototype.init_original&&(dataProcessor.prototype.connector_init=!0);pager=pager||{};pager.PagerSelector=pager.PagerSelector||{};pager.PagerSelector=function(){function f(){t(n+1)}function e(){t(n-1)}function t(n){$("#pager-page").val(n);$("#filter-form").submit()}var i,u={page:1},n,r;return $("#pager .dropdown-menu a").click(function(){$(".dropdown-toggle").html($(this).html()+'<div class="pull-right"> <span class="my-caret"><\/span><\/div>')}),$("a[data-page-size]").click(function(n){n.preventDefault();var t=$(this).attr("data-page-size");$("#pager-size").val(t);$("#filter-form").submit()}),$("a[data-page]").click(function(n){n.preventDefault();var i=$(this).attr("data-page");t(i)}),$("#search").click(function(){n=1;$("#pager-page").val(n)}),r=function(t){i=$.extend({},u,t);n=i.PageData.Page},$("#pager-next").click(function(n){n.preventDefault();f()}),$("#pager-prev").click(function(n){n.preventDefault();e()}),{Init:r}}(),function(n){function t(){if(app.common.ui.constants!==undefined){var t=app.common.ui.constants.SideBarMenuId;n(t).length>0&&n(t).html().trim().length>0&&n(app.common.ui.constants.SideMenuId).removeClass("d-none")}}function i(){var t=window.location.pathname;t.match(/WorkOrder/)||t.match(/People/)?(n("body").addClass("wo"),n("#sideBarMenu").addClass("aside-menu-wo")):(n("body").removeClass("wo"),n("#sideBarMenu").removeClass("aside-menu-wo"))}function r(t){var i=t.html();t.parent().children().each(function(){jQuery.isEmptyObject(n(this).data())||n(this).removeData()});t.data("selected",!0);n(".dropdown-toggle").html(i).addClass("bg-warning");u()}function u(){var t=n("#searchworkorder").data("selected"),i=n("#searchactive").data("selected"),r=n("#searchlocation").data("selected");t!==undefined&&t===!0&&n("#SearchType").val(1);i!==undefined&&i===!0&&n("#SearchType").val(2);r!=undefined&&r===!0&&n("#SearchType").val(3)}n(window).on("submit",function(){showSpinner()});n(function(){n('[data-toggle="tooltip"]').tooltip();n("#workordersearch").on("click",function(t){return n("#SearchType").val()===""||n("#SearchString").val()===""?(t.preventDefault(),!1):!0});n("#search-box .dropdown-menu").find("a").on("click",function(t){t.preventDefault();r(n(this))});if(t(),i(),n("#side-menu").length>0)n("#side-menu").find("button").on("click",function(){n("body").hasClass("sidebar-lg-show")&&(n("#menu-burger").click(),reziseGrid("menu-burger"))});sidebarMenuActiveItem()})}(jQuery);
//# sourceMappingURL=bundle.min.js.map